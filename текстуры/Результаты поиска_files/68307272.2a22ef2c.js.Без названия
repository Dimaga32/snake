/*! For license information please see 68307272.2a22ef2c.js.LICENSE.txt */
(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[72672],{664282:(e,t,s)=>{"use strict";s.d(t,{Icon16Attach:()=>i});var i=(0,s(844990).makeIcon)("Icon16Attach","attach_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="attach_16"><path fill="currentColor" fill-rule="evenodd" d="M7.968 2.038a3.53 3.53 0 0 1 4.998 0 3.545 3.545 0 0 1 0 5.005L8.66 11.359a2.14 2.14 0 0 1-3.03 0 2.15 2.15 0 0 1 0-3.031l2.09-2.106a.75.75 0 1 1 1.065 1.056L6.693 9.386a.65.65 0 0 0 0 .914.64.64 0 0 0 .906 0l4.305-4.317a2.045 2.045 0 0 0 0-2.886 2.03 2.03 0 0 0-2.874 0L4.603 7.536a9 9 0 0 0-.274.28 3.203 3.203 0 0 0 0 4.3c.174.192.36.38.552.554.594.54 1.421.824 2.252.827.836.003 1.591-.278 2.068-.755q.152-.149.304-.298l2.214-2.22a.75.75 0 0 1 1.062 1.06l-2.23 2.235c-.134.135-.222.223-.301.296-.818.81-1.984 1.186-3.121 1.182-1.148-.004-2.35-.392-3.258-1.219a10 10 0 0 1-.653-.655 4.703 4.703 0 0 1 0-6.315c.075-.083.165-.173.306-.315z" clip-rule="evenodd" /></symbol>',16,16,!1,void 0)},996304:(e,t,s)=>{"use strict";s.d(t,{Icon28AdvertisingCircleFillRed:()=>i});var i=(0,s(844990).makeIcon)("Icon28AdvertisingCircleFillRed","advertising_circle_fill_red_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="advertising_circle_fill_red_28"><linearGradient id="advertising_circle_fill_red_28_a" x1="-14" x2="14" y1="14" y2="42" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#ff5263" /><stop offset="1" stop-color="#ff3347" /></linearGradient><path fill="url(#advertising_circle_fill_red_28_a)" d="M14 28c7.732 0 14-6.268 14-14S21.732 0 14 0 0 6.268 0 14s6.268 14 14 14" /><g fill="#fff"><path d="M19.7 19c-.169 0-.388-.05-.529-.149L16.732 16.7s-.123-.11-.152-.146a.4.4 0 0 1-.062-.122.5.5 0 0 1-.018-.143v-5.523a.7.7 0 0 1 .019-.205.4.4 0 0 1 .062-.122c.029-.037.152-.149.152-.149l2.438-2.135c.141-.1.371-.152.529-.155a.8.8 0 0 1 .8.8v9.4a.8.8 0 0 1-.8.8M14.7 10.5a.3.3 0 0 1 .3.3v5.4a.3.3 0 0 1-.3.3l-2.2.003c0 .606.326 1.372.583 1.697.391.493.286 1.12-.182 1.53-.47.412-1.344.345-1.734-.148-.59-.743-1.167-1.93-1.167-3.08l-.5-.002a3 3 0 1 1 0-6z" /></g></symbol>',28,28,!1,void 0)},714194:(e,t,s)=>{"use strict";s.d(t,{Icon28MoreHorizontalCircleFillGray:()=>i});var i=(0,s(844990).makeIcon)("Icon28MoreHorizontalCircleFillGray","more_horizontal_circle_fill_gray_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="more_horizontal_circle_fill_gray_28"><linearGradient id="more_horizontal_circle_fill_gray_28_a" x1="-14" x2="14" y1="14" y2="42" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#b1b6bd" /><stop offset="1" stop-color="#99a2ad" /></linearGradient><path fill="url(#more_horizontal_circle_fill_gray_28_a)" d="M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14" /><path fill="#fff" d="M15 6.667c.18.6.306 1.201 1.305 1.777 1.118.304 1.665.003 2.173-.337.53-.353.688-.25.9-.043l.515.515c.235.236.33.33 0 .943-.298.552-.633 1.066-.335 2.18.577 1.004 1.176 1.178 1.775 1.298.625.125.664.309.667.606v.727c0 .334 0 .467-.667.667-.6.18-1.201.306-1.777 1.305-.303 1.118-.002 1.665.337 2.173.353.53.25.688.043.9l-.515.515c-.236.235-.33.33-.943 0-.552-.298-1.066-.633-2.18-.335-1.004.577-1.178 1.176-1.298 1.775-.125.625-.309.664-.606.667h-.727c-.334 0-.467 0-.667-.667-.18-.6-.306-1.201-1.305-1.777-1.118-.303-1.665-.002-2.173.337-.53.353-.688.25-.9.043l-.515-.515c-.235-.236-.33-.33 0-.943.298-.552.634-1.066.335-2.18C7.865 15.294 7.266 15.12 6.667 15c-.625-.125-.664-.309-.667-.606v-.727c0-.334 0-.467.667-.667.6-.18 1.201-.306 1.777-1.305.304-1.118.003-1.665-.337-2.173-.353-.53-.25-.688-.043-.9l.515-.515c.236-.235.33-.33.943 0 .552.298 1.066.634 2.18.335C12.706 7.865 12.88 7.266 13 6.667c.125-.625.309-.664.606-.667h.727c.334 0 .467 0 .667.667M14 10.2a3.8 3.8 0 1 0 0 7.6 3.8 3.8 0 0 0 0-7.6" /></symbol>',28,28,!1,void 0)},281699:(e,t,s)=>{"use strict";s.d(t,{Icon28UgcChatStickerCircleFillBlue:()=>i});var i=(0,s(844990).makeIcon)("Icon28UgcChatStickerCircleFillBlue","ugc_chat_sticker_circle_fill_blue_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="ugc_chat_sticker_circle_fill_blue_28"><rect width="28" height="28" fill="url(#ugc_chat_sticker_circle_fill_blue_28_a)" rx="14" /><path fill="#fff" d="M13.47 8v2.286c0 2.612 2.105 4.728 4.702 4.728h1.986c-.832 1.797-3.026 3.515-5.655 3.515a6.8 6.8 0 0 1-1.703-.216 12 12 0 0 1-1.896 1.34 8 8 0 0 1-.401.21l-.159.078a.604.604 0 0 1-.802-.275.58.58 0 0 1-.017-.477 9 9 0 0 0 .225-.61q.264-.825.404-1.699C9.128 15.93 8.5 14.644 8.5 13.23c0-2.63 2.132-4.813 4.97-5.229Zm1.4.318v1.968a3.31 3.31 0 0 0 3.302 3.32H20.5z" /><defs><linearGradient id="ugc_chat_sticker_circle_fill_blue_28_a" x1="-14" x2="14" y1="14" y2="42" gradientUnits="userSpaceOnUse"><stop stop-color="#70B2FF" /><stop offset="1" stop-color="#5C9CE6" /></linearGradient></defs></symbol>',28,28,!1,void 0)},32485:(e,t)=>{var s;!function(){"use strict";var i={}.hasOwnProperty;function n(){for(var e=[],t=0;t<arguments.length;t++){var s=arguments[t];if(s){var a=typeof s;if("string"===a||"number"===a)e.push(s);else if(Array.isArray(s)){if(s.length){var o=n.apply(null,s);o&&e.push(o)}}else if("object"===a)if(s.toString===Object.prototype.toString)for(var r in s)i.call(s,r)&&s[r]&&e.push(r);else e.push(s.toString())}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):void 0===(s=function(){return n}.apply(t,[]))||(e.exports=s)}()},235643:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});const i={ugcBadge:"ChatSettingsUGCStickers-module__ugcBadge--Fxi7u",ugcIcon:"ChatSettingsUGCStickers-module__ugcIcon--wa31g",listItem:"ChatSettingsUGCStickers-module__listItem--hWpWE",textWrapper:"ChatSettingsUGCStickers-module__textWrapper--eae7m",secondaryText:"ChatSettingsUGCStickers-module__secondaryText--pu1YU",infoIcon:"ChatSettingsUGCStickers-module__infoIcon--RUa0q",userAside:"ChatSettingsUGCStickers-module__userAside--NvIXj"}},884114:(e,t,s)=>{"use strict";s.d(t,{DAY:()=>a,HOUR:()=>n,MONTH:()=>r,SECOND:()=>i,WEEK:()=>o,ruLocale:()=>l});const i=1e3,n=60*(60*i),a=24*n,o=7*a,r=30*a,l="ru-RU"},647462:(e,t,s)=>{"use strict";s.d(t,{default:()=>v});var i=s(474848),n=s(296540),a=s(7144),o=s(610989),r=s(8520),l=s(693143),c=s(948350),h=s(711660),d=s(815724),_=s(415782),g=s(533048),u=s(66404),m=s(20025),p=s(803898),C=s(531868);const f=()=>{};class v extends n.Component{resetSearch(e,t){const s=this.props.store.get(),i=(0,l.getTab)(s,s.peer);return(i.customChatMemberSearch?i.customChatMemberSearch(""):(0,c.searchLocalHints)("",this.props.store.get())).then((s=>this.setSearchResults(e,t,"",s)))}componentDidMount(){this.resetSearch()}render(){const e=Object.keys(this.state.selected).length,t="ChatSettingsMembers__entity";return(0,i.jsxs)("div",{className:"ChatSettingsMembers",children:[(0,i.jsx)(d.default,{className:"ChatSettingsMembers__multiSelect",tokens:this.state.selected.map((e=>({text:(0,a.unclean)(this.data[e].name),id:e}))),removeTokenPlaceholder:o.getLang("mail_create_chat_remove_user"),onRemoveToken:this.onRemoveToken,placeholder:o.getLang("mail_search_creation"),value:this.state.value,onChange:this.onChange,onSelect:this.onSelect,useInfiniteScroll:!1,hasMore:!1,virtualized:!1,loadMore:()=>{},notFoundText:o.getLang("mail_not_found"),autoFocus:!0,isSearching:this.isSearching,badge:this.getBadge(),children:this.state.found.map((e=>(0,i.jsx)("div",{className:(0,r.classNames)(t,{[`${t}--selected`]:this.selected[e]}),"data-id":e,children:(0,i.jsx)(h.default,{size:"34",title:this.data[e].name,photo:this.data[e].photo})},e)))}),(0,i.jsxs)(u.default,{alignment:"right",className:"ChatSettingsMembers__submitArea",children:[(0,i.jsx)(_.Checkbox,{noPadding:!0,stretched:!1,checked:this.state.isShowHistoryChecked,onChange:this.onShowHistoryToggle,className:"ChatSettingsMembers__showHistory",children:o.getLang("mail_im_chat_add_members_show_history")}),(0,i.jsx)(g.Button,{size:"m",disabled:0===e,onClick:this.onAddPeople,loading:this.state.loading,className:"ChatSettingsMembers__confirm",children:e<2?o.getLang("mail_append_chat"):o.getLang("mail_im_create_chat_with")})]})]})}constructor(e){super(e),this.onChange=e=>{const t=this.props.store.get(),s=e.target.value,i=(0,l.getTab)(t,t.peer);i.customChatMemberSearch?i.customChatMemberSearch(s).then((e=>(this.setSearchResults({},!1,s,e),s&&i.customChatMemberServerSearch?(this.isSearching=!0,i.customChatMemberServerSearch(s).catch((e=>{if("debounce"!==e)throw e}))):Promise.resolve([])))).then(this.appendSearchResults):(0,c.searchLocalHints)(s,t).then((e=>(this.setSearchResults({},!1,s,e),s?(this.isSearching=!0,this.serverSearch(s,e.map((e=>e.peerId)))):Promise.resolve([])))).then(this.appendSearchResults).catch((()=>{}))},this.serverSearch=(0,p.debouncedPromise)(((e,t)=>{const s=this.props.store;return(0,c.searchHints)(e,t,"friends",s.get())}),300),this.onRemoveToken=e=>new Promise((t=>{const s=this.state.selected.filter((t=>t!==e));this.selected=s.reduce(((e,t)=>(e[t]=!0,e)),{}),this.setState({selected:s},t)})),this.onSelect=e=>new Promise((t=>{const s=this.selected[e]?this.state.selected.filter((t=>t!==e)):[].concat(this.state.selected,e).filter(((e,t,s)=>s.indexOf(e)===t));this.selected=s.reduce(((e,t)=>(e[t]=!0,e)),{}),this.resetSearch({selected:s,value:""},t)})),this.onShowHistoryToggle=()=>{this.setState({isShowHistoryChecked:!this.state.isShowHistoryChecked})},this.onAddPeople=()=>{const e=this.props.store,t=e.get().peer,s=this.state.selected.map((e=>parseInt(e))),i=this.state.isShowHistoryChecked;this.setState({loading:!0}),e.set(c.addNewMember.bind(null,t,s,i)).then((()=>e.set(c.getChatDetails.bind(null,t)).then((()=>{this.selected={},this.resetSearch({selected:[],loading:!1},(()=>{this.props.afterSave(s.length)}))})))).catch((e=>{this.selected={},this.resetSearch({selected:[],loading:!1}),(0,m.showFastBox)(o.getLang("global_error"),e)}))},this.setSearchResults=(e,t,s,i)=>{const n=this.props.store.get(),a=(0,l.getTab)(n,n.peer);let o=[];i.forEach((e=>{this.data[e.peerId]||(this.data[e.peerId]=e),-1===a.memberIds.indexOf(e.peerId)&&o.push(e.peerId)})),this.setState(Object.assign({},e,{found:o,value:s}),t||f)},this.appendSearchResults=e=>{const t=this.props.store.get(),s=(0,l.getTab)(t,t.peer);let i=this.state.found;e.forEach((e=>{this.data[e.peerId]||(this.data[e.peerId]=e),-1===s.memberIds.indexOf(e.peerId)&&-1===i.indexOf(e.peerId)&&i.push(e.peerId)})),this.isSearching=!1,this.setState({found:i})},this.getBadge=()=>(0,C.getCurrentTab)(this.props.store).isDonutChat?(0,i.jsx)("div",{className:"BannerInfo ChatSettingsMembers__donutBadge",children:o.getLang("mail_dons_only_search")}):null,this.state={selected:[],value:"",loading:!1,found:[],isShowHistoryChecked:!0},this.data={},this.selected={}}}},822470:(e,t,s)=>{"use strict";s.d(t,{default:()=>g});var i=s(474848),n=s(296540),a=s(8520),o=s(610989),r=s(678250),l=s(98967),c=s(782361);const h=149946368,d=33554432,_={regular:(0,i.jsx)(r.Icon56UsersOutline,{}),closed:(0,i.jsx)(l.Icon56LockOutline,{}),custom:(0,i.jsx)(c.Icon56SettingsOutline,{})};class g extends n.Component{componentWillReceiveProps(e){![d,h].includes(e.flags)&&this.setState({customFlags:e.flags,selectedPresetId:3})}render(){const e=this.state.customFlags?this.state.customFlags:this.props.flags,t=this.state.selectedPresetId,s="ChatSettingsPresetPanel__preset",n=[{id:1,title:o.getLang("mail_chat_creation_preset_regular"),icon:"regular",flags:d},{id:2,title:o.getLang("mail_chat_creation_preset_closed"),icon:"closed",flags:h},{id:3,title:o.getLang("mail_chat_creation_preset_custom"),icon:"custom",flags:e}];return(0,i.jsx)("div",{className:"ChatSettingsPresetPanel",children:n.map(((e,n)=>(0,i.jsxs)("div",{className:(0,a.classNames)(s,{[`${s}--selected`]:e.id===t}),onClick:this.selectPreset.bind(null,e.flags,e.id),children:[(0,i.jsx)("div",{className:"ChatSettingsPresetPanel__presetIcon",children:_[e.icon]}),(0,i.jsx)("div",{className:"ChatSettingsPresetPanel__presetTitle",children:e.title})]},n)))})}constructor(e){super(e),this.selectPreset=(e,t)=>{const s=3===this.state.selectedPresetId&&null!==this.state.customFlags;this.setState((e=>({selectedPresetId:t,customFlags:s?this.props.flags:e.customFlags}))),this.props.onSelectPreset(e)};const t=this.props.flags===h?2:this.props.flags===d?1:3;this.state={customFlags:3===t?this.props.flags:null,selectedPresetId:t}}}},404619:(e,t,s)=>{"use strict";s.d(t,{mount:()=>x});var i=s(474848),n=s(365485),a=s(452314),o=s(850101),r=(s(296540),s(440961)),l=s(440501),c=s(948350),h=s(693143),d=s(485413),_=s(52554),g=s(20025),u=s(905616),m=s(388078),p=s(505954);let C,f;function v(e,t){const s=ls.get("im_chats_no_invite_link_history")||[],i=m.Ranges.convertChatPeerIdToChatId(e),n=t?s.filter((e=>e!==i)):s.concat(i);ls.set("im_chats_no_invite_link_history",n)}function S(e,t){const s=b(),n=function(e){const t=(0,_.getPeer)(e),s=m.Ranges.convertChatPeerIdToChatId(t);return!(ls.get("im_chats_no_invite_link_history")||[]).includes(s)}(e);s&&r.render((0,i.jsx)(p.AppRootProvider,{children:(0,i.jsx)(l.ChatSettings,{store:e,closePopup:I.bind(null,e),updatePopup:A,isLinkWithHistorySelected:n,updateHistoryLinkState:v,parentMutations:t,convoAttaches:f})}),s)}function I(e){C&&C.hide();const t=e.get();t.hasOwnProperty("onClose")&&t.onClose()}function A(){C&&C.updateBoxCoords()}function b(){return document.querySelector("#ChatSettings")}function L(e){const t=document.querySelector("#box_layer_wrap"),s=document.querySelector("#box_loader"),i=(0,a.isVisible)(t);return{unmount(){const t=b();t&&r.unmountComponentAtNode(t),(0,n.destroyModule)(e)},showLoader(){(0,o.boxRefreshCoords)(s),(0,a.show)(s),i||(0,a.show)(t)},hideLoader(){(0,a.hide)(s),i||(0,a.hide)(t)}}}function x(e,t,s){const{bindMutations:i}=(0,n.createMutations)(L),a=t.get(),o=(0,n.createModule)({handlers:(e,t)=>{}}),r=a.peer,l=i(o);f=new u.ConvoAttaches(t,s);const _=function(e,t){t.get().peer===r?function(e,t){const s=(0,h.getTab)(e,e.get().peer);s&&s.data&&(0,h.isChatActive)(s)?S(e,t):I(e)}(t,s):e.unmount()}.bind(null,l),m={hideButtons:!0,bodyStyle:"padding: 0; background: none;",width:560,onShow(){S(t,s),t.subscribe(_),requestAnimationFrame((()=>C.updateBoxCoords()))},onHideAttempt:()=>(t.unsubscribe(_),l.unmount(),!0)};return l.showLoader(),t.set(c.getChatDetails.bind(null,r)).then((e=>{l.hideLoader();const t=(0,d.unpackStore)(e).peer;t&&t===r?C=new g.MessageBox(m).content('<div id="ChatSettings" class="ChatSettingsWrapper"></div>').show():l.unmount()})).catch((()=>{l.hideLoader(),l.unmount()})),l}},484801:(e,t,s)=>{"use strict";s.d(t,{PackContext:()=>c});var i=s(434518),n=s(763812),a=(0,n._)("_options"),o=(0,n._)("_pack"),r=(0,n._)("_product"),l=(0,n._)("_stockItem");class c{get rawData(){return(0,i._)(this,o)[o]||(0,i._)(this,l)[l]||(0,i._)(this,r)[r]}get isPack(){return Boolean((0,i._)(this,o)[o])}get isProduct(){return Boolean((0,i._)(this,r)[r])}get isStockItem(){return Boolean((0,i._)(this,l)[l])}get isStoreItem(){return this.isProduct||this.isStockItem}get stockItem(){return(0,i._)(this,l)[l]}get id(){const e=(0,i._)(this,a)[a]?.redefine?.id;if(void 0!==e)return e;const t=(0,i._)(this,r)[r]?.id;return void 0!==t?t:(0,i._)(this,o)[o]?.id}setHint(e){return(0,i._)(this,a)[a]?((0,i._)(this,a)[a].hint=e,this):this}get hintId(){return(0,i._)(this,a)[a]?.hint?.id}get hintWidth(){return(0,i._)(this,a)[a]?.hint?.width}get index(){return(0,i._)(this,a)[a]?.index}get referrer(){return(0,i._)(this,a)[a]?.referrer}get tooltip(){return(0,i._)(this,a)[a]?.tooltip}get title(){return(0,i._)(this,a)[a]?.redefine?.title||(0,i._)(this,r)[r]?.title||""}get stickers(){return(0,i._)(this,a)[a]?.redefine?.stickers||(0,i._)(this,o)[o]?.stickers||(0,i._)(this,r)[r]?.stickers}get baseId(){return(0,i._)(this,r)[r]?.base_id}get isStyle(){return void 0!==this.baseId}get hasStyles(){return Boolean(this.styleIds?.length)}get styleIds(){return(0,i._)(this,r)[r]?.style_ids}get canGift(){return Boolean((0,i._)(this,l)[l]?.can_gift)}get vmojiAvatar(){return(0,i._)(this,r)[r]?.vmoji_avatar}get isVmoji(){return Boolean(this.vmojiAvatar||(0,i._)(this,r)[r]?.is_vmoji)}get isPopup(){return(0,i._)(this,r)[r]?.is_popup}get isNew(){return(0,i._)(this,r)[r]?.is_new}get previews(){return(0,i._)(this,r)[r]?.previews}constructor({pack:e,...t}){Object.defineProperty(this,a,{writable:!0,value:void 0}),Object.defineProperty(this,o,{writable:!0,value:void 0}),Object.defineProperty(this,r,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),(0,i._)(this,a)[a]=t,e&&("product"in e?((0,i._)(this,l)[l]=e,(0,i._)(this,r)[r]=e.product):"id"in e&&"type"in e?(0,i._)(this,r)[r]=e:(0,i._)(this,o)[o]=e)}}},498716:(e,t,s)=>{"use strict";s.d(t,{$favoriteStickers:()=>a,setFavoriteStickers:()=>n});var i=s(624761);const n=i.stickersEmojiKeyboard.createEvent(),a=i.stickersEmojiKeyboard.createStore(null).on(n,((e,t)=>t))},656947:(e,t,s)=>{"use strict";s.d(t,{$hasAvatar:()=>a,setHasAvatar:()=>n});var i=s(624761);const n=i.stickersEmojiKeyboard.createEvent(),a=i.stickersEmojiKeyboard.createStore(null).on(n,((e,t)=>t))},603943:(e,t,s)=>{"use strict";s.d(t,{$packs:()=>g,ServicePackKey:()=>i});var i,n,a=s(32489),o=s(61070),r=s(625722),l=s(656947),c=s(684490),h=s(316299),d=s(498716),_=s(484801);!function(e){e[e.FAVORITE=-1]="FAVORITE",e[e.RECENT=-2]="RECENT",e[e.VMOJI=-3]="VMOJI",e[e.UGC=-4]="UGC"}(i||(i={})),function(e){e.RECENT="recent",e.FAVORITE="favourite",e.KEYBOARD="keyboard"}(n||(n={}));const g=(0,a.combine)(o.$ugcInfo,r.$ugcPacks,c.$stockItems,h.$recentStickers,d.$favoriteStickers,l.$hasAvatar,((e,t,s,a,o,r)=>{const l=new Map;let c=[];const h=new Map;let d=0;if(!s||!a||!o)return{};o.length&&(l.set(i.FAVORITE,new _.PackContext({index:d,referrer:n.FAVORITE,redefine:{id:i.FAVORITE,title:"stickers_picker_favorite",stickers:o}})),c.push(i.FAVORITE),d++),a.length&&(l.set(i.RECENT,new _.PackContext({index:d,referrer:n.RECENT,redefine:{id:i.RECENT,title:"stickers_picker_recently_used",stickers:a}})),c.push(i.RECENT),d++);-1!==s?.findIndex((({product:{vmoji_avatar:e}})=>void 0!==e))||r||(l.set(i.VMOJI,new _.PackContext({index:d,referrer:n.KEYBOARD,redefine:{id:i.VMOJI,title:"stickers_picker_vmoji"}})),c.push(i.VMOJI),d++);const g=t?.[0],u=e?.can_edit,m=g?.stickers?.length,p=e?.show_keyboard_onboarding&&u;if(!e?.is_keyboard_hidden&&(m||p)){const e=new _.PackContext({pack:g,index:d,referrer:n.KEYBOARD,tooltip:{header:"stickers_picker_ugc_tooltip_title",text:"stickers_picker_ugc_tooltip_description"},redefine:{id:i.UGC,title:"stickers_picker_ugc"}});u&&e.setHint({id:"stickers:ugc_keyboard_onboarding_tooltip",width:176}),l.set(i.UGC,e),c.push(i.UGC),d++}return s.forEach((e=>{const{product:{id:t,vmoji_avatar:s}}=e;if(l.set(t,new _.PackContext({index:d,referrer:n.KEYBOARD,pack:e})),s){let e=h.get(s.id);e||(e=c.push([])-1,h.set(s.id,e));const i=c[e];Array.isArray(i)&&i.push(t)}else c.push(t);d++})),{packs:l,packsGroups:c}}))},684490:(e,t,s)=>{"use strict";s.d(t,{$stockItems:()=>a,setStockItems:()=>n});var i=s(624761);const n=i.stickersEmojiKeyboard.createEvent(),a=i.stickersEmojiKeyboard.createStore(null).on(n,((e,t)=>t))},316299:(e,t,s)=>{"use strict";s.d(t,{$recentStickers:()=>a,setRecentStickers:()=>n});var i=s(624761);const n=i.stickersEmojiKeyboard.createEvent(),a=i.stickersEmojiKeyboard.createStore(null).on(n,((e,t)=>t))},61070:(e,t,s)=>{"use strict";s.d(t,{$ugcInfo:()=>h,reloadUGCInfo:()=>l,setUGCInfo:()=>r});var i=s(32489),n=s(962177),a=s(624761),o=s(164272);const r=a.stickersEmojiKeyboard.createEvent(),l=a.stickersEmojiKeyboard.createEvent(),c=a.stickersEmojiKeyboard.createEffect((e=>e.cache.ugcInfo.get().catch((()=>null)))),h=a.stickersEmojiKeyboard.createStore(null).on(r,((e,t)=>t)).on(c.doneData,((e,t)=>t)).on(o.submitUGCReportFx.doneData,(()=>null));(0,i.sample)({clock:l,source:n.$api,target:c})},625722:(e,t,s)=>{"use strict";s.d(t,{$ugcPacks:()=>o,setUGCPacks:()=>a});var i=s(624761),n=s(164272);const a=i.stickersEmojiKeyboard.createEvent(),o=i.stickersEmojiKeyboard.createStore(null).on(a,((e,t)=>t)).on(n.submitUGCReportFx.doneData,(()=>null))},164272:(e,t,s)=>{"use strict";s.d(t,{submitUGCReport:()=>o,submitUGCReportFx:()=>r});var i=s(32489),n=s(962177),a=s(624761);const o=a.stickersEmojiKeyboard.createEvent(),r=a.stickersEmojiKeyboard.createEffect((e=>{e.cache.clearUGC()}));(0,i.sample)({clock:o,source:n.$api,target:r})},742536:(e,t,s)=>{"use strict";s.d(t,{ConvoAttachmentsApp:()=>l});var i=s(296540),n=s(269396),a=s(175953),o=s(500728),r=s(845164);const l=({store:e,env:t,peerId:s,goToMessage:l})=>{const[c,h]=(0,i.useState)(e.getState());(0,i.useEffect)((()=>e.subscribe(h)),[e]);const d=a.safeGet(c.peers,c.ownerId);return i.createElement(r.ErrorBoundary,{fallbackRender:()=>null,onError:e=>t.logger.error("[ConvoAttachmentsApp] Error",e)},i.createElement("div",{className:"ConvoAttachmentsApp MEConfig"},i.createElement(n.Provider,{env:t,state:c,dispatch:e.dispatch,featureFlags:e.featureFlags,owner:d},i.createElement(o.ConvoAttachments,{peerId:s,goToMessage:l}))))}},328515:(e,t,s)=>{"use strict";function i(e){return new URLSearchParams(e).toString()}s.d(t,{getUGCAppHash:()=>i})},838699:(e,t,s)=>{"use strict";s.d(t,{AvatarDropdown:()=>h});var i=s(474848),n=s(247554),a=s(511548),o=s(927984),r=s(610989),l=s(349412),c=s(309139);const h=({peerId:e,onPhotoUpload:t,children:s})=>{const h=[{text:(0,i.jsx)(c.AvatarDropdownItem,{icon:(0,i.jsx)(n.Icon20PictureOutline,{}),text:r.getLang("mail_upload_photo")}),onClick:t},{text:(0,i.jsx)(c.AvatarDropdownItem,{icon:(0,i.jsx)(a.Icon20Stars,{}),text:r.getLang("mail_create_photo_from_emoji")}),onClick:()=>{(0,o.showWiki)({w:`app7754294#peer=${e}`})}}];return(0,i.jsx)(l.default,{position:"b",appearance:"fancy",trigger:"hover",marginTop:2,marginLeft:5,align:"left",horizontalPosition:"left",data:h,children:s})}},309139:(e,t,s)=>{"use strict";s.d(t,{AvatarDropdownItem:()=>n});var i=s(474848);const n=({icon:e,text:t})=>(0,i.jsxs)("div",{className:"AvatarDropdownItem",children:[(0,i.jsx)("div",{className:"AvatarDropdownItem__icon",children:e}),t]})},440501:(e,t,s)=>{"use strict";s.d(t,{ChatSettings:()=>w});var i=s(474848),n=s(296540),a=s(927984),o=s(583790),r=s(948350),l=s(958145),c=s(610989),h=s(507035),d=s(125852),_=s(216806),g=s(533048),u=s(902904),m=s(700490),p=s(758084),C=s(754058),f=s(70720),v=s(647462),S=s(603640),I=s(321935),A=s(20025),b=s(693143),L=s(52554),x=s(531868),N=s(476726),M=s(206513);class w extends n.Component{go(e,t){this.setState({section:e},(()=>{this.props.updatePopup(),t&&t()}))}getPopupTitle(){switch(this.state.section){case 1:return c.getLang("mail_settings_add_members");case 2:case 3:return c.getLang("mail_chat_invite_link");case 6:return c.getLang("mail_settings_options");default:return c.getLang("mail_settings_title")}}componentWillReceiveProps(e){const t=e.store.get(),s=t.peer,i=t.tabs[s];i.photoLarge||i.photoGrid||this.resync||(this.resync=!0,e.store.set(r.getChatDetails.bind(null,s)).then((()=>{this.resync=!0})))}componentDidMount(){this.props.updatePopup()}componentWillUnmount(){this.timers.forEach(clearTimeout)}render(){const{store:e,closePopup:t}=this.props,s=e.get(),n=s.peer,a=s.tabs[n],r=(0,o.isFvkcomgroup)(e,n),l=(0,b.isCasperChat)(e,n),h=(0,b.isCommunityChat)(e,n),A=!r&&!h||!e.get().gid,L=(0,I.canCloseChat)(e,n,s.id),N=(0,x.isClosedChat)(a),M=s.isChatTypeEditAllowed,w=r?c.getLang("mail_im_n_vkcomgroup_members",(0,o.getAliveMembersCount)(a)):c.getLang("mail_im_n_chat_members",(0,o.getAliveMembersCount)(a));return(0,i.jsxs)("section",{className:"ChatSettings",children:[(0,i.jsx)(d.ModalHeader,{onBack:()=>this.go(0),backLabel:0!==this.state.section?c.getLang("global_back"):void 0,onClose:t,closeAriaLabel:c.getLang("global_close"),children:this.getPopupTitle()}),0===this.state.section&&(0,i.jsxs)("div",{className:"ChatSettings__content",children:[(0,i.jsx)(u.ChatSettingsInfo,{peerId:n,store:e,photo:a.photoLarge,grid:a.photoGrid,title:a.name,flags:a.data.flags,isDefaultPhotoOwner:a.isDefaultPhotoOwner,isCasper:l,isDonutChat:a.isDonutChat,meta:w,description:""}),(0,i.jsx)(C.default,{store:e,showMembersSettings:()=>this.go(1),showAttachments:this.onShowAttachments,showInvitationLink:this.showInvitationLink,isInvitationLinkWithHistory:this.state.isInvitationLinkWithHistory,invitationLinks:this.state.invitationLinks,showSettings:()=>this.go(6),notificationSettingsUpdated:this.state.notificationSettingsUpdated,disableUntilUpdated:this.state.disableUntilUpdated,flagsUpdated:this.state.flagsUpdated,onHideStatus:this.onHideStatus,onUpdateNotificationSettings:this.onUpdateNotificationSettings,onUpdateMentionNotificationSettings:this.onUpdateMentionNotificationSettings,afterNotificationSettingsUpdated:this.afterNotificationSettingsUpdated,afterDisableUntilUpdated:this.afterDisableUntilUpdated}),r?null:(0,i.jsx)("div",{className:"ChatSettings__pane",children:(0,i.jsx)(f.default,{store:e,onLeave:this.onLeave,showMembersSettings:()=>this.go(1),membersAdded:this.state.membersAdded,onHideStatus:this.onHideStatus,membersCount:this.state.membersCount})}),A&&(0,i.jsxs)("div",{className:"ChatSettings__pane",children:[(0,i.jsx)(_.Separator,{}),(0,i.jsx)(g.Button,{size:"m",appearance:"negative",mode:"link",className:"ChatSettings__criticalAction",onClick:this.onLeave,stretched:!0,children:r?c.getLang("mail_leave_channel"):c.getLang("mail_settings_leave")}),(0,i.jsx)(_.Separator,{})]}),L&&!N&&(0,i.jsxs)("div",{className:"ChatSettings__pane",children:[(0,i.jsx)(_.Separator,{}),(0,i.jsx)(g.Button,{size:"m",appearance:"negative",mode:"link",className:"ChatSettings__criticalAction",onClick:this.onChatClose,stretched:!0,children:c.getLang("mail_settings_close")}),(0,i.jsx)(_.Separator,{})]}),L&&N&&a.canRestore&&(0,i.jsxs)("div",{className:"ChatSettings__pane",children:[(0,i.jsx)(_.Separator,{}),(0,i.jsx)(g.Button,{size:"m",appearance:"negative",mode:"link",className:"ChatSettings__criticalAction",onClick:this.onChatRestore,stretched:!0,children:c.getLang("mail_settings_restore")}),(0,i.jsx)(_.Separator,{})]})]}),1===this.state.section&&(0,i.jsx)(v.default,{store:e,afterSave:this.afterMembersAdded}),6===this.state.section&&(0,i.jsx)(S.ChatSettingsOptions,{isChatTypeEditAllowed:M,flags:a.data.flags,isCasperChatTab:l,isCommunityChat:h,allowedUpdateFlags:a.allowedUpdateFlags,back:()=>this.go(0),onSave:this.onUpdateFlags,afterSave:this.afterFlagsUpdated}),2===this.state.section&&(0,i.jsx)(m.default,{store:e,onReset:()=>this.go(3),onLinkHistoryOptionToggle:this.onLinkHistoryOptionToggle,reseted:this.state.invitationLinksReseted,isInvitationLinkWithHistory:this.state.isInvitationLinkWithHistory,invitationLinks:this.state.invitationLinks}),3===this.state.section&&(0,i.jsx)(p.default,{onConfirm:this.onResetLink,onCancel:()=>this.go(2)})]})}constructor(e){super(e),this.showInvitationLink=()=>{const{store:e}=this.props,t=(0,h.unpackStore)(e),s=t.peer;return this.setState({invitationLoading:!0}),(0,r.getInviteLink)(s-2e9,t).then((([e])=>{this.setState({section:2,invitationLoading:!1,invitationLinks:e})}))},this.onUpdateNotificationSettings=(e,t)=>{const{store:s,parentMutations:i}=this.props,n=s.get().peer;return s.set(r.toggleMutePeer.bind(null,n,e,t)).then(i().updateState.bind(null,n))},this.onUpdateMentionNotificationSettings=e=>{const{store:t,parentMutations:s}=this.props,i=t.get().peer;return t.set(r.toggleMuteMentionsPeer.bind(null,i,e)).then(s().updateState.bind(null,i))},this.onUpdateFlags=e=>{const{store:t}=this.props,s=t.get(),i=s.peer,n=s.onUpdateFlags?s.onUpdateFlags.bind(null,i,e):e=>Promise.resolve(e);return(0,r.updateFlags)(i,e,s).then(n)},this.afterFlagsUpdated=()=>{this.go(0,(()=>this.setBlinkStatus({flagsUpdated:!0})))},this.afterMembersAdded=e=>{this.go(0,(()=>this.setBlinkStatus({membersAdded:!0,membersCount:e})))},this.afterNotificationSettingsUpdated=()=>{this.setBlinkStatus({notificationSettingsUpdated:!0})},this.afterDisableUntilUpdated=()=>{this.setBlinkStatus({disableUntilUpdated:!0})},this.setBlinkStatus=e=>{this.timers.push(setTimeout((()=>this.setState(e)),300))},this.onHideStatus=()=>{this.setState({membersAdded:!1,flagsUpdated:!1,notificationSettingsUpdated:!1,disableUntilUpdated:!1})},this.onLeave=()=>{const{store:e,closePopup:t}=this.props,s=e.get().peer,i=(0,o.isFvkcomgroup)(e,s),n=(0,A.showFastBox)({title:i?c.getLang("mail_leave_channel"):c.getLang("mail_chat_leave_title")},i?c.getLang("mail_vkcomgroup_leave_confirm"):c.getLang("mail_chat_leave_confirm"),i?c.getLang("mail_leave_channel"):c.getLang("mail_leave_chat"),(function(){e.set(r.unpinMessageOptimistic.bind(null,s)),e.set(r.leaveChat.bind(null,s)),n.hide(),t(),e.get().longpoll?.push([(0,l.resetPeer)()])}),c.getLang("global_cancel"),(function(){n.hide()}))},this.onChatClose=()=>{const{store:e,closePopup:t}=this.props,{peer:s}=e.get(),i=(0,b.getTab)(e,s);(0,M.assertNotNull)(i);const n=i.data.flags,a=n&I.MAIL_CHAT_FLAG_DENY_ANYONE_TO_WRITE?n&~I.MAIL_CHAT_FLAG_DENY_ANYONE_TO_WRITE:n|I.MAIL_CHAT_FLAG_DENY_ANYONE_TO_WRITE,o=(0,A.showFastBox)({title:c.getLang("global_warning")},c.getLang("mail_chat_close_confirm"),c.getLang("mail_close_chat"),(()=>{this.onUpdateFlags(a).then((()=>{o.hide(),t(),e.get().longpoll?.push([(0,l.resetPeer)()])}))}),c.getLang("global_cancel"),(function(){o.hide()}))},this.onChatRestore=()=>{const{store:e,closePopup:t}=this.props,{peer:s}=e.get(),i=(0,b.getTab)(e,s);(0,M.assertNotNull)(i);const n=i.data.flags,a=n&I.MAIL_CHAT_FLAG_DENY_ANYONE_TO_WRITE?n&~I.MAIL_CHAT_FLAG_DENY_ANYONE_TO_WRITE:n|I.MAIL_CHAT_FLAG_DENY_ANYONE_TO_WRITE;this.onUpdateFlags(a).then(t)},this.onResetLink=()=>{const{store:e}=this.props,t=(0,h.unpackStore)(e),s=t.peer;return(0,r.resetInviteLink)(s,t).then((([e])=>{this.setState({invitationLinksReseted:!0,invitationLinks:e})}))},this.onShowAttachments=()=>{const e=(0,L.getPeer)(this.props.store);this.props.closePopup(),(0,N.partConfigEnabled)("me_fc_attaches_new_modal")?this.props.convoAttaches.show(e):(0,a.showWiki)({w:"history"+(0,o.convertPeerToUrl)(e)+"_photo"},null,{})},this.onLinkHistoryOptionToggle=()=>{const e=(0,L.getPeer)(this.props.store);this.setState((e=>({isInvitationLinkWithHistory:!e.isInvitationLinkWithHistory})),(()=>{this.props.updateHistoryLinkState(e,this.state.isInvitationLinkWithHistory)}))},this.state={section:0,invitationLinks:null,invitationLinksReseted:!1,isInvitationLinkWithHistory:this.props.isLinkWithHistorySelected,membersAdded:!1,flagsUpdated:!1,notificationSettingsUpdated:!1,disableUntilUpdated:!1},this.timers=[]}}},902904:(e,t,s)=>{"use strict";s.d(t,{ChatSettingsInfo:()=>C});var i=s(474848),n=s(296540),a=s(8520),o=s(490660),r=s(320830),l=s(7144),c=s(610989),h=s(775100),d=s(539267),_=s(310033),g=s(321935),u=s(948350),m=s(838699),p=s(474325);class C extends n.PureComponent{getCasperInfo(){const e=c.getLang("mail_casper_chat_info");return(0,i.jsxs)(i.Fragment,{children:[c.getLang("mail_casper_chat_label"),(0,i.jsx)(o.HintIcon,{"aria-label":e,tooltip:{maxWidth:280,placement:"top",text:e}})]})}render(){const{store:e,photo:t,title:s,description:n,grid:o,meta:u,isDonutChat:p,isDefaultPhotoOwner:C=!1,isCasper:f=!1,peerId:v}=this.props,S=(0,l.unclean)(s),I=(0,g.canChangeTitle)(e),A=(0,a.classNames)("ChatSettingsInfo",{"ChatSettingsInfo--editable":I}),b=e.get().isAvatarBuilderEntryPointEnabled,L=(0,a.classNames)("ChatSettingsInfo__title",{"ChatSettingsInfo__title-service":Boolean(64&this.props.flags)}),x=t?(0,i.jsx)("img",{src:t,width:"80",height:"80",alt:S,className:"ChatSettingsInfo__photoSelf"}):(0,i.jsx)("div",{className:"nim-peer--photo-w",children:(0,i.jsx)("div",{className:"ChatSettingsInfo__photoGrid nim-peer--photo",dangerouslySetInnerHTML:{__html:o}})});return(0,i.jsxs)("div",{className:A,children:[(0,i.jsxs)("header",{className:"ChatSettingsInfo__header",children:[(0,i.jsxs)("div",{className:"ChatSettingsInfo__photo",children:[b&&I?(0,i.jsx)(m.AvatarDropdown,{peerId:v,onPhotoUpload:this.onPhotoUpload,children:(0,i.jsx)("div",{className:"ChatSettingsInfo__avatar nim-peer nim-peer_larger",children:x})}):(0,i.jsx)("div",{className:"ChatSettingsInfo__attach nim-peer nim-peer_larger","data-tip":c.getLang("mail_settings_photo"),onClick:this.onPhotoUpload,children:x}),t&&I&&!C&&(0,i.jsx)(r.TextTooltip,{text:c.getLang("mail_settings_remove_photo"),placement:"top-start",children:(0,i.jsx)("button",{onClick:this.onPhotoRemove,className:"ChatSettingsInfo__photoRemove",children:(0,i.jsx)(d.Icon12Cancel,{})})})]}),(0,i.jsx)("h3",{className:L,children:I?(0,i.jsx)(h.EditableLabel,{value:this.state.title,changed:this.state.titleChanged,useEnter:!0,onSave:this.onSaveTitle,onChange:this.onChangeTitle,onCancel:this.onCancelTitle,validate:this.onValidateTitle}):S}),(0,i.jsxs)("div",{className:"ChatSettingsInfo__meta",children:[(0,i.jsx)("span",{className:"ChatSettingsInfo__metaItem",children:u}),p&&(0,i.jsxs)("span",{className:"ChatSettingsInfo__metaItem",children:[c.getLang("groups_donut_is_dons_chat")," ",(0,i.jsx)(_.Icon12StarCircleFillYellow,{})]}),f&&(0,i.jsx)("span",{className:"ChatSettingsInfo__metaItem",children:this.getCasperInfo()})]})]}),n&&(0,i.jsx)("div",{className:"ChatSettingsInfo__description",children:I?(0,i.jsx)(h.EditableLabel,{value:n,onSave:this.onSaveDescription}):n})]})}constructor(e){super(e),this.onSaveTitle=e=>{const t=this.props.store,s=t.get(),i=e.value.trim().replace("\n","");i&&i!==(0,l.unclean)(this.props.title)&&(this.setState({titleChanged:!1}),t.set(u.updateChatTopic.bind(null,s.peer,i)))},this.onChangeTitle=e=>{if(this.state.title!==e.target.value){const t=e.target.value.replace("\n","");this.setState({title:t,titleChanged:(0,l.unclean)(this.props.title)!==t})}},this.onValidateTitle=e=>!!e.trim().replace("\n",""),this.onCancelTitle=()=>{this.setState({title:(0,l.unclean)(this.props.title),titleChanged:!1})},this.onSaveDescription=()=>{},this.onPhotoUpload=()=>{const e=this.props.store,t=e.get().peer;(0,g.canChangeTitle)(e)&&(window.cur.recieveCropResult=void 0,window.Page.ownerPhoto(t,{gid:e.get().gid}))},this.onPhotoRemove=()=>{const e=this.props.store,t=e.get().peer;(0,g.canChangeTitle)(e)&&e.set(u.removeChatPhoto.bind(null,t)).then((()=>e.set(u.getChatDetails.bind(null,t)))).catch(p.dummyCatch)},this.state={title:(0,l.unclean)(e.title),titleChanged:!1}}}},700490:(e,t,s)=>{"use strict";s.d(t,{default:()=>p});var i=s(474848),n=s(296540),a=s(452314),o=s(610989),r=s(907196),l=s(533048),c=s(380118),h=s(234337),d=s(558350),_=s(584554),g=s(583790),u=s(538766),m=s(8520);class p extends n.Component{componentDidMount(){this.input&&(0,a.elfocus)(this.input,0,this.input.value.length)}render(){const{onReset:e,invitationLinks:t,store:s}=this.props,n=o.getLang("mail_invite_link_reset_explainer").split("{reset_link}"),a=!(0,g.isFvkcomgroup)(s,s.get().peer),{linkWithHistory:p,linkWithoutHistory:C}=t,f=this.props.isInvitationLinkWithHistory?p:C;return(0,i.jsxs)("div",{className:"ChatSettingsInvitationLink",children:[this.props.reseted&&(0,i.jsx)("div",{className:"ChatSettingsInvitationLink__reseted",children:o.getLang("mail_invite_link_reseted_explainer")}),(0,i.jsx)("p",{children:o.getLang("mail_invite_link_explainer")}),(0,i.jsx)("div",{className:"ChatSettingsInvitationLink__switch",children:(0,i.jsx)(u.default,{checked:this.props.isInvitationLinkWithHistory,onChange:this.props.onLinkHistoryOptionToggle,children:o.getLang("mail_im_chat_add_members_show_history")})}),(0,i.jsxs)("div",{className:"ChatSettingsInvitationLink__main",children:[(0,i.jsx)(r.default,{getRef:this.getInputRef,readOnly:!0,className:"ChatSettingsInvitationLink__input",value:f}),(0,i.jsx)(l.Button,{size:"m",onClick:this.onCopy,children:o.getLang("mail_get_invite_link_copy")}),(0,i.jsx)(c.Text,{weight:"3",className:(0,m.classNames)("ChatSettingsInvitationLink__copied",(0,h.getColorClass)("color_text_secondary")),Component:"span",normalize:!1,children:(0,i.jsx)(d.BlinkText,{shown:this.state.copied,onHide:this.onBlinkTextHide,children:o.getLang("mail_invite_link_copied")})})]}),a&&(0,i.jsxs)("p",{children:[n[0],(0,i.jsx)(_.default,{className:"ChatSettingsInvitationLink__reset",onClick:e,children:o.getLang("mail_invite_reset_link")}),n[1]]})]})}constructor(e){super(e),this.onCopy=()=>{this.input&&((0,a.elfocus)(this.input,0,this.input.value.length),document.execCommand("copy"),this.setState({copied:!0}))},this.onBlinkTextHide=()=>{this.setState({copied:!1})},this.getInputRef=e=>{e&&(this.input=e)},this.state={copied:!1}}}},864816:(e,t,s)=>{"use strict";s.d(t,{default:()=>C});var i=s(474848),n=s(296540),a=s(610989),o=s(349412),r=s(290988),l=s(321935),c=s(948350),h=s(693143),d=s(133836),_=s(520380),g=s(507035),u=s(474325),m=s(388078),p=s(336476);class C extends n.Component{getMemberRole(e,t){const{storeData:s}=this.props,i=s.peer;return t===s.tabs[i].ownerId?a.getLang("mail_settings_owner"):e[t]?a.getLang("mail_settings_admin"):null}getActions(e){const{store:t,mid:s}=this.props,{id:i,peer:n}=(0,g.unpackStore)(t),o=i===s,r=(0,p.isMarusiaPeer)(s),c=[],d=(0,h.isCommunityChat)(t,n);if(r)return(0,l.canKickUser)(t,s)?[{text:a.getLang("mail_settings_kick"),onClick:this.kick}]:[];if(o)return d&&(0,h.isCommunityInterface)(t)?[]:[{text:a.getLang("mail_leave_chat"),onClick:this.props.onLeave}];if((0,l.canAddAdmin)(t,s)&&c.push({text:e[s]?a.getLang("mail_chat_remove_admin"):a.getLang("mail_settings_appoint_admin"),onClick:this.toggleAdmin}),(0,l.canKickUser)(t,s)&&c.push({text:a.getLang("mail_settings_kick"),onClick:this.kick}),m.Ranges.isGroupId(s)&&!e[s]){const e=(0,l.canSeeAllMessages)(t,t.get().peer,s),i=e?a.getLang("mail_settings_community_mentions_only"):a.getLang("mail_settings_community_full_access");c.push({text:i,onClick:this.changeAccess.bind(this,e)})}return c}render(){const{adminMap:e,storeData:t,mid:s,isMR:n}=this.props,{id:c}=t,h=!!e[c],d=this.getMemberRole(e,s),_=c===s,g=h&&this.getActions(e);return n?(0,i.jsx)(r.default,{text:a.getLang("mail_cancel_invitation"),position:"t",align:"right",children:(0,i.jsx)("span",{onClick:this.cancelMessageRequest,className:"ChatSettingsMembersEdit__kick"})}):(0,i.jsxs)(i.Fragment,{children:[d&&(0,i.jsx)("span",{className:"ChatSettingsMembersEdit__role",children:d}),g&&g.length>0&&(0,i.jsx)(o.default,{position:"b",align:"right",trigger:"hover",marginTop:-8,marginLeft:1,data:this.getActions(e),children:(0,i.jsx)("span",{className:"ChatSettingsMembersEdit__actions"})}),!h&&!_&&(0,l.canKickUser)(t,s)&&(0,i.jsx)(r.default,{text:a.getLang("mail_settings_kick"),position:"t",align:"right",children:(0,i.jsx)("span",{onClick:this.kick,className:"ChatSettingsMembersEdit__kick"})}),!h&&_&&(0,i.jsx)(r.default,{text:a.getLang("mail_leave_chat"),position:"t",align:"right",children:(0,i.jsx)("span",{onClick:this.props.onLeave,className:"ChatSettingsMembersEdit__kick"})})]})}constructor(...e){super(...e),this.toggleAdmin=()=>{const{store:e,mid:t,adminMap:s}=this.props,i=e.get().peer,n=!s[t];e.set(c.toggleAdminOptimisticly.bind(null,i,t,n)),e.set(c.toggleAdmin.bind(null,i,t,n))},this.kick=()=>{const e=this.props.store,t=e.get().peer,s=this.props.mid;e.set((e=>(0,_.kickUserOptimistically)(e,t,s))),e.set((e=>(0,d.kickUserAction)(e,t,s))).catch(u.dummyCatch)},this.cancelMessageRequest=()=>{const e=this.props.store,t=e.get().peer,s=this.props.mid;e.set((e=>(0,d.cancelMessageRequestAction)(e,t,s))).catch(u.dummyCatch)},this.changeAccess=e=>{const t=this.props.store,s=t.get().peer,i=this.props.mid;t.set(c.changeCommunityAccess.bind(null,s,i,!e)).catch(u.dummyCatch)}}}},70720:(e,t,s)=>{"use strict";s.d(t,{default:()=>w});var i=s(474848),n=s(296540),a=s(7144),o=s(610989),r=s(8520),l=s(645024),c=s(583790),h=s(321935),d=s(38282),_=s(433314),g=s(826380),u=s(711660),m=s(864816),p=s(380118),C=s(234337),f=s(558350),v=s(507035),S=s(83504),I=s(196147),A=s(384574),b=s(694430),L=s(388078);const x=50,N={appendParentCls:"ChatSettingsWrapper"},M={all:"allShowMore",admins:"adminsShowMore",invitedByMRShowMore:"invitedByMRShowMore",invitedByMR:"invitedByMRShowMore"};class w extends n.Component{componentWillReceiveProps(e){const t=e.store.get(),s=this.getMembers(t),i=this.getAdmins(t),n=this.getInvitedByMessageRequests(t),a={removes:[],additions:[]},o=s.reduce(((e,t)=>(e[t]=!0,e)),{});s.forEach((e=>{this.membersMap[e]||a.additions.push(e)})),Object.keys(this.membersMap).forEach((e=>{o[e]||a.removes.push(e)})),(a.removes.length||a.additions.length)&&(this.updateSearchIndex(t,a),this.membersMap=o);let r={all:s,allShowMore:this.state.allShowMore&&s.length>x,admins:i,adminsShowMore:this.state.adminsShowMore&&i.length>x,invitedByMR:n,invitedByMRShowMore:this.state.invitedByMRShowMore&&n.length>x,current:"all",showSearch:this.state.showSearch,searchQuery:this.state.searchQuery};this.state.current&&(r.current=this.state.current),this.setState(r)}getMembers(e){const t=e.peer,s=e.tabs[t],i=-1!==(s.memberIds||[]).indexOf(s.ownerId),n=(s.adminIds||[]).reduce(((e,t)=>(e[t]=!0,e)),{});return(i?[s.ownerId]:[]).concat((s.adminIds||[]).filter((e=>e!==s.ownerId)),(s.memberIds||[]).filter((e=>e!==s.ownerId&&!n[e])))}getAdmins(e){const t=e.peer,s=e.tabs[t];return(-1!==(s.memberIds||[]).indexOf(s.ownerId)?[s.ownerId]:[]).concat((s.adminIds||[]).filter((e=>e!==s.ownerId)))}getInvitedByMessageRequests(e){const t=e.peer;return e.tabs[t].invitedByMessageRequest.sort((function(e,t){return e.date-t.date}))}getCurrentList(){const{store:e}=this.props,{current:t,showSearch:s,searchQuery:i,invitedByMR:n}=this.state;if(s&&i&&this.searchIndex){const e=n.filter((e=>!!e.name.toLowerCase().trim().split(/\s+/).find((e=>e.startsWith(i.toLowerCase())))));return this.searchIndex.search(i).concat(e)}const a=this.state[t],o="invitedByMR"===t?a:(0,c.getChatMembersByIds)(e.get(),a),r=`${t}ShowMore`;return this.state[r]?o.slice(0,x):o}getSearchIndex(e){const{vkIndexer:t}=window,s=(0,c.getChatMembersByIds)(this.props.store.get(),e);return this.membersMap=s.reduce(((e,t)=>(e[t.id]=!0,e)),{}),new Promise((e=>{const i=new t(s,(e=>e.name),(()=>{e(i)}))}))}updateSearchIndex(e,t){const s=(0,c.getChatMembersByIds)(e,t.removes),i=(0,c.getChatMembersByIds)(e,t.additions);(this.searchIndex?Promise.resolve(this.searchIndex):this.searchIndexPromise).then((e=>{s.forEach((t=>{e.remove(t)})),i.forEach((t=>{e.add(t)}))}))}componentDidMount(){this.searchInput.addEventListener("keydown",this.onKeydown)}componentWillUnmount(){this.searchInput.removeEventListener("keydown",this.onKeydown)}render(){const{store:e,membersCount:t,membersAdded:s,onHideStatus:n}=this.props,{current:a,showSearch:h,searchQuery:v,admins:x,invitedByMR:N}=this.state,w=e.get(),k=w.peer,E=w.tabs[k],T=this.getCurrentList(),y=this.isAddMemberWidgetShown()?["add"].concat(T):T,j=M[a],O=this.state[j],H={"ChatSettingsMembersWidget--search":Boolean(h)},R=E.adminIds.reduce(((e,t)=>(e[t]=!0,e)),{});return(0,i.jsxs)("div",{className:(0,r.classNames)("ChatSettingsMembersWidget",H),children:[(0,i.jsxs)("header",{className:"ChatSettingsMembersWidget__header",children:[(0,i.jsx)("input",{placeholder:o.getLang("mail_members_search"),className:"ChatSettingsMembersWidget__search",onChange:this.onSearchChange,onInput:this.onSearchChange,onPaste:e=>this.onSearchChange(e),value:this.state.searchQuery,ref:this.searchInputRef}),(0,i.jsx)("button",{className:"ChatSettingsMembersWidget__searchIcon",onClick:this.onToggleSearch,children:this.state.showSearch?(0,i.jsx)(I.Icon16Cancel,{}):(0,i.jsx)(A.Icon16SearchOutline,{})}),(0,i.jsxs)(d.default,{className:"ChatSettingsMembersWidget__tabs",onTabClick:this.onTabClick,children:[(0,i.jsxs)("span",{children:[o.getLang("mail_settings_everyone")+" ",(0,i.jsx)("span",{className:"Tabs__desc",children:(0,c.getAliveMembersCount)(E)})]},"all"),x.length>0&&(0,i.jsxs)("span",{children:[o.getLang("mail_settings_admins")+" ",(0,i.jsx)("span",{className:"Tabs__desc",children:x.length})]},"admins"),N.length>0&&(0,i.jsxs)("span",{children:[o.getLang("mail_invited_members")+" ",(0,i.jsx)("span",{className:"Tabs__desc",children:N.length})]},"invitedByMR")]})]}),(0,i.jsx)("div",{className:"ChatSettingsMembersWidget__list",children:(0,i.jsxs)(_.default,{border:!1,children:[y.length>0&&y.map((h=>{if("add"===h)return(0,i.jsx)(g.default,{selectable:!1,border:!1,onClick:this.props.showMembersSettings,aside:(0,i.jsx)(p.Text,{weight:"3",className:(0,r.classNames)("ChatSettingsMembersWidget__blink",(0,C.getColorClass)("color_text_secondary")),Component:"span",normalize:!1,children:(0,i.jsx)(f.BlinkText,{shown:s,onHide:n,children:(0,l.langNumeric)(t||0,o.getLang("mail_settings_members_added","raw"))})}),children:(0,i.jsxs)("span",{className:"ChatSettingsMembersWidget__add",children:[(0,i.jsx)("span",{className:"ChatSettingsMembersWidget__addIcon",children:(0,i.jsx)(b.Icon24Add,{})}),(0,i.jsx)("span",{children:o.getLang("mail_settings_add_members")})]})},"add");const d=this.getInviter(h.id),_="invitedByMR"===a,v=h.image_status?h.name+`<span class="ChatSettingsMembersWidget__imageStatus">${h.image_status}</span>`:h.name,I=this.getMemberDescriptionText(h,w,_);return(0,i.jsx)(g.default,{selectable:!1,border:!1,aside:(0,i.jsx)(m.default,{adminMap:R,store:e,storeData:w,mid:h.id,onLeave:this.props.onLeave,isMR:_}),children:(0,i.jsx)(u.default,{ignoreDecodeHTML:!0,photo:L.Ranges.isContactId(h.id)?(0,i.jsx)(S.ConversationNoPhoto,{id:k,text:(0,c.getUserInitials)(h.name),size:"xxxs",specificType:7}):h.photo,title:(0,i.jsx)("span",{dangerouslySetInnerHTML:{__html:v}}),description:I?(0,i.jsx)("span",{title:d,dangerouslySetInnerHTML:{__html:I}}):void 0,href:h.link,onLinkClick:e=>{e.ctrlKey||e.altKey||e.metaKey||(e.preventDefault(),window.nav.go(h.link,e.nativeEvent))}})},h.id)})),!y.length&&h&&v&&(0,i.jsx)("div",{className:"ChatSettingsMembersWidget__empty",children:o.getLang("mail_settings_not_found")}),!(h&&v)&&O&&(0,i.jsx)("div",{className:"ChatSettingsMembersWidget__more",onClick:this.onShowMore,children:o.getLang("mail_settings_show_all_members")})]})})]})}constructor(e){super(e),this.onToggleSearch=()=>{this.state.showSearch?this.setState({showSearch:!1,searchQuery:""}):(this.setState({showSearch:!0}),requestAnimationFrame((()=>{this.searchInput.focus()})))},this.onSearchChange=e=>{const t=e.target;t.value!==this.state.searchQuery&&this.setState({searchQuery:t.value})},this.onShowMore=()=>{const e=M[this.state.current];if(this.state[e]){const t={[e]:!1};this.setState(t)}},this.onTabClick=(e,t)=>{e.preventDefault(),this.state.current!==t&&this.setState({current:t})},this.onKeydown=e=>{this.state.showSearch&&27===e.keyCode&&(this.searchInput.blur(),this.setState({showSearch:!1,searchQuery:""}),e.preventDefault(),e.stopPropagation())},this.getInviter=e=>{if(this.invitersCache[e])return this.invitersCache[e];const{store:t}=this.props,s=t.get(),i=s.peer,n=s.tabs[i],r=n.inviters;if(!r[e])return"";const d=(0,c.getChatMembersByIds)(s,[r[e][0]])[0],_=(0,l.getSmDate)(r[e][2],s.timeshift,!0);if((0,h.isUserOwnerInChat)(n,e))return this.invitersCache[e]=o.getLang("mail_settings_owner"),o.getLang("mail_settings_owner");if(!d)return this.invitersCache[e]=_,_;const g=(0,l.langSex)(r[e][1],o.getLang("mail_chat_member_invited_by_X","raw")).replace(/{inviter}/,(0,a.replaceEntities)(d.name))+" "+_;return this.invitersCache[e]=g,g},this.isAddMemberWidgetShown=()=>{const e=this.props.store,{id:t,peer:s}=(0,v.unpackStore)(e),{current:i,showSearch:n,searchQuery:a}=this.state;return"all"===i&&!(n&&""!==a)&&(0,h.canInviteUser)(e,s,t)},this.getCommunityDescriptionText=e=>e?o.getLang("mail_settings_community"):o.getLang("mail_settings_bot"),this.getMemberDescriptionText=(e,t,s)=>{const i=t.tabs[t.peer];if(L.Ranges.isGroupId(e.id))return this.getCommunityDescriptionText(e.id===i.ownerId);if(s)return(0,c.getMessageRequestDateText)(e.date,t.timeshift);const n=i.membersLastSeen;return n&&n[e.id]?(0,c.getLastSeenText)(t,e.id,n[e.id],N):void 0},this.searchInputRef=e=>{this.searchInput=e};const t=e.store.get(),s=this.getMembers(t),i=this.getAdmins(t),n=this.getInvitedByMessageRequests(t);this.state={showSearch:!1,searchQuery:"",current:"all",all:s,allShowMore:s.length>x,admins:i,adminsShowMore:i.length>x,invitedByMR:n,invitedByMRShowMore:n.length>x},this.membersMap=s.reduce(((e,t)=>(e[t]=!0,e)),{}),this.searchIndexPromise=this.getSearchIndex(s).then((e=>{this.searchIndex=e})),this.invitersCache={}}}},754058:(e,t,s)=>{"use strict";s.d(t,{default:()=>w});var i=s(474848),n=s(296540),a=s(8520),o=s(645024),r=s(610989),l=s(584554),c=s(433314),h=s(826380),d=s(380118),_=s(234337),g=s(558350),u=s(711660),m=s(753246),p=s(884114),C=s(905148),f=s(664282),v=s(469095),S=s(996304),I=s(637044),A=s(714194),b=s(321935),L=s(583790),x=s(693143),N=s(520024),M=s(957081);class w extends n.Component{getPushSettingsFromProps(e){const t=e.store.get();return t.tabs[t.peer].notifications}getPushDisabledFromProps(e){const t=e.store.get();return t.tabs[t.peer].notifications.push_disabled}getDisabledPlaceholder(e){if(!e||0===e)return r.getLang("mail_settings_configure");if(-1===e)return r.getLang("mail_settings_time_forever");const t=(0,o.getShortDateWithTime)(e,0,!1);return`${r.getLang("mail_settings_until")} ${t}`}getDisabledOptions(){const e=[{label:r.getLang("mail_settings_time_one_hour"),value:p.HOUR},{label:r.getLang("mail_settings_time_eight_hours"),value:8*p.HOUR},{label:r.getLang("mail_settings_time_day"),value:p.DAY},{label:r.getLang("mail_settings_time_week"),value:p.WEEK},{label:r.getLang("mail_settings_time_forever"),value:-1}];return this.state.push_disabled_until?[...e,{label:r.getLang("mail_settings_time_cancel"),value:0}]:e}render(){const{store:e,flagsUpdated:t,notificationSettingsUpdated:s,disableUntilUpdated:n,onHideStatus:o,invitationLinks:p,isInvitationLinkWithHistory:w}=this.props,k=e.get(),E=k.tabs[k.peer],T=(0,L.isFvkcomgroup)(k,k.peer),y=(0,x.isCommunityChat)(k,k.peer),j=E.inviteLinks&&(0,b.canSeeInviteLink)(e)||(0,b.canChangeInviteLink)(e),O=p||E.inviteLinks,H=O&&(w?O.linkWithHistory:O.linkWithoutHistory),R=(0,b.canSeeSettingsItem)(e,k.peer,k.id),P=(0,a.classNames)("ChatSettingsMenu",{"ChatSettingsMenu--copied":this.state.copied}),U=k.isMassMentionsMessageAllowed,G=w?r.getLang("mail_get_invite_link_copy_with_history"):r.getLang("mail_get_invite_link_copy_without_history");return(0,i.jsxs)("div",{className:"ChatSettings__pane",children:[y&&(0,i.jsx)(c.default,{className:P,children:(0,i.jsx)(h.default,{onClick:e=>window.nav.go(E.owner.link,e.nativeEvent),chevron:!0,className:"ChatSettingsMenu__owner",children:(0,i.jsx)(u.default,{size:"28",title:E.owner.title,photo:E.owner.photo,href:E.owner.link,description:E.owner.description})})}),(0,i.jsx)(c.default,{className:P,children:(0,i.jsxs)(h.default,{onClick:this.props.showAttachments,chevron:!0,children:[(0,i.jsx)(C.ChatSettingsRoundedIcon,{backgroundColor:"blue",children:(0,i.jsx)(f.Icon16Attach,{})}),r.getLang("mail_im_show_media_history")]})}),(0,M.isUGCStickersEnabled)()&&(0,i.jsx)(c.default,{className:P,children:(0,i.jsx)(N.ChatSettingsUGCStickers,{peerId:k.peer})}),(0,i.jsxs)(c.default,{className:P,children:[U&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(h.default,{selectable:!1,chevron:!1,aside:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.Text,{weight:"3",className:(0,a.classNames)("ChatSettingsMenu__saved",(0,_.getColorClass)("color_text_secondary")),Component:"span",normalize:!1,children:(0,i.jsx)(g.BlinkText,{shown:s,onHide:o,children:r.getLang("global_changes_saved_short")})}),(0,i.jsx)(m.default,{className:"ChatSettingsMenu__select",onChange:this.onMentionSettingsChange,options:[{label:r.getLang("mail_settings_mentions_all"),value:0},{label:r.getLang("mail_settings_mentions_except"),value:1},{label:r.getLang("mail_settings_mentions_disable"),value:2}],value:this.state.mentions_push_disabled})]}),children:[(0,i.jsx)(C.ChatSettingsRoundedIcon,{children:(0,i.jsx)(v.Icon28MentionCircleFillBlue,{})}),r.getLang("mail_settings_mentions")]}),(0,i.jsxs)(h.default,{selectable:!1,aside:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.Text,{weight:"3",className:(0,a.classNames)("ChatSettingsMenu__saved",(0,_.getColorClass)("color_text_secondary")),Component:"span",normalize:!1,children:(0,i.jsx)(g.BlinkText,{shown:n,onHide:o,children:r.getLang("global_changes_saved_short")})}),(0,i.jsx)(m.default,{className:"ChatSettingsMenu__select",onChange:this.onDisabledSettingsChange,options:this.getDisabledOptions(),placeholder:this.state.disabledPlaceholder})]}),children:[(0,i.jsx)(C.ChatSettingsRoundedIcon,{children:(0,i.jsx)(S.Icon28AdvertisingCircleFillRed,{})}),r.getLang("mail_settings_notices")]})]}),(j||R)&&(0,i.jsxs)(i.Fragment,{children:[j&&(0,i.jsxs)(h.default,{onClick:this.onShowInviteLink,chevron:(0,b.canChangeInviteLink)(e),children:[(0,i.jsx)(C.ChatSettingsRoundedIcon,{children:(0,i.jsx)(I.Icon28ChainCircleFillBlue,{})}),T?r.getLang("mail_vkcomgroup_invite_link"):r.getLang("mail_chat_invite_link"),H&&(0,i.jsxs)("span",{className:"ChatSettingsMenu__invite",children:[(0,i.jsx)("span",{className:"ChatSettingsMenu__hidden",children:(0,i.jsx)("input",{type:"text",readOnly:!0,value:H,ref:this.getHiddenInput})}),(0,i.jsx)(d.Text,{weight:"3",className:(0,a.classNames)("ChatSettingsMenu__copied",(0,_.getColorClass)("color_text_secondary")),Component:"span",normalize:!1,children:(0,i.jsx)(g.BlinkText,{shown:this.state.copied,onHide:this.onBlinkTextHide,children:r.getLang("mail_invite_link_copied")})}),(0,i.jsx)(l.default,{className:"ChatSettingsMenu__copy",onClick:this.onCopyInviteLink,children:G})]})]}),R&&(0,i.jsxs)(h.default,{onClick:this.props.showSettings,chevron:!0,aside:(0,i.jsx)(d.Text,{weight:"3",className:(0,_.getColorClass)("color_text_secondary"),Component:"span",normalize:!1,children:(0,i.jsx)(g.BlinkText,{shown:t,onHide:o,children:r.getLang("global_changes_saved")})}),children:[(0,i.jsx)(C.ChatSettingsRoundedIcon,{children:(0,i.jsx)(A.Icon28MoreHorizontalCircleFillGray,{})}),r.getLang("mail_settings_options")]})]})]})]})}constructor(e){super(e),this.onCopyInviteLink=e=>{this.input&&(this.input.focus(),this.input.select(),document.execCommand("copy"),this.setState({copied:!0})),e.preventDefault(),e.stopPropagation()},this.onBlinkTextHide=()=>{this.setState({copied:!1})},this.getHiddenInput=e=>{this.input=e},this.onDisabledSettingsChange=e=>{const t=Number(e.selected.value),s=t>0?Math.floor((Date.now()+t)/1e3):t,i=0!==s;this.setState({push_disabled_until:s?1:0,push_disabled:i?1:0,disabledPlaceholder:this.getDisabledPlaceholder(s)},(()=>{this.props.onUpdateNotificationSettings(i,Math.floor(t/1e3)).then((()=>{this.props.afterDisableUntilUpdated()}))}))},this.onMentionSettingsChange=e=>{const t=e.selected.value;this.setState({mentions_push_disabled:t},(()=>{this.props.onUpdateMentionNotificationSettings(t).then((()=>{this.props.afterNotificationSettingsUpdated()}))}))},this.onShowInviteLink=()=>{(0,b.canChangeInviteLink)(this.props.store)&&this.props.showInvitationLink()};const t=this.getPushSettingsFromProps(e),s=t.push_disabled_until,i=s>0?+new Date(s):s;this.state=Object.assign({pushDisabled:s,mentions_push_disabled:0,disabledPlaceholder:this.getDisabledPlaceholder(i),copied:!1,push_disabled_until:null,push_disabled:0},t)}}},603640:(e,t,s)=>{"use strict";s.d(t,{ChatSettingsOptions:()=>M});var i=s(474848),n=s(296540),a=s(610989),o=s(805088),r=s(433314),l=s(826380),c=s(753246),h=s(757550),d=s(533048),_=s(66404),g=s(905148),u=s(822470),m=s(931649),p=s(588907),C=s(567290),f=s(469095),v=s(637044),S=s(544954),I=s(705276),A=s(282177),b=s(578363),L=s(228437),x=s(321935),N=s(536977);class M extends n.Component{render(){const{flags:e}=this.state,{isChatTypeEditAllowed:t,isCasperChatTab:s,isCommunityChat:n}=this.props,M=(e,t,s=0)=>[!n&&{value:e,label:a.getLang("mail_settings_only_owner")},{value:t,label:n?a.getLang("mail_settings_only_admins"):a.getLang("mail_settings_owner_and_admins")},{value:s,label:a.getLang("mail_settings_all_members")}].filter(Boolean);return(0,i.jsxs)("div",{className:"ChatSettingsOptions",children:[this.props.isChatCreation&&(0,i.jsx)(u.default,{flags:e,onSelectPreset:this.setFlags}),(0,i.jsxs)(r.default,{children:[(this.isAllowed(x.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_INVITE)||this.isAllowed(x.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_INVITE))&&(0,i.jsxs)(l.default,{selectable:!1,aside:(0,i.jsx)(c.default,{className:"ChatSettingsOptions__longselect",onChange:this.onChange,name:String(x.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_INVITE+x.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_INVITE),options:M(x.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_INVITE,x.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_INVITE),value:(0,N.and)(e,x.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_INVITE|x.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_INVITE)}),children:[(0,i.jsx)(g.ChatSettingsRoundedIcon,{children:(0,i.jsx)(m.Icon28AddCircleFillBlue,{})}),a.getLang("mail_settings_can_invite")]}),(this.isAllowed(x.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_CHANGE_TITLE)||this.isAllowed(x.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_CHANGE_TITLE))&&(0,i.jsxs)(l.default,{selectable:!1,aside:(0,i.jsx)(c.default,{className:"ChatSettingsOptions__longselect",onChange:this.onChange,name:String(x.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_CHANGE_TITLE+x.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_CHANGE_TITLE),options:M(x.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_CHANGE_TITLE,x.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_CHANGE_TITLE),value:(0,N.and)(e,x.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_CHANGE_TITLE|x.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_CHANGE_TITLE)}),children:[(0,i.jsx)(g.ChatSettingsRoundedIcon,{children:(0,i.jsx)(p.Icon28EditCircleFillBlue,{})}),a.getLang("mail_settings_can_edit_info")]}),(this.isAllowed(x.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_PIN)||this.isAllowed(x.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_PIN))&&!s&&(0,i.jsxs)(l.default,{selectable:!1,aside:(0,i.jsx)(c.default,{className:"ChatSettingsOptions__longselect",onChange:this.onChange,name:String(x.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_PIN+x.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_PIN),options:M(x.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_PIN,x.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_PIN),value:(0,N.and)(e,x.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_PIN|x.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_PIN)}),children:[(0,i.jsx)(g.ChatSettingsRoundedIcon,{children:(0,i.jsx)(C.Icon28PinCircleFillBlue,{})}),a.getLang("mail_settings_can_pin")]}),(this.isAllowed(x.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_MASS_MENTION)||this.isAllowed(x.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_MASS_MENTION))&&(0,i.jsxs)(l.default,{selectable:!1,aside:(0,i.jsx)(c.default,{className:"ChatSettingsOptions__longselect",onChange:this.onChange,name:String(x.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_MASS_MENTION+x.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_MASS_MENTION),options:M(x.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_MASS_MENTION,x.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_MASS_MENTION),value:(0,N.and)(e,x.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_MASS_MENTION|x.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_MASS_MENTION)}),children:[(0,i.jsx)(g.ChatSettingsRoundedIcon,{children:(0,i.jsx)(f.Icon28MentionCircleFillBlue,{})}),a.getLang("mail_settings_can_use_mass_mention")]}),(this.isAllowed(x.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_SEE_INVITE_LINK)||this.isAllowed(x.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_SEE_INVITE_LINK))&&(0,i.jsxs)(l.default,{selectable:!1,aside:(0,i.jsx)(c.default,{className:"ChatSettingsOptions__longselect",onChange:this.onChange,name:String(x.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_SEE_INVITE_LINK+x.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_SEE_INVITE_LINK),options:M(0,x.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_SEE_INVITE_LINK,x.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_SEE_INVITE_LINK),value:(0,N.and)(e,x.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_SEE_INVITE_LINK|x.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_SEE_INVITE_LINK)}),children:[(0,i.jsx)(g.ChatSettingsRoundedIcon,{children:(0,i.jsx)(v.Icon28ChainCircleFillBlue,{})}),a.getLang("mail_settings_can_see_invitation_link")]}),(this.isAllowed(x.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_CALL)||this.isAllowed(x.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_CALL))&&(0,i.jsxs)(l.default,{selectable:!1,aside:(0,i.jsx)(c.default,{className:"ChatSettingsOptions__longselect",onChange:this.onChange,name:String(x.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_CALL+x.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_CALL),options:M(x.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_CALL,x.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_CALL),value:(0,N.and)(e,x.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_CALL|x.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_CALL)}),children:[(0,i.jsx)(g.ChatSettingsRoundedIcon,{children:(0,i.jsx)(S.Icon28PhoneCircleFillGreen,{})}),a.getLang("mail_settings_can_start_group_call")]}),this.isAllowed(x.MAIL_CHAT_FLAG_ADMINS_CAN_ADD_ADMINS)&&(0,i.jsxs)(l.default,{selectable:!1,aside:(0,i.jsx)(c.default,{className:"ChatSettingsOptions__longselect",onChange:this.onChange,name:String(x.MAIL_CHAT_FLAG_ADMINS_CAN_ADD_ADMINS),options:[{value:0,label:a.getLang("mail_settings_only_owner")},{value:x.MAIL_CHAT_FLAG_ADMINS_CAN_ADD_ADMINS,label:a.getLang("mail_settings_owner_and_admins")}],value:(0,N.and)(e,x.MAIL_CHAT_FLAG_ADMINS_CAN_ADD_ADMINS)}),children:[(0,i.jsx)(g.ChatSettingsRoundedIcon,{children:(0,i.jsx)(I.Icon28UserCircleFillBlue,{})}),a.getLang("mail_settings_admins_can_add_admins")]}),(this.isAllowed(x.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_CHANGE_STYLE)||this.isAllowed(x.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_CHANGE_STYLE))&&(0,i.jsxs)(l.default,{selectable:!1,aside:(0,i.jsx)(c.default,{className:"ChatSettingsOptions__longselect",onChange:this.onChange,name:String(x.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_CHANGE_STYLE+x.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_CHANGE_STYLE),options:M(x.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_CHANGE_STYLE,x.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_CHANGE_STYLE),value:(0,N.and)(e,x.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_CHANGE_STYLE|x.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_CHANGE_STYLE)}),children:[(0,i.jsx)(g.ChatSettingsRoundedIcon,{children:(0,i.jsx)(A.Icon28PaletteFillBlue,{})}),a.getLang("mail_settings_can_change_style")]}),this.isAllowed(x.MAIL_CHAT_FLAG_DISABLE_STICKERS_POPUP_AUTOPLAY)&&(0,o.isPopUpStickersEnabled)()&&(0,i.jsxs)(l.default,{selectable:!1,aside:(0,i.jsx)(c.default,{className:"ChatSettingsOptions__select",onChange:this.onChange,name:String(x.MAIL_CHAT_FLAG_DISABLE_STICKERS_POPUP_AUTOPLAY),options:[{value:0,label:a.getLang("mail_settings_stickers_popup_autoplay_enabled")},{value:x.MAIL_CHAT_FLAG_DISABLE_STICKERS_POPUP_AUTOPLAY,label:a.getLang("mail_settings_stickers_popup_autoplay_disabled")}],value:(0,N.and)(e,x.MAIL_CHAT_FLAG_DISABLE_STICKERS_POPUP_AUTOPLAY)}),children:[(0,i.jsx)(g.ChatSettingsRoundedIcon,{children:(0,i.jsx)(b.Icon28PopUpStickerCircleFillRaspberryPink,{})}),a.getLang("mail_settings_stickers_popup_autoplay")]}),this.isAllowed(x.MAIL_CHAT_FLAG_SERVICE_CHAT)&&t&&(0,i.jsxs)(l.default,{selectable:!1,aside:(0,i.jsx)(c.default,{className:"ChatSettingsOptions__select",onChange:this.onChange,name:String(x.MAIL_CHAT_FLAG_SERVICE_CHAT),options:[{value:0,label:a.getLang("mail_settings_service_simple")},{value:x.MAIL_CHAT_FLAG_SERVICE_CHAT,label:a.getLang("mail_settings_service_service")}],value:(0,N.and)(e,x.MAIL_CHAT_FLAG_SERVICE_CHAT)}),children:[(0,i.jsx)(g.ChatSettingsRoundedIcon,{children:(0,i.jsx)(L.Icon28GearCircleFillGray,{})}),a.getLang("mail_settings_service")]})]}),(0,i.jsx)(_.default,{alignment:"right",className:"ChatSettingsOptions__submitArena",children:(0,i.jsxs)(h.ButtonGroup,{gap:"s",children:[(0,i.jsx)(d.Button,{size:"m",mode:"tertiary",onClick:this.onCancel,children:a.getLang("global_cancel")}),(0,i.jsx)(d.Button,{size:"m",onClick:this.onSave,loading:this.state.loading,children:a.getLang("global_save")})]})})]})}constructor(e){super(e),this.onChange=e=>{const t=Number(e.name),{value:s}=e.selected;this.setState((({flags:e})=>({flags:(0,N.asLong)(((e,t,s)=>e&~t^s),e,t,s)})))},this.onCancel=()=>{this.setState({flags:this.props.flags}),this.props.back()},this.onSave=()=>{this.state.loading||(this.setState({loading:!0}),this.props.onSave(this.state.flags).then((()=>{this.setState({loading:!1},this.props.afterSave)})).catch((()=>{this.setState({loading:!1,flags:this.props.flags})})))},this.setFlags=e=>{this.setState({flags:e})},this.isAllowed=e=>{const t=this.props.allowedUpdateFlags;return!t||t.includes(e)},this.state={flags:e.flags,loading:!1}}}},758084:(e,t,s)=>{"use strict";s.d(t,{default:()=>c});var i=s(474848),n=s(296540),a=s(610989),o=s(757550),r=s(533048),l=s(66404);class c extends n.Component{render(){return(0,i.jsxs)("div",{className:"ChatSettingsResetInvitationLink",children:[(0,i.jsx)("div",{className:"ChatSettingsResetInvitationLink__text",dangerouslySetInnerHTML:{__html:a.getLang("mail_chat_reset_link_warning")}}),(0,i.jsx)(l.default,{alignment:"right",children:(0,i.jsxs)(o.ButtonGroup,{gap:"s",children:[(0,i.jsx)(r.Button,{size:"m",mode:"tertiary",onClick:this.props.onCancel,children:a.getLang("global_cancel")}),(0,i.jsx)(r.Button,{size:"m",onClick:this.onConfirm,loading:this.state.loading,children:a.getLang("mail_chat_reset_link_confirm")})]})})]})}constructor(...e){super(...e),this.state={},this.onConfirm=()=>{this.state.loading||(this.setState({loading:!0}),this.props.onConfirm().then((()=>{this.setState({loading:!1}),this.props.onCancel()})).catch((()=>this.setState({loading:!1}))))}}}},905148:(e,t,s)=>{"use strict";s.d(t,{ChatSettingsRoundedIcon:()=>a});var i=s(474848),n=s(8520);const a=({type:e,backgroundColor:t,children:s})=>(0,i.jsx)("div",{className:(0,n.classNames)("ChatSettingsRoundedIcon",`ChatSettingsRoundedIcon--${e}`,`ChatSettingsRoundedIcon--${t}`),children:s})},520024:(e,t,s)=>{"use strict";s.d(t,{ChatSettingsUGCStickers:()=>_});var i=s(474848),n=s(100072),a=s(165753),o=s(772659),r=s(98713),l=s(350288),c=s(505954),h=s(753457);const d=({children:e})=>(0,i.jsx)(c.AppRootProvider,{platform:h.Platform.VKCOM,children:(0,i.jsx)("div",{children:e})}),_=({peerId:e})=>{const t=(0,n.isActiveHint)(a.AvailableHelpHints.ACCOUNT_HINT_STICKERS_UGC_SETTINGS_UNSEEN,window.IM?.activeHints||[]),s=()=>{t&&((0,n.hideHelpHint)(a.AvailableHelpHints.ACCOUNT_HINT_STICKERS_UGC_SETTINGS_UNSEEN),(0,n.deleteActiveHelpHintLocally)(a.AvailableHelpHints.ACCOUNT_HINT_STICKERS_UGC_SETTINGS_UNSEEN))},c=(0,l.useCanOpenMiniApp)(),{canHideKeyboard:h}=(0,l.useUGCInKeyboardState)(e);return c?(0,i.jsx)(d,{children:(0,i.jsx)(o.ChatSettingsUGCStickersEditor,{showStickersUGCBadge:t,peerId:e,onClick:s})}):h?(0,i.jsx)(d,{children:(0,i.jsx)(r.ChatSettingsUGCStickersUser,{showStickersUGCBadge:t,peerId:e,onClick:s})}):null}},78949:(e,t,s)=>{"use strict";s.d(t,{Badge:()=>o});var i=s(474848),n=s(753457),a=s(235643);const o=()=>(0,i.jsx)("div",{className:a.default.ugcBadge,children:(0,i.jsx)(n.Badge,{mode:"new"})})},772659:(e,t,s)=>{"use strict";s.d(t,{ChatSettingsUGCStickersEditor:()=>g});var i=s(474848),n=s(610989),a=s(380118),o=s(839226),r=s(730915),l=s(268626),c=s(343339),h=s(78949),d=s(350288),_=s(235643);const g=({showStickersUGCBadge:e,peerId:t,onClick:s})=>{const g=(0,d.useCannotManageUGCStickers)();return(0,i.jsx)(l.UGCListItem,{subheader:g&&(0,i.jsx)(a.Text,{className:_.default.secondaryText,children:n.getLang("stickers_ugc_management_restricted")}),onClick:({nativeEvent:e})=>{g?(0,o.showUGCManagementRestrictedModal)():((0,r.showUGCStickersSettings)(e,{peer_id:t,ref:"settings"}),s?.())},chevron:!g,aside:(0,i.jsxs)(i.Fragment,{children:[e&&(0,i.jsx)(h.Badge,{}),g&&(0,i.jsx)(c.Icon20InfoCircleOutline,{className:_.default.infoIcon})]})})}},98713:(e,t,s)=>{"use strict";s.d(t,{ChatSettingsUGCStickersUser:()=>_});var i=s(474848),n=s(911449),a=s(610989),o=s(380118),r=s(268626),l=s(78949),c=s(142223),h=s(350288),d=s(235643);const _=({showStickersUGCBadge:e,peerId:t,onClick:s})=>{const{isKeyboardHidden:_}=(0,h.useUGCInKeyboardState)(t);return(0,i.jsx)(c.DropdownHideShowUGC,{peerId:t,children:(0,i.jsx)("div",{children:(0,i.jsx)(r.UGCListItem,{subheader:_&&(0,i.jsx)(o.Text,{className:d.default.secondaryText,children:a.getLang("stickers_ugc_management_stickers_hidden")}),chevron:!1,aside:(0,i.jsxs)("div",{className:d.default.userAside,children:[e&&(0,i.jsx)(l.Badge,{}),(0,i.jsx)(n.Icon16MoreVertical,{width:16,className:d.default.infoIcon})]}),onClick:s})})})}},142223:(e,t,s)=>{"use strict";s.d(t,{DropdownHideShowUGC:()=>r});var i=s(474848),n=s(349826),a=s(610989),o=s(350288);const r=({children:e,peerId:t})=>{const{isKeyboardHidden:s,toggle:r}=(0,o.useUGCInKeyboardState)(t),l=s?a.getLang("stickers_ugc_management_show_stickers"):a.getLang("stickers_ugc_management_hide_stickers"),c=s?"default":"destructive";return(0,i.jsx)(n.DropdownActionSheet,{offsetByMainAxis:-10,offsetByCrossAxis:-20,placement:"bottom-end",trigger:"click",content:(0,i.jsx)(n.DropdownActionSheet.Item,{type:c,onClick:r,children:l}),children:e})}},268626:(e,t,s)=>{"use strict";s.d(t,{UGCListItem:()=>c});var i=s(474848),n=s(826380),a=s(905148),o=s(281699),r=s(610989),l=s(235643);const c=({onClick:e,aside:t,chevron:s,subheader:c})=>(0,i.jsx)(n.default,{onClick:e,aside:t,chevron:s,children:(0,i.jsxs)("div",{className:l.default.listItem,children:[(0,i.jsx)(a.ChatSettingsRoundedIcon,{backgroundColor:"blue",children:(0,i.jsx)(o.Icon28UgcChatStickerCircleFillBlue,{className:l.default.ugcIcon})}),(0,i.jsxs)("div",{className:l.default.textWrapper,children:[r.getLang("stickers_ugc_chat_settings_menu"),c||null]})]})})},350288:(e,t,s)=>{"use strict";s.d(t,{useCanOpenMiniApp:()=>r,useCannotManageUGCStickers:()=>o,useUGCInKeyboardState:()=>l});var i=s(293721),n=s(296540),a=s(653439);const o=()=>{const{is_banned:e=!1,can_edit:t=!1}=(0,i.useStore)(a.$ugcInfo);return t&&e},r=()=>{const{is_banned:e=!1,can_edit:t=!1}=(0,i.useStore)(a.$ugcInfo);return t&&!e},l=e=>{const{can_hide_keyboard:t=!1,is_keyboard_hidden:s=!1}=(0,i.useStore)(a.$ugcInfo),o=(0,n.useCallback)((()=>{t&&(s?(0,a.showUgcFromKeyboardFx)(e):(0,a.hideUgcFromKeyboardFx)(e))}),[e,s,t]);return{canHideKeyboard:t,isKeyboardHidden:s,toggle:o}}},964018:(e,t,s)=>{"use strict";s.d(t,{onboardingHints:()=>c,showHintDefault:()=>l});var i=s(812477),n=s(388078),a=s(100072),o=s(165753);const r=e=>{const t=window.vk?.id;return!(!t||t===e)&&(n.Ranges.isUserId(e)||n.Ranges.isChatOrChannelPeer(e))},l=e=>!!window.IM.onboardingParams[e],c=[{hintId:o.AvailableHelpHints.ACCOUNT_HINT_IM_INTEGRATION_APPS_TOOLTIP_ON_PICKER,targetClass:".ms_item_more_label",callback:({target:e})=>{const t=document.createElement("span");return t.classList.add("ms_item_more_hintDot"),e.appendChild(t),t},needToShow:r},{hintId:o.AvailableHelpHints.ACCOUNT_HINT_IM_INTEGRATION_APPS_TOOLTIP_ON_PICKER,targetClass:'a[class*="app_action_mini_app"]:not(.ms_item--hidden)',callback:({hash:e,title:t,hintId:s,target:n,skipShow:r})=>{if(!e||!t)return;const{tooltip:l}=(0,i.helpHintTooltip)(n,{content:t,helpHintHash:e,helpHintId:s,skipShow:r,onHideRequestSent:()=>{const e=document.querySelector(".ms_item_more_hintDot");e&&(e.remove(),window.IM.activeHints=window.IM.activeHints.filter((({id:e})=>e!==o.AvailableHelpHints.ACCOUNT_HINT_IM_INTEGRATION_APPS_TOOLTIP_ON_PICKER)))}},{offset:[6,-21],align:"left",forceSide:"left",width:160,appendToParent:!0,withCloseButton:!1,cls:"feature_intro_blue_tt feature_info_tooltip helpHintTooltip__appActionTooltip"});return l.show(),l._ttel.addEventListener("click",(()=>l.hide())),(0,a.initOnboardingAutoHide)(l),l},needToShow:r}]},100072:(e,t,s)=>{"use strict";s.d(t,{deleteActiveHelpHintLocally:()=>d,destroyHintEl:()=>u,hideHelpHint:()=>h,initOnboarding:()=>C,initOnboardingAutoHide:()=>f,isActiveHint:()=>_,updateHints:()=>p});var i=s(933052),n=s(165753),a=s(964018),o=s(87223),r=s(317412);const l=e=>{const{id:t}=e;return Object.values(n.AvailableHelpHints).map((e=>String(e))).includes(t)},c=()=>new Promise(((e,t)=>{(0,i.api)("account.getHelpHints",{}).then((t=>{const s=t.items.filter(l);e(s)})).catch((e=>t(e?.message||e)))})),h=e=>{(0,i.api)("account.hideHelpHint",{hint_id:e}).catch((e=>(0,o.logError)(e,{environment:"im_help_hints_app_action_hide"})))},d=e=>{window.IM?.activeHints&&(window.IM.activeHints=window.IM.activeHints.filter((({id:t})=>t!==e)))},_=(e,t)=>t.findIndex((({id:t})=>t===e))>-1,g=(e,t,s)=>{const{hintId:i,targetClass:n,callback:o}=e,r=((e,t)=>t.find((({id:t})=>t===e)))(i,t),l=document.querySelector(n);if(!r||!l)return;const{id:c,title:h}=r,d=window.IM.onboardingParams[c]?.hash,_={target:l,hintId:c,title:h,hash:d};a.onboardingHints[s].element=o(_)},u=({element:e},t)=>{e&&((e=>e.hasOwnProperty("_ttel"))(e)?e.hide():e.remove(),a.onboardingHints[t].element=null)},m=(e,t,s)=>s?s(t):(0,a.showHintDefault)(e),p=async e=>{if(e){if(!window.IM.activeHints){const e=await c();window.IM.activeHints=e}a.onboardingHints.forEach(((t,s)=>{const{element:i,needToShow:n,hintId:a}=t,o=m(a,e,n);o&&!i?g(t,window.IM.activeHints,s):!o&&i&&u(t,s)}))}},C=e=>{window.IM.onboardingParams=e,a.onboardingHints.length>0&&c().then((e=>{window.IM.activeHints=e,a.onboardingHints.forEach(((t,s)=>{const{hintId:i}=t,n=window.IMBRIDGE?.selectedPeer(),{needToShow:a}=t;if(!n)return;m(i,n,a)&&g(t,e,s)}))})).catch((e=>{(0,o.logError)(e,{environment:"im_help_hints_app_action"})}))},f=e=>{let t,s=!1;const i=document.querySelector("._im_media_selector"),n=i?.querySelector(".ms_items_more_wrap"),a=n?.querySelector(".ms_items_more");function o(){clearTimeout(t),n&&n.classList.contains("shown")&&!s&&c()}function l(){t=setTimeout(o,3e3)}function c(){s||(e.hide(),s=!0,clearTimeout(t),i&&a&&((0,r.removeEvent)(i,"mouseover",l),(0,r.removeEvent)(a,"mousedown",c)))}i&&n&&a&&((0,r.addEvent)(i,"mouseover",l),(0,r.addEvent)(a,"mousedown",c))}},520380:(e,t,s)=>{"use strict";s.d(t,{kickUserOptimistically:()=>n});var i=s(531868);function n(e,t,s){const n=(0,i.getTab)(e,t);return n&&(0,i.isChatConvo)(n)?(n.memberIds=n.memberIds.filter((e=>e!==s)),n.adminIds=n.adminIds.filter((e=>e!==s)),n.membersCount=n.memberIds.length,Promise.resolve(e)):Promise.reject("No chat info")}},905616:(e,t,s)=>{"use strict";s.d(t,{ConvoAttaches:()=>_});var i=s(474848),n=s(742536),a=s(583652),o=s(929528),r=s(610989),l=s(440961),c=s(175953),h=s(505954);const d=({store:e,browserEnv:t,onClose:s,peerId:l})=>(0,i.jsx)(h.AppRootProvider,{children:(0,i.jsxs)(a.BaseModal,{onClose:s,disableBodyScroll:!0,className:"ConvoAttachesModal",children:[(0,i.jsx)(o.Modal.Header,{title:r.getLang("me_convo_attaches_app"),onClose:s}),(0,i.jsx)("div",{style:{width:550,height:420},children:(0,i.jsx)(n.ConvoAttachmentsApp,{store:e,env:t,peerId:c.resolveId(l),goToMessage:()=>{}})})]})});class _{renderConvoAttachesPopup(e,t,s){const n=_.getContainer(),a=()=>this.hide();n&&l.render((0,i.jsx)(d,{store:e,browserEnv:t,peerId:s,onClose:a}),n)}static getContainer(){return document.getElementById("ConvoAttaches")}hide(){if(!this.isMounted)return;const e=_.getContainer();e&&l.unmountComponentAtNode(e),this.isMounted=!1}show(e){const t=window.reforgedME?.convoAttachesContext;if(!t)return;const{store:s,browserEnv:i}=t;this.renderConvoAttachesPopup(s,i,e),this.isMounted=!0}constructor(){this.isMounted=!1}}},730915:(e,t,s)=>{"use strict";s.d(t,{StickersUGC:()=>h,showUGCStickersSettings:()=>c});var i=s(603943),n=s(927984),a=s(755513),o=s(389732),r=s(839226),l=s(328515);function c(e,t,s){(0,n.showApp)(e,o.UGC_STICKERS_APP_ID,!1,null,null,{layer:!0,urlHash:(0,l.getUGCAppHash)(t),onHide:()=>{s?.()}})}const h={showAgeRestriction:r.showAgeRestriction,showChatRestriction:r.showChatRestriction,showUGCPackInStickerPicker:e=>{e?window.StickerPickerViewer?.showPack(i.ServicePackKey.UGC,e):(0,a.logStickersError)("No html element as prop into showUGCPackInStickerPicker")}}},839226:(e,t,s)=>{"use strict";s.d(t,{showAgeRestriction:()=>c,showChatRestriction:()=>h,showUGCManagementRestrictedModal:()=>l});var i=s(474848),n=s(507607),a=s(272259),o=s(550072);const r=400;function l(){const e=(0,n.asyncComponent)((()=>Promise.all([s.e(91498),s.e(21529),s.e(69706),s.e(64695),s.e(7894)]).then(s.bind(s,864884))),(({UGCManagementRestrictedModal:e})=>e));(0,a.showMessageBoxModalSuspense)((({onClose:t})=>(0,i.jsx)(e,{onClose:t,lang:(0,o.getLangCode)()})),{width:r})}function c(){const e=(0,n.asyncComponent)((()=>Promise.all([s.e(91498),s.e(21529),s.e(69706),s.e(64695),s.e(7894)]).then(s.bind(s,864884))),(({AgeRestrictionModal:e})=>e));(0,a.showMessageBoxModalSuspense)((({onClose:t})=>(0,i.jsx)(e,{onClose:t,lang:(0,o.getLangCode)()})),{width:r})}function h(){const e=(0,n.asyncComponent)((()=>Promise.all([s.e(91498),s.e(21529),s.e(69706),s.e(64695),s.e(7894)]).then(s.bind(s,864884))),(({ChatRestrictionModal:e})=>e));(0,a.showMessageBoxModalSuspense)((({onClose:t})=>(0,i.jsx)(e,{onClose:t,lang:(0,o.getLangCode)()})),{width:r})}},109417:(e,t,s)=>{"use strict";function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}s.d(t,{default:()=>i})},364467:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});var i=s(449922);function n(e,t,s){return(t=(0,i.default)(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}},363662:(e,t,s)=>{"use strict";function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}s.d(t,{default:()=>i})},292327:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});var i=s(282284);function n(e,t){if("object"!=(0,i.default)(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!=(0,i.default)(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}},449922:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});var i=s(282284),n=s(292327);function a(e){var t=(0,n.default)(e,"string");return"symbol"==(0,i.default)(t)?t:t+""}},282284:(e,t,s)=>{"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}s.d(t,{default:()=>i})},651220:(e,t,s)=>{"use strict";s.d(t,{useVirtualizer:()=>l,useWindowVirtualizer:()=>c});var i=s(296540),n=s(440961),a=s(842468);const o="undefined"!=typeof document?i.useLayoutEffect:i.useEffect;function r(e){const t=i.useReducer((()=>({})),{})[1],s={...e,onChange:(s,i)=>{var a;i?(0,n.flushSync)(t):t(),null==(a=e.onChange)||a.call(e,s,i)}},[r]=i.useState((()=>new a.Virtualizer(s)));return r.setOptions(s),i.useEffect((()=>r._didMount()),[]),o((()=>r._willUpdate())),r}function l(e){return r({observeElementRect:a.observeElementRect,observeElementOffset:a.observeElementOffset,scrollToFn:a.elementScroll,...e})}function c(e){return r({getScrollElement:()=>"undefined"!=typeof document?window:null,observeElementRect:a.observeWindowRect,observeElementOffset:a.observeWindowOffset,scrollToFn:a.windowScroll,initialOffset:()=>"undefined"!=typeof document?window.scrollY:0,...e})}},842468:(e,t,s)=>{"use strict";s.d(t,{Virtualizer:()=>m,defaultRangeExtractor:()=>a,elementScroll:()=>u,observeElementOffset:()=>h,observeElementRect:()=>o,observeWindowOffset:()=>d,observeWindowRect:()=>l,windowScroll:()=>g});var i=s(580621);const n=e=>e,a=e=>{const t=Math.max(e.startIndex-e.overscan,0),s=Math.min(e.endIndex+e.overscan,e.count-1),i=[];for(let e=t;e<=s;e++)i.push(e);return i},o=(e,t)=>{const s=e.scrollElement;if(!s)return;const i=e.targetWindow;if(!i)return;const n=e=>{const{width:s,height:i}=e;t({width:Math.round(s),height:Math.round(i)})};if(n(s.getBoundingClientRect()),!i.ResizeObserver)return()=>{};const a=new i.ResizeObserver((e=>{const t=e[0];if(null==t?void 0:t.borderBoxSize){const e=t.borderBoxSize[0];if(e)return void n({width:e.inlineSize,height:e.blockSize})}n(s.getBoundingClientRect())}));return a.observe(s,{box:"border-box"}),()=>{a.unobserve(s)}},r={passive:!0},l=(e,t)=>{const s=e.scrollElement;if(!s)return;const i=()=>{t({width:s.innerWidth,height:s.innerHeight})};return i(),s.addEventListener("resize",i,r),()=>{s.removeEventListener("resize",i)}},c="undefined"==typeof window||"onscrollend"in window,h=(e,t)=>{const s=e.scrollElement;if(!s)return;const n=e.targetWindow;if(!n)return;let a=0;const o=c?()=>{}:(0,i.debounce)(n,(()=>{t(a,!1)}),e.options.isScrollingResetDelay),l=i=>()=>{a=s[e.options.horizontal?"scrollLeft":"scrollTop"],o(),t(a,i)},h=l(!0),d=l(!1);return d(),s.addEventListener("scroll",h,r),s.addEventListener("scrollend",d,r),()=>{s.removeEventListener("scroll",h),s.removeEventListener("scrollend",d)}},d=(e,t)=>{const s=e.scrollElement;if(!s)return;const n=e.targetWindow;if(!n)return;let a=0;const o=c?()=>{}:(0,i.debounce)(n,(()=>{t(a,!1)}),e.options.isScrollingResetDelay),l=i=>()=>{a=s[e.options.horizontal?"scrollX":"scrollY"],o(),t(a,i)},h=l(!0),d=l(!1);return d(),s.addEventListener("scroll",h,r),s.addEventListener("scrollend",d,r),()=>{s.removeEventListener("scroll",h),s.removeEventListener("scrollend",d)}},_=(e,t,s)=>{if(null==t?void 0:t.borderBoxSize){const e=t.borderBoxSize[0];if(e){return Math.round(e[s.options.horizontal?"inlineSize":"blockSize"])}}return Math.round(e.getBoundingClientRect()[s.options.horizontal?"width":"height"])},g=(e,{adjustments:t=0,behavior:s},i)=>{var n,a;const o=e+t;null==(a=null==(n=i.scrollElement)?void 0:n.scrollTo)||a.call(n,{[i.options.horizontal?"left":"top"]:o,behavior:s})},u=(e,{adjustments:t=0,behavior:s},i)=>{var n,a;const o=e+t;null==(a=null==(n=i.scrollElement)?void 0:n.scrollTo)||a.call(n,{[i.options.horizontal?"left":"top"]:o,behavior:s})};class m{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=(()=>{let e=null;const t=()=>e||(this.targetWindow&&this.targetWindow.ResizeObserver?e=new this.targetWindow.ResizeObserver((e=>{e.forEach((e=>{this._measureElement(e.target,e)}))})):null);return{disconnect:()=>{var e;return null==(e=t())?void 0:e.disconnect()},observe:e=>{var s;return null==(s=t())?void 0:s.observe(e,{box:"border-box"})},unobserve:e=>{var s;return null==(s=t())?void 0:s.unobserve(e)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach((([t,s])=>{void 0===s&&delete e[t]})),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:n,rangeExtractor:a,onChange:()=>{},measureElement:_,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,...e}},this.notify=(e,t)=>{var s,i;const{startIndex:n,endIndex:a}=this.range??{startIndex:void 0,endIndex:void 0},o=this.calculateRange();(e||n!==(null==o?void 0:o.startIndex)||a!==(null==o?void 0:o.endIndex))&&(null==(i=(s=this.options).onChange)||i.call(s,this,t))},this.cleanup=()=>{this.unsubs.filter(Boolean).forEach((e=>e())),this.unsubs=[],this.scrollElement=null},this._didMount=()=>(this.measureElementCache.forEach(this.observer.observe),()=>{this.observer.disconnect(),this.cleanup()}),this._willUpdate=()=>{var e;const t=this.options.getScrollElement();this.scrollElement!==t&&(this.cleanup(),this.scrollElement=t,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=(null==(e=this.scrollElement)?void 0:e.window)??null,this._scrollToOffset(this.scrollOffset,{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,(e=>{this.scrollRect=e,this.notify(!1,!1)}))),this.unsubs.push(this.options.observeElementOffset(this,((e,t)=>{this.scrollAdjustments=0,this.scrollDirection=t?this.scrollOffset<e?"forward":"backward":null,this.scrollOffset=e;const s=this.isScrolling;this.isScrolling=t,this.notify(s!==t,t)}))))},this.getSize=()=>this.scrollRect[this.options.horizontal?"width":"height"],this.getMeasurementOptions=(0,i.memo)((()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey]),((e,t,s,i)=>(this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:t,scrollMargin:s,getItemKey:i})),{key:!1}),this.getFurthestMeasurement=(e,t)=>{const s=new Map,i=new Map;for(let n=t-1;n>=0;n--){const t=e[n];if(s.has(t.lane))continue;const a=i.get(t.lane);if(null==a||t.end>a.end?i.set(t.lane,t):t.end<a.end&&s.set(t.lane,!0),s.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort(((e,t)=>e.end===t.end?e.index-t.index:e.end-t.end))[0]:void 0},this.getMeasurements=(0,i.memo)((()=>[this.getMeasurementOptions(),this.itemSizeCache]),(({count:e,paddingStart:t,scrollMargin:s,getItemKey:i},n)=>{const a=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const o=this.measurementsCache.slice(0,a);for(let r=a;r<e;r++){const e=i(r),a=1===this.options.lanes?o[r-1]:this.getFurthestMeasurement(o,r),l=a?a.end+this.options.gap:t+s,c=n.get(e),h="number"==typeof c?c:this.options.estimateSize(r),d=l+h,_=a?a.lane:r%this.options.lanes;o[r]={index:r,start:l,size:h,end:d,key:e,lane:_}}return this.measurementsCache=o,o}),{key:!1,debug:()=>this.options.debug}),this.calculateRange=(0,i.memo)((()=>[this.getMeasurements(),this.getSize(),this.scrollOffset]),((e,t,s)=>this.range=e.length>0&&t>0?function({measurements:e,outerSize:t,scrollOffset:s}){const i=e.length-1,n=t=>e[t].start,a=p(0,i,n,s);let o=a;for(;o<i&&e[o].end<s+t;)o++;return{startIndex:a,endIndex:o}}({measurements:e,outerSize:t,scrollOffset:s}):null),{key:!1,debug:()=>this.options.debug}),this.getIndexes=(0,i.memo)((()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count]),((e,t,s,i)=>null===t?[]:e({startIndex:t.startIndex,endIndex:t.endIndex,overscan:s,count:i})),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{const t=this.options.indexAttribute,s=e.getAttribute(t);return s?parseInt(s,10):(console.warn(`Missing attribute name '${t}={index}' on measured element.`),-1)},this._measureElement=(e,t)=>{const s=this.measurementsCache[this.indexFromElement(e)];if(!s||!e.isConnected)return void this.measureElementCache.forEach(((t,s)=>{t===e&&(this.observer.unobserve(e),this.measureElementCache.delete(s))}));const i=this.measureElementCache.get(s.key);i!==e&&(i&&this.observer.unobserve(i),this.observer.observe(e),this.measureElementCache.set(s.key,e));const n=this.options.measureElement(e,t,this);this.resizeItem(s,n)},this.resizeItem=(e,t)=>{const s=t-(this.itemSizeCache.get(e.key)??e.size);0!==s&&((void 0!==this.shouldAdjustScrollPositionOnItemSizeChange?this.shouldAdjustScrollPositionOnItemSizeChange(e,s,this):e.start<this.scrollOffset+this.scrollAdjustments)&&this._scrollToOffset(this.scrollOffset,{adjustments:this.scrollAdjustments+=s,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(e.index),this.itemSizeCache=new Map(this.itemSizeCache.set(e.key,t)),this.notify(!0,!1))},this.measureElement=e=>{e&&this._measureElement(e,void 0)},this.getVirtualItems=(0,i.memo)((()=>[this.getIndexes(),this.getMeasurements()]),((e,t)=>{const s=[];for(let i=0,n=e.length;i<n;i++){const n=t[e[i]];s.push(n)}return s}),{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{const t=this.getMeasurements();return(0,i.notUndefined)(t[p(0,t.length-1,(e=>(0,i.notUndefined)(t[e]).start),e)])},this.getOffsetForAlignment=(e,t)=>{const s=this.getSize();"auto"===t&&(t=e<=this.scrollOffset?"start":e>=this.scrollOffset+s?"end":"start"),"start"===t||("end"===t?e-=s:"center"===t&&(e-=s/2));const i=this.options.horizontal?"scrollWidth":"scrollHeight",n=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[i]:this.scrollElement[i]:0)-this.getSize();return Math.max(Math.min(n,e),0)},this.getOffsetForIndex=(e,t="auto")=>{e=Math.max(0,Math.min(e,this.options.count-1));const s=(0,i.notUndefined)(this.getMeasurements()[e]);if("auto"===t)if(s.end>=this.scrollOffset+this.getSize()-this.options.scrollPaddingEnd)t="end";else{if(!(s.start<=this.scrollOffset+this.options.scrollPaddingStart))return[this.scrollOffset,t];t="start"}const n="end"===t?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(n,t),t]},this.isDynamicMode=()=>this.measureElementCache.size>0,this.cancelScrollToIndex=()=>{null!==this.scrollToIndexTimeoutId&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(e,{align:t="start",behavior:s}={})=>{this.cancelScrollToIndex(),"smooth"===s&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(e,t),{adjustments:void 0,behavior:s})},this.scrollToIndex=(e,{align:t="auto",behavior:s}={})=>{e=Math.max(0,Math.min(e,this.options.count-1)),this.cancelScrollToIndex(),"smooth"===s&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const[n,a]=this.getOffsetForIndex(e,t);this._scrollToOffset(n,{adjustments:void 0,behavior:s}),"smooth"!==s&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout((()=>{this.scrollToIndexTimeoutId=null;if(this.measureElementCache.has(this.options.getItemKey(e))){const[t]=this.getOffsetForIndex(e,a);(0,i.approxEqual)(t,this.scrollOffset)||this.scrollToIndex(e,{align:a,behavior:s})}else this.scrollToIndex(e,{align:a,behavior:s})})))},this.scrollBy=(e,{behavior:t}={})=>{this.cancelScrollToIndex(),"smooth"===t&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.scrollOffset+e,{adjustments:void 0,behavior:t})},this.getTotalSize=()=>{var e;const t=this.getMeasurements();let s;return s=0===t.length?this.options.paddingStart:1===this.options.lanes?(null==(e=t[t.length-1])?void 0:e.end)??0:Math.max(...t.slice(-this.options.lanes).map((e=>e.end))),s-this.options.scrollMargin+this.options.paddingEnd},this._scrollToOffset=(e,{adjustments:t,behavior:s})=>{this.options.scrollToFn(e,{behavior:s,adjustments:t},this)},this.measure=()=>{var e,t;this.itemSizeCache=new Map,null==(t=(e=this.options).onChange)||t.call(e,this,!1)},this.setOptions(e),this.scrollRect=this.options.initialRect,this.scrollOffset="function"==typeof this.options.initialOffset?this.options.initialOffset():this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach((e=>{this.itemSizeCache.set(e.key,e.size)})),this.notify(!1,!1)}}const p=(e,t,s,i)=>{for(;e<=t;){const n=(e+t)/2|0,a=s(n);if(a<i)e=n+1;else{if(!(a>i))return n;t=n-1}}return e>0?e-1:0}},580621:(e,t,s)=>{"use strict";function i(e,t,s){let i,n=s.initialDeps??[];return()=>{var a,o,r,l;let c;s.key&&(null==(a=s.debug)?void 0:a.call(s))&&(c=Date.now());const h=e();if(!(h.length!==n.length||h.some(((e,t)=>n[t]!==e))))return i;let d;if(n=h,s.key&&(null==(o=s.debug)?void 0:o.call(s))&&(d=Date.now()),i=t(...h),s.key&&(null==(r=s.debug)?void 0:r.call(s))){const e=Math.round(100*(Date.now()-c))/100,t=Math.round(100*(Date.now()-d))/100,i=t/16,n=(e,t)=>{for(e=String(e);e.length<t;)e=" "+e;return e};console.info(`%c⏱ ${n(t,5)} /${n(e,5)} ms`,`\n            font-size: .6rem;\n            font-weight: bold;\n            color: hsl(${Math.max(0,Math.min(120-120*i,120))}deg 100% 31%);`,null==s?void 0:s.key)}return null==(l=null==s?void 0:s.onChange)||l.call(s,i),i}}function n(e,t){if(void 0===e)throw new Error("Unexpected undefined"+(t?`: ${t}`:""));return e}s.d(t,{approxEqual:()=>a,debounce:()=>o,memo:()=>i,notUndefined:()=>n});const a=(e,t)=>Math.abs(e-t)<1,o=(e,t,s)=>{let i;return function(...n){e.clearTimeout(i),i=e.setTimeout((()=>t.apply(this,n)),s)}}}}]);try{stManager.done("dist/web/chunks/68307272.2a22ef2c.js")}catch(e){}