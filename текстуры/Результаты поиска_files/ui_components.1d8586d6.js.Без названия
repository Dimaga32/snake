(()=>{"use strict";var t,i={946076:(t,i,e)=>{e.r(i),e.d(i,{UIGallery:()=>c,UI_GALLERY_CLASSNAME:()=>n.UI_GALLERY_CLASSNAME,UI_GALLERY_CONTENT_CLASSNAME:()=>n.UI_GALLERY_CONTENT_CLASSNAME,UI_GALLERY_INNER_CLASSNAME:()=>n.UI_GALLERY_INNER_CLASSNAME,uiGetGallery:()=>d});var s=e(942451),l=e(7144),r=e(663878),h=e(317412),o=e(879007),_=e(452314),n=e(374036);const a=(0,s.makeSharedState)("ui-gallery",(()=>({galleries:{},incIndex:0})),{version:0});function d(t){const i=(0,_.domData)((0,_.ge)(t),"gallery-id");return i&&a().galleries[i]}class c{_checkSizesAndUpdate(){return 0!==this._width&&0!==this._itemWidth||(this._width=Math.round((0,_.getSize)(this._el)[0]),this._itemWidth=(0,_.getSize)(this._items[0])[0],this._itemFullWidth=this._itemWidth+this._itemOffset),!(0===this._width||0===this._itemWidth)}_initScroll(){(this._opts.scrollX||this._opts.scrollY)&&(this._opts.isModernTransitionsEnabled||(0,h.addEvent)(this._innerCont,"DOMMouseScroll wheel",this._onWheelScroll.bind(this)))}_initArrows(){this._opts.noArrows?(0,_.addClass)(this._el,"ui_gallery_no_arrows"):(this._leftArrow=(0,_.geByClass1)("ui_gallery__arrow_left",this._el),this._rightArrow=(0,_.geByClass1)("ui_gallery__arrow_right",this._el),this._arrowWidth=(0,_.getSize)(this._leftArrow)[0],this._opts.isModernTransitionsEnabled?((0,h.addEvent)(this._leftArrow,"click",this._slide.bind(this,-1,void 0,{eventName:"arrow"})),(0,h.addEvent)(this._rightArrow,"click",this._slide.bind(this,1,void 0,{eventName:"arrow"}))):((0,h.addEvent)(this._leftArrow,"click",this._legacySlide.bind(this,-1,void 0,{eventName:"arrow"})),(0,h.addEvent)(this._rightArrow,"click",this._legacySlide.bind(this,1,void 0,{eventName:"arrow"}))),(0,h.addEvent)(this._leftArrow,"mouseover",this._onArrowMouseOver.bind(this,"left")),(0,h.addEvent)(this._leftArrow,"mouseout",this._onArrowMouseOut.bind(this)),(0,h.addEvent)(this._rightArrow,"mouseover",this._onArrowMouseOver.bind(this,"right")),(0,h.addEvent)(this._rightArrow,"mouseout",this._onArrowMouseOut.bind(this)))}_onWheelScroll(t){let i;if("wheel"==t.type)if(Math.abs(t.deltaY)>Math.abs(t.deltaX)){if(!this._opts.scrollY)return;i=-t.deltaY}else{if(!this._opts.scrollX)return;i=-t.deltaX}else if(void 0!==t.wheelDeltaY){if(!this._opts.scrollY)return;i=t.wheelDeltaY}else if(void 0!==t.wheelDelta)i=t.wheelDelta;else{if(!t.detail||1!==t.axis)return;i=-t.detail}i=this._scroll.rtlSame?-i:i,Math.abs(i)>=120&&(i=74*Math.max(-1,Math.min(1,i))),this._innerCont.scrollLeft-=i,this._checkItemsAfterScroll(this._innerCont.scrollLeft),(0,h.cancelEvent)(t)}_getScrollParams(){this._opts.shouldCheckGalleryViewed&&this._checkSizesAndUpdate();const t=this._width-2*this._arrowWidth,i=this._itemFullWidth>t;return{isItemBiggerThanWidth:i,scrollDistance:i?this._itemFullWidth:t}}_legacySlide(t,i,e){const{scrollDistance:s,isItemBiggerThanWidth:l}=this._getScrollParams();let o=this._innerCont.scrollLeft+(this._scroll.rtlSame?-t:t)*s;const n=this._innerCont.scrollWidth-this._width;this._scroll.negative?(o=Math.min(o,0),o=Math.abs(o)):o=Math.max(0,o),o=Math.min(n,o);const a=this._scroll.negative||this._scroll.rtlSame?-t:t;if(a>0&&o<n){o=Math.floor(o/this._itemFullWidth)*this._itemFullWidth}else if(a<0&&o>0){o=(l?Math.ceil(o/this._itemFullWidth):Math.floor(o/this._itemFullWidth))*this._itemFullWidth}if(this._opts.isFullSizeSlide&&(o=(this._visible.left+t)*this._itemFullWidth),0===o||o===n){const i=this._innerCont.scrollWidth;(0,_.addClass)(this._inner,"ui_gallery__inner_shift_instant"),this._onArrowMouseOut(),o&&(o+=t*(this._innerCont.scrollWidth-i))}this._scroll.negative&&(o=-o),(0,r.animate)(this._innerCont,{scrollLeft:o},{duration:Math.abs(this._innerCont.scrollLeft-o)+50,transition:r.Fx.Transitions.easeOutCubic}),this._checkItemsAfterScroll(o),setTimeout((()=>(0,_.removeClass)(this._inner,"ui_gallery__inner_shift_instant")),0),this._opts?.onSlide?.(t,{eventName:e?.eventName}),i&&(0,h.cancelEvent)(i)}_updateShift(t){let i=this._shift+t;const e=this._inner.scrollWidth-this._inner.clientWidth;i>e&&(i=e),i<0&&(i=0),this._shift=i}_slide(t,i,e){const{scrollDistance:s}=this._getScrollParams();this._updateShift(t*s),this._inner.style.transform=`translate3d(${-1*this._shift}px, 0, 0)`,this._checkItemsAfterScroll(this._shift),this._opts?.onSlide?.(t,{eventName:e?.eventName}),i&&(0,h.cancelEvent)(i)}_checkItemsAfterScroll(t,i){if(this._scroll.negative&&(t=Math.abs(t)),(!this._opts.shouldCheckGalleryViewed||this._visible.isGalleryViewed)&&(!this._opts.shouldCheckGalleryViewed||this._checkSizesAndUpdate())){if(this._opts.markOutside||this._opts.onViewItem){const e=this._itemWidth/3,s=(this._scroll.backward?this._inner.scrollWidth-this._width-t:t)-this._scrollOffset,l=t&&Math.floor(s/this._itemFullWidth),r=l*this._itemFullWidth+2*e;let h;h=this._scroll.backward?t+this._width<this._inner.scrollWidth-r:t>r;const n=Math.min(this._items.length-1,Math.floor((s+this._width)/this._itemFullWidth)),a=n*this._itemFullWidth+2*e;let d;if(d=this._scroll.backward?t>this._inner.scrollWidth-a:t+this._width<a,this._opts.onViewItem){const t=h?Math.min(this._items.length-1,l+1):l,e=d?Math.max(0,n-1):n;if(i||t!==this._visible.left||e!==this._visible.right){for(let s=t;s<=e;s++)(this._visible.left<0||i&&!(0,o.inArray)(this._items[s],this._visible.items)||s<this._visible.left||s>this._visible.right)&&this._opts.onViewItem(this._items[s],s);this._visible.left=t,this._visible.right=e,this._visible.items=this._items.slice(t,e+1)}}this._opts.markOutside&&(i?((0,_.geByClass)("ui_gallery_item_outside",this._inner).forEach((t=>{(0,_.removeClass)(t,"ui_gallery_item_outside")})),this._outside.left=-1,this._outside.right=-1):((l!==this._outside.left||!h)&&this._outside.left>=0&&((0,_.removeClass)(this._items[this._outside.left],"ui_gallery_item_outside"),this._outside.left=-1),(n!==this._outside.right||!d)&&this._outside.right>=0&&((0,_.removeClass)(this._items[this._outside.right],"ui_gallery_item_outside"),this._outside.right=-1)),h&&l!==this._outside.left&&((0,_.addClass)(this._items[l],"ui_gallery_item_outside"),this._outside.left=l),d&&n!==this._outside.right&&((0,_.addClass)(this._items[n],"ui_gallery_item_outside"),this._outside.right=n))}if(!this._opts.noArrows){const i=t>0,e=t+this._width<this._inner.scrollWidth;(0,_.toggleClass)(this._leftArrow,"ui_gallery__arrow_visible",this._scroll.rtl&&!this._scroll.backward?e:i),(0,_.toggleClass)(this._rightArrow,"ui_gallery__arrow_visible",this._scroll.rtl&&!this._scroll.backward?i:e)}(!this._scroll.backward&&this._inner.scrollWidth-t-this._width<1e3||this._scroll.backward&&t<1e3)&&this._onLoadMore()}}_onArrowMouseOver(t){this._inner.classList.add(`ui_gallery__inner_shift_${t}`)}_onArrowMouseOut(){this._inner.classList.remove("ui_gallery__inner_shift_left"),this._inner.classList.remove("ui_gallery__inner_shift_right")}_onLoadMore(){!this._opts.onLoadMore||this._loadingMore||this._finised||(this._loadingMore=!0,this._opts.onLoadMore(this._items.length))}addMore(t,i){t=t||[],this.addItems(t),this._finised=!!i||!t.length,this._loadingMore=!1}addItems(t,i){if((t=t||[]).length){const e=i>=0&&i<this._items.length?this._items[i]:null;t.forEach((t=>{e?(0,_.domInsertBefore)(t,e):this._inner.appendChild(t)})),this.refresh()}}destroy(){(0,h.removeEvent)(this._innerCont),(0,h.removeEvent)(this._leftArrow),(0,h.removeEvent)(this._rightArrow),(0,_.domData)(this._el,"gallery-id",null),delete a().galleries[this._id],this._opts.onDestroy&&this._opts.onDestroy(),(0,_.re)(this._el)}removeItem(t){return(0,l.isNumeric)(t)&&(t=this._items[t]),!(!t||!(0,o.inArray)(t,this._items))&&((0,_.re)(t),this.refresh(),this._items.length||this.destroy(),!0)}refresh(){this._width=Math.round((0,_.getSize)(this._el)[0]),this._items=(0,_.geByClass)("ui_gallery_item",this._el),this._checkItemsAfterScroll(this._innerCont.scrollLeft,!0)}scrollToDirection(t){this._opts.isModernTransitionsEnabled?this._slide(t,void 0,{eventName:"bullet"}):this._legacySlide(t,void 0,{eventName:"bullet"})}getItems(){return this._items}getVisibleItems(){return this._visible.items.map(((t,i)=>[t,this._visible.left+i]))}setGalleryViewed(){this._visible.isGalleryViewed=!0,this._checkItemsAfterScroll(this._innerCont.scrollLeft)}constructor(t,i){if(!t)throw new Error("No element was provided for UIGallery");if(!(t=(0,_.ge)(t)).classList.contains(n.UI_GALLERY_CLASSNAME))throw new Error("Provided incorrect element for UIGallery");const e=d(t);if(e)return e;this._opts=(0,o.extend)({markOutside:!1,scrollY:!0,scrollX:!0,noArrows:!1,isFullSizeSlide:!1,isModernTransitionsEnabled:!1},i),this._id=a().incIndex,a().incIndex+=1,this._el=t,this._width=Math.round((0,_.getSize)(this._el)[0]),this._items=(0,_.geByClass)("ui_gallery_item",this._el),this._itemWidth=(0,_.getSize)(this._items[0])[0],this._itemOffset=(0,o.intval)((0,_.getStyle)(this._items[0],vk.rtl?"marginLeft":"marginRight")),this._scrollOffset=(0,o.intval)((0,_.getStyle)(this._items[0],"marginLeft")),this._itemFullWidth=this._itemWidth+this._itemOffset,this._innerCont=(0,_.geByClass1)(n.UI_GALLERY_CONTENT_CLASSNAME,this._el),this._inner=(0,_.geByClass1)(n.UI_GALLERY_INNER_CLASSNAME,this._el),this._opts.isModernTransitionsEnabled&&(this._shift=0,this._inner.classList.add("ui_gallery__inner--withTransitions")),this._scroll=function(){const t={rtl:!1,backward:!1,delta:1,negative:!1,rtlSame:!1};if(!vk.rtl)return t;if(!cur._scrollInfo){const i=(0,_.se)('<div style="position: fixed; left: -1000px; width: 0; overflow: scroll">x</div>'),e=document.querySelector("#content");e?.appendChild(i);const s=i.scrollLeft;t.rtl=vk.rtl,t.backward=s>0,i.scrollLeft=1e3,t.delta=i.scrollLeft===s?-1:1,t.negative=!t.backward&&t.delta<0,t.rtlSame=t.rtl&&!t.backward&&!t.negative,(0,_.re)(i),cur._scrollInfo=t}return cur._scrollInfo}(),this._loadingMore=!1,this._finised=!1,this._visible={left:-1,right:-1,items:[],isGalleryViewed:!1},this._outside={left:-1,right:-1,timer:null},this._initScroll(),this._initArrows(),(0,_.domData)(this._el,"gallery-id",this._id),a().galleries[this._id]=this,this._checkItemsAfterScroll(this._innerCont.scrollLeft,!0)}}},209904:(t,i,e)=>{var s=e(490712),l=e(946076);window.vk?.pe?.static_manager_dynamic_imports&&window.vk?.stDomain&&(e.p=window.vk.stDomain+"/dist/"),window.UIGallery=l.UIGallery,window.uiGetGallery=l.uiGetGallery,window.stManager.done(window.jsc("web/ui_components.js")),requestIdleCallback((()=>{try{(0,s.statlogsValueEvent)("entries_requests",1,"ui_components","web")}catch{}}),{timeout:5e3})}},e={};function s(t){var l=e[t];if(void 0!==l)return l.exports;var r=e[t]={exports:{}};return i[t].call(r.exports,r,r.exports,s),r.exports}s.m=i,t=[],s.O=(i,e,l,r)=>{if(!e){var h=1/0;for(a=0;a<t.length;a++){for(var[e,l,r]=t[a],o=!0,_=0;_<e.length;_++)(!1&r||h>=r)&&Object.keys(s.O).every((t=>s.O[t](e[_])))?e.splice(_--,1):(o=!1,r<h&&(h=r));if(o){t.splice(a--,1);var n=l();void 0!==n&&(i=n)}}return i}r=r||0;for(var a=t.length;a>0&&t[a-1][2]>r;a--)t[a]=t[a-1];t[a]=[e,l,r]},s.n=t=>{var i=t&&t.__esModule?()=>t.default:()=>t;return s.d(i,{a:i}),i},s.d=(t,i)=>{for(var e in i)s.o(i,e)&&!s.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:i[e]})},s.e=()=>Promise.resolve(),s.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.p="/dist/",(()=>{var t={74031:0};s.O.j=i=>0===t[i];var i=(i,e)=>{var l,r,[h,o,_]=e,n=0;if(h.some((i=>0!==t[i]))){for(l in o)s.o(o,l)&&(s.m[l]=o[l]);if(_)var a=_(s)}for(i&&i(e);n<h.length;n++)r=h[n],s.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return s.O(a)},e=self.webpackChunkvkweb=self.webpackChunkvkweb||[];e.forEach(i.bind(null,0)),e.push=i.bind(null,e.push.bind(e))})();var l=s.O(void 0,[35623,81765],(()=>s(209904)));l=s.O(l)})();