(()=>{"use strict";var e,t,r,a,n,c,s={809738:(e,t,r)=>{r.d(t,{default:()=>a});const a={wrapper:"SearchInput-module__wrapper--HBTTP",wrapperWithPadding:"SearchInput-module__wrapperWithPadding--DQO9r",inputWrap:"SearchInput-module__inputWrap--RwZpW",input:"SearchInput-module__input--OoBio",clearButton:"SearchInput-module__clearButton--DLioq",button:"SearchInput-module__button--iOQ0A"}},334331:(e,t,r)=>{r.d(t,{default:()=>a});const a={app:"TopSearchRoot-module__app--oYjRu",search:"TopSearchRoot-module__search--eLI9J"}},798554:(e,t,r)=>{r.d(t,{default:()=>a});const a={app:"App-module__app--sMbxh",search:"App-module__search--_fJCB"}},892610:(e,t,r)=>{r.d(t,{default:()=>a});const a={root:"SearchResults-module__root--mnxjb",scroll:"SearchResults-module__scroll--P7w2c"}},246434:(e,t,r)=>{r.d(t,{default:()=>a});const a={spinner:"Spinner-module__spinner--pJOJK"}},657282:(e,t,r)=>{function a(e){e.preventDefault(),e.stopPropagation()}r.d(t,{cancelEvent:()=>a})},851436:(e,t,r)=>{r.d(t,{useIsMounted:()=>n});var a=r(296540);const n=()=>{const e=(0,a.useRef)(!1);return(0,a.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),(0,a.useCallback)((()=>e.current),[])}},455234:(e,t,r)=>{r.d(t,{createGroupsEditFx:()=>o,createGroupsGetByIdFx:()=>n,createGroupsGetMembersFx:()=>d,createGroupsInviteFx:()=>i,createGroupsIsMemberFx:()=>l,createGroupsJoinFx:()=>c,createGroupsLeaveFx:()=>s,createGroupsRecallInvitationFx:()=>u});var a=r(66044);const n=e=>(0,a.createApiEffect)("groups.getById",e),c=e=>(0,a.createApiEffect)("groups.join",e),s=e=>(0,a.createApiEffect)("groups.leave",e),o=e=>(0,a.createApiEffect)("groups.edit",e),l=e=>(0,a.createApiEffect)("groups.isMember",e),i=e=>(0,a.createApiEffect)("groups.invite",e),u=e=>(0,a.createApiEffect)("groups.recallInvitation",e),d=e=>(0,a.createApiEffect)("groups.getMembers",e)},819952:(e,t,r)=>{function a(e){e.preventDefault(),e.stopPropagation()}r.d(t,{cancelEvent:()=>a})},240751:(e,t,r)=>{r.d(t,{isValidUrl:()=>c,makeUrl:()=>n});var a=r(760325);function n(e,t,r=!0){if(!t)return e;const[n,c]=e.split("?"),s={},o=[];return c&&c.split("&").map((e=>{const[r,a]=e.split("=");r in t||(t[r]=a)})),Object.keys(t).forEach((e=>{const r=t[e];var n;("string"==typeof(n=r)&&n||(0,a.isNumber)(r))&&(s[e]=r)})),Object.keys(s).forEach((e=>{const t=r?encodeURIComponent(s[e]):s[e];o.push(`${e}=${t}`)})),0===o.length?n:`${n}?${o.join("&")}`}const c=e=>{try{return new URL(e),!0}catch{}return!1}},498084:(e,t,r)=>{r.d(t,{connectTrackTmrGroupsJoin:()=>i,groupsJoinAction:()=>u,trackTmrGroupsJoin:()=>o});var a=r(141229),n=r(933052),c=r(32489),s=r(476726);const o=()=>{(0,s.partConfigEnabled)("group_join_track_event_count")&&(0,a.tmrSendTimespentEvent)(a.MY_TRACKER_COUNT_EVENT_IDS.COMMUNITY_SUBSCRIBE)},l=(0,c.createEffect)({name:"fx/track_group_join",handler:o}),i=e=>(0,c.sample)({clock:e.done,target:l}),u=(e,t,r)=>(0,n.api)("groups.join",e,t,r).then((e=>(o(),e)))},175241:(e,t,r)=>{r.d(t,{connectTrackTmrGroupsJoin:()=>a.connectTrackTmrGroupsJoin,groupsJoinAction:()=>a.groupsJoinAction,trackTmrGroupsJoin:()=>a.trackTmrGroupsJoin});var a=r(498084)},683351:(e,t,r)=>{var a=r(32489),n=r(583945);n.$selectedIndex.reset(n.fireResetSelectionIndex),n.$itemsIndex.reset(n.fireResetItemsIndex),(0,a.sample)({clock:[n.fireUpSelectionIndex,n.fireDownSelectionIndex],fn:()=>!1,target:n.$isMouseActive}),(0,a.sample)({clock:n.fireSetSelectionIndexByItem,fn:()=>!0,target:n.$isMouseActive}),(0,a.sample)({clock:n.fireSetSelectionIndexByItem,source:n.$itemsIndex,fn:(e,t)=>e.findIndex((e=>e.id===t))||-1,target:n.$selectedIndex}),(0,a.sample)({clock:n.fireDownSelectionIndex,source:{itemsIndex:n.$itemsIndex,selectedIndex:n.$selectedIndex},fn:({itemsIndex:e,selectedIndex:t})=>e.length?(t+1)%e.length:-1,target:n.$selectedIndex}),(0,a.sample)({clock:n.fireUpSelectionIndex,source:{itemsIndex:n.$itemsIndex,selectedIndex:n.$selectedIndex},fn:({itemsIndex:e,selectedIndex:t})=>e.length?t-1<0?e.length-1:t-1:-1,target:n.$selectedIndex}),(0,a.sample)({clock:n.fireSetItemIndex,source:n.$itemsIndex,fn:(e,t)=>{if(null===t)return[];const r=[...e],a=r.findIndex((e=>e.id===t.id));return-1!==a&&(r[a]=t),r.push(t),r},target:n.$itemsIndex}),(0,a.sample)({clock:n.$selectedIndex,source:{selectedItemIndex:n.$selectedItemIndex,itemsIndex:n.$itemsIndex},filter:({selectedItemIndex:e,itemsIndex:t},r)=>(t[r]||0===t?.[r]?.id?t[r]:null)?.id!==e?.id,fn:({itemsIndex:e},t)=>e[t]||0===e?.[t]?.id?e[t]:null,target:n.$selectedItemIndex})},545729:(e,t,r)=>{r.d(t,{FILTER_MAX_PRICE:()=>s,GROUP_HEADER_QUERY_PARAM:()=>l,INPUT_REQUEST_DEBOUNCE:()=>o,MARKET_CATALOG_SCREEN_DEFAULT:()=>a,MARKET_LEFT_MENU_SCREEN:()=>n,MARKET_SEARCH_QUERY_ID:()=>c});const a="marketplace",n="market",c="market_search_query_id",s=5e9,o=1e3,l="with_group_header"},988397:(e,t,r)=>{r.d(t,{openProductWiki:()=>l});var a=r(112268),n=r(476726),c=r(387674),s=r(545729),o=r(927984);function l({ownerId:e,itemId:t,event:r,externalId:l,onLoaded:i,from:u,params:d,href:f,adParams:p,isService:h,refSource:b}){if(r?.preventDefault(),r?.stopPropagation(),r?.persist?.(),(0,n.partConfigEnabled)("web_market_item_page")){const e=document.createElement("a");if(e.setAttribute("target","_blank"),f){const t=new URL(f),r=(0,c.fromQueryString)(t.search.slice(1)),a=("groups"===window.cur.module||"public"===window.cur.module)&&!h;a&&(r[s.GROUP_HEADER_QUERY_PARAM]="1"),b&&(r.ref_source=b);const n=a?`${t.pathname}?${(0,c.toQueryString)(r)}`:f;e.setAttribute("href",n)}e.click()}else{const n=(0,a.joinRawId)({itemId:t,ownerId:e,externalId:l});(0,o.showWiki)({w:`product${n}/query`,from:u,...d},!1,r,{queue:1,onLoaded:i,adParams:p})}}},4257:(e,t,r)=>{var a=r(474848),n=r(490712),c=r(205338),s=r(293819),o=r(321558);window.vk?.pe?.static_manager_dynamic_imports&&window.vk?.stDomain&&(r.p=window.vk.stDomain+"/dist/"),(0,s.registerReactApplication)("TopSearch",(()=>{const e=(0,s.getReactRootEl)("TopSearch");e&&(0,c.createRoot)(e).render((0,a.jsx)(o.SearchTopRoot,{}))}));try{window.stManager.done(window.jsc("web/search_top.js"))}catch(e){}requestIdleCallback((()=>{try{(0,n.statlogsValueEvent)("entries_requests",1,"search_top","web")}catch{}}),{timeout:5e3})},470661:(e,t,r)=>{r.d(t,{SearchInput:()=>f});var a=r(474848),n=r(296540),c=r(903224),s=r(610989),o=r(670191),l=r(384574),i=r(8520),u=r(313251),d=r(809738);const f=(0,n.forwardRef)((function({onClick:e,onButtonSubmit:t,onFocus:r,onBlur:f,onInput:p,onKeyDown:h,onKeyUp:b,getRootRef:m,searchQuery:S="",tempQuery:g,placeholder:_,focusTrigger:k,isLegacyInput:E=!1,withPadding:v,...w},R){const C=(0,n.useRef)(null),y=(0,u.useExternRef)(R,C),[I,T]=(0,n.useState)(""),x=t=>{e?.(t)},A=()=>{t?.(I)},j=e=>{r?.(e)},P=e=>{f?.(e)},O=e=>{const t=e.currentTarget.value||"";T(t),p?.(e)},D=e=>{h?.(e)},$=e=>{b?.(e)},N=()=>{T(""),C?.current?.focus(),t?.("")};return(0,n.useEffect)((()=>{T(S)}),[S]),(0,n.useEffect)((()=>{g&&(T(g),setTimeout((()=>{C?.current?.setSelectionRange(g.length,g.length)}),0))}),[g]),(0,n.useEffect)((()=>{k&&C?.current?.focus()}),[k]),E?(0,a.jsxs)("div",{className:(0,i.classNames)(d.default.wrapper,v&&d.default.wrapperWithPadding),ref:m,children:[(0,a.jsxs)("div",{className:d.default.inputWrap,children:[(0,a.jsx)("input",{className:d.default.input,type:"search",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",autoComplete:"off",placeholder:_||s.getLang("global_search"),onClick:x,onFocus:j,onBlur:P,onInput:O,onKeyDown:D,ref:y,onKeyUp:$,value:I,id:w?.id??"search_query"}),I&&(0,a.jsx)("button",{className:d.default.clearButton,onClick:N,children:(0,a.jsx)(o.Icon24Cancel,{})})]}),(0,a.jsx)("button",{className:d.default.button,onClick:A,children:(0,a.jsx)(l.Icon16SearchOutline,{})})]}):(0,a.jsx)(c.Search,{placeholder:_||s.getLang("global_search"),onClick:x,onFocus:j,onBlur:P,onInput:O,onKeyDown:D,onKeyUp:$,getRootRef:m,getRef:y,value:I,...w})}))},870599:(e,t,r)=>{r.d(t,{SearchInput:()=>a.SearchInput});var a=r(470661)},321558:(e,t,r)=>{r.d(t,{SearchTopRoot:()=>o});var a=r(474848),n=r(187610),c=r(753457),s=r(505954);r(887665),r(334331);const o=()=>(0,a.jsx)(s.AppRootProvider,{sizeX:c.SizeType.REGULAR,sizeY:c.SizeType.COMPACT,viewWidth:c.ViewWidth.DESKTOP,children:(0,a.jsx)(n.App,{})})},573921:(e,t,r)=>{r.d(t,{getSearchTop:()=>c});var a=r(933052),n=r(500524);r(175241);function c(e,t){return(0,a.api)(n.CATALOG_API_METHODS.GET_SEARCH_TOP,e,void 0,t)}},857687:(e,t,r)=>{r.d(t,{App:()=>b});var a=r(474848),n=r(296540),c=r(293721),s=r(870599),o=r(302611),l=r(25079),i=r(317412),u=r(68455),d=r(81364),f=r(20191),p=r(500524),h=(r(683351),r(798554));const b=()=>{const e=(0,c.useStore)(l.$displayResults),t=(0,c.useStore)(l.$currentQuery),r=(0,n.useRef)(null),b=(0,n.useRef)(),m=(0,n.useCallback)((()=>{e||r.current?.focus()}),[r,e]),S=(0,n.useCallback)((e=>{(0,l.fireKeyDownEvent)({event:e,blur:()=>{r.current?.blur()},cancelEvent:()=>{(0,i.cancelEvent)(e.nativeEvent)},clearTimeout:()=>{clearTimeout(b.current)}})}),[r,b]),g=(0,n.useCallback)((e=>{const t=e.currentTarget.value||"";(0,l.fireSetCurrentQuery)(t),clearTimeout(b.current),b.current=setTimeout((()=>{(0,l.fireSearch)({q:t})}),250)}),[b]);return(0,n.useEffect)((()=>{const e=e=>{const t=e.target;t.closest('[data-search-top-target="true"]')||t.closest(`#${p.SEARCH_INPUT_ID}`)||t.closest(".vkuiSearch__icon")||!(0,u.isMainClick)(e)||(0,l.fireSetResultsDisplay)(!1)};return(0,d.topHeaderListener)(),document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[]),(0,n.useEffect)((()=>()=>clearTimeout(b.current)),[]),(0,n.useEffect)((()=>{const e=(0,f.subscribeModuleEvaluated)((()=>{(0,l.fireSetCatalog)(null),(0,l.fireAbortRequest)(),(0,l.fireSetCurrentQuery)(""),(0,l.fireSetResultsDisplay)(!1)}));return()=>{e()}}),[]),(0,a.jsxs)("div",{className:h.default.app,id:"ts_wrap",children:[(0,a.jsx)("div",{"data-search-top-target":"true",children:(0,a.jsx)(s.SearchInput,{noPadding:!0,onClick:m,onFocus:()=>{e||(0,l.fireSetResultsDisplay)(!0)},onInput:g,onKeyDown:S,ref:r,searchQuery:t,className:h.default.search,"data-testid":"search_top_input"})}),e&&(0,a.jsx)(o.SearchResults,{})]})}},187610:(e,t,r)=>{r.d(t,{App:()=>a.App});var a=r(857687)},216667:(e,t,r)=>{r.d(t,{Placeholder:()=>s});var a=r(474848),n=r(923594),c=r(610989);const s=()=>(0,a.jsx)(n.Placeholder,{children:c.getLang("search_search_top_has_no_results")})},411216:(e,t,r)=>{r.d(t,{Placeholder:()=>a.Placeholder});var a=r(216667)},626807:(e,t,r)=>{r.d(t,{SearchResults:()=>_});var a=r(474848),n=r(296540),c=r(116638),s=r(293721),o=r(694743),l=r(70933),i=r(593012),u=r(988397),d=r(25079),f=r(411216),p=r(581903),h=r(20191),b=r(847759),m=r(81364),S=r(892610),g=r(772676);const _=()=>{const e=(0,s.useStore)(d.$catalog),t=(0,s.useStore)(d.$extendedData),r=(0,s.useStore)(d.$pending),_=(0,s.useStore)(d.$currentQuery),k=(0,s.useStore)(d.$fetchError),E={pageId:"top_search",cacheId:window.location.href,catalogType:o.CatalogType.SEARCH},v={navGo:h.navGo,userId:window?.vk?.id,pageVerifiedTip:b.pageVerifiedTip,openChat:(e,t)=>{window?.reforgedME?.selectPeer?.(e,t)}};return(0,n.useEffect)((()=>{e||r||(0,d.fireSearch)({q:""})}),[]),k?(0,a.jsx)("div",{className:S.default.root,children:(0,a.jsx)(f.Placeholder,{})}):(0,a.jsx)("div",{className:S.default.root,"data-search-top-target":"true",children:(0,a.jsx)(c.CustomScrollView,{autoHideScrollbar:!0,className:S.default.scroll,children:r?(0,a.jsx)(i.Spinner,{}):(0,a.jsx)(o.CatalogSearchProvider,{currentQuery:_,search:e=>(0,d.fireSearch)(e),displayTopSearch:d.fireSetResultsDisplay,setCurrentQuery:(e="")=>(0,d.fireSetCurrentQuery)(e),showVideo:m.showVideo,marketRefSource:_?l.RefSource.SEARCH_GLOBAL:l.RefSource.SEARCH_RECOMMENDATIONS,openProductWiki:u.openProductWiki,onOpenUrlClick:(e,t)=>{"/search?c[section]=auto&c[q]="===e&&((0,g.searchProfilingService)().setProfilingMarkStart(g.PROFILING_COMPONENTS.SEARCH_TOP_TO_SEARCH_ALL_TRANSITION),(0,g.searchProfilingService)().setProfilingMarkStart(g.PROFILING_COMPONENTS.SEARCH_TOP_TO_SEARCH_ALL_OLD_TRANSITION)),window.stManager.add([window.jsc("web/search.js")]).then((()=>{(0,h.navGo)(t,null)}))},children:(0,a.jsx)(o.Catalog,{catalog:e,extendedData:t,nextFromSections:[],onCatalogUpdate:e=>{(0,d.fireSetCatalogCatalog)(e.updatedCatalog)},collectClick:p.searchStatsCollector.logEvent,collectView:p.searchViewStatCollector.logEvent,catalogVars:E,platformVars:v,blockLayoutResolver:o.modalLayoutResolver})})})})}},302611:(e,t,r)=>{r.d(t,{SearchResults:()=>a.SearchResults});var a=r(626807)},915703:(e,t,r)=>{r.d(t,{Spinner:()=>s});var a=r(474848),n=r(828902),c=r(246434);const s=()=>(0,a.jsx)("div",{className:c.default.spinner,children:(0,a.jsx)(n.Spinner,{size:"small"})})},593012:(e,t,r)=>{r.d(t,{Spinner:()=>a.Spinner});var a=r(915703)},500524:(e,t,r)=>{r.d(t,{CATALOG_API_METHODS:()=>a,SEARCH_INPUT_BLUR_TIMEOUT:()=>s,SEARCH_INPUT_ID:()=>n,SEARCH_TOP_MODAL_NON_CLOSING_ATTR:()=>c});const a={GET_SEARCH_TOP:"catalog.getSearchTop",GET_SECTION:"catalog.getSection",GET_STORIES:"stories.get",JOIN_GROUP:"groups.join",LEAVE_GROUP:"groups.leave",ADD_FRIEND:"friends.add",DELETE_FRIEND:"friends.delete",ADD_RECENT:"search.addRecents",CLEAR_RECENT:"search.clearRecents"},n="SearchTopInput",c="data-search-top-target",s=150},925471:(e,t,r)=>{r.d(t,{$currentQuery:()=>f,HandleKeyDownEffectFx:()=>m,appDomain:()=>d,fireClearApp:()=>b,fireKeyDownEvent:()=>h,fireSetCurrentQuery:()=>p});var a=r(32489),n=r(317412),c=r(10747),s=r(476726),o=r(25079),l=r(500524),i=r(20191),u=r(772676);const d=(0,a.createDomain)("SEARCH_TOP/APP"),f=d.createStore("",{name:"currentQuery"}),p=d.createEvent("fire/SetCurrentQuery"),h=d.createEvent("fire/KeyDownEvent"),b=d.createEvent("fire/ClearApp"),m=d.createEffect({name:"HandleKeyDownEffectFx",handler:({event:e,selectedItemIndex:t,cancelEvent:r,currentQuery:a,blur:d,displayResults:f,clearTimeout:h})=>{switch(e.keyCode){case n.KEY.DOWN:r(),(0,c.fireDownSelectionIndex)();break;case n.KEY.UP:r(),(0,c.fireUpSelectionIndex)();break;case n.KEY.ENTER:r(),h();let f="/search?c[section]=auto&c[q]=";return(0,s.partConfigEnabled)("search_search_global_refactor_enabled")&&(f=(0,s.partConfigEnabled)("search_all_catalog_enabled")?"/search?q=":"/search?c[q]="),e.ctrlKey||e.metaKey?t?.callback?void t.callback(void 0,!0):void window.open(`${f}${encodeURIComponent(a)}`):t?.callback?(t.callback(),(0,o.fireSetCatalog)(null),void(0,o.fireAbortRequest)()):(p(""),(0,o.fireSetResultsDisplay)(!1),(0,o.fireSetCatalog)(null),(0,o.fireAbortRequest)(),setTimeout((()=>{d()}),l.SEARCH_INPUT_BLUR_TIMEOUT),(0,u.searchProfilingService)().setProfilingMarkStart(u.PROFILING_COMPONENTS.SEARCH_TOP_TO_SEARCH_ALL_TRANSITION),(0,u.searchProfilingService)().setProfilingMarkStart(u.PROFILING_COMPONENTS.SEARCH_TOP_TO_SEARCH_ALL_OLD_TRANSITION),void window.stManager.add([window.jsc("web/search.js")]).then((()=>{(0,i.navGo)(f+encodeURIComponent(a),null)})));case n.KEY.TAB:return h(),p(""),void(0,o.fireSetResultsDisplay)(!1)}f||(0,o.fireSetResultsDisplay)(!0)}})},592873:(e,t,r)=>{var a=r(32489),n=r(25079),c=r(10747);n.appDomain.onCreateStore((e=>{e.reset(n.fireClearApp)})),(0,a.sample)({clock:n.fireSetCurrentQuery,target:n.$currentQuery}),(0,a.sample)({clock:n.fireSendRequest,target:[c.fireResetSelectionIndex,c.fireResetItemsIndex]}),(0,a.sample)({clock:n.fireSetResultsDisplay,target:[c.fireResetSelectionIndex]}),(0,a.sample)({clock:n.fireSendRequest,fn:()=>null,target:n.fireSetCatalog}),(0,a.sample)({clock:n.SearchTopEffectFx.doneData,fn:({request:e})=>e,target:n.fireSetCatalog}),(0,a.sample)({clock:n.fireSetCatalog,fn:e=>e?.catalog||null,target:n.$catalog}),(0,a.sample)({clock:n.fireSetCatalog,fn:e=>{if(!e)return null;const t={...e};return delete t.catalog,t||null},target:n.$extendedData}),(0,a.sample)({clock:n.fireKeyDownEvent,source:{selectedItemIndex:c.$selectedItemIndex,currentQuery:n.$currentQuery,displayResults:n.$displayResults},fn:(e,t)=>({...t,...e}),target:n.HandleKeyDownEffectFx})},955535:(e,t,r)=>{r.d(t,{$catalog:()=>s,$extendedData:()=>o,fireSetCatalog:()=>n,fireSetCatalogCatalog:()=>c});const a=r(925471).appDomain.createDomain("SEARCH_TOP/CATALOG"),n=a.createEvent("fire/SetCatalog"),c=a.createEvent("fire/SetCatalog"),s=a.createStore(null,{name:"catalog"}),o=a.createStore(null,{name:"extendedData"})},89273:(e,t,r)=>{var a=r(32489),n=r(25079);(0,a.sample)({clock:n.fireSetCatalogCatalog,target:n.$catalog})},25079:(e,t,r)=>{r.d(t,{$catalog:()=>s.$catalog,$currentQuery:()=>a.$currentQuery,$displayResults:()=>n.$displayResults,$extendedData:()=>s.$extendedData,$fetchError:()=>c.$fetchError,$pending:()=>c.$pending,$requestsQueue:()=>c.$requestsQueue,AbortEffectFx:()=>c.AbortEffectFx,CancelStackFilterFx:()=>n.CancelStackFilterFx,CancelStackPushFx:()=>n.CancelStackPushFx,HandleKeyDownEffectFx:()=>a.HandleKeyDownEffectFx,SearchTopEffectFx:()=>c.SearchTopEffectFx,appDomain:()=>a.appDomain,fireAbortRequest:()=>c.fireAbortRequest,fireCancelStackPush:()=>n.fireCancelStackPush,fireClearApp:()=>a.fireClearApp,fireCreateRequest:()=>c.fireCreateRequest,fireKeyDownEvent:()=>a.fireKeyDownEvent,fireRemoveRequestFromQueue:()=>c.fireRemoveRequestFromQueue,fireSearch:()=>c.fireSearch,fireSendRequest:()=>c.fireSendRequest,fireSetCatalog:()=>s.fireSetCatalog,fireSetCatalogCatalog:()=>s.fireSetCatalogCatalog,fireSetCurrentQuery:()=>a.fireSetCurrentQuery,fireSetRequestToQueue:()=>c.fireSetRequestToQueue,fireSetResultsDisplay:()=>n.fireSetResultsDisplay,fireSetUpRequest:()=>c.fireSetUpRequest});var a=r(925471),n=r(341813),c=r(766644),s=r(955535)},887665:(e,t,r)=>{r(592873),r(22243),r(293944),r(89273)},766644:(e,t,r)=>{r.d(t,{$fetchError:()=>b,$pending:()=>p,$requestsQueue:()=>h,AbortEffectFx:()=>m,SearchTopEffectFx:()=>S,fireAbortRequest:()=>f,fireCreateRequest:()=>o,fireRemoveRequestFromQueue:()=>u,fireSearch:()=>s,fireSendRequest:()=>d,fireSetRequestToQueue:()=>i,fireSetUpRequest:()=>l});var a=r(925471),n=r(573921);const c=a.appDomain.createDomain("SEARCH_TOP/SEARCH"),s=c.createEvent("fire/Search"),o=c.createEvent("fire/CreateRequest"),l=c.createEvent("fire/SetUpRequest"),i=c.createEvent("fire/SetRequestToQueue"),u=c.createEvent("fire/RemoveRequestToQueue"),d=c.createEvent("fire/SendRequest"),f=c.createEvent("fire/AbortRequest"),p=c.createStore(!1,{name:"pending"}),h=c.createStore([],{name:"requestsQueue"}),b=c.createStore(!1,{name:"fetchError"}),m=c.createEffect({name:"get/AbortEffectFx",handler:async e=>{e.forEach((e=>{e.fetchOptions?.controller?.abort?.()}))}}),S=c.createEffect({name:"get/SearchTopEffectFx",handler:async e=>{const t=e.fetchOptions?.controller?.signal;return{request:await(0,n.getSearchTop)(e.data,{signal:t}),requestData:e}}})},293944:(e,t,r)=>{var a=r(32489),n=r(25079),c=r(81364);(0,a.sample)({clock:n.fireSearch,fn:e=>({id:(0,c.createCacheId)(e),data:e}),target:n.fireCreateRequest}),(0,a.sample)({clock:n.fireAbortRequest,source:n.$requestsQueue,target:n.AbortEffectFx}),(0,a.sample)({clock:n.fireCreateRequest,source:n.$requestsQueue,fn:(e,t)=>{e.forEach((e=>{e.fetchOptions?.controller?.abort?.()}));return{...t,fetchOptions:{controller:new AbortController}}},target:n.fireSetUpRequest}),(0,a.sample)({clock:n.fireSetUpRequest,target:[n.fireSendRequest,n.fireSetRequestToQueue]}),(0,a.sample)({clock:n.fireSetRequestToQueue,source:n.$requestsQueue,fn:(e,t)=>[...e,t],target:n.$requestsQueue}),(0,a.sample)({clock:n.fireSendRequest,target:n.SearchTopEffectFx}),(0,a.sample)({clock:n.SearchTopEffectFx.pending,target:n.$pending}),(0,a.sample)({clock:n.SearchTopEffectFx.finally,fn:({params:e})=>e,target:n.fireRemoveRequestFromQueue}),(0,a.sample)({clock:n.SearchTopEffectFx.pending,fn:()=>!1,target:n.$fetchError}),(0,a.sample)({clock:n.SearchTopEffectFx.failData,source:n.$pending,filter:e=>!e,fn:()=>!0,target:n.$fetchError})},341813:(e,t,r)=>{r.d(t,{$displayResults:()=>o,CancelStackFilterFx:()=>u,CancelStackPushFx:()=>d,fireCancelStackPush:()=>i,fireSetResultsDisplay:()=>l});var a=r(925471),n=r(723561),c=r(500524);const s=a.appDomain.createDomain("SEARCH_TOP/MODAL"),o=s.createStore(!1,{name:"displayResults"}),l=s.createEvent("fire/SetResultsDisplay"),i=s.createEvent("fire/CancelStackPush"),u=s.createEffect({name:"remove/CancelStackFilter",handler:()=>{(0,n.cancelStackFilter)("top_search",!0)}}),d=s.createEffect({name:"remove/CancelStackFilter",handler:()=>{(0,n.cancelStackPush)("top_search",((e=!0)=>{if(e){const e=document.querySelector(`#${c.SEARCH_INPUT_ID}`);l(!1),e?.blur()}else i()}),!0)}})},22243:(e,t,r)=>{var a=r(32489),n=r(25079);(0,a.sample)({clock:n.fireSetResultsDisplay,source:n.$displayResults,filter:(e,t)=>e!==t,fn:(e,t)=>t,target:n.$displayResults}),(0,a.sample)({clock:n.$displayResults,filter:e=>e,target:n.CancelStackPushFx}),(0,a.sample)({clock:n.$displayResults,filter:e=>!e,target:n.CancelStackFilterFx}),(0,a.sample)({clock:n.fireCancelStackPush,target:n.CancelStackPushFx})},81364:(e,t,r)=>{r.d(t,{createCacheId:()=>u,showVideo:()=>d,topHeaderListener:()=>i});var a=r(317412),n=r(452314),c=r(769405),s=r(500524),o=r(694743),l=r(60553);const i=()=>{(0,a.addEvent)(document,"mousedown",(e=>{const t=e.target,r=!((0,a.checkKeyboardEvent)(e)||(0,n.domClosest)("top_audio_layer_place",t)||(0,n.domClosest)("_ap_layer__close",t)||(0,n.domClosest)("layer_wrap",t)||(0,n.domClosest)("PortalNavigation",t)||(0,n.domClosest)("PortalNavigationDropdown",t)||(0,n.domClosest)("ObsceneTextAlertBox",t)||(0,n.domClosest)("top_notify_layer_place",t)||t?.closest('[data-search-top-target="true"]')),o=!t?.closest(`#${s.SEARCH_INPUT_ID}`);r&&(0,c.topHeaderClose)((()=>!1),o)}))},u=e=>((e,t="",r)=>{const a=Object.entries(e).filter((([,e])=>!!e||0===e)).map((([e,t])=>r?`${r}[${encodeURIComponent(e)}]=${encodeURIComponent(t)}`:`${encodeURIComponent(e)}=${encodeURIComponent(t)}`)).join("&");return a?`${t}${a}`:""})(Object.keys(e).sort(((e,t)=>e.localeCompare(t))).reduce(((t,r)=>({...t,[r]:e[r]})),{})),d=({event:e,id:t,video:r})=>{const a=()=>!!window.Video.checkClickEvent(e)||(e.preventDefault(),window.cur.cancelClick?void(window.cur.cancelClick=!1):window.cur.chooseVideoMedia?window.cur.chooseVideoMedia(e.target,t):void window.Video.show(e,t,{autoplay:1,queue:0,playFrom:r.viewed_duration?(0,o.getPlayFromByDuration)(r.viewed_duration):"",addParams:{track_code:r.track_code}},e.target));window.Video?a():(0,l.getVideoModule)().then(a)}},772676:(e,t,r)=>{r.d(t,{PROFILING_COMPONENTS:()=>s,searchProfilingService:()=>l});var a=r(942451),n=r(144770),c=r(32489);const s={SEARCH_TOP_TO_SEARCH_ALL_TRANSITION:"search_top_to_search_all_transition",SEARCH_TOP_TO_SEARCH_ALL_OLD_TRANSITION:"search_top_to_search_all_old_transition"},o=()=>1e3*Number(new Date),l=(0,a.makeSharedState)("global/search/searchProfilingService",(()=>{const e=(0,c.createDomain)("SearchProfilingService"),t=e.createEvent(),r=e.createEvent(),a=e.createEvent(),s=e.createEvent(),l=e.createStore({}),i=e.createEffect((({component:e,startTime:t,service:r,entrypoint:a="",abGroup:c="",isAnonymous:s=!1})=>{const l=o()-t;return e&&t&&r?((0,n.saveStatlogEvents)({name:"search_response_profiling",value:l,keys:[e,c,r,a,String(Number(s))]}),e):""}));return l.reset(s),(0,c.sample)({clock:t,source:l,fn:(e,t)=>({...e,[t]:o()}),target:l}),(0,c.sample)({clock:a,source:l,filter:(e,t)=>Boolean(e[t.component]),fn:(e,t)=>({...t,startTime:e[t.component]}),target:i}),(0,c.sample)({clock:[i.doneData,r],source:l,fn:(e,t)=>{const r={...e};return r[t]&&delete r[t],r},target:l}),{setProfilingMarkStart:t,setProfilingMarkEnd:a,removeProfilingMark:r,reset:s}}),{version:1})}},o={};function l(e){var t=o[e];if(void 0!==t)return t.exports;var r=o[e]={exports:{}};return s[e].call(r.exports,r,r.exports,l),r.exports}l.m=s,e=[],l.O=(t,r,a,n)=>{if(!r){var c=1/0;for(u=0;u<e.length;u++){for(var[r,a,n]=e[u],s=!0,o=0;o<r.length;o++)(!1&n||c>=n)&&Object.keys(l.O).every((e=>l.O[e](r[o])))?r.splice(o--,1):(s=!1,n<c&&(c=n));if(s){e.splice(u--,1);var i=a();void 0!==i&&(t=i)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[r,a,n]},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(e,a){if(1&a&&(e=this(e)),8&a)return e;if("object"==typeof e&&e){if(4&a&&e.__esModule)return e;if(16&a&&"function"==typeof e.then)return e}var n=Object.create(null);l.r(n);var c={};t=t||[null,r({}),r([]),r(r)];for(var s=2&a&&e;"object"==typeof s&&!~t.indexOf(s);s=r(s))Object.getOwnPropertyNames(s).forEach((t=>c[t]=()=>e[t]));return c.default=()=>e,l.d(n,c),n},l.d=(e,t)=>{for(var r in t)l.o(t,r)&&!l.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},l.f={},l.e=e=>Promise.all(Object.keys(l.f).reduce(((t,r)=>(l.f[r](e,t),t)),[])),l.u=e=>45458===e?"web/chunks/hls.c49a3f53.js":56229===e?"web/chunks/366130d1.async.1c06797d.js":30072===e?"web/chunks/showCaptchaPopup.a4740a52.js":19072===e?"web/chunks/left_menu_store.b41d694b.js":42255===e?"web/chunks/wikiModalExampleInitiator.bf570c13.js":56965===e?"web/chunks/stories_web_lib.ba126e07.js":17213===e?"web/chunks/2bd60279.async.ea157d31.js":42943===e?"web/chunks/video_web_lib.782f771d.js":53927===e?"web/chunks/questions_boxes_web.d05c4563.js":40482===e?"web/chunks/0ca8e07a.async.981f6895.js":12679===e?"web/chunks/2c4420c0.async.0fa14a60.js":40617===e?"web/chunks/93bd35f8.async.944fc663.js":27602===e?"web/chunks/2fea6d3f.async.fa8b17c6.js":24535===e?"web/chunks/4e9ddeeb.async.0371d26b.js":74336===e?"web/chunks/show_audio_playlist.c4ee742f.js":93033===e?"web/chunks/a6f550f7.async.84ccbfa1.js":89870===e?"web/chunks/5ad2d924.async.2e93ba52.js":17895===e?"web/chunks/money_transfer_box.50183b92.js":50905===e?"web/chunks/money_transfer.e2c2d345.js":21608===e?"web/chunks/bf8fbce1.async.1f467086.js":66118===e?"web/chunks/6fb21264.async.74f2b319.js":36237===e?"web/chunks/2fb8e07d.async.2c799e4e.js":56154===e?"web/chunks/cc6f5392.async.8d8a5bcd.js":58292===e?"web/chunks/437a8ce6.async.378b5454.js":49925===e?"web/chunks/8af15a4d.async.5eadc2fd.js":68349===e?"web/chunks/5f266f5f.async.3ed461f1.js":25459===e?"web/chunks/2c9432b5.async.06e9b990.js":84835===e?"web/chunks/unauth_action_box.29aa267e.js":23045===e?"web/chunks/0d674423.async.5458427b.js":71247===e?"web/chunks/364659da.async.59a0e75a.js":59886===e?"web/chunks/StoryPublisherV2.2ad86f85.js":70989===e?"web/chunks/4b497ab9.async.e13543c1.js":29311===e?"web/chunks/feed-client-nav-skeleton.774b8a5c.js":56091===e?"web/chunks/feed-client-nav-async-right-block.323099af.js":1715===e?"web/chunks/AudioLongtapModal.d6e38506.js":96649===e?"web/chunks/ecomm_market_product_attach.e1343ea9.js":51713===e?"web/chunks/voice_message_player.172315d5.js":9925===e?"web/chunks/speech.257a7e64.js":73248===e?"web/chunks/5792d39d.async.ad94820b.js":42099===e?"web/chunks/58131fc9.async.2e7c43e3.js":51943===e?"web/chunks/VideoUpload.8e2a8bde.js":73214===e?"web/chunks/SilentModeForms.c8c406fe.js":69706===e?"web/chunks/e0383668.async.b99eb451.js":43802===e?"web/chunks/d5b01a55.async.6a0ae0bd.js":10504===e?"web/chunks/StoriesCreatorVKApp.f31236ac.js":54833===e?"web/chunks/performance-stats.99d41d48.js":57088===e?"web/chunks/79f739a7.async.7b7d443d.js":32643===e?"web/chunks/story_blocks.0da84ca4.js":13410===e?"web/chunks/283c0b16.async.33f5912b.js":17448===e?"web/chunks/b1bc3b17.async.86dcbc32.js":99370===e?"web/chunks/VideoEditorModal.cd800b6f.js":95805===e?"web/chunks/PublishClipToVideoModal.fb197348.js":91906===e?"web/chunks/VideoUploadModal.07557685.js":74205===e?"web/chunks/VideoExternalUploadModal.15030051.js":36637===e?"web/chunks/ClipUploadModal.bb853a52.js":18493===e?"web/chunks/AddClipToVideoBlock.d29cc984.js":40953===e?"web/chunks/AddClipToVideoModal.6f004f3e.js":60274===e?"web/chunks/ClipPlayerModule.600f713b.js":40074===e?"chunks/"+e+".4d8e0cba.js":37557===e?"chunks/"+e+".46b5840d.js":60899===e?"chunks/"+e+".0471a2c1.js":29290===e?"chunks/"+e+".b54ef2c0.js":{17356:"web/chunks/videoplayer-interactive",57407:"web/chunks/shopify"}[e]+"."+{17356:"95a5926a",57407:"78df6599"}[e]+".js",l.miniCssF=e=>30072===e?"web/chunks/eba149c1.css":{74336:1,17895:1,50905:1}[e]?"web/chunks/43d06ff5.css":59886===e?"web/chunks/c3646f82.css":1715===e?"web/chunks/4aa73755.css":96649===e?"web/chunks/8272fe04.css":51943===e?"web/chunks/443c0dba.css":73214===e?"web/chunks/122e7a6e.css":10504===e?"web/chunks/8a71df77.css":32643===e?"web/chunks/1deee1aa.css":99370===e?"web/chunks/aa88a2a7.css":95805===e?"web/chunks/70c35bc4.css":{91906:1,74205:1,36637:1}[e]?"web/chunks/f89919fd.css":18493===e?"web/chunks/85bd25a0.css":40953===e?"web/chunks/d66415b4.css":60274===e?"web/chunks/a9cca8ef.css":void 0,l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a={},l.l=(e,t,r,n)=>{if(a[e])a[e].push(t);else{var c,s;if(void 0!==r)for(var o=document.getElementsByTagName("script"),i=0;i<o.length;i++){var u=o[i];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")=="vk:"+r){c=u;break}}c||(s=!0,(c=document.createElement("script")).charset="utf-8",c.timeout=120,l.nc&&c.setAttribute("nonce",l.nc),c.setAttribute("data-webpack","vk:"+r),c.src=e),a[e]=[t];var d=(t,r)=>{c.onerror=c.onload=null,clearTimeout(f);var n=a[e];if(delete a[e],c.parentNode&&c.parentNode.removeChild(c),n&&n.forEach((e=>e(r))),t)return t(r)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=d.bind(null,c.onerror),c.onload=d.bind(null,c.onload),s&&document.head.appendChild(c)}},l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.p="/dist/",n=e=>new Promise(((t,r)=>{var a=l.miniCssF(e),n=l.p+a;if(((e,t)=>{for(var r=document.getElementsByTagName("link"),a=0;a<r.length;a++){var n=(s=r[a]).getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(n===e||n===t))return s}var c=document.getElementsByTagName("style");for(a=0;a<c.length;a++){var s;if((n=(s=c[a]).getAttribute("data-href"))===e||n===t)return s}})(a,n))return t();((e,t,r,a)=>{var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.onerror=n.onload=c=>{if(n.onerror=n.onload=null,"load"===c.type)r();else{var s=c&&("load"===c.type?"missing":c.type),o=c&&c.target&&c.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=s,l.request=o,n.parentNode.removeChild(n),a(l)}},n.href=t,document.head.appendChild(n)})(e,n,t,r)})),c={7122:0},l.f.miniCss=(e,t)=>{c[e]?t.push(c[e]):0!==c[e]&&{1715:1,10504:1,17895:1,18493:1,30072:1,32643:1,36637:1,40953:1,50905:1,51943:1,59886:1,60274:1,73214:1,74205:1,74336:1,91906:1,95805:1,96649:1,99370:1}[e]&&t.push(c[e]=n(e).then((()=>{c[e]=0}),(t=>{throw delete c[e],t})))},(()=>{l.b=document.baseURI||self.location.href;var e={7122:0};l.f.j=(t,r)=>{var a=l.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var n=new Promise(((r,n)=>a=e[t]=[r,n]));r.push(a[2]=n);var c=l.p+l.u(t),s=new Error;l.l(c,(r=>{if(l.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var n=r&&("load"===r.type?"missing":r.type),c=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+n+": "+c+")",s.name="ChunkLoadError",s.type=n,s.request=c,a[1](s)}}),"chunk-"+t,t)}},l.O.j=t=>0===e[t];var t=(t,r)=>{var a,n,[c,s,o]=r,i=0;if(c.some((t=>0!==e[t]))){for(a in s)l.o(s,a)&&(l.m[a]=s[a]);if(o)var u=o(l)}for(t&&t(r);i<c.length;i++)n=c[i],l.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return l.O(u)},r=self.webpackChunkvkweb=self.webpackChunkvkweb||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var i=l.O(void 0,[91498,50560,89631,85172,762,21529,79210,35623,81765,23592,22529],(()=>l(4257)));i=l.O(i)})();