"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[1934],{497063:(t,e,i)=>{i.d(e,{default:()=>s});const s={root:"AudioCatalogMusicMixBlockComponent-module__root--BUW0a",default:"AudioCatalogMusicMixBlockComponent-module__default--YKYt9",secondary:"AudioCatalogMusicMixBlockComponent-module__secondary--lCndX",description:"AudioCatalogMusicMixBlockComponent-module__description--vF3Wv",wrap:"AudioCatalogMusicMixBlockComponent-module__wrap--zgLZ8"}},31149:(t,e,i)=>{i.d(e,{default:()=>s});const s={root:"Lottie-module__root--VbKrX",canvas:"Lottie-module__canvas--_tt5W"}},946076:(t,e,i)=>{i.r(e),i.d(e,{UIGallery:()=>c,UI_GALLERY_CLASSNAME:()=>l.UI_GALLERY_CLASSNAME,UI_GALLERY_CONTENT_CLASSNAME:()=>l.UI_GALLERY_CONTENT_CLASSNAME,UI_GALLERY_INNER_CLASSNAME:()=>l.UI_GALLERY_INNER_CLASSNAME,uiGetGallery:()=>h});var s=i(942451),o=i(7144),a=i(663878),r=i(317412),n=i(879007),_=i(452314),l=i(374036);const d=(0,s.makeSharedState)("ui-gallery",(()=>({galleries:{},incIndex:0})),{version:0});function h(t){const e=(0,_.domData)((0,_.ge)(t),"gallery-id");return e&&d().galleries[e]}class c{_checkSizesAndUpdate(){return 0!==this._width&&0!==this._itemWidth||(this._width=Math.round((0,_.getSize)(this._el)[0]),this._itemWidth=(0,_.getSize)(this._items[0])[0],this._itemFullWidth=this._itemWidth+this._itemOffset),!(0===this._width||0===this._itemWidth)}_initScroll(){(this._opts.scrollX||this._opts.scrollY)&&(this._opts.isModernTransitionsEnabled||(0,r.addEvent)(this._innerCont,"DOMMouseScroll wheel",this._onWheelScroll.bind(this)))}_initArrows(){this._opts.noArrows?(0,_.addClass)(this._el,"ui_gallery_no_arrows"):(this._leftArrow=(0,_.geByClass1)("ui_gallery__arrow_left",this._el),this._rightArrow=(0,_.geByClass1)("ui_gallery__arrow_right",this._el),this._arrowWidth=(0,_.getSize)(this._leftArrow)[0],this._opts.isModernTransitionsEnabled?((0,r.addEvent)(this._leftArrow,"click",this._slide.bind(this,-1,void 0,{eventName:"arrow"})),(0,r.addEvent)(this._rightArrow,"click",this._slide.bind(this,1,void 0,{eventName:"arrow"}))):((0,r.addEvent)(this._leftArrow,"click",this._legacySlide.bind(this,-1,void 0,{eventName:"arrow"})),(0,r.addEvent)(this._rightArrow,"click",this._legacySlide.bind(this,1,void 0,{eventName:"arrow"}))),(0,r.addEvent)(this._leftArrow,"mouseover",this._onArrowMouseOver.bind(this,"left")),(0,r.addEvent)(this._leftArrow,"mouseout",this._onArrowMouseOut.bind(this)),(0,r.addEvent)(this._rightArrow,"mouseover",this._onArrowMouseOver.bind(this,"right")),(0,r.addEvent)(this._rightArrow,"mouseout",this._onArrowMouseOut.bind(this)))}_onWheelScroll(t){let e;if("wheel"==t.type)if(Math.abs(t.deltaY)>Math.abs(t.deltaX)){if(!this._opts.scrollY)return;e=-t.deltaY}else{if(!this._opts.scrollX)return;e=-t.deltaX}else if(void 0!==t.wheelDeltaY){if(!this._opts.scrollY)return;e=t.wheelDeltaY}else if(void 0!==t.wheelDelta)e=t.wheelDelta;else{if(!t.detail||1!==t.axis)return;e=-t.detail}e=this._scroll.rtlSame?-e:e,Math.abs(e)>=120&&(e=74*Math.max(-1,Math.min(1,e))),this._innerCont.scrollLeft-=e,this._checkItemsAfterScroll(this._innerCont.scrollLeft),(0,r.cancelEvent)(t)}_getScrollParams(){this._opts.shouldCheckGalleryViewed&&this._checkSizesAndUpdate();const t=this._width-2*this._arrowWidth,e=this._itemFullWidth>t;return{isItemBiggerThanWidth:e,scrollDistance:e?this._itemFullWidth:t}}_legacySlide(t,e,i){const{scrollDistance:s,isItemBiggerThanWidth:o}=this._getScrollParams();let n=this._innerCont.scrollLeft+(this._scroll.rtlSame?-t:t)*s;const l=this._innerCont.scrollWidth-this._width;this._scroll.negative?(n=Math.min(n,0),n=Math.abs(n)):n=Math.max(0,n),n=Math.min(l,n);const d=this._scroll.negative||this._scroll.rtlSame?-t:t;if(d>0&&n<l){n=Math.floor(n/this._itemFullWidth)*this._itemFullWidth}else if(d<0&&n>0){n=(o?Math.ceil(n/this._itemFullWidth):Math.floor(n/this._itemFullWidth))*this._itemFullWidth}if(this._opts.isFullSizeSlide&&(n=(this._visible.left+t)*this._itemFullWidth),0===n||n===l){const e=this._innerCont.scrollWidth;(0,_.addClass)(this._inner,"ui_gallery__inner_shift_instant"),this._onArrowMouseOut(),n&&(n+=t*(this._innerCont.scrollWidth-e))}this._scroll.negative&&(n=-n),(0,a.animate)(this._innerCont,{scrollLeft:n},{duration:Math.abs(this._innerCont.scrollLeft-n)+50,transition:a.Fx.Transitions.easeOutCubic}),this._checkItemsAfterScroll(n),setTimeout((()=>(0,_.removeClass)(this._inner,"ui_gallery__inner_shift_instant")),0),this._opts?.onSlide?.(t,{eventName:i?.eventName}),e&&(0,r.cancelEvent)(e)}_updateShift(t){let e=this._shift+t;const i=this._inner.scrollWidth-this._inner.clientWidth;e>i&&(e=i),e<0&&(e=0),this._shift=e}_slide(t,e,i){const{scrollDistance:s}=this._getScrollParams();this._updateShift(t*s),this._inner.style.transform=`translate3d(${-1*this._shift}px, 0, 0)`,this._checkItemsAfterScroll(this._shift),this._opts?.onSlide?.(t,{eventName:i?.eventName}),e&&(0,r.cancelEvent)(e)}_checkItemsAfterScroll(t,e){if(this._scroll.negative&&(t=Math.abs(t)),(!this._opts.shouldCheckGalleryViewed||this._visible.isGalleryViewed)&&(!this._opts.shouldCheckGalleryViewed||this._checkSizesAndUpdate())){if(this._opts.markOutside||this._opts.onViewItem){const i=this._itemWidth/3,s=(this._scroll.backward?this._inner.scrollWidth-this._width-t:t)-this._scrollOffset,o=t&&Math.floor(s/this._itemFullWidth),a=o*this._itemFullWidth+2*i;let r;r=this._scroll.backward?t+this._width<this._inner.scrollWidth-a:t>a;const l=Math.min(this._items.length-1,Math.floor((s+this._width)/this._itemFullWidth)),d=l*this._itemFullWidth+2*i;let h;if(h=this._scroll.backward?t>this._inner.scrollWidth-d:t+this._width<d,this._opts.onViewItem){const t=r?Math.min(this._items.length-1,o+1):o,i=h?Math.max(0,l-1):l;if(e||t!==this._visible.left||i!==this._visible.right){for(let s=t;s<=i;s++)(this._visible.left<0||e&&!(0,n.inArray)(this._items[s],this._visible.items)||s<this._visible.left||s>this._visible.right)&&this._opts.onViewItem(this._items[s],s);this._visible.left=t,this._visible.right=i,this._visible.items=this._items.slice(t,i+1)}}this._opts.markOutside&&(e?((0,_.geByClass)("ui_gallery_item_outside",this._inner).forEach((t=>{(0,_.removeClass)(t,"ui_gallery_item_outside")})),this._outside.left=-1,this._outside.right=-1):((o!==this._outside.left||!r)&&this._outside.left>=0&&((0,_.removeClass)(this._items[this._outside.left],"ui_gallery_item_outside"),this._outside.left=-1),(l!==this._outside.right||!h)&&this._outside.right>=0&&((0,_.removeClass)(this._items[this._outside.right],"ui_gallery_item_outside"),this._outside.right=-1)),r&&o!==this._outside.left&&((0,_.addClass)(this._items[o],"ui_gallery_item_outside"),this._outside.left=o),h&&l!==this._outside.right&&((0,_.addClass)(this._items[l],"ui_gallery_item_outside"),this._outside.right=l))}if(!this._opts.noArrows){const e=t>0,i=t+this._width<this._inner.scrollWidth;(0,_.toggleClass)(this._leftArrow,"ui_gallery__arrow_visible",this._scroll.rtl&&!this._scroll.backward?i:e),(0,_.toggleClass)(this._rightArrow,"ui_gallery__arrow_visible",this._scroll.rtl&&!this._scroll.backward?e:i)}(!this._scroll.backward&&this._inner.scrollWidth-t-this._width<1e3||this._scroll.backward&&t<1e3)&&this._onLoadMore()}}_onArrowMouseOver(t){this._inner.classList.add(`ui_gallery__inner_shift_${t}`)}_onArrowMouseOut(){this._inner.classList.remove("ui_gallery__inner_shift_left"),this._inner.classList.remove("ui_gallery__inner_shift_right")}_onLoadMore(){!this._opts.onLoadMore||this._loadingMore||this._finised||(this._loadingMore=!0,this._opts.onLoadMore(this._items.length))}addMore(t,e){t=t||[],this.addItems(t),this._finised=!!e||!t.length,this._loadingMore=!1}addItems(t,e){if((t=t||[]).length){const i=e>=0&&e<this._items.length?this._items[e]:null;t.forEach((t=>{i?(0,_.domInsertBefore)(t,i):this._inner.appendChild(t)})),this.refresh()}}destroy(){(0,r.removeEvent)(this._innerCont),(0,r.removeEvent)(this._leftArrow),(0,r.removeEvent)(this._rightArrow),(0,_.domData)(this._el,"gallery-id",null),delete d().galleries[this._id],this._opts.onDestroy&&this._opts.onDestroy(),(0,_.re)(this._el)}removeItem(t){return(0,o.isNumeric)(t)&&(t=this._items[t]),!(!t||!(0,n.inArray)(t,this._items))&&((0,_.re)(t),this.refresh(),this._items.length||this.destroy(),!0)}refresh(){this._width=Math.round((0,_.getSize)(this._el)[0]),this._items=(0,_.geByClass)("ui_gallery_item",this._el),this._checkItemsAfterScroll(this._innerCont.scrollLeft,!0)}scrollToDirection(t){this._opts.isModernTransitionsEnabled?this._slide(t,void 0,{eventName:"bullet"}):this._legacySlide(t,void 0,{eventName:"bullet"})}getItems(){return this._items}getVisibleItems(){return this._visible.items.map(((t,e)=>[t,this._visible.left+e]))}setGalleryViewed(){this._visible.isGalleryViewed=!0,this._checkItemsAfterScroll(this._innerCont.scrollLeft)}constructor(t,e){if(!t)throw new Error("No element was provided for UIGallery");if(!(t=(0,_.ge)(t)).classList.contains(l.UI_GALLERY_CLASSNAME))throw new Error("Provided incorrect element for UIGallery");const i=h(t);if(i)return i;this._opts=(0,n.extend)({markOutside:!1,scrollY:!0,scrollX:!0,noArrows:!1,isFullSizeSlide:!1,isModernTransitionsEnabled:!1},e),this._id=d().incIndex,d().incIndex+=1,this._el=t,this._width=Math.round((0,_.getSize)(this._el)[0]),this._items=(0,_.geByClass)("ui_gallery_item",this._el),this._itemWidth=(0,_.getSize)(this._items[0])[0],this._itemOffset=(0,n.intval)((0,_.getStyle)(this._items[0],vk.rtl?"marginLeft":"marginRight")),this._scrollOffset=(0,n.intval)((0,_.getStyle)(this._items[0],"marginLeft")),this._itemFullWidth=this._itemWidth+this._itemOffset,this._innerCont=(0,_.geByClass1)(l.UI_GALLERY_CONTENT_CLASSNAME,this._el),this._inner=(0,_.geByClass1)(l.UI_GALLERY_INNER_CLASSNAME,this._el),this._opts.isModernTransitionsEnabled&&(this._shift=0,this._inner.classList.add("ui_gallery__inner--withTransitions")),this._scroll=function(){const t={rtl:!1,backward:!1,delta:1,negative:!1,rtlSame:!1};if(!vk.rtl)return t;if(!cur._scrollInfo){const e=(0,_.se)('<div style="position: fixed; left: -1000px; width: 0; overflow: scroll">x</div>'),i=document.querySelector("#content");i?.appendChild(e);const s=e.scrollLeft;t.rtl=vk.rtl,t.backward=s>0,e.scrollLeft=1e3,t.delta=e.scrollLeft===s?-1:1,t.negative=!t.backward&&t.delta<0,t.rtlSame=t.rtl&&!t.backward&&!t.negative,(0,_.re)(e),cur._scrollInfo=t}return cur._scrollInfo}(),this._loadingMore=!1,this._finised=!1,this._visible={left:-1,right:-1,items:[],isGalleryViewed:!1},this._outside={left:-1,right:-1,timer:null},this._initScroll(),this._initArrows(),(0,_.domData)(this._el,"gallery-id",this._id),d().galleries[this._id]=this,this._checkItemsAfterScroll(this._innerCont.scrollLeft,!0)}}},473253:(t,e,i)=>{i.r(e),i.d(e,{UiScroll:()=>d,default:()=>h});var s=i(714209),o=i(7144),a=i(879007),r=i(452314),n=i(317412),_=i(663878),l=i(849423);class d{init(){if(this.options.stopScrollPropagation&&this.fixBlocker(),!this.inited){if(!this.el.container.scrollWidth||this.disabled)return;this.fixSize(!0),this.options.autoresize&&this.startResizeListening(),this.options.global||cur.destroy.push(this.destroy.bind(this)),this.inited=!0}return this.update(!0),this.api}addEvent(t,e,i,s){return this.removeEvents.push([t,e,i]),(0,n.addEvent)(t,e,i,void 0,void 0,s?{passive:!0}:void 0),i}destroy(){if(this.disabled=!0,this.fixSize(),this.animation&&this.animation.stop(),this.moreTimeout&&clearTimeout(this.moreTimeout),this.dragstopHandler&&(0,n.removeEvent)(document,"mouseup contextmenu",this.dragstopHandler),this.dragHandler&&(0,n.removeEvent)(document,"mousemove",this.dragHandler),(0,a.each)(this.removeEvents,(function(t,e){n.removeEvent.apply(null,e)})),this.el.overflow.parentNode==this.el.container){const t=(0,r.cf)();for(;this.el.content.firstChild;)t.appendChild(this.el.content.firstChild);this.el.container.appendChild(t)}return(0,r.removeData)(this.el.container,"ui-scroll"),this.el.container.className=this.el.container.className.replace(/\bui_scroll_.+?\b/g," "),(0,a.each)(this.removeElements,(function(t,e){(0,r.re)(e)})),this.el.container.scrollTop=this.api.data.scrollTop,delete this.el.container.__uiScroll__,this.api}updateAbove(t){if((0,a.isFunction)(t)){this.animation&&this.animation.stop();const e=this.el.outer.scrollHeight-this.el.outer.scrollTop-this.el.overflow.offsetHeight;t(),this.el.outer.scrollTop=this.el.outer.scrollHeight-this.el.overflow.offsetHeight-e}return this.api}updateBelow(t){if((0,a.isFunction)(t)){this.animation&&this.animation.stop();const e=this.options.preserveEdgeBelow&&this.api.data.scrollBottom<=this.options.preserveEdgeBelowThreshold;t(),e&&this.scrollBottom(!1)}return this.api}fixBlocker(){s.browser.chrome&&!this.options.noForceReFlow&&this.forceReFlow(),this.el.blocker.scrollTop=this.blockerScrollTop}forceReFlow(){this.el.blocker.style.display="inline-block",this.el.blocker.offsetHeight,this.el.blocker.style.display=""}fixSize(t){this.options.native||(t&&null==this.fixSizeDefault&&(this.fixSizeDefault=this.el.container.style.width),(0,r.setStyle)(this.el.container,"width",t?(0,r.getSize)(this.el.container,!0)[0]||this.fixSizeDefault||"":this.fixSizeDefault||""))}emitEvent(t){this.disabled||this.inited&&this.emitter.emitEvent(t,[this.api])}static scrollEventDelta(t){let e=0;const i=void 0!==t.deltaMode?t.deltaMode:"MozMousePixelScroll"==t.type?0:1;return"wheel"==t.type?e=t.deltaY:void 0!==t.wheelDeltaX&&void 0!==t.wheelDeltaY?(e=1/40*-t.wheelDeltaY,s.browser.mac&&s.browser.opera&&(e*=.1)):void 0!==t.wheelDelta?e=1/40*-t.wheelDelta:t.detail&&2===t.axis&&(e=t.detail),e*(1==i?15:2==i?450:1)}isScrollEventUnused(t){return d.scrollEventDelta(t)>0?!this.api.data.scrollBottom:!this.api.data.scrollTop}resize(t){if(!t&&this.options.preserveEdgeBelow){const e=this.options.preserveEdgeBelow&&this.api.data.scrollBottom<=this.options.preserveEdgeBelowThreshold;this.update(!0)&&(this.emitEvent("resize"),e&&this.scrollBottom(),this.options.stopScrollPropagation&&!t&&this.fixBlocker())}else this.update(!0)&&(this.options.stopScrollPropagation&&!t&&this.fixBlocker(),this.emitEvent("resize"))}disable(t){return this.disabled=!!t,t?(this.animation&&this.animation.stop(),this.fixSize()):(this.fixSize(!0),this.options.stopScrollPropagation&&this.fixBlocker(),this.update(!0)),(0,r.toggleClass)(this.el.container,"ui_scroll_disabled",this.disabled),this.api}dragstart(t){if(!(this.disabled||this.dragging||this.options.native))return t||(t=window.event),this.dragging=!0,this.animation&&this.animation.stop(),this.options.reversed&&(this.noMore=!0),(0,n.addEvent)(document,"mouseup contextmenu",this.dragstartHandler=this.dragstop.bind(this)),(0,n.addEvent)(document,"mousemove",this.dragHandler=this.drag.bind(this)),this.dragScroll=this.options.reversed?this.api.data.scrollBottom:this.api.data.scrollTop,this.dragY=t.screenY,(0,n.cancelEvent)(t),this.emitEvent("dragstart"),this.api}dragstop(t){if(!this.disabled&&this.dragging&&!this.options.native){if(t||(t=window.event),this.dragging=!1,this.dragstopHandler&&(0,n.removeEvent)(document,"mouseup contextmenu",this.dragstopHandler),this.dragHandler&&(0,n.removeEvent)(document,"mousemove",this.dragHandler),(0,r.setStyle)(document.body,"cursor",""),(0,r.removeClass)(this.el.container,"ui_scroll_dragging"),this.dragged)this.noMore&&(this.noMore=!1,this.more());else{this.options.reversed&&(this.noMore=!0);const e=(t.pageY-(0,r.getXY)(this.el.barOuter)[1]-this.barInnerHeight/2)*(Math.max(this.options.minContentHeight,this.api.data.scrollHeight)-this.api.data.viewportHeight)/(this.barOuterHeight-this.barInnerHeight);this.scrollTop(!1,e,0,function(){this.noMore&&(this.noMore=!1,this.more())}.bind(this))}return this.dragged=!1,t&&"contextmenu"!==t.type&&(0,n.cancelEvent)(t),this.emitEvent("dragstop"),this.api}}drag(t){if(this.disabled||!this.dragging||this.options.native)return;t||(t=window.event);const e=(t.screenY-this.dragY)*(this.api.data.scrollHeight/this.el.barOuter.scrollHeight);return this.el.outer.scrollTop=this.options.reversed?this.el.outer.scrollHeight-this.el.overflow.offsetHeight-this.dragScroll+e:this.dragScroll+e,this.dragged||(this.dragged=!0,(0,r.setStyle)(document.body,"cursor","pointer"),(0,r.addClass)(this.el.container,"ui_scroll_dragging")),(0,n.cancelEvent)(t),this.emitEvent("drag"),this.api}scroll(t,e,i){return this.animation&&this.animation.stop(),this.el.outer.scrollTop==t&&this.update(!0),e?(e="number"!=typeof e||!isFinite(e)||e%1?300:Math.abs(e),this.animation=new _.Fx.Base({scrollTop:this.el.outer.scrollTop},{transition:_.Fx.Transitions.easeOutCubic,onStep:function(t){this.el.outer.scrollTop=t.scrollTop}.bind(this),duration:e,onComplete:(0,a.isFunction)(i)?i.pbind(this.api):void 0}).start({scrollTop:this.el.outer.scrollTop},{scrollTop:t})):(this.el.outer.scrollTop=t,(0,a.isFunction)(i)&&i(this.api)),this.api}scrollTop(t,e,i,s){if(t&&this.options.stopScrollPropagation&&this.fixBlocker(),!this.disabled&&!this.dragging)return this.scroll((0,a.intval)(e),i,s)}scrollBottom(t,e,i,s){if(t&&this.options.stopScrollPropagation&&this.fixBlocker(),!this.disabled&&!this.dragging)return this.scroll(this.el.outer.scrollHeight-this.el.overflow.offsetHeight-(0,a.intval)(e),i,s)}scrollBy(t,e,i){if(!this.disabled&&!this.dragging)return this.scroll(this.el.outer.scrollTop+(0,a.intval)(t),e,i)}scrollIntoView(t,e,i,s){if(t&&this.options.stopScrollPropagation&&this.fixBlocker(),(e=(0,l.getScrollElement)(e))&&e.compareDocumentPosition&&e.compareDocumentPosition(this.el.content)&Node.DOCUMENT_POSITION_CONTAINS){const t=(0,r.getXY)(e)[1],o=(0,r.getXY)(this.el.overflow)[1],n=(0,r.getSize)(e)[1];if(t<=o&&t+n>=o+this.api.data.viewportHeight||t>=o&&t+n<=o+this.api.data.viewportHeight)(0,a.isFunction)(s)&&(i?setTimeout(s.bind(this.api),0):s(this.api));else if(n>this.api.data.viewportHeight||t<o)this.scrollTop(!1,t-o+this.api.data.scrollTop-(this.options.shadows?(0,r.getSize)(this.el.shadowTop)[1]:0),i,s);else{const e=this.options.shadows?(0,r.getSize)(this.el.shadowBottom)[1]:0;this.scrollTop(!1,t-o+this.api.data.scrollTop+n-this.api.data.viewportHeight+e,i,s)}}return this.api}update(t){let e,i;this.el.container&&!this.el.container.updateScroll&&(this.el.container.updateScroll=this.update.bind(this,!1));const s=this.el.outer.scrollTop;if(this.inited&&!this.disabled&&(t&&(e=this.el.inner.offsetHeight,this.api.data.viewportHeight!==(this.api.data.viewportHeight=this.el.overflow.offsetHeight)||this.api.data.scrollHeight!==e)||this.api.data.scrollTop!==s)){if(t&&(this.api.data.scrollHeight=e),this.api.data.scrollTop=Math.max(0,Math.min(this.api.data.scrollHeight-this.api.data.viewportHeight,Math.max(0,s))),this.api.data.scrollBottom=Math.max(0,this.api.data.scrollHeight-this.api.data.scrollTop-this.api.data.viewportHeight),!this.options.native){if(e=Math.max(this.options.minContentHeight,this.api.data.scrollHeight),i=e<=this.api.data.viewportHeight,!i){const i=this.el.barOuter.offsetHeight;(t||this.barOuterHeight!==i)&&(this.barOuterHeight=i,this.barInnerHeight=Math.max(this.options.barMinHeight,this.barOuterHeight*this.api.data.viewportHeight/e),this.el.barInner.style.height=this.barInnerHeight+"px"),(0,l.nextFrame)((()=>{const t=(this.barOuterHeight-this.barInnerHeight)*this.api.data.scrollTop/(e-this.api.data.viewportHeight);this.el.barInner.style.transform=`translateY(${t}px)`}))}this.options.shadows&&(this.shadowTop!=(this.api.data.scrollTop&&!i)&&(0,r.toggleClass)(this.el.container,"ui_scroll_shadow_top_visible",this.shadowTop=this.api.data.scrollTop&&!i),this.shadowBottom!=(this.api.data.scrollBottom&&!i)&&(0,r.toggleClass)(this.el.container,"ui_scroll_shadow_bottom_visible",this.shadowBottom=this.api.data.scrollBottom&&!i)),this.unnecessary!==i&&((0,r.toggleClass)(this.el.container,"ui_scroll_unnecessary",i),this.unnecessary=i,this.options.stopScrollPropagation&&this.fixBlocker(),i&&this.barInnerHeight&&this.barOuterHeight&&(0,l.nextFrame)(function(t){this.el.barInner.style.height=100*this.barInnerHeight/this.barOuterHeight+"%";const i=(this.barOuterHeight-this.barInnerHeight)*this.api.data.scrollTop/(e-this.api.data.viewportHeight)*100/this.barInnerHeight;this.el.barInner.style.transform=`translateY(${i}%)`}.bind(this)))}return this.emitEvent("update"),(!this.options.reversed||s>=0)&&this.more(),!0}return!1}more(){const t=this.options.reversed?this.api.data.scrollTop:this.api.data.scrollBottom,e=null!==this.options.onmoreThreshold?this.options.onmoreThreshold:2*this.api.data.viewportHeight;!this.noMore&&t<=e&&this.emitEvent("more")}constructor(t,e){if(!(t=(0,l.getScrollElement)(t)))throw new Error("uiScroll container is undefined");t.__uiScroll__&&t.__uiScroll__.destroy(),this.options=(0,a.extend)({global:!1,native:!1,theme:"default",reversed:!1,autoresize:!0,preserveEdgeBelow:!1,barMinHeight:30,preserveEdgeBelowThreshold:20,stopScrollPropagation:!0,stopScrollPropagationAlways:!1,minContentHeight:0,onmoreThreshold:null,hidden:!1,shadows:!1,scrollElements:[],onresize:null,onscroll:null,onscrollstart:null,onscrollstop:null,ondrag:null,ondragstart:null,ondragstop:null,onupdate:null,onmore:null,noForceReFlow:!1},e),this.options.native&&(this.options.shadows=!1),s.browser.mobile&&(this.options.stopScrollPropagation=!1),(0,o.isArray)(this.options.scrollElements)||(this.options.scrollElements=[]),this.removeEvents=[],this.removeElements=[],this.dragging=!1,this.dragged=!1,this.released=!0,this.noMore=!1,this.dragY=null,this.dragScroll=null,this.shadowTop=!1,this.shadowBottom=!1,this.unnecessary=!1,this.disabled=!1,this.stopped=!0,this.stoppedTimeout=null,this.fixSizeDefault=null,this.animation=null,this.barOuterHeight=null,this.barInnerHeight=null,this.currentFrame=null,this.blockerScrollTop=500,this.emitter=new EventEmitter,(0,a.isFunction)(this.options.onresize)&&this.emitter.addListener("resize",this.options.onresize),(0,a.isFunction)(this.options.onscroll)&&this.emitter.addListener("scroll",this.options.onscroll),(0,a.isFunction)(this.options.onscrollstart)&&this.emitter.addListener("scrollstart",this.options.onscrollstart),(0,a.isFunction)(this.options.onscrollstop)&&this.emitter.addListener("scrollstop",this.options.onscrollstop),(0,a.isFunction)(this.options.ondrag)&&this.emitter.addListener("drag",this.options.ondrag),(0,a.isFunction)(this.options.ondragstart)&&this.emitter.addListener("dragstart",this.options.ondragstart),(0,a.isFunction)(this.options.ondragstop)&&this.emitter.addListener("dragstop",this.options.ondragstop),(0,a.isFunction)(this.options.onupdate)&&this.emitter.addListener("update",this.options.onupdate),(0,a.isFunction)(this.options.onmore)&&this.emitter.addListener("more",this.options.onmore),this.el={container:t,overflow:(0,r.ce)("div",{className:"ui_scroll_overflow"}),outer:(0,r.ce)("div",{className:"ui_scroll_outer"},{margin:this.options.stopScrollPropagation?this.blockerScrollTop+"px 0":void 0}),inner:(0,r.ce)("div",{className:"ui_scroll_inner tt_noappend"}),shadowTop:(0,r.ce)("div",{className:"ui_scroll_shadow_top"}),shadowBottom:(0,r.ce)("div",{className:"ui_scroll_shadow_bottom"}),content:(0,r.ce)("div",{className:"ui_scroll_content clear_fix"}),barContainer:(0,r.ce)("div",{className:"ui_scroll_bar_container"}),barOuter:(0,r.ce)("div",{className:"ui_scroll_bar_outer"}),barInner:(0,r.ce)("div",{className:"ui_scroll_bar_inner"})},(0,r.data)(this.el.container,"ui-scroll",this);const i=(0,r.cf)(),_=["ui_scroll_container"];for((0,a.each)((0,o.isArray)(this.options.theme)?this.options.theme:(0,a.trim)(this.options.theme+"").split(/\s+/),(function(t,e){e&&_.push("ui_scroll_"+e+"_theme")})),(0,r.addClass)(this.el.container,_.join(" ")),this.options.hidden&&(0,r.addClass)(this.el.container,"ui_scroll_hidden");this.el.container.firstChild;)this.el.content.appendChild(this.el.container.firstChild);if(this.el.outer.appendChild(this.el.inner),this.el.inner.appendChild(this.el.content),this.options.stopScrollPropagation?(this.el.blocker=(0,r.ce)("div",{className:"ui_scroll_blocker"}),this.addEvent(this.el.blocker,"scroll",this.fixBlocker.bind(this),!0),this.el.blocker.appendChild(this.el.outer),this.el.overflow.appendChild(this.el.blocker)):this.el.overflow.appendChild(this.el.outer),i.appendChild(this.el.overflow),this.options.native?(0,r.addClass)(this.el.container,"ui_scroll_native"):(this.el.barOuter.appendChild(this.el.barInner),this.el.barContainer.appendChild(this.el.barOuter),i.appendChild(this.el.barContainer),this.options.shadows&&(this.el.overflow.appendChild(this.el.shadowTop),this.el.overflow.appendChild(this.el.shadowBottom)),s.browser.mobile||this.options.scrollElements.push(this.el.barContainer)),this.options.autoresize){const t=(0,l.addResizeSensor)(this.el.inner,this.resize.bind(this,!0)),e=(0,l.addResizeSensor)(this.el.overflow,this.resize.bind(this,!1));this.removeElements.push(t[0]),this.removeElements.push(e[0]),this.startResizeListening=function(){t[1](),e[1]()}}this.removeElements.push(this.el.overflow,this.el.barContainer),this.el.container.appendChild(i),this.options.reversed&&(this.el.outer.scrollTop=this.el.outer.scrollHeight),this.el.container.__uiScroll__=this.api={container:this.el.container,scroller:this.el.outer,content:this.el.content,emitter:this.emitter,ondragstart:this.dragstart.bind(this),ondragstop:this.dragstop.bind(this),ondrag:this.drag.bind(this),destroy:this.destroy.bind(this),disable:this.disable.bind(this,!0),enable:this.disable.bind(this,!1),scrollTop:this.scrollTop.bind(this,!0),scrollBottom:this.scrollBottom.bind(this,!0),scrollBy:this.scrollBy.bind(this),scrollIntoView:this.scrollIntoView.bind(this,!0),update:this.init.bind(this),updateAbove:this.updateAbove.bind(this),updateBelow:this.updateBelow.bind(this),data:{scrollTop:null,scrollBottom:null,scrollHeight:null,viewportHeight:null}},this.init();const h="onwheel"in this.el.outer?"wheel":void 0!==document.onmousewheel?"mousewheel":s.browser.mozilla?"MozMousePixelScroll":"DOMMouseScroll";return this.addEvent(this.el.container,h,function(t){this.animation&&this.animation.stop(),!this.disabled&&this.options.stopScrollPropagation&&(this.unnecessary?this.options.stopScrollPropagationAlways&&(0,n.cancelEvent)(t):this.isScrollEventUnused(t)?(0,n.cancelEvent)(t):(0,n.stopEvent)(t))}.bind(this),!this.options.stopScrollPropagation),this.options.native||this.addEvent(this.el.barContainer,"mousedown",this.dragstart.bind(this)),(0,a.each)(this.options.scrollElements,function(t,e){this.addEvent(e,h,function(t){this.disabled||this.unnecessary||(this.scrollBy(d.scrollEventDelta(t)),!this.options.stopScrollPropagation&&this.isScrollEventUnused(t)||(0,n.cancelEvent)(t))}.bind(this))}.bind(this)),this.options.reversed&&this.addEvent(this.el.container,"mousedown touchstart pointerdown",function(t){this.released=!1,this.noMore=!0;const e=this.addEvent(document,"mouseup contextmenu touchend pointerup",function(t){(0,n.removeEvent)(document,"mouseup contextmenu touchend pointerup",e),this.released=!0,this.noMore&&this.stopped&&!this.dragging&&(this.noMore=!1,this.more())}.bind(this))}.bind(this)),this.addEvent(this.el.outer,"scroll",function(){this.update()&&(this.stopped?(this.stopped=!1,this.emitEvent("scrollstart")):this.options.native||!1!==this.stopped||(this.stopped=0,(0,r.addClass)(this.el.container,"ui_scroll_scrolled")),this.emitEvent("scroll"),this.stoppedTimeout&&clearTimeout(this.stoppedTimeout),this.stoppedTimeout=setTimeout(function(){this.stopped||(this.stopped=!0,this.options.native||(0,r.removeClass)(this.el.container,"ui_scroll_scrolled"),this.emitEvent("scrollstop"),this.noMore&&this.released&&!this.dragging&&(this.noMore=!1,this.more()))}.bind(this),200))}.bind(this)),this.api}}d.addResizeSensor=l.addResizeSensor;const h=d},849423:(t,e,i)=>{i.d(e,{addResizeSensor:()=>h,getScrollElement:()=>d,nextFrame:()=>l});var s=i(879007),o=i(452314),a=i(714209);let r;const n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||(t=>setTimeout(t,1)),_=window.cancelAnimationFrame||window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout;function l(t){r&&_(r),r=n(t)}function d(t){return(0,s.isString)(t)&&"_"===t[0]?(0,o.geByClass1)(t):(0,o.ge)(t)}function h(t,e){if((t=d(t))&&(0,s.isFunction)(e)){if(a.browser.msie9||a.browser.opera&&a.browser.version<13){let i=!1,r=!1;const n=(0,o.ce)("object",{type:"text/html",className:"ui_scroll_resize_object",data:"about:blank",onload:function(){r=!0,i&&_()}});function _(){if(!n.contentDocument)return setTimeout(_,100);n.contentDocument.defaultView.removeEventListener("resize",e),n.contentDocument.defaultView.addEventListener("resize",e),e()}return t.appendChild(n),t.__resizeSensor__=[n,function(){i=!0,r&&_()}]}{const l=(0,o.ce)("div",{className:"ui_scroll_resize_sensor"}),h=(0,o.ce)("div",{className:"ui_scroll_resize_sensor ui_scroll_resize_expand"}),c=(0,o.ce)("div",{className:"ui_scroll_resize_sensor ui_scroll_resize_shrink"}),u=(0,o.ce)("div"),p=(0,o.ce)("div");let m=null;return h.appendChild(u),c.appendChild(p),l.appendChild(h),l.appendChild(c),t.appendChild(l),t.__resizeSensor__=[l,h.onscroll=c.onscroll=function(){const i=(t.offsetWidth||1e4)+10,s=(t.offsetHeight||1e4)+10;u.style.width=i+"px",u.style.height=s+"px",h.scrollLeft=i,h.scrollTop=s,c.scrollLeft=i,c.scrollTop=s,m!==(m=i+" "+s)&&e()}]}}}},331048:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _web_lib_dom__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(452314),_web_lib_input_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(691004),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(879007),_web_lib_element_tooltip__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(96526),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(317412),_web_legacy_ui_ui_tabs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(743288),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(714209),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(618913),_web_lib_scroll__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(688701);const SEARCH_FOCUSED_CLASS="search_focused",uiSearch={destroy:function(t){const e=uiSearch.getFieldEl(t);uiSearch.stopEvents(e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeData)(e)},getWrapEl:function(t){return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domClosest)("_wrap",t)},getFieldEl:function(t){return t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)(t),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)("_field",t)?t:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domByClass)(uiSearch.getWrapEl(t),"_field")},stopEvents:function(t){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(t,"eventHandlers")||[];(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.each)(e,(function(t,e){e.stop()}))},startEvents:function(t){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(t,"eventHandlers")||[];(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.each)(e,(function(t,e){e.stop(),e.start()}))},init:function(el,options){if(!el)return;if(el=uiSearch.getFieldEl(el),!el)return;const wrapEl=uiSearch.getWrapEl(el),delayedInitOptions=!options&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domData)(wrapEl,"init-options");if(delayedInitOptions){const evalScript="(function() { return "+delayedInitOptions+" })()";try{const initOptions=eval(evalScript);initOptions?.suggester?.useCatalogSuggest?setTimeout((()=>(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domData)(wrapEl,"init-options",null)),0):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domData)(wrapEl,"init-options",null),uiSearch.init(el,initOptions)}catch(t){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_7__.logEvalError)(t,evalScript)}return}if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(el,"inited"))return;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(el,"inited",1);const onKeyDown=uiSearch.onKeyDown.pbind(el),onBuffer=function(t){if("input"===t.type&&_shared_lib_browser__WEBPACK_IMPORTED_MODULE_6__.browser.msie){const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(el);if(t===((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domData)(el,"prev-value")||""))return;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domData)(el,"prev-value",t)}setTimeout(uiSearch.onChanged.pbind(el,!1,t),0)};(0,_web_lib_input_utils__WEBPACK_IMPORTED_MODULE_1__.placeholderInit)(el),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(el,"opts",options);const onFocus=t=>{if(options.focusedModifierTargetSelector){const t=document.querySelector(options.focusedModifierTargetSelector);t?.classList.add(SEARCH_FOCUSED_CLASS)}options.onFocus?.(t)},onBlur=t=>{if(options.focusedModifierTargetSelector){const t=document.querySelector(options.focusedModifierTargetSelector);t?.classList.remove(SEARCH_FOCUSED_CLASS)}options.onBlur?.(t)};let mainHandler;if(options.suggester)options.suggester.useCatalogSuggest=!!options?.suggester?.useCatalogSuggest,options.suggester.useCatalogSuggest||(options.suggester.instance=new Suggester(el,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.extend)(options.suggester,{type:options.suggester.type,historyItems:!!options.suggester.history&&options.suggester.historyItems,onSearch:function(t,e,i,s,o){t||(options.allowFiltersForEmpty||uiSearch.removeAllFilters(el),uiSearch.hideProgress(el)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(wrapEl,"ui_search_field_empty",!t),uiSearch.handleAriaAttributes(wrapEl,t),options.onChange&&options.onChange.call(el,t,e,i,s,o)}}))),mainHandler={start:function(){onBlur&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(el,"blur",onBlur),onFocus&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(el,"focus",onFocus)},stop:function(){onBlur&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent)(el,"blur",onBlur),onFocus&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent)(el,"focus",onFocus)}};else{const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("_ui_search_button_search",wrapEl),e=function(t){uiSearch.onEnter(el,t),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.elfocus)(el)};mainHandler={start:function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(el,"keydown",onKeyDown),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(el,"paste cut input",onBuffer),onBlur&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(el,"blur",onBlur),onFocus&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(el,"focus",onFocus),t&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(t,"click",e)},stop:function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent)(el,"keydown",onKeyDown),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent)(el,"paste cut input",onBuffer),onBlur&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent)(el,"blur",onBlur),onFocus&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent)(el,"focus",onFocus),t&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent)(t,"click",e)}}}if(mainHandler.start(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(el,"eventHandlers",[mainHandler]),options.params){const content=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.se)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.trim)(options.params.html)),newOptions=options?.suggester?.useCatalogSuggest?{forceSide:"bottom",setPos:()=>({left:"auto",top:"52px"})}:{};options.paramsTooltip=new _web_lib_element_tooltip__WEBPACK_IMPORTED_MODULE_3__.ElementTooltip((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("_ui_search_params_button",wrapEl),{appendTo:wrapEl,content,autoShow:!1,customShow:!0,shift:options.params.shift?options.params.shift:0,offset:[0,-2],...newOptions}),options.paramsTooltip.build(),options?.suggester?.useCatalogSuggest&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(options.paramsTooltip._ttel,{right:0}),setTimeout((function(){(function initScript(){try{eval(options.params.script)}catch(t){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_7__.logEvalError)(t,options.params.script)}}).call(el)}))}options.fixed&&uiSearch.setFixed(el),options.noAutoDestroy||cur.destroy.push(uiSearch.stopEvents.pbind(el)),uiSearch.initFilters(el,options),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.isFunction)(options.onInit)&&options.onInit(el,options)},getOptions:function(t){let e;if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)(t,"_field"))e=t;else{const i=uiSearch.getWrapEl(t);e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("_field",i)}return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(e,"opts")||{}},toggleParameters:function(t){const e=uiSearch.getOptions(t);e.paramsTooltip&&e.paramsTooltip.toggle()},hideParameters:function(t){const e=uiSearch.getOptions(t);e&&e.paramsTooltip&&e.paramsTooltip.hide()},saveHistorySearch:function(t,e,i,s,o,a){e||(e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(t));const r=uiSearch.getOptions(t);r.suggester&&r.suggester.instance&&r.suggester.instance.saveHistoryItem(e,i,s,o,a)},onEnter:function(t,e){t=uiSearch.getFieldEl(t);const i=uiSearch.getOptions(t),s=t.getValue?t.getValue():t.value;return i.onEnter&&i.onEnter(t,s,e),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.cancelEvent)(e)},onKeyDown:function(t,e){if(cur.preventInputActions&&-1!=[_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.KEY.RETURN,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.KEY.ESC,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.KEY.DOWN,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.KEY.UP].indexOf(e.keyCode))return(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.cancelEvent)(e);if(e.keyCode==_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.KEY.RETURN)return uiSearch.onEnter(t,e);if(e.keyCode==_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.KEY.ESC){const i=!!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(t);return uiSearch.reset(t,!1,e),!i||(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.cancelEvent)(e)}setTimeout.pbind(uiSearch.onChanged.pbind(t,!1,e),0)},onChanged:function(t,e,i){t=uiSearch.getFieldEl(t);const s=uiSearch.getOptions(t),o=uiSearch.getWrapEl(t),a=t.getValue?t.getValue():t.value;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(o,"ui_search_field_empty",!(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.trim)(a)),uiSearch.handleAriaAttributes(o,a),a||s.allowFiltersForEmpty||uiSearch.removeAllFilters(t),e||s.onChange&&s.onChange.call(t,a,i)},focus:function(t){t=uiSearch.getFieldEl(t),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.elfocus)(t)},reset:function(t,e,i){t=uiSearch.getFieldEl(t);const s=uiSearch.getOptions(t),o=uiSearch.getWrapEl(t);(t.getValue?t.getValue():t.value)?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(t,""),uiSearch.onChanged(t,e,i),e||s.onEnter&&s.onEnter(t,""),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.elfocus)(t)):s.in_tabs&&_web_legacy_ui_ui_tabs__WEBPACK_IMPORTED_MODULE_5__.default.hideSearch(o),window.tooltips&&tooltips.destroyAll()},showProgress:function(t){t=uiSearch.getFieldEl(t);const e=uiSearch.getWrapEl(t);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)(e,"ui_search_loading");const i=t.getValue?(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.trim)(t.getValue()):t.value;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(e,"ui_search_field_empty",!i),uiSearch.handleAriaAttributes(e,i)},hideProgress:function(t){t=uiSearch.getFieldEl(t);const e=uiSearch.getWrapEl(t);if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(e,"ui_search_loading"),t){const i=t.getValue?(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.trim)(t.getValue()):t.value;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(e,"ui_search_field_empty",!i),uiSearch.handleAriaAttributes(e,i)}},handleAriaAttributes:function(t,e){const i=t.querySelector(".ui_search_controls"),s=!(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.trim)(e);i?.setAttribute("aria-hidden",s)},scrollResize:function(t){if(_shared_lib_browser__WEBPACK_IMPORTED_MODULE_6__.browser.mobile)return;t=uiSearch.getFieldEl(t);const e=uiSearch.getWrapEl(t),i=e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domPN)(e),s=e&&e.classList.contains("ui_search_fixed"),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)(cur.uiSearchPageBlock)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.gpeByClass)("page_block",t),a=vk.staticheader?Math.max(0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("page_header"))[1]-scrollNode.scrollTop):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("page_header"))[1];let r;const n=e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.isAncestor)(e,boxLayerWrap);if(!e||!i||!n&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.gpeByClass)("scroll_fix",e)||t.ignoreFixed&&!s||!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.isVisible)(i))return;if(n?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getXY)(i,!0)[1]<0:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getXY)(i,!0)[1]<a){const n=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getStyle)(e.classList.contains("ui_search_new")?e:t,"width"));!s&&n&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(i,"height",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)(e)[1]),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(e,"width",n),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)(e,"ui_search_fixed"));const _=Math.min(0,Math.max(-document.body.scrollLeft,document.body.clientWidth-(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("page_layout"))[0]));if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(e,{marginLeft:_}),o){const i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getXY)(o)[1]+(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)(o)[1]-(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_8__.scrollGetY)()-t.offsetHeight;r=Math.min(a,Math.max(-t.offsetHeight,i)),r!==cur.lastUISearchPos&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(e,"top",r),cur.lastUISearchPos=r)}}else s&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(i,"height",""),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(e,{top:"",marginLeft:""}),cur.lastUISearchPos=!1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(e,"ui_search_fixed"))},setStatic:function(t){t.ignoreFixed=!0;const e=uiSearch.getWrapEl(t),i=e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domPN)(e);e&&i&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(i,"height",""),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(e,{top:"",marginLeft:""}),cur.lastUISearchPos=!1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(e,"ui_search_fixed"))},setFixed:function(t){if(t.ignoreFixed=!1,!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(t,"resizeEventHandler")){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.isAncestor)(t,boxLayerWrap)?boxLayerWrap:window,i=uiSearch.scrollResize.pbind(t),s={stop:_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent.pbind(e,"scroll",i),start:_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent.pbind(e,"scroll",i)};(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(t,"eventHandlers",((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(t,"eventHandlers")||[]).concat([s])),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(t,"resizeEventHandler",!0),s.start()}uiSearch.scrollResize(t)},initFilters:function(t,e){if(!t)return;const i=uiSearch.getWrapEl(t),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("ui_search_fltr_control",i),o={start:function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(s,"click",(function(t){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)(s,"shown")&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)(t.target,"ui_search_fltr_control")||a(s)})),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(s,"mouseover",(function(){if(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)(s,"shown"))return;const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(s,"hidetimer");t&&(clearTimeout(t),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(s,"hidetimer",0)),a(s,!0)})),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(s,"mouseout",(function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(s,"hidetimer")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(s,"hidetimer",setTimeout((function(){a(s,!1),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(s,"hidetimer",0)}),200))}))},stop:_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent.pbind(s,"click mouseover mouseout")};function a(t,e){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(t,"shown",e)}(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(t,"eventHandlers",((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(t,"eventHandlers")||[]).concat([o])),o.start();const r=uiSearch._getFiltersPane(t);(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(r,"click",(function(e){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)(e.target,"token_title")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)(e.target,"token_del")){const i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.gpeByClass)("token",e.target),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domData)(i,"id");uiSearch.removeFilter(t,s)}}))},removeAllFilters:function(t){const e=uiSearch._getFiltersPane(t),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(e,"cur_filters");(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.each)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.extend)({},i),(function(e){uiSearch.removeFilter(t,e,!0)}))},toggleFilter:function(t,e,i,s){s?uiSearch.addFilter(t,e,i):uiSearch.removeFilter(t,e)},addFilter:function(t,e,i){if(!e||!i)return;const s=uiSearch._getFiltersPane(t),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(s,"cur_filters")||{};o[e]=i,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(s,"cur_filters",o);const a=uiSearch.getOptions(t);a.onFiltersChanged&&a.onFiltersChanged(o),uiSearch._renderFilters(t)},removeFilter:function(t,e,i){const s=uiSearch._getFiltersPane(t),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(s,"cur_filters")||{};if(o[e]){delete o[e],(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(s,"cur_filters",o);const a=uiSearch.getOptions(t);a.onFilterRemoved&&a.onFilterRemoved(e,t,i),a.onFiltersChanged&&a.onFiltersChanged(o),uiSearch._renderFilters(t)}},_getFiltersPane:function(t){const e=uiSearch.getWrapEl(t)||t;return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("ui_search_filters_pane",e)},_renderFilters:function(t){clearTimeout((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(t,"renderFiltersTO")),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(t,"renderFiltersTO",setTimeout(uiSearch._doRenderFilters.pbind(t)))},_doRenderFilters:function(t){const e=uiSearch._getFiltersPane(t),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(e,"cur_filters")||{},s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("ui_search_filters",e);if(s)if((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.isEmpty)(i))(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(e,"expanded"),setTimeout((function(){s.innerHTML="",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)(e)}),200);else{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.show)(e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClassDelayed)(e,"expanded");const t=[],o={};let a=0;(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.each)(i,(function(e,i){let s=!1,r=!1,n=e.match(/(.*?)_([^_]+)$/);const _=n&&n[2]||!1;n=n&&n[1]||!1,n&&(void 0!==o[n]&&"from"===_?r=o[n]:void 0!==o[n]&&(s=o[n]+1),o[n]=a);const l=`<div class="token" id="token${e}" data-id="${e}">\n                         <div class="token_title">${(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.replaceEntities)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.clean)(i))}</div>\n                         <div class="token_del"></div>\n                       </div>`;!1!==r?t.splice(r,0,l):!1!==s?t.splice(s,0,l):t.push(l),a++})),s.innerHTML=t.join("")}}},__WEBPACK_DEFAULT_EXPORT__=uiSearch},743288:(t,e,i)=>{i.d(e,{default:()=>h});var s=i(452314),o=i(879007),a=i(714209),r=i(317412),n=i(248782),_=i(946076),l=i(171444);const d={initTabs:function(t,e,i=!0){if(a.browser.msie&&(0,o.intval)(a.browser.version)<10)return;if(a.browser.opera&&(0,o.intval)(a.browser.version)<15)return;if((0,s.hasClass)(t,"ui_tabs_sliding"))return;const r=(0,s.getSize)(e)[0],n=e.offsetLeft,_=(0,s.geByClass1)("_ui_tabs_slider",t);if(_&&!(0,s.domData)(t,"inited")){const t={width:r+"px",marginLeft:n};(0,s.setStyle)(_,t)}i&&d.tryInitTabsScroll(t)},tryInitTabsScroll:function(t){const e=t.querySelector(".js-tabs-scroll:not(.js-tabs-scroll-inited)");if(!e)return;e.classList.add("js-tabs-scroll-inited");const i=new _.UIGallery(e,{scrollY:!1}),s=(0,n.debounce)((()=>{i.refresh()}),200);window.addEventListener("resize",s),(0,l.pushNavDestroy)((()=>{i.destroy(),window.removeEventListener("resize",s)}))},tryInit:function(t,e=!0){if((0,s.domData)(t,"inited"))return;const i=(0,s.geByClass1)("ui_tab_group_sel",t)||(0,s.geByClass1)("ui_tab_sel",t);i&&d.initTabs(t,i,e),(0,s.domData)(t,"inited",1)},goTab:function(t,e,i,o=!1){if((0,r.checkEvent)(e))return!0;const a=(0,s.gpeByClass)("ui_tabs",t);return!(!i&&(0,s.geByClass1)("ui_tab_sel",a)==t)&&(d.switchTab(t),d.showProgress(a),nav.go(t,e,{tab:t,noframe:o}))},switchTab:function(t,e){let i=(0,s.gpeByClass)("ui_tabs",t);const a=(0,s.geByClass1)("ui_tab_sel",i);let r=null,n=null;const _=(0,s.hasClass)(a,"ui_tab_group_item")?n=(0,s.gpeByClass)("ui_tab_group",a):a,l=(0,s.hasClass)(t,"ui_tab_group_item")?r=(0,s.gpeByClass)("ui_tab_group",t):t;if(t!=a){if(t!=l&&(d.toggleGroup(l,!1),d.resetLabel(l,t)),_){d.initTabs(i,_),e=e||{};const t=(0,s.geByClass1)("_ui_tabs_slider",i);if(t){e.noAnim||l===_||((0,s.addClass)(i,"ui_tabs_sliding"),clearTimeout(cur.tabSlidingTO),cur.tabSlidingTO=setTimeout(s.removeClass.pbind(i,"ui_tabs_sliding"),300));const a=(0,o.intval)(t.style.marginLeft),r={width:(0,s.getSize)(l)[0]+"px"};r[cssTransformProp]="translateX("+(l.offsetLeft-a)+"px)",(0,s.setStyle)(t,r)}a!=_&&l!=_&&d.resetLabel(_),_!=a&&(0,s.removeClass)(_,"ui_tab_group_sel"),(0,s.removeClass)(a,"ui_tab_sel"),"tab"===(0,s.attr)(a,"role")&&(0,s.attr)(a,"aria-selected","false")}if(l!=t&&(0,s.addClass)(l,"ui_tab_group_sel"),(0,s.addClass)(t,"ui_tab_sel"),n&&(0,s.removeClass)(n,"ui_tab_hide_separator"),"tab"===(0,s.attr)(t,"role")&&(0,s.attr)(t,"aria-selected","true"),r){i=(0,s.geByClass1)("ui_tab_group_items",r,"div").children;let t=null;(0,o.each)(i,(function(e,i){"SPAN"===i.tagName?t=i:(0,s.hasClass)((0,s.domFC)(i),"ui_tab_sel")||(0,s.hasClass)(i,"unshown")||(t=null)})),t&&(0,s.addClass)(r,"ui_tab_hide_separator")}}return!1},resetLabel:function(t,e){const i=(0,s.geByClass1)("ui_tab_group_label",t,"span");i&&(i.innerHTML=(e||i).getAttribute("data-default-label"))},toggleGroup:function(t,e){const i=(0,s.data)(t,"visibletimer");i&&clearTimeout(i),(0,s.data)(t,"visibletimer",setTimeout(s.toggleClass.pbind(t,"visible",e),e?0:100)),(0,s.toggleClass)(t,"shown",e)},showGroup:function(t){const e=(0,s.data)(t,"hidetimer");e&&(clearTimeout(e),(0,s.data)(t,"hidetimer",0)),d.toggleGroup(t,!0)},hideGroup:function(t){(0,s.data)(t,"hidetimer")||(0,s.data)(t,"hidetimer",setTimeout((function(){d.toggleGroup(t,!1),(0,s.data)(t,"hidetimer",0)}),200))},showProgress:function(t){(0,s.hasClass)(t,"ui_tabs")||(t=(0,s.gpeByClass)("ui_tabs",t)),(0,s.addClass)(t,"ui_tabs_loading")},hideProgress:function(t){(0,s.hasClass)(t,"ui_tabs")||(t=(0,s.gpeByClass)("ui_tabs",t)),(0,s.removeClass)(t,"ui_tabs_loading")},showSearch:function(t,e){if(cur.viewAsBox)return cur.viewAsBox();if((0,r.checkEvent)(e))return!0;const i=(0,s.gpeByClass)("ui_tabs",t),o=(0,s.domByClass)(i,"_field");return(0,s.addClass)(i,"ui_tabs_search_opened"),uiSearch.focus(o),!1},hideSearch:function(t,e){if((0,r.checkEvent)(e))return!0;const i=(0,s.gpeByClass)("ui_tabs",t);return(0,s.removeClass)(i,"ui_tabs_search_opened"),!1},scrollToActiveTab(t){const e=document.querySelector(`#${t}`);if(!e)return;const i=e.querySelector(".ui_tab_sel, .ui_tab_group_sel"),s=e.querySelector(`.${_.UI_GALLERY_CONTENT_CLASSNAME}`);if(!i||!s)return;const o=i.offsetLeft,a=o+i.offsetWidth,r=s.scrollLeft,n=s.clientWidth,l=r+n,d=o-20,h=a+20;d<r?s.scrollTo({left:d}):h>l&&s.scrollTo({left:h-n})},showSort(){const t=document.querySelector(".js-ui_tab_sort_wrap");t&&t.classList.remove("ui_tab_search_wrap_hidden")},hideSort(){const t=document.querySelector(".js-ui_tab_sort_wrap");t&&t.classList.add("ui_tab_search_wrap_hidden")}},h=d},331285:(t,e,i)=>{i.d(e,{AudioListFetchable:()=>_});var s=i(434518),o=i(763812),a=i(306198),r=(0,o._)("_list"),n=(0,o._)("_defaultNextCount");class _{get list(){return(0,s._)(this,r)[r]}audioAt(t){return this.list.audioAt(t)}getFetchAtIndexes(t,e){const{list:i}=this,{range:s=0}=e??{},o=(0,a.ensureAudioListAbsIndex)(i,t),r=Math.max(0,o-s);let n=o+s;i.infinite||(n=Math.min(i.length-1,n));const _=new Array(n-r+1).fill(null).map(((t,e)=>r+e));return e?.prefetch?_.filter((t=>!this.audioAt(t))):_}get defaultNextCount(){return(0,s._)(this,n)[n]}set defaultNextCount(t){if(!Number.isFinite(t))throw new Error(`Count ${t} is not finite`);(0,s._)(this,n)[n]=t}constructor(t){Object.defineProperty(this,r,{writable:!0,value:void 0}),Object.defineProperty(this,n,{writable:!0,value:void 0}),(0,s._)(this,n)[n]=1,(0,s._)(this,r)[r]=t}}},223093:(t,e,i)=>{i.d(e,{InfiniteAudioListFetchable:()=>_});var s=i(434518),o=i(763812),a=i(306198),r=i(331285),n=(0,o._)("_assertInfiniteList");class _ extends r.AudioListFetchable{async fetchAt(t,{range:e=0}={}){(0,s._)(this,n)[n]();const{list:i}=this,o=(0,a.ensureAudioListAbsIndex)(i,t),r=this.audioAt(o),_=o+e+1-i.length;if(r&&_<=0)return r;const[l]=await this.fetchNext(_);if(!l)throw new Error("fetchNext have not return audios");return l}constructor(...t){super(...t),Object.defineProperty(this,n,{value:l})}}function l(){if(!this.list.infinite)throw new Error("AudioList is finite but fetch strategy is infinite")}},56050:(t,e,i)=>{var s;i.d(e,{AudioListType:()=>s}),function(t){t.MusicMix="music_mix",t.MusicSnippetsList="music_snippets_list",t.MusicAlbumPlaylist="music_album_playlist",t.MusicGeneratedPlaylist="music_generated_playlist",t.MusicUGCGroupPlaylist="music_ugc_group_playlist",t.MusicUGCUserPlaylist="music_ugc_user_playlist",t.MusicChatPlaylist="music_chat_playlist",t.MyMusicPlaylist="my_music_playlist",t.Podcast="podcast",t.Radio="radio"}(s||(s={}))},964705:(t,e,i)=>{i.d(e,{Audio:()=>r});var s=i(331635),o=i(327813),a=i(674846);class r{get data(){return this.ensureData()}get type(){return this.data.type}get url(){return this.data.url}get title(){return this.data.title}get artwork(){return this.data.artwork}get isExplicit(){return this.data.isExplicit}get authors(){return this.data.authors}get duration(){return this.data.duration}get isBlocked(){return this.data.isBlocked}get mediaMetadata(){const{authors:t}=this;return{title:this.title,artist:t&&(0,a.stringifyAudioAuthors)(t),artwork:[...this.artwork]}}attach(t){return Object.assign(Object.create(this),{context:t})}ensureContext(){const{context:t}=this;if(!t)throw new Error("Audio is not contextual");return t}ensureData(){const t=this.provideData()??this.cachedData;if(!t)throw new Error("Audio data does not initialized");return this.cacheData(t)}cacheData(t){return this.cachedData=t,this.cachedData}constructor(t,e){this.identity=t,this.provideData=e,this.cachedData=this.ensureData(),(0,o.makeObservable)(this)}}(0,s.__decorate)([o.observable,(0,s.__metadata)("design:type",Object)],r.prototype,"cachedData",void 0),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],r.prototype,"mediaMetadata",null)},988696:(t,e,i)=>{i.d(e,{AudioProvider:()=>n});var s=i(331635),o=i(327813),a=i(861420),r=i(192430);class n{get(t){return this.entities.get(this.toEntityIdentity(t))}has(t){return this.entities.has(this.toEntityIdentity(t))}isFetchingAudio(t){return this.pendingEntities.has(this.toEntityIdentity(t))}async ensure(t){const e=this.get(t);return e||this.fetch(t)}async fetch(t){const[e]=await this.fetchMany([t]);if(!e)throw new Error("Server did not return the audio");return e}async fetchMany(t){if(!t.length)return[];try{this.markPending(t);const e=await this.fetchEntities(t);return this.cacheMany(e),e}finally{this.unmarkPending(t)}}async ensureMany(t){let e=[],i=[];for(const s of t){const t=this.get(s);t?e.push(t):i.push(s)}if(!i.length)return e;const s=await this.fetchMany(i);e=[];for(const o of t){const a=this.get(o);if(!a)throw console.error("AudioData not found in entities",{identity:o,audio:a,fetched:s,entities:this.entities,identities:t,missing:i,result:e}),new Error("AudioData not found in entities");e.push(a)}return e}cache(t){return this.entities.set(t.identity,t),t}cacheMany(t){for(const e of t)this.cache(e)}markPending(t){t.forEach((t=>this.pendingEntities.add(this.toEntityIdentity(t))))}unmarkPending(t){t.forEach((t=>this.pendingEntities.delete(this.toEntityIdentity(t))))}constructor(){this.entities=new a.ObservableIdentityMap,this.entitiesData=new a.ObservableIdentityMap,this.pendingEntities=new r.ObservableIdentitySet,(0,o.makeObservable)(this)}}(0,s.__decorate)([o.action,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object]),(0,s.__metadata)("design:returntype",Promise)],n.prototype,"ensure",null),(0,s.__decorate)([o.action,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object]),(0,s.__metadata)("design:returntype",Promise)],n.prototype,"fetch",null),(0,s.__decorate)([o.action,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Array]),(0,s.__metadata)("design:returntype",Promise)],n.prototype,"fetchMany",null),(0,s.__decorate)([o.action,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Array]),(0,s.__metadata)("design:returntype",Promise)],n.prototype,"ensureMany",null),(0,s.__decorate)([o.action,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object]),(0,s.__metadata)("design:returntype",Object)],n.prototype,"cache",null),(0,s.__decorate)([o.action,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object]),(0,s.__metadata)("design:returntype",void 0)],n.prototype,"cacheMany",null),(0,s.__decorate)([o.action,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Array]),(0,s.__metadata)("design:returntype",void 0)],n.prototype,"markPending",null),(0,s.__decorate)([o.action,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Array]),(0,s.__metadata)("design:returntype",void 0)],n.prototype,"unmarkPending",null)},674846:(t,e,i)=>{function s(t){return[t.main.map((({name:t})=>t)).filter(Boolean).join(", "),t.feat.map((({name:t})=>t)).filter(Boolean).join(", ")].filter(Boolean).join(" . feat ")||t.raw}i.d(e,{stringifyAudioAuthors:()=>s})},562429:(t,e,i)=>{i.d(e,{AudioList:()=>r});var s=i(331635),o=i(327813),a=i(555282);class r extends a.AudioList{get data(){return this.ensureData()}get length(){return this.items.length}get type(){return this.data.type}get contentType(){return this.data.contentType}get title(){return this.data.title}audioAtStrict(t){const e=this.audioAt(t);if(!e)throw new Error("Audio not found");return e}attach(t){return Object.assign(Object.create(this),{context:t})}ensureContext(){const{context:t}=this;if(!t)throw new Error("AudioList is not contextual");return t}ensureData(){const t=this.provideData()??this.cachedData;if(!t)throw new Error("Audio list data does not initialized");return this.cachedData=t}constructor(t,e){super(),this.identity=t,this.provideData=e,this.cachedData=this.ensureData(),(0,o.makeObservable)(this)}}(0,s.__decorate)([o.observable,(0,s.__metadata)("design:type",Object)],r.prototype,"cachedData",void 0)},663868:(t,e,i)=>{i.d(e,{MusicAudio:()=>r});var s=i(331635),o=i(327813),a=i(964705);class r extends a.Audio{get subtitle(){return this.data.subtitle}get album(){return this.data.album}get hasLyrics(){return this.data.hasLyrics}get apiAudio(){return this.data.apiAudio}get releaseAudioIdentity(){return this.data.releaseAudioIdentity}get mediaMetadata(){return{...super.mediaMetadata,album:this.album?.title}}get releaseAudio(){return this.releaseAudioIdentity?this.trackProvider.get(this.releaseAudioIdentity)??null:null}get originalAudio(){if(this.releaseAudio)return this.releaseAudio;if(!this.likesService.isMine(this.identity))return null;const t=this.likesService.getSourceIdentityFromMyMusic(this.identity);return t?this.trackProvider.get(t)??null:null}get isMyMusicPending(){return this.likesService.checkMyMusicPending(this.identity)}get isMine(){return this.likesService.isMine(this.identity)}get hasInMyMusic(){return this.likesService.hasInMyMusic(this.identity)}addToMyMusic(){return this.likesService.addToMyMusic({identity:this.originalAudio?.identity??this.identity,trackCode:this.ensureContext().trackCode})}deleteFromMyMusic(){return this.likesService.deleteFromMyMusic(this.identity)}restoreInMyMusic(){return this.likesService.restoreInMyMusic(this.identity)}constructor(t,e,{trackProvider:i,likesService:s}){super(t,e),this.trackProvider=i,this.likesService=s}}(0,s.__decorate)([o.override,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],r.prototype,"mediaMetadata",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],r.prototype,"releaseAudio",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],r.prototype,"originalAudio",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],r.prototype,"isMyMusicPending",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],r.prototype,"isMine",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],r.prototype,"hasInMyMusic",null)},357587:(t,e,i)=>{i.d(e,{MusicTrackAudio:()=>r});var s=i(331635),o=i(327813),a=i(663868);class r extends a.MusicAudio{get isFocusTrack(){return this.data.isFocusTrack}get disliked(){return this.likesService.hasDislike(this.identity)}get isDislikePending(){return this.likesService.checkDislikesPending(this.identity)}async addDislike(){return this.likesService.addDislike(this.identity)}async removeDislike(){return this.likesService.removeDislike(this.identity)}}(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],r.prototype,"disliked",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],r.prototype,"isDislikePending",null)},71166:(t,e,i)=>{i.d(e,{MusicMix:()=>d});var s=i(434518),o=i(763812),a=i(331635),r=i(327813),n=i(562429),_=i(223093),l=i(392248);class d extends n.AudioList{get isSessionLaunched(){return this.state.isSessionLaunched}get infinite(){return!0}get head(){return this.items}audioAt(t){return this.items.at(t)}launchSession(){if(0===this.length)throw new Error("Music mix session cannot be launched if there are no tracks in the mix");this.state.isSessionLaunched=!0}breakSession(){this.clearItems(),this.state.isSessionLaunched=!1}clearItems(){this.items.length=0}constructor(t,e,{audioApi:i,audioProvider:s,isSessionFeatureEnabled:o=!1}){super(t,e),this.state={isSessionLaunched:!1},this.items=[],(0,r.makeObservable)(this),this.fetchable=new p(this,{audioApi:i,audioProvider:s,isSessionFeatureEnabled:o})}}(0,a.__decorate)([r.observable.deep,(0,a.__metadata)("design:type",Object)],d.prototype,"state",void 0),(0,a.__decorate)([r.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],d.prototype,"launchSession",null),(0,a.__decorate)([r.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],d.prototype,"breakSession",null),(0,a.__decorate)([r.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],d.prototype,"clearItems",null);var h=(0,o._)("_audioApi"),c=(0,o._)("_audioProvider"),u=(0,o._)("_isSessionFeatureEnabled");class p extends _.InfiniteAudioListFetchable{async fetchNext(t=this.defaultNextCount){const{list:e}=this,i=(await(0,s._)(this,h)[h].getStreamMixAudios({mix_id:e.identity.id,count:t,...(0,s._)(this,u)[u]?{append:this.list.isSessionLaunched?1:0}:{}})).map((t=>{const e=(0,s._)(this,c)[c].create((0,l.toMusicTrackAudioData)(t)),i=t.track_code;return i||console.warn(new Error("Received MusicMix audio without trackCode")),e.attach({trackCode:i??"",apiAudio:t})}));return e.items.push(...i),i}constructor(t,{audioApi:e,audioProvider:i,isSessionFeatureEnabled:o=!1}){super(t),Object.defineProperty(this,h,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),(0,s._)(this,h)[h]=e,(0,s._)(this,c)[c]=i,(0,s._)(this,u)[u]=o}}},553580:(t,e,i)=>{i.d(e,{MusicTrackAudioProvider:()=>g});var s,o=i(434518),a=i(763812),r=i(331635),n=i(327813),_=i(220679),l=i(643010),d=i(962954),h=i(988696),c=i(392248),u=i(309134),p=i(357587),m=i(127126);let g=(s=(0,a._)("_createCached"),class extends h.AudioProvider{create(t){const{releaseAudioIdentity:e}=t;return e&&!this.has(e)&&(0,o._)(this,s)[s]({...t,identity:e,releaseAudioIdentity:null}),(0,o._)(this,s)[s](t)}async fetchEntities(t){if(!t.length)return[];return(await this.audioApi.getById({audios:t.map(l.getIdentityAccessRawId).join(",")})).map((t=>this.create((0,c.toMusicTrackAudioData)(t))))}toEntityIdentity(t){return new d.OwnedIdentity(t)}constructor(t,e){super(),Object.defineProperty(this,s,{value:b}),this.audioApi=t,this.likesServices=e}});function b(t){const e=this.toEntityIdentity(t.identity);this.entitiesData.set(e,t);const i=new p.MusicTrackAudio(e,(()=>this.entitiesData.get(e)),{trackProvider:this,likesService:this.likesServices});return this.cache(i)}(0,r.__decorate)([n.action,(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[Object]),(0,r.__metadata)("design:returntype",Object)],g.prototype,"create",null),(0,r.__decorate)([n.action,(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[Array]),(0,r.__metadata)("design:returntype",Promise)],g.prototype,"fetchEntities",null),g=(0,r.__decorate)([m.scope.global(),(0,r.__metadata)("design:paramtypes",[_.AudioApi,u.MusicLikesService])],g)},309134:(t,e,i)=>{i.d(e,{MusicLikesService:()=>c});var s=i(331635),o=i(820459),a=i(220679),r=i(795624),n=i(840723),_=i(327813),l=i(919225),d=i(728571),h=i(127126);let c=class{get events(){return this.emitter.listenable}isMine(t){return this.myMusicService.isMine(t)}getFromMyMusic(t){return this.myMusicService.get(t)}getSourceIdentityFromMyMusic(t){return this.myMusicService.getSourceIdentity(t)}hasInMyMusic(t){return this.myMusicService.has(t)}hasDislike(t){return this.dislikesService.has(t)}checkMyMusicPending(t){return this.myMusicService.checkPending(t)}checkDislikesPending(t){return this.dislikesService.checkPending(t)}async addToMyMusic({identity:t,trackCode:e}){const i=await this.myMusicService.add({identity:t,trackCode:e});return this.emitter.emit("addedToMyMusic",{source:t,target:i}),this.hasDislike(t)&&await this._removeDislike(t,d.DislikeRemovedEventReason.RestoredInMyMusic),i}async deleteFromMyMusic(t){return this._deleteFromMyMusic(t)}async restoreInMyMusic(t){await this._restoreInMyMusic(t),this.hasDislike(t)&&await this._removeDislike(t,d.DislikeRemovedEventReason.RestoredInMyMusic)}async addDislike(t){await this.dislikesService.add(t),this.emitter.emit("dislikeAdded",t),this.isMine(t)&&await this._deleteFromMyMusic(t,d.DeletedFromMyMusicEventReason.DislikeAdded)}async removeDislike(t){await this._removeDislike(t),this.isMine(t)&&await this._restoreInMyMusic(t,d.RestoredInMyMusicEventReason.DislikeRemoved)}async _deleteFromMyMusic(t,e=d.DeletedFromMyMusicEventReason.Unknown){await this.myMusicService.delete(t),this.emitter.emit("deletedFromMyMusic",{target:t,reason:e})}async _restoreInMyMusic(t,e=d.RestoredInMyMusicEventReason.Unknown){await this.myMusicService.restore(t),this.emitter.emit("restoredFromMyMusic",{target:t,reason:e})}async _removeDislike(t,e=d.DislikeRemovedEventReason.Unknown){await this.dislikesService.remove(t),this.emitter.emit("dislikeRemoved",{target:t,reason:e})}constructor(t,e){this.emitter=new l.Emitter,this.myMusicService=new o.MyMusicService({audioApi:t,authService:e}),this.dislikesService=new n.MusicDislikesService({audioApi:t,authService:e}),(0,_.makeAutoObservable)(this)}};c=(0,s.__decorate)([h.scope.global(),(0,s.__metadata)("design:paramtypes",[a.AudioApi,r.AuthService])],c)},728571:(t,e,i)=>{var s,o,a;i.d(e,{DeletedFromMyMusicEventReason:()=>s,DislikeRemovedEventReason:()=>a,RestoredInMyMusicEventReason:()=>o}),function(t){t.DislikeAdded="DislikeAdded",t.Unknown="Unknown"}(s||(s={})),function(t){t.DislikeRemoved="DislikeRemoved",t.Unknown="Unknown"}(o||(o={})),function(t){t.AddedToMyMusic="AddedToMyMusic",t.RestoredInMyMusic="RestoredInMyMusic",t.Unknown="Unknown"}(a||(a={}))},840723:(t,e,i)=>{i.d(e,{MusicDislikesService:()=>r});var s=i(643010),o=i(192430),a=i(327813);class r{has(t){return this.targets.has(t)}checkPending(t){return this.pendingIdentities.has(t)}async add(t){this.authService.ensureUserId();const e=(0,s.getIdentityRawId)(t);this.markPending(t);try{await this.api.addDislike({audio_ids:e}),(0,a.runInAction)((()=>{this.targets.add(t)}))}finally{this.unmarkPending(t)}}async remove(t){this.authService.ensureUserId();const e=(0,s.getIdentityRawId)(t);this.markPending(t);try{await this.api.removeDislike({audio_ids:e}),(0,a.runInAction)((()=>{this.targets.delete(t)}))}finally{this.unmarkPending(t)}}markPending(t){this.pendingIdentities.add(t)}unmarkPending(t){this.pendingIdentities.delete(t)}constructor({audioApi:t,authService:e}){this.targets=new o.ObservableIdentitySet,this.pendingIdentities=new o.ObservableIdentitySet,this.api=t,this.authService=e,(0,a.makeAutoObservable)(this)}}},820459:(t,e,i)=>{i.d(e,{MyMusicService:()=>n});var s=i(327813),o=i(861420),a=i(192430),r=i(962954);class n{has(t){return this.isMine(t)||!!this.get(t)}get(t){const e=this.targets.get(t);if(e&&!this.deletedTargets.has(e))return e}getSourceIdentity(t){return this.sources.get(t)}isMine(t){return this.authService.ensureUserId()===t.ownerId}checkPending(t){const e=this.get(t);return!!(this.pendingIdentities.has(t)||e&&this.pendingIdentities.has(e))}async add({identity:t,trackCode:e}){if(this.isMine(t))throw new Error("Source identity already is mine");let i;this.markPending(t);try{const s=await this.api.add({audio_id:t.id,owner_id:t.ownerId,access_key:t.accessKey,track_code:e}),o=s.items?.[0]?.new_audio_id;if(null==o)throw new Error("Missing audio ID in response from audio.add api method");i=this.createIdentity(o),this.setCache(t,i)}finally{this.unmarkPending(t)}return i}async delete(t){if(!this.isMine(t))throw new Error("Target identity is not mine");this.markPending(t),this.markAsDeleted(t);try{await this.api.delete({audio_id:t.id,owner_id:t.ownerId})}catch(e){throw this.unmarkAsDeleted(t),e}finally{this.unmarkPending(t)}}async restore(t){if(!this.isMine(t))throw new Error("Target identity is not mine");this.markPending(t),this.unmarkAsDeleted(t);try{await this.api.restore({audio_id:t.id,owner_id:t.ownerId})}catch(e){if(15===e?.error?.error_code){const e=this.sources.get(t);e&&this.deleteCache(e)}throw e}finally{this.unmarkPending(t)}}setCache(t,e){this.targets.set(t,e),this.sources.set(e,t),this.unmarkAsDeleted(e)}deleteCache(t){const e=this.targets.get(t);e&&(this.targets.delete(t),this.sources.delete(e),this.unmarkAsDeleted(e))}markPending(t){this.pendingIdentities.add(t)}unmarkPending(t){this.pendingIdentities.delete(t)}markAsDeleted(t){this.deletedTargets.add(t)}unmarkAsDeleted(t){this.deletedTargets.delete(t)}createIdentity(t){return new r.OwnedIdentity({id:t,ownerId:this.authService.ensureUserId()})}constructor({audioApi:t,authService:e}){this.targets=new o.ObservableIdentityMap,this.sources=new o.ObservableIdentityMap,this.deletedTargets=new a.ObservableIdentitySet,this.pendingIdentities=new a.ObservableIdentitySet,this.api=t,this.authService=e,(0,s.makeAutoObservable)(this)}}},878741:(t,e,i)=>{i.d(e,{MusicMixProvider:()=>h});var s=i(331635),o=i(327813),a=i(127126),r=i(861420),n=i(220679),_=i(157539),l=i(71166),d=i(553580);let h=class{get(t){return this.entities.get(this.toEntityIdentity(t))}create(t,{audios:e=[],isSessionFeatureEnabled:i=!1}={}){const s=this.toEntityIdentity(t.identity);this.entitiesData.set(s,t);const o=new l.MusicMix(s,(()=>this.entitiesData.get(s)),{audios:e,audioApi:this.audioApi,audioProvider:this.trackProvider,isSessionFeatureEnabled:i});return this.entities.set(o.identity,o),o}toEntityIdentity(t){return new _.SingleIdentity(t)}constructor(t,e){this.audioApi=t,this.trackProvider=e,this.entities=new r.ObservableIdentityMap,this.entitiesData=new r.ObservableIdentityMap,(0,o.makeAutoObservable)(this)}};h=(0,s.__decorate)([a.scope.global(),(0,s.__metadata)("design:paramtypes",[n.AudioApi,d.MusicTrackAudioProvider])],h)},861420:(t,e,i)=>{i.d(e,{ObservableIdentityMap:()=>h});var s=i(434518),o=i(763812),a=i(331635),r=i(327813),n=(0,o._)("_identities"),_=(0,o._)("_ensureIdentity");let l=Symbol.iterator,d=Symbol.toStringTag;class h{get size(){return this.store.size}has(t){return this.store.has(t.fullId)}get(t){return this.store.get(t.fullId)}set(t,e){return(0,s._)(this,n)[n].set(t.fullId,t),this.store.set(t.fullId,e),this}delete(t){return(0,s._)(this,n)[n].delete(t.fullId),this.store.delete(t.fullId)}clear(){return(0,s._)(this,n)[n].clear(),this.store.clear()}forEach(t,e){this.store.forEach(((i,o)=>{t.call(e,i,(0,s._)(this,_)[_](o),this)}))}*keys(){for(const t of this.store.keys())yield(0,s._)(this,_)[_](t)}values(){return this.store.values()}*entries(){for(const[t,e]of this.store.entries())yield[(0,s._)(this,_)[_](t),e]}[l](){return this.entries()}get[d](){return"ObservableIdentityMap"}constructor(t){Object.defineProperty(this,_,{value:c}),Object.defineProperty(this,n,{writable:!0,value:void 0}),this.store=new Map,(0,s._)(this,n)[n]=new Map;for(const[e,i]of t??[])this.set(e,i);(0,r.makeObservable)(this)}}function c(t){const e=(0,s._)(this,n)[n].get(t);if(!e)throw new Error("IdentityMap inconsistency");return e}(0,a.__decorate)([r.observable,(0,a.__metadata)("design:type",Map)],h.prototype,"store",void 0)},192430:(t,e,i)=>{i.d(e,{ObservableIdentitySet:()=>a});var s=i(331635),o=i(327813);class a{get size(){return this.store.size}has(t){return this.store.has(t.fullId)}add(t){return this.store.set(t.fullId,t),this}delete(t){return this.store.delete(t.fullId)}clear(){return this.store.clear()}forEach(t,e){this.store.forEach((i=>{t.call(e,i,i,this)}))}values(){return this.store.values()}keys(){return this.values()}*entries(){for(const t of this.store.values())yield[t,t]}[Symbol.iterator](){return this.values()}get[Symbol.toStringTag](){return"ObservableIdentitySet"}constructor(t){this.store=new Map;for(const e of t??[])this.add(e);(0,o.makeObservable)(this)}}(0,s.__decorate)([o.observable,(0,s.__metadata)("design:type",Map)],a.prototype,"store",void 0)},220679:(t,e,i)=>{i.d(e,{AudioApi:()=>r});var s=i(331635),o=i(127126),a=i(609897);let r=class extends a.ApiNamespace{get namespace(){return"audio"}constructor(){super(...arguments),this.add=this.makeMethod("add"),this.delete=this.makeMethod("delete"),this.restore=this.makeMethod("restore"),this.createPlaylist=this.makeMethod("createPlaylist"),this.deletePlaylist=this.makeMethod("deletePlaylist"),this.savePlaylistAsCopy=this.makeMethod("savePlaylistAsCopy"),this.addToPlaylist=this.makeMethod("addToPlaylist"),this.removeFromPlaylist=this.makeMethod("removeFromPlaylist"),this.get=this.makeMethod("get"),this.getById=this.makeMethod("getById"),this.getPlaylistById=this.makeMethod("getPlaylistById"),this.getPlaylistByIdExtended=this.makeMethod("getPlaylistById"),this.editPlaylist=this.makeMethod("editPlaylist"),this.getAudioIdsBySource=this.makeMethod("getAudioIdsBySource"),this.getAudioPreviewUrl=this.makeMethod("getAudioPreviewUrl"),this.getSnippets=this.makeMethod("getSnippets"),this.getSearchSuggestions=this.makeMethod("getSearchSuggestions"),this.getStreamMixAudios=this.makeMethod("getStreamMixAudios"),this.search=this.makeMethod("search"),this.addDislike=this.makeMethod("addDislike"),this.removeDislike=this.makeMethod("removeDislike"),this.followRadioStation=this.makeMethod("followRadioStation"),this.unfollowRadioStation=this.makeMethod("unfollowRadioStation")}};r=(0,s.__decorate)([o.scope.global()],r)},854742:(t,e,i)=>{i.d(e,{Lottie:()=>n});var s=i(474848),o=i(8520),a=i(930095),r=i(31149);const n=({play:t,fallback:e,options:i,className:n,style:_,...l})=>{const{width:d,height:h}=i,{lottieContainerRef:c,lottieRendered:u}=(0,a.useLottie)({...i,className:r.default.canvas},{play:t});return(0,s.jsx)("div",{ref:c,...l,className:(0,o.classNames)(r.default.root,n),style:{..._,width:d??_?.width??"100%",height:h??_?.height??"100%"},children:(0,s.jsx)("div",{children:!u&&e})})}},157539:(t,e,i)=>{i.d(e,{SingleIdentity:()=>s});class s{get fullId(){return this.id}constructor(t){this.id=t.id}}},787654:(t,e,i)=>{i.d(e,{apiAudioToAudioTuple:()=>_});var s=i(7144),o=i(8520),a=i(496936),r=i(205504);const n=new WeakMap,_=(t,{useCache:e=!1}={})=>{if(!t)return null;if(e){const e=n.get(t);if(e)return e}const i=[t.id,t.owner_id,t.url||"",(0,s.clean)(t.title),(0,s.clean)(t.artist||t.performer||""),t.duration,t.album_id||0,0,"",t.lyrics_id||0,0,"",l(t),(0,a.getAudioHashesString)({addHash:t.access_key,editHash:t.access_key,actionHash:t.access_key,deleteHash:t.access_key,replaceHash:t.access_key,urlHash:t.access_key,restoreHash:t.access_key}),d(t),t.ads||{},(0,s.clean)(t.subtitle||""),t.main_artists||"",t.featured_artists||"",!!t.album&&[t.album?.owner_id,t.album?.id,t.album?.access_key],t.track_code||"",t.content_restricted||0,t.album_part_number||0,!0,t.access_key||"",t.audio_chart_info||!1,t.release_audio_id||""];return e&&n.set(t,i),i};function l(t){const{podcast_info:e}=t,i=Boolean(e);return{podcast:i,dislike:t.dislike,fave:i&&Boolean(e?.is_favorite)}}function d(t){const{podcast_info:e,album:i}=t;if(e){const t=e.cover;return t?.sizes&&(0,o.getPhotoSize)(t.sizes||[],(0,r.getImageMinWidth)(40))?.url||""}const s=i?.thumb;return s?s.sizes?(0,o.getPhotoSize)(s.sizes||[],(0,r.getImageMinWidth)(200))?.url||"":`${s.photo_300},${s.photo_135}`||"":""}},913246:(t,e,i)=>{i.d(e,{AUDIO_PLAYER_ADAPTER_HASHES_SEPARATOR:()=>s});const s="/"},496936:(t,e,i)=>{i.d(e,{getAudioHashesString:()=>o});var s=i(913246);const o=({addHash:t,editHash:e,actionHash:i,deleteHash:o,replaceHash:a,urlHash:r,restoreHash:n})=>[t||"",e||"",i||"",o||"",a||"",r||"",n||""].join(s.AUDIO_PLAYER_ADAPTER_HASHES_SEPARATOR)},316769:(t,e,i)=>{i.d(e,{makeStrictContext:()=>o});var s=i(296540);function o({name:t,defaultValue:e}){const i=(0,s.createContext)(e);function o(){const e=(0,s.useContext)(i);if(void 0===e)throw new Error(`Value for ${t}Context must be defined before call useContext`);return e}return i.displayName=`${t}Context`,o.displayName=`use${i.displayName}`,{Context:i,useContext:o}}},44049:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlock:()=>d});var s=i(474848),o=i(296540),a=i(456921),r=i(814618),n=i(83605),_=i(56050),l=i(379183);const d=(0,a.observer)((t=>{const[e]=(0,o.useState)((()=>{const e=new r.AudioCatalogMusicMixBlockModel;return e.setMix({type:_.AudioListType.MusicMix,contentType:l.AudioType.MusicTrack,identity:{id:t.id},title:t.title}),e}));return(0,s.jsx)(n.AudioCatalogMusicMixBlockComponent,{...t,loading:e.loading,playing:e.isPlaying,onTogglePlayClick:()=>{e.togglePlay()}})}))},290947:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockApplication:()=>l});var s=i(474848),o=i(505954),a=i(476726),r=i(600345),n=i(44049),_=i(462387);const l=({needShowOnboarding:t,...e})=>{const i=(0,a.partConfigEnabled)("audio_mobx")&&(0,a.partConfigEnabled)("audio_mobx_music_mix");return(0,s.jsx)(o.AppRootProvider,{children:(0,s.jsx)(_.AudioCatalogMusicMixBlockContext.Provider,{value:{needShowOnboarding:t||!1},children:i?(0,s.jsx)(n.AudioCatalogMusicMixBlock,{...e}):(0,s.jsx)(r.AudioCatalogMusicMixBlockEffector,{...e})})})}},304704:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockComponent:()=>d});var s=i(474848),o=i(8520),a=i(296540),r=i(923594),n=i(854742),_=i(538533),l=i(497063);function d({id:t,backgroundAnimationUrl:e,description:i,header:d,style:h,playing:c,loading:u,onTogglePlayClick:p}){const{width:m,height:g}=(0,a.useMemo)((()=>{switch(h){case"default":return{width:910,height:248};case"secondary":return{width:870,height:208}}}),[h]);return(0,s.jsxs)("div",{className:(0,o.classNames)(l.default.root,l.default[h]),children:[(0,s.jsx)("div",{className:l.default.wrap,children:(0,s.jsx)(r.Placeholder,{mode:"default"===h?"default":"overlay",icon:(0,s.jsx)(_.AudioCatalogMusicMixBlockStateButtonContainer,{state:c?"play":"pause",loading:u&&!c,ariaLabelPlay:"play",ariaLabelPause:"pause",style:h,onClick:p}),header:d,children:i})}),(0,s.jsx)(n.Lottie,{options:{width:m,height:g,lazyLoading:!0,loop:!0,upscale:!0,autoplay:!1,group:t,animationUrl:e},play:c})]})}},729016:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockComponent:()=>s.AudioCatalogMusicMixBlockComponent});var s=i(304704)},321696:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockStateButton:()=>u});var s=i(474848),o=i(296540),a=i(612940),r=i(595154),n=i(234337),_=i(828902),l=i(826965),d=i(529019);const h={play:l.Icon28Pause,pause:d.Icon28Play};function c({state:t,loading:e,style:i,onClick:o,ariaLabelPlay:l,ariaLabelPause:d}){const c=h[t],u="play"===t?l:d;return(0,s.jsx)(a.RoundedGroup.Item,{mode:"default"===i?"shadow":"overlay",children:(0,s.jsx)(r.IconButton,{className:(0,n.getColorClass)("color_icon_primary"),onClick:o,"aria-label":u,children:e?(0,s.jsx)(_.Spinner,{size:"regular"}):(0,s.jsx)(c,{})})})}const u=(0,o.memo)(c)},493010:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockStateButton:()=>s.AudioCatalogMusicMixBlockStateButton});var s=i(321696)},83605:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockComponent:()=>s.AudioCatalogMusicMixBlockComponent,AudioCatalogMusicMixBlockStateButton:()=>o.AudioCatalogMusicMixBlockStateButton});var s=i(729016),o=i(493010)},109898:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockStateButtonContainer:()=>l});var s=i(474848),o=i(462387),a=i(83605),r=i(296540),n=i(592113);const _=n.AudioCatalogMusicMixEmitter.ensure();function l(t){const{needShowOnboarding:e}=(0,o.useAudioCatalogMusicMixBlockContext)(),[i,l]=(0,r.useState)(e),d=()=>{i?_.emit(n.AudioCatalogMusicMixBlockEventType.AudioRecomsOnboardingShowRequested,{onHideOnboarding:()=>{l(!1),t.onClick?.()}}):t.onClick?.()};return i?(0,s.jsx)(a.AudioCatalogMusicMixBlockStateButton,{...t,state:"pause",loading:!1,onClick:d}):(0,s.jsx)(a.AudioCatalogMusicMixBlockStateButton,{...t,onClick:d})}},538533:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockStateButtonContainer:()=>s.AudioCatalogMusicMixBlockStateButtonContainer});var s=i(109898)},462387:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockContext:()=>o,useAudioCatalogMusicMixBlockContext:()=>a});var s=i(316769);const{Context:o,useContext:a}=(0,s.makeStrictContext)({name:"AudioCatalogMusicMixBlockContext",defaultValue:{needShowOnboarding:!1}})},439450:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockEffector:()=>n});var s=i(474848),o=i(293721),a=i(83605),r=i(693757);function n({id:t,backgroundAnimationUrl:e,description:i,header:n,title:_,style:l}){const d=(0,o.useUnit)(r.audioCatalogVkMixBlockService.$isPlaying),h=(0,o.useUnit)(r.audioCatalogVkMixBlockService.playAudioMixFx),c=(0,o.useUnit)(r.audioCatalogVkMixBlockService.$loading);return(0,s.jsx)(a.AudioCatalogMusicMixBlockComponent,{id:t,backgroundAnimationUrl:e,description:i,header:n,style:l,playing:d,loading:c,onTogglePlayClick:()=>{h({id:t,title:_})}})}},600345:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockEffector:()=>s.AudioCatalogMusicMixBlockEffector});var s=i(439450)},262375:(t,e,i)=>{i.d(e,{createAudioCatalogVkMixBlockService:()=>h});var s=i(32489),o=i(630082),a=i(380948),r=i(297420),n=i(539217),_=i(183753),l=i(540401),d=i(476726);function h(){const t=(0,s.createDomain)("audio/audioPage/catalog/VkMixBlockService"),e=(0,l.ensureAudioPlayerService)(),i=t.createEvent(),h=(0,s.restore)(i,null),c=(0,o.equals)(e.$currentPlaylist.map((t=>t?.getType?.())),n.PLAYLIST_TYPE_VKMIX),u=(0,a.and)(e.$isPlaying,c),p=(0,s.attach)({source:[u],effect:async([t],{id:s,title:o})=>{const a=await e.getCurrentPlaylistFx();if(!t&&!a||!t&&a?.getType()!==n.PLAYLIST_TYPE_VKMIX)try{const t=new n.AudioMixPlaylist({id:s,title:o,items:[],context:n.PLAYLIST_CONTEXT_VKMIX});await t.ensureAt(0);const a=new _.AudioMixPlaylistAdapter(t),r=a.getAudioAt(0);if(!r)throw new Error("First audio in VK Mix not found");i(t),await e.playFx({audio:r,playlist:a,context:n.PLAYLIST_CONTEXT_VKMIX})}catch(t){throw new Error("Failed to initialize VK Mix playlist")}else!t&&a?.getType()===n.PLAYLIST_TYPE_VKMIX&&a?e.playFx():e.pauseFx()}}),m=(0,a.and)(p.pending,(0,r.not)(u)),g=(0,s.attach)({source:h,effect(t){if(!t)throw new Error("Mix not exists");t.launchSession()}}),b=(0,s.attach)({source:h,effect(t){if(!t)throw new Error("Mix not exists");t.breakSession()}});return(0,s.sample)({clock:c,filter:t=>!!(0,d.partConfigEnabled)("audio_recom_playlists_starts_with_last_played_audio_web")&&t,target:g}),(0,s.sample)({clock:c,filter:t=>!!(0,d.partConfigEnabled)("audio_recom_playlists_starts_with_last_played_audio_web")&&!t,target:b}),{$isPlaying:u,$loading:m,playerService:e,playAudioMixFx:p}}},693757:(t,e,i)=>{i.d(e,{audioCatalogVkMixBlockService:()=>s});const s=(0,i(262375).createAudioCatalogVkMixBlockService)()},441177:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixEmitter:()=>a});var s=i(919225),o=i(942451);class a extends s.Emitter{constructor(){super()}}a.ensure=(0,o.makeSharedState)("AudioCatalogMusicMixEmitter",(()=>new a),{version:1})},602004:(t,e,i)=>{var s;i.d(e,{AudioCatalogMusicMixBlockEventType:()=>s}),function(t){t.AudioRecomsOnboardingShowRequested="audioRecomsOboardingShowRequested"}(s||(s={}))},592113:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockEventType:()=>s.AudioCatalogMusicMixBlockEventType,AudioCatalogMusicMixEmitter:()=>o.AudioCatalogMusicMixEmitter});var s=i(602004),o=i(441177)},628544:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockApplication:()=>s.AudioCatalogMusicMixBlockApplication,AudioCatalogMusicMixBlockEventType:()=>o.AudioCatalogMusicMixBlockEventType,AudioCatalogMusicMixEmitter:()=>o.AudioCatalogMusicMixEmitter});i(44049);var s=i(290947),o=i(592113)},822988:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockModel:()=>d});var s=i(327813),o=i(878741),a=i(327527),r=i(16230),n=i(514640),_=i(476726),l=i(689938);class d{setMix(t){const e=(0,_.partConfigEnabled)("audio_recom_playlists_starts_with_last_played_audio_web"),{mixProvider:i}=this;this._mix=i.get(t.identity)??i.create(t,{isSessionFeatureEnabled:e}),this.ap.subscribe(n.AudioPlayerEventType.PLAYLIST_CHANGED,(()=>{(0,_.partConfigEnabled)("audio_recom_playlists_starts_with_last_played_audio_web")&&this._mix&&(this.isMixInQueue?this._mix.launchSession():this._mix.breakSession())}))}get mix(){return this._mix}ensureMix(){const{mix:t}=this;if(!t)throw new Error("MusicMix is not defined");return t}get loading(){return!1}get isPlaying(){return this.isMixInQueue&&this.ap.isPlaying()}get isPaused(){return this.isMixInQueue&&!this.ap.isPlaying()}get isMixInQueue(){const{mixAdapter:t}=this,e=this.ap.getCurrentPlaylist();return!(!e||!t)&&e.getType()===t.type}async togglePlay(){const{ap:t}=this;this.isPlaying?t.pause():this.isPaused?t.resume():this.play()}async play(){const t=this.ensureMix(),{mixAdapter:e}=this;if(!e)throw new Error("MusicMix adapter is not defined");await t.ensureAt(0);const i=e.getAudioAt(t.length-1);if(!i)throw new Error("Last audio in VK Mix not found");await this.ap.playList({audio:i,playlist:e,context:e.context})}get mixAdapter(){const{mix:t}=this;return t&&new r.MusicMixAdapter(t)}constructor(){this.ap=(0,a.getAudioPlayer)(),this.mixProvider=(0,l.ensureDIRootWebContainer)().resolve(o.MusicMixProvider),this._mix=null,(0,s.makeAutoObservable)(this)}}},814618:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockModel:()=>s.AudioCatalogMusicMixBlockModel});var s=i(822988)}}]);try{stManager.done("dist/web/chunks/3757e0b6.c7d16978.js")}catch(t){}