"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[47694],{946076:(e,t,i)=>{i.r(t),i.d(t,{UIGallery:()=>h,UI_GALLERY_CLASSNAME:()=>d.UI_GALLERY_CLASSNAME,UI_GALLERY_CONTENT_CLASSNAME:()=>d.UI_GALLERY_CONTENT_CLASSNAME,UI_GALLERY_INNER_CLASSNAME:()=>d.UI_GALLERY_INNER_CLASSNAME,uiGetGallery:()=>_});var o=i(942451),n=i(7144),s=i(663878),r=i(317412),l=i(879007),a=i(452314),d=i(374036);const c=(0,o.makeSharedState)("ui-gallery",(()=>({galleries:{},incIndex:0})),{version:0});function _(e){const t=(0,a.domData)((0,a.ge)(e),"gallery-id");return t&&c().galleries[t]}class h{_checkSizesAndUpdate(){return 0!==this._width&&0!==this._itemWidth||(this._width=Math.round((0,a.getSize)(this._el)[0]),this._itemWidth=(0,a.getSize)(this._items[0])[0],this._itemFullWidth=this._itemWidth+this._itemOffset),!(0===this._width||0===this._itemWidth)}_initScroll(){(this._opts.scrollX||this._opts.scrollY)&&(this._opts.isModernTransitionsEnabled||(0,r.addEvent)(this._innerCont,"DOMMouseScroll wheel",this._onWheelScroll.bind(this)))}_initArrows(){this._opts.noArrows?(0,a.addClass)(this._el,"ui_gallery_no_arrows"):(this._leftArrow=(0,a.geByClass1)("ui_gallery__arrow_left",this._el),this._rightArrow=(0,a.geByClass1)("ui_gallery__arrow_right",this._el),this._arrowWidth=(0,a.getSize)(this._leftArrow)[0],this._opts.isModernTransitionsEnabled?((0,r.addEvent)(this._leftArrow,"click",this._slide.bind(this,-1,void 0,{eventName:"arrow"})),(0,r.addEvent)(this._rightArrow,"click",this._slide.bind(this,1,void 0,{eventName:"arrow"}))):((0,r.addEvent)(this._leftArrow,"click",this._legacySlide.bind(this,-1,void 0,{eventName:"arrow"})),(0,r.addEvent)(this._rightArrow,"click",this._legacySlide.bind(this,1,void 0,{eventName:"arrow"}))),(0,r.addEvent)(this._leftArrow,"mouseover",this._onArrowMouseOver.bind(this,"left")),(0,r.addEvent)(this._leftArrow,"mouseout",this._onArrowMouseOut.bind(this)),(0,r.addEvent)(this._rightArrow,"mouseover",this._onArrowMouseOver.bind(this,"right")),(0,r.addEvent)(this._rightArrow,"mouseout",this._onArrowMouseOut.bind(this)))}_onWheelScroll(e){let t;if("wheel"==e.type)if(Math.abs(e.deltaY)>Math.abs(e.deltaX)){if(!this._opts.scrollY)return;t=-e.deltaY}else{if(!this._opts.scrollX)return;t=-e.deltaX}else if(void 0!==e.wheelDeltaY){if(!this._opts.scrollY)return;t=e.wheelDeltaY}else if(void 0!==e.wheelDelta)t=e.wheelDelta;else{if(!e.detail||1!==e.axis)return;t=-e.detail}t=this._scroll.rtlSame?-t:t,Math.abs(t)>=120&&(t=74*Math.max(-1,Math.min(1,t))),this._innerCont.scrollLeft-=t,this._checkItemsAfterScroll(this._innerCont.scrollLeft),(0,r.cancelEvent)(e)}_getScrollParams(){this._opts.shouldCheckGalleryViewed&&this._checkSizesAndUpdate();const e=this._width-2*this._arrowWidth,t=this._itemFullWidth>e;return{isItemBiggerThanWidth:t,scrollDistance:t?this._itemFullWidth:e}}_legacySlide(e,t,i){const{scrollDistance:o,isItemBiggerThanWidth:n}=this._getScrollParams();let l=this._innerCont.scrollLeft+(this._scroll.rtlSame?-e:e)*o;const d=this._innerCont.scrollWidth-this._width;this._scroll.negative?(l=Math.min(l,0),l=Math.abs(l)):l=Math.max(0,l),l=Math.min(d,l);const c=this._scroll.negative||this._scroll.rtlSame?-e:e;if(c>0&&l<d){l=Math.floor(l/this._itemFullWidth)*this._itemFullWidth}else if(c<0&&l>0){l=(n?Math.ceil(l/this._itemFullWidth):Math.floor(l/this._itemFullWidth))*this._itemFullWidth}if(this._opts.isFullSizeSlide&&(l=(this._visible.left+e)*this._itemFullWidth),0===l||l===d){const t=this._innerCont.scrollWidth;(0,a.addClass)(this._inner,"ui_gallery__inner_shift_instant"),this._onArrowMouseOut(),l&&(l+=e*(this._innerCont.scrollWidth-t))}this._scroll.negative&&(l=-l),(0,s.animate)(this._innerCont,{scrollLeft:l},{duration:Math.abs(this._innerCont.scrollLeft-l)+50,transition:s.Fx.Transitions.easeOutCubic}),this._checkItemsAfterScroll(l),setTimeout((()=>(0,a.removeClass)(this._inner,"ui_gallery__inner_shift_instant")),0),this._opts?.onSlide?.(e,{eventName:i?.eventName}),t&&(0,r.cancelEvent)(t)}_updateShift(e){let t=this._shift+e;const i=this._inner.scrollWidth-this._inner.clientWidth;t>i&&(t=i),t<0&&(t=0),this._shift=t}_slide(e,t,i){const{scrollDistance:o}=this._getScrollParams();this._updateShift(e*o),this._inner.style.transform=`translate3d(${-1*this._shift}px, 0, 0)`,this._checkItemsAfterScroll(this._shift),this._opts?.onSlide?.(e,{eventName:i?.eventName}),t&&(0,r.cancelEvent)(t)}_checkItemsAfterScroll(e,t){if(this._scroll.negative&&(e=Math.abs(e)),(!this._opts.shouldCheckGalleryViewed||this._visible.isGalleryViewed)&&(!this._opts.shouldCheckGalleryViewed||this._checkSizesAndUpdate())){if(this._opts.markOutside||this._opts.onViewItem){const i=this._itemWidth/3,o=(this._scroll.backward?this._inner.scrollWidth-this._width-e:e)-this._scrollOffset,n=e&&Math.floor(o/this._itemFullWidth),s=n*this._itemFullWidth+2*i;let r;r=this._scroll.backward?e+this._width<this._inner.scrollWidth-s:e>s;const d=Math.min(this._items.length-1,Math.floor((o+this._width)/this._itemFullWidth)),c=d*this._itemFullWidth+2*i;let _;if(_=this._scroll.backward?e>this._inner.scrollWidth-c:e+this._width<c,this._opts.onViewItem){const e=r?Math.min(this._items.length-1,n+1):n,i=_?Math.max(0,d-1):d;if(t||e!==this._visible.left||i!==this._visible.right){for(let o=e;o<=i;o++)(this._visible.left<0||t&&!(0,l.inArray)(this._items[o],this._visible.items)||o<this._visible.left||o>this._visible.right)&&this._opts.onViewItem(this._items[o],o);this._visible.left=e,this._visible.right=i,this._visible.items=this._items.slice(e,i+1)}}this._opts.markOutside&&(t?((0,a.geByClass)("ui_gallery_item_outside",this._inner).forEach((e=>{(0,a.removeClass)(e,"ui_gallery_item_outside")})),this._outside.left=-1,this._outside.right=-1):((n!==this._outside.left||!r)&&this._outside.left>=0&&((0,a.removeClass)(this._items[this._outside.left],"ui_gallery_item_outside"),this._outside.left=-1),(d!==this._outside.right||!_)&&this._outside.right>=0&&((0,a.removeClass)(this._items[this._outside.right],"ui_gallery_item_outside"),this._outside.right=-1)),r&&n!==this._outside.left&&((0,a.addClass)(this._items[n],"ui_gallery_item_outside"),this._outside.left=n),_&&d!==this._outside.right&&((0,a.addClass)(this._items[d],"ui_gallery_item_outside"),this._outside.right=d))}if(!this._opts.noArrows){const t=e>0,i=e+this._width<this._inner.scrollWidth;(0,a.toggleClass)(this._leftArrow,"ui_gallery__arrow_visible",this._scroll.rtl&&!this._scroll.backward?i:t),(0,a.toggleClass)(this._rightArrow,"ui_gallery__arrow_visible",this._scroll.rtl&&!this._scroll.backward?t:i)}(!this._scroll.backward&&this._inner.scrollWidth-e-this._width<1e3||this._scroll.backward&&e<1e3)&&this._onLoadMore()}}_onArrowMouseOver(e){this._inner.classList.add(`ui_gallery__inner_shift_${e}`)}_onArrowMouseOut(){this._inner.classList.remove("ui_gallery__inner_shift_left"),this._inner.classList.remove("ui_gallery__inner_shift_right")}_onLoadMore(){!this._opts.onLoadMore||this._loadingMore||this._finised||(this._loadingMore=!0,this._opts.onLoadMore(this._items.length))}addMore(e,t){e=e||[],this.addItems(e),this._finised=!!t||!e.length,this._loadingMore=!1}addItems(e,t){if((e=e||[]).length){const i=t>=0&&t<this._items.length?this._items[t]:null;e.forEach((e=>{i?(0,a.domInsertBefore)(e,i):this._inner.appendChild(e)})),this.refresh()}}destroy(){(0,r.removeEvent)(this._innerCont),(0,r.removeEvent)(this._leftArrow),(0,r.removeEvent)(this._rightArrow),(0,a.domData)(this._el,"gallery-id",null),delete c().galleries[this._id],this._opts.onDestroy&&this._opts.onDestroy(),(0,a.re)(this._el)}removeItem(e){return(0,n.isNumeric)(e)&&(e=this._items[e]),!(!e||!(0,l.inArray)(e,this._items))&&((0,a.re)(e),this.refresh(),this._items.length||this.destroy(),!0)}refresh(){this._width=Math.round((0,a.getSize)(this._el)[0]),this._items=(0,a.geByClass)("ui_gallery_item",this._el),this._checkItemsAfterScroll(this._innerCont.scrollLeft,!0)}scrollToDirection(e){this._opts.isModernTransitionsEnabled?this._slide(e,void 0,{eventName:"bullet"}):this._legacySlide(e,void 0,{eventName:"bullet"})}getItems(){return this._items}getVisibleItems(){return this._visible.items.map(((e,t)=>[e,this._visible.left+t]))}setGalleryViewed(){this._visible.isGalleryViewed=!0,this._checkItemsAfterScroll(this._innerCont.scrollLeft)}constructor(e,t){if(!e)throw new Error("No element was provided for UIGallery");if(!(e=(0,a.ge)(e)).classList.contains(d.UI_GALLERY_CLASSNAME))throw new Error("Provided incorrect element for UIGallery");const i=_(e);if(i)return i;this._opts=(0,l.extend)({markOutside:!1,scrollY:!0,scrollX:!0,noArrows:!1,isFullSizeSlide:!1,isModernTransitionsEnabled:!1},t),this._id=c().incIndex,c().incIndex+=1,this._el=e,this._width=Math.round((0,a.getSize)(this._el)[0]),this._items=(0,a.geByClass)("ui_gallery_item",this._el),this._itemWidth=(0,a.getSize)(this._items[0])[0],this._itemOffset=(0,l.intval)((0,a.getStyle)(this._items[0],vk.rtl?"marginLeft":"marginRight")),this._scrollOffset=(0,l.intval)((0,a.getStyle)(this._items[0],"marginLeft")),this._itemFullWidth=this._itemWidth+this._itemOffset,this._innerCont=(0,a.geByClass1)(d.UI_GALLERY_CONTENT_CLASSNAME,this._el),this._inner=(0,a.geByClass1)(d.UI_GALLERY_INNER_CLASSNAME,this._el),this._opts.isModernTransitionsEnabled&&(this._shift=0,this._inner.classList.add("ui_gallery__inner--withTransitions")),this._scroll=function(){const e={rtl:!1,backward:!1,delta:1,negative:!1,rtlSame:!1};if(!vk.rtl)return e;if(!cur._scrollInfo){const t=(0,a.se)('<div style="position: fixed; left: -1000px; width: 0; overflow: scroll">x</div>'),i=document.querySelector("#content");i?.appendChild(t);const o=t.scrollLeft;e.rtl=vk.rtl,e.backward=o>0,t.scrollLeft=1e3,e.delta=t.scrollLeft===o?-1:1,e.negative=!e.backward&&e.delta<0,e.rtlSame=e.rtl&&!e.backward&&!e.negative,(0,a.re)(t),cur._scrollInfo=e}return cur._scrollInfo}(),this._loadingMore=!1,this._finised=!1,this._visible={left:-1,right:-1,items:[],isGalleryViewed:!1},this._outside={left:-1,right:-1,timer:null},this._initScroll(),this._initArrows(),(0,a.domData)(this._el,"gallery-id",this._id),c().galleries[this._id]=this,this._checkItemsAfterScroll(this._innerCont.scrollLeft,!0)}}},947717:(e,t,i)=>{i.r(t),i.d(t,{Index:()=>N,showJoinBox:()=>L,showQuickLoginBox:()=>A});var o=i(307188),n=i(663878),s=i(691004),r=i(772546),l=i(317412),a=i(248298),d=i(20025),c=i(810903),_=i(610989),h=i(879007),u=i(452314),m=i(581903),g=i(703797),v=i(551393),w=i(396675),f=i(122348),S=i(946076),p=i(933052),y=i(984869),E=i(790156),I=i(476726),b=i(503552);function A(e){const t={act:"box"};return e&&(t.flow_source=e),(0,d.showBox)("al_login.php",t),!1}function L(e){const t={act:"box",from:window.nav.strLoc};return e&&(t.flow_source=e),(0,d.showBox)("join.php",t),!1}let k="",C=[],T=[];const N={initNew:function(){(0,u.$$)(".index_login .big_text").forEach((e=>{(0,s.placeholderInit)(e)})),setTimeout((()=>(0,u.elfocus)("index_email")),0);let e=(0,u.ge)("index_login_form"),t=(0,u.ge)("index_email"),i=(0,u.ge)("index_pass");e&&t&&i&&(e.onsubmit=function(){if(!window.submitQuickLoginForm)return!0;if(!(0,h.trim)(t.value))return(0,a.notaBene)(t),!1;if(!(0,h.trim)(i.value))return(0,a.notaBene)(i),!1;const e=(0,w.isEmail)(t.value)?m.RegistrationItemEventTypes.INPUT_EMAIL:m.RegistrationItemEventTypes.INPUT_PHONE;return g.registrationItemStat.logEvent(e,cur.eventScreen,void 0,{force:!0}),submitQuickLoginForm(t.value,i.value,{prg:"index_login_button",params:{expire_input:(0,u.val)("index_expire_input")}}),!1},t.oninput=function(){N.isLoginInputDirty||(g.registrationItemStat.logEvent(m.RegistrationItemEventTypes.LOGIN_TAP,m.EventScreens.START,void 0,{force:!0}),N.isLoginInputDirty=!0)},i.oninput=function(){N.isPasswordInputDirty||(g.registrationItemStat.logEvent(m.RegistrationItemEventTypes.PASSWORD_TAP,m.EventScreens.START,void 0,{force:!0}),N.isPasswordInputDirty=!0)},window.loginByCredential&&(t.onclick=loginByCredential,i.onclick=loginByCredential),(0,v.initVKComboIndexPromo)(),this.initGallery(),this.initReLoginHandlers())},initGallery:function(){const e=document.querySelector("#user_gallery");e&&(cur.userGallery=new S.UIGallery(e))},initReLoginHandlers:function(){window.onReLoginDone=function(e){location.href=e},window.onReLoginFailed=function(e){-1===e&&(location.href=location.href.replace(/^http:/,"https:"))}},loadSavedUsers(){const e=document.querySelector("#index_saved_users");e&&(0,p.login)("connect_get_saved_users").then((t=>t&&t.user_ids&&t.user_ids.length&&t.auth_hash?(k=t.auth_hash,T=t.hashes,C=t.user_ids,new Promise(((i,o)=>{ajax.post("/al_index.php?act=a_render_users",{user_ids:t.user_ids,hashes:t.hashes},{onDone:t=>{e.insertAdjacentHTML("afterend",t),e.remove(),this.initGallery(),i()},onFail:e=>{o(e)}})}))):Promise.reject())).catch((()=>{e.remove()}))},authSavedUser(e){(0,I.partConfigEnabled)("vkid_add_app_id_to_stats")?(0,y.logSavedUsersAuthStart)(E.AuthAppId.VK):(0,y.logSavedUsersAuthStart)();const t=btoa(location.protocol+"//"+location.host+(0,b.getToParam)());return(0,p.login)("connect_auth_saved_users",{user_id:e,auth_hash:k,from:"carousel",to:t}).then((e=>{if(!e.url)return Promise.reject();location.href=e.url})).catch((()=>{ajax.post("/join.php?act=connect_saved",{user_id:e,auth_hash:k,to:t,user_hash:T[C.indexOf(e)]})})),!1},deleteSavedUser(e,t,i,o){(0,y.logSavedUsersDropAccount)(),(0,p.login)("connect_delete_saved_users",{user_id:e,auth_hash:k});const n=(0,I.partConfigEnabled)("vkidexp_1823_fix_deleted_selector")?i.currentTarget.parentNode:o;return cur.userGallery&&cur.userGallery.removeItem(n),(0,l.cancelEvent)(i)},initVkId:function(e){this.initReLoginHandlers(),"old"===e.mode?this.initGallery():this.loadSavedUsers();const t=document.querySelector(".index_rcolumn--vkid");t&&(0,f.initVkIdForm)(t,e.source||"main",e)},showRegTT:function(e,t){let i,o="INPUT"===e.tagName,n=e;(!o&&(i=(0,u.geByClass1)("selector_table",e))||!o&&(i=(0,u.geByClass1)("radiobtn",e)))&&(n=i);let s=function(){(0,c.showTooltip)(n,{text:t,dir:"right",width:320,typeClass:"ij_tt",shift:[335,-(0,u.getSize)(n)[1]/2],hasover:1,nohideover:1,onCreate:function(){(0,l.removeEvent)(n,"mouseout"),o&&(n.onblur=function(){n.tt&&n.tt.hide&&n.tt.hide()})}})};o?(e.onfocus=s,(0,a.notaBene)(e)):(s(),(0,h.each)((0,u.geByClass)("selector_table",e),(function(e,t){(0,a.notaBene)(t)})))},showLoginBox(e,t){if(!t||"Enter"===t.code)return(0,d.showBox)("al_login.php",{act:"auth_box",ul:e},{params:{hideButtons:!0,bodyStyle:"padding: 44px 25px;"}}),!1},showLoginBoxWithStats(e,t){const i=document.querySelector("#index_save_user_checkbox"),o=i?.checked?1:0;return g.registrationItemStat.logFieldInteraction(m.RegistrationFieldItemNames.SAVED_AUTHORIZATION_ON,String(o)),g.registrationItemStat.logEvent(m.RegistrationItemEventTypes.SCREEN_PROCEED,m.EventScreens.NOWHERE,m.EventScreens.START_PROCEED_AS,{force:!0}),g.registrationItemStat.logEvent(m.RegistrationItemEventTypes.ADD_ACCOUNT_TO_SAVED_START,m.EventScreens.START_PROCEED_AS,m.EventScreens.NOWHERE,{force:!0}),N.showLoginBox(e,t)},showQuickLoginBox:A,showJoinBox:L,deleteRecentAccount:function(e,t,i,o,n){return window.tooltips&&tooltips.hideAll(),ajax.post("/al_login.php?act=a_delete_recent_account",{mid:t,hash:i},{onDone:function(){cur.userGallery&&cur.userGallery.removeItem(n)}}),(0,l.cancelEvent)(o)},generateDays:function(e,t){let i=[[0,_.getLang("index_sel_bday")]],n=(0,o.getLastDay)(e,t);for(let e=1;e<=n;++e)i.push([e,e+""]);return i},updateDays:function(e,t,i){i||(i=cur.uiBday),i.val()>(0,o.getLastDay)(e,t)&&i.clear(),i.setData(N.generateDays(e,t).slice((0,h.intval)(cur.options.bday)?1:0))},fbCheck:function(e,t,i){window.fbAsyncInit=function(){FB.init({appId:e,xfbml:!0,version:"v2.7"});let o="_box"===t;i||(i=(0,u.ge)("index_fbcontinuewithsign"+(t||""))),(0,u.setStyle)(i,{opacity:0,height:0,overflow:"hidden"}),(0,u.show)(i),FB.Event.subscribe("xfbml.render",(()=>{(0,n.animate)(i,{height:o?79:55,opacity:1},200)}))},window.FB&&window.FB.init?window.fbAsyncInit():function(e,t,i){let o,n=e.getElementsByTagName(t)[0];e.getElementById(i)||(o=e.createElement(t),o.id=i,o.src="//connect.facebook.net/"+cur.fbLocale+"/sdk.js",n.parentNode.insertBefore(o,n))}(document,"script","facebook-jssdk")},fbJoin:function(e,t){cur.fbContext=e,cur.fbLoginButton=t,g.registrationItemStat.logFieldInteraction(m.RegistrationFieldItemNames.FACEBOOK_REGISTRATION,m.EventFieldValues.REGISTERED_VIA_FB),g.registrationItemStat.logEvent(m.RegistrationItemEventTypes.SCREEN_PROCEED,m.EventScreens.START,m.EventScreens.OAUTH_FB,{force:!0}),(0,r.setCookie)("remixfbstate",cur.fbState,30,null,"None",!1);let i=location.protocol+"//"+location.host+"/join?act=fb_sign",o=encodeURIComponent(i),n="https://graph.facebook.com/v3.3/oauth/authorize?client_id="+cur.fbApp+"&redirect_uri="+o+"&scope=email,user_birthday&display=popup&state="+cur.fbState,s=void 0!==window.screenX?window.screenX:window.screenLeft,l=void 0!==window.screenY?window.screenY:window.screenTop,a=void 0!==window.outerWidth?window.outerWidth:document.body.clientWidth,d=void 0!==window.outerHeight?window.outerHeight:document.body.clientHeight-22,c=parseInt(s+(a-640)/2,10),_=parseInt(l+(d-340)/2.5,10);return window.open(n,"fb_sign","width=640,height=340,left="+c+",top="+_),!1},fbFinish:function(e){e.error?(g.registrationItemStat.logFieldInteraction(m.RegistrationFieldItemNames.FACEBOOK_REGISTRATION,m.EventFieldValues.REGISTERED_VIA_FB),g.registrationItemStat.logEvent(m.RegistrationItemEventTypes.SCREEN_PROCEED,m.EventScreens.OAUTH_FB,m.EventScreens.FACEBOOK_REGISTRATION_FAILED,{force:!0}),setTimeout((0,d.showFastBox)(_.getLang("global_error"),e.error).hide,2e3)):e.date&&((0,a.lockButton)(cur.fbLoginButton||(0,u.ge)("index_fb"+(cur.fbContext||""))),nav.go("/join?act=fb_start"))}}},551393:(e,t,i)=>{i.d(t,{initVKComboIndexPromo:()=>s});var o=i(823875),n=i(253693);function s(){(0,o.tq)().setInteractiveHandler("IndexComboPromo/register",(e=>{const{source:t}=e.payload.dataAttrs||{};n.Unauthorized.showMoreBox(null,0,t)}))}},24735:(e,t,i)=>{i.d(t,{initJoinForm:()=>u});var o=i(248298),n=i(452314),s=i(850101),r=i(691004),l=i(357889),a=i(503552),d=i(581903),c=i(703797),_=i(258643);const h="join_form_sex";function u(e,t){const{from:i,bdateMonths:u,bdateYears:m,proceedAs:g,fbApp:v,fbState:w,fbLocale:f,ref:S,values:p={},onSignInClick:y,onNotNowClick:E}=t,I=window.cur.options||{},b=I.bday||0,A=I.bmonth||0,L=I.byear||0;let k;k="invite"===S?d.EventScreens.REGISTRATION_INVITE_CONFIRM:g?d.EventScreens.START_PROCEED_AS:"box"===S?d.EventScreens.START_BOX:d.EventScreens.START,window.cur.eventScreen=k,c.registrationItemStat.logEvent(d.RegistrationItemEventTypes.SCREEN_PROCEED,d.EventScreens.NOWHERE,k,{force:!0});const C=e.querySelector(".JoinForm__error"),T=e.querySelector('.JoinForm__textInput[name="first_name"]'),N=e.querySelector('.JoinForm__textInput[name="last_name"]'),x=e.querySelector(".JoinForm__birthdateDayInput"),F=e.querySelector(".JoinForm__birthdateMonthInput"),R=e.querySelector(".JoinForm__birthdateYearInput"),B=e.querySelector(".JoinForm__sex"),O=e.querySelectorAll(".JoinForm__sexRadio"),M=e.querySelector(".JoinForm__birthdate"),P=e.querySelector(".JoinForm__submitButton"),D=e.querySelector(".JoinForm__facebookLogin"),U=e.querySelector(".JoinForm__facebookLogin .FacebookLogin__button"),W=e.querySelector(".JoinForm__signIn"),G=e.querySelector(".JoinForm__notNowLink");let V,q,j;if(!T||!N||!P)return;const J=()=>{if(_.FlatButton.isLocked(P))return;const e={fname:T.value.trim(),lname:N.value.trim(),bday:V.val(),bmonth:q.val(),byear:j.val(),from:i,frm:1,event_screen:k};(0,n.isVisible)(B)&&(e.sex=Number((0,o.radioval)(h))||0),window.tooltips&&window.tooltips.hideAll();const t=(e,t)=>{e&&t&&window.Index.showRegTT(e,t)};C&&(C.innerHTML=""),window.ajax.post("join.php?act=start",e,{onDone:(e,i)=>{switch(e){case"first_name":return t(T,i),void(0,o.notaBene)(T);case"last_name":return t(N,i),void(0,o.notaBene)(N);case"sex_row":return(0,n.show)(B),void t(B,i);case"birthdate_row":return void t(M,i)}i&&(0,l.showMsg)(C,i,"error",!0)},showProgress:()=>_.FlatButton.lock(P),hideProgress:()=>_.FlatButton.unlock(P)})},Y=()=>{const e=Number(V.val())||0,t=Number(q.val())||0,i=Number(j.val())||0,o=new Date(0);e&&o.setDate(e),t&&o.setMonth(t),i&&o.setFullYear(i),c.registrationItemStat.logFieldInteraction(d.RegistrationFieldItemNames.BDAY,o.getTime().toString())},H=function(){const e=window.cur;e.isJoinFieldDirty||(c.registrationItemStat.logEvent(d.RegistrationItemEventTypes.START_REG_TAP,e.eventScreen,void 0,{force:!0}),e.isJoinFieldDirty=!0)};if(c.registrationItemStat.logFieldInteraction(d.RegistrationFieldItemNames.FIRST_NAME,T.value,!0),T.addEventListener("keyup",(()=>{H(),c.registrationItemStat.logFieldInteraction(d.RegistrationFieldItemNames.FIRST_NAME,T.value)})),c.registrationItemStat.logFieldInteraction(d.RegistrationFieldItemNames.LAST_NAME,N.value,!0),N.addEventListener("keyup",(()=>{H(),c.registrationItemStat.logFieldInteraction(d.RegistrationFieldItemNames.LAST_NAME,N.value)})),[T,N].forEach((e=>{(0,r.placeholderInit)(e),e.addEventListener("keydown",(e=>{10!==e.keyCode&&13!==e.keyCode||J()}))})),"index"!==S&&requestAnimationFrame((()=>(0,n.elfocus)(T))),c.registrationItemStat.logFieldInteraction(d.RegistrationFieldItemNames.BDAY,"",!0),V=new window.Dropdown(x,(0,a.generateDays)(L,A),{big_text:!0,multiselect:!1,zeroPlaceholder:!0,selectedItems:b,onChange:()=>{H(),Y()}}),q=new window.Dropdown(F,u,{big_text:!0,multiselect:!1,zeroPlaceholder:!0,selectedItems:A,onChange:e=>{H(),Y(),(0,a.updateDayDropdown)(j.val(),e,V,b)}}),j=new window.Dropdown(R,m,{big_text:!0,multiselect:!1,zeroPlaceholder:!0,selectedItems:L,onChange:e=>{H(),Y(),(0,a.updateDayDropdown)(e,q.val(),V,b)}}),window.radioBtns[h]={els:[...O],val:0},c.registrationItemStat.logFieldInteraction(d.RegistrationFieldItemNames.SEX,Number((0,o.radioval)(h)).toString(),!0),O.forEach((e=>{e.addEventListener("click",(()=>{const t=Number(e.dataset.sex);(0,o.radiobtn)(e,t,h),H(),c.registrationItemStat.logFieldInteraction(d.RegistrationFieldItemNames.SEX,t.toString())}))})),void 0!==p.sex){const t=p.sex,i=e.querySelector(`.JoinForm__sexRadio[data-sex="${t}"]`);i&&i.click()}if(P.addEventListener("click",(e=>{e.preventDefault(),J()})),v){const e=window.cur;e.fbApp=v,e.fbState=w,e.fbLocale=f,window.Index.fbCheck(v,"",D)}U?.addEventListener("click",(e=>{e.preventDefault(),window.Index.fbJoin("",U)})),W&&y&&W.addEventListener("click",y),G&&E&&G.addEventListener("click",E);const z=(0,s.curBox)();z&&z.setOptions({onClean:()=>{V&&V.destroy(),q&&q.destroy(),j&&j.destroy()}}),window.stManager.add([window.jsc("web/tooltips.js"),"tooltips.css"]).catch((()=>{}))}},630298:(e,t,i)=>{function o(e){const t=e.match(/^([a-z_]+)([0-9\-_]+)$/);if(!t)return null;const[,i,o]=t;return{objectType:i,objectId:o}}i.d(t,{getElementLikeButtonCount:()=>l,getElementLikeButtonIcon:()=>a,getElementLikeButtonLabel:()=>d,isObjectTypeIsVideo:()=>r,likePostObjectId:()=>n,likeReplyObjectId:()=>s,parseLikeObjectId:()=>o});const n=e=>`wall${e}`,s=e=>`wall_reply${e}`,r=e=>["video","video_comment"].includes(e),l=e=>e?.querySelector(".like_button_count, ._like_button_count")??void 0,a=e=>e?.querySelector(".like_button_icon, ._like_button_icon")??void 0,d=e=>e.querySelector(".like_button_label, ._like_button_label")??void 0},335291:(e,t,i)=>{i.d(t,{isIntentPreviewHidden:()=>a,isIntentPreviewInActionStatusBar:()=>l,isIntentPreviewUseCurrent:()=>d,isVariantHidden:()=>s,isVariantInActionStatusBar:()=>n,parsePreviewVariant:()=>_,previewVisibilityIntentForVariant:()=>c,previewVisibilityUseCurrent:()=>r});var o=i(396708);const n=e=>e===o.PreviewVariantActionStatusBar,s=e=>e===o.PreviewVariantHidden,r={kind:"useCurrent"},l=e=>e.kind===o.PreviewVariantActionStatusBar,a=e=>e.kind===o.PreviewVariantHidden,d=e=>"useCurrent"===e.kind,c=e=>e?{kind:e}:r,_=e=>o.PreviewVariants.includes(e)?e:void 0},396708:(e,t,i)=>{i.d(t,{PreviewVariantActionStatusBar:()=>o,PreviewVariantHidden:()=>n,PreviewVariants:()=>s});const o="action_status_bar",n="hidden",s=[o,n]},142718:(e,t,i)=>{i.d(t,{REACTIONS_COUNTS_RESPONSE_FIELD:()=>a,SIZE_128:()=>l,SIZE_32:()=>n,SIZE_40:()=>s,SIZE_96:()=>r,SUPPORTED_OBJECT_TYPES:()=>o,WK_SECTION_PREFIX_REACTIONS:()=>d});const o={wall:"wall",wall_reply:"wall_reply"},n={width:32,height:32},s={width:40,height:40},r={width:96,height:96},l={width:128,height:128},a="reactions_counts",d="reactions"},40113:(e,t,i)=>{i.d(t,{isReactionsFullUpdatePayload:()=>s,reactionsCountsOnlyUpdatePayload:()=>r,reactionsCountsUpdatePayload:()=>n});var o=i(973634);const n=(e,t)=>({kind:o.PayloadKindFull,...e,reactionIdState:{reactionId:t.id}}),s=e=>e.kind===o.PayloadKindFull,r=e=>({kind:o.PayloadKindCountsOnly,...e})},973634:(e,t,i)=>{i.d(t,{PayloadKindCountsOnly:()=>o,PayloadKindFull:()=>n});const o="counts_only",n="counts_with_current_reaction"},662e3:(e,t,i)=>{i.d(t,{triggerReactionsUpdate:()=>l});var o=i(630298),n=i(142718),s=i(918595),r=i(40113);const l=(e,t,i,l)=>{const a=(0,o.parseLikeObjectId)(e);a&&a.objectType===n.SUPPORTED_OBJECT_TYPES.wall&&a.objectId?(0,s.emitEvent)(s.WallDataEvents.post_reactions_counts_update,function(e,t,i,o){const n={counts:e,isFromWkLayer:t?.isFromWkLayer,isPrimaryLikeButtonClick:t?.isPrimaryLikeButtonClick,isQueueUpdate:t?.isQueueUpdate,isUserAction:t.isUserAction,postFullId:i.objectId,previewVisibility:t.previewVisibility,reactionIdState:o?{reactionId:o.id}:void 0,suggestSubscribe:t.suggestSubscribe};return o?(0,r.reactionsCountsUpdatePayload)(n,o):(0,r.reactionsCountsOnlyUpdatePayload)(n)}(t,l,a,i)):a&&a.objectType===n.SUPPORTED_OBJECT_TYPES.wall_reply&&a.objectId?(0,s.emitEvent)(s.WallDataEvents.reply_reactions_counts_update,{counts:t,replyFullId:a.objectId,reactionIdState:i?{reactionId:i.id}:void 0}):console.warn("Unsupported reactions object update",e)}},100193:(e,t,i)=>{i.d(t,{UnauthActionBox:()=>c});var o=i(581903),n=i(695290),s=i(947717),r=i(20025),l=i(8520),a=i(708401),d=i(24735);const c={show:function(e,t={}){const{onHide:i,onLogin:c}=t,_=e.withForm,h=new r.MessageBox({title:"",width:_?796:450,hideButtons:!0,containerClass:(0,l.classNames)("UnauthActionBoxContainer",{"UnauthActionBoxContainer--form":_}),onHide:()=>{i&&i()}});h.content(e.html),h.changed=!0;const u=h.bodyNode.querySelector(".UnauthActionBox__close"),m=h.bodyNode.querySelector(".UnauthActionBox__join"),g=h.bodyNode.querySelector(".UnauthActionBox__login"),v=t=>{o.marketingTransitionItemStat.logEvent(n.MarketingTransitionItemCampaignType.UNAUTH_ACTION_BOX,t,e.action,window.location.href)};u?.addEventListener("click",(()=>{v(n.MarketingTransitionItemEventType.CLOSE),h.hide()})),m?.addEventListener("click",(()=>{v(n.MarketingTransitionItemEventType.CLICK_SIGN_UP),(0,s.showJoinBox)(e.action)})),g?.addEventListener("click",(()=>{v(n.MarketingTransitionItemEventType.CLICK_SIGN_IN),c?c():(0,s.showQuickLoginBox)(e.action)})),v(n.MarketingTransitionItemEventType.OPEN),h.show();const w=h.bodyNode.querySelector(".LoginCombinedBox"),f=h.bodyNode.querySelector(".JoinForm"),S=e=>{e.preventDefault(),v(n.MarketingTransitionItemEventType.CLOSE),h.hide()};return h.bodyNode.querySelectorAll(".LoginBox").forEach((e=>{(0,a.initLoginBoxForm)(e)})),h.bodyNode.querySelectorAll(".LoginBox__notNow").forEach((e=>{e.addEventListener("click",S)})),h.bodyNode.querySelectorAll(".JoinForm__signIn, .LoginRecentBox__alternative").forEach((e=>{e.addEventListener("click",(()=>{v(n.MarketingTransitionItemEventType.CLICK_SIGN_IN)}))})),h.bodyNode.querySelectorAll(".LoginBox__buttonSignUp").forEach((e=>{e.addEventListener("click",(()=>{v(n.MarketingTransitionItemEventType.CLICK_SIGN_UP)}))})),w?(0,a.initLoginCombinedBoxForm)(w,e.formOptions):f&&(0,d.initJoinForm)(f,{...e.formOptions,onSignInClick:()=>{(0,s.showQuickLoginBox)()},onNotNowClick:S,ref:"box"}),requestAnimationFrame((()=>window.tooltips&&window.tooltips.hideAll())),h}}},918595:(e,t,i)=>{i.d(t,{WallDataEvents:()=>s,emitEvent:()=>c,registerNonGlobalNonUniqueListener:()=>d,registerUniqueListener:()=>a});var o=i(942451),n=i(678751);const s={post_reactions_counts_update:"wall/post_reactions_counts_update",reply_reactions_counts_update:"wall/reply_reactions_counts_update",post_subscribe_update:"wall/post_subscribe_update"},r=(0,o.makeSharedState)("wall-data",(()=>({emitter:new n.default,keyedListeners:Object.create(null)})),{version:0}),l=(e,t,i)=>{const o=r(),n=o.keyedListeners?.[e]?.[t];return n&&o.emitter.removeListener(e,n),((e,t,i)=>{const o=r();return o.emitter.addListener(e,i),o.keyedListeners[e]={...o.keyedListeners[e],[t]:i},()=>{o.emitter.removeListener(e,i);const n=o.keyedListeners[e]?.[t];n===i&&delete o.keyedListeners[e]?.[t]}})(e,t,i)},a=(e,t,i)=>l(t,e,i),d=(e,t)=>((e,t)=>{const i=r();return i.emitter.addListener(e,t),()=>{i.emitter.removeListener(e,t)}})(e,t),c=(e,t)=>{r().emitter.emit(e,t)}}}]);try{stManager.done("dist/web/chunks/82fab9f9.2343c849.js")}catch(e){}