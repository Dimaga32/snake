"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[15133],{863211:(e,t,o)=>{o.d(t,{IconLiveText20h:()=>n});var n=(0,o(844990).makeIcon)("IconLiveText20h","live_text_20h","0 0 42 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 42 20" id="live_text_20h"><path d="M8 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h4a1 1 0 1 0 0-2H9V6a1 1 0 0 0-1-1m7 1a1 1 0 1 1 2 0v8a1 1 0 1 1-2 0zm15-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h4a1 1 0 1 0 0-2h-3v-2h3a1 1 0 1 0 0-2h-3V7h3a1 1 0 1 0 0-2zm-8.325 9.31-2.55-7.824a1 1 0 0 1-.117-.363L19 6.1h.005a1 1 0 1 1 1.99-.199L21 5.9l2 6.4 2-6.4h.005a1 1 0 0 1 1.99.2H27l-.008.023a1 1 0 0 1-.118.363l-2.55 7.824a1 1 0 0 1-.95.69h-.748a1 1 0 0 1-.95-.69Z" /></symbol>',42,20,!1,void 0)},171741:(e,t,o)=>{o.d(t,{Icon20UgcChatStickerCircleFillBlackAlpha:()=>n});var n=(0,o(844990).makeIcon)("Icon20UgcChatStickerCircleFillBlackAlpha","ugc_chat_sticker_circle_fill_black_alpha_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="ugc_chat_sticker_circle_fill_black_alpha_20"><rect width="20" height="20" fill="#000" fill-opacity=".35" rx="10" /><path fill="#fff" d="M9.47 4v2.286c0 2.612 2.105 4.728 4.702 4.728h1.986c-.832 1.797-3.026 3.515-5.655 3.515a6.8 6.8 0 0 1-1.703-.216 12 12 0 0 1-1.896 1.34q-.173.098-.401.21l-.159.078a.604.604 0 0 1-.802-.275.58.58 0 0 1-.017-.477 9 9 0 0 0 .225-.61q.264-.826.404-1.699C5.128 11.93 4.5 10.644 4.5 9.23 4.5 6.599 6.632 4.416 9.47 4m1.4.318v1.968a3.31 3.31 0 0 0 3.302 3.32H16.5z" /></symbol>',20,20,!1,void 0)},730617:(e,t,o)=>{o.d(t,{Icon24VmojiOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon24VmojiOutline","vmoji_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="vmoji_outline_24"><path d="M9.998 2.9a.9.9 0 0 1-.9.9A5.306 5.306 0 0 0 3.8 9.107.9.9 0 0 1 2 9.1C2.005 5.185 5.18 2 9.098 2a.9.9 0 0 1 .9.9M8.5 9.549a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3m5.956.754c.872-.445 1.878-.445 2.764.308a.766.766 0 0 1 .063 1.125.88.88 0 0 1-1.192.06l-.085-.066c-.252-.177-.477-.163-.748-.025a1 1 0 0 0-.149.09l-.083.063a.88.88 0 0 1-1.11-.122.766.766 0 0 1 .063-1.125c.106-.09.266-.2.477-.309Zm-.1 4.692c.1-.543-.354-.995-.906-.995h-2.9c-.552 0-1.006.451-.906.995.026.138.057.26.093.347a2.44 2.44 0 0 0 1.325 1.322c.298.123.616.188.938.188a2.46 2.46 0 0 0 2.264-1.51 2 2 0 0 0 .092-.347M2 14.901a.9.9 0 0 1 1.8-.008A5.306 5.306 0 0 0 9.098 20.2a.9.9 0 1 1 0 1.8C5.178 22 2.005 18.815 2 14.901M14.002 2.9a.9.9 0 0 0 .9.9A5.306 5.306 0 0 1 20.2 9.107a.9.9 0 0 0 .9.892.91.91 0 0 0 .9-.9C21.995 5.185 18.821 2 14.902 2a.9.9 0 0 0-.9.9M21.1 14.001a.9.9 0 0 0-.9.892 5.306 5.306 0 0 1-5.298 5.307.9.9 0 1 0 0 1.8c3.92 0 7.093-3.185 7.098-7.099 0-.49-.41-.9-.9-.9" /></symbol>',24,24,!1,void 0)},539267:(e,t,o)=>{o.d(t,{Icon12Cancel:()=>n});var n=(0,o(844990).makeIcon)("Icon12Cancel","cancel_12","0 0 12 12",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 12" id="cancel_12"><path fill="currentColor" d="M3.525 2.464a.75.75 0 0 0-1.06 1.061L4.938 6 2.464 8.475a.75.75 0 1 0 1.061 1.06L6 7.062l2.475 2.475a.75.75 0 0 0 1.06-1.061L7.062 6l2.475-2.475a.75.75 0 1 0-1.061-1.06L6 4.938z" /></symbol>',12,12,!1,void 0)},465028:(e,t,o)=>{o.d(t,{Icon12CheckCircleFill:()=>n});var n=(0,o(844990).makeIcon)("Icon12CheckCircleFill","check_circle_fill_12","0 0 12 12",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 12" id="check_circle_fill_12"><path fill="#99a2ad" d="M6 12A6 6 0 1 0 6 0a6 6 0 0 0 0 12" /><path fill="#fff" fill-rule="evenodd" d="M8.78 3.97a.75.75 0 0 1 0 1.06L5.53 8.28a.75.75 0 0 1-1.06 0L3.22 7.03a.75.75 0 0 1 1.06-1.06l.72.72 2.72-2.72a.75.75 0 0 1 1.06 0" clip-rule="evenodd" /></symbol>',12,12,!1,void 0)},405858:(e,t,o)=>{o.d(t,{Icon12ErrorCircleFill:()=>n});var n=(0,o(844990).makeIcon)("Icon12ErrorCircleFill","error_circle_fill_12","0 0 12 12",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 12" id="error_circle_fill_12"><path fill="#E64646" fill-rule="evenodd" d="M6 12c-3.312 0-6-2.688-6-6s2.688-6 6-6 6 2.688 6 6-2.688 6-6 6" clip-rule="evenodd" /><path fill="#fff" fill-rule="evenodd" d="M6 3a.75.75 0 0 0-.75.75v2.5a.75.75 0 0 0 1.5 0v-2.5A.75.75 0 0 0 6 3m0 5a.75.75 0 1 0 0 1.5A.75.75 0 0 0 6 8" clip-rule="evenodd" /></symbol>',12,12,!1,void 0)},945300:(e,t,o)=>{o.d(t,{Icon12PlayCircle:()=>n});var n=(0,o(844990).makeIcon)("Icon12PlayCircle","play_circle_12","0 0 12 12",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 12 12" id="play_circle_12"><path fill-rule="evenodd" d="M6 12A6 6 0 1 0 6 0a6 6 0 0 0 0 12M4.592 3.323a.4.4 0 0 0-.592.35v4.653a.4.4 0 0 0 .592.351l4.264-2.326a.4.4 0 0 0 0-.702z" clip-rule="evenodd" /></symbol>',12,12,!1,void 0)},310033:(e,t,o)=>{o.d(t,{Icon12StarCircleFillYellow:()=>n});var n=(0,o(844990).makeIcon)("Icon12StarCircleFillYellow","star_circle_fill_yellow_12","0 0 12 12",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 12" id="star_circle_fill_yellow_12"><linearGradient id="star_circle_fill_yellow_12_a" x1="-6" x2="6" y1="6" y2="18" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#ffb73d" /><stop offset="1" stop-color="#ffa000" /></linearGradient><g fill-rule="evenodd" clip-rule="evenodd"><path fill="url(#star_circle_fill_yellow_12_a)" d="M6 0a6 6 0 1 1 0 12A6 6 0 0 1 6 0m.11 2.59a.25.25 0 0 0-.334.114l-.952 1.928-2.127.31a.25.25 0 0 0-.138.426l1.539 1.5-.364 2.119a.25.25 0 0 0 .363.263L6 8.25l1.903 1a.25.25 0 0 0 .363-.263l-.364-2.119 1.54-1.5a.25.25 0 0 0-.14-.427l-2.126-.309-.952-1.928a.25.25 0 0 0-.113-.113" /><path fill="#fff" d="M6.11 2.59a.25.25 0 0 0-.334.114l-.952 1.928-2.127.31a.25.25 0 0 0-.138.426l1.539 1.5-.364 2.119a.25.25 0 0 0 .363.263L6 8.25l1.903 1a.25.25 0 0 0 .363-.263l-.364-2.119 1.54-1.5a.25.25 0 0 0-.14-.427l-2.126-.309-.952-1.928a.25.25 0 0 0-.113-.113" /></g></symbol>',12,12,!1,void 0)},715426:(e,t,o)=>{o.d(t,{Icon16CheckDoubleOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon16CheckDoubleOutline","check_double_outline_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="check_double_outline_16"><path fill="currentColor" fill-rule="evenodd" d="M10.782 4.721a.75.75 0 0 1 0 1.06l-6 6a.75.75 0 0 1-1.06 0l-2.502-2.5A.75.75 0 0 1 2.28 8.22l1.971 1.97 5.47-5.469a.75.75 0 0 1 1.06 0zm4.248 0a.75.75 0 0 1 0 1.06l-6 6a.75.75 0 1 1-1.06-1.06l6-6a.75.75 0 0 1 1.06 0" clip-rule="evenodd" /></symbol>',16,16,!1,void 0)},20115:(e,t,o)=>{o.d(t,{Icon16ChevronOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon16ChevronOutline","chevron_outline_16","0 0 12 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 16" id="chevron_outline_16"><path fill="currentColor" fill-rule="evenodd" d="M4.22 3.47a.75.75 0 0 1 1.06 0l4 4a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 0 1-1.06-1.06L7.69 8 4.22 4.53a.75.75 0 0 1 0-1.06" clip-rule="evenodd" /></symbol>',12,16,!1,void 0)},793103:(e,t,o)=>{o.d(t,{Icon16Education:()=>n});var n=(0,o(844990).makeIcon)("Icon16Education","education_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="education_16"><path fill="currentColor" d="M14.495 5.078 8.467 1.625a.94.94 0 0 0-.934 0L1.505 5.078a1 1 0 0 0-.385.402c-.258.492-.086 1.11.385 1.38l.995.567 5.002 2.874a1 1 0 0 0 .996 0l4.168-2.395 1.167-.668v2.996c0 .337.261.61.583.61a.597.597 0 0 0 .584-.61V5.968c0-.358-.183-.705-.505-.89" /><path fill="currentColor" d="M12.666 9.385 8.48 11.666a1 1 0 0 1-.958 0L3.333 9.382v1.055C3.334 12.713 5.448 14.5 8 14.5s4.667-1.787 4.667-4.063z" /></symbol>',16,16,!1,void 0)},313979:(e,t,o)=>{o.d(t,{Icon16Game:()=>n});var n=(0,o(844990).makeIcon)("Icon16Game","game_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="game_16"><path fill="currentColor" fill-rule="evenodd" d="M8 3.5H6c-3.75 0-5 3-5 6 0 1.75.5 3.5 2 3.5.655 0 1.024-.524 1.44-1.114.536-.763 1.151-1.636 2.56-1.636h2c1.409 0 2.024.873 2.56 1.636.416.59.785 1.114 1.44 1.114 1.5 0 2-1.75 2-3.5 0-3-1.25-6-5-6zm2 4a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5m-6-1a.5.5 0 0 1 1 0V7h.5a.5.5 0 0 1 0 1H5v.5a.5.5 0 0 1-1 0V8h-.5a.5.5 0 0 1 0-1H4z" clip-rule="evenodd" /></symbol>',16,16,!1,void 0)},688041:(e,t,o)=>{o.d(t,{Icon16MessageCross:()=>n});var n=(0,o(844990).makeIcon)("Icon16MessageCross","message_cross_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16" id="message_cross_16"><path fill-rule="evenodd" d="M14.5 7.766C14.5 4.582 11.59 2 8 2S1.5 4.582 1.5 7.766c0 1.554.693 2.964 1.82 4q-.164.97-.994 2.54l-.126.235a.313.313 0 0 0 .117.42.3.3 0 0 0 .22.03q2.585-.665 3.692-1.675A7.3 7.3 0 0 0 8 13.531c3.59 0 6.5-2.581 6.5-5.766ZM5.721 5.372a.75.75 0 0 1 1.06 0L8 6.59l1.218-1.218a.75.75 0 0 1 1.06 1.06l-1.217 1.22 1.218 1.217a.75.75 0 0 1-1.06 1.061L8 8.712 6.782 9.93a.75.75 0 1 1-1.06-1.06l1.216-1.22-1.217-1.217a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" /></symbol>',16,16,!1,void 0)},120009:(e,t,o)=>{o.d(t,{Icon16Services:()=>n});var n=(0,o(844990).makeIcon)("Icon16Services","services_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="services_16"><path fill="currentColor" d="M5.398 9c.557 0 .759.058.963.167s.363.269.472.472c.109.204.167.406.167.963v1.796c0 .557-.058.759-.167.962s-.269.364-.472.473c-.204.109-.406.167-.963.167H3.602c-.557 0-.759-.058-.963-.167s-.363-.269-.472-.473S2 12.955 2 12.398v-1.796c0-.557.058-.759.167-.963s.269-.363.472-.472c.204-.109.406-.167.963-.167zm7 0c.557 0 .759.058.963.167s.363.269.472.472c.109.204.167.406.167.963v1.796c0 .557-.058.759-.167.962a1.14 1.14 0 0 1-.472.473c-.204.109-.406.167-.963.167h-1.796c-.557 0-.759-.058-.963-.167s-.363-.269-.472-.473S9 12.955 9 12.398v-1.796c0-.557.058-.759.167-.963q.165-.306.472-.472C9.946 9 10.045 9 10.602 9zm-.564-7.465c.221.067.405.169.8.563l1.268 1.269c.394.394.496.578.563.799s.067.447 0 .668-.169.405-.563.8l-1.269 1.268c-.394.394-.578.496-.799.563a1.14 1.14 0 0 1-.668 0c-.221-.067-.405-.169-.8-.563L9.099 5.633c-.394-.394-.496-.578-.563-.799a1.14 1.14 0 0 1 0-.668c.067-.221.169-.405.563-.8l1.269-1.268c.394-.394.578-.496.799-.563s.447-.067.668 0M5.398 2c.557 0 .759.058.963.167s.363.269.472.472c.109.204.167.406.167.963v1.796c0 .557-.058.759-.167.963a1.14 1.14 0 0 1-.472.472c-.204.109-.406.167-.963.167H3.602c-.557 0-.759-.058-.963-.167a1.14 1.14 0 0 1-.472-.472C2.058 6.157 2 5.955 2 5.398V3.602c0-.557.058-.759.167-.963s.269-.363.472-.472c.204-.109.406-.167.963-.167z" /></symbol>',16,16,!1,void 0)},185372:(e,t,o)=>{o.d(t,{Icon20BrushOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon20BrushOutline","brush_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="brush_outline_20"><path fill-rule="evenodd" d="M6.667 12.493c-1.006 0-1.77.77-1.814 1.726-.064 1.352-.707 2.16-1.285 2.65.528.155 1.268.213 2.226-.072 1.903-.567 2.687-1.724 2.687-2.613 0-.897-.775-1.69-1.814-1.69ZM3.36 14.148a3.295 3.295 0 0 1 3.308-3.156c1.791 0 3.31 1.392 3.31 3.192 0 1.806-1.499 3.38-3.758 4.052-2.157.642-3.64-.025-4.348-.548a.9.9 0 0 1-.293-.353.84.84 0 0 1-.036-.614c.15-.46.637-.658.987-.938.382-.305.789-.761.83-1.635M15.702 2.001a1.61 1.61 0 0 1 2.261-.07 1.69 1.69 0 0 1 .17 2.287l-6.08 7.498a.746.746 0 0 1-1.052.108.753.753 0 0 1-.108-1.056l6.074-7.491a.185.185 0 0 0-.017-.242c-.067-.061-.133-.026-.202.04L9.745 9.783a.746.746 0 0 1-1.057-.025.753.753 0 0 1 .025-1.061z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},642584:(e,t,o)=>{o.d(t,{Icon20GiftOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon20GiftOutline","gift_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="gift_outline_20"><g fill="none" fill-rule="evenodd"><path d="M0 0h20v20H0z" /><path fill="currentColor" fill-rule="nonzero" d="M14.846 2.314c1.026 1.026 1.23 2.875-.257 4.186h.911a3 3 0 0 1 3 3v.49c0 .827-.093 1.16-.267 1.487-.174.326-.43.582-.756.756a1.9 1.9 0 0 1-.477.182v1.618c0 1.56-.162 2.126-.467 2.696a3.2 3.2 0 0 1-1.324 1.324l-.202.101c-.48.224-1.037.349-2.229.364l-5.291.002c-1.56 0-2.126-.162-2.696-.467a3.2 3.2 0 0 1-1.324-1.324l-.101-.202c-.224-.48-.349-1.037-.364-2.229L3 12.415a1.9 1.9 0 0 1-.477-.182 1.8 1.8 0 0 1-.756-.756c-.16-.299-.251-.605-.265-1.29L1.5 9.5a3 3 0 0 1 3-3h.911c-1.487-1.31-1.283-3.16-.257-4.186C6.369 1.099 8.738 1.038 10 3.569c1.262-2.531 3.631-2.47 4.846-1.255M9.25 12.499 4.5 12.5l.001 1.762.009.399c.021.604.083.924.202 1.2l.078.161q.246.462.708.708l.162.078c.33.143.724.203 1.598.211l1.991-.001zm6.251.001-4.751-.001v4.519l1.993.001.399-.009c.604-.021.924-.083 1.2-.202l.161-.078a1.7 1.7 0 0 0 .708-.708c.186-.348.267-.688.286-1.551l.004-.438zM9.159 7.999 4.5 8A1.5 1.5 0 0 0 3 9.5v.638l.007.232c.012.227.037.315.083.4a.32.32 0 0 0 .14.14c.11.059.223.085.632.09l5.387-.001.002-3L9.16 8zM15.5 8l-4.661-.001h-.09v3h5.39c.408-.004.521-.03.63-.089a.32.32 0 0 0 .141-.14c.065-.122.09-.248.09-.78V9.5A1.5 1.5 0 0 0 15.5 8M9.223 6.159c-.43-3.101-1.96-3.834-3.009-2.785C5.165 4.424 5.898 5.952 9 6.384l.257.032Zm1.554 0-.024.191.007.062.241-.029c3.101-.43 3.834-1.96 2.785-3.009-1.05-1.049-2.578-.316-3.01 2.785" /></g></symbol>',20,20,!1,void 0)},59907:(e,t,o)=>{o.d(t,{Icon20LogoClipsOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon20LogoClipsOutline","logo_clips_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="logo_clips_outline_20"><path fill="currentColor" fill-rule="evenodd" d="M7.194 1.502a.85.85 0 0 1 .904.792l.25 3.8a.85.85 0 0 1-1.697.112l-.25-3.8a.85.85 0 0 1 .793-.904m5.893.181a.85.85 0 0 1 .58 1.053l-1.35 4.651a.85.85 0 0 1-1.633-.474l1.35-4.65a.85.85 0 0 1 1.053-.58m.589 7.08a.75.75 0 0 1 1.057-.082c1.48 1.268 1.767 2.88 1.767 4.07 0 2.678-2.309 5.75-6.5 5.75-3.118 0-6.504-2.219-6.504-5.75 0-.677.218-1.588.776-2.349C4.854 9.61 5.796 9 7.142 9c.387 0 1.892.13 2.784 1.915a.75.75 0 1 1-1.341.67C8.048 10.513 7.232 10.5 7.143 10.5c-.833 0-1.34.352-1.662.79a2.62 2.62 0 0 0-.485 1.462c0 2.425 2.407 4.25 5.004 4.25 3.36 0 5-2.4 5-4.25 0-.953-.223-2.058-1.243-2.932a.75.75 0 0 1-.081-1.058" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},12076:(e,t,o)=>{o.d(t,{Icon20MessageArrowRightOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon20MessageArrowRightOutline","message_arrow_right_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="message_arrow_right_outline_20"><path d="M10.25 2.5c-2.938 0-5.576 1.391-7.044 3.572a.749.749 0 1 0 1.244.836c1.171-1.738 3.327-2.91 5.8-2.91 3.775 0 6.75 2.694 6.75 5.995s-2.975 5.995-6.75 5.995c-.91 0-1.788-.156-2.6-.455a.75.75 0 0 0-.822.207c-.609.687-1.64 1.105-3.123 1.22.682-1.347 1.045-2.376 1.084-3.13a.75.75 0 0 0-.15-.49 5.8 5.8 0 0 1-.67-1.137.75.75 0 0 0-1.372.607q.275.62.665 1.183c-.082.457-.338 1.189-.896 2.292l-.24.475a1.2 1.2 0 0 0 1.164 1.736l.532-.041c1.472-.115 2.804-.51 3.768-1.361.85.26 1.745.392 2.66.392 4.435 0 8.25-3.206 8.25-7.493S14.685 2.5 10.25 2.5m-.971 3.97a.75.75 0 0 0-1.06 1.06l1.219 1.22H2.75a.75.75 0 1 0 0 1.5h6.688l-1.22 1.22a.75.75 0 1 0 1.06 1.06l2.5-2.5a.75.75 0 0 0 0-1.06l-2.5-2.5Z" /></symbol>',20,20,!1,void 0)},797110:(e,t,o)=>{o.d(t,{Icon20More:()=>n});var n=(0,o(844990).makeIcon)("Icon20More","more_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="more_20"><path fill="currentColor" d="M15 8.5a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3m-5 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3m-5 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3" /></symbol>',20,20,!1,void 0)},58240:(e,t,o)=>{o.d(t,{Icon20PauseCircle:()=>n});var n=(0,o(844990).makeIcon)("Icon20PauseCircle","pause_circle_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="pause_circle_20"><path fill="currentColor" fill-rule="evenodd" d="M20 10c0 5.523-4.477 10-10 10S0 15.523 0 10 4.477 0 10 0s10 4.477 10 10M6 7.5c0-.466 0-.699.076-.883a1 1 0 0 1 .541-.54C6.801 6 7.034 6 7.5 6s.699 0 .883.076a1 1 0 0 1 .54.541C9 6.801 9 7.034 9 7.5v5c0 .466 0 .699-.076.883a1 1 0 0 1-.541.54C8.199 14 7.966 14 7.5 14s-.699 0-.883-.076a1 1 0 0 1-.54-.541C6 13.199 6 12.966 6 12.5zm5.076-.883C11 6.801 11 7.034 11 7.5v5c0 .466 0 .699.076.883a1 1 0 0 0 .541.54c.184.077.417.077.883.077s.699 0 .883-.076a1 1 0 0 0 .54-.541c.077-.184.077-.417.077-.883v-5c0-.466 0-.699-.076-.883a1 1 0 0 0-.541-.54C13.199 6 12.966 6 12.5 6s-.699 0-.883.076a1 1 0 0 0-.54.541" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},405816:(e,t,o)=>{o.d(t,{Icon20ReportOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon20ReportOutline","report_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="report_outline_20"><path d="M10.001 5.5a.75.75 0 0 0-.75.75v4.5a.75.75 0 0 0 1.5 0v-4.5a.75.75 0 0 0-.75-.75m-.9 8.4a.9.9 0 1 1 1.8 0 .9.9 0 0 1-1.8 0" /><path fill-rule="evenodd" d="m17.326 14.814-2.514 2.514c-.432.433-.648.649-.9.803a2.5 2.5 0 0 1-.723.3c-.288.069-.594.069-1.205.069h-3.97c-.612 0-.918 0-1.206-.07a2.5 2.5 0 0 1-.723-.299c-.252-.154-.468-.37-.9-.803L2.67 14.814c-.432-.432-.648-.648-.802-.9a2.5 2.5 0 0 1-.3-.723c-.068-.288-.068-.593-.069-1.204V8.014c0-.611 0-.917.069-1.205a2.5 2.5 0 0 1 .3-.723c.154-.252.37-.468.803-.9L5.186 2.67c.432-.432.649-.648.9-.803a2.5 2.5 0 0 1 .723-.299c.288-.069.594-.069 1.205-.069h3.97c.611 0 .917 0 1.205.07a2.5 2.5 0 0 1 .723.298c.252.155.468.371.9.804l2.514 2.514c.432.432.648.648.803.9.137.224.238.468.3.723.068.288.068.593.068 1.205v3.972c0 .611 0 .917-.069 1.205a2.5 2.5 0 0 1-.299.723c-.155.252-.37.468-.803.9Zm-.474-1.706c-.062.101-.149.188-.321.36l-3.063 3.063c-.173.173-.26.26-.36.322a1 1 0 0 1-.29.12c-.115.027-.237.027-.482.027H7.662c-.245 0-.367 0-.482-.028a1 1 0 0 1-.29-.12c-.1-.061-.186-.148-.36-.32l-3.06-3.065c-.173-.172-.26-.259-.321-.36a1 1 0 0 1-.12-.289C3 12.704 3 12.582 3 12.338V7.663c0-.245 0-.367.027-.482a1 1 0 0 1 .12-.29c.062-.1.148-.187.321-.36l3.064-3.063c.173-.172.26-.259.36-.32a1 1 0 0 1 .29-.12C7.295 3 7.418 3 7.662 3h4.673c.245 0 .367 0 .482.028a1 1 0 0 1 .29.12c.1.061.187.148.36.32l3.063 3.063c.172.173.259.26.32.36q.084.136.12.29c.028.115.028.237.028.482v4.674c0 .245 0 .367-.027.482a1 1 0 0 1-.12.29Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},511548:(e,t,o)=>{o.d(t,{Icon20Stars:()=>n});var n=(0,o(844990).makeIcon)("Icon20Stars","stars_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="stars_20"><path fill-rule="evenodd" d="M12.004 8.13c-.368.835-.857 1.717-1.507 2.367s-1.532 1.14-2.367 1.507c.835.367 1.717.857 2.367 1.507s1.14 1.532 1.507 2.367c.367-.835.857-1.717 1.507-2.367s1.532-1.14 2.367-1.507c-.835-.368-1.717-.857-2.367-1.507s-1.14-1.532-1.507-2.367m-.785-2.178c-.421 1.317-1.014 2.716-1.782 3.485-.769.768-2.168 1.36-3.485 1.782a21 21 0 0 1-1.162.338c-.38.1-.38.793 0 .894a27 27 0 0 1 .912.26q.124.037.25.078c1.317.421 2.716 1.014 3.485 1.782s1.36 2.168 1.782 3.485a21 21 0 0 1 .27.907l.068.255c.1.38.793.38.894 0a28 28 0 0 1 .26-.912q.037-.124.078-.25c.421-1.317 1.014-2.717 1.782-3.485s2.168-1.36 3.485-1.782a21 21 0 0 1 .907-.27l.255-.068c.38-.1.38-.793 0-.894a28 28 0 0 1-.912-.26l-.25-.078c-1.317-.421-2.717-1.014-3.485-1.782-.768-.769-1.36-2.168-1.782-3.485a21 21 0 0 1-.338-1.162c-.1-.38-.793-.38-.894 0a27 27 0 0 1-.26.912zM4.365.763a.385.385 0 0 0-.73 0l-.414 1.24a1.93 1.93 0 0 1-1.218 1.218l-1.24.414a.385.385 0 0 0 0 .73l1.24.414a1.93 1.93 0 0 1 1.218 1.218l.414 1.24a.385.385 0 0 0 .73 0l.414-1.24a1.93 1.93 0 0 1 1.218-1.218l1.24-.414a.385.385 0 0 0 0-.73l-1.24-.414a1.93 1.93 0 0 1-1.218-1.218z" /></symbol>',20,20,!1,void 0)},103881:(e,t,o)=>{o.d(t,{Icon24AddOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon24AddOutline","add_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="add_outline_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path fill="currentColor" fill-rule="nonzero" d="M12 3a.9.9 0 0 1 .9.9v7.2h7.2a.9.9 0 1 1 0 1.8l-7.2-.001V20.1a.9.9 0 1 1-1.8 0V12.9l-7.2.001a.9.9 0 1 1 0-1.8h7.2V3.9A.9.9 0 0 1 12 3" /></g></symbol>',24,24,!1,void 0)},524598:(e,t,o)=>{o.d(t,{Icon24BookmarkOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon24BookmarkOutline","bookmark_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="bookmark_outline_24"><path fill="currentColor" fill-rule="evenodd" d="M11.083 3h1.834c1.056 0 1.903 0 2.588.056.704.057 1.316.179 1.88.466a4.8 4.8 0 0 1 2.093 2.093c.287.564.408 1.176.466 1.88C20 8.18 20 9.027 20 10.083v7.615c0 .773 0 1.414-.045 1.914-.045.494-.145 1.026-.482 1.454a2.46 2.46 0 0 1-1.896.935c-.544.007-1.027-.238-1.447-.503-.424-.268-.933-.658-1.546-1.128l-1.617-1.24c-.607-.466-.714-.526-.797-.549a.66.66 0 0 0-.34 0c-.083.022-.19.083-.797.549l-1.617 1.24c-.613.47-1.123.86-1.546 1.128-.42.265-.903.51-1.447.503a2.46 2.46 0 0 1-1.896-.936c-.337-.427-.437-.96-.482-1.453C4 19.112 4 18.47 4 17.698v-7.615c0-1.056 0-1.903.056-2.588.057-.704.179-1.316.466-1.88a4.8 4.8 0 0 1 2.093-2.093c.564-.287 1.176-.409 1.88-.466C9.18 3 10.027 3 11.083 3M8.641 4.85c-.593.048-.941.14-1.209.276a3 3 0 0 0-1.306 1.306c-.137.268-.228.616-.276 1.21-.05.603-.05 1.376-.05 2.48v7.532c0 .828 0 1.387.038 1.794.038.414.103.503.103.503a.66.66 0 0 0 .506.25s.11-.003.461-.225c.346-.218.79-.558 1.448-1.062l1.582-1.213.1-.077c.44-.338.85-.654 1.327-.782a2.45 2.45 0 0 1 1.27 0c.478.128.888.444 1.326.782l.101.077 1.582 1.213c.658.504 1.102.844 1.448 1.062.351.222.461.225.461.225a.66.66 0 0 0 .506-.25s.065-.089.103-.503c.037-.407.038-.966.038-1.794v-7.532c0-1.104 0-1.877-.05-2.48-.048-.594-.14-.942-.276-1.21a3 3 0 0 0-1.306-1.306c-.268-.137-.617-.228-1.21-.276-.603-.05-1.376-.05-2.48-.05h-1.756c-1.104 0-1.877 0-2.48.05" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},34046:(e,t,o)=>{o.d(t,{Icon24BooksOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon24BooksOutline","books_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="books_outline_24"><path fill-rule="evenodd" d="M17.4 3.9H9.8c-.855 0-1.442 0-1.897.038-.445.036-.684.103-.856.19a2.1 2.1 0 0 0-.918.919c-.088.172-.155.411-.191.856C5.9 6.358 5.9 6.945 5.9 7.8v8.516c.34-.14.71-.216 1.1-.216h11.1V4.6c0-.6-.1-.7-.7-.7M4.1 7.762c0-.808 0-1.469.044-2.006.045-.556.142-1.058.381-1.527A3.9 3.9 0 0 1 6.23 2.525c.47-.239.971-.336 1.527-.381C8.293 2.1 8.954 2.1 9.762 2.1h7.668c.254 0 .496 0 .7.017.223.018.478.06.733.19a1.9 1.9 0 0 1 .83.83c.13.255.172.51.19.733.017.204.017.446.017.7v11.89c0 .504 0 .756-.098.949a.9.9 0 0 1-.393.393c-.193.098-.445.098-.949.098h-.305c-.076.322-.113.51-.131.699a4 4 0 0 0 0 .802c.018.188.055.378.131.699H19a.9.9 0 0 1 0 1.8H7A2.9 2.9 0 0 1 4.1 19zM16.312 20.1a5 5 0 0 1-.08-.523 6 6 0 0 1 0-1.154 6 6 0 0 1 .08-.523H7a1.1 1.1 0 0 0 0 2.2z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},681362:(e,t,o)=>{o.d(t,{Icon24DocumentListOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon24DocumentListOutline","document_list_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="document_list_outline_24"><path d="M7.996 13.901a.9.9 0 0 1 .9-.9h1.2a.9.9 0 0 1 0 1.8h-1.2a.9.9 0 0 1-.9-.9m.9 2.297a.9.9 0 1 0 0 1.8h1.2a.9.9 0 0 0 0-1.8zM13 13.901a.9.9 0 0 1 .9-.9h1.2a.9.9 0 0 1 0 1.8h-1.2a.9.9 0 0 1-.9-.9m.9 2.297a.9.9 0 1 0 0 1.8h1.2a.9.9 0 0 0 0-1.8z" /><path fill-rule="evenodd" d="M12.473 2c.3 0 .586 0 .866.066a2.4 2.4 0 0 1 .694.288c.245.15.447.353.659.565l4.389 4.39c.212.21.415.413.565.658a2.4 2.4 0 0 1 .288.694c.067.28.066.566.066.866v6.012c0 .947 0 1.713-.05 2.333-.053.64-.163 1.203-.43 1.726a4.4 4.4 0 0 1-1.922 1.922c-.523.267-1.087.377-1.726.43-.62.05-1.386.05-2.334.05h-3.076c-.948 0-1.714 0-2.334-.05-.64-.053-1.203-.163-1.726-.43a4.4 4.4 0 0 1-1.922-1.922c-.267-.523-.377-1.087-.43-1.726C4 17.252 4 16.486 4 15.538V8.462c0-.948 0-1.714.05-2.334.053-.64.163-1.203.43-1.726A4.4 4.4 0 0 1 6.402 2.48c.523-.267 1.087-.377 1.726-.43C8.748 2 9.514 2 10.462 2zM10.5 3.8H12v2.135c0 .53 0 .981.03 1.352.032.39.102.768.286 1.13a2.9 2.9 0 0 0 1.267 1.267c.362.184.741.254 1.13.286.37.03.822.03 1.351.03H18.2v5.5c0 .995 0 1.687-.045 2.226-.043.527-.123.828-.238 1.054a2.6 2.6 0 0 1-1.137 1.137c-.226.115-.527.195-1.055.238-.538.044-1.23.045-2.225.045h-3c-.995 0-1.687 0-2.226-.045-.527-.043-.828-.123-1.054-.238a2.6 2.6 0 0 1-1.137-1.137c-.115-.226-.195-.527-.238-1.055-.044-.538-.045-1.23-.045-2.225v-7c0-.995 0-1.687.045-2.225.043-.528.123-.829.238-1.055A2.6 2.6 0 0 1 7.22 4.083c.226-.115.527-.195 1.054-.238C8.813 3.8 9.505 3.8 10.5 3.8m3.3.773L17.427 8.2H16.1c-.575 0-.952 0-1.24-.024-.278-.023-.393-.062-.46-.096a1.1 1.1 0 0 1-.48-.48c-.034-.066-.073-.182-.096-.46A17 17 0 0 1 13.8 5.9z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},349811:(e,t,o)=>{o.d(t,{Icon24DocumentTextOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon24DocumentTextOutline","document_text_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="document_text_outline_24"><path fill-rule="evenodd" d="M12.473 2c.3 0 .586 0 .866.066a2.4 2.4 0 0 1 .694.288c.245.15.447.353.659.565l4.389 4.39c.212.21.415.413.565.658a2.4 2.4 0 0 1 .288.694c.067.28.066.566.066.866v6.012c0 .947 0 1.713-.05 2.333-.053.64-.163 1.203-.43 1.726a4.4 4.4 0 0 1-1.922 1.922c-.523.267-1.087.377-1.726.43-.62.05-1.386.05-2.334.05h-3.076c-.948 0-1.714 0-2.334-.05-.64-.053-1.203-.163-1.726-.43a4.4 4.4 0 0 1-1.922-1.922c-.267-.523-.377-1.087-.43-1.726C4 17.252 4 16.486 4 15.538V8.462c0-.948 0-1.714.05-2.334.053-.64.163-1.203.43-1.726A4.4 4.4 0 0 1 6.402 2.48c.523-.267 1.087-.377 1.726-.43C8.748 2 9.514 2 10.462 2zM10.5 3.8H12v2.135c0 .53 0 .981.03 1.352.032.39.102.768.286 1.13a2.9 2.9 0 0 0 1.267 1.267c.362.184.741.254 1.13.286.37.03.822.03 1.352.03H18.2v5.5c0 .995 0 1.687-.045 2.226-.043.527-.123.828-.238 1.054a2.6 2.6 0 0 1-1.137 1.137c-.226.115-.527.195-1.055.238-.538.044-1.23.045-2.225.045h-3c-.995 0-1.687 0-2.226-.045-.527-.043-.828-.123-1.054-.238a2.6 2.6 0 0 1-1.137-1.137c-.115-.226-.195-.527-.238-1.055-.044-.538-.045-1.23-.045-2.225v-7c0-.995 0-1.687.045-2.225.043-.528.123-.829.238-1.055A2.6 2.6 0 0 1 7.22 4.083c.226-.115.527-.195 1.054-.238C8.813 3.8 9.505 3.8 10.5 3.8m3.3.773L17.427 8.2H16.1c-.575 0-.952 0-1.24-.024-.278-.023-.393-.062-.46-.096a1.1 1.1 0 0 1-.48-.48c-.034-.066-.073-.182-.096-.46A17 17 0 0 1 13.8 5.9zM7.997 17.104a.9.9 0 0 1 .9-.9h3.199a.9.9 0 1 1 0 1.8H8.897a.9.9 0 0 1-.9-.9m.9-4.106a.9.9 0 1 0 0 1.8h5.197a.9.9 0 0 0 0-1.8z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},876382:(e,t,o)=>{o.d(t,{Icon24DownloadOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon24DownloadOutline","download_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="download_outline_24"><path fill-rule="evenodd" d="M12.002 2a.9.9 0 0 1 .9.9v11.002l4.562-4.631a.9.9 0 1 1 1.283 1.263l-6.104 6.195a.9.9 0 0 1-1.284-.001l-6.09-6.206a.9.9 0 1 1 1.286-1.26l4.547 4.633V2.9a.9.9 0 0 1 .9-.9m-8 18.1a.9.9 0 0 1 .9-.9h14.2a.9.9 0 1 1 0 1.8h-14.2a.9.9 0 0 1-.9-.9" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},644746:(e,t,o)=>{o.d(t,{Icon24FavoriteOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon24FavoriteOutline","favorite_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="favorite_outline_24"><path fill-rule="evenodd" d="M12.554 4.694a.6.6 0 0 0-1.108 0l-1.614 3.9a.9.9 0 0 1-.774.554l-4.125.266a.6.6 0 0 0-.357 1.05l3.267 2.859a.9.9 0 0 1 .282.888l-.93 3.852a.6.6 0 0 0 .883.66l3.472-2.003a.9.9 0 0 1 .9 0l3.472 2.004a.6.6 0 0 0 .883-.661l-.93-3.852a.9.9 0 0 1 .282-.888l3.267-2.858a.6.6 0 0 0-.357-1.05l-4.125-.267a.9.9 0 0 1-.774-.554zm-2.772-.689c.818-1.976 3.618-1.976 4.436 0l1.4 3.383 3.565.23c2.136.138 3.037 2.792 1.426 4.201l-2.856 2.5.802 3.322c.494 2.05-1.706 3.696-3.533 2.642L12 18.539l-3.022 1.744C7.15 21.337 4.95 19.69 5.445 17.64l.802-3.322-2.856-2.5c-1.611-1.41-.71-4.063 1.426-4.201l3.566-.23z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},751500:(e,t,o)=>{o.d(t,{Icon24MessageArrowRightOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon24MessageArrowRightOutline","message_arrow_right_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="message_arrow_right_outline_24"><g fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"><path d="M12.016 4.9c-3.077 0-5.702 1.444-7.065 3.5a.9.9 0 0 1-1.5-.995C5.178 4.799 8.395 3.1 12.016 3.1c5.324 0 9.884 3.729 9.884 8.607s-4.56 8.607-9.884 8.607c-1.173 0-2.3-.178-3.348-.506C7.42 20.961 5.616 21.513 3.42 21.6c-.927.036-1.598-.927-1.209-1.792.529-1.183 1.197-2.403 1.298-3.72a8 8 0 0 1-.34-.54.9.9 0 0 1 1.56-.898q.186.324.413.629a.9.9 0 0 1 .177.537c0 1.38-.54 2.684-1.099 3.92 1.714-.194 2.835-.75 3.513-1.547a.9.9 0 0 1 1.002-.26c1 .376 2.11.586 3.28.586 4.6 0 8.085-3.172 8.085-6.807S16.615 4.9 12.016 4.9" /><path d="M10.864 8.264a.9.9 0 0 1 1.272 0l2.6 2.6a.9.9 0 0 1 0 1.272l-2.6 2.6a.9.9 0 0 1-1.272-1.272l1.063-1.064H2.9a.9.9 0 1 1 0-1.8h9.027l-1.063-1.064a.9.9 0 0 1 0-1.272" /></g></symbol>',24,24,!1,void 0)},948513:(e,t,o)=>{o.d(t,{Icon24MusicOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon24MusicOutline","music_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="music_outline_24"><path fill="currentColor" fill-rule="evenodd" d="M16.716 4.105c.61-.127 1.01-.21 1.317-.246.299-.036.408-.013.457.004a.9.9 0 0 1 .485.395c.026.043.07.146.097.446.027.304.028.705.028 1.314L8.9 8.143v-.54c0-.477 0-.786.018-1.024.017-.228.046-.328.073-.39a1.1 1.1 0 0 1 .374-.46c.055-.039.147-.088.366-.15.23-.067.533-.13 1-.227zM7.1 15.1h-.2c-1.795 0-3.125.452-4.02 1.215-.903.768-1.28 1.782-1.28 2.71A3.375 3.375 0 0 0 4.975 22.4c.928 0 1.942-.377 2.71-1.28.763-.895 1.215-2.225 1.215-4.02V9.982l10.2-2.125V13.1h-.2c-1.795 0-3.125.452-4.021 1.215-.902.768-1.279 1.782-1.279 2.71a3.375 3.375 0 0 0 3.375 3.375c.928 0 1.942-.377 2.71-1.28.763-.895 1.215-2.225 1.215-4.02V6.004c0-.573 0-1.061-.035-1.457-.036-.412-.116-.824-.34-1.204a2.7 2.7 0 0 0-1.457-1.185c-.417-.141-.836-.135-1.247-.087-.395.047-.873.147-1.434.264l-.038.007-5.985 1.247-.03.007c-.429.089-.797.166-1.099.252-.32.092-.624.21-.908.41a2.9 2.9 0 0 0-.987 1.214c-.139.32-.192.642-.217.974-.023.313-.023.689-.023 1.126v.031zm8.946.585c-.473.403-.646.901-.646 1.34 0 .87.705 1.575 1.575 1.575.439 0 .937-.173 1.34-.646.408-.479.785-1.349.785-2.854v-.2h-.2c-1.505 0-2.375.377-2.854.785M3.4 19.025c0-.439.173-.937.646-1.34.479-.408 1.349-.785 2.854-.785h.2v.2c0 1.505-.377 2.375-.785 2.854-.403.473-.901.646-1.34.646-.87 0-1.575-.705-1.575-1.575" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},838477:(e,t,o)=>{o.d(t,{Icon24ShoppingCartOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon24ShoppingCartOutline","shopping_cart_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="shopping_cart_outline_24"><path fill-rule="evenodd" d="M3.935 4.817a14 14 0 0 0-.94-.017H2.9a.9.9 0 0 1 0-1.8h.127c.401 0 .751 0 1.043.022.31.023.618.075.923.21a2.7 2.7 0 0 1 1.139.952c.094.138.167.28.227.427l11.586.362c.64.02 1.18.037 1.611.09.445.053.892.156 1.284.424a2.7 2.7 0 0 1 1.116 1.655c.101.465.03.917-.088 1.35-.113.42-.3.927-.522 1.527l-.511 1.387c-.495 1.345-.828 2.248-1.426 2.93a4.9 4.9 0 0 1-1.938 1.352c-.848.324-1.81.324-3.243.323H9.804c-.402 0-.752 0-1.043-.022a2.7 2.7 0 0 1-.924-.21 2.7 2.7 0 0 1-1.139-.951 2.7 2.7 0 0 1-.37-.872 15 15 0 0 1-.208-1.022L4.944 6.428a14 14 0 0 0-.183-.921c-.052-.199-.092-.273-.118-.312a.9.9 0 0 0-.38-.317c-.043-.02-.123-.046-.328-.061m2.838 1.608 1.113 6.158c.079.434.13.711.184.921.051.199.091.273.118.313a.9.9 0 0 0 .38.317c.042.019.123.045.328.06a14 14 0 0 0 .939.017h4.213c1.682 0 2.283-.014 2.78-.204a3.1 3.1 0 0 0 1.227-.855c.35-.401.571-.96 1.153-2.538l.435-1.179c.24-.649.398-1.08.487-1.412.089-.328.078-.449.067-.497a.9.9 0 0 0-.372-.552c-.04-.028-.149-.084-.486-.125-.342-.041-.8-.057-1.491-.078zM10 19.25a1.75 1.75 0 1 1-3.5 0 1.75 1.75 0 0 1 3.5 0M16.75 21a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5" /></symbol>',24,24,!1,void 0)},390768:(e,t,o)=>{o.d(t,{Icon24SmileOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon24SmileOutline","smile_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="smile_outline_24"><path d="M8.438 14.297a.9.9 0 0 1 1.259.133c.013.016.196.223.53.432.383.24.97.488 1.773.488a3.3 3.3 0 0 0 1.773-.488c.191-.12.382-.26.53-.432a.9.9 0 0 1 1.4 1.132 4 4 0 0 1-.976.826A5.1 5.1 0 0 1 12 17.15a5.1 5.1 0 0 1-2.727-.762 4 4 0 0 1-.976-.826.9.9 0 0 1 .14-1.265Zm1.812-4.047a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0M15 11.5A1.25 1.25 0 1 0 15 9a1.25 1.25 0 0 0 0 2.5m-3-9.4c-5.468 0-9.9 4.432-9.9 9.9s4.432 9.9 9.9 9.9 9.9-4.432 9.9-9.9-4.432-9.9-9.9-9.9M3.9 12a8.1 8.1 0 1 1 16.2 0 8.1 8.1 0 0 1-16.2 0" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},352472:(e,t,o)=>{o.d(t,{Icon24StickerSmileOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon24StickerSmileOutline","sticker_smile_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="sticker_smile_outline_24"><path d="M11.295 10.25a1.256 1.256 0 0 1-1.255 1.251c-.69 0-1.248-.56-1.245-1.25C8.798 9.56 9.36 9 10.05 9s1.248.56 1.245 1.25m4.244.251c.69 0 1.25-.56 1.254-1.25A1.244 1.244 0 0 0 15.549 8c-.69 0-1.251.56-1.254 1.25a1.244 1.244 0 0 0 1.244 1.251" /><path fill-rule="evenodd" d="m11.452 21.295-.005-.025-.399.056c-.845.12-1.406.198-1.906.167a4.89 4.89 0 0 1-4.296-3.245c-.167-.472-.244-1.033-.361-1.879l-.662-4.784c-.149-1.076-.268-1.939-.308-2.644-.04-.724-.003-1.361.208-1.972a4.9 4.9 0 0 1 1.828-2.42c.53-.37 1.132-.58 1.84-.74.689-.155 1.55-.276 2.627-.427l5.096-.717c.783-.11 1.302-.183 1.765-.16a4.885 4.885 0 0 1 4.394 3.317c.148.44.22.96.328 1.742l.02.142h.002l.247 1.655q.036.245.031.483c.082.726.117 1.292.09 1.816a9.93 9.93 0 0 1-6.718 8.896c-.765.26-1.666.407-3.1.612zm5.336-16.992c-.27-.013-.607.03-1.53.16l-4.954.696c-1.124.158-1.914.27-2.522.407-.599.135-.945.278-1.202.458a3.1 3.1 0 0 0-1.156 1.53c-.103.298-.146.67-.112 1.282.035.623.143 1.413.299 2.537l.64 4.635c.139.996.194 1.36.291 1.635a3.09 3.09 0 0 0 2.718 2.053c.292.018.656-.028 1.652-.168l.17-.024.82-.116 1.603-.283c.6-.106 1-.68.893-1.28l-.236-1.324c-1.403.152-3.005.008-4.27-.857a.9.9 0 0 1 1.017-1.487c.817.559 2.008.694 3.23.534a4.41 4.41 0 0 1 3.43-3.475l1.655-.345c.48-.1.824-.499.872-.965a100 100 0 0 0-.263-1.989c-.128-.922-.178-1.258-.265-1.515a3.09 3.09 0 0 0-2.78-2.1Zm-.576 13.853a8.13 8.13 0 0 0 3.885-5.677 3 3 0 0 1-.51.155l-1.655.345a2.606 2.606 0 0 0-2.034 3.008l.271 1.52q.059.328.043.649" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},182490:(e,t,o)=>{o.d(t,{Icon24StorefrontOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon24StorefrontOutline","storefront_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="storefront_outline_24"><path fill-rule="evenodd" d="M7 14a.9.9 0 0 1 .9.9v4.2h8.2v-4.2a.9.9 0 0 1 1.8 0V20a.9.9 0 0 1-.9.9H7a.9.9 0 0 1-.9-.9v-5.1A.9.9 0 0 1 7 14" clip-rule="evenodd" /><path fill-rule="evenodd" d="M3 20a.9.9 0 0 1 .9-.9h16.2a.9.9 0 1 1 0 1.8H3.9A.9.9 0 0 1 3 20m13.9-10a1.1 1.1 0 0 0 2.2 0h1.8a2.9 2.9 0 0 1-5.8 0z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M16 9.1a.9.9 0 0 1 .9.9 1.1 1.1 0 0 0 2.2 0 .9.9 0 1 1 1.8 0 2.9 2.9 0 0 1-5.8 0 .9.9 0 0 1 .9-.9" clip-rule="evenodd" /><path fill-rule="evenodd" d="M12 9.1a.9.9 0 0 1 .9.9 1.1 1.1 0 0 0 2.2 0 .9.9 0 1 1 1.8 0 2.9 2.9 0 0 1-5.8 0 .9.9 0 0 1 .9-.9" clip-rule="evenodd" /><path fill-rule="evenodd" d="M8 9.1a.9.9 0 0 1 .9.9 1.1 1.1 0 0 0 2.2 0 .9.9 0 1 1 1.8 0 2.9 2.9 0 0 1-5.8 0 .9.9 0 0 1 .9-.9" clip-rule="evenodd" /><path fill-rule="evenodd" d="M4 9.1a.9.9 0 0 1 .9.9 1.1 1.1 0 0 0 2.2 0 .9.9 0 0 1 1.8 0 2.9 2.9 0 0 1-5.8 0 .9.9 0 0 1 .9-.9" clip-rule="evenodd" /><path fill-rule="evenodd" d="M8.703 3.1h6.594c.553 0 1.019-.001 1.453.137a2.9 2.9 0 0 1 1.033.585c.342.301.581.7.865 1.175l.056.094 1.612 2.686.027.045c.143.239.264.44.352.66q.116.293.167.604c.038.234.038.47.038.747V10h-1.8v-.114c0-.358-.003-.438-.014-.51a1 1 0 0 0-.064-.228c-.027-.068-.066-.138-.25-.445L17.16 6.017c-.37-.618-.462-.752-.566-.843a1.1 1.1 0 0 0-.392-.222c-.131-.042-.294-.052-1.014-.052H8.812c-.72 0-.883.01-1.014.052a1.1 1.1 0 0 0-.392.222c-.104.091-.196.225-.566.843L5.228 8.703c-.185.307-.223.377-.25.445a1 1 0 0 0-.064.228c-.011.072-.014.152-.014.51V10H3.1v-.167c0-.278 0-.513.038-.747a3 3 0 0 1 .167-.603c.088-.22.209-.422.352-.66l.027-.046L5.296 5.09l.056-.094c.284-.474.523-.874.865-1.175a2.9 2.9 0 0 1 1.033-.585c.434-.138.9-.138 1.453-.137Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},374271:(e,t,o)=>{o.d(t,{Icon24UgcStickerOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon24UgcStickerOutline","ugc_sticker_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="ugc_sticker_outline_24"><path fill-rule="evenodd" d="M13.481 3.562a1.85 1.85 0 0 0-1.403-.56c-4.963.228-9.045 4.133-9.045 8.592 0 1.527.485 2.952 1.318 4.16-.04.476-.178.986-.382 1.531-.186.496-.406.973-.632 1.462q-.111.24-.223.486c-.394.865.29 1.801 1.194 1.766 2.098-.081 3.83-.6 5.035-1.69 1.002.308 2.079.474 3.199.474 4.124 0 7.977-2.28 9.295-5.631.403-1.024.008-2.063-.635-2.718zM11.2 4.9c-3.67.603-6.362 3.606-6.362 6.695 0 1.222.414 2.37 1.149 3.347.117.155.18.345.18.539 0 .86-.229 1.691-.507 2.434-.156.415-.337.83-.515 1.219 1.595-.191 2.637-.71 3.267-1.442a.9.9 0 0 1 .999-.257 9 9 0 0 0 3.132.551c3.401 0 6.37-1.81 7.484-4.182-1.345 0-2.412-.001-3.273-.071-.891-.073-1.642-.224-2.326-.572a5.9 5.9 0 0 1-2.584-2.575c-.349-.682-.5-1.43-.573-2.319-.071-.87-.071-1.949-.071-3.314zm8.04 7.105-6.236-6.358c.002 1.04.012 1.83.065 2.474.063.777.185 1.262.382 1.649a4.1 4.1 0 0 0 1.796 1.79c.387.196.874.317 1.654.38.616.05 1.366.062 2.338.065Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},931649:(e,t,o)=>{o.d(t,{Icon28AddCircleFillBlue:()=>n});var n=(0,o(844990).makeIcon)("Icon28AddCircleFillBlue","add_circle_fill_blue_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="add_circle_fill_blue_28"><linearGradient id="add_circle_fill_blue_28_a" x1="-14" x2="14" y1="14" y2="42" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#70b2ff" /><stop offset="1" stop-color="#5c9ce6" /></linearGradient><path fill="url(#add_circle_fill_blue_28_a)" d="M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14" /><path fill="#fff" d="M14 7a1 1 0 0 1 1 1v5h5a1 1 0 1 1 0 2h-5v5a1 1 0 1 1-2 0v-5H8a1 1 0 1 1 0-2h5V8a1 1 0 0 1 1-1" /></symbol>',28,28,!1,void 0)},637044:(e,t,o)=>{o.d(t,{Icon28ChainCircleFillBlue:()=>n});var n=(0,o(844990).makeIcon)("Icon28ChainCircleFillBlue","chain_circle_fill_blue_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="chain_circle_fill_blue_28"><linearGradient id="chain_circle_fill_blue_28_a" x1="-14" x2="14" y1="14" y2="42" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#70b2ff" /><stop offset="1" stop-color="#5c9ce6" /></linearGradient><path fill="url(#chain_circle_fill_blue_28_a)" d="M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14" /><path fill="#fff" fill-rule="evenodd" d="M13.022 16.184a.837.837 0 0 1-1.187-.001 3.86 3.86 0 0 1 0-5.419l2.618-2.643a3.77 3.77 0 0 1 5.366 0c1.261 1.274 1.557 3.033.67 4.508-.296.49-.947.47-1.326.09-.274-.276-.253-.707-.076-1.019.465-.817.24-1.683-.456-2.379a2.094 2.094 0 0 0-2.997 0l-2.611 2.636a2.143 2.143 0 0 0-.001 3.025.83.83 0 0 1 0 1.202m1.95-3.166c.833.835.832 2.19-.001 3.025L12.36 18.68a2.094 2.094 0 0 1-2.997 0c-.696-.696-.911-1.555-.447-2.371.178-.312.199-.744-.076-1.019-.379-.38-1.03-.4-1.325.09-.888 1.474-.602 3.226.659 4.5a3.77 3.77 0 0 0 5.367 0l2.617-2.643a3.86 3.86 0 0 0 0-5.419.837.837 0 0 0-1.187 0 .83.83 0 0 0 0 1.2" clip-rule="evenodd" /></symbol>',28,28,!1,void 0)},78510:(e,t,o)=>{o.d(t,{Icon28ChevronRightOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon28ChevronRightOutline","chevron_right_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="chevron_right_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path stroke="#8BC1FF" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m11 7.5 6.5 6.5-6.5 6.5" /><path fill="currentColor" fill-rule="nonzero" d="m16.086 14-5.793 5.793a1 1 0 0 0 1.414 1.414l6.5-6.5a1 1 0 0 0 0-1.414l-6.5-6.5a1 1 0 0 0-1.414 1.414z" /></g></symbol>',28,28,!1,void 0)},588907:(e,t,o)=>{o.d(t,{Icon28EditCircleFillBlue:()=>n});var n=(0,o(844990).makeIcon)("Icon28EditCircleFillBlue","edit_circle_fill_blue_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="edit_circle_fill_blue_28"><linearGradient id="edit_circle_fill_blue_28_a" x1="-14" x2="14" y1="14" y2="42" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#70b2ff" /><stop offset="1" stop-color="#5c9ce6" /></linearGradient><rect width="28" height="28" fill="url(#edit_circle_fill_blue_28_a)" rx="14" /><path fill="#fff" fill-rule="evenodd" d="m14.987 9.976 3.035 3.035-5.539 5.54a5.7 5.7 0 0 1-2.375 1.426l-2.488.76a.286.286 0 0 1-.358-.358l.76-2.488a5.7 5.7 0 0 1 1.427-2.375zm4.17-2.35 1.216 1.217c.47.468.5 1.209.094 1.714l-.094.104-1.516 1.516-3.035-3.035 1.517-1.515a1.286 1.286 0 0 1 1.819 0" clip-rule="evenodd" /></symbol>',28,28,!1,void 0)},228437:(e,t,o)=>{o.d(t,{Icon28GearCircleFillGray:()=>n});var n=(0,o(844990).makeIcon)("Icon28GearCircleFillGray","gear_circle_fill_gray_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="gear_circle_fill_gray_28"><linearGradient id="gear_circle_fill_gray_28_a" x1="-14" x2="14" y1="14" y2="42" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#b1b6bd" /><stop offset="1" stop-color="#99a2ad" /></linearGradient><path fill="url(#gear_circle_fill_gray_28_a)" d="M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14" /><path fill="#fff" d="M15 6.667c.18.6.306 1.201 1.305 1.777 1.118.304 1.665.003 2.173-.337.53-.353.688-.25.9-.043l.515.515c.235.236.33.33 0 .943-.298.552-.633 1.066-.335 2.18.577 1.004 1.176 1.178 1.775 1.298.625.125.664.309.667.606v.727c0 .334 0 .467-.667.667-.6.18-1.201.306-1.777 1.305-.303 1.118-.002 1.665.337 2.173.353.53.25.688.043.9l-.515.515c-.236.235-.33.33-.943 0-.552-.298-1.066-.633-2.18-.335-1.004.577-1.178 1.176-1.298 1.775-.125.625-.309.664-.606.667h-.727c-.334 0-.467 0-.667-.667-.18-.6-.306-1.201-1.305-1.777-1.118-.303-1.665-.002-2.173.337-.53.353-.688.25-.9.043l-.515-.515c-.235-.236-.33-.33 0-.943.298-.552.634-1.066.335-2.18C7.865 15.294 7.266 15.12 6.667 15c-.625-.125-.664-.309-.667-.606v-.727c0-.334 0-.467.667-.667.6-.18 1.201-.306 1.777-1.305.304-1.118.003-1.665-.337-2.173-.353-.53-.25-.688-.043-.9l.515-.515c.236-.235.33-.33.943 0 .552.298 1.066.634 2.18.335C12.706 7.865 12.88 7.266 13 6.667c.125-.625.309-.664.606-.667h.727c.334 0 .467 0 .667.667M14 10.2a3.8 3.8 0 1 0 0 7.6 3.8 3.8 0 0 0 0-7.6" /></symbol>',28,28,!1,void 0)},469095:(e,t,o)=>{o.d(t,{Icon28MentionCircleFillBlue:()=>n});var n=(0,o(844990).makeIcon)("Icon28MentionCircleFillBlue","mention_circle_fill_blue_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="mention_circle_fill_blue_28"><linearGradient id="mention_circle_fill_blue_28_a" x1="-14" x2="14" y1="14" y2="42" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#70b2ff" /><stop offset="1" stop-color="#5c9ce6" /></linearGradient><path fill="url(#mention_circle_fill_blue_28_a)" d="M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14" /><path fill="#fff" d="M13.875 21q-2.078 0-3.63-.822c-1.552-.822-1.835-1.33-2.4-2.343Q7 16.313 7 14.285v-.42q0-2.03.895-3.586a6.2 6.2 0 0 1 2.516-2.418Q12.03 7 14.143 7h.072q1.96 0 3.504.774c1.544.774 1.834 1.234 2.413 2.155Q21 11.312 21 13.06v.428q0 1.207-.398 2.125-.399.919-1.133 1.421-.734.503-1.691.503-.878 0-1.518-.354c-.64-.354-.696-.55-.81-.94h-.08q-.17.585-.739.936-.568.35-1.347.35-.788 0-1.37-.346c-.582-.346-.686-.561-.895-.992q-.313-.648-.313-1.53v-1.068q0-.848.318-1.477.317-.63.9-.976.58-.345 1.36-.345.735 0 1.258.341.524.342.693.918h.063v-.166q0-.42.264-.682t.685-.262q.412 0 .667.262c.255.262.255.402.255.682v3.42q0 .366.224.603c.224.237.343.236.581.236q.403 0 .703-.346.3-.345.466-.975.165-.63.165-1.46v-.236q0-1.338-.653-2.4a4.5 4.5 0 0 0-1.813-1.658q-1.16-.594-2.618-.594h-.08q-1.62 0-2.843.673-1.222.674-1.893 1.91c-.671 1.237-.671 1.78-.671 2.865v.306q0 1.608.644 2.807.645 1.197 1.83 1.85c1.186.652 1.718.65 2.78.65h.09q.599 0 1.414-.122.412-.052.51-.052a.73.73 0 0 1 .52.192.64.64 0 0 1 .205.49q0 .516-.582.7-.779.253-2.184.253zm-1.146-6.637q0 1.59 1.19 1.591.564 0 .855-.371.291-.372.291-1.106v-.735q0-.665-.309-1.04-.308-.377-.854-.377-.573 0-.873.407t-.3 1.176z" /></symbol>',28,28,!1,void 0)},282177:(e,t,o)=>{o.d(t,{Icon28PaletteFillBlue:()=>n});var n=(0,o(844990).makeIcon)("Icon28PaletteFillBlue","palette_fill_blue_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="palette_fill_blue_28"><linearGradient id="palette_fill_blue_28_a" x1="-14" x2="14" y1="14" y2="42" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#70b2ff" /><stop offset="1" stop-color="#5c9ce6" /></linearGradient><path fill="url(#palette_fill_blue_28_a)" d="M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14" /><path fill="#fff" fill-rule="evenodd" d="M14.629 17.702c-.174.375-.104.768.08 1.08.503.87.777 2.218-.68 2.218C10.307 21 7 17.783 7 14c0-3.866 3.147-7 7.03-7a7.03 7.03 0 0 1 6.942 5.894c.284 2.391-1.625 4.091-3.668 4.091-.84 0-2.231-.239-2.675.717M9.75 15a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5m6-3.5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5m-4 0a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5m6.5 3.5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5" clip-rule="evenodd" /></symbol>',28,28,!1,void 0)},826965:(e,t,o)=>{o.d(t,{Icon28Pause:()=>n});var n=(0,o(844990).makeIcon)("Icon28Pause","pause_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="pause_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path fill="currentColor" d="M7.3 5h3.4A1.3 1.3 0 0 1 12 6.3v15.4a1.3 1.3 0 0 1-1.3 1.3H7.3A1.3 1.3 0 0 1 6 21.7V6.3A1.3 1.3 0 0 1 7.3 5m9 0h3.4A1.3 1.3 0 0 1 21 6.3v15.4a1.3 1.3 0 0 1-1.3 1.3h-3.4a1.3 1.3 0 0 1-1.3-1.3V6.3A1.3 1.3 0 0 1 16.3 5" /></g></symbol>',28,28,!1,void 0)},544954:(e,t,o)=>{o.d(t,{Icon28PhoneCircleFillGreen:()=>n});var n=(0,o(844990).makeIcon)("Icon28PhoneCircleFillGreen","phone_circle_fill_green_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="phone_circle_fill_green_28"><linearGradient id="phone_circle_fill_green_28_a" x1="-14" x2="14" y1="14" y2="42" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#50c750" /><stop offset="1" stop-color="#32b332" /></linearGradient><path fill="url(#phone_circle_fill_green_28_a)" d="M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14" /><path fill="#fff" d="M15.642 16.535c1.054-1.054 2.712-1.15 3.814-.224l.797.671c.91.766 1.002 2.145.205 3.08a2.58 2.58 0 0 1-1.707.882q-3.819.514-8.014-3.681t-3.68-8.014q.026-.3.122-.585c.149-.435.41-.822.759-1.122.936-.796 2.314-.705 3.08.205l.67.797c.928 1.101.832 2.76-.222 3.814l-.571.57a.55.55 0 0 0-.128.583q.313.854 1.59 2.131 1.28 1.28 2.132 1.592c.203.075.43.024.582-.128z" /></symbol>',28,28,!1,void 0)},567290:(e,t,o)=>{o.d(t,{Icon28PinCircleFillBlue:()=>n});var n=(0,o(844990).makeIcon)("Icon28PinCircleFillBlue","pin_circle_fill_blue_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="pin_circle_fill_blue_28"><linearGradient id="pin_circle_fill_blue_28_a" x1="-14" x2="14" y1="14" y2="42" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#70b2ff" /><stop offset="1" stop-color="#5c9ce6" /></linearGradient><path fill="url(#pin_circle_fill_blue_28_a)" d="M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14" /><path fill="#fff" d="m16.235 8.109 3.657 3.663c.225.226.064.633-.263.633h-.523a.9.9 0 0 0-.633.263l-1.715 1.715a.9.9 0 0 0-.262.633v2.996c0 .554-.7.858-1.1.456l-2.301-2.3-3.57 3.57a.893.893 0 1 1-1.264-1.263L11.83 14.9l-2.29-2.29c-.391-.392-.109-1.102.456-1.102h2.995a.9.9 0 0 0 .633-.262l1.715-1.715a.9.9 0 0 0 .263-.634v-.526c0-.32.403-.495.634-.263" /></symbol>',28,28,!1,void 0)},578363:(e,t,o)=>{o.d(t,{Icon28PopUpStickerCircleFillRaspberryPink:()=>n});var n=(0,o(844990).makeIcon)("Icon28PopUpStickerCircleFillRaspberryPink","pop_up_sticker_circle_fill_raspberry_pink_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="pop_up_sticker_circle_fill_raspberry_pink_28"><g fill-rule="evenodd" clip-path="url(#pop_up_sticker_circle_fill_raspberry_pink_28_a)" clip-rule="evenodd"><path fill="url(#pop_up_sticker_circle_fill_raspberry_pink_28_b)" d="M14 28c7.732 0 14-6.268 14-14S21.732 0 14 0 0 6.268 0 14s6.268 14 14 14" /><path fill="#fff" d="M15.504 7.003a1 1 0 0 1-1 1H9.002a1 1 0 0 0-1 1v5.5a1 1 0 0 1-2.002 0v-5.5a3 3 0 0 1 3.002-3h5.502a1 1 0 0 1 1 1M12.49 21a1 1 0 0 1 1.001-1h5.507a1 1 0 0 0 1-1v-5.5a1 1 0 0 1 2.002 0V19a3 3 0 0 1-3.002 3h-5.507a1 1 0 0 1-1-1Z" /></g><defs><linearGradient id="pop_up_sticker_circle_fill_raspberry_pink_28_b" x1="0" x2="28" y1="0" y2="28" gradientUnits="userSpaceOnUse"><stop stop-color="#FF80D5" /><stop offset="1" stop-color="#E645B1" /></linearGradient><clipPath id="pop_up_sticker_circle_fill_raspberry_pink_28_a"><path fill="#fff" d="M0 0h28v28H0z" /></clipPath></defs></symbol>',28,28,!1,void 0)},705276:(e,t,o)=>{o.d(t,{Icon28UserCircleFillBlue:()=>n});var n=(0,o(844990).makeIcon)("Icon28UserCircleFillBlue","user_circle_fill_blue_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="user_circle_fill_blue_28"><circle cx="14" cy="14" r="14" fill="url(#user_circle_fill_blue_28_a)" /><path fill="#fff" d="M16.75 11.25a2.75 2.75 0 1 0-5.5 0 2.75 2.75 0 1 0 5.5 0M8.5 18.115v.715c0 .37.3.67.67.67h9.66c.37 0 .67-.3.67-.67v-.715C19.5 15.692 15.836 15 14 15s-5.5.692-5.5 3.115" /><defs><linearGradient id="user_circle_fill_blue_28_a" x1="0" x2="28.733" y1="0" y2=".773" gradientUnits="userSpaceOnUse"><stop stop-color="#70B2FF" /><stop offset="1" stop-color="#5C9CE6" /></linearGradient></defs></symbol>',28,28,!1,void 0)},390842:(e,t,o)=>{o.d(t,{Icon56BookmarkOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon56BookmarkOutline","bookmark_outline_56","0 0 56 56",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 56 56" id="bookmark_outline_56"><path fill="currentColor" fill-rule="evenodd" d="M25.433 5h5.134c2.744 0 4.894 0 6.623.141 1.76.144 3.215.442 4.53 1.112a11.5 11.5 0 0 1 5.027 5.026c.67 1.316.968 2.77 1.112 4.53.141 1.73.141 3.88.141 6.624v20.321c0 1.783 0 3.224-.101 4.336-.1 1.102-.317 2.18-.984 3.02A5 5 0 0 1 43.024 52c-1.072.005-2.054-.491-2.982-1.094-.936-.607-2.07-1.499-3.47-2.6l-6.433-5.06c-1.206-.948-1.476-1.124-1.718-1.19a1.6 1.6 0 0 0-.843 0c-.24.066-.51.242-1.717 1.19l-6.433 5.06c-1.4 1.101-2.534 1.993-3.47 2.6-.928.603-1.91 1.1-2.982 1.094a5 5 0 0 1-3.891-1.89c-.667-.84-.884-1.918-.984-3.02C8 45.978 8 44.536 8 42.754V22.433c0-2.743 0-4.894.141-6.623.144-1.76.442-3.215 1.112-4.53a11.5 11.5 0 0 1 5.026-5.027c1.316-.67 2.77-.968 4.53-1.112C20.54 5 22.69 5 25.434 5zm-6.379 3.131c-1.575.129-2.59.376-3.413.795a8.5 8.5 0 0 0-3.715 3.715c-.419.823-.666 1.838-.795 3.413-.13 1.592-.131 3.621-.131 6.446v20.177c0 1.878.002 3.182.089 4.141.09.986.252 1.309.345 1.426A2 2 0 0 0 12.99 49c.149 0 .503-.071 1.333-.61.808-.524 1.835-1.33 3.31-2.49l6.372-5.012.19-.15c.904-.712 1.684-1.328 2.592-1.576a4.6 4.6 0 0 1 2.424 0c.908.248 1.688.864 2.592 1.576l.19.15 6.371 5.011c1.476 1.161 2.503 1.967 3.31 2.491.83.539 1.185.61 1.334.61a2 2 0 0 0 1.557-.756c.093-.117.256-.44.345-1.426.088-.959.089-2.263.089-4.141V22.5c0-2.825-.001-4.854-.131-6.446-.129-1.575-.376-2.59-.795-3.413a8.5 8.5 0 0 0-3.715-3.715c-.823-.419-1.838-.666-3.413-.795C35.354 8.001 33.325 8 30.5 8h-5c-2.825 0-4.854.001-6.446.131" clip-rule="evenodd" /></symbol>',56,56,!1,void 0)},782361:(e,t,o)=>{o.d(t,{Icon56SettingsOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon56SettingsOutline","settings_outline_56","0 0 56 56",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 56 56" id="settings_outline_56"><path fill-rule="evenodd" d="M37.004 28.152c0 4.96-4.03 8.98-9.001 8.98s-9.001-4.02-9.001-8.98 4.03-8.98 9-8.98c4.972 0 9.002 4.02 9.002 8.98m-9.001 5.987c3.314 0 6-2.68 6-5.987s-2.686-5.987-6-5.987-6.001 2.68-6.001 5.987 2.687 5.987 6 5.987Z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M29.265 4.005c-.798 0-1.598.017-2.396-.002-.41-.01-1.849-.044-3.058.923-1.186.949-1.628 2.398-1.895 3.463a10.3 10.3 0 0 1-.884 2.233q-1.263.502-2.428 1.173a10.3 10.3 0 0 1-2.22-.704c-.996-.463-2.403-1.034-3.89-.708-1.514.33-2.392 1.469-2.642 1.793a48 48 0 0 1-1.427 1.76c-.266.314-1.194 1.407-1.204 2.95-.009 1.516.839 2.77 1.5 3.649.407.54.86 1.32 1.209 2.162a19 19 0 0 0-.582 2.561c-.672.59-1.406 1.08-1.997 1.381-.98.5-2.294 1.257-2.951 2.625-.669 1.391-.314 2.78-.212 3.177q.281 1.099.51 2.209c.083.4.373 1.806 1.586 2.764 1.193.944 2.707 1.048 3.807 1.068.65.012 1.504.127 2.352.353q.766 1.114 1.681 2.104c.028.872-.052 1.724-.186 2.356-.228 1.074-.465 2.569.184 3.94.662 1.396 1.968 1.995 2.34 2.166q1.031.473 2.038.994c.364.188 1.643.85 3.155.51 1.485-.334 2.519-1.444 3.225-2.284a10.3 10.3 0 0 1 1.816-1.65c.864.06 1.75.06 2.614 0a10.3 10.3 0 0 1 1.815 1.65c.707.84 1.74 1.95 3.225 2.284 1.513.34 2.791-.322 3.155-.51q1.007-.521 2.038-.994c.373-.17 1.679-.77 2.34-2.166.65-1.371.412-2.866.184-3.94a10.3 10.3 0 0 1-.186-2.356 19 19 0 0 0 1.681-2.104 10.3 10.3 0 0 1 2.353-.353c1.099-.02 2.614-.124 3.807-1.068 1.213-.958 1.502-2.364 1.585-2.764q.23-1.111.51-2.209c.102-.397.457-1.786-.211-3.177-.658-1.368-1.972-2.125-2.951-2.625a10.3 10.3 0 0 1-1.998-1.38 19 19 0 0 0-.581-2.562 10.3 10.3 0 0 1 1.208-2.162c.662-.878 1.509-2.133 1.5-3.65-.01-1.542-.938-2.635-1.204-2.948a48 48 0 0 1-1.427-1.761c-.25-.324-1.128-1.462-2.641-1.793-1.487-.325-2.895.245-3.891.708a10.3 10.3 0 0 1-2.22.704 19 19 0 0 0-2.428-1.173 10.3 10.3 0 0 1-.884-2.233c-.256-1.024-.666-2.348-1.683-3.281-1.192-1.094-2.595-1.1-3.098-1.103zm8.892 42.739-1.902.927c-.952.464-1.427.696-2.83-.974-.788-.936-2.02-2.026-3.367-2.806a16.3 16.3 0 0 1-4.11 0c-1.348.78-2.58 1.87-3.367 2.806-1.403 1.67-1.88 1.438-2.83.974l-1.903-.927c-.951-.464-1.427-.696-.974-2.83.249-1.175.35-2.779.15-4.297a16 16 0 0 1-2.64-3.302c-1.439-.54-3.033-.804-4.24-.826-2.18-.04-2.3-.555-2.538-1.585l-.476-2.062c-.238-1.03-.357-1.546 1.586-2.537 1.085-.554 2.418-1.503 3.48-2.633.129-1.396.44-2.74.907-4.009-.457-1.494-1.245-2.946-1.983-3.926-1.312-1.743-.98-2.154-.313-2.976l1.332-1.644c.666-.822 1-1.233 2.977-.313 1.084.504 2.615.962 4.133 1.111a15.8 15.8 0 0 1 3.81-1.843c.855-1.284 1.475-2.784 1.768-3.959.53-2.115 1.059-2.115 2.117-2.115h2.299c.939.007 1.437.124 1.935 2.115.294 1.175.913 2.675 1.769 3.959 1.36.445 2.64 1.069 3.81 1.843 1.517-.15 3.048-.607 4.132-1.111 1.978-.92 2.311-.51 2.977.313l1.332 1.644c.666.822 1 1.233-.313 2.976-.738.98-1.526 2.432-1.983 3.927a15.8 15.8 0 0 1 .908 4.008c1.062 1.13 2.394 2.08 3.479 2.633 1.943.991 1.824 1.506 1.586 2.537l-.476 2.062c-.238 1.03-.357 1.546-2.538 1.585-1.207.022-2.8.286-4.24.826a16 16 0 0 1-2.64 3.302c-.2 1.518-.098 3.122.15 4.298.453 2.133-.023 2.365-.974 2.829" clip-rule="evenodd" /></symbol>',56,56,!1,void 0)},678250:(e,t,o)=>{o.d(t,{Icon56UsersOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon56UsersOutline","users_outline_56","0 0 56 56",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 56 56" id="users_outline_56"><g fill="none" fill-rule="evenodd"><path d="M0 0h56v56H0z" /><path fill="currentColor" fill-rule="nonzero" d="M39.5 31c5.609 0 10.5 2.699 10.5 8 0 2.625-1.833 4-4 4h-8.5a1.5 1.5 0 0 1 0-3H46c.667 0 1-.25 1-1 0-3.164-3.328-5-7.5-5-.71 0-1.482.07-2.226.208a1.5 1.5 0 1 1-.548-2.95A15.4 15.4 0 0 1 39.5 31m-19-2c7.356 0 13.5 2.836 13.5 9 0 3.078-1.922 5-4.5 5h-18C8.814 43 7 41.59 7 38.5c0-6.545 6.065-9.5 13.5-9.5m0 3C14.514 32 10 34.2 10 38.5c0 1.244.33 1.5 1.5 1.5h18c.922 0 1.5-.578 1.5-2 0-3.874-4.606-6-10.5-6M39 15a6.5 6.5 0 1 1 0 13 6.5 6.5 0 0 1 0-13m-18.5-4a7.5 7.5 0 1 1 0 15 7.5 7.5 0 0 1 0-15M39 18a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7m-18.5-4a4.5 4.5 0 1 0 0 9 4.5 4.5 0 0 0 0-9" /></g></symbol>',56,56,!1,void 0)},758241:(e,t,o)=>{o.d(t,{suppressOthers:()=>m});var n=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body},r=new WeakMap,a=new WeakMap,i={},s=0,c=function(e){return e&&(e.host||c(e.parentNode))},l=function(e,t,o,n){var l=function(e,t){return t.map((function(t){if(e.contains(t))return t;var o=c(t);return o&&e.contains(o)?o:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)})).filter((function(e){return Boolean(e)}))}(t,Array.isArray(e)?e:[e]);i[o]||(i[o]=new WeakMap);var d=i[o],u=[],m=new Set,p=new Set(l),h=function(e){e&&!m.has(e)&&(m.add(e),h(e.parentNode))};l.forEach(h);var f=function(e){e&&!p.has(e)&&Array.prototype.forEach.call(e.children,(function(e){if(m.has(e))f(e);else try{var t=e.getAttribute(n),i=null!==t&&"false"!==t,s=(r.get(e)||0)+1,c=(d.get(e)||0)+1;r.set(e,s),d.set(e,c),u.push(e),1===s&&i&&a.set(e,!0),1===c&&e.setAttribute(o,"true"),i||e.setAttribute(n,"true")}catch(t){console.error("aria-hidden: cannot operate on ",e,t)}}))};return f(t),m.clear(),s++,function(){u.forEach((function(e){var t=r.get(e)-1,i=d.get(e)-1;r.set(e,t),d.set(e,i),t||(a.has(e)||e.removeAttribute(n),a.delete(e)),i||e.removeAttribute(o)})),--s||(r=new WeakMap,r=new WeakMap,a=new WeakMap,i={})}},d=function(e,t,o){void 0===o&&(o="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=t||n(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),l(r,a,o,"aria-hidden")):function(){return null}},u=function(e,t,o){void 0===o&&(o="data-inert-ed");var r=t||n(e);return r?l(e,r,o,"inert"):function(){return null}},m=function(e,t,o){return void 0===o&&(o="data-suppressed"),("undefined"!=typeof HTMLElement&&HTMLElement.prototype.hasOwnProperty("inert")?u:d)(e,t,o)}},470922:(e,t,o)=>{o.d(t,{default:()=>r});var n=o(94243);function r(e,t){e.classList?e.classList.add(t):(0,n.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}},94243:(e,t,o)=>{function n(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}o.d(t,{default:()=>n})},878995:(e,t,o)=>{function n(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function r(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=n(e.className,t):e.setAttribute("class",n(e.className&&e.className.baseVal||"",t))}o.d(t,{default:()=>r})},47157:(e,t,o)=>{o.d(t,{focusOn:()=>n});var n=function(e,t){e&&("focus"in e&&e.focus(t),"contentWindow"in e&&e.contentWindow&&e.contentWindow.focus())}},659458:(e,t,o)=>{o.d(t,{FOCUS_ALLOW:()=>a,FOCUS_AUTO:()=>i,FOCUS_DISABLED:()=>r,FOCUS_GROUP:()=>n,FOCUS_NO_AUTOFOCUS:()=>s});var n="data-focus-lock",r="data-focus-lock-disabled",a="data-no-focus-lock",i="data-autofocus-inside",s="data-no-autofocus"},522671:(e,t,o)=>{o.d(t,{focusInside:()=>s});var n=o(650408),r=o(970879),a=o(375416),i=o(798399),s=function(e,t){return void 0===t&&(t=(0,i.getActiveElement)((0,a.getFirst)(e).ownerDocument)),!(!t||t.dataset&&t.dataset.focusGuard)&&(0,r.getAllAffectedNodes)(e).some((function(e){return(0,n.contains)(e,t)||function(e,t){return Boolean((0,a.toArray)(e.querySelectorAll("iframe")).some((function(e){return function(e,t){return e===t}(e,t)})))}(e,t)}))}},453463:(e,t,o)=>{o.d(t,{focusIsHidden:()=>s});var n=o(659458),r=o(650408),a=o(375416),i=o(798399),s=function(e){void 0===e&&(e=document);var t=(0,i.getActiveElement)(e);return!!t&&(0,a.toArray)(e.querySelectorAll("[".concat(n.FOCUS_ALLOW,"]"))).some((function(e){return(0,r.contains)(e,t)}))}},315612:(e,t,o)=>{o.d(t,{focusSolver:()=>u});var n=o(683076),r=o(650408),a=o(970879),i=o(375416),s=o(991767),c=o(798399),l=o(46969),d=o(217913),u=function(e,t){var o=(0,c.getActiveElement)((0,i.asArray)(e).length>0?document:(0,i.getFirst)(e).ownerDocument),u=(0,a.getAllAffectedNodes)(e).filter(l.isNotAGuard),m=(0,d.getTopCommonParent)(o||e,e,u),p=new Map,h=(0,r.getFocusableNodes)(u,p),f=h.filter((function(e){var t=e.node;return(0,l.isNotAGuard)(t)}));if(f[0]){var v,g,_,E=(0,r.getFocusableNodes)([m],p).map((function(e){return e.node})),b=(v=E,g=f,_=new Map,g.forEach((function(e){return _.set(e.node,e)})),v.map((function(e){return _.get(e)})).filter(l.isDefined)),y=b.map((function(e){return e.node})),k=b.filter((function(e){return e.tabIndex>=0})).map((function(e){return e.node})),w=(0,n.newFocus)(y,k,E,o,t);if(w===n.NEW_FOCUS){var C=(0,s.pickAutofocus)(h,k,(0,d.allParentAutofocusables)(u,p))||(0,s.pickAutofocus)(h,y,(0,d.allParentAutofocusables)(u,p));return C?{node:C}:void console.warn("focus-lock: cannot find any node to move focus into")}return void 0===w?w:b[w]}}},647182:(e,t,o)=>{o.d(t,{expandFocusableNodes:()=>c});var n=o(970879),r=o(46969),a=o(217913),i=o(653296),s=o(18101),c=function(e){var t=(0,n.getAllAffectedNodes)(e).filter(r.isNotAGuard),o=(0,a.getTopCommonParent)(e,e,t),c=(0,i.orderByTabIndex)((0,s.getFocusables)([o],!0),!0,!0),l=(0,s.getFocusables)(t,!1);return c.map((function(e){var t=e.node;return{node:t,index:e.index,lockItem:l.indexOf(t)>=0,guard:(0,r.isGuard)(t)}}))}},426676:(e,t,o)=>{o.d(t,{moveFocusInside:()=>s});var n=o(47157),r=o(315612),a=0,i=!1,s=function(e,t,o){void 0===o&&(o={});var s=(0,r.focusSolver)(e,t);if(!i&&s){if(a>2)return console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),i=!0,void setTimeout((function(){i=!1}),1);a++,(0,n.focusOn)(s.node,o.focusOptions),a--}}},706440:(e,t,o)=>{o.d(t,{captureFocusRestore:()=>a});var n=o(650408);function r(e){if(!e)return null;if("undefined"==typeof WeakRef)return function(){return e||null};var t=e?new WeakRef(e):null;return function(){return(null==t?void 0:t.deref())||null}}var a=function(e){var t=function(e){if(!e)return null;for(var t=[],o=e;o&&o!==document.body;)t.push({current:r(o),parent:r(o.parentElement),left:r(o.previousElementSibling),right:r(o.nextElementSibling)}),o=o.parentElement;return{element:r(e),stack:t,ownerDocument:e.ownerDocument}}(e);return function(){return function(e){var t,o,r,a,i;if(e)for(var s=e.stack,c=e.ownerDocument,l=new Map,d=0,u=s;d<u.length;d++){var m=u[d],p=null===(t=m.parent)||void 0===t?void 0:t.call(m);if(p&&c.contains(p)){for(var h=null===(o=m.left)||void 0===o?void 0:o.call(m),f=m.current(),v=p.contains(f)?f:void 0,g=null===(r=m.right)||void 0===r?void 0:r.call(m),_=(0,n.getTabbableNodes)([p],l),E=null!==(i=null!==(a=null!=v?v:null==h?void 0:h.nextElementSibling)&&void 0!==a?a:g)&&void 0!==i?i:h;E;){for(var b=0,y=_;b<y.length;b++){var k=y[b];if(null==E?void 0:E.contains(k.node))return k.node}E=E.nextElementSibling}if(_.length)return _[0].node}}}(t)}}},264209:(e,t,o)=>{o.d(t,{focusFirstElement:()=>d,focusLastElement:()=>u,focusNextElement:()=>s,focusPrevElement:()=>c});var n=o(47157),r=o(650408),a=o(375416),i=function(e,t,o){void 0===t&&(t={});var i=function(e){return Object.assign({scope:document.body,cycle:!0,onlyTabbable:!0},e)}(t),s=function(e,t,o){if(!e||!t)return console.error("no element or scope given"),{};var n=(0,a.asArray)(t);if(n.every((function(t){return!(0,r.contains)(t,e)})))return console.error("Active element is not contained in the scope"),{};var i=o?(0,r.getTabbableNodes)(n,new Map):(0,r.getFocusableNodes)(n,new Map),s=i.findIndex((function(t){return t.node===e}));return-1!==s?{prev:i[s-1],next:i[s+1],first:i[0],last:i[i.length-1]}:void 0}(e,i.scope,i.onlyTabbable);if(s){var c=o(s,i.cycle);c&&(0,n.focusOn)(c.node,i.focusOptions)}},s=function(e,t){void 0===t&&(t={}),i(e,t,(function(e,t){var o=e.next,n=e.first;return o||t&&n}))},c=function(e,t){void 0===t&&(t={}),i(e,t,(function(e,t){var o=e.prev,n=e.last;return o||t&&n}))},l=function(e,t,o){var i,s,c,l,d=(s=e,c=null===(i=t.onlyTabbable)||void 0===i||i,{first:(l=c?(0,r.getTabbableNodes)((0,a.asArray)(s),new Map):(0,r.getFocusableNodes)((0,a.asArray)(s),new Map))[0],last:l[l.length-1]})[o];d&&(0,n.focusOn)(d.node,t.focusOptions)},d=function(e,t){void 0===t&&(t={}),l(e,t,"first")},u=function(e,t){void 0===t&&(t={}),l(e,t,"last")}},683076:(e,t,o)=>{o.d(t,{NEW_FOCUS:()=>i,newFocus:()=>s});var n=o(66095),r=o(240159),a=o(46969),i="NEW_FOCUS",s=function(e,t,o,s,c){var l=e.length,d=e[0],u=e[l-1],m=(0,a.isGuard)(s);if(!(s&&e.indexOf(s)>=0)){var p=void 0!==s?o.indexOf(s):-1,h=c?o.indexOf(c):p,f=c?e.indexOf(c):-1;if(-1===p)return-1!==f?f:i;if(-1===f)return i;var v=p-h,g=o.indexOf(d),_=o.indexOf(u),E=(0,n.correctNodes)(o),b=(void 0!==s?E.indexOf(s):-1)-(c?E.indexOf(c):p);if(!v&&f>=0)return f;if(0===t.length)return f;var y=(0,r.pickFocusable)(e,t[0]),k=(0,r.pickFocusable)(e,t[t.length-1]);return p<=g&&m&&Math.abs(v)>1?k:p>=_&&m&&Math.abs(v)>1?y:v&&Math.abs(b)>1?f:p<=g?k:p>_?y:v?Math.abs(v)>1?f:(l+f+v)%l:void 0}}},650408:(e,t,o)=>{o.d(t,{contains:()=>m,filterAutoFocusable:()=>c,getFocusableNodes:()=>d,getTabbableNodes:()=>l,parentAutofocusables:()=>u});var n=o(375416),r=o(46969),a=o(653296),i=o(18101),s=function(e,t){return(0,n.toArray)(e).filter((function(e){return(0,r.isVisibleCached)(t,e)})).filter((function(e){return(0,r.notHiddenInput)(e)}))},c=function(e,t){return void 0===t&&(t=new Map),(0,n.toArray)(e).filter((function(e){return(0,r.isAutoFocusAllowedCached)(t,e)}))},l=function(e,t,o){return(0,a.orderByTabIndex)(s((0,i.getFocusables)(e,o),t),!0,o)},d=function(e,t){return(0,a.orderByTabIndex)(s((0,i.getFocusables)(e),t),!1)},u=function(e,t){return s((0,i.getParentAutofocusables)(e),t)},m=function(e,t){return e.shadowRoot?m(e.shadowRoot,t):!(void 0===Object.getPrototypeOf(e).contains||!Object.getPrototypeOf(e).contains.call(e,t))||(0,n.toArray)(e.children).some((function(e){var o;if(e instanceof HTMLIFrameElement){var n=null===(o=e.contentDocument)||void 0===o?void 0:o.body;return!!n&&m(n,t)}return m(e,t)}))}},970879:(e,t,o)=>{o.d(t,{getAllAffectedNodes:()=>i});var n=o(659458),r=o(375416),a=function(e){return e.parentNode?a(e.parentNode):e},i=function(e){return(0,r.asArray)(e).filter(Boolean).reduce((function(e,t){var o=t.getAttribute(n.FOCUS_GROUP);return e.push.apply(e,o?function(e){for(var t=new Set,o=e.length,n=0;n<o;n+=1)for(var r=n+1;r<o;r+=1){var a=e[n].compareDocumentPosition(e[r]);(a&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&t.add(r),(a&Node.DOCUMENT_POSITION_CONTAINS)>0&&t.add(n)}return e.filter((function(e,o){return!t.has(o)}))}((0,r.toArray)(a(t).querySelectorAll("[".concat(n.FOCUS_GROUP,'="').concat(o,'"]:not([').concat(n.FOCUS_DISABLED,'="disabled"])')))):[t]),e}),[])}},375416:(e,t,o)=>{o.d(t,{asArray:()=>r,getFirst:()=>a,toArray:()=>n});var n=function(e){for(var t=Array(e.length),o=0;o<e.length;++o)t[o]=e[o];return t},r=function(e){return Array.isArray(e)?e:[e]},a=function(e){return Array.isArray(e)?e[0]:e}},991767:(e,t,o)=>{o.d(t,{pickAutofocus:()=>i});var n=o(650408),r=o(240159),a=o(46969),i=function(e,t,o){var i,s=e.map((function(e){return e.node})),c=(0,n.filterAutoFocusable)(s.filter((i=o,function(e){var t,o=null===(t=(0,a.getDataset)(e))||void 0===t?void 0:t.autofocus;return e.autofocus||void 0!==o&&"false"!==o||i.indexOf(e)>=0})));return c&&c.length?(0,r.pickFirstFocus)(c):(0,r.pickFirstFocus)((0,n.filterAutoFocusable)(t))}},66095:(e,t,o)=>{o.d(t,{correctNode:()=>r,correctNodes:()=>a});var n=o(46969),r=function(e,t){return(0,n.isRadioElement)(e)&&e.name?function(e,t){return t.filter(n.isRadioElement).filter((function(t){return t.name===e.name})).filter((function(e){return e.checked}))[0]||e}(e,t):e},a=function(e){var t=new Set;return e.forEach((function(o){return t.add(r(o,e))})),e.filter((function(e){return t.has(e)}))}},240159:(e,t,o)=>{o.d(t,{pickFirstFocus:()=>r,pickFocusable:()=>a});var n=o(66095),r=function(e){return e[0]&&e.length>1?(0,n.correctNode)(e[0],e):e[0]},a=function(e,t){return e.indexOf((0,n.correctNode)(t,e))}},798399:(e,t,o)=>{o.d(t,{getActiveElement:()=>r});var n=o(960276),r=function(e){if(void 0===e&&(e=document),e&&e.activeElement){var t=e.activeElement;return t.shadowRoot?r(t.shadowRoot):t instanceof HTMLIFrameElement&&(0,n.safeProbe)((function(){return t.contentWindow.document}))?r(t.contentWindow.document):t}}},46969:(e,t,o)=>{o.d(t,{getDataset:()=>l,isAutoFocusAllowedCached:()=>c,isDefined:()=>v,isGuard:()=>h,isNotAGuard:()=>f,isRadioElement:()=>u,isVisibleCached:()=>s,notHiddenInput:()=>m});var n=o(659458),r=function(e){return e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?e.parentNode.host:e.parentNode},a=function(e){return e===document||e&&e.nodeType===Node.DOCUMENT_NODE},i=function(e,t){return!e||a(e)||!function(e){if(e.nodeType!==Node.ELEMENT_NODE)return!1;var t=window.getComputedStyle(e,null);return!(!t||!t.getPropertyValue||"none"!==t.getPropertyValue("display")&&"hidden"!==t.getPropertyValue("visibility"))}(e)&&!function(e){return e.hasAttribute("inert")}(e)&&t(r(e))},s=function(e,t){var o=e.get(t);if(void 0!==o)return o;var n=i(t,s.bind(void 0,e));return e.set(t,n),n},c=function(e,t){var o=e.get(t);if(void 0!==o)return o;var n=function(e,t){return!(e&&!a(e))||!!p(e)&&t(r(e))}(t,c.bind(void 0,e));return e.set(t,n),n},l=function(e){return e.dataset},d=function(e){return"INPUT"===e.tagName},u=function(e){return d(e)&&"radio"===e.type},m=function(e){return!((d(e)||function(e){return"BUTTON"===e.tagName}(e))&&("hidden"===e.type||e.disabled))},p=function(e){var t=e.getAttribute(n.FOCUS_NO_AUTOFOCUS);return![!0,"true",""].includes(t)},h=function(e){var t;return Boolean(e&&(null===(t=l(e))||void 0===t?void 0:t.focusGuard))},f=function(e){return!h(e)},v=function(e){return Boolean(e)}},217913:(e,t,o)=>{o.d(t,{allParentAutofocusables:()=>c,getTopCommonParent:()=>s});var n=o(650408),r=o(375416),a=function(e,t){return void 0===t&&(t=[]),t.push(e),e.parentNode&&a(e.parentNode.host||e.parentNode,t),t},i=function(e,t){for(var o=a(e),n=a(t),r=0;r<o.length;r+=1){var i=o[r];if(n.indexOf(i)>=0)return i}return!1},s=function(e,t,o){var a=(0,r.asArray)(e),s=(0,r.asArray)(t),c=a[0],l=!1;return s.filter(Boolean).forEach((function(e){l=i(l||e,e)||l,o.filter(Boolean).forEach((function(e){var t=i(c,e);t&&(l=!l||(0,n.contains)(t,l)?t:i(t,l))}))})),l},c=function(e,t){return e.reduce((function(e,o){return e.concat((0,n.parentAutofocusables)(o,t))}),[])}},960276:(e,t,o)=>{o.d(t,{safeProbe:()=>n});var n=function(e){try{return e()}catch(e){return}}},653296:(e,t,o)=>{o.d(t,{orderByTabIndex:()=>a});var n=o(375416),r=function(e,t){var o=Math.max(0,e.tabIndex),n=Math.max(0,t.tabIndex),r=o-n,a=e.index-t.index;if(r){if(!o)return 1;if(!n)return-1}return r||a},a=function(e,t,o){return(0,n.toArray)(e).map((function(e,t){var n=function(e){return e.tabIndex<0&&!e.hasAttribute("tabindex")?0:e.tabIndex}(e);return{node:e,index:t,tabIndex:o&&-1===n?(e.dataset||{}).focusGuard?0:-1:n}})).filter((function(e){return!t||e.tabIndex>=0})).sort(r)}},18101:(e,t,o)=>{o.d(t,{getFocusables:()=>c,getParentAutofocusables:()=>l});var n=o(659458),r=o(375416),a=o(924689).tabbables.join(","),i="".concat(a,", [data-focus-guard]"),s=function(e,t){return(0,r.toArray)((e.shadowRoot||e).children).reduce((function(e,o){return e.concat(o.matches(t?i:a)?[o]:[],s(o))}),[])},c=function(e,t){return e.reduce((function(e,o){var n,i=s(o,t),l=(n=[]).concat.apply(n,i.map((function(e){return function(e,t){var o;return e instanceof HTMLIFrameElement&&(null===(o=e.contentDocument)||void 0===o?void 0:o.body)?c([e.contentDocument.body],t):[e]}(e,t)})));return e.concat(l,o.parentNode?(0,r.toArray)(o.parentNode.querySelectorAll(a)).filter((function(e){return e===o})):[])}),[])},l=function(e){var t=e.querySelectorAll("[".concat(n.FOCUS_AUTO,"]"));return(0,r.toArray)(t).map((function(e){return c([e])})).reduce((function(e,t){return e.concat(t)}),[])}},924689:(e,t,o)=>{o.d(t,{tabbables:()=>n});var n=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"]},536683:()=>{},379755:()=>{},504923:()=>{},852483:()=>{},133063:()=>{},962383:()=>{},60323:()=>{},608567:()=>{},357765:()=>{},203195:()=>{},943371:()=>{},721403:()=>{},685203:()=>{},797523:()=>{},733835:()=>{},80875:()=>{},626235:()=>{},637495:()=>{},341899:()=>{},683027:()=>{},549111:()=>{},489251:()=>{},884667:()=>{},978905:()=>{},796698:()=>{},182347:()=>{},470287:()=>{},11699:()=>{},176115:()=>{},729983:()=>{},99579:()=>{},819719:()=>{},309985:()=>{},171291:()=>{},414683:()=>{},625019:()=>{},12005:()=>{},863251:()=>{},604179:()=>{},567815:()=>{},654982:()=>{},36819:()=>{},836413:()=>{},752091:()=>{},595931:()=>{},707122:(e,t,o)=>{o.d(t,{default:()=>n});const n={banner:"AvatarSuggestionRow-module__banner--eGRGM",character:"AvatarSuggestionRow-module__character--KkvTP",placeholder:"AvatarSuggestionRow-module__placeholder--KSNYt"}},463306:(e,t,o)=>{o.d(t,{default:()=>n});const n={emoji:"Emoji-module__emoji--TaIGF"}},744562:(e,t,o)=>{o.d(t,{default:()=>n});const n={item:"EmojiItem-module__item--uN2hU",itemActive:"EmojiItem-module__itemActive--ki278"}},908066:(e,t,o)=>{o.d(t,{default:()=>n});const n={keyboard:"EmojiKeyboard-module__keyboard--S0TS4",scroll:"EmojiKeyboard-module__scroll--Z6QkW",in:"EmojiKeyboard-module__in--uXIEN",item:"EmojiKeyboard-module__item--WospX",itemHeader:"EmojiKeyboard-module__itemHeader--U9ggI"}},586070:(e,t,o)=>{o.d(t,{default:()=>n});const n={header:"EmojiKeyboardHeader-module__header--TVWvF",headerWide:"EmojiKeyboardHeader-module__headerWide--e3DNC",headerRegular:"EmojiKeyboardHeader-module__headerRegular--yGl2Q",headerAdaptive:"EmojiKeyboardHeader-module__headerAdaptive--tCJxs",headerSmall:"EmojiKeyboardHeader-module__headerSmall--nn1xg",headerCompact:"EmojiKeyboardHeader-module__headerCompact--UVbey",title:"EmojiKeyboardHeader-module__title--PiK_M"}},379482:(e,t,o)=>{o.d(t,{default:()=>n});const n={row:"EmojiKeyboardRow-module__row--p_0Uh",rowWide:"EmojiKeyboardRow-module__rowWide--GoPtY",rowRegular:"EmojiKeyboardRow-module__rowRegular--vJoFW",rowAdaptive:"EmojiKeyboardRow-module__rowAdaptive--WgL5l",rowSmall:"EmojiKeyboardRow-module__rowSmall--PX4_n",rowCompact:"EmojiKeyboardRow-module__rowCompact--NII_p",emoji:"EmojiKeyboardRow-module__emoji--zhit4"}},120338:(e,t,o)=>{o.d(t,{default:()=>n});const n={keyboard:"StickersEmojiKeyboard-module__keyboard--NDNV7",keyboardWide:"StickersEmojiKeyboard-module__keyboardWide--EQCpB",keyboardCompact:"StickersEmojiKeyboard-module__keyboardCompact--fap13",keyboardRegular:"StickersEmojiKeyboard-module__keyboardRegular--gcobA",keyboardAdaptive:"StickersEmojiKeyboard-module__keyboardAdaptive--uuxWL",keyboardSmall:"StickersEmojiKeyboard-module__keyboardSmall--qSlfu",in:"StickersEmojiKeyboard-module__in--GCR5_"}},683706:(e,t,o)=>{o.d(t,{default:()=>n});const n={keyboard:"StickersKeyboard-module__keyboard--HhSGu",scroll:"StickersKeyboard-module__scroll--B3uRG",scrollDisabled:"StickersKeyboard-module__scrollDisabled--eFR0P",in:"StickersKeyboard-module__in--SrA5_",item:"StickersKeyboard-module__item--RVgIo",itemHeader:"StickersKeyboard-module__itemHeader--UiOMF"}},24722:(e,t,o)=>{o.d(t,{default:()=>n});const n={group:"StickersKeyboardGroup-module__group--SaD_D",groupActive:"StickersKeyboardGroup-module__groupActive--FCxnW",groupHidden:"StickersKeyboardGroup-module__groupHidden--oelXz",item:"StickersKeyboardGroup-module__item--kWotN"}},366114:(e,t,o)=>{o.d(t,{default:()=>n});const n={in:"Icon-module__in--LRLH3"}},704498:(e,t,o)=>{o.d(t,{default:()=>n});const n={in:"StickersKeyboardGroupItem-module__in--CKjkC",inPlaceholder:"StickersKeyboardGroupItem-module__inPlaceholder--nDIkG",inActive:"StickersKeyboardGroupItem-module__inActive--iqstp",inHidden:"StickersKeyboardGroupItem-module__inHidden--LDS5f",icon:"StickersKeyboardGroupItem-module__icon--XsoKM",iconService:"StickersKeyboardGroupItem-module__iconService--v_5Us",inIndicator:"StickersKeyboardGroupItem-module__inIndicator--qfChl",inIndicatorRed:"StickersKeyboardGroupItem-module__inIndicatorRed--mfiwZ",inIndicatorGray:"StickersKeyboardGroupItem-module__inIndicatorGray--nmH3R",tooltip:"StickersKeyboardGroupItem-module__tooltip--k5ROd"}},903482:(e,t,o)=>{o.d(t,{default:()=>n});const n={button:"ShopButton-module__button--dpi8u"}},377802:(e,t,o)=>{o.d(t,{default:()=>n});const n={groups:"StickersKeyboardGroups-module__groups--D_rpD",container:"StickersKeyboardGroups-module__container--qnM6L",in:"StickersKeyboardGroups-module__in--LGJQC",items:"StickersKeyboardGroups-module__items--yuHSj",group:"StickersKeyboardGroups-module__group--jgk6H",groupIn:"StickersKeyboardGroups-module__groupIn--Rl88a",chevron:"StickersKeyboardGroups-module__chevron--bVU_v",shadow:"StickersKeyboardGroups-module__shadow--_mze3",groupsForced:"StickersKeyboardGroups-module__groupsForced--JQmGC",shadowVisible:"StickersKeyboardGroups-module__shadowVisible--QazqK",shadowLeft:"StickersKeyboardGroups-module__shadowLeft--Af04P",shadowRight:"StickersKeyboardGroups-module__shadowRight--uhxM3",chevronActive:"StickersKeyboardGroups-module__chevronActive--iEtYU",chevronLeft:"StickersKeyboardGroups-module__chevronLeft--HV3LI",chevronRight:"StickersKeyboardGroups-module__chevronRight--W2OoP"}},128823:(e,t,o)=>{o.d(t,{default:()=>n});const n={peer:"GiftButton-module__peer--Roaf8"}},684608:(e,t,o)=>{o.d(t,{default:()=>n});const n={tooltip:"PeerInfo-module__tooltip--oh4tT",text:"PeerInfo-module__text--e0b2H",icon:"PeerInfo-module__icon--IHiet"}},402968:(e,t,o)=>{o.d(t,{default:()=>n});const n={header:"StickersKeyboardHeader-module__header--xV4wQ",headerWide:"StickersKeyboardHeader-module__headerWide--zmtrG",headerRegular:"StickersKeyboardHeader-module__headerRegular--qtnWn",headerAdaptive:"StickersKeyboardHeader-module__headerAdaptive--ovPUg",headerSmall:"StickersKeyboardHeader-module__headerSmall--Z1U1u",headerCompact:"StickersKeyboardHeader-module__headerCompact--Jtngb",headerAside:"StickersKeyboardHeader-module__headerAside--baqTV",title:"StickersKeyboardHeader-module__title--KIn6h",icon:"StickersKeyboardHeader-module__icon--xG3gi"}},561865:(e,t,o)=>{o.d(t,{default:()=>n});const n={icon:"StyleSettingsButton-module__icon--kV7Xh"}},274761:(e,t,o)=>{o.d(t,{default:()=>n});const n={tooltip:"Tooltip-module__tooltip--hXKeG",icon:"Tooltip-module__icon--r0CMV"}},661273:(e,t,o)=>{o.d(t,{default:()=>n});const n={brush:"VmojiEditButton-module__brush--ePe_r",counter:"VmojiEditButton-module__counter--pQbPl"}},504402:(e,t,o)=>{o.d(t,{default:()=>n});const n={row:"StickersKeyboardRow-module__row--rSTw0",rowWide:"StickersKeyboardRow-module__rowWide--SqyXn",rowRegular:"StickersKeyboardRow-module__rowRegular--OrVVI",rowAdaptive:"StickersKeyboardRow-module__rowAdaptive--oty8d",rowSmall:"StickersKeyboardRow-module__rowSmall--Lid9S",rowCompact:"StickersKeyboardRow-module__rowCompact--RdH0D",rowStickers:"StickersKeyboardRow-module__rowStickers--yfhOE",sticker:"StickersKeyboardRow-module__sticker--m7W0R",stickerRichIcon:"StickersKeyboardRow-module__stickerRichIcon--AP31W"}},487066:(e,t,o)=>{o.d(t,{default:()=>n});const n={card:"StickersKeyboardRowCard-module__card--mjZxc",hide:"StickersKeyboardRowCard-module__hide--wJMEC",image:"StickersKeyboardRowCard-module__image--AOl2R",title:"StickersKeyboardRowCard-module__title--d7X63",action:"StickersKeyboardRowCard-module__action--WLWqS"}},926756:(e,t,o)=>{o.d(t,{default:()=>n});const n={tabbar:"Tabbar-module__tabbar--BM4FY",item:"Tabbar-module__item--go6yE"}},75378:(e,t,o)=>{o.d(t,{default:()=>n});const n={item:"TabbarItem-module__item--ZNNPf",itemActive:"TabbarItem-module__itemActive--V_wMj",indicator:"TabbarItem-module__indicator--_3TfR",indicatorNone:"TabbarItem-module__indicatorNone--WNOVV",indicatorPrimary:"TabbarItem-module__indicatorPrimary--AnXZT",indicatorSecondary:"TabbarItem-module__indicatorSecondary--tycLm",indicatorDestructive:"TabbarItem-module__indicatorDestructive--SFvfQ"}},487782:(e,t,o)=>{o.d(t,{default:()=>n});const n={view:"View-module__view--D7qOP",panel:"View-module__panel--WNKKi",panelSwitched:"View-module__panelSwitched--hg3jP"}},503416:(e,t,o)=>{o.d(t,{default:()=>n});const n={iconAnimated:"PopupWrapper-module__iconAnimated--jlPzq",horizontalTremble:"PopupWrapper-module__horizontalTremble--RrOKq",stickerAnimationIsPlaying:"PopupWrapper-module__stickerAnimationIsPlaying--yaedE"}},404308:(e,t,o)=>{o.d(t,{default:()=>n});const n={wrapper:"Wrapper-module__wrapper--UjlcM",wrapperFlex:"Wrapper-module__wrapperFlex--g0FiZ",wrapperFlexLeft:"Wrapper-module__wrapperFlexLeft--toZla",wrapperFlexRight:"Wrapper-module__wrapperFlexRight--EzB15",icon:"Wrapper-module__icon--FlANj",iconAbsolute:"Wrapper-module__iconAbsolute--Z0rTi",iconAbsoluteLeft:"Wrapper-module__iconAbsoluteLeft--q4aty",iconAbsoluteRight:"Wrapper-module__iconAbsoluteRight--ooVCb",iconAbsoluteInsetLeft:"Wrapper-module__iconAbsoluteInsetLeft--FMAKS",iconAbsoluteInsetRight:"Wrapper-module__iconAbsoluteInsetRight--_WGDJ",iconRelative:"Wrapper-module__iconRelative--o019B",iconRelativeLeft:"Wrapper-module__iconRelativeLeft--gRekN",iconRelativeRight:"Wrapper-module__iconRelativeRight--Be_dd"}},172469:(e,t,o)=>{o.d(t,{default:()=>n});const n={wrapper:"LottiePlayer-module__wrapper--WKJe6",wrapperClickable:"LottiePlayer-module__wrapperClickable--xT2Sp"}},372434:(e,t,o)=>{o.d(t,{default:()=>n});const n={wrapper:"BackgroundLayer-module__wrapper--PKORq"}},558850:(e,t,o)=>{o.d(t,{default:()=>n});const n={wrapper:"GradientLayer-module__wrapper--uNLXZ"}},368730:(e,t,o)=>{o.d(t,{default:()=>n});const n={wrapper:"PlayBackArea-module__wrapper--SITxd",area:"PlayBackArea-module__area--oyypB"}},208932:(e,t,o)=>{o.d(t,{default:()=>n});const n={wrapper:"PopupRoot-module__wrapper--VTIvI"}},483093:(e,t,o)=>{o.d(t,{default:()=>i});var n=o(777387),r=o(364467),a=o(296540);const i=function(e,t){return function(o){var i,s=[];function c(){i=e(s.map((function(e){return e.props}))),t(i)}var l=function(e){function t(){return e.apply(this,arguments)||this}(0,n.default)(t,e),t.peek=function(){return i};var r=t.prototype;return r.componentDidMount=function(){s.push(this),c()},r.componentDidUpdate=function(){c()},r.componentWillUnmount=function(){var e=s.indexOf(this);s.splice(e,1),c()},r.render=function(){return a.createElement(o,this.props)},t}(a.PureComponent);return(0,r.default)(l,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(o)+")"),l}}},975846:(e,t,o)=>{o.d(t,{default:()=>d});var n=o(198587),r=o(58168),a=o(296540),i=o(671142),s=o(725762),c=a.forwardRef((function(e,t){return a.createElement(i.default,(0,r.default)({sideCar:s.default,ref:t},e))})),l=i.default.propTypes||{};l.sideCar,(0,n.default)(l,["sideCar"]);c.propTypes={};const d=c},474612:(e,t,o)=>{o.d(t,{hiddenGuard:()=>r});var n=o(296540),r={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},a=function(e){var t=e.children,o=void 0===t?null:t;return n.createElement(n.Fragment,null,n.createElement("div",{key:"guard-first","data-focus-guard":!0,"data-focus-auto-guard":!0,style:r}),o,o&&n.createElement("div",{key:"guard-last","data-focus-guard":!0,"data-focus-auto-guard":!0,style:r}))};a.propTypes={}},671142:(e,t,o)=>{o.d(t,{default:()=>m});var n=o(58168),r=o(296540),a=o(659458),i=o(168728),s=o(474612),c=o(318378),l=o(157153),d=[],u=r.forwardRef((function(e,t){var o,u=r.useState(),m=u[0],p=u[1],h=r.useRef(),f=r.useRef(!1),v=r.useRef(null),g=r.useState({})[1],_=e.children,E=e.disabled,b=void 0!==E&&E,y=e.noFocusGuards,k=void 0!==y&&y,w=e.persistentFocus,C=void 0!==w&&w,A=e.crossFrame,S=void 0===A||A,I=e.autoFocus,P=void 0===I||I,x=(e.allowTextSelection,e.group),N=e.className,R=e.whiteList,T=e.hasPositiveIndices,M=e.shards,O=void 0===M?d:M,L=e.as,D=void 0===L?"div":L,j=e.lockProps,F=void 0===j?{}:j,U=e.sideCar,B=e.returnFocus,V=void 0!==B&&B,K=e.focusOptions,H=e.onActivation,G=e.onDeactivation,$=r.useState({})[0],W=r.useCallback((function(e){var t=e.captureFocusRestore;if(!v.current){var o,n=null==(o=document)?void 0:o.activeElement;v.current=n,n!==document.body&&(v.current=t(n))}h.current&&H&&H(h.current),f.current=!0,g()}),[H]),z=r.useCallback((function(){f.current=!1,G&&G(h.current),g()}),[G]),q=r.useCallback((function(e){var t=v.current;if(t){var o=("function"==typeof t?t():t)||document.body,n="function"==typeof V?V(o):V;if(n){var r="object"==typeof n?n:void 0;v.current=null,e?Promise.resolve().then((function(){return o.focus(r)})):o.focus(r)}}}),[V]),Y=r.useCallback((function(e){f.current&&c.mediumFocus.useMedium(e)}),[]),J=c.mediumBlur.useMedium,X=r.useCallback((function(e){h.current!==e&&(h.current=e,p(e))}),[]);var Z=(0,n.default)(((o={})[a.FOCUS_DISABLED]=b&&"disabled",o[a.FOCUS_GROUP]=x,o),F),Q=!0!==k,ee=Q&&"tail"!==k,te=(0,i.useMergeRefs)([t,X]),oe=r.useMemo((function(){return{observed:h,shards:O,enabled:!b,active:f.current}}),[b,f.current,O,m]);return r.createElement(r.Fragment,null,Q&&[r.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:b?-1:0,style:s.hiddenGuard}),T?r.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:b?-1:1,style:s.hiddenGuard}):null],!b&&r.createElement(U,{id:$,sideCar:c.mediumSidecar,observed:m,disabled:b,persistentFocus:C,crossFrame:S,autoFocus:P,whiteList:R,shards:O,onActivation:W,onDeactivation:z,returnFocus:q,focusOptions:K}),r.createElement(D,(0,n.default)({ref:te},Z,{className:N,onBlur:J,onFocus:Y}),r.createElement(l.focusScope.Provider,{value:oe},_)),ee&&r.createElement("div",{"data-focus-guard":!0,tabIndex:b?-1:0,style:s.hiddenGuard}))}));u.propTypes={};const m=u},725762:(e,t,o)=>{o.d(t,{default:()=>S});o(296540);var n=o(483093),r=o(453463),a=o(522671),i=o(426676),s=o(647182),c=o(264209),l=o(706440),d=o(694353),u=o(318378),m=function(){return document&&document.activeElement===document.body||(0,r.focusIsHidden)()},p=null,h=null,f=null,v=!1,g=function(){return!0};function _(e,t,o,n){var r=null,a=e;do{var i=n[a];if(i.guard)i.node.dataset.focusAutoGuard&&(r=i);else{if(!i.lockItem)break;if(a!==e)return;r=null}}while((a+=o)!==t);r&&(r.node.tabIndex=0)}var E=function e(t,o,n){return o&&(o.host===t&&(!o.activeElement||n.contains(o.activeElement))||o.parentNode&&e(t,o.parentNode,n))},b=function(){var e,t=!1;if(p){var o=p,n=o.observed,r=o.persistentFocus,c=o.autoFocus,l=o.shards,u=o.crossFrame,b=o.focusOptions,y=n||f&&f.portaledElement,k=document&&document.activeElement;if(y){var w=[y].concat(l.map(d.extractRef).filter(Boolean));if(k&&!function(e){return(p.whiteList||g)(e)}(k)||(r||(u?Boolean(v):"meanwhile"===v)||!m()||!h&&c)&&(y&&!((0,a.focusInside)(w)||k&&function(e,t){return t.some((function(t){return E(e,t,t)}))}(k,w)||(e=k,f&&f.portaledElement===e))&&(document&&!h&&k&&!c?(k.blur&&k.blur(),document.body.focus()):(t=(0,i.moveFocusInside)(w,h,{focusOptions:b}),f={})),v=!1,h=document&&document.activeElement),document&&k!==document.activeElement&&document.querySelector("[data-focus-auto-guard]")){var C=document&&document.activeElement,A=(0,s.expandFocusableNodes)(w),S=A.map((function(e){return e.node})).indexOf(C);S>-1&&(A.filter((function(e){var t=e.guard,o=e.node;return t&&o.dataset.focusAutoGuard})).forEach((function(e){return e.node.removeAttribute("tabIndex")})),_(S,A.length,1,A),_(S,-1,-1,A))}}}return t},y=function(e){b()&&e&&(e.stopPropagation(),e.preventDefault())},k=function(){return(0,d.deferAction)(b)},w=function(e){var t=e.target,o=e.currentTarget;o.contains(t)||(f={observerNode:o,portaledElement:t})},C=function(){v="just",(0,d.deferAction)((function(){v="meanwhile"}))};var A={moveFocusInside:i.moveFocusInside,focusInside:a.focusInside,focusNextElement:c.focusNextElement,focusPrevElement:c.focusPrevElement,focusFirstElement:c.focusFirstElement,focusLastElement:c.focusLastElement,captureFocusRestore:l.captureFocusRestore};u.mediumFocus.assignSyncMedium(w),u.mediumBlur.assignMedium(k),u.mediumEffect.assignMedium((function(e){return e(A)}));const S=(0,n.default)((function(e){return e.filter((function(e){return!e.disabled}))}),(function(e){var t=e.slice(-1)[0];t&&!p&&(document.addEventListener("focusin",y),document.addEventListener("focusout",k),window.addEventListener("blur",C));var o=p,n=o&&t&&t.id===o.id;p=t,o&&!n&&(o.onDeactivation(),e.filter((function(e){return e.id===o.id})).length||o.returnFocus(!t)),t?(h=null,n&&o.observed===t.observed||t.onActivation(A),b(),(0,d.deferAction)(b)):(document.removeEventListener("focusin",y),document.removeEventListener("focusout",k),window.removeEventListener("blur",C),h=null)}))((function(){return null}))},327275:(e,t,o)=>{o.d(t,{useFocusController:()=>r.useFocusController,useFocusScope:()=>r.useFocusScope,useFocusState:()=>a.useFocusState});var n=o(671142),r=o(833166),a=o(859383);n.default},377833:(e,t,o)=>{o.d(t,{default:()=>a,useFocusController:()=>r.useFocusController,useFocusScope:()=>r.useFocusScope,useFocusState:()=>r.useFocusState});var n=o(975846),r=o(327275);const a=n.default},318378:(e,t,o)=>{o.d(t,{mediumBlur:()=>a,mediumEffect:()=>i,mediumFocus:()=>r,mediumSidecar:()=>s});var n=o(857309),r=(0,n.createMedium)({},(function(e){return{target:e.target,currentTarget:e.currentTarget}})),a=(0,n.createMedium)(),i=(0,n.createMedium)(),s=(0,n.createSidecarMedium)({async:!0,ssr:"undefined"!=typeof document})},571313:(e,t,o)=>{o.d(t,{createNanoEvents:()=>n});var n=function(){return{emit:function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];for(var r=0,a=this.events[e]||[],i=a.length;r<i;r++)a[r].apply(a,o)},events:{},on:function(e,t){var o,n=this;return((o=this.events)[e]||(o[e]=[])).push(t),function(){var o;n.events[e]=null==(o=n.events[e])?void 0:o.filter((function(e){return t!==e}))}}}}},157153:(e,t,o)=>{o.d(t,{focusScope:()=>n});var n=(0,o(296540).createContext)(void 0)},833166:(e,t,o)=>{o.d(t,{useFocusController:()=>d,useFocusScope:()=>u});var n=o(58168),r=o(296540),a=o(157153),i=o(318378),s=o(694353),c=function(e){return e.map(s.extractRef).filter(Boolean)},l=function(e){return new Promise((function(t){return i.mediumEffect.useMedium((function(){t(e.apply(void 0,arguments))}))}))},d=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];if(!t.length)throw new Error("useFocusController requires at least one target element");var a=(0,r.useRef)(t);return a.current=t,(0,r.useMemo)((function(){return{autoFocus:function(e){return void 0===e&&(e={}),l((function(t){return t.moveFocusInside(c(a.current),null,e)}))},focusNext:function(e){return l((function(t){t.moveFocusInside(c(a.current),null),t.focusNextElement(document.activeElement,(0,n.default)({scope:c(a.current)},e))}))},focusPrev:function(e){return l((function(t){t.moveFocusInside(c(a.current),null),t.focusPrevElement(document.activeElement,(0,n.default)({scope:c(a.current)},e))}))},focusFirst:function(e){return l((function(t){t.focusFirstElement(c(a.current),e)}))},focusLast:function(e){return l((function(t){t.focusLastElement(c(a.current),e)}))}}}),[])},u=function(){var e=(0,r.useContext)(a.focusScope);if(!e)throw new Error("FocusLock is required to operate with FocusScope");return d.apply(void 0,[e.observed].concat(e.shards))}},859383:(e,t,o)=>{o.d(t,{useFocusState:()=>l});var n=o(296540),r=(0,o(571313).createNanoEvents)(),a=0,i=function(e){return r.emit("assign",e.target)},s=function(e){return r.emit("reset",e.target)},c=function(e,t){return e===t?"self":t.contains(e)?"within":"within-boundary"},l=function(e){void 0===e&&(e={});var t=(0,n.useState)(!1),o=t[0],l=t[1],d=(0,n.useState)(""),u=d[0],m=d[1],p=(0,n.useRef)(null),h=(0,n.useRef)({}),f=(0,n.useRef)(!1);(0,n.useEffect)((function(){if(p.current){var t=p.current===document.activeElement||p.current.contains(document.activeElement);l(t),m(c(document.activeElement,p.current)),t&&e.onFocus&&e.onFocus()}}),[]);var v=(0,n.useCallback)((function(e){h.current={focused:!0,state:c(e.target,e.currentTarget)}}),[]);return(0,n.useEffect)((function(){return a||(document.addEventListener("focusin",i),document.addEventListener("focusout",s)),a+=1,function(){(a-=1)||(document.removeEventListener("focusin",i),document.removeEventListener("focusout",s))}}),[]),(0,n.useEffect)((function(){var t=r.on("reset",(function(){h.current={}})),o=r.on("assign",(function(){var t=h.current.focused||!1;l(t),m(h.current.state||""),t!==f.current&&(f.current=t,t?e.onFocus&&e.onFocus():e.onBlur&&e.onBlur())}));return function(){t(),o()}}),[]),{active:o,state:u,onFocus:v,ref:p}}},694353:(e,t,o)=>{function n(e){setTimeout(e,1)}o.d(t,{deferAction:()=>n,extractRef:()=>r});var r=function(e){return e&&"current"in e?e.current:e}},573510:(e,t,o)=>{o.d(t,{default:()=>p});var n=o(58168),r=o(198587),a=o(777387),i=o(470922),s=o(878995),c=o(296540),l=o(475067),d=o(792403),u=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,s.default)(e,t)}))},m=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,o){var n=t.resolveArguments(e,o),r=n[0],a=n[1];t.removeClasses(r,"exit"),t.addClass(r,a?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,o)},t.onEntering=function(e,o){var n=t.resolveArguments(e,o),r=n[0],a=n[1]?"appear":"enter";t.addClass(r,a,"active"),t.props.onEntering&&t.props.onEntering(e,o)},t.onEntered=function(e,o){var n=t.resolveArguments(e,o),r=n[0],a=n[1]?"appear":"enter";t.removeClasses(r,a),t.addClass(r,a,"done"),t.props.onEntered&&t.props.onEntered(e,o)},t.onExit=function(e){var o=t.resolveArguments(e)[0];t.removeClasses(o,"appear"),t.removeClasses(o,"enter"),t.addClass(o,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var o=t.resolveArguments(e)[0];t.addClass(o,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var o=t.resolveArguments(e)[0];t.removeClasses(o,"exit"),t.addClass(o,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,o){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,o]},t.getClassNames=function(e){var o=t.props.classNames,n="string"==typeof o,r=n?""+(n&&o?o+"-":"")+e:o[e];return{baseClassName:r,activeClassName:n?r+"-active":o[e+"Active"],doneClassName:n?r+"-done":o[e+"Done"]}},t}(0,a.default)(t,e);var o=t.prototype;return o.addClass=function(e,t,o){var n=this.getClassNames(t)[o+"ClassName"],r=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===o&&r&&(n+=" "+r),"active"===o&&e&&(0,d.forceReflow)(e),n&&(this.appliedClasses[t][o]=n,function(e,t){e&&t&&t.split(" ").forEach((function(t){return(0,i.default)(e,t)}))}(e,n))},o.removeClasses=function(e,t){var o=this.appliedClasses[t],n=o.base,r=o.active,a=o.done;this.appliedClasses[t]={},n&&u(e,n),r&&u(e,r),a&&u(e,a)},o.render=function(){var e=this.props,t=(e.classNames,(0,r.default)(e,["classNames"]));return c.createElement(l.default,(0,n.default)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(c.Component);m.defaultProps={classNames:""},m.propTypes={};const p=m},475067:(e,t,o)=>{o.d(t,{default:()=>g});var n=o(198587),r=o(777387),a=o(296540),i=o(440961),s=o(113642),c=o(17241),l=o(792403),d="unmounted",u="exited",m="entering",p="entered",h="exiting",f=function(e){function t(t,o){var n;n=e.call(this,t,o)||this;var r,a=o&&!o.isMounting?t.enter:t.appear;return n.appearStatus=null,t.in?a?(r=u,n.appearStatus=m):r=p:r=t.unmountOnExit||t.mountOnEnter?d:u,n.state={status:r},n.nextCallback=null,n}(0,r.default)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===d?{status:u}:null};var o=t.prototype;return o.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},o.componentDidUpdate=function(e){var t=null;if(e!==this.props){var o=this.state.status;this.props.in?o!==m&&o!==p&&(t=m):o!==m&&o!==p||(t=h)}this.updateStatus(!1,t)},o.componentWillUnmount=function(){this.cancelNextCallback()},o.getTimeouts=function(){var e,t,o,n=this.props.timeout;return e=t=o=n,null!=n&&"number"!=typeof n&&(e=n.exit,t=n.enter,o=void 0!==n.appear?n.appear:t),{exit:e,enter:t,appear:o}},o.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===m){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:i.findDOMNode(this);o&&(0,l.forceReflow)(o)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===u&&this.setState({status:d})},o.performEnter=function(e){var t=this,o=this.props.enter,n=this.context?this.context.isMounting:e,r=this.props.nodeRef?[n]:[i.findDOMNode(this),n],a=r[0],c=r[1],l=this.getTimeouts(),d=n?l.appear:l.enter;!e&&!o||s.default.disabled?this.safeSetState({status:p},(function(){t.props.onEntered(a)})):(this.props.onEnter(a,c),this.safeSetState({status:m},(function(){t.props.onEntering(a,c),t.onTransitionEnd(d,(function(){t.safeSetState({status:p},(function(){t.props.onEntered(a,c)}))}))})))},o.performExit=function(){var e=this,t=this.props.exit,o=this.getTimeouts(),n=this.props.nodeRef?void 0:i.findDOMNode(this);t&&!s.default.disabled?(this.props.onExit(n),this.safeSetState({status:h},(function(){e.props.onExiting(n),e.onTransitionEnd(o.exit,(function(){e.safeSetState({status:u},(function(){e.props.onExited(n)}))}))}))):this.safeSetState({status:u},(function(){e.props.onExited(n)}))},o.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},o.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},o.setNextCallback=function(e){var t=this,o=!0;return this.nextCallback=function(n){o&&(o=!1,t.nextCallback=null,e(n))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},o.onTransitionEnd=function(e,t){this.setNextCallback(t);var o=this.props.nodeRef?this.props.nodeRef.current:i.findDOMNode(this),n=null==e&&!this.props.addEndListener;if(o&&!n){if(this.props.addEndListener){var r=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],a=r[0],s=r[1];this.props.addEndListener(a,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},o.render=function(){var e=this.state.status;if(e===d)return null;var t=this.props,o=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,n.default)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return a.createElement(c.default.Provider,{value:null},"function"==typeof o?o(e,r):a.cloneElement(a.Children.only(o),r))},t}(a.Component);function v(){}f.contextType=c.default,f.propTypes={},f.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:v,onEntering:v,onEntered:v,onExit:v,onExiting:v,onExited:v},f.UNMOUNTED=d,f.EXITED=u,f.ENTERING=m,f.ENTERED=p,f.EXITING=h;const g=f},280004:(e,t,o)=>{o.d(t,{default:()=>m});var n=o(198587),r=o(58168),a=o(109417),i=o(777387),s=o(296540),c=o(17241),l=o(454922),d=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},u=function(e){function t(t,o){var n,r=(n=e.call(this,t,o)||this).handleExited.bind((0,a.default)(n));return n.state={contextValue:{isMounting:!0},handleExited:r,firstRender:!0},n}(0,i.default)(t,e);var o=t.prototype;return o.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},o.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var o=t.children,n=t.handleExited;return{children:t.firstRender?(0,l.getInitialChildMapping)(e,n):(0,l.getNextChildMapping)(e,o,n),firstRender:!1}},o.handleExited=function(e,t){var o=(0,l.getChildMapping)(this.props.children);e.key in o||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var o=(0,r.default)({},t.children);return delete o[e.key],{children:o}})))},o.render=function(){var e=this.props,t=e.component,o=e.childFactory,r=(0,n.default)(e,["component","childFactory"]),a=this.state.contextValue,i=d(this.state.children).map(o);return delete r.appear,delete r.enter,delete r.exit,null===t?s.createElement(c.default.Provider,{value:a},i):s.createElement(c.default.Provider,{value:a},s.createElement(t,r,i))},t}(s.Component);u.propTypes={},u.defaultProps={component:"div",childFactory:function(e){return e}};const m=u},17241:(e,t,o)=>{o.d(t,{default:()=>n});const n=o(296540).createContext(null)},113642:(e,t,o)=>{o.d(t,{default:()=>n});const n={disabled:!1}},454922:(e,t,o)=>{o.d(t,{getChildMapping:()=>r,getInitialChildMapping:()=>i,getNextChildMapping:()=>s});var n=o(296540);function r(e,t){var o=Object.create(null);return e&&n.Children.map(e,(function(e){return e})).forEach((function(e){o[e.key]=function(e){return t&&(0,n.isValidElement)(e)?t(e):e}(e)})),o}function a(e,t,o){return null!=o[t]?o[t]:e.props[t]}function i(e,t){return r(e.children,(function(o){return(0,n.cloneElement)(o,{onExited:t.bind(null,o),in:!0,appear:a(o,"appear",e),enter:a(o,"enter",e),exit:a(o,"exit",e)})}))}function s(e,t,o){var i=r(e.children),s=function(e,t){function o(o){return o in t?t[o]:e[o]}e=e||{},t=t||{};var n,r=Object.create(null),a=[];for(var i in e)i in t?a.length&&(r[i]=a,a=[]):a.push(i);var s={};for(var c in t){if(r[c])for(n=0;n<r[c].length;n++){var l=r[c][n];s[r[c][n]]=o(l)}s[c]=o(c)}for(n=0;n<a.length;n++)s[a[n]]=o(a[n]);return s}(t,i);return Object.keys(s).forEach((function(r){var c=s[r];if((0,n.isValidElement)(c)){var l=r in t,d=r in i,u=t[r],m=(0,n.isValidElement)(u)&&!u.props.in;!d||l&&!m?d||!l||m?d&&l&&(0,n.isValidElement)(u)&&(s[r]=(0,n.cloneElement)(c,{onExited:o.bind(null,c),in:u.props.in,exit:a(c,"exit",e),enter:a(c,"enter",e)})):s[r]=(0,n.cloneElement)(c,{in:!1}):s[r]=(0,n.cloneElement)(c,{onExited:o.bind(null,c),in:!0,exit:a(c,"exit",e),enter:a(c,"enter",e)})}})),s}},792403:(e,t,o)=>{o.d(t,{forceReflow:()=>n});var n=function(e){return e.scrollTop}},845164:(e,t,o)=>{o.d(t,{ErrorBoundary:()=>i});var n=o(296540);const r=(0,n.createContext)(null),a={didCatch:!1,error:null};class i extends n.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=a}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(null!==e){for(var t,o,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];null===(t=(o=this.props).onReset)||void 0===t||t.call(o,{args:r,reason:"imperative-api"}),this.setState(a)}}componentDidCatch(e,t){var o,n;null===(o=(n=this.props).onError)||void 0===o||o.call(n,e,t)}componentDidUpdate(e,t){const{didCatch:o}=this.state,{resetKeys:n}=this.props;var r,i;o&&null!==t.error&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length!==t.length||e.some(((e,o)=>!Object.is(e,t[o])))}(e.resetKeys,n)&&(null===(r=(i=this.props).onReset)||void 0===r||r.call(i,{next:n,prev:e.resetKeys,reason:"keys"}),this.setState(a))}render(){const{children:e,fallbackRender:t,FallbackComponent:o,fallback:a}=this.props,{didCatch:i,error:s}=this.state;let c=e;if(i){const e={error:s,resetErrorBoundary:this.resetErrorBoundary};if("function"==typeof t)c=t(e);else if(o)c=(0,n.createElement)(o,e);else{if(null!==a&&!(0,n.isValidElement)(a))throw s;c=a}}return(0,n.createElement)(r.Provider,{value:{didCatch:i,error:s,resetErrorBoundary:this.resetErrorBoundary}},c)}}},520884:(e,t,o)=>{o.d(t,{LangPackProvider:()=>d});var n=o(474848),r=o(293721),a=o(296540),i=o(682649),s=o(534374),c=o(797020);const l=new Map;function d({children:e,suspense:t,...o}){const d=(0,a.useMemo)((()=>JSON.stringify(o)),[o]),u=(0,r.useUnit)(s.loadPackFx),m=(0,a.useMemo)((()=>{let e=l.get(d);return e||(e=(0,c.wrapSuspense)(u({id:d,...o})),l.set(d,e)),e}),[d,o]);return t&&m.read(),(0,n.jsx)(i.LangPackIdProvider,{value:d,children:e})}},797020:(e,t,o)=>{var n;function r(e){let t,o=n.PENDING;const r=e.then((e=>{t=e,o=n.SUCCESS})).catch((e=>{t=e,o=n.ERROR}));return{read:()=>{switch(o){case n.SUCCESS:return t;case n.PENDING:throw r;case n.ERROR:throw t}}}}o.d(t,{wrapSuspense:()=>r}),function(e){e.ERROR="error",e.SUCCESS="success",e.PENDING="pending"}(n||(n={}))},891071:(e,t,o)=>{o.d(t,{APIProvider:()=>c});var n=o(474848),r=o(296540),a=o(962177),i=o(614602),s=o(532051);function c({userId:e,peerId:t,onAPIRequest:o,language:c,children:l}){const[d,u]=(0,r.useReducer)(((e,t)=>(e.cache.destroy(),t)),new i.API({userId:e,peerId:t,onAPIRequest:o,language:c}));return(0,r.useEffect)((()=>{const n=new i.API({userId:e,peerId:t,onAPIRequest:o,language:c});u(n),n.cache.reload()}),[e,t,c,o]),(0,r.useEffect)((()=>{if((0,s.isUgcStickersEnabled)())return d.updates.start(),()=>{d.updates.stop()}}),[d]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.APIGate,{api:d}),l]})}},809695:(e,t,o)=>{o.d(t,{AvatarSuggestionRow:()=>h});var n=o(474848),r=o(293721),a=o(380118),i=o(102846),s=o(753457),c=o(934199),l=o(576692),d=o(9510),u=o(503276),m=o(479467),p=o(707122);const h=({Component:e,...t})=>{const o=(0,s.useAppearance)(),{onVmojiSuggestionClick:h}=(0,m.useStickersKeyboard)(),f=(0,r.useStore)(l.$avatarSuggestion),v=(0,r.useStore)(c.$stickersVerticalGap);if(!h)return null;const g=f?.resources?.find((e=>e.key===`image_${o}`))?.value,_=f?.title,E=f?.description;return(0,n.jsx)(e,{style:{"--stickers-vertical-gap":`${v}px`},className:p.default.banner,asideMode:"dismiss",onDismiss:e=>{e.preventDefault(),e.stopPropagation(),(0,d.hideHelpHint)(u.HelpHintIdTypes.VMOJI_AVATAR_SUGGESTION)},onClick:h,mode:"image",imageTheme:"light",before:(0,n.jsx)("div",{className:p.default.placeholder}),background:(0,n.jsx)("div",{className:p.default.character,style:{backgroundImage:`url('${g}')`}}),header:_&&(0,n.jsx)(a.Headline,{level:"1",children:_}),subheader:E&&(0,n.jsx)(s.Paragraph,{children:(0,n.jsx)(i.InnerHTML,{children:E})}),...t})}},924975:(e,t,o)=>{o.d(t,{Emoji:()=>s});var n=o(474848),r=o(8520),a=o(54500),i=o(463306);function s({emoji:e,className:t,...o}){return(0,n.jsx)("i",{className:(0,r.classNames)(i.default.emoji,`@${(0,a.unicodeToByteHex)(e)}`,t),"data-emoji":e,...o})}},158079:(e,t,o)=>{o.d(t,{EmojiItem:()=>s});var n=o(474848),r=o(8520),a=o(924975),i=o(744562);function s({emoji:e,active:t,onEmojiClick:o,className:s,onClick:c,...l}){return(0,n.jsx)("div",{className:(0,r.classNames)(s,i.default.item,{[i.default.itemActive]:t}),onClick:t=>{c?.(t),o?.(e)},...l,children:(0,n.jsx)(a.Emoji,{emoji:e})})}},705831:(e,t,o)=>{o.d(t,{EmojiKeyboard:()=>A});var n=o(474848),r=o(293721),a=o(651220),i=o(8520),s=o(296540),c=o(116638),l=o(462125),d=o(590471),u=o(943623),m=o(659915),p=o(814389),h=o(757454),f=o(264474),v=o(520453),g=o(187029),_=o(577174),E=o(654420),b=o(115563),y=o(12790),k=o(343297),w=o(245079),C=o(908066);function A({className:e,...t}){const{emojiSections:o,insertEmoji:A}=(0,b.useEmojiKeyboard)(),{bannerPackIndex:S,getAvatarSuggestionEmojiRow:I,avatarSuggestion:P,avatarSuggestionTab:x}=(0,y.useAvatarSuggestion)(),N=(0,r.useStore)(p.$emojiPadding),R=(0,r.useStore)(h.$selectedEmojiPackIndex),T=(0,s.useRef)(null),{setGridRef:M,columns:O}=(0,f.useGrid)({tab:v.Tab.EMOJI,itemWidth:u.EMOJI_SIZE+N}),L=(0,s.useMemo)((()=>{const e=[];return o.forEach((([t,o],r)=>{if(e.push({type:k.EmojiKeyboardElementType.HEADER,element:(0,n.jsx)(m.EmojiKeyboardHeader,{title:t},t),sticky:!0}),!S&&r===R||S===r){const t=I(R);t&&e.push(t)}(0,i.chunkArray)(o,O).forEach(((o,a)=>{e.push({type:k.EmojiKeyboardElementType.ROW,element:(0,n.jsx)(d.EmojiKeyboardRow,{"data-section-index":r,"data-row-index":a,emoji:o,onEmojiClick:A},`${t}${o[0]}`)})}))})),e}),[O,o,P]),D=(0,s.useMemo)((()=>L.reduce(((e,{type:t},o)=>(t===k.EmojiKeyboardElementType.HEADER&&e.push(o),e)),[])),[L]),j=e=>D.includes(e),{rangeExtractor:F,isSticky:U}=(0,g.useSticky)({rows:L}),B=(0,a.useVirtualizer)({overscan:5,rangeExtractor:F,count:L.length,getScrollElement:()=>T.current,estimateSize:()=>u.EMOJI_SIZE});(0,_.useScrollView)(T),(0,E.useKeyboardEvent)({columns:O,virtualizer:B,headerIndexes:D}),(0,w.useCalculateSelectedEmojiPackIndex)(B,D),(0,s.useEffect)((()=>{null!==S&&x===v.Tab.EMOJI&&D[S]&&B.scrollToIndex(D[S],{align:"start",behavior:"auto"})}),[S]);const V=B.getVirtualItems().filter(Boolean);return(0,n.jsx)(l.ViewItem,{getRef:M,className:(0,i.classNames)(C.default.keyboard,e),style:{"--emoji-size":`${u.EMOJI_SIZE}px`,"--emoji-padding":`${N}px`,"--emoji-columns":O},...t,children:(0,n.jsx)(c.CustomScrollView,{boxRef:T,className:C.default.scroll,autoHideScrollbar:!0,children:(0,n.jsx)("div",{className:C.default.in,style:{height:B.getTotalSize()},children:V.map((({key:e,index:t,start:o})=>(0,n.jsx)("div",{"data-index":t,ref:B.measureElement,className:(0,i.classNames)(C.default.item,{[C.default.itemHeader]:j(t)}),style:U(t)?{position:"sticky"}:{position:"absolute",transform:`translateY(${o}px)`},children:L[t].element},e)))})})})}},654420:(e,t,o)=>{o.d(t,{useKeyboardEvent:()=>m});var n,r=o(296540),a=o(293721),i=o(724659),s=o(990736),c=o(968956),l=o(88351),d=o(115563);!function(e){e.ENTER="Enter",e.ARROW_UP="ArrowUp",e.ARROW_DOWN="ArrowDown",e.ARROW_LEFT="ArrowLeft",e.ARROW_RIGHT="ArrowRight"}(n||(n={}));const u=Object.values(n);function m({columns:e,virtualizer:t,headerIndexes:o}){const{emojiSections:m,insertEmoji:p}=(0,d.useEmojiKeyboard)(),h=(0,a.useStore)(i.$isVisible),f=(0,a.useStore)(l.$selectedEmoji),{isEmojiVisibleTab:v}=(0,a.useStore)(s.$visibleTabState),{isEmojiActiveTab:g}=(0,a.useStore)(c.$tabbarActiveTabState),_=f?.emojiIndex||0,E=f?.sectionIndex||0,b=Math.floor(_/e),y=(e,n)=>{const r=o[E]+b;t.scrollToIndex(r,{align:"center",behavior:"auto"}),(0,l.setSelectedEmoji)({sectionIndex:e,emojiIndex:n})};(0,r.useEffect)((()=>{if(!h)return;const t=t=>{const{key:o}=t,r=f;if(u.includes(o)&&(v||g))if((e=>{e.preventDefault(),e.stopPropagation()})(t),r)switch(o){case n.ENTER:{if(!f)return;const{sectionIndex:e,emojiIndex:t}=f,o=m[e]?.[1][t];return void(o&&p(o))}case n.ARROW_UP:if(!f)return;if(Number(r.emojiIndex)>=e)return void y(r.sectionIndex,r.emojiIndex-e);if(r.sectionIndex){const t=m[r.sectionIndex-1]?.[1].length||0;if(t){const o=r.emojiIndex%e,n=t-1,a=n%e,i=n-n%e+Math.min(o,a);y(r.sectionIndex-1,i)}}return;case n.ARROW_DOWN:{const t=m[r.sectionIndex]?.[1].length||0;return r.emojiIndex-r.emojiIndex%e!=t-1-(t-1)%e?void y(r.sectionIndex,Math.min(r.emojiIndex+e,t-1)):void(r.sectionIndex!==m.length-1&&y(r.sectionIndex+1,r.emojiIndex%e))}case n.ARROW_LEFT:if(r.emojiIndex)return void y(r.sectionIndex,r.emojiIndex-1);if(r.sectionIndex){const e=m[r.sectionIndex-1]?.[1].length||0;e&&y(r.sectionIndex-1,e-1)}return;case n.ARROW_RIGHT:{const e=m[r.sectionIndex]?.[1].length||0;return r.emojiIndex!==e-1?void y(r.sectionIndex,r.emojiIndex+1):void(r.sectionIndex!==m.length-1&&y(r.sectionIndex+1,0))}}else y(0,0)};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}}),[h,g,v,f,m])}},343297:(e,t,o)=>{var n;o.d(t,{EmojiKeyboardElementType:()=>n}),function(e){e.ROW="row",e.HEADER="header"}(n||(n={}))},659915:(e,t,o)=>{o.d(t,{EmojiKeyboardHeader:()=>u});var n=o(474848),r=o(380118),a=o(293721),i=o(8520),s=o(788032),c=o(224896),l=o(586070);const d={[c.StickerEmojiKeyboardVariant.WIDE]:l.default.headerWide,[c.StickerEmojiKeyboardVariant.COMPACT]:l.default.headerCompact,[c.StickerEmojiKeyboardVariant.REGULAR]:l.default.headerRegular,[c.StickerEmojiKeyboardVariant.ADAPTIVE]:l.default.headerAdaptive,[c.StickerEmojiKeyboardVariant.SMALL]:l.default.headerSmall};function u({title:e,className:t,...o}){const{translate:u}=(0,s.useLangPack)(),m=(0,a.useStore)(c.$variant);return(0,n.jsx)("div",{"data-testid":"emoji-keyboard-header","data-header":!0,className:(0,i.classNames)(l.default.header,d[m],t),...o,children:(0,n.jsx)(r.Subhead,{className:l.default.title,weight:"3",children:u(e)})})}},943623:(e,t,o)=>{o.d(t,{EMOJI_SIZE:()=>m,EmojiKeyboardProvider:()=>p});var n=o(474848),r=o(293721),a=o(296540),i=o(166549),s=o(724659),c=o(194669),l=o(88351),d=o(844652),u=o(115563);const m=16;function p({onEmojiInsert:e,...t}){const o=(0,d.useAPI)(),m=(0,r.useStore)(s.$isVisible),p=e=>e?e.sort((([,e],[,t])=>t-e)).map((([e])=>e)):[],[h,f]=(0,a.useState)(Object.entries({stickers_picker_recently_used:p(o.cache.recentEmoji.get()),...i.sections})),v=h.filter((([,e])=>e.length));return(0,a.useEffect)((()=>{m||((async()=>{const e=o.cache.recentEmoji.get();e&&((0,c.setRecentEmoji)(e),f((t=>(t[0][1]=p(e),t))))})(),(0,l.setSelectedEmoji)(null))}),[o,m]),(0,n.jsx)(u.EmojiKeyboardContext.Provider,{value:{emojiSections:v,onEmojiInsert:e},...t})}},166549:(e,t,o)=>{o.d(t,{sections:()=>n});const n={stickers_picker_emotions:["😀","😃","😄","😁","😅","😆","😂","🤣","😉","😊","☺","🙂","🙃","😇","😗","😙","😚","😘","😍","🥰","🤩","🤗","😋","😜","🤪","😛","😝","🤑","🤭","🤐","🤫","😶","🤔","🤨","🧐","😐","😑","🙄","😬","🤥","😏","😌","🤤","😴","🤓","😎","🥳","🤠","😒","😔","😪","😕","😟","🙁","☹","😮","😯","😲","😳","🥺","😦","😧","😨","😰","😥","😢","😭","😱","😖","😣","😞","😓","😩","😫","😷","🤒","🤕","🤢","🤮","🤧","🥶","🥵","🥴","😵","🤯","😤","😠","😡","🤬","😈","👿","💀","☠","💩","🤡","👹","👺","👻","👽","👾","🤖","😺","😸","😹","😻","😼","😽","🙀","😿","😾","🙈","🙉","🙊","🦠"],stickers_picker_gestures_and_people:["👍","👎","👌","✌","🤞","🤟","🤘","🤙","🖕","✊","👊","🤛","🤜","👈","👉","👆","👇","☝","👋","🤚","🖐","✋","🖖","👏","🙌","👐","🤲","🤝","🙏","💪","🦵","🦶","👂","👃","🧠","🦷","🦴","👀","👁","👅","👄","✍","💅","🤳","👫","👭","👬","👩‍❤️‍💋‍👨","👨‍❤️‍💋‍👨","👩‍❤️‍💋‍👩","👩‍❤️‍👨","👨‍❤️‍👨","👩‍❤️‍👩","👪","👶","🧒","👦","👧","🧑","👱","👨","🧔","👱‍♂️","👨‍🦰","👨‍🦱","👨‍🦳","👨‍🦲","👩","👱‍♀️","👩‍🦰","👩‍🦱","👩‍🦳","👩‍🦲","🧓️","🙍‍♂️️","🙍‍♀️️","🙎‍♂️","🙎‍♀️️","🙅‍♂️","🙅‍♀️","🙆‍♂️","🙆‍♀️","💁‍♂️","💁‍♀️️","🙋‍♂️","🙋‍♀️️","🙇‍♂️","🙇‍♀️️","🤦‍♂️","🤦‍♀️","🤷‍♂️","🤷‍♀️","💆‍♂️️","💆‍♀️","💇‍♂️️","💇‍♀️","🚶‍♂️️","🚶‍♀️️","🏃‍♂️️","🏃‍♀️","💃","🕺","🕴️","👯‍♂️️","👯‍♀️","🧖‍♂️","🧖‍♀️️","👼","🎅","🤶","🦸‍♂️","🦸‍♀️","🦹‍♂️","🦹‍♀️","🧙‍♂️","🧙‍♀️","🧚‍♂️","🧚‍♀️","🧛‍♂️","🧛‍♀️","🧜‍♂️","🧜‍♀️","🧝‍♂️","🧝‍♀️","🧞‍♂️","🧞‍♀️","🧟‍♂️","🧟‍♀️","👨‍⚕️","👩‍⚕️","👨‍🎓","👩‍🎓","👨‍🏫","👩‍🏫","👨‍⚖️","👩‍⚖️","👨‍🌾","👩‍🌾","👨‍🍳","👩‍🍳","👨‍🔧","👩‍🔧","👨‍🏭","👩‍🏭","👨‍💼","👩‍💼","👨‍🔬","👩‍🔬","👨‍💻","👩‍💻","👨‍🎤","👩‍🎤","👨‍🎨","👩‍🎨","👨‍✈️","👩‍✈️","👨‍🚀","👩‍🚀","👨‍🚒","👩‍🚒","👮‍♂️","👮‍♀️","🕵️‍♂️","🕵️‍♀️","💂‍♂️","💂‍♀️","👷‍♂️","👷‍♀️","🤴","👸","👳‍♂️","👳‍♀️","👲","🧕","🤵","👰","🤰","🤱","🛀","🛌"],stickers_picker_symbols:["💋","❤","💔","❣","💘","💝","💖","💗","💓","💞","💕","💟","💜","🧡","💛","💚","💙","🖤","💯","💢","💥","💫","🕳","💣","💬","👁️‍🗨️","🗨","🗯","💭","💤","🗣","👤","👥","👣","🔇","🔊","📢","📣","🔔","🔕","🎼","🎵","🎶","⚠","🚸","☢","☣","🆚","🆓","🆕","🚮","🚾","🚭","✅","♻","⚕","🔱","‼","⁉","❓","❗","🆘","⛔","🚫","🚳","🚯","🚱","🚷","📵","🔞"],stickers_picker_animals_and_plants:["🐵","🐒","🦍","🐶","🐕","🐩","🐺","🦊","🦝","🐱","🐈","🦁","🐯","🐅","🐆","🐴","🐎","🦄","🦓","🦌","🐮","🐂","🐃","🐄","🐷","🐽","🐖","🐗","🐏","🐑","🐐","🐪","🐫","🦙","🦒","🐘","🦏","🦛","🐭","🐁","🐀","🐹","🐰","🐇","🐿","🦔","🦇","🐻","🐨","🐼","🦘","🦡","🐾","🦃","🐔","🐓","🐣","🐤","🐥","🐦","🐧","🕊","🦅","🦆","🦢","🦉","🦚","🦜","🐸","🐊","🐢","🦎","🐍","🐲","🐉","🦕","🦖","🐳","🐋","🐬","🐟","🐠","🐡","🦈","🐙","🦀","🦞","🦐","🦑","🐚","🐌","🦋","🐛","🐜","🐝","🐞","🦗","🕷","🕸","🦂","🦟","💐","🌸","💮","🏵","🌹","🥀","🌺","🌻","🌼","🌷","🌳","🌲","🎄","🌴","🌵","🌾","🌱","🌿","☘","🍀","🍁","🍂","🍃","🌑","🌒","🌓","🌔","🌕","🌖","🌗","🌘","🌙","🌚","🌛","🌜","🌡","☀","🌝","🌞","⭐","🌟","🌠","☁","⛅","⛈","🌤","🌥","🌦","🌧","🌨","🌩","🌪","🌫","🌬","💨","🌀","🌈","🌂","☂","☔","⛱","⚡","❄","☃","⛄","☄","🔥","💦","💧","🌊"],stickers_picker_food_and_drink:["🍏","🍎","🍐","🍅","🥝","🍑","🍒","🍓","🍇","🍈","🍉","🍊","🍋","🍌","🍍","🥭","🥥","🥑","🍆","🥔","🥕","🌽","🌶","🥒","🥬","🥦","🍄","🥜","🌰","🍞","🥐","🥖","🥨","🥯","🥞","🧀","🍖","🍗","🥩","🥓","🍔","🍟","🍕","🌭","🥪","🌮","🌯","🥙","🥚","🍳","🥘","🍲","🥣","🥗","🍿","🧂","🥫","🍱","🍘","🍙","🍚","🍛","🍜","🍝","🍠","🍢","🍣","🍤","🍥","🥮","🍡","🥟","🥠","🥡","🍦","🍧","🍨","🍩","🍪","🎂","🍰","🧁","🥧","🍫","🍬","🍭","🍮","🍯","🍼","🥛","☕","🍵","🍶","🍾","🍷","🍸","🍹","🍺","🍻","🥂","🥃","🥤","🥢","🍽","🍴","🥄"],stickers_picker_sport_and_activities:["⚽","⚾","🥎","🏀","🏐","🏈","🏉","🎾","🥏","🎳","🏏","🏑","🏒","🥍","🏓","🏸","🥊","🥋","🥅","⛳","⛸","🎣","🎽","🛹","🎿","🛷","🥌","🎯","🎱","🎮","🕹","🎰","🎲","🧩","♟","🧗‍♂️️","🧗‍♀️","🤺","🏇","⛷","🏂","🏌️‍♂️","🏌️‍♀️","🏄‍♂️","🏄‍♀️","🚣‍♂️","🚣‍♀️","🏊‍♂️","🏊‍♀️","⛹️‍♂️","⛹️‍♀️","🏋️‍♂️","🏋️‍♀️","🚴‍♂️","🚴‍♀️","🚵‍♂️","🚵‍♀️","🤸","🤼‍♂️","🤼‍♀️","🤽‍♂️","🤽‍♀️","🤾‍♂️","🤾‍♀️","🤹‍♂️","🤹‍♀️","🧘‍♂️","🧘‍♀️","🎖","🏆","🏅","🥇","🥈","🥉"],stickers_picker_travel_and_transport:["🚂","🚃","🚄","🚅","🚆","🚇","🚈","🚉","🚊","🚝","🚞","🚋","🚌","🚍","🚎","🚐","🚑","🚒","🚓","🚔","🚕","🚖","🚗","🚘","🚙","🚚","🚛","🚜","🏎","🏍","🛵","🚲","🛴","🚏","🛣","🛤","🛢","⛽","🚨","🚥","🚦","🛑","🚧","⚓","⛵","🛶","🚤","🛳","⛴","🛥","🚢","✈","🛩","🛫","🛬","💺","🚁","🚟","🚠","🚡","🛰","🚀","🛸","🌍","🌎","🌏","🌐","🗺","🗾","🧭","🏔","⛰","🌋","🗻","🏕","🏖","🏜","🏝","🏞","🏟","🏛","🏗","🧱","🏘","🏚","🏠","🏡","🏢","🏣","🏤","🏥","🏦","🏨","🏩","🏪","🏫","🏬","🏭","🏯","🏰","💒","🗼","🗽","⛪","🕌","🕍","⛩","🕋","⛲","⛺","🌁","🌃","🏙","🌄","🌅","🌆","🌇","🌉","♨","🌌","🎠","🎡","🎢","💈","🎪"],stickers_picker_subjects:["🎙","🎚","🎛","🎤","🎧","📻","🎷","🎸","🎹","🎺","🎻","🥁","📯","🎭","🖼","🎨","🧵","🧶","🔮","🧿","🧸","🃏","🀄","🎴","🎃","🎆","🎇","🧨","✨","🎈","🎉","🎊","🎋","🎍","🎎","🎏","🎐","🎑","🧧","🎀","🎁","🎗","🎟","🎫","🛎","🧳","⌛","⏳","⌚","⏰","⏱","⏲","🕰","👓","🕶","🥽","🥼","👔","👕","👖","🧣","🧤","🧥","🧦","👗","👘","👙","👚","👛","👜","👝","🛍","🎒","👞","👟","🥾","🥿","👠","👡","👢","👑","👒","🎩","🎓","🧢","⛑","📿","💄","💍","💎","📱","📲","☎","📞","📟","📠","🔋","🔌","💻","🖥","🖨","⌨","🖱","🖲","💽","💾","💿","📀","🧮","🎥","🎞","📽","🎬","📺","📷","📸","📹","📼","🔍","🔎","🕯","💡","🔦","🏮","📔","📕","📖","📗","📘","📙","📚","📓","📒","📃","📜","📄","📰","🗞","📑","🔖","🏷","💰","💴","💵","💶","💷","💸","💳","🧾","💹","💱","💲","✉","💌","📧","📨","📩","📤","📥","📦","📫","📪","📬","📭","📮","🗳","✏","✒","🖋","🖊","🖌","🖍","📝","💼","📁","📂","🗂","📅","📆","🗒","🗓","📇","📈","📉","📊","📋","📌","📍","📎","🖇","📏","📐","✂","🗃","🗄","🗑","🔒","🔓","🔏","🔐","🔑","🗝","🔨","⛏","⚒","🛠","🗡","⚔","🔪","🔫","🏹","🛡","🔧","🔩","⚙","🗜","⚖","🔗","⛓","🧰","🧲","⚗","🧪","🧫","🧬","🔬","🔭","📡","💉","💊","🚪","🛏","🛋","🚽","🚿","🛁","🧴","🧷","🧹","🧺","🧻","🧼","🧽","🧯","🛒","🚬","⚰","⚱","🏺","🗿"],stickers_picker_flags:["🇷🇺","🇰🇿","🇧🇾","🇺🇦","🇲🇳","🇬🇪","🇦🇿","🇹🇯","🇧🇷","🇱🇹","🇱🇻","🇪🇪","🇦🇲","🏁","🚩","🎌","🏴","🏳","🏳️‍🌈","🏴‍☠️","🇦🇨","🇦🇩","🇦🇪","🇦🇫","🇦🇬","🇦🇮","🇦🇱","🇦🇴","🇦🇶","🇦🇷","🇦🇸","🇦🇹","🇦🇺","🇦🇼","🇦🇽","🇧🇦","🇧🇧","🇧🇩","🇧🇪","🇧🇫","🇧🇬","🇧🇭","🇧🇮","🇧🇯","🇧🇱","🇧🇲","🇧🇳","🇧🇴","🇧🇶","🇧🇸","🇧🇹","🇧🇻","🇧🇼","🇧🇿","🇨🇦","🇨🇨","🇨🇩","🇨🇫","🇨🇬","🇨🇭","🇨🇮","🇨🇰","🇨🇱","🇨🇲","🇨🇳","🇨🇴","🇨🇵","🇨🇷","🇨🇺","🇨🇻","🇨🇼","🇨🇽","🇨🇾","🇨🇿","🇩🇪","🇩🇬","🇩🇯","🇩🇰","🇩🇲","🇩🇴","🇩🇿","🇪🇨","🇪🇬","🇪🇭","🇪🇷","🇪🇸","🇪🇹","🇪🇺","🇫🇮","🇫🇯","🇫🇰","🇫🇲","🇫🇴","🇫🇷","🇬🇦","🇬🇧","🇬🇩","🇬🇫","🇬🇬","🇬🇭","🇬🇮","🇬🇱","🇬🇲","🇬🇳","🇬🇵","🇬🇶","🇬🇷","🇬🇸","🇬🇹","🇬🇺","🇬🇼","🇬🇾","🇭🇰","🇭🇲","🇭🇳","🇭🇷","🇭🇹","🇭🇺","🇮🇨","🇮🇩","🇮🇪","🇮🇱","🇮🇲","🇮🇳","🇮🇴","🇮🇶","🇮🇷","🇮🇸","🇮🇹","🇯🇪","🇯🇲","🇯🇴","🇯🇵","🇰🇪","🇰🇬","🇰🇭","🇰🇮","🇰🇲","🇰🇳","🇰🇵","🇰🇷","🇰🇼","🇰🇾","🇱🇦","🇱🇧","🇱🇨","🇱🇮","🇱🇰","🇱🇷","🇱🇸","🇱🇺","🇱🇾","🇲🇦","🇲🇨","🇲🇩","🇲🇪","🇲🇫","🇲🇬","🇲🇭","🇲🇰","🇲🇱","🇲🇲","🇲🇴","🇲🇵","🇲🇶","🇲🇷","🇲🇸","🇲🇹","🇲🇺","🇲🇻","🇲🇼","🇲🇽","🇲🇾","🇲🇿","🇳🇦","🇳🇨","🇳🇪","🇳🇫","🇳🇬","🇳🇮","🇳🇱","🇳🇴","🇳🇵","🇳🇷","🇳🇺","🇳🇿","🇴🇲","🇵🇦","🇵🇪","🇵🇫","🇵🇬","🇵🇭","🇵🇰","🇵🇱","🇵🇲","🇵🇳","🇵🇷","🇵🇸","🇵🇹","🇵🇼","🇵🇾","🇶🇦","🇷🇪","🇷🇴","🇷🇸","🇷🇼","🇸🇦","🇸🇧","🇸🇨","🇸🇩","🇸🇪","🇸🇬","🇸🇭","🇸🇮","🇸🇯","🇸🇰","🇸🇱","🇸🇲","🇸🇳","🇸🇴","🇸🇷","🇸🇸","🇸🇹","🇸🇻","🇸🇽","🇸🇾","🇸🇿","🇹🇦","🇹🇨","🇹🇩","🇹🇫","🇹🇬","🇹🇭","🇹🇰","🇹🇱","🇹🇲","🇹🇳","🇹🇴","🇹🇷","🇹🇹","🇹🇻","🇹🇼","🇹🇿","🇺🇬","🇺🇲","🇺🇳","🇺🇾","🇺🇿","🇻🇦","🇻🇨","🇻🇪","🇻🇬","🇻🇮","🇻🇳","🇻🇺","🇼🇫","🇼🇸","🇽🇰","🇾🇪","🇾🇹","🇿🇦","🇿🇲","🇿🇼"]}},590471:(e,t,o)=>{o.d(t,{EmojiKeyboardRow:()=>p,rowVariantModifier:()=>m});var n=o(474848),r=o(293721),a=o(8520),i=o(296540),s=o(158079),c=o(88351),l=o(224896),d=o(115563),u=o(379482);const m={[l.StickerEmojiKeyboardVariant.WIDE]:u.default.rowWide,[l.StickerEmojiKeyboardVariant.COMPACT]:u.default.rowCompact,[l.StickerEmojiKeyboardVariant.REGULAR]:u.default.rowRegular,[l.StickerEmojiKeyboardVariant.ADAPTIVE]:u.default.rowAdaptive,[l.StickerEmojiKeyboardVariant.SMALL]:u.default.rowSmall};function p({emoji:e,onEmojiClick:t,className:o,...p}){const{emojiSections:h}=(0,d.useEmojiKeyboard)(),f=(0,r.useStore)(l.$variant),v=(0,r.useStore)(c.$selectedEmoji),g=v?.emojiIndex,_=v?.sectionIndex,E=void 0!==g&&void 0!==_?h[_][1][g]:void 0,b=(0,i.useMemo)((()=>e.map((e=>(0,n.jsx)(s.EmojiItem,{className:u.default.emoji,emoji:e,active:e===E,onEmojiClick:t},e)))),[e,E,t]);return(0,n.jsx)("div",{className:(0,a.classNames)(u.default.row,m[f],o),...p,children:b})}},394759:(e,t,o)=>{o.d(t,{EmojiKeyboardRowBanner:()=>l});var n=o(474848),r=o(618168),a=o(8520),i=o(293721),s=o(224896),c=o(590471);const l=({className:e,...t})=>{const o=(0,i.useStore)(s.$variant);return(0,n.jsx)("div",{className:(0,a.classNames)(e,c.rowVariantModifier[o]),children:(0,n.jsx)(r.Banner,{noPadding:!0,...t})})}},905303:(e,t,o)=>{o.d(t,{PeerProvider:()=>d});var n=o(293721),r=o(847891),a=o(296540),i=o(635254),s=o(547634),c=o(196243),l=o(844652);function d({children:e}){const t=(0,l.useAPI)(),o=(0,n.useStore)(i.$peerId);return(0,a.useEffect)((()=>{(0,c.setUserPeer)(null),(0,s.setChatPeer)(null),o&&(r.Ranges.isChatOrChannelPeer(o)?(async()=>{let e;try{e=(await t.messages.getConversationsById({peer_ids:String(o)})).items[0]}catch{}e&&(0,s.setChatPeer)(e)})():r.Ranges.isUserId(o)&&(async()=>{let e;try{e=(await t.users.get({user_ids:String(o),fields:String(["photo_50","first_name_gen"])}))[0]}catch{}e&&(0,c.setUserPeer)(e)})())}),[o]),e}},782951:(e,t,o)=>{o.d(t,{StickersEmojiKeyboard:()=>P});var n=o(474848),r=o(293721),a=o(8520),i=o(296540),s=o(505954),c=o(314693),l=o(520884),d=o(286727),u=o(350857),m=o(891071),p=o(905303),h=o(705831),f=o(495671),v=o(943623),g=o(933366),_=o(901751),E=o(635254),b=o(968956),y=o(724659),k=o(990736),w=o(364449),C=o(224896),A=o(844652),S=o(120338);const I={[C.StickerEmojiKeyboardVariant.WIDE]:S.default.keyboardWide,[C.StickerEmojiKeyboardVariant.COMPACT]:S.default.keyboardCompact,[C.StickerEmojiKeyboardVariant.REGULAR]:S.default.keyboardRegular,[C.StickerEmojiKeyboardVariant.ADAPTIVE]:S.default.keyboardAdaptive,[C.StickerEmojiKeyboardVariant.SMALL]:S.default.keyboardSmall};function P({lang:e,userId:t,peerId:o,variant:r,isVisible:a,visibleTab:i,onAPIRequest:s,activePackKey:c,onTabChange:d,onPopUpPlay:u,onShopClick:h,onCatchError:f,onEmojiInsert:b,onStickerSend:A,onUGCEditClick:S,onUGCReportClick:I,onVmojiEditClick:P,onVmojiCreateClick:N,onStockItemGiftClick:R,onStockItemSettingsClick:T,onVmojiSuggestionClick:M,noAnimation:O,...L}){return(0,n.jsxs)(l.LangPackProvider,{name:"stickers_picker",domain:"vk.com",lang:e,suspense:!1,children:[(0,n.jsx)(E.PeerGate,{peerId:o}),(0,n.jsx)(C.VariantGate,{variant:r}),(0,n.jsx)(y.VisibleGate,{isVisible:a}),(0,n.jsx)(k.VisibleTabGate,{visibleTab:i}),(0,n.jsx)(w.ActivePackKeyGate,{activePackKey:c}),(0,n.jsx)(m.APIProvider,{userId:t,peerId:o,language:e,onAPIRequest:s,children:(0,n.jsx)(p.PeerProvider,{children:(0,n.jsx)(_.StickersEmojiKeyboardProvider,{onTabChange:d,onShopClick:h,children:(0,n.jsx)(g.StickersKeyboardProvider,{onPopUpPlay:u,onCatchError:f,onStickerSend:A,onUGCEditClick:S,onVmojiEditClick:P,onUGCReportClick:I,onVmojiCreateClick:N,onStockItemGiftClick:R,onStockItemSettingsClick:T,onVmojiSuggestionClick:M,noAnimation:O,children:(0,n.jsx)(v.EmojiKeyboardProvider,{onEmojiInsert:b,children:(0,n.jsx)(x,{...L})})})})})})]})}function x({className:e,...t}){const o=(0,A.useAPI)(),l=(0,r.useStore)(C.$variant),m=(0,r.useStore)(k.$visibleTab),{isStickersActiveTab:p}=(0,r.useStore)(b.$tabbarActiveTabState),{isEmojiVisibleTab:v,isStickersVisibleTab:g}=(0,r.useStore)(k.$visibleTabState),_=(0,i.useRef)(null);return(0,n.jsx)(c.HelpHintsProvider,{api:o,noToken:!0,children:(0,n.jsx)(s.AppRootProvider,{portalRoot:_,children:(0,n.jsx)("div",{ref:_,className:(0,a.classNames)(e,S.default.keyboard,I[l]),...t,children:(0,n.jsxs)("div",{className:S.default.in,children:[(0,n.jsxs)(d.View,{switched:p&&!m,children:[(0,n.jsx)(h.EmojiKeyboard,{mounted:!m||v}),(0,n.jsx)(f.StickersKeyboard,{mounted:!m||g})]}),(0,n.jsx)(u.Tabbar,{})]})})})})}},901751:(e,t,o)=>{o.d(t,{StickersEmojiKeyboardProvider:()=>l});var n=o(474848),r=o(293721),a=o(296540),i=o(968956),s=o(844652),c=o(111251);function l({onTabChange:e,onShopClick:t,...o}){const l=(0,s.useAPI)(),d=(0,r.useStore)(i.$tabbarActiveTab),u=l.cache.tabbarActiveTab.get();if((0,a.useEffect)((()=>{u!==d&&l.cache.tabbarActiveTab.set(d)}),[d,u]),t){const e=t;t=t=>{l.store.markAsViewed({type:"stickers",reset:String(["store_new_items","global_promotion"])}),e(t)}}return(0,n.jsx)(c.StickersEmojiKeyboardContext.Provider,{value:{onTabChange:e,onShopClick:t},...o})}},495671:(e,t,o)=>{o.d(t,{StickersKeyboard:()=>T});var n=o(474848),r=o(293721),a=o(651220),i=o(160174),s=o(296540),c=o(116638),l=o(8520),d=o(462125),u=o(54119),m=o(564207),p=o(151473),h=o(706783),f=o(625555),v=o(341225),g=o(724659),_=o(364449),E=o(104982),b=o(603943),y=o(526581),k=o(934199),w=o(844652),C=o(264474),A=o(520453),S=o(187029),I=o(577174),P=o(12790),x=o(754977),N=o(479467),R=o(683706);function T({className:e,...t}){const o=(0,w.useAPI)(),{setSelectedPack:T}=(0,N.useStickersKeyboard)(),{getAvatarSuggestionStickerRow:M,bannerPackIndex:O,avatarSuggestion:L}=(0,P.useAvatarSuggestion)(),{packs:D}=(0,r.useStore)(b.$packs),j=(0,r.useStore)(g.$isVisible),F=(0,r.useStore)(y.$avatarSuggestionTab),U=(0,r.useStore)(k.$stickersSize),B=(0,r.useStore)(_.$activePackKey),V=(0,r.useStore)(E.$selectedPackKey),K=(0,r.useStore)(k.$stickersVerticalGap),H=(0,r.useStore)(k.$stickersHorizontalGap),G=(0,r.useStore)(k.$stickersKeyboardVerticalOrder),$=(0,s.useRef)(null),W=(0,s.useRef)([]),z=(0,s.useRef)(!1);(0,I.useScrollView)($);const{setGridRef:q,columns:Y}=(0,C.useGrid)({tab:A.Tab.STICKERS,itemWidth:U+H}),J=(0,s.useMemo)((()=>{if(!D||!Y)return[{type:x.StickersKeyboardElementType.HEADER,element:(0,n.jsx)(p.StickersKeyboardHeader,{},Math.random()),sticky:!0},...(0,l.createArray)(6).map((e=>({type:x.StickersKeyboardElementType.ROW,element:(0,n.jsx)(u.StickersKeyboardRow,{columns:Y},e)})))];const e=[];let t=null;const o=D?.get(V);return void 0!==o?.index&&(t=o.index),D.forEach((o=>{const{id:r,index:a}=o,s=o.stickers?.map(i.getStickerContext);e.push({type:x.StickersKeyboardElementType.HEADER,element:(0,n.jsx)(p.StickersKeyboardHeader,{pack:o},r),sticky:!0});const c=r===b.ServicePackKey.VMOJI;c&&e.push({type:x.StickersKeyboardElementType.ROW,element:(0,n.jsx)(f.StickersKeyboardVmojiRow,{},b.ServicePackKey.VMOJI)});const d=r===b.ServicePackKey.UGC&&!s?.length;d&&e.push({type:x.StickersKeyboardElementType.ROW,element:(0,n.jsx)(h.StickersKeyboardUGCRow,{},b.ServicePackKey.UGC)});const m=t||0;if(null===O&&a===m||O===a){const t=M(m,c||d);t&&e.push(t)}s&&(0,l.chunkArray)(s,Y).forEach(((t,a)=>{e.push({type:x.StickersKeyboardElementType.ROW,element:(0,n.jsx)(u.StickersKeyboardRow,{stickers:t,columns:Y,pack:o},`${r}${a}`)})}))})),e}),[D,Y,L]),X=(0,s.useMemo)((()=>{const e=W.current,t=J.reduce(((e,{type:t},o)=>(t===x.StickersKeyboardElementType.HEADER&&e.push(o),e)),[]);return(0,l.isEqual)(t,e)||!t.length?e:(W.current=t,t)}),[J]),Z=e=>X.includes(e),{rangeExtractor:Q,isSticky:ee}=(0,S.useSticky)({rows:J}),te=(0,a.useVirtualizer)({rangeExtractor:Q,count:J.length,estimateSize:()=>U,getScrollElement:()=>$.current}),{range:oe}=te,ne=e=>{const t=D?.get(e);t&&(((e,t,o)=>{const{index:n}=e;if(void 0===n)return;const r=X[n];(V!==t||o)&&void 0!==r&&te.scrollToIndex(r,{align:"start",behavior:"auto"})})(t,e),T(e))};(0,s.useEffect)((()=>{null!==O&&F===A.Tab.STICKERS&&X[O]&&te.scrollToIndex(X[O],{align:"start",behavior:"auto"})}),[O]),(0,s.useEffect)((()=>{const e=$.current;if(e&&!D)return e.style.setProperty("overflow","hidden","important"),()=>{e.style.removeProperty("overflow")}}),[D]),(0,s.useEffect)((()=>{const e=o.cache.stickersActiveTab.get();D&&(z.current=!1,B||e?(ne(B||e),z.current=!0):z.current=!0)}),[X,D,B,j]),(0,s.useEffect)((()=>{const e=z.current,t=te.calculateRange();if(!t)return;const{startIndex:o,endIndex:n}=t;if(!o&&!n||!X.length||!D||!e)return;const r=[...D.values()],a=X.findIndex((e=>e>=o)),i=X.findIndex((e=>e>=n)),s=r[a-Number(a===i&&o!==n)];if(!s)return;const{id:c}=s;T(c)}),[oe,X]);const re=te.getVirtualItems().filter(Boolean);return(0,n.jsx)(v.StickersKeyboardSelectProvider,{selectPack:ne,children:(0,n.jsxs)(d.ViewItem,{getRef:q,className:(0,l.classNames)(R.default.keyboard,e),style:{"--stickers-columns":Y,"--stickers-size":`${U}px`,"--stickers-vertical-gap":`${K}px`,"--stickers-horizontal-gap":`${H}px`,"--stickers-tab-flex-direction":`${G}`},...t,children:[(0,n.jsx)(c.CustomScrollView,{boxRef:$,className:(0,l.classNames)(R.default.scroll,{[R.default.scrollDisabled]:!D}),autoHideScrollbar:!0,children:(0,n.jsx)("div",{className:R.default.in,style:{height:te.getTotalSize()},children:re.map((({key:e,index:t,start:o})=>(0,n.jsx)("div",{"data-index":t,ref:te.measureElement,className:(0,l.classNames)(R.default.item,{[R.default.itemHeader]:Z(t)}),style:ee(t)?{position:"sticky"}:{position:"absolute",transform:`translateY(${o}px)`},children:J[t].element},e)))})}),D&&(0,n.jsx)(m.StickersKeyboardGroups,{})]})})}},754977:(e,t,o)=>{var n;o.d(t,{StickersKeyboardElementType:()=>n}),function(e){e.ROW="row",e.HEADER="header"}(n||(n={}))},181543:(e,t,o)=>{o.d(t,{StickersKeyboardGroup:()=>p});var n=o(474848),r=o(293721),a=o(8520),i=o(296540),s=o(683495),c=o(104982),l=o(603943),d=o(479467),u=o(24722);const m=e=>{switch(e){case l.ServicePackKey.FAVORITE:return"stickers-keyboard-group-favorite";case l.ServicePackKey.RECENT:return"stickers-keyboard-group-recent";case l.ServicePackKey.VMOJI:return"stickers-keyboard-group-vmoji";case l.ServicePackKey.UGC:return"stickers-keyboard-group-ugc";default:return""}};function p({group:e,className:t,...o}){const{selectPack:p}=(0,d.useStickersKeyboardSelect)(),h=(0,r.useStore)(c.$selectedPackKey),{packs:f}=(0,r.useStore)(l.$packs),v=(0,i.useRef)(null),[g,_]=(0,i.useState)(),E=e=>()=>{p(e)},b=(0,i.useMemo)((()=>{if(Array.isArray(e)||(e=[e]),f)return e.map((e=>{const t=f.get(e);if(t)return(0,n.jsx)(s.StickersKeyboardGroupItem,{className:u.default.item,pack:t,active:e===h,onClick:E(e)},e)}))}),[e,f,h]);(0,i.useLayoutEffect)((()=>{const e=v.current;if(!e)return;const t=e.children[0]?.clientWidth;t&&_(t)}),[v]);const y=Boolean(Array.isArray(e)&&Number(b?.length)>1&&h&&e.includes(h));return(0,n.jsx)("div",{"data-testid":m(e),ref:v,className:(0,a.classNames)(u.default.group,t,{[u.default.groupActive]:y,[u.default.groupHidden]:!g}),style:{"--group-item-width":`${g}px`},...o,children:b})}},530455:(e,t,o)=>{o.d(t,{StickersKeyboardGroupItemIcon:()=>s});var n=o(474848),r=o(945300),a=o(532051),i=o(366114);const s=({pack:e,...t})=>{const{isPopup:o}=e;let s;return o&&(0,a.isPopUpStickersEnabled)()&&(s=r.Icon12PlayCircle),s?(0,n.jsx)("div",{className:i.default.in,children:(0,n.jsx)(s,{...t})}):null}},683495:(e,t,o)=>{o.d(t,{StickersKeyboardGroupItem:()=>C});var n=o(474848),r=o(293721),a=o(8520),i=o(788032),s=o(320830),c=o(296540),l=o(74423),d=o(730617),u=o(796789),m=o(407117),p=o(374271),h=o(410655),f=o(644746),v=o(530455),g=o(603943),_=o(968956),E=o(677845),b=o(493808),y=o(704498);const k=new Map([[g.ServicePackKey.UGC,(0,n.jsx)(p.Icon24UgcStickerOutline,{},g.ServicePackKey.UGC)],[g.ServicePackKey.VMOJI,(0,n.jsx)(d.Icon24VmojiOutline,{},g.ServicePackKey.VMOJI)],[g.ServicePackKey.RECENT,(0,n.jsx)(h.Icon24RecentOutline,{},g.ServicePackKey.RECENT)],[g.ServicePackKey.FAVORITE,(0,n.jsx)(f.Icon24FavoriteOutline,{},g.ServicePackKey.FAVORITE)]]),w={blue:y.default.inIndicator,red:y.default.inIndicatorRed,gray:y.default.inIndicatorGray,"":""};function C({pack:e,active:t,children:o,indicator:d,...p}){const{translate:h}=(0,i.useLangPack)(),f=(0,r.useStore)(b.$vmojiPromotion),g=(0,r.useStore)(E.$isTransitionActive),{isStickersActiveTab:C}=(0,r.useStore)(_.$tabbarActiveTabState),[A,S]=(0,c.useState)(!0),[I,P]=(0,c.useState)(!1),x=h(e?.title),N=e?.isNew,R=e?.isVmoji,T=e?.hintId,M=e?.hintWidth,O=f?.dot_color||"",L=k.get(e?.id)||o,D=new l.BaseUrlBuilder({size:24,images:e?.previews}).build(),j=(0,u.useHelpHint)(T);(0,c.useEffect)((()=>{L&&S(!1)}),[L]),(0,c.useEffect)((()=>{j&&t&&!I&&(m.HelpHints.hide(j),P(!0))}),[j,t,I]);let F=(0,n.jsx)("div",{...p,children:(0,n.jsx)("div",{className:(0,a.classNames)(y.default.in,{[y.default.inActive]:t,[y.default.inHidden]:A,[y.default.inPlaceholder]:!D&&!L,[y.default.inIndicator]:N||d,[w[O]]:R}),children:L?(0,n.jsx)("div",{"aria-label":x,className:(0,a.classNames)(y.default.icon,y.default.iconService),children:L}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("img",{alt:x,className:y.default.icon,src:D,onLoad:()=>{S(!1)}}),e&&(0,n.jsx)(v.StickersKeyboardGroupItemIcon,{pack:e})]})})});if(j){const{title:e,description:o}=j;F=(0,n.jsx)(s.TextTooltip,{className:y.default.tooltip,maxWidth:M,placement:"top-start",appearance:"accent",header:e,text:o,offsetByMainAxis:-4,shown:!t&&!g&&!I&&C,children:F})}return F}},405241:(e,t,o)=>{o.d(t,{ShopButton:()=>u});var n=o(474848),r=o(293721),a=o(788032),i=o(838477),s=o(683495),c=o(111251),l=o(990736),d=o(903482);function u(){const{translate:e}=(0,a.useLangPack)(),{shopIndicatorMode:t,onShopClick:o}=(0,c.useStickersEmojiKeyboard)(),{isStickersVisibleTab:u}=(0,r.useStore)(l.$visibleTabState);if(!u||!o)return null;const m=Boolean(t);return(0,n.jsx)(s.StickersKeyboardGroupItem,{"aria-label":e("stickers_picker_store"),className:d.default.button,indicator:m,onClick:o,children:(0,n.jsx)(i.Icon24ShoppingCartOutline,{})})}},564207:(e,t,o)=>{o.d(t,{StickersKeyboardGroups:()=>y});var n,r=o(474848),a=o(293721),i=o(8520),s=o(753457),c=o(20115),l=o(651220),d=o(296540),u=o(405241),m=o(181543),p=o(603943),h=o(990736),f=o(104982),v=o(330209),g=o(368647),_=o(479467),E=o(260658),b=o(377802);function y({className:e,...t}){const{hasPointer:o}=(0,s.useAdaptivityWithJSMediaQueries)(),{getGroupIndex:y,isGroupedStockItem:k,prevSelectedPackKey:w}=(0,_.useStickersKeyboard)(),{packsGroups:C}=(0,a.useStore)(p.$packs),A=(0,a.useStore)(f.$selectedPackKey),{isStickersVisibleTab:S}=(0,a.useStore)(h.$visibleTabState),I=(0,d.useRef)(null),[P,x]=(0,d.useState)(!1),[N,R]=(0,d.useState)(!0),T=(0,d.useMemo)((()=>C?.map((e=>(0,r.jsx)(m.StickersKeyboardGroup,{className:b.default.groupIn,group:e},String(e))))||[]),[C]),M=T.length,O=(0,l.useVirtualizer)({count:M,overscan:5,horizontal:!0,getScrollElement:()=>I.current,estimateSize:()=>32,onChange:({range:e})=>{if(!e)return;const{startIndex:t,endIndex:o}=e;x(t>0),R(o<T.length-1)}}),{scrollTo:L}=(0,v.useSmoothScroll)(O),D=e=>O.getVirtualItems().find((({index:t})=>t===e)),j=e=>()=>{if(!O.range)return;const{startIndex:t,endIndex:o}=O.range,r=O.scrollElement?.getBoundingClientRect();if(!r)return;const{width:a}=r;switch(e){case n.LEFT:{const e=D(t-1);if(!e)return;const{size:o,end:n}=e;L({offset:n+2*o-a});break}case n.RIGHT:{const e=D(o-1);if(!e)return;const{size:t,start:n}=e;L({offset:n-t});break}}};(0,g.useHorizontalScroll)(I),(0,d.useEffect)((()=>{if(!A||!C)return;const e=y(A),t=y(w),o=k(w);void 0!==e&&(o&&e>Number(t)||O.scrollToIndex(e,{align:"center"}))}),[O,A,C]);const F={"data-popup-sticker-deductible":E.POPUP_STICKER_CONTAINER_ID,"data-popup-sticker-deductible-full-screen":E.POPUP_STICKER_CONTAINER_ID};return(0,r.jsxs)("div",{...F,className:(0,i.classNames)(b.default.groups,{[b.default.groupsForced]:S},e),...t,children:[(0,r.jsx)(u.ShopButton,{}),(0,r.jsxs)("div",{className:b.default.container,children:[o&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:(0,i.classNames)(b.default.shadow,b.default.shadowLeft,{[b.default.shadowVisible]:P})}),(0,r.jsx)("div",{className:(0,i.classNames)(b.default.shadow,b.default.shadowRight,{[b.default.shadowVisible]:N})}),(0,r.jsx)("div",{"aria-hidden":!0,className:(0,i.classNames)(b.default.chevron,b.default.chevronLeft,{[b.default.chevronActive]:P}),onClick:j(n.LEFT),children:(0,r.jsx)(c.Icon16ChevronOutline,{})}),(0,r.jsx)("div",{"aria-hidden":!0,className:(0,i.classNames)(b.default.chevron,b.default.chevronRight,{[b.default.chevronActive]:N}),onClick:j(n.RIGHT),children:(0,r.jsx)(c.Icon16ChevronOutline,{})})]}),(0,r.jsx)("div",{ref:I,className:b.default.in,children:(0,r.jsx)("div",{className:b.default.items,style:{width:O.getTotalSize()},children:Boolean(T.length)&&O.getVirtualItems().map((({key:e,index:t,start:o})=>(0,r.jsx)("div",{"data-index":t,ref:O.measureElement,className:b.default.group,style:{transform:`translateX(${o}px)`},children:T[t]},e)))})})]})]})}!function(e){e.LEFT="left",e.RIGHT="right"}(n||(n={}))},962648:(e,t,o)=>{o.d(t,{GiftButton:()=>p});var n=o(474848),r=o(293721),a=o(8520),i=o(642584),s=o(817697),c=o(196243),l=o(13298),d=o(479467),u=o(128823),m=o(402968);function p({pack:e}){const{onStockItemGiftClick:t}=(0,d.useStickersKeyboard)(),o=(0,r.useStore)(c.$userPeer),p=(0,r.useStore)(l.$stockItemsAvailableToGift);if(!e?.canGift)return null;const{id:h,canGift:f,stockItem:v}=e,g=Boolean(h&&f&&o&&!p?.includes(h));return(0,n.jsxs)(n.Fragment,{children:[g&&(0,n.jsx)(s.PeerInfo,{className:(0,a.classNames)(u.default.peer,m.default.headerAside),pack:e}),t&&(0,n.jsx)(i.Icon20GiftOutline,{"data-testid":"stickers-keyboard-header-gift-button",className:(0,a.classNames)(m.default.icon,m.default.headerAside),onClick:()=>{v&&t?.(v,o)}})]})}},817697:(e,t,o)=>{o.d(t,{PeerInfo:()=>m});var n=o(474848),r=o(293721),a=o(788032),i=o(465028),s=o(320830),c=o(380118),l=o(414698),d=o(196243),u=o(684608);function m({pack:e,...t}){const{translate:o}=(0,a.useLangPack)(),m=(0,r.useStore)(d.$userPeer);if(!e||!m)return null;const{isStyle:p}=e,{first_name_gen:h,photo_50:f}=m;return(0,n.jsx)(s.TextTooltip,{className:u.default.tooltip,text:(0,n.jsx)(c.Caption,{className:u.default.text,level:"1",children:o(p?"stickers_picker_peer_has_style":"stickers_picker_peer_has_pack",{name:h})}),offsetByMainAxis:8,offsetByCrossAxis:30,placement:"bottom-end",usePortal:!0,children:(0,n.jsx)(l.Avatar,{src:f,size:20,...t,children:(0,n.jsx)(l.Avatar.Badge,{children:(0,n.jsx)(i.Icon12CheckCircleFill,{className:u.default.icon})})})})}},151473:(e,t,o)=>{o.d(t,{StickersKeyboardHeader:()=>E});var n=o(474848),r=o(293721),a=o(8520),i=o(788032),s=o(380118),c=o(515073),l=o(377803),d=o(643778),u=o(962648),m=o(440230),p=o(950934),h=o(179266),f=o(450602),v=o(224896),g=o(402968);const _={[v.StickerEmojiKeyboardVariant.WIDE]:g.default.headerWide,[v.StickerEmojiKeyboardVariant.COMPACT]:g.default.headerCompact,[v.StickerEmojiKeyboardVariant.REGULAR]:g.default.headerRegular,[v.StickerEmojiKeyboardVariant.ADAPTIVE]:g.default.headerAdaptive,[v.StickerEmojiKeyboardVariant.SMALL]:g.default.headerSmall};function E({pack:e,className:t,...o}){const{translate:E}=(0,i.useLangPack)(),b=(0,r.useStore)(v.$variant);if(t=(0,a.classNames)(g.default.header,_[b],t),!e)return(0,n.jsx)("div",{"data-testid":"stickers-keyboard-header-skeleton",className:t,...o,children:(0,n.jsx)(s.Subhead,{children:(0,n.jsx)(c.Skeleton,{width:128,colorFrom:l.default.colorTransparent.active.value,noAnimation:!0})})});const{title:y}=e;return(0,n.jsxs)("div",{"data-testid":"stickers-keyboard-header","data-header":!0,className:(0,a.classNames)(g.default.header,t),...o,children:[(0,n.jsx)(s.Subhead,{"data-testid":"stickers-keyboard-header-title",className:g.default.title,weight:"3",children:E(y)}),(0,n.jsx)(d.Tooltip,{pack:e}),(0,n.jsx)(f.StyleSettingsButton,{pack:e}),(0,n.jsx)(h.VmojiEditButton,{pack:e}),(0,n.jsx)(u.GiftButton,{pack:e}),(0,n.jsx)(m.UGCEditButton,{pack:e}),(0,n.jsx)(p.UGCMoreButton,{pack:e})]})}},450602:(e,t,o)=>{o.d(t,{StyleSettingsButton:()=>l});var n=o(474848),r=o(8520),a=o(897571),i=o(479467),s=o(561865),c=o(402968);function l({pack:e}){const{onStockItemSettingsClick:t}=(0,i.useStickersKeyboard)();if(!t)return null;if(!e||!(e?.hasStyles||e?.isStyle||e?.isVmoji))return null;const{stockItem:o}=e;return(0,n.jsx)(a.Icon20GearOutline,{className:(0,r.classNames)(s.default.icon,c.default.icon),onClick:()=>{o&&t?.(o)}})}},643778:(e,t,o)=>{o.d(t,{Tooltip:()=>d});var n=o(474848),r=o(8520),a=o(720510),i=o(788032),s=o(320830),c=o(274761),l=o(402968);function d({pack:{tooltip:e}}){const{translate:t}=(0,i.useLangPack)();if(!e)return null;const{text:o,header:d}=e;return(0,n.jsx)(s.TextTooltip,{className:c.default.tooltip,appearance:"black",offsetByMainAxis:8,usePortal:!0,...e,header:d&&t(String(d)),text:o&&t(String(o)),children:(0,n.jsx)(a.Icon16InfoOutline,{className:(0,r.classNames)(c.default.icon,l.default.icon)})})}},440230:(e,t,o)=>{o.d(t,{UGCEditButton:()=>d});var n=o(474848),r=o(293721),a=o(8520),i=o(897571),s=o(61070),c=o(479467),l=o(402968);function d({pack:e}){const{onUGCEditClick:t}=(0,c.useStickersKeyboard)(),o=(0,r.useStore)(s.$ugcInfo);return e?.isPack&&o?.can_edit&&o?.items?.length&&t?(0,n.jsx)(i.Icon20GearOutline,{className:(0,a.classNames)(l.default.icon,l.default.headerAside),onClick:t}):null}},950934:(e,t,o)=>{o.d(t,{UGCMoreButton:()=>p});var n=o(474848),r=o(293721),a=o(8520),i=o(788032),s=o(405816),c=o(797110),l=o(349826),d=o(61070),u=o(479467),m=o(402968);function p({pack:e}){const{translate:t}=(0,i.useLangPack)(),{onUGCReportClick:o}=(0,u.useStickersKeyboard)(),p=(0,r.useStore)(d.$ugcInfo);if(!e?.isPack||p?.can_edit||!p?.items?.length||!o)return null;return(0,n.jsx)(l.DropdownActionSheet,{content:(0,n.jsx)(l.DropdownActionSheet.Item,{type:"destructive",before:(0,n.jsx)(s.Icon20ReportOutline,{}),onClick:()=>{o(e.rawData)},children:t("stickers_picker_report")}),placement:"bottom-end",usePortal:!1,children:(0,n.jsx)(c.Icon20More,{className:(0,a.classNames)(m.default.icon,m.default.headerAside)})})}},179266:(e,t,o)=>{o.d(t,{VmojiEditButton:()=>h});var n=o(474848),r=o(380118),a=o(293721),i=o(8520),s=o(185372),c=o(788032),l=o(493808),d=o(479467),u=o(661273),m=o(402968);const p=99;function h({pack:e}){const{translate:t}=(0,c.useLangPack)(),{onVmojiEditClick:o}=(0,d.useStickersKeyboard)(),h=(0,a.useStore)(l.$vmojiPromotion);if(!e?.isVmoji||!o)return null;const{vmojiAvatar:f}=e,v=h?.constructor_new_items?.counter_value,g=h?.constructor_new_items?.open_params,_=Number(v)>0;let E=t("stickers_picker_vmoji_items_counter",{count:v});return Number(v)>=p&&(E=t("stickers_picker_vmoji_items_counter_max",{count:p})),(0,n.jsxs)("div",{className:(0,i.classNames)(u.default.brush,m.default.headerAside),onClick:()=>{f&&o?.(f,g)},children:[_&&(0,n.jsx)(r.Subhead,{className:(0,i.classNames)(u.default.counter,m.default.icon),weight:"3",children:E}),(0,n.jsx)(s.Icon20BrushOutline,{className:m.default.icon})]})}},933366:(e,t,o)=>{o.d(t,{StickersKeyboardProvider:()=>I});var n=o(474848),r=o(293721),a=o(296540),i=o(724659),s=o(61070),c=o(196243),l=o(625722),d=o(656947),u=o(316299),m=o(968956),p=o(364449),h=o(714808),f=o(498716),v=o(528658),g=o(684490),_=o(603943),E=o(104982),b=o(13298),y=o(576692),k=o(493808),w=o(844652),C=o(503276),A=o(520453),S=o(479467);function I({onPopUpPlay:e,onCatchError:t,onStickerSend:o,onUGCEditClick:I,onVmojiEditClick:P,onUGCReportClick:x,onVmojiCreateClick:N,onStockItemGiftClick:R,onStockItemSettingsClick:T,onVmojiSuggestionClick:M,noAnimation:O,...L}){const D=(0,w.useAPI)(),{isServiceStockItem:j}=(0,S.useStickersKeyboard)(),{packs:F}=(0,r.useStore)(_.$packs),U=(0,r.useStore)(c.$userPeer),B=(0,r.useStore)(i.$isVisible),V=(0,r.useStore)(g.$stockItems),K=(0,r.useStore)(p.$activePackKey),H=(0,r.useStore)(k.$vmojiPromotion),G=(0,r.useStore)(E.$selectedPackKey),$=(0,a.useRef)(),W=$.current,z=async()=>{try{const[e,t]=await Promise.all([D.cache.ugcInfo.get(),D.cache.ugcPacks.get()]);(0,s.setUGCInfo)(e),(0,l.setUGCPacks)(t)}catch(e){t?.(e)}},q=async()=>{try{const[e,t,o,n,r,a]=await Promise.all([D.cache.global.get(),D.cache.getStockItems({active:!0}),D.cache.imageConfigs.get(),D.cache.recentStickers.get(),D.cache.favoriteStickers.get(),D.cache.avatarSuggestion.get(),z()]);(0,u.setRecentStickers)(n),(0,f.setFavoriteStickers)(r),(0,h.setImageConfigs)(o),(0,y.setAvatarSuggestion)(a),(0,d.setHasAvatar)(D.cache.hasAvatar.get()),(0,k.setVmojiPromotion)(e?.vmoji_promotion||null),(0,v.setStoreNewItemsCount)(e?.store_new_items||0),(0,g.setStockItems)(t)}catch(e){t?.(e)}};return(0,a.useEffect)((()=>{V&&B&&D.cache.reload(),q();const e=D.cache.stickersSync.subscribe(q,!0),t=D.cache.stickersAsync.subscribe(q,!0),o=D.cache.stickersListAsync.subscribe(z,!0),n=D.cache.stickersAsync.subscribe((async e=>{if(e===C.AvatarSuggestionAtomName)(0,y.getAvatarSuggestionFromCache)()}),!1);return()=>{e(),t(),o(),n()}}),[D,B,t]),(0,a.useEffect)((()=>{if((0,b.setStockItemsAvailableToGift)(null),!U)return;const{id:e}=U;var t;t=e,D.store.getStickerPacksAvailableForGift({user_id:t}).then(b.setStockItemsAvailableToGift)}),[U]),(0,a.useEffect)((()=>{null!=K&&(0,m.setTabbarActiveTab)(A.Tab.STICKERS)}),[K]),(0,n.jsx)(S.StickersKeyboardContext.Provider,{value:{setSelectedPack:e=>{if(G&&($.current=G),e){const t=F?.get(e);t&&(D.cache.stickersActiveTab.set(e),(e=>{if(j(e))return;const t=V?.find((({product:{id:t}})=>t===e));t&&V&&(t.product.is_vmoji&&H?.dot_color&&(0,k.clearVmojiPromotionDot)(),t.product.is_new&&(t.product.is_new=!1,D.cache.stockItems.set(V,{notify:!1}),D.store.updateStickerProductsState({product_ids:String(e),key:"is_new",value:"0"})))})(e))}(0,E.setSelectedPackKey)(e)},prevSelectedPackKey:W,onStickerSend:o,onUGCEditClick:I,onUGCReportClick:x,onVmojiEditClick:P,onVmojiCreateClick:N,onStockItemGiftClick:R,onStockItemSettingsClick:T,onVmojiSuggestionClick:M,onPopUpPlay:e,noAnimation:O},...L})}},341225:(e,t,o)=>{o.d(t,{StickersKeyboardSelectProvider:()=>a});var n=o(474848),r=o(479467);function a({selectPack:e,...t}){return(0,n.jsx)(r.StickersKeyboardSelectContext.Provider,{value:{selectPack:e},...t})}},610129:(e,t,o)=>{o.d(t,{StickerKeyboardRowBanner:()=>l});var n=o(474848),r=o(618168),a=o(8520),i=o(293721),s=o(224896),c=o(54119);const l=({className:e,...t})=>{const o=(0,i.useStore)(s.$variant);return(0,n.jsx)("div",{className:(0,a.classNames)(e,c.rowVariantModifier[o]),children:(0,n.jsx)(r.Banner,{noPadding:!0,...t})})}},54119:(e,t,o)=>{o.d(t,{StickersKeyboardRow:()=>S,rowVariantModifier:()=>k});var n=o(474848),r=o(293721),a=o(945300),i=o(8520),s=o(753457),c=o(296540),l=o(74423),d=o(492924),u=o(43684),m=o(724659),p=o(934199),h=o(714808),f=o(498716),v=o(224896),g=o(844652),_=o(479467),E=o(532051),b=o(504402);const y=new Map([[s.Appearance.LIGHT,l.Theme.LIGHT],[s.Appearance.DARK,l.Theme.DARK]]),k={[v.StickerEmojiKeyboardVariant.WIDE]:b.default.rowWide,[v.StickerEmojiKeyboardVariant.COMPACT]:b.default.rowCompact,[v.StickerEmojiKeyboardVariant.REGULAR]:b.default.rowRegular,[v.StickerEmojiKeyboardVariant.ADAPTIVE]:b.default.rowAdaptive,[v.StickerEmojiKeyboardVariant.SMALL]:b.default.rowSmall},w=32,C=900,A=1500;function S({pack:e,stickers:t,columns:o,className:l,...S}){const I=(0,c.useRef)(),P=(0,c.useCallback)((()=>{clearTimeout(I.current)}),[]),x=(0,g.useAPI)(),N=(0,s.useAppearance)(),{onPopUpPlay:R,noAnimation:T}=(0,_.useStickersKeyboard)(),{addToFavorite:M,removeFromFavorite:O,onStickerSend:L}=(0,_.useStickersKeyboard)(),D=(0,r.useStore)(v.$variant),j=(0,r.useStore)(m.$isVisible),F=(0,r.useStore)(p.$stickersSize),U=(0,r.useStore)(h.$imageConfigs),B=(0,r.useStore)(f.$favoriteStickers);(0,c.useEffect)((()=>(j||P(),()=>{P()})),[j,P]);const V=(t,o=e?.referrer)=>async(e,n)=>{const{isBase:r,rawData:a,isPopup:i}=t;if(i&&P(),L(t,o,n),!r||!a)return;const s=await x.cache.recentStickers.get();if(!s)return;if(-1!==s.findIndex((({sticker_id:e})=>e===t.id)))return;const c=s.length>=w?s.length-w+1:0;s.splice(0,c,{...a,inner_type:"base_sticker_new"}),x.cache.recentStickers.set(s,{notify:!1})},K=(t,o)=>{if(!e?.isPack)return()=>{o?O(t):M(t)}},H=(e,t)=>o=>{const{isPopup:n,popupLayers:r}=e;P();const{relatedTarget:a}=o;(!a||a instanceof HTMLElement)&&n&&r&&(0,E.isPopUpStickersEnabled)()&&(I.current=window.setTimeout((()=>{R?.(o,r)}),t))},G=()=>{P()},$=(0,c.useMemo)((()=>t?.map((e=>{if(!t||!U)return;const{id:o,isAllowed:r,isPopup:i}=e,{items:s,default_id:c}=U,l=Boolean(B?.find((({sticker_id:e})=>e===o))),m={className:b.default.sticker,name:String(o),size:F,sticker:e,onMouseEnter:H(e,C),onMouseLeave:G,onTouchStart:H(e,A),onTouchEnd:G,theme:y.get(N),configs:s,favorite:l,disabled:!r,defaultConfigId:c,onClick:V(e),onFavoriteClick:K(e,l),noAnimation:T};return i&&(0,E.isPopUpStickersEnabled)()?(0,n.jsx)(d.StickerRich,{baseStickerProps:m,wrapperProps:{contentClassName:b.default.stickerRichIcon,icon:(0,n.jsx)(a.Icon12PlayCircle,{}),iconPosition:"rightInset"}},o):(0,n.jsx)(u.Sticker,{...m},o)}))||(0,i.createArray)(o).map((e=>(0,n.jsx)(u.Sticker,{className:b.default.sticker,size:F},e)))),[o,t,N,F,B,U]);return(0,n.jsx)("div",{className:(0,i.classNames)(b.default.row,b.default.rowStickers,k[D],l),...S,children:$})}},740535:(e,t,o)=>{o.d(t,{StickersKeyboardRowCard:()=>m});var n=o(474848),r=o(293721),a=o(753457),i=o(413784),s=o(380118),c=o(102846),l=o(54119),d=o(224896),u=o(487066);function m({title:e,image:t,action:o,onHide:m,className:p,...h}){const f=(0,r.useStore)(d.$variant);return(0,n.jsx)("div",{className:l.rowVariantModifier[f],...h,children:(0,n.jsxs)("div",{className:u.default.card,children:[m&&(0,n.jsx)(a.Tappable,{className:u.default.hide,hoverMode:"opacity",activeMode:"opacity",onClick:m,children:(0,n.jsx)(i.Icon24CancelOutline,{})}),t&&(0,n.jsx)("figure",{className:u.default.image,style:{...t,backgroundImage:`url(${t.src})`}}),e&&(0,n.jsx)(s.Title,{className:u.default.title,level:"3",weight:"2",children:(0,n.jsx)(c.InnerHTML,{children:e})}),o&&(0,n.jsx)("div",{className:u.default.action,children:o})]})})}},706783:(e,t,o)=>{o.d(t,{StickersKeyboardUGCRow:()=>m});var n=o(474848),r=o(533048),a=o(788032),i=o(726706),s=o(503723),c=o(614267),l=o(740535),d=o(204783),u=o(479467);function m(){const{translate:e}=(0,a.useLangPack)(),{onUGCEditClick:t}=(0,u.useStickersKeyboard)(),o=(0,i.useHelpHintResource)(s.HelpHintId.STICKERS_UGC_KEYBOARD_ONBOARDING,c.StickersUGCKeyboardOnboardingResourceKey.IMAGE);return(0,n.jsx)(l.StickersKeyboardRowCard,{title:e("stickers_picker_ugc_create_title"),image:{src:o,width:240,height:64},action:t&&(0,n.jsx)(r.Button,{size:"s",mode:"outline",appearance:"accent",onClick:t,children:e("stickers_picker_ugc_create_action")}),onHide:d.hideUGCOnboarding})}},625555:(e,t,o)=>{o.d(t,{StickersKeyboardVmojiRow:()=>m});var n=o(474848),r=o(788032),a=o(753457),i=o(533048),s=o(726706),c=o(503723),l=o(404014),d=o(740535),u=o(479467);function m(e){const t=(0,a.useAppearance)(),{translate:o}=(0,r.useLangPack)(),{onVmojiCreateClick:m}=(0,u.useStickersKeyboard)(),p=(0,s.useHelpHintResource)(c.HelpHintId.KEYBOARD_STICKERS_VMOJI,t===a.Appearance.LIGHT?l.KeyboardStickersVmojiResourceKey.VMOJI_ON_BOARDING_LIGHT:l.KeyboardStickersVmojiResourceKey.VMOJI_ON_BOARDING_DARK);return(0,n.jsx)(d.StickersKeyboardRowCard,{image:{src:p,width:221,height:130},action:m&&(0,n.jsx)(i.Button,{size:"s",mode:"outline",appearance:"accent",onClick:m,children:o("stickers_picker_vmoji_create_character")}),...e})}},350857:(e,t,o)=>{o.d(t,{Tabbar:()=>g});var n=o(474848),r=o(293721),a=o(8520),i=o(296540),s=o(788032),c=o(390768),l=o(352472),d=o(182490),u=o(132719),m=o(990736),p=o(968956),h=o(520453),f=o(111251),v=o(926756);function g({className:e,...t}){const{translate:o}=(0,s.useLangPack)(),{shopIndicatorMode:g,onTabChange:_,onShopClick:E}=(0,f.useStickersEmojiKeyboard)(),b=(0,r.useStore)(m.$visibleTab),{isEmojiActiveTab:y,isStickersActiveTab:k}=(0,r.useStore)(p.$tabbarActiveTabState),w=e=>()=>{(0,p.setTabbarActiveTab)(e),_?.({tab:e})};return(0,i.useEffect)((()=>{b&&(0,p.setTabbarActiveTab)(b)}),[b]),b?null:(0,n.jsxs)("div",{className:(0,a.classNames)(v.default.tabbar,e),...t,children:[(0,n.jsx)(u.TabbarItem,{"data-testid":"sticker-picker-tabbar-item-emoji","aria-label":o("stickers_picker_emoji"),className:v.default.item,active:y,onClick:w(h.Tab.EMOJI),children:(0,n.jsx)(c.Icon24SmileOutline,{})}),(0,n.jsx)(u.TabbarItem,{"data-testid":"sticker-picker-tabbar-item-stickers","aria-label":o("stickers_picker_stickers"),className:v.default.item,active:k,onClick:w(h.Tab.STICKERS),children:(0,n.jsx)(l.Icon24StickerSmileOutline,{})}),E&&(0,n.jsx)(u.TabbarItem,{"data-testid":"sticker-picker-tabbar-item-shop","aria-label":o("stickers_picker_store"),className:v.default.item,indicator:g,onClick:E,children:(0,n.jsx)(d.Icon24StorefrontOutline,{})})]})}},132719:(e,t,o)=>{o.d(t,{TabbarItem:()=>c,TabbarItemIndicator:()=>n});var n,r=o(474848),a=o(8520),i=o(75378);!function(e){e.NONE="none",e.PRIMARY="primary",e.SECONDARY="secondary",e.DESTRUCTIVE="destructive"}(n||(n={}));const s={[n.NONE]:i.default.indicatorNone,[n.PRIMARY]:i.default.indicatorPrimary,[n.SECONDARY]:i.default.indicatorSecondary,[n.DESTRUCTIVE]:i.default.indicatorDestructive};function c({active:e,indicator:t=n.NONE,className:o,children:c,...l}){return(0,r.jsx)("div",{className:(0,a.classNames)(o,i.default.item,i.default.indicator,s[t],{[i.default.itemActive]:e}),...l,children:c})}},286727:(e,t,o)=>{o.d(t,{View:()=>c});var n=o(474848),r=o(8520),a=o(296540),i=o(677845),s=o(487782);function c({switched:e,children:t,...o}){const c=({target:e})=>{e instanceof HTMLDivElement&&e.dataset.viewPanel&&(0,i.setIsTransitionActive)(!1)};return(0,a.useEffect)((()=>{(0,i.setIsTransitionActive)(!0)}),[e]),(0,n.jsx)("div",{className:s.default.view,...o,children:a.Children.map(t,(t=>(0,a.cloneElement)(t,{"data-view-panel":!0,className:(0,r.classNames)(s.default.panel,{[s.default.panelSwitched]:e}),onTransitionEnd:c})))})}},462125:(e,t,o)=>{o.d(t,{ViewItem:()=>r});var n=o(474848);function r({getRef:e,mounted:t,...o}){return!1===t?null:(0,n.jsx)("div",{ref:e,...o})}},677845:(e,t,o)=>{o.d(t,{$isTransitionActive:()=>a,setIsTransitionActive:()=>r});var n=o(624761);const r=n.stickersEmojiKeyboard.createEvent(),a=n.stickersEmojiKeyboard.createStore(!1).on(r,((e,t)=>t))},260658:(e,t,o)=>{o.d(t,{POPUP_STICKER_CONTAINER_ID:()=>n});const n="popup-sticker-emoji-keyboard-container"},844652:(e,t,o)=>{o.d(t,{useAPI:()=>a});var n=o(293721),r=o(962177);function a(){return(0,n.useStore)(r.$api)}},356961:(e,t,o)=>{o.d(t,{useElementSize:()=>a});var n=o(8520),r=o(296540);function a(){const[e,t]=(0,r.useState)(null),[o,a]=(0,r.useState)({width:0,height:0});return(0,r.useLayoutEffect)((()=>{const t=()=>{a({width:e?.offsetWidth||0,height:e?.offsetHeight||0})};t();const o=(0,n.debounce)(t,150);return window.addEventListener("resize",o),()=>{window.removeEventListener("resize",o)}}),[e]),{setRef:t,...o}}},115563:(e,t,o)=>{o.d(t,{EmojiKeyboardContext:()=>i,useEmojiKeyboard:()=>c});var n=o(296540),r=o(194669),a=o(844652);const i=(0,n.createContext)({}),s=50;function c(){const e=(0,a.useAPI)(),t=(0,n.useContext)(i),{onEmojiInsert:o}=t;return{...t,insertEmoji:t=>{o?.(t),(t=>{const o=new Map(e.cache.recentEmoji.get()),n=o.get(t)||0;o.set(t,n+1);const a=[...o].reverse().slice(0,s);(0,r.setRecentEmoji)(a),e.cache.recentEmoji.set(a)})(t)}}}},264474:(e,t,o)=>{o.d(t,{useGrid:()=>c});var n=o(296540),r=o(293721),a=o(224896),i=o(356961);const s=new Map;function c({tab:e,itemWidth:t,itemsCount:o=0}){const{setRef:c,width:l}=(0,i.useElementSize)(),d=(0,r.useStore)(a.$variant),u=String([e,d]),m=(0,n.useRef)(s.get(u)||{rows:0,columns:0});return{setGridRef:c,...(0,n.useMemo)((()=>{const e=m.current;if(!l)return e;const n=Math.floor(l/t);if(!n||n===e.columns)return e;const r={rows:Math.ceil(o/n),columns:n};return m.current=r,s.set(u,r),r}),[l,u,t,o])}}},368647:(e,t,o)=>{o.d(t,{useHorizontalScroll:()=>a});var n=o(296540),r=o(577174);function a(e){(0,r.useScrollView)(e),(0,n.useEffect)((()=>{const t=e.current;if(!t)return;const o=e=>{t.scrollLeft+=e.deltaY+e.deltaX};return t.addEventListener("wheel",o,{passive:!0}),()=>{t.removeEventListener("wheel",o)}}),[e])}},577174:(e,t,o)=>{o.d(t,{useScrollView:()=>r});var n=o(296540);function r(e){(0,n.useEffect)((()=>{const t=e.current;t&&t.setAttribute("data-scroll-view","")}),[])}},330209:(e,t,o)=>{o.d(t,{useSmoothScroll:()=>i});var n=o(8520),r=o(296540),a=o(921096);function i(e){const t=(0,r.useRef)(0);return{scrollTo:(0,r.useCallback)((0,n.debounce)((({offset:o=0,duration:n=300}={})=>{t.current=Date.now();let r=e.scrollOffset;const i=t.current,s=()=>{if(t.current!==i)return;const c=Date.now()-i,l=(0,a.easeOutQuart)(Math.min(c/n,1)),d=r+(o-r)*l;c<n&&requestAnimationFrame(s),e.scrollToOffset(d)};requestAnimationFrame(s)}),150),[e])}}},111251:(e,t,o)=>{o.d(t,{StickersEmojiKeyboardContext:()=>s,useStickersEmojiKeyboard:()=>c});var n=o(293721),r=o(296540),a=o(132719),i=o(528658);const s=(0,r.createContext)({});function c(){return{...(0,r.useContext)(s),shopIndicatorMode:(0,n.useStore)(i.$storeNewItemsCount)?a.TabbarItemIndicator.DESTRUCTIVE:void 0}}},479467:(e,t,o)=>{o.d(t,{StickersKeyboardContext:()=>c,StickersKeyboardSelectContext:()=>d,useStickersKeyboard:()=>l,useStickersKeyboardSelect:()=>u});var n=o(293721),r=o(296540),a=o(603943),i=o(498716),s=o(844652);const c=(0,r.createContext)({});function l(){const e=(0,s.useAPI)(),t=(0,n.useStore)(i.$favoriteStickers),{packsGroups:o}=(0,n.useStore)(a.$packs);return{...(0,r.useContext)(c),addToFavorite:async({id:o,isBase:n,rawData:r})=>{if(!n)return;const a=await e.cache.global.get();if(!a)return;const{favorite_stickers_limit:s}=a;if(e.store.addStickersToFavorite({sticker_ids:String(o)}),!t)return;const c=[r,...t].slice(0,s);(0,i.setFavoriteStickers)(c),e.cache.favoriteStickers.set(c)},getGroupIndex:e=>e?o?.findIndex((t=>(Array.isArray(t)||(t=[t]),t.includes(e)))):void 0,removeFromFavorite:async({id:o,isBase:n})=>{if(!n)return;if(e.store.removeStickersFromFavorite({sticker_ids:String(o)}),!t)return;const r=t.findIndex((e=>e.sticker_id===o));if(!(-1!==r))return;const a=[...t];a.splice(r,1),(0,i.setFavoriteStickers)(a),e.cache.favoriteStickers.set(a)},isServiceStockItem:e=>null!=e&&e<0,isGroupedStockItem:e=>o&&void 0!==e&&!o.includes(e)}}const d=(0,r.createContext)({});function u(){return(0,r.useContext)(d)}},187029:(e,t,o)=>{o.d(t,{useSticky:()=>a});var n=o(296540),r=o(842468);function a({rows:e}){const t=(0,n.useRef)(0),o=(0,n.useMemo)((()=>e.reduce(((e,{sticky:t},o)=>(t&&e.push(o),e)),[])),[e]);return{isSticky:e=>t.current===e,rangeExtractor:(0,n.useCallback)((e=>{t.current=[...o].reverse().find((t=>e.startIndex>=t))||0;return[...new Set([t.current,...(0,r.defaultRangeExtractor)(e)])].sort(((e,t)=>e-t))}),[o])}}},12790:(e,t,o)=>{o.d(t,{useAvatarSuggestion:()=>k});var n=o(474848),r=o(293721),a=o(8520),i=o(296540),s=o(962177),c=o(724659),l=o(576692),d=o(968956),u=o(526581),m=o(562925),p=o(517166),h=o(809695),f=o(394759),v=o(610129),g=o(520453),_=o(343297),E=o(754977),b=o(479467),y=o(366608);const k=()=>{const{onVmojiSuggestionClick:e}=(0,b.useStickersKeyboard)(),t=(0,r.useStore)(s.$api),o=(0,r.useStore)(c.$isVisible),k=(0,r.useStore)(d.$tabbarActiveTab),w=(0,r.useStore)(l.$avatarSuggestion),C=(0,r.useStore)(u.$avatarSuggestionTab),A=(0,r.useStore)(d.$tabbarActiveTabState),S=(0,r.useStore)(m.$avatarSuggestionBannerPackIndex),I=(0,r.useStore)(p.$avatarSuggestionIsViewed),P=(0,r.useStore)(y.$avatarSuggestionDisabled);(0,i.useEffect)((()=>{o||((0,m.setAvatarSuggestionPackIndex)(null),(0,u.setAvatarSuggestionTab)(null),(0,p.setAvatarSuggestionIsViewed)(!1),(0,y.setAvatarSuggestionDisabled)(!1))}),[o]);const x=(0,i.useCallback)((0,a.debounce)((e=>{(0,m.setAvatarSuggestionPackIndex)(e)}),100),[]),N=(0,i.useCallback)((0,a.debounce)((e=>(0,u.setAvatarSuggestionTab)(e)),100),[]),R=(0,i.useCallback)((0,a.debounce)((e=>(0,y.setAvatarSuggestionDisabled)(e)),100),[]),T=r=>{if(!e||P)return null;if(!o||I||!Boolean(w)&&t.cache.reloading||(0,p.setAvatarSuggestionIsViewed)(!0),!w||null===r)return null;null===C&&N(k),null===S&&x(r);const a=A.isStickersActiveTab?v.StickerKeyboardRowBanner:f.EmojiKeyboardRowBanner;return(0,n.jsx)(h.AvatarSuggestionRow,{Component:a},w.id)};return{getAvatarSuggestionStickerRow:(e,t=!1)=>{if(C&&C!==g.Tab.STICKERS||k!==g.Tab.STICKERS)return null;if(P||R(t),t)return null;const o=T(e);return o?{type:E.StickersKeyboardElementType.ROW,element:o}:null},getAvatarSuggestionEmojiRow:e=>{if(C&&C!==g.Tab.EMOJI||k!==g.Tab.EMOJI)return null;const t=T(e);return t?{type:_.EmojiKeyboardElementType.ROW,element:t}:null},bannerPackIndex:S,avatarSuggestion:w,avatarSuggestionTab:C}}},245079:(e,t,o)=>{o.d(t,{useCalculateSelectedEmojiPackIndex:()=>i});var n=o(296540),r=o(293721),a=o(757454);const i=(e,t)=>{const{range:o}=e,i=(0,r.useStore)(a.$selectedEmojiPackIndex);(0,n.useEffect)((()=>{const o=e.calculateRange();if(!o)return;const{startIndex:n}=o,r=t.findIndex((e=>e>=n)),s=r-1,c=t[r],l=t[s],d=Math.abs(l-n)<Math.abs(c-n)?s:r;i!==d&&(0,a.setSelectedEmojiPackIndex)(d)}),[o,t])}},194669:(e,t,o)=>{o.d(t,{setRecentEmoji:()=>r});var n=o(624761);const r=n.stickersEmojiKeyboard.createEvent();n.stickersEmojiKeyboard.createStore(null).on(r,((e,t)=>t))},88351:(e,t,o)=>{o.d(t,{$selectedEmoji:()=>a,setSelectedEmoji:()=>r});var n=o(624761);const r=n.stickersEmojiKeyboard.createEvent(),a=n.stickersEmojiKeyboard.createStore(null).on(r,((e,t)=>t))},757454:(e,t,o)=>{o.d(t,{$selectedEmojiPackIndex:()=>a,setSelectedEmojiPackIndex:()=>r});var n=o(624761);const r=n.stickersEmojiKeyboard.createEvent(),a=n.stickersEmojiKeyboard.createStore(0).on(r,((e,t)=>t))},814389:(e,t,o)=>{o.d(t,{$emojiPadding:()=>c});var n=o(32489),r=o(624761),a=o(224896);const i={[a.StickerEmojiKeyboardVariant.WIDE]:9,[a.StickerEmojiKeyboardVariant.COMPACT]:8,[a.StickerEmojiKeyboardVariant.REGULAR]:12,[a.StickerEmojiKeyboardVariant.ADAPTIVE]:9,[a.StickerEmojiKeyboardVariant.SMALL]:8},s=r.stickersEmojiKeyboard.createEvent(),c=r.stickersEmojiKeyboard.createStore(i[a.DEFAULT_VARIANT]);(0,n.sample)({clock:a.setVariantOptions,source:a.$variant,fn:e=>i[e],target:s})},366608:(e,t,o)=>{o.d(t,{$avatarSuggestionDisabled:()=>a,setAvatarSuggestionDisabled:()=>r});var n=o(624761);const r=n.stickersEmojiKeyboard.createEvent(),a=n.stickersEmojiKeyboard.createStore(!1).on(r,((e,t)=>t))},576692:(e,t,o)=>{o.d(t,{$avatarSuggestion:()=>l,getAvatarSuggestionFromCache:()=>s,setAvatarSuggestion:()=>i});var n=o(32489),r=o(962177),a=o(624761);const i=a.stickersEmojiKeyboard.createEvent(),s=a.stickersEmojiKeyboard.createEvent(),c=a.stickersEmojiKeyboard.createEffect((async e=>{const t=await e.cache.avatarSuggestion.get();i(t)})),l=a.stickersEmojiKeyboard.createStore(null).on(i,((e,t)=>t));(0,n.sample)({clock:s,source:r.$api,target:c})},517166:(e,t,o)=>{o.d(t,{$avatarSuggestionIsViewed:()=>l,setAvatarSuggestionIsViewed:()=>c});var n=o(32489),r=o(28946),a=o(624761),i=o(503276),s=o(532051);const c=a.stickersEmojiKeyboard.createEvent(),l=a.stickersEmojiKeyboard.createStore(!1).on(c,((e,t)=>t));(0,n.sample)({clock:c,filter:e=>e&&(0,s.isPromoVmojiCounterEnabled)(),fn:()=>i.HelpHintPromoTypes.VMOJI_AVATAR_SUGGESTION,target:r.markAsViewedHelpHint})},562925:(e,t,o)=>{o.d(t,{$avatarSuggestionBannerPackIndex:()=>a,setAvatarSuggestionPackIndex:()=>r});var n=o(624761);const r=n.stickersEmojiKeyboard.createEvent(),a=n.stickersEmojiKeyboard.createStore(null).on(r,((e,t)=>t))},526581:(e,t,o)=>{o.d(t,{$avatarSuggestionTab:()=>a,setAvatarSuggestionTab:()=>r});var n=o(624761);const r=n.stickersEmojiKeyboard.createEvent(),a=n.stickersEmojiKeyboard.createStore(null).on(r,((e,t)=>t))},9510:(e,t,o)=>{o.d(t,{hideHelpHint:()=>i});var n=o(32489),r=o(962177),a=o(624761);const i=a.stickersEmojiKeyboard.createEvent(),s=a.stickersEmojiKeyboard.createEffect((({api:e,hintId:t})=>e.cache.hideHelpHint(t)));(0,n.sample)({clock:i,source:r.$api,fn:(e,t)=>({api:e,hintId:t}),target:s})},28946:(e,t,o)=>{o.d(t,{markAsViewedHelpHint:()=>i});var n=o(32489),r=o(962177),a=o(624761);const i=a.stickersEmojiKeyboard.createEvent(),s=a.stickersEmojiKeyboard.createEffect((({api:e,promoId:t})=>{e.cache.markHelpHintAsViewed(t)}));(0,n.sample)({clock:i,source:r.$api,fn:(e,t)=>({api:e,promoId:t}),target:s})},547634:(e,t,o)=>{o.d(t,{setChatPeer:()=>r});var n=o(624761);const r=n.stickersEmojiKeyboard.createEvent();n.stickersEmojiKeyboard.createStore(null).on(r,((e,t)=>t))},635254:(e,t,o)=>{o.d(t,{$peerId:()=>s,PeerGate:()=>c});var n=o(32489),r=o(293721),a=o(624761);const i=a.stickersEmojiKeyboard.createEvent(),s=a.stickersEmojiKeyboard.createStore(null).on(i,((e,{peerId:t})=>t||null)),c=(0,r.createGate)();(0,n.forward)({from:c.state,to:i})},196243:(e,t,o)=>{o.d(t,{$userPeer:()=>a,setUserPeer:()=>r});var n=o(624761);const r=n.stickersEmojiKeyboard.createEvent(),a=n.stickersEmojiKeyboard.createStore(null).on(r,((e,t)=>t))},714808:(e,t,o)=>{o.d(t,{$imageConfigs:()=>a,setImageConfigs:()=>r});var n=o(624761);const r=n.stickersEmojiKeyboard.createEvent(),a=n.stickersEmojiKeyboard.createStore(null).on(r,((e,t)=>t))},364449:(e,t,o)=>{o.d(t,{$activePackKey:()=>s,ActivePackKeyGate:()=>c,setActivePackKeyOptions:()=>i});var n=o(32489),r=o(293721),a=o(624761);const i=a.stickersEmojiKeyboard.createEvent(),s=a.stickersEmojiKeyboard.createStore(null).on(i,((e,{activePackKey:t})=>t)),c=(0,r.createGate)();(0,n.forward)({from:c.state,to:i})},104982:(e,t,o)=>{o.d(t,{$selectedPackKey:()=>a,setSelectedPackKey:()=>r});var n=o(624761);const r=n.stickersEmojiKeyboard.createEvent(),a=n.stickersEmojiKeyboard.createStore(null).on(r,((e,t)=>t))},13298:(e,t,o)=>{o.d(t,{$stockItemsAvailableToGift:()=>a,setStockItemsAvailableToGift:()=>r});var n=o(624761);const r=n.stickersEmojiKeyboard.createEvent(),a=n.stickersEmojiKeyboard.createStore(null).on(r,((e,t)=>t))},528658:(e,t,o)=>{o.d(t,{$storeNewItemsCount:()=>a,setStoreNewItemsCount:()=>r});var n=o(624761);const r=n.stickersEmojiKeyboard.createEvent(),a=n.stickersEmojiKeyboard.createStore(0).on(r,((e,t)=>t))},204783:(e,t,o)=>{o.d(t,{hideUGCOnboarding:()=>s});var n=o(32489),r=o(962177),a=o(61070),i=o(624761);const s=i.stickersEmojiKeyboard.createEvent(),c=i.stickersEmojiKeyboard.createEffect((e=>e.cache.hideUGCOnboarding()));(0,n.sample)({clock:s,source:r.$api,target:c}),(0,n.sample)({source:c.doneData,filter:e=>e,target:a.reloadUGCInfo})},934199:(e,t,o)=>{o.d(t,{$stickersHorizontalGap:()=>m,$stickersKeyboardVerticalOrder:()=>p,$stickersSize:()=>d,$stickersVerticalGap:()=>u});var n=o(32489),r=o(624761),a=o(224896);const i={[a.StickerEmojiKeyboardVariant.WIDE]:86,[a.StickerEmojiKeyboardVariant.COMPACT]:80,[a.StickerEmojiKeyboardVariant.REGULAR]:92,[a.StickerEmojiKeyboardVariant.ADAPTIVE]:86,[a.StickerEmojiKeyboardVariant.SMALL]:72},s={[a.StickerEmojiKeyboardVariant.WIDE]:8,[a.StickerEmojiKeyboardVariant.COMPACT]:6,[a.StickerEmojiKeyboardVariant.REGULAR]:8,[a.StickerEmojiKeyboardVariant.ADAPTIVE]:8,[a.StickerEmojiKeyboardVariant.SMALL]:6},c={[a.StickerEmojiKeyboardVariant.WIDE]:6,[a.StickerEmojiKeyboardVariant.COMPACT]:8,[a.StickerEmojiKeyboardVariant.REGULAR]:8,[a.StickerEmojiKeyboardVariant.ADAPTIVE]:6,[a.StickerEmojiKeyboardVariant.SMALL]:8},l={[a.StickerEmojiKeyboardVariant.WIDE]:"column",[a.StickerEmojiKeyboardVariant.COMPACT]:"column",[a.StickerEmojiKeyboardVariant.REGULAR]:"column",[a.StickerEmojiKeyboardVariant.SMALL]:"column",[a.StickerEmojiKeyboardVariant.ADAPTIVE]:"column-reverse"},d=(r.stickersEmojiKeyboard.createEvent(),r.stickersEmojiKeyboard.createEvent(),r.stickersEmojiKeyboard.createEvent(),r.stickersEmojiKeyboard.createStore(i[a.DEFAULT_VARIANT])),u=r.stickersEmojiKeyboard.createStore(c[a.DEFAULT_VARIANT]),m=r.stickersEmojiKeyboard.createStore(s[a.DEFAULT_VARIANT]),p=r.stickersEmojiKeyboard.createStore(l[a.DEFAULT_VARIANT]);(0,n.sample)({clock:a.setVariantOptions,source:a.$variant,fn:e=>i[e],target:d}),(0,n.sample)({clock:a.setVariantOptions,source:a.$variant,fn:e=>c[e],target:u}),(0,n.sample)({clock:a.setVariantOptions,source:a.$variant,fn:e=>s[e],target:m}),(0,n.sample)({clock:a.setVariantOptions,source:a.$variant,fn:e=>l[e],target:p})},493808:(e,t,o)=>{o.d(t,{$vmojiPromotion:()=>l,clearVmojiPromotionDot:()=>s,setVmojiPromotion:()=>i});var n=o(32489),r=o(962177),a=o(624761);const i=a.stickersEmojiKeyboard.createEvent(),s=a.stickersEmojiKeyboard.createEvent(),c=a.stickersEmojiKeyboard.createEffect((async({api:e,vmojiPromotion:t})=>{if(t)return e.cache.clearVmojiPromotionDot()})),l=a.stickersEmojiKeyboard.createStore(null).on(i,((e,t)=>t)).on(c.doneData,(e=>({...e,dot_color:void 0}))),d=(0,n.combine)(r.$api,l,((e,t)=>({api:e,vmojiPromotion:t})));(0,n.sample)({clock:s,source:d,target:c})},224896:(e,t,o)=>{o.d(t,{$variant:()=>l,DEFAULT_VARIANT:()=>c,StickerEmojiKeyboardVariant:()=>n,VariantGate:()=>d,setVariantOptions:()=>s});var n,r=o(32489),a=o(293721),i=o(624761);!function(e){e.WIDE="wide",e.COMPACT="compact",e.REGULAR="regular",e.ADAPTIVE="adaptive",e.SMALL="small"}(n||(n={}));const s=i.stickersEmojiKeyboard.createEvent(),c=n.WIDE,l=i.stickersEmojiKeyboard.createStore(c).on(s,((e,{variant:t})=>t)),d=(0,a.createGate)();(0,r.forward)({from:d.state,to:s})},724659:(e,t,o)=>{o.d(t,{$isVisible:()=>s,VisibleGate:()=>c});var n=o(32489),r=o(293721),a=o(624761);const i=a.stickersEmojiKeyboard.createEvent(),s=a.stickersEmojiKeyboard.createStore(!1).on(i,((e,{isVisible:t})=>t)),c=(0,r.createGate)();(0,n.forward)({from:c.state,to:i})},990736:(e,t,o)=>{o.d(t,{$visibleTab:()=>c,$visibleTabState:()=>l,VisibleTabGate:()=>d});var n=o(293721),r=o(32489),a=o(624761),i=o(520453);const s=a.stickersEmojiKeyboard.createEvent(),c=a.stickersEmojiKeyboard.createStore(null).on(s,((e,{visibleTab:t})=>t??null)),l=(0,r.combine)(c,(e=>({isEmojiVisibleTab:e===i.Tab.EMOJI,isStickersVisibleTab:e===i.Tab.STICKERS}))),d=(0,n.createGate)();(0,r.forward)({from:d.state,to:s})},921096:(e,t,o)=>{function n(e){return 1-Math.pow(1-e,4)}o.d(t,{easeOutQuart:()=>n})},54500:(e,t,o)=>{function n(e){return encodeURIComponent(e.replace(/\uFE0F/giu,"")).replace(/%/gi,"").toLowerCase()}o.d(t,{unicodeToByteHex:()=>n})},492924:(e,t,o)=>{o.d(t,{StickerRich:()=>l});var n=o(474848),r=o(43684),a=o(864585),i=o(465041),s=o(241360),c=o(292877);function l({baseStickerProps:e,wrapperProps:t,popupProps:o}){var l;const{sticker:d}=e,u=(0,s.getStickerContext)(d);e.sticker=u,(l=t).icon??(l.icon=(0,c.getDefaultIcon)(d));const m=(0,n.jsx)(r.Sticker,{...e}),{isUGC:p,isPopup:h}=u;return h?(0,n.jsx)(a.PopupWrapper,{wrapperProps:t,...o,children:m}):p?(0,n.jsx)(i.Wrapper,{...t,children:m}):m}},864585:(e,t,o)=>{o.d(t,{PopupWrapper:()=>s});var n=o(474848),r=o(8520),a=o(465041),i=o(503416);function s({wrapperProps:e,isAnimationPlaying:t,children:o}){return(0,n.jsx)(a.Wrapper,{...e,contentClassName:(0,r.classNames)(e.contentClassName,i.default.iconAnimated),stickerContainerClassName:(0,r.classNames)(e.stickerContainerClassName,{[i.default.stickerAnimationIsPlaying]:t}),children:o})}},465041:(e,t,o)=>{o.d(t,{Wrapper:()=>s});var n=o(474848),r=o(753457),a=o(8520),i=o(404308);function s({icon:e,children:t,iconPosition:o,iconWrapperRef:s,onContentClick:c,contentClassName:l="",wrapperClassName:d="",stickerContainerClassName:u=""}){const m=function(e="rightInset"){let t={wrapper:"",stickerWrapper:"",icon:""};switch(e){case"leftAbsolute":return{...t,icon:(0,a.classNames)(i.default.iconAbsolute,i.default.iconAbsoluteLeft)};case"rightAbsolute":return{...t,icon:(0,a.classNames)(i.default.iconAbsolute,i.default.iconAbsoluteRight)};case"leftInset":return{...t,icon:(0,a.classNames)(i.default.iconAbsolute,i.default.iconAbsoluteInsetLeft)};case"rightInset":return{...t,icon:(0,a.classNames)(i.default.iconAbsolute,i.default.iconAbsoluteInsetRight)};case"leftRelative":return{...t,wrapper:(0,a.classNames)(i.default.wrapperFlex,i.default.wrapperFlexLeft),icon:(0,a.classNames)(i.default.iconRelative,i.default.iconRelativeLeft)};case"rightRelative":return{...t,wrapper:(0,a.classNames)(i.default.wrapperFlex,i.default.wrapperFlexRight),icon:(0,a.classNames)(i.default.iconRelative,i.default.iconRelativeRight)};default:return t}}(o);return(0,n.jsxs)("div",{"data-testid":"sticker-rich-wrapper",className:(0,a.classNames)(i.default.wrapper,m.wrapper,d),children:[(0,n.jsx)("div",{"data-testid":"sticker-rich-sticker-wrapper",className:(0,a.classNames)(u,m.stickerWrapper),children:t}),(0,n.jsx)("div",{"data-testid":"sticker-rich-icon-wrapper",className:(0,a.classNames)(i.default.icon,m.icon,l),children:(0,n.jsx)(r.Tappable,{hoverMode:"opacity",activeMode:"opacity",disabled:!c,getRootRef:s,onClick:c,children:e})})]})}},292877:(e,t,o)=>{o.d(t,{getDefaultIcon:()=>i});var n=o(474848),r=o(171741),a=o(241360);const i=e=>{const t=(0,a.getStickerContext)(e),{isUGC:o}=t;return o?(0,n.jsx)(r.Icon20UgcChatStickerCircleFillBlackAlpha,{}):null}},559285:(e,t,o)=>{o.d(t,{AnimationLayer:()=>s});var n=o(474848),r=o(296540),a=o(355790),i=o(767310);const s=({layer:e,animationState:t,onAnimationPlayBackAreaLoaded:o,onAnimationPlayBackAreaFinished:s,...c})=>{const l=(0,a.isMainAnimationLayout)(e),[d,u]=(0,r.useState)(!1);return d?null:(0,n.jsx)(n.Fragment,{children:l&&(0,n.jsx)(i.MainAnimationLayout,{layer:e,onFirstFrameRender:()=>{t.markStateAsPlaying()},onAnimationLoaded:()=>{o(),t.markStateAsLoaded()},onLayerLoopCompleted:()=>{d||(s(),t.markStateAsFinished(),u(!0))},...c})})}},159824:(e,t,o)=>{o.d(t,{LottiePlayer:()=>p});var n=o(474848),r=o(327813),a=o(456921),i=o(8520),s=o(930095),c=o(296540),l=o(657112),d=o(355790),u=o(704564),m=o(172469);const p=(0,a.observer)((({layer:e,style:t,onAnimationLoaded:o,onFirstFrameRender:a,onLayerLoopCompleted:p})=>{const{popupStore:h}=(0,u.usePopupStickerWithError)(),f=(0,c.useRef)(0),v=(0,c.useRef)(!1),{isPlaying:g,onAnimationClick:_,lottiePlayer:{options:E}}=h,{onLottiePlayerError:b}=h.errorHandlers,{lottieContainerRef:y,lottiePlayerRef:k,lottieLoaded:w,lottieRendered:C,lottieErrorMessage:A}=(0,s.useLottie)({group:l.POPUP_LOTTIE_GROUP,animationUrl:e.url,...E},{play:g}),S=()=>{v.current||(p(),v.current=!0)};return(0,c.useEffect)((()=>{const e=k.current;e&&e.setOptions(E)}),[E]),(0,c.useEffect)((()=>{A&&(e=>{b?.(e),S()})(A)}),[A,b]),(0,c.useEffect)((()=>{const e=k.current;if(e)return o&&e.addEventListener("ready",o,{once:!0}),a&&e.addEventListener("firstFrame",a,{once:!0}),()=>{a&&e.removeEventListener("firstFrame",a),o&&e.removeEventListener("ready",o)}}),[w]),(0,c.useEffect)((()=>{const e=k.current;if(e)return e.addEventListener("destroy",S,{once:!0}),()=>{v.current&&e.removeEventListener("destroy",S)}}),[C]),(0,c.useEffect)((()=>{const t=k.current;if(!t)return;const o=(0,d.getAnimationLayerLoopsLimit)(e),n=()=>{if(f.current+=1,f.current===o)return S(),void t.removeEventListener("loopComplete",n)};return t.addEventListener("loopComplete",n),()=>{t.removeEventListener("loopComplete",n)}}),[w]),(0,n.jsx)("div",{onClick:e=>{_?.(e)},className:(0,i.classNames)(m.default.wrapper,{[m.default.wrapperClickable]:Boolean(_)&&E.speed!==l.SPEED_ON_DESTROY}),style:(0,r.toJS)(t),ref:y})}))},767310:(e,t,o)=>{o.d(t,{MainAnimationLayout:()=>a});var n=o(474848),r=o(159824);const a=({layer:e,popUpLayerStyle:t,onAnimationLoaded:o,onFirstFrameRender:a,onLayerLoopCompleted:i})=>(0,n.jsx)(r.LottiePlayer,{layer:e,style:t,onAnimationLoaded:o,onFirstFrameRender:a,onLayerLoopCompleted:i})},720509:(e,t,o)=>{o.d(t,{NonAnimationLayer:()=>c});var n=o(474848),r=o(296540),a=o(355790),i=o(696701),s=o(630517);const c=({layer:e,parentState:t,popUpLayerStyle:o})=>{const c=(0,a.isGradientLayer)(e),l=(0,a.isBackgroundLayer)(e),[d,u]=(0,r.useState)(!t);return(0,r.useEffect)((()=>{if(!t)return;const e=()=>{u(!1)},o=()=>{u(!0)};return t.listenable.once("onPlaying",o),t.listenable.once("onFinished",e),()=>{t.listenable.off("onPlaying",o),t.listenable.off("onFinished",e)}}),[]),d?(0,n.jsxs)(n.Fragment,{children:[c&&(0,n.jsx)(i.GradientLayer,{popUpLayerStyle:o}),l&&(0,n.jsx)(s.BackgroundLayer,{popUpLayerStyle:o})]}):null}},630517:(e,t,o)=>{o.d(t,{BackgroundLayer:()=>a});var n=o(474848),r=o(372434);const a=({popUpLayerStyle:e})=>(0,n.jsx)("div",{className:r.default.wrapper,style:e})},696701:(e,t,o)=>{o.d(t,{GradientLayer:()=>a});var n=o(474848),r=o(558850);const a=({popUpLayerStyle:e})=>(0,n.jsx)("div",{style:e,className:r.default.wrapper})},862739:(e,t,o)=>{o.d(t,{PlayBackArea:()=>l});var n=o(474848),r=o(327813),a=o(559285),i=o(720509),s=o(355790),c=o(368730);const l=({layer:e,popUpLayerStyle:t,animationState:o,onAnimationPlayBackAreaFinished:l,onAnimationPlayBackAreaLoaded:d,style:u,...m})=>{const p=(0,s.isAnimationLayer)(e);return(0,n.jsx)("div",{className:c.default.wrapper,style:(0,r.toJS)(u),...m,children:(0,n.jsxs)("div",{className:c.default.area,children:[p&&o&&(0,n.jsx)(a.AnimationLayer,{layer:e,animationState:o,popUpLayerStyle:t,onAnimationPlayBackAreaLoaded:d,onAnimationPlayBackAreaFinished:l}),!p&&(0,n.jsx)(i.NonAnimationLayer,{layer:e,parentState:o,popUpLayerStyle:t})]})})}},136949:(e,t,o)=>{o.d(t,{PopUpPortal:()=>u});var n=o(474848),r=o(327813),a=o(440961),i=o(296540),s=o(456921),c=o(862739),l=o(704564),d=o(355790);const u=(0,s.observer)((({portalElement:e=document.body})=>{const t=(0,i.useRef)(0),o=(0,i.useRef)(0),{popupStore:s}=(0,l.usePopupStickerWithError)(),u=s.playBackAreasProps.filter((({layer:e})=>(0,d.isAnimationLayer)(e))).length,m=()=>{t.current++,t.current===u&&(t.current=0,o.current=0,s.onEndPlay?.())},p=()=>{o.current++,o.current===u&&s.startPlay()};if(!s.playBackAreasProps.length)return null;const h=(0,r.toJS)(s.playBackAreasProps).map((({style:e,popUpLayerStyle:t,...o},a)=>(0,n.jsx)(c.PlayBackArea,{onAnimationPlayBackAreaLoaded:p,onAnimationPlayBackAreaFinished:m,style:(0,r.toJS)(e),popUpLayerStyle:(0,r.toJS)(t),...o},a)));return(0,a.createPortal)(h,e||document.body)}))},697033:(e,t,o)=>{o.d(t,{PopupProvider:()=>s});var n=o(474848),r=o(296540),a=o(704564),i=o(920641);const s=({popupStore:e,children:t})=>{const o=(0,r.useRef)(e??new i.PopupStickerService);return(0,n.jsx)(a.PopupContext.Provider,{value:{popupStore:o.current},children:t})}},704564:(e,t,o)=>{o.d(t,{PopupContext:()=>r,usePopupSticker:()=>i,usePopupStickerWithError:()=>a});var n=o(296540);const r=(0,n.createContext)(null);function a(){const e=(0,n.useContext)(r);if(null===e)throw new Error("You have forgotten to wrap your root component with PopupProvider");return e}function i(){const e=(0,n.useContext)(r);return null===e?{popupStore:void 0}:e}},284457:(e,t,o)=>{o.d(t,{PopupRoot:()=>p});var n=o(474848),r=o(456921),a=o(296540),i=o(136949),s=o(697033),c=o(302091),l=o(189294),d=o(657112),u=o(920641),m=o(208932);const p=(0,r.observer)((({isVisible:e=!0,allowUseCommon:t=!1,isUseAsFullscreen:o=!1,position:r=d.POPUP_POSITION_DEFAULT_VALUE,HtmlElement:p="div",setElementRef:h,children:f,className:v,popUpStore:g,id:_,...E})=>{const[b,y]=(0,a.useState)(null),k=(0,a.useMemo)((()=>new u.PopupStickerService),[]);return(0,a.useEffect)((()=>{e||g?.destroyByRemove()}),[e]),(0,a.useEffect)((()=>()=>{g?.destroyByRemove()}),[]),(0,n.jsx)(p,{id:_,ref:e=>{if((0,l.setRef)(e,h),!e)return void y(null);const n=(0,c.getDataAttrs)({popupStickerPosition:r,popupStickerContainerId:e.id,popupStickerUseCommon:t.toString(),popupStickerFullScreenContainer:o?e.id:void 0});for(const[t,o]of Object.entries(n))e.setAttribute(t,o);y(o?e:document.querySelector(`#${e.getAttribute(d.FULL_SCREEN_CONTAINER_DATA_PROPERTY)}`)||document.querySelector(d.FULL_SCREEN_DATA_DEFAULT_VALUE))},className:v||m.default.wrapper,...E,children:(0,n.jsxs)(s.PopupProvider,{popupStore:g||k,children:[b&&e&&(0,n.jsx)(i.PopUpPortal,{portalElement:b}),f]})})}))},657112:(e,t,o)=>{o.d(t,{CONTAINER_ID_DATASET_PROPERTY:()=>c,CONTAINER_ID_DATA_DEFAULT_VALUE:()=>a,CONTAINER_ID_DATA_PROPERTY:()=>s,ConflictActionsTypes:()=>x,CustomPopUpLayerTypes:()=>b,DEDUCTIBLE_DATA_PROPERTY:()=>u,DEDUCTIBLE_FULL_SCREEN_DATA_PROPERTY:()=>m,DEFAULT_LOOP_LIMIT:()=>k,DEFAULT_PLAYER_OPTIONS:()=>g,DEFAULT_POPUP_CONTAINER_DATA_PROPERTY:()=>p,DEFAULT_POSITION_X:()=>C,DEFAULT_POSITION_Y:()=>A,DEFAULT_SCALE_RATIO:()=>w,FULL_SCREEN_CONTAINER_DATA_PROPERTY:()=>d,FULL_SCREEN_DATA_DEFAULT_VALUE:()=>i,MIN_SIZE_FOR_PLAY:()=>I,MIN_SIZE_FOR_SCALE:()=>S,POPUP_LOTTIE_GROUP:()=>P,POPUP_POSITION_DEFAULT_VALUE:()=>f,POPUP_POSITION_PROPERTY:()=>h,POPUP_STICKER_IM_CONTAINER:()=>l,PopUpLayerTypes:()=>E,PopUpPositionTypes:()=>y,SCREEN_MODIFICATOR:()=>v,SPEED_ON_DESTROY:()=>_});var n=o(995385),r=o(179739);const a="common_container",i="body",s="data-popup-sticker-container-id",c=(0,r.dataAttrKeyToDatasetKey)(s),l="popup-sticker-im-container",d="data-popup-sticker-full-screen-container",u="data-popup-sticker-deductible",m="data-popup-sticker-deductible-full-screen",p="data-popup-sticker-use-common",h="data-popup-sticker-position",f="fixed",v="screen",g={speed:1,loop:!0,autoplay:!1,cache:!0,lazyLoading:!0,direction:n.LottiePlayerDirection.FORWARD,strictCache:!0},_=3,E={Gradient:"gradient",FullScreen:"animation_fullscreen",Fixed:"animation_fixed"},b={Background:"background"},y={FullScreen:"fullscreen",Fixed:"fixed",TopFullScreen:"topFullScreen"},k=1,w=1,C="center",A="middle",S=384,I=64,P="Popup",x={ChangeModificator:"changeModificator",DontShow:"dontShow"}},128584:(e,t,o)=>{o.d(t,{AnimationState:()=>u});var n=o(434518),r=o(763812),a=o(919225);const i="preparing",s="loaded",c="playing",l="finished";var d=(0,r._)("_status");class u extends a.Emitter{get status(){return(0,n._)(this,d)[d]}constructor(){super(),Object.defineProperty(this,d,{writable:!0,value:void 0}),(0,n._)(this,d)[d]=i,this.markStateAsLoaded=()=>{(0,n._)(this,d)[d]=s,this.emit("onLoaded")},this.markStateAsPlaying=()=>{(0,n._)(this,d)[d]=c,this.emit("onPlaying")},this.markStateAsFinished=()=>{(0,n._)(this,d)[d]=l,this.emit("onFinished")}}}},387714:(e,t,o)=>{o.d(t,{checkPositionConflict:()=>i});var n=o(355790),r=o(845610),a=o(657112);const i=(e,{bottom:t,right:o,top:i,left:s},c)=>{const l={...c};for(const d of e){if(d.popUpPositions&&!d.popUpPositions.includes((0,r.getPopUpPositionType)(c)))continue;const e=document.querySelector(d.blockSelector);if(!e)continue;const u=e.getBoundingClientRect();if(s<=u.right&&o>=u.left&&i<=u.bottom&&t>=u.top)return d.action===a.ConflictActionsTypes.DontShow?null:(0,n.changeLayerPosition)(l)}return l}},522932:(e,t,o)=>{o.d(t,{createDestroyListeners:()=>n,setDestroyListeners:()=>r});const n=e=>{const t=e=>{document.removeEventListener("wheel",e),document.removeEventListener("touchmove",e),window.removeEventListener("resize",e)},o=()=>{t(o),e()};return{addDestroyListener:()=>{document.addEventListener("wheel",o,{once:!0}),document.addEventListener("touchmove",o,{once:!0}),window.addEventListener("resize",o,{once:!0})},removeDestroyListener:t.bind(void 0,o),handleDestroy:o}},r=(e,t)=>({...e,onEndPlay:()=>{t.removeDestroyListener(),e.onEndPlay?.()},onEndPrepare:o=>{o&&t.addDestroyListener(),e.onEndPrepare?.(o)},onAnimationClick:o=>{t.handleDestroy(),e.onAnimationClick?.(o)}})},810263:(e,t,o)=>{o.d(t,{getAnimationAreaStyle:()=>a});var n=o(657112),r=o(355790);const a=({width:e,height:t},o,a)=>{const i={...a},{position_y:s,position_x:c}=(0,r.getAnimationLayerPosition)(o),l=c.replace(n.SCREEN_MODIFICATOR,"").trim(),d=s.replace(n.SCREEN_MODIFICATOR,"").trim();return i.position="absolute","center"===l?(i.left=.5*e,i.transform="translateX(-50%)"):i.left="left"===l?0:e-parseInt(i.width),"middle"===d?(i.top=.5*t,i.transform="translateY(-50%)"):i.top="top"===d?0:t-parseInt(i.height),"middle"===d&&"center"===l&&(i.transform="translate(-50%, -50%)"),i}},504846:(e,t,o)=>{o.d(t,{getBasePropsForPlaybackAreas:()=>u});var n=o(128584),r=o(845610),a=o(44306),i=o(410673),s=o(810263),c=o(387714),l=o(355790);function d(e,t,o,u){if((0,l.isGradientLayer)(e)){if(!u)return null;const t={...u.popUpLayerStyle,top:"unset",left:"unset",transform:"unset"};return{layer:e,style:u.style,animationState:u.animationState,popUpLayerStyle:(0,i.getGradientAreaStyle)(e,t)}}const m=(0,r.getPopUpPositionType)(e),{playBackAreaStyle:p,topByViewport:h}=(0,a.getPlayBackAreaStyle)(m,t);if((0,l.isBackgroundLayer)(e))return{layer:e,style:p,popUpLayerStyle:e.style};const f=new n.AnimationState;if((0,l.isBackgroundAnimationLayout)(e))return null;const v=parseInt(p.width),g=parseInt(p.height);let _=Math.min(v,g);const E=(0,l.getAnimationLayerScaleRatio)(e);if((0,l.isCanScale)(_)&&(_*=E),(0,l.isFullScreenLayer)(e)){const e=.5*Math.min(document.documentElement.clientHeight,document.documentElement.clientWidth);_>e&&(_=e)}if(!(0,l.isCanPlay)(_))return null;const b={height:_,width:_},y=(0,s.getAnimationAreaStyle)({width:v,height:g},e,b),k=h+parseInt(y.top),w=h+parseInt(y.left),C=k+_,A=w+_,S=(0,c.checkPositionConflict)(o,{top:k,left:w,bottom:C,right:A},e);return S?(0,l.checkPositionIsEqual)(e,S)?{animationState:f,layer:e,popUpLayerStyle:y,style:p}:d(S,t,[],null):null}const u=({layers:e,popUpElements:t,conflictBlocks:o})=>{const n=[...e].reverse(),r=[];let a=null;for(const e of n){const n=d(e,t,o,a);(0,l.isMainAnimationLayout)(e)&&(a=n),(0,l.isGradientLayer)(e)&&(a=null),n&&r.push(n)}return r.reverse(),r}},302091:(e,t,o)=>{o.d(t,{findFixedElement:()=>s,getDataAttrs:()=>r,getDeductibleDataAttrs:()=>i,getPopupElementsFromFixedElement:()=>l,getStringDataAttrs:()=>a});var n=o(657112);const r=e=>{const{popupStickerUseCommon:t="false",popupStickerContainerId:o,popupStickerFullScreenContainer:r,popupStickerPosition:a=n.POPUP_POSITION_DEFAULT_VALUE}=e,i={[n.DEFAULT_POPUP_CONTAINER_DATA_PROPERTY]:t,[n.POPUP_POSITION_PROPERTY]:a,[n.CONTAINER_ID_DATA_PROPERTY]:o};return r&&(i[n.FULL_SCREEN_CONTAINER_DATA_PROPERTY]=r),i},a=e=>{let t="";const o=r(e);return Object.entries(o).forEach((([e,o])=>{t+=`${e}='${o}' `})),t.trim()},i=e=>{const{popupStickerDeductible:t,popupStickerDeductibleFullScreen:o}=e,r={};return t&&(r[n.DEDUCTIBLE_DATA_PROPERTY]=t),o&&(r[n.DEDUCTIBLE_FULL_SCREEN_DATA_PROPERTY]=o),r},s=e=>e.closest(`[${n.CONTAINER_ID_DATA_PROPERTY}]`)||document.body;function c(e,t,o,r,a,i=null){let s=[...document.querySelectorAll(`[${t}=${r}]`)];switch(a&&(s=[...s,...document.querySelectorAll(`[${t}=${n.CONTAINER_ID_DATA_DEFAULT_VALUE}]`)]),s.push(o),e){case"lower":case"parent":s=s.sort(((e,t)=>e.getBoundingClientRect().top-t.getBoundingClientRect().top));break;case"upper":s=s.sort(((e,t)=>e.getBoundingClientRect().bottom-t.getBoundingClientRect().bottom))}const c=s.findIndex((e=>e===o));let l;switch(e){case"upper":case"parent":l=s[c-1]||null;break;case"lower":l=s[c+1]||null;break;default:l=s[0]||null}return l||i}const l=(e,t)=>{const{popupStickerContainerId:o,popupStickerPosition:r,popupStickerUseCommon:a}=(e=>{const{popupStickerUseCommon:t="false",popupStickerPosition:o=n.POPUP_POSITION_DEFAULT_VALUE,popupStickerContainerId:r=n.CONTAINER_ID_DATA_DEFAULT_VALUE}=e.dataset;return{popupStickerContainerId:r,popupStickerUseCommon:t,popupStickerPosition:o}})(e);let i="true"===a;return{fixedElement:e,headerElement:c("upper",n.DEDUCTIBLE_DATA_PROPERTY,t,o,i),footerElement:c("lower",n.DEDUCTIBLE_DATA_PROPERTY,t,o,i),fullScreenElement:c("parent",n.FULL_SCREEN_CONTAINER_DATA_PROPERTY,t,o,i,document.body),fullScreenHeaderElement:c("upper",n.DEDUCTIBLE_FULL_SCREEN_DATA_PROPERTY,t,o,i),fullScreenFooterElement:c("lower",n.DEDUCTIBLE_FULL_SCREEN_DATA_PROPERTY,t,o,i),position:r}}},410673:(e,t,o)=>{o.d(t,{getGradientAreaStyle:()=>s});var n=o(657112);const r={bottom:"0deg",left:"90deg",top:"180deg",right:"270deg"},a="255, 255, 255",i=`radial-gradient(50.13% 50.13% at 50.13% 50.13%, rgba(${a}, 0.4) 0%, rgba(${a}, 0) 100%)`,s=({position:e},t)=>{const o={position:"absolute"},a=e.replace(`${n.SCREEN_MODIFICATOR} `,"");return"middle"===a?(o.top="50%",o.left="50%",o.transform="translate(-50%, -50%)",o.background=i,{...t,...o}):(["top","bottom"].includes(a)?o.width="100%":o.height="100%",o[a]=0,o["--gradient-deg"]=r[a]||r.top,{...t,...o})}},44306:(e,t,o)=>{o.d(t,{getPlayBackAreaStyle:()=>r});var n=o(657112);function r(e,{fullScreenHeaderElement:t,fullScreenFooterElement:o,fullScreenElement:r,fixedElement:a,footerElement:i,headerElement:s,position:c}){const l=e===n.PopUpPositionTypes.FullScreen,{top:d,left:u,bottom:m}=r.getBoundingClientRect(),p=l?r:a,{top:h,bottom:f,left:v,width:g}=p.getBoundingClientRect(),{bottom:_}=s?.getBoundingClientRect()||{bottom:-1/0},{bottom:E}=t?.getBoundingClientRect()||{bottom:-1/0},b=Math.max(_,h)<0,y=e===n.PopUpPositionTypes.TopFullScreen||b,k=!l&&!y,w=k?_:E,C=l?o:i,A=C?.getClientRects().length,{top:S}=C&&A?C.getBoundingClientRect():{top:1/0};let I=0;"absolute"===c&&(I=-d);const P=[];w>0&&P.push(I+w),k&&h>=0&&P.push(I+h),d<0&&P.push(I);const x=Math.max(...P,0),N=r===document.body?document.documentElement.clientHeight:function(e){return Math.min(e,document.documentElement.clientHeight)}(m),R=[I+N,p===document.body?document.documentElement.clientHeight:I+f,I+S],T=Math.min(...R)-x,M=function(e){return Math.min(e,document.documentElement.clientWidth)}(g),O=v-u,L={position:c};L.top=`${x}px`,L.left=`${O}px`,L.width=`${M}px`,L.height=`${T}px`;return{playBackAreaStyle:L,topByViewport:x-I}}},845610:(e,t,o)=>{o.d(t,{getPopUpPositionType:()=>a});var n=o(355790),r=o(657112);function a(e){return(0,n.isFullScreenLayer)(e)?r.PopUpPositionTypes.FullScreen:(0,n.isTopFullScreenLayer)(e)?r.PopUpPositionTypes.TopFullScreen:r.PopUpPositionTypes.Fixed}},355790:(e,t,o)=>{o.d(t,{changeLayerPosition:()=>f,checkPositionIsEqual:()=>v,getAnimationLayerLoopsLimit:()=>a,getAnimationLayerPosition:()=>r,getAnimationLayerScaleRatio:()=>i,isAnimationLayer:()=>u,isBackgroundAnimationLayout:()=>l,isBackgroundLayer:()=>c,isCanPlay:()=>_,isCanScale:()=>g,isFullOrPartiallyFullScreenLayer:()=>h,isFullScreenLayer:()=>p,isGradientLayer:()=>s,isMainAnimationLayout:()=>d,isTopFullScreenLayer:()=>m});var n=o(657112);const r=e=>{const{position_x:t,position_y:o}=e;return{position_x:t||n.DEFAULT_POSITION_X,position_y:o||n.DEFAULT_POSITION_Y}},a=e=>{const{loops_limit:t=n.DEFAULT_LOOP_LIMIT}=e;return t},i=e=>{const{scale_ratio:t=n.DEFAULT_SCALE_RATIO}=e;return t},s=e=>e.type===n.PopUpLayerTypes.Gradient,c=e=>e.type===n.CustomPopUpLayerTypes.Background,l=e=>e.type===n.PopUpLayerTypes.FullScreen,d=e=>e.type===n.PopUpLayerTypes.Fixed,u=e=>l(e)||d(e),m=e=>{if(!d(e))return!1;const{position_x:t,position_y:o}=r(e);return!t.includes(n.SCREEN_MODIFICATOR)&&o===`${n.SCREEN_MODIFICATOR} top`},p=e=>{if(c(e)||l(e))return!0;if(s(e))return e.position.includes(n.SCREEN_MODIFICATOR);if(d(e)){const{position_x:t,position_y:o}=r(e);return t.includes(n.SCREEN_MODIFICATOR)&&o.includes(n.SCREEN_MODIFICATOR)}return!1},h=e=>p(e)||m(e),f=e=>{const{position_x:t,position_y:o}=r(e);return h(e)?{...e,position_x:t.replace(`${n.SCREEN_MODIFICATOR} `,""),position_y:o.replace(`${n.SCREEN_MODIFICATOR} `,"")}:{...e,position_x:`${n.SCREEN_MODIFICATOR} ${t}`,position_y:`${n.SCREEN_MODIFICATOR} ${o}`}},v=(e,t)=>u(e)&&u(t)?t.position_y===e.position_y&&e.position_x===t.position_x:!(!s(e)||!s(t))&&t.position===e.position,g=e=>e>=n.MIN_SIZE_FOR_SCALE,_=e=>e>=n.MIN_SIZE_FOR_PLAY},435268:(e,t,o)=>{o.d(t,{LottiePlayer:()=>a});var n=o(327813),r=o(657112);class a{constructor(){this.options={...r.DEFAULT_PLAYER_OPTIONS},this.setOptions=e=>{this.options=e},this.setOption=({key:e,value:t})=>{typeof this.options[e]==typeof t&&(this.options={...this.options,[e]:t})},this.reset=()=>{this.options={...r.DEFAULT_PLAYER_OPTIONS}},(0,n.makeAutoObservable)(this)}}},920641:(e,t,o)=>{o.d(t,{PopupStickerService:()=>u});var n=o(327813),r=o(435268),a=o(970250),i=o(522932),s=o(504846),c=o(302091),l=o(657112),d=o(377803);class u{constructor(){this.isPlaying=!1,this.isPreparing=!1,this.playBackAreasProps=[],this.onAnimationClick=null,this.onEndPlay=null,this.onEndPrepare=null,this.errorHandlers={},this.conflictBlocks=new a.PositionConflict,this.lottiePlayer=new r.LottiePlayer,this.setLottiePlayerOptions=e=>{this.isPlaying&&this.lottiePlayer.setOptions(e)},this.setLottiePlayerOption=e=>{this.isPlaying&&this.lottiePlayer.setOption(e)},this.preparePreview=e=>{const t=e.layers.slice();t.unshift({type:l.CustomPopUpLayerTypes.Background,style:{opacity:"0.9",background:d.default.colorBackgroundModal.normal.value}}),this.prepare({...e,layers:t})},this.prepareWithDestroyEvent=e=>{const t=(0,i.createDestroyListeners)(this.destroyBySpeedIncrement.bind(this));this.prepare((0,i.setDestroyListeners)(e,t))},this.prepare=({layers:e,stickerElement:t,onEndPrepare:o=null,onEndPlay:n=null,onAnimationClick:r=null,errorHandlers:a,mountNode:i})=>{if(this.isPlaying||this.isPreparing)throw o?.(!1),new Error("Pop-up stickers are already playing");this.isPreparing=!0;const l=(0,c.findFixedElement)(t),d=(0,c.getPopupElementsFromFixedElement)(l,t),u=(0,s.getBasePropsForPlaybackAreas)({layers:e,popUpElements:d,conflictBlocks:this.conflictBlocks.blocks}),m=Boolean(u.length),p=()=>{this.reset(),n?.()};this.onEndPrepare=o,this.onEndPlay=p,this.onAnimationClick=r,m&&i?.(),this.playBackAreasProps=u,a&&(this.errorHandlers=a),m||(o?.(!1),p())},this.destroyBySpeedIncrement=()=>{this.setLottiePlayerOption({key:"speed",value:l.SPEED_ON_DESTROY})},this.destroyByRemove=()=>{this.onEndPlay?this.onEndPlay():this.reset()},this.startPlay=()=>{this.isPlaying=!0,this.isPreparing=!1,this.onEndPrepare?.(!0)},this.reset=()=>{this.isPlaying=!1,this.isPreparing=!1,this.playBackAreasProps=[],this.onEndPlay=null,this.onAnimationClick=null,this.onEndPrepare=null,this.errorHandlers={},this.lottiePlayer.reset()},(0,n.makeAutoObservable)(this)}}},970250:(e,t,o)=>{o.d(t,{PositionConflict:()=>r});var n=o(327813);class r{constructor(){this.blocks=[],this.addConflictBlock=e=>{this.blocks.push(e)},this.removeConflictBlockBySelector=e=>{this.blocks.filter((t=>t.blockSelector===e))},(0,n.makeAutoObservable)(this)}}},179739:(e,t,o)=>{o.d(t,{dataAttrKeyToDatasetKey:()=>n});const n=e=>e.slice(5).split("-").map(((e,t)=>0!==t?e.charAt(0).toUpperCase()+e.slice(1):e)).join("")},189294:(e,t,o)=>{o.d(t,{setRef:()=>n});const n=(e,t)=>{t&&("function"==typeof t?t(e):t.hasOwnProperty("current")&&(t.current=e))}},633211:(e,t,o)=>{o.d(t,{Cache:()=>i});var n,r,a=o(465284);!function(e){e.OBJECT="object",e.STRING="string",e.NUMBER="number",e.BOOLEAN="boolean",e.STRING_NUMBER="string_number"}(n||(n={})),function(e){e.HELP_HINTS="helpHints"}(r||(r={}));class i{getHelpHints(){return this.getItem(r.HELP_HINTS)}setHelpHints(e){return this.setItem(r.HELP_HINTS,e)}clear(){return(0,a.clear)(this.store)}async getItem(e){const t=this.buildItemKey(e),o=i.cache.get(t);return(0,a.get)(t,this.store).then((e=>e||o)).catch((()=>o))}async setItem(e,t){const o=this.buildItemKey(e);i.cache.set(o,t),await(0,a.set)(o,t,this.store).catch((()=>{}))}deleteItem(e){const t=this.buildItemKey(e);return(0,a.del)(t,this.store)}buildItemKey(e){return`${e}-${i.VERSION}-${this.userId}`}getItemSync(e,t){const o=this.buildSyncItemKey(e);try{let e=localStorage.getItem(o);if(!e)return;switch(t){case n.OBJECT:try{e=JSON.parse(e)}catch{return}break;case n.NUMBER:e=Number(e)||0;break;case n.STRING_NUMBER:e=Number(e)||e;break;case n.BOOLEAN:e=Boolean(Number(e))}return e}catch{return i.cache.get(o)}}setItemSync(e,t,o){const r=this.buildSyncItemKey(e);switch(o){case n.OBJECT:t=JSON.stringify(t);break;case n.BOOLEAN:t=String(Number(t))}try{localStorage.setItem(r,t)}catch{i.cache.set(r,t)}}buildSyncItemKey(e){return`${i.DB_NAME}_${e}_${i.VERSION}_${this.userId}`}constructor({userId:e=window.vk?.id,categories:t}={}){this.userId=e||0;let o="cache";t?.length&&(o=`${o}-${t.join("-")}`),this.store=(0,a.createStore)(i.DB_NAME,o)}}i.DB_NAME="help-hints",i.VERSION=1,i.CACHE_UPDATE_EVENT_NAME=`${i.DB_NAME}_cache_update`,i.cache=new Map},314693:(e,t,o)=>{o.d(t,{HelpHintsProvider:()=>s});var n=o(474848),r=o(296540),a=o(407117),i=o(452769);function s({api:e,noToken:t,...o}){const[s,c]=(0,r.useState)(!0);return(0,r.useEffect)((()=>{e&&(a.HelpHints.setAPI(e),t&&!e.options.token&&"function"!=typeof e.options.requestMethod)||(async()=>{c(!0),await a.HelpHints.reload(),c(!1)})()}),[e,t]),(0,n.jsx)(i.HelpHintsContext.Provider,{value:{isHelpHintsReloading:s},...o})}},57080:(e,t,o)=>{o.d(t,{HelpHint:()=>n});class n{get id(){return this.hint.id}get title(){return this.hint.title}get description(){return this.hint.description}getResource(e){return this.hint.resources?.find((({key:t})=>t===e))?.value}constructor(e){this.hint=e}}},796789:(e,t,o)=>{o.d(t,{useHelpHint:()=>i});var n=o(296540),r=o(407117),a=o(452769);function i(e){const{isHelpHintsReloading:t}=(0,a.useHelpHints)();return(0,n.useMemo)((()=>{if(e)return r.HelpHints.getSync(e)}),[t])}},726706:(e,t,o)=>{o.d(t,{useHelpHintResource:()=>i});var n=o(296540),r=o(407117),a=o(452769);function i(e,t){const{isHelpHintsReloading:o}=(0,a.useHelpHints)();return(0,n.useMemo)((()=>{if(e&&t)return r.HelpHints.getSync(e)?.getResource(t)}),[e,t,o])}},452769:(e,t,o)=>{o.d(t,{HelpHintsContext:()=>r,useHelpHints:()=>a});var n=o(296540);const r=(0,n.createContext)({});function a(){return(0,n.useContext)(r)}},407117:(e,t,o)=>{o.d(t,{HelpHints:()=>c});var n=o(116375),r=o(933052),a=o(57080),i=o(633211),s=o(900690);class c{static setAPI(e){this.api=e}static setUserId(e){this.cacheOptions.userId=e,this.cache=void 0}static setCategories(e){Array.isArray(e)||(e=[e]),this.cacheOptions.categories=e,this.cache=void 0}static async get(e){return await this.reload(),this.getSync(e)}static getSync(e){const t=this.helpHints?.items.find((({id:t})=>t===e));if(t)return new a.HelpHint(t)}static show(e){return e instanceof a.HelpHint&&(e=e.id),this.api.account.showHelpHint({hint_id:e})}static async hide(e){e instanceof a.HelpHint&&(e=e.id);let t=!1;return await this.reloading,this.helpHints&&(this.helpHints.items=this.helpHints.items.filter((({id:o})=>(o===e&&(t=!0),o!==e))),this.cache?.setHelpHints(this.helpHints)),t?this.api.account.hideHelpHint({hint_id:e}):Promise.resolve()}static async getResource(e,t){const o=await this.get(e);if(o)return o.getResource(t)}static async reload(){return await this.reloading,this.cache||(this.cache=new i.Cache(this.cacheOptions)),this.reloading=new Promise((async e=>{if(!this.api.options.token&&"function"!=typeof this.api.options.requestMethod){const t=await this.getAccessToken();if(!t)return e();this.api=new n.API({token:t}),this.api.onTokenRegenerate((async t=>{const o=await this.getAccessToken();if(!o)return e();t(o)}))}if(this.helpHints=await(this.cache?.getHelpHints()),this.helpHints&&Date.now()-this.helpHints.date<s.TEN_MINUTES&&!this.isDevMode())return e();const{categories:t}=this.cacheOptions;this.helpHints=await this.api.account.getHelpHints({categories:t?String(t):void 0}).then((e=>({...e,date:Date.now()}))).catch((()=>{})),await(this.cache?.setHelpHints(this.helpHints)),this.refresh(),e()})),this.reloading}static refresh(){try{localStorage.setItem(i.Cache.CACHE_UPDATE_EVENT_NAME,""),localStorage.removeItem(i.Cache.CACHE_UPDATE_EVENT_NAME)}catch{}}static async getAccessToken(){const e=await(0,r.login)("web_token").catch((()=>{}));if(!e)return;const{access_token:t}=e;return t}}c.api=new n.API({token:""}),c.cacheOptions={},c.reloading=Promise.resolve(),c.isDevMode=()=>localStorage.getItem("help-hints-dev"),window.addEventListener("storage",(({key:e,newValue:t})=>{e===i.Cache.CACHE_UPDATE_EVENT_NAME&&null!==t&&c.reload()}))},503723:(e,t,o)=>{var n,r;o.d(t,{HelpHintId:()=>r}),function(e){e.DEFAULT="default",e.STICKERS_UGC="stickers_ugc"}(n||(n={})),function(e){e.KEYBOARD_STICKERS_VMOJI="keyboard:stickers_vmoji",e.POSTING_POST_FEED_BADGES="posting:post_feed_badges",e.POSTING_POST_BADGES_ONBOARDING="posting:post_badges_onboarding",e.POSTING_POST_FEED_BADGES_UNSEEN="posting:post_feed_badges_unseen",e.POSTING_POST_BADGES_PAGE_UNSEEN="posting:post_badges_page_unseen",e.POSTING_POST_BADGES_CATALOG_USER="posting:post_badges_catalog_user",e.POSTING_POST_BADGES_FEEDBACK_USER="posting:post_badges_feedback_user",e.POSTING_POST_BADGES_FEEDBACK_USER_UNSEEN="posting:post_badges_feedback_user_unseen",e.STICKERS_UGC_SETTINGS_UNSEEN="stickers:ugc_settings_unseen",e.STICKERS_UGC_KEYBOARD_ONBOARDING="stickers:ugc_keyboard_onboarding",e.STICKERS_UGC_APP_ONBOARDING_MODAL="stickers:ugc_app_onboarding_modal",e.STICKERS_UGC_KEYBOARD_ONBOARDING_TOOLTIP="stickers:ugc_keyboard_onboarding_tooltip"}(r||(r={}))},404014:(e,t,o)=>{var n;o.d(t,{KeyboardStickersVmojiResourceKey:()=>n}),function(e){e.VMOJI_ON_BOARDING_DARK="vmoji_kb_onboarding_dark",e.VMOJI_ON_BOARDING_LIGHT="vmoji_kb_onboarding_light"}(n||(n={}))},614267:(e,t,o)=>{var n,r;o.d(t,{StickersUGCKeyboardOnboardingResourceKey:()=>r}),function(e){e.CLOSE="close",e.IMAGE="image"}(n||(n={})),function(e){e.IMAGE="image"}(r||(r={}))},900690:(e,t,o)=>{o.d(t,{TEN_MINUTES:()=>n});const n=6e5},504274:(e,t,o)=>{o.d(t,{Content:()=>a});var n=o(474848),r=o(296540);const a=(0,r.memo)((0,r.forwardRef)((({children:e,...t},o)=>(0,n.jsx)("div",{ref:o,...t,children:e}))));a.displayName="Content"},621852:(e,t,o)=>{o.d(t,{Cropped:()=>a});var n=o(474848),r=o(296540);const a=(0,r.memo)((0,r.forwardRef)((({children:e,style:t={},...o},r)=>(0,n.jsx)("div",{ref:r,style:{...i,...t},...o,"data-scrollbar":"cropped",children:e}))));a.displayName="Cropped";const i={position:"relative",width:"100%",height:"100%",overflow:"hidden"}},472694:(e,t,o)=>{o.d(t,{Scrollable:()=>a});var n=o(474848),r=o(296540);const a=(0,r.memo)((0,r.forwardRef)((({children:e,...t},o)=>(0,n.jsx)("div",{ref:o,...t,children:e}))));a.displayName="Scrollable"},97308:(e,t,o)=>{o.d(t,{ScrollbarProvider:()=>f});var n=o(474848),r=o(296540),a=o(504274),i=o(621852),s=o(472694),c=o(892803),l=o(573744),d=o(353793),u=o(688120),m=o(585863),p=o(181348),h=o(922137);const f=(0,r.memo)((0,r.forwardRef)((({children:e,scrollableProps:t,contentProps:o,overflowX:f,overflowY:v,forceVisible:g,minBarSize:_=25,maxBarSize:E=0,clickOnTrack:b=!0,...y},k)=>{const w=(0,r.useRef)({overflowX:f,overflowY:v,forceVisible:g,minBarSize:_,maxBarSize:E,clickOnTrack:b});w.current={overflowX:f,overflowY:v,forceVisible:g,minBarSize:_,maxBarSize:E,clickOnTrack:b};const C=(0,r.useRef)(null),[A,S]=(0,r.useState)(0),[I,P]=(0,r.useState)(!0),[x,N]=(0,r.useState)(!0),R=(0,r.useRef)(null),T=(0,r.useRef)({content:{width:0,height:0,scrollWidth:0,scrollHeight:0},cropped:{width:0,height:0,offsetWidth:0,offsetHeight:0},scrollable:{scrollLeft:0,scrollTop:0}}),M=(0,r.useRef)((()=>{const{content:e,cropped:t,scrollable:o}=T.current,{minBarSize:n,maxBarSize:r,overflowX:a,overflowY:i}=w.current,s={min:n,max:r};if("hidden"!==a){const{size:n,position:r}=(0,p.calculateThumbStyles)(o.scrollLeft,t.width,e.width,s);P(e.scrollWidth>t.offsetWidth&&n<t.offsetWidth),R.current?.x?.thumb?.setWidth?.(n),R.current?.x?.thumb?.setX?.(r)}if("hidden"!==i){const{size:n,position:r}=(0,p.calculateThumbStyles)(o.scrollTop,t.height,e.height,s);N(e.scrollHeight>t.offsetHeight&&n<t.offsetHeight),R.current?.y?.thumb?.setHeight?.(n),R.current?.y?.thumb?.setY?.(r)}})),O=(0,r.useCallback)((e=>{if(e.target instanceof HTMLDivElement){const{scrollTop:t,scrollLeft:o}=e.target;Object.assign(T.current.scrollable,{scrollLeft:o,scrollTop:t}),M.current()}}),[]),L=(0,r.useCallback)(((e,t)=>{const{track:o,thumb:n}=R.current?.[e]||{};t.target instanceof Node&&D.current?.contains(t.target)&&o?.isHoveredOver?.(t.clientX,t.clientY)&&(t.preventDefault(),n?.isHoveredOver?.(t.clientX,t.clientY)?n?.onDragStart?.(t.clientX,t.clientY):o?.onTrackClick(t.clientX,t.clientY))}),[]),D=(0,r.useRef)(null),j=(0,r.useMemo)((()=>({...t,onMouseDown:e=>{t?.onMouseDown?.(e),L("x",e),L("y",e)},style:{...(0,m.applyScrollableStyles)(A,{overflowY:v,overflowX:f}),...t?.style},ref:e=>{D.current=e,(0,u.applyRefValueMutation)(t?.ref,e),S((0,h.getNativeScrollbarWidth)(e))}})),[A,L,f,v,t]),F=(0,r.useRef)(null),U=(0,r.useMemo)((()=>({...o,style:{...(0,d.applyContentStyles)({overflowX:f,overflowY:v}),...o?.style},ref:e=>{F.current=e,(0,u.applyRefValueMutation)(o?.ref,e)}})),[o,f,v]),{observe:B}=(0,l.useResizeObserver)(),V=(0,r.useCallback)((e=>t=>{if(!t)return;const{height:o,width:n}=t.contentRect;if("cropped"===e&&(Object.assign(T.current.cropped,{width:n,height:o}),t.target instanceof HTMLElement)){const{offsetHeight:e,offsetWidth:o}=t.target;Object.assign(T.current.cropped,{offsetWidth:o,offsetHeight:e})}if("content"===e&&(Object.assign(T.current.content,{width:n,height:o}),t.target instanceof HTMLElement)){const{scrollWidth:e,scrollHeight:o}=t.target;Object.assign(T.current.content,{scrollWidth:e,scrollHeight:o})}M.current()}),[]);(0,r.useEffect)((()=>{const e=C.current;if(e)return B(e,V("cropped"))}),[V,B]),(0,r.useEffect)((()=>{const e=F.current;if(e)return B(e,V("content"))}),[V,B]);const K=(0,r.useRef)(null),H=(0,r.useCallback)((e=>{K.current||(K.current=window.requestAnimationFrame((()=>{D.current&&e(D.current),K.current=null})))}),[D]);return(0,r.useEffect)((()=>()=>{K.current&&window.cancelAnimationFrame(K.current)}),[]),(0,r.useEffect)((()=>{const e=D.current;if(!e)return;e.setAttribute("data-scrollbar","scrollable"),e.addEventListener("scroll",O,{passive:!0});const{scrollTop:t,scrollLeft:o}=e;return Object.assign(T.current.scrollable,{scrollLeft:o,scrollTop:t}),()=>{e.removeEventListener("scroll",O)}}),[O]),(0,r.useEffect)((()=>{const e=F.current;e&&e.setAttribute("data-scrollbar","content")}),[]),(0,n.jsxs)(i.Cropped,{...y,ref:e=>{C.current=e,(0,u.applyRefValueMutation)(k,e)},children:["function"==typeof e?e({contentRef:F,contentProps:U,scrollableRef:D,scrollableProps:j}):(0,n.jsx)(s.Scrollable,{...j,children:(0,n.jsx)(a.Content,{...U,children:e})}),(0,n.jsx)(c.TracksAndThumbs,{ref:R,overflowX:f,overflowY:v,forceVisible:g,xTrackNeeded:I,yTrackNeeded:x,clickOnTrack:b,dispatchScrollAction:H})]})})));f.displayName="ScrollbarProvider"},39947:(e,t,o)=>{o.d(t,{Thumb:()=>s});var n=o(474848),r=o(296540),a=o(117001),i=o(824569);const s=(0,r.forwardRef)((({axis:e,dispatchScrollAction:t},o)=>{const[s,c]=(0,r.useState)(0),[l,d]=(0,r.useState)(0),[u,m]=(0,r.useState)(0),[p,h]=(0,r.useState)(0),[f,v]=(0,r.useState)(!1),[g,_]=(0,r.useState)(!1),E=(0,r.useRef)({width:u,height:s});E.current={width:u,height:s};const b=(0,r.useRef)(null),y=(0,r.useRef)({x:0,y:0}),k=(0,r.useCallback)((o=>{o.preventDefault(),o.stopPropagation();const{clientX:n,clientY:r}=o;t((t=>{const{width:o,height:a,left:i,top:s}=t.getBoundingClientRect(),c="x"===e?o:a,l="x"===e?i:s,d=t["x"===e?"scrollWidth":"scrollHeight"],u=E.current["x"===e?"width":"height"];let m=("x"===e?n:r)-l-y.current[e];m=m/(c-u)*(d-c),t["x"===e?"scrollLeft":"scrollTop"]=m}))}),[e,t]),w=(0,r.useCallback)((()=>{document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",w),v(!1)}),[k]),C=(0,r.useCallback)(((t,o)=>{const n=b.current;if(!n)return;const{left:r,top:a}=n.getBoundingClientRect();y.current[e]="x"===e?t-r:o-a,document.addEventListener("mousemove",k),document.addEventListener("mouseup",w),v(!0)}),[e,k,w]);return(0,r.useEffect)((()=>w),[w]),(0,r.useEffect)((()=>{const e=window.setTimeout((()=>{_(!1)}),1e3);return _(!0),()=>{window.clearTimeout(e)}}),[p,l]),(0,r.useImperativeHandle)(o,(()=>({setX:h,setWidth:m,setHeight:c,setY:d,onDragStart:C,isHoveredOver:(0,i.isHoveredOver)(b),ref:b})),[C]),(0,n.jsx)("div",{ref:b,"data-scrollbar":`thumb thumb${e.toUpperCase()}`,style:{position:"absolute",..."x"===e?{width:u,left:0,bottom:0,transform:`translate3d(${p}px, 0px, 0)`}:{height:s,top:0,right:0,transform:`translate3d(0, ${l}px, 0)`}},className:(0,a.cx)(`sbarThumb sbarThumb${e.toUpperCase()}`,f&&"sbarThumb--dragging",g&&"sbarThumb--scrolling")})}));s.displayName="Thumb"},442850:(e,t,o)=>{o.d(t,{TrackWithThumb:()=>c});var n=o(474848),r=o(296540),a=o(39947),i=o(117001),s=o(824569);const c=(0,r.forwardRef)((({axis:e,dispatchScrollAction:t,clickOnTrack:o,forceVisible:c},d)=>{const u=(0,r.useRef)(null),m=(0,r.useRef)(null),p=(0,r.useCallback)(((n,r)=>{if(!o||"string"==typeof o&&o!==e)return;const a=m.current?.ref.current;a&&t((t=>{const{scrollLeft:o,scrollTop:i}=t,{width:s,height:c}=t.getBoundingClientRect(),{left:l,top:d}=a.getBoundingClientRect(),u="x"===e?l:d,m="x"===e?n:r,p=("x"===e?o:i)+("x"===e?s:c)*Math.sign(m-u),h="x"===e?{left:p}:{top:p};t.scrollTo({...h,behavior:"auto"})}))}),[e,o,t]);return(0,r.useImperativeHandle)(d,(()=>({thumb:m.current,track:{ref:u,onTrackClick:p,isHoveredOver:(0,s.isHoveredOver)(u)}})),[p]),(0,n.jsx)("div",{ref:u,"data-scrollbar":`track track${e.toUpperCase()}`,className:(0,i.cx)(`sbarTrack sbarTrack${e.toUpperCase()}`,l(e,c)),children:(0,n.jsx)(a.Thumb,{ref:m,axis:e,dispatchScrollAction:t})})}));function l(e,t){return t&&("boolean"==typeof t||t===e)?`sbarTrack${e.toUpperCase()}--visible`:""}c.displayName="TrackWithThumb"},892803:(e,t,o)=>{o.d(t,{TracksAndThumbs:()=>i});var n=o(474848),r=o(296540),a=o(442850);const i=(0,r.memo)((0,r.forwardRef)((({overflowY:e,overflowX:t,forceVisible:o,xTrackNeeded:i,yTrackNeeded:s,clickOnTrack:c,dispatchScrollAction:l},d)=>{const u=(0,r.useRef)(null),m=(0,r.useRef)(null);return(0,r.useImperativeHandle)(d,(()=>({x:u.current,y:m.current})),[i,s,t,e]),(0,n.jsxs)(n.Fragment,{children:["hidden"!==t&&i&&(0,n.jsx)(a.TrackWithThumb,{ref:u,axis:"x",dispatchScrollAction:l,clickOnTrack:c,forceVisible:o}),"hidden"!==e&&s&&(0,n.jsx)(a.TrackWithThumb,{ref:m,axis:"y",dispatchScrollAction:l,clickOnTrack:c,forceVisible:o})]})})));i.displayName="TracksAndThumbs"},573744:(e,t,o)=>{o.d(t,{useResizeObserver:()=>r});var n=o(296540);function r(e){const t=(0,n.useRef)(),o=(0,n.useRef)(new Map),r=(0,n.useRef)();r.current=e;const a=(0,n.useCallback)((()=>{const e=new Map;t.current=new ResizeObserver((t=>{t.forEach((t=>{e.set(t.target,t)})),(()=>{const t=Array.from(e.values());t.forEach((e=>{const t=o.current.get(e.target);t&&t(e)})),r.current&&r.current(t),e.clear()})()}))}),[]);(0,n.useEffect)((()=>(a(),()=>{t.current&&(t.current.disconnect(),t.current=void 0),o.current.clear()})),[a]);return{observe:(0,n.useCallback)(((e,n)=>{t.current||a();const r=t.current,i=o.current;return r.observe(e),n&&i.set(e,n),()=>{n&&i.delete(e),r.unobserve(e)}}),[t,a])}}},596934:(e,t,o)=>{o.d(t,{ScrollbarProvider:()=>n.ScrollbarProvider});var n=o(97308)},353793:(e,t,o)=>{function n(e){return{width:"hidden"===e.overflowX?"100%":"min-content",height:"hidden"===e.overflowY?"100%":"min-content"}}o.d(t,{applyContentStyles:()=>n})},688120:(e,t,o)=>{function n(e,t){e&&("function"==typeof e?e(t):e.current=t)}o.d(t,{applyRefValueMutation:()=>n})},585863:(e,t,o)=>{function n(e,{overflowX:t,overflowY:o}){return{WebkitOverflowScrolling:"touch",msOverflowStyle:"-ms-autohiding-scrollbar",width:"hidden"!==o&&e>0?`calc(100% + ${e}px)`:"100%",height:"hidden"!==t&&e>0?`calc(100% + ${e}px)`:"100%",maxWidth:"inherit",maxHeight:"inherit",overflowX:t||"auto",overflowY:o||"auto"}}o.d(t,{applyScrollableStyles:()=>n})},181348:(e,t,o)=>{function n(e,t,o,n){const r=e/(o-t),a=t/o;let i=Math.max(~~(a*t),n.min);n.max&&(i=Math.min(i,n.max));return{size:i,position:~~((t-i)*r)}}o.d(t,{calculateThumbStyles:()=>n})},117001:(e,t,o)=>{o.d(t,{cx:()=>n});const n=(...e)=>e.filter(Boolean).join(" ")},922137:(e,t,o)=>{function n(e){if(void 0!==window.sbarNativeScrollbarWidth)return window.sbarNativeScrollbarWidth;try{if("getComputedStyle"in window&&"none"===window.getComputedStyle(e,"::-webkit-scrollbar").display||"scrollbarWidth"in document.documentElement.style||"-ms-overflow-style"in document.documentElement.style)return window.sbarNativeScrollbarWidth=0,window.sbarNativeScrollbarWidth}catch{}const t=document.body,o=document.createElement("div");o.style.position="fixed",o.style.left="0",o.style.visibility="hidden",o.style.overflowY="scroll",t.appendChild(o);const n=o.getBoundingClientRect().right;return t.removeChild(o),window.sbarNativeScrollbarWidth=n,window.sbarNativeScrollbarWidth}o.d(t,{getNativeScrollbarWidth:()=>n})},824569:(e,t,o)=>{o.d(t,{isHoveredOver:()=>n});const n=e=>(t,o)=>{const n=e.current;if(!n)return;const r=n.getBoundingClientRect();return t>=r.left&&t<=r.left+r.width&&o>=r.top&&o<=r.top+r.height}},37942:(e,t,o)=>{o.d(t,{ConvoAudiosPlaylist:()=>l,audioTrackSourceFromMessage:()=>u,getAudioThumb:()=>w,isConvoAudioTrack:()=>y,isRestoredConvoAudiosPlaylist:()=>k,mapAudioTrackSourceToPlaylistMetaSource:()=>b,mapChannelToConvoAudioTrackList:()=>g,mapConvoToConvoAudioTrackList:()=>v,mapConvoToConvoVoiceTrackList:()=>E,mapPostCommentsToConvoAudioTrackList:()=>_,toConvoAudioTrack:()=>d});var n=o(856562),r=o(103026),a=o(302551),i=o(767441),s=o(401193),c=o(27702);class l{getNext(e,t,o){const n=t?this.shuffledList:this.list;return(0,i.getNextTrackFromPlaylist)(e,n,o)}getPrev(e,t,o){const n=t?this.shuffledList:this.list;return(0,i.getPrevTrackFromPlaylist)(e,n,o)}getConvoAudiosList(){return this.list}getConvoAudiosShuffledList(){return this.shuffledList}getPlaylistMeta(){return this.meta}shuffle(){this.shuffledList=(0,s.shuffleArray)(this.list)}constructor(e){this.list=e.list,this.shuffledList=(0,s.shuffleArray)(this.list),this.meta=e.meta}}function d(e,t,o,n){const r=w(t.thumb,n?270:135);return{title:t.title,artist:t.artist,trackCode:t.trackCode,source:o,thumb:r,audioTrack:{id:`${t.ownerId}_${t.id}`,url:t.url,progress:e,duration:t.duration}}}function u(e){return"Foreign"===e.kind&&"rootCmid"in e&&e.rootCmid?{kind:"message",cmid:e.rootCmid,peerId:e.rootPeerId}:e.peerId?{kind:"message",peerId:e.peerId,cmid:e.cmid}:void 0}function m(e){if("Normal"!==e.kind&&"Queued"!==e.kind&&"Foreign"!==e.kind)return[];const t=f(e.attaches),o=e.forwardedMessages;Array.isArray(o)&&o.reduce(((e,t)=>(e.push(...m(t)),e)),t);const n="ForeignExpired"===e.replyMessage?.kind?void 0:e.replyMessage;return n&&t.push(...m(n)),t}function p(e){return f(e.attaches)}function h(e){return f(e.attaches)}function f(e){const t=[];Array.isArray(e.audios)&&t.push(...e.audios);const o=e.wall?.attaches.audios;return Array.isArray(o)&&t.push(...o),t}function v(e,t){const o=[],r=n.allHistoryNodes(e).map((e=>({message:e.item})));for(const{message:e}of r){const n="Normal"===e.kind,r="Queued"===e.kind;if(n||r){m(e).filter((e=>!!e.url)).forEach((n=>{o.push(d(0,n,"Normal"===e.kind?u(e):void 0,t))}))}}return(0,i.excludeTracksDoubling)(o)}function g(e,t){const o=[],n=r.allHistoryNodes(e).map((e=>e.item));for(const e of n){p(e).filter((e=>!!e.url)).forEach((n=>{o.push(d(0,n,"Normal"===e.kind?{kind:"post",cmid:e.cmid,channelId:e.channelId}:void 0,t))}))}return(0,i.excludeTracksDoubling)(o)}function _(e,t){const o=[],n=a.allNormalSpreadedComments(e);for(const e of n){h(e).filter((e=>!!e.url)).forEach((n=>{o.push(d(0,n,"Normal"===e.kind?{kind:"comment",postCmid:e.postCmid,channelId:e.channelId,commentCmid:e.cmid}:void 0,t))}))}return(0,i.excludeTracksDoubling)(o)}function E(e){return n.allHistoryNodes(e).reduce(((e,{item:t})=>{if("Normal"!==t.kind&&"Queued"!==t.kind||!t.attaches?.voice)e.push(void 0);else{const o="Normal"===t.kind?t:void 0,n=t.sentAt,r=t.authorId;e.push((0,c.toMessagedConvoVoiceTrackFromMessage)(0,t.attaches.voice,n,r,o))}return e}),[])}function b(e){switch(e.kind){case"message":return{kind:"message",peerId:e.peerId};case"post":case"comment":return{kind:"channel",channelId:e.channelId};default:(0,s.exhaustivenessCheck)(e)}}function y(e){if(!e||"object"!=typeof e)return!1;const{title:t,artist:o,audioTrack:n,trackCode:r,source:a,thumb:i}=e;if("string"!=typeof t||"string"!=typeof o||!n||"object"!=typeof n||"string"!=typeof r||!a||"object"!=typeof a||"string"!=typeof i)return!1;const{url:s,id:c,duration:l,progress:d}=n;if("string"!=typeof s||"string"!=typeof c||"number"!=typeof l||"number"!=typeof d)return!1;switch(a.kind){case"message":if("number"!=typeof a.cmid||"number"!=typeof a.peerId)return!1;break;case"post":if("number"!=typeof a.cmid||"number"!=typeof a.channelId)return!1;break;case"comment":if("number"!=typeof a.postCmid||"number"!=typeof a.channelId||"number"!=typeof a.commentCmid)return!1;break;default:}return!0}function k(e){if(e&&"object"==typeof e){const{meta:t,list:o}=e;let n=!1,r=!1;if(t&&"object"==typeof t){const{source:e,type:o}=t,r="temp"===o;if(e&&"object"==typeof e)switch(e.kind){case"message":n="number"==typeof e.peerId&&r;break;case"channel":n="number"==typeof e.channelId&&r;break;default:}}return o&&Array.isArray(o)&&o.length&&(r=!!o.filter((e=>y(e))).length),n&&r}return!1}function w(e,t){const o=t&&e?.[`photo_${t}`];return o||(e?.photo_34||e?.photo_68||e?.photo_135||e?.photo_270||e?.photo_300||e?.photo_600||e?.photo_1200)}},27702:(e,t,o)=>{o.d(t,{ConvoVoicesPlaylist:()=>r,toMessagedConvoVoiceTrackFromMessage:()=>a,toRecordedConvoVoiceTrack:()=>i});var n=o(767441);class r{getNext(e){return(0,n.getNextTrackFromPlaylist)(e,this.list)}getPrev(e){return(0,n.getPrevTrackFromPlaylist)(e,this.list)}getPlaylistMeta(){return{type:"voices",source:this.source}}constructor(e,t,o){this.source=o;const n=[];let r;for(let t=0;t<e.length;t++){const o=e[t];o?(Array.isArray(r)||(r=[]),r.push(o)):Array.isArray(r)&&(n.push(r),r=void 0),t===e.length-1&&Array.isArray(r)&&n.push(r)}this.list=n.find((e=>e.find((e=>e.audioTrack.id===t.audioTrack.id))))||[]}}function a(e,t,o,n,r){const a=s()?t.linkOgg:t.linkMp3,i=t.linkOgg;let c;return"Foreign"===r?.kind&&"rootCmid"in r&&r.rootCmid?c={cmid:r.rootCmid,peerId:r.rootPeerId}:r&&r.cmid&&r.peerId&&(c={cmid:r.cmid,peerId:r.peerId}),{kind:"MessagedConvoVoiceTrack",sentAt:o,authorId:n,source:c&&{kind:"message",...c},urlOgg:i,audioTrack:{duration:t.duration,progress:e,url:a,id:`${t.ownerId}_${t.id}`}}}function i(e,t,o){const n=s()?t.linkOgg:t.linkMp3;return{kind:"RecordedConvoVoiceTrack",authorId:o,audioTrack:{duration:t.duration,progress:e,url:n,id:`${t.ownerId}_${t.id}`}}}function s(){return!!document.createElement("audio").canPlayType('audio/ogg;codecs="opus"')}},767441:(e,t,o)=>{function n(e,t,o){const n=t.findIndex((t=>t.audioTrack.id===e.audioTrack.id)),r=n>=0?t[n+1]:void 0;if(r)return{...r,audioTrack:{...r.audioTrack,progress:0}};if(!r&&"all"===o){const e=t[0];return e?{...e,audioTrack:{...e.audioTrack,progress:0}}:void 0}}function r(e,t,o){const n=t.findIndex((t=>t.audioTrack.id===e.audioTrack.id)),r=t[n-1];if(r)return{...r,audioTrack:{...r.audioTrack,progress:0}};if(!r&&"all"===o){const e=t[t.length-1];return e?{...e,audioTrack:{...e.audioTrack,progress:0}}:void 0}}function a(e){const t=new Set;return e.filter((e=>!t.has(e.audioTrack.id)&&(t.add(e.audioTrack.id),!0)))}o.d(t,{excludeTracksDoubling:()=>a,getNextTrackFromPlaylist:()=>n,getPrevTrackFromPlaylist:()=>r})},82839:(e,t,o)=>{o.d(t,{ChannelComposerDraftsProvider:()=>m,CommentsComposerDraftsProvider:()=>f,ComposerDraftsProvider:()=>l,useChannelComposerDraft:()=>d,useCommentsComposerDraft:()=>p,useComposerDraft:()=>s});var n=o(296540),r=o(19068),a=o(818005),i=o(884618);function s(e){const t=(0,n.useContext)(c);if(!t)throw new Error("ComposerDraftsProvider не добавлен в дерево Реакта!");const o=t[e],a=(0,n.useMemo)((()=>r.empty()),[]);return o?o[o.length-1]??a:a}const c=n.createContext({}),l=c.Provider;function d(e){const t=(0,n.useContext)(u);if(!t)throw new Error("ChannelComposerDraftsProvider не добавлен в дерево Реакта!");const o=(0,n.useMemo)((()=>a.empty()),[]);return t[e]||o}const u=n.createContext({}),m=u.Provider;function p(e,t){const o=(0,n.useContext)(h);if(!o)throw new Error("CommentsComposerDraft не добавлен в дерево Реакта!");const r=(0,n.useMemo)((()=>i.empty()),[]);return o[`${e}-${t}`]||r}const h=n.createContext({}),f=h.Provider},340832:(e,t,o)=>{o.d(t,{useConvoAttaches:()=>d,useConvoAttachesGetMissedPeers:()=>p});var n=o(175953),r=o(70915),a=o(872060),i=o(296540),s=o(401193),c=o(777211);const l=30;function d(e){const[t,o]=(0,i.useState)(null),n=(0,r.useInsertIntoCache)(),{api:s}=(0,r.useBrowserEnv)(),d=(0,r.useOwner)();(0,i.useLayoutEffect)((()=>()=>{o(null)}),[e]);const p=(0,i.useCallback)((async r=>{const i=t||{};if(i[r]?.isLoading||i[r]?.isAllLoaded)return;m(i,!0,r),o({...i});const p=await async function(e,t,o,n,r,i){try{const s=await e.fetch("messages.getHistoryAttachments",{peer_id:t,media_type:u(n),count:l,start_from:i,extended:1,group_id:(0,c.getOwnerGroupId)(o)},{retries:5});if(!s.items||0===s.items.length)return{[n]:{items:[],isAllLoaded:!0,cursorNextLoad:null}};r({profiles:s.profiles,groups:s.groups,contacts:s.contacts});const d=(0,a.fromApiConvoAttach)(s.items)[n]||[];return{[n]:{items:d,isAllLoaded:!s.next_from,cursorNextLoad:s.next_from}}}catch(e){return{}}}(s,e,d.id,r,n,i[r]?.cursorNextLoad||void 0);!function(e,t){t.audios&&(e.audios={items:(e.audios?.items||[]).concat(t.audios.items),cursorNextLoad:t.audios.cursorNextLoad||null,isAllLoaded:t.audios.isAllLoaded});t.docs&&(e.docs={items:(e.docs?.items||[]).concat(t.docs.items),cursorNextLoad:t.docs.cursorNextLoad||null,isAllLoaded:t.docs.isAllLoaded});t.links&&(e.links={items:(e.links?.items||[]).concat(t.links.items),cursorNextLoad:t.links.cursorNextLoad||null,isAllLoaded:t.links.isAllLoaded});t.photos&&(e.photos={items:(e.photos?.items||[]).concat(t.photos.items),cursorNextLoad:t.photos.cursorNextLoad||null,isAllLoaded:t.photos.isAllLoaded});t.videos&&(e.videos={items:(e.videos?.items||[]).concat(t.videos.items),cursorNextLoad:t.videos.cursorNextLoad||null,isAllLoaded:t.videos.isAllLoaded});t.miniAppWidgets&&(e.miniAppWidgets={items:(e.miniAppWidgets?.items||[]).concat(t.miniAppWidgets.items),cursorNextLoad:t.miniAppWidgets.cursorNextLoad||null,isAllLoaded:t.miniAppWidgets.isAllLoaded})}(i,p),m(i,!1,r),o({...i})}),[s,t,d.id,e,n]);return{attaches:t,getNextPage:p}}const u=e=>({audios:"audio",videos:"video",docs:"doc",links:"share",photos:"photo",miniAppWidgets:"app_action_mini_apps"}[e]);function m(e,t,o){e[o]||function(e,t){switch(t){case"audios":case"videos":case"docs":case"links":case"photos":case"miniAppWidgets":e[t]={items:[],cursorNextLoad:null,isAllLoaded:!1};break;default:(0,s.exhaustivenessCheck)(t)}}(e,o);const n=e[o];n&&(n.isLoading=t)}function p(e){const t=(0,r.useInsertIntoCache)(),{api:o}=(0,r.useBrowserEnv)(),a=e.filter((e=>n.isUserPeerId(e))).join(","),s=e.filter((e=>n.isGroupPeerId(e))).map((e=>n.toRealId(e))).join(",");return{fetchProfilesAndGroups:(0,i.useCallback)((async()=>{if(0===a.length&&0===s.length)return;const[e,n]=await o.fetchMany([0!==a.length&&{method:"users.get",params:{user_ids:a,extended:1}},0!==s.length&&{method:"groups.getById",params:{group_ids:s,extended:1}}],{retries:3});t({profiles:e||[],groups:n?.groups||[]})}),[o,s,t,a])}}},587534:(e,t,o)=>{o.d(t,{useDeviceData:()=>r});var n=o(753457);function r(){return{isTouchOnly:!(0,n.useAdaptivityWithJSMediaQueries)().hasPointer}}},944294:(e,t,o)=>{o.d(t,{useFastActionsState:()=>r});var n=o(296540);const r=()=>{const[e,t]=(0,n.useState)(!1),[o,r]=(0,n.useState)(!1);return{isDropdownFastActionsOpened:e,isContextMenuFastActionsOpened:o,openDropdownFastActions:(0,n.useCallback)((()=>{r(!1),t(!0)}),[]),openContextMenuFastActions:(0,n.useCallback)((()=>{t(!1),r(!0)}),[]),closeDropdownFastActions:(0,n.useCallback)((()=>{t(!1)}),[]),closeContextMenuFastActions:(0,n.useCallback)((()=>{r(!1)}),[])}}},853406:(e,t,o)=>{o.d(t,{useFocusTrapKeyboardNavigation:()=>a});var n=o(377833),r=o(35815);function a(e){const t=(0,n.useFocusScope)();return(0,r.useKeyboardFocusNavigation)(t,e)}},433412:(e,t,o)=>{o.d(t,{useHover:()=>r});var n=o(296540);const r=()=>{const[e,t]=n.useState(!1),o=n.useCallback((()=>t(!0)),[]),r=n.useCallback((()=>t(!1)),[]),a=n.useRef();return[n.useCallback((e=>{a.current&&(a.current.removeEventListener("mouseenter",o),a.current.removeEventListener("mouseleave",r)),a.current=e,a.current&&(a.current.addEventListener("mouseenter",o),a.current.addEventListener("mouseleave",r))}),[o,r]),e]}},123693:(e,t,o)=>{o.d(t,{useInertAttr:()=>c});var n=o(296540),r=o(758241),a=o(401193);const i="data-vkme-inert",s=80;function c({debounceDuration:e=s,parentNode:t,markerName:o=i}={}){const c=(0,n.useRef)();return{apply:(0,n.useMemo)((()=>(0,a.debounce)(((...[e])=>{if(c.current)return;const n=e.reduce(((e,t)=>{if(!t)return e;if("current"in t){if(!t.current)return e;e.push(t.current)}else e.push(t);return e}),[]);c.current=(0,r.suppressOthers)(n,t,o)}),e,!1)),[e,o,t]),remove:(0,n.useMemo)((()=>(0,a.debounce)((()=>{c.current&&(c.current(),c.current=null)}),e,!1)),[e])}}},497076:(e,t,o)=>{o.d(t,{subscribeCharKeysHandler:()=>u,useGlobalKeyBoardHandlers:()=>d,useModuleKeyBoardHandlers:()=>l});var n=o(401193),r=o(296540),a=o(815046),i=o(522300),s=o(181735);const c=new class{activateModule(e){this.activeModules=[e,...this.activeModules.filter((t=>t!==e))]}constructor(){this.globalHandlers=new Map,this.moduleHandlers=new Map,this.activeModules=new Array,this.subscribeCharKeysHandler=e=>{const t=this.getCharKeyHandler(e);return document.addEventListener("keydown",t,!0),()=>document.removeEventListener("keydown",t,!0)},this.subscribeModuleKeyDown=(e,t,o)=>{if(n.isDev&&!["Dropdown"].includes(e)&&this.moduleHandlers.get(e))throw new Error(`Module ${e} is already subscribed. Unsubscribe it first`);return this.moduleHandlers.set(e,{handler:o,blockGlobalHandlers:t}),()=>{this.moduleHandlers.get(e)?.handler===o&&this.moduleHandlers.delete(e)}},this.subscribeGlobalKeyDown=(e,t)=>{const o=this.globalHandlers.has(e);if(n.isDev&&o)throw new Error(`Global keyCombo ${e} is already subscribed. Unsubscribe it first`);return this.globalHandlers.set(e,t),()=>{this.globalHandlers.delete(e)}},this.getModuleSubscription=()=>{for(const e of this.activeModules){const t=this.moduleHandlers.get(e);if(t)return t}},this.callGlobalSubscription=(e,t)=>{if(this.getModuleSubscription()?.blockGlobalHandlers)return;const o=this.globalHandlers.get(e);o&&(!1!==o.autoPreventDefault?(t(),o.handler()):o.handler(t))},this.globalKeyDownHandler=e=>{const t=(0,a.getGlobalKeyCombo)(e);if(t){const o=e.preventDefault.bind(e);this.callGlobalSubscription(t,o)}else;},this.getCharKeyHandler=e=>t=>{if(!(0,a.isCharKey)(t))return;if((0,i.isInputElementActive)())return;const o=(0,a.getKeyCombo)(t);"Space"===o?.code&&(0,i.isInteractiveElementActive)()||e(t)},this.moduleKeyDownHandler=e=>{this.canCallModuleSubscription()&&this.getModuleSubscription()?.handler(e)},this.canCallModuleSubscription=()=>{const e=document.activeElement;return null===e||e===document.body},document.addEventListener("keydown",this.globalKeyDownHandler,!0),document.addEventListener("keydown",this.moduleKeyDownHandler)}};function l({moduleName:e,blockGlobalHandlers:t=!1,handlerElement:o,handlerElementRef:a}){const i=(0,r.useCallback)((()=>o||a?.current),[o,a]);(0,r.useLayoutEffect)((()=>{const t=i();if(!t)return;t.dataset.reforgedKeyDownHandler="1";const o=()=>{c.activateModule(e)};return t.addEventListener("focusin",o,!0),()=>{t.removeEventListener("focusin",o,!0)}}),[i,e]);return{subscribeKeyDown:(0,r.useCallback)((o=>{const n=(0,s.onElementKeyDownFactory)(o);return c.subscribeModuleKeyDown(e,t,n)}),[e,t]),focusHandlerElement:(0,r.useCallback)((()=>{const t=i();if(t){if(n.isDev&&!t.getAttribute("tabindex"))throw new Error(`Не установлен tabindex для фокус-контейнера с классом ${t.className}.\n        Установите его значение, даже если оно есть по дефолту.`);t.contains(document.activeElement)||t.focus({preventScroll:!0})}else if(n.isDev)throw new Error(`Фокус-контейнер не определен в модуле ${e}.`)}),[i,e])}}const d=()=>({subscribeGlobalKeyDown:c.subscribeGlobalKeyDown}),u=c.subscribeCharKeysHandler},35815:(e,t,o)=>{o.d(t,{useKeyboardFocusNavigation:()=>s});var n=o(296540),r=o(401193),a=o(815046),i=o(181735);function s(e,{kind:t,factory:o,...r}={}){const s=(0,n.useMemo)((()=>{switch(t){case"list":return{prev:["ArrowUp"],next:["ArrowDown"]};case"menubar":return{prev:(e,t)=>e===(0,a.localizeNavigationKey)("ArrowLeft",t),next:(e,t)=>e===(0,a.localizeNavigationKey)("ArrowRight",t),first:["Home"],last:["End"]};default:return{prev:["ArrowUp","PageUp"],next:["ArrowDown","PageDown"],first:["Home"],last:["End"]}}}),[t]);return(0,n.useMemo)((()=>{const t=(o||c)(e,{...r,...s});return(0,i.onElementKeyDownFactory)(t)}),[e,s,r,o])}function c(e,{disabled:t,dir:o,prev:n,next:i,first:s,last:c,window:d=window,onTabKeyPressed:u,onNavigation:m,onFocusError:p=r.noop,...h}){let f;return(r,v)=>{if(!t&&r){switch(!0){case u&&("Tab"===r||r===`${a.Modifier.Shift}+Tab`):u(r,v,{control:e});break;case l(n,r,o):v.preventDefault(),e.focusPrev(h).catch(p);break;case l(i,r,o):v.preventDefault(),e.focusNext(h).catch(p);break;case s&&l(s,r,o):v.preventDefault(),e.focusFirst(h).catch(p);break;case c&&l(c,r,o):v.preventDefault(),e.focusLast(h).catch(p);break;default:return}d.clearTimeout(f),f=d.setTimeout((()=>{m?.(r)}),0)}}}function l(e,t,o){return"function"==typeof e?e(t,o):e.includes(t)}},196715:(e,t,o)=>{o.d(t,{useLongTouch:()=>a});var n=o(296540);const r=500;function a(e,t,o,a=r){(0,n.useEffect)((()=>{const n=t.current;if(!e||!n)return;let r;const i=()=>{r&&(window.clearTimeout(r),r=void 0)},s=e=>{i(),r=window.setTimeout((e=>()=>{i();const t=e=>{n.removeEventListener("touchend",t,!0),e.preventDefault(),e.stopPropagation()};n.addEventListener("touchend",t,{capture:!0,once:!0}),o(e)})(e),a)};return n.addEventListener("touchstart",s,{passive:!0}),n.addEventListener("touchcancel",i,!0),n.addEventListener("touchend",i,!0),n.addEventListener("touchmove",i,{passive:!0}),()=>{i(),n.removeEventListener("touchstart",s),n.removeEventListener("touchcancel",i,!0),n.removeEventListener("touchend",i,!0),n.removeEventListener("touchmove",i)}}),[o,e,a,t])}},793415:(e,t,o)=>{o.d(t,{useModal:()=>i,useModalGroup:()=>c,useSubModal:()=>s});var n=o(296540),r=o(410290),a=o(193496);const i=(e,t="popup")=>l({groupId:e,stackName:t}),s=e=>l({groupId:e,isSubModal:!0}),c=()=>{const{closeGroup:e}=(0,r.useModalContext)(),t=(0,n.useRef)((0,a.createGroupId)()),o=(0,n.useCallback)((()=>e(t.current)),[e]);return{id:t.current,closeGroup:o}},l=e=>{const{closeModalForced:t}=(0,r.useModalContext)(),o=e?.stackName??"popup",i=(0,n.useRef)(e?.groupId??(0,a.createGroupId)()),s=(0,n.useRef)(e?.id?(0,a.resolveModalId)(e?.id):(0,a.createModalId)());return(0,n.useEffect)((()=>()=>{t(s.current,o)}),[]),d((0,n.useMemo)((()=>({modalId:s.current,groupId:i.current,isSubModal:e?.isSubModal})),[e?.isSubModal]),o)},d=(e,t)=>{const{modalId:o}=e,{openedModals:a,openModal:i,closeModal:s,findIndexInStack:c}=(0,r.useModalContext)(),l=(0,n.useCallback)((()=>i(e,t)),[i,e,t]),d=(0,n.useCallback)((()=>s(o,t)),[s,o,t]),u=c(o,t);return(0,n.useMemo)((()=>({isActive:Boolean(a[t].find((({modalId:e})=>e===o))),indexInStack:u,isInStack:null!==u,open:l,close:d})),[d,o,l,a,u,t])}},935242:(e,t,o)=>{o.d(t,{NowContextProvider:()=>i,useNow:()=>s});var n=o(296540);const r=n.createContext(null),a=6e4,i=({children:e})=>{const t=(0,n.useRef)(new Map),o=(0,n.useCallback)(((e,o)=>{let n=t.current.get(e);return n||(n={intervalId:window.setInterval((()=>{const e=Date.now();n?.callbacks.forEach((t=>t(e)))}),e),callbacks:new Set},t.current.set(e,n)),n.callbacks.add(o),()=>{const n=t.current.get(e);n&&(n.callbacks.delete(o),0===n.callbacks.size&&(window.clearInterval(n.intervalId),t.current.delete(e)))}}),[]);return n.createElement(r.Provider,{value:o},e)};function s(e=a){const t=(0,n.useContext)(r);if(null===t)throw new Error("NowContextProvider не добавлен в дерево Реакта!");const[o,i]=(0,n.useState)((()=>Date.now()));return(0,n.useEffect)((()=>t(e,i)),[e,t]),o}},418730:(e,t,o)=>{o.d(t,{useResizeObserver:()=>a});var n=o(296540),r=o(401193);function a({throttleInterval:e,debounceInterval:t}={},o){const a=(0,n.useRef)(),i=(0,n.useRef)(new Map),s=(0,n.useRef)();s.current=o;const c=(0,n.useCallback)((()=>{const o=new Map,n=()=>{const e=Array.from(o.values());e.forEach((e=>{const t=i.current.get(e.target);t&&t(e)})),s.current&&s.current(e),o.clear()};n.cancel=r.noop;const c=e?(0,r.throttle)(n,e):t?(0,r.debounce)(n,t,!0):n;a.current=new ResizeObserver((e=>{e.forEach((e=>{o.set(e.target,e)})),c()}));return[...i.current.keys()].forEach((e=>{a.current?.observe(e)})),()=>{c.cancel(),a.current&&(a.current.disconnect(),a.current=void 0)}}),[e,t]);(0,n.useEffect)((()=>c()),[c]),(0,n.useEffect)((()=>()=>{i.current.clear()}),[]);return{observe:(0,n.useCallback)(((e,t)=>(a.current?.observe(e),t&&i.current.set(e,t),()=>{t&&i.current.delete(e),a.current?.unobserve(e)})),[])}}},794515:(e,t,o)=>{o.d(t,{SnackbarProvider:()=>l,useSnackbar:()=>d});var n=o(296540),r=o(249833),a=o(98536),i=o(280004),s=o(573510),c=o(790986);const l=(0,n.memo)((e=>{const[t,o]=(0,n.useState)(c.snackbarStore.getState());return(0,n.useEffect)((()=>{const e=c.snackbarStore.subscribe(o);return()=>{e(),c.snackbarStore.reset()}}),[]),n.createElement(r.SnackbarContainer,{...e},n.createElement(i.default,{component:"ul",className:"SnackbarContainer__list"},t.map((e=>n.createElement(u,{key:e.id,timeout:400,classNames:"SnackbarContainer__item-"},n.createElement(a.Snackbar,{...e}))))))}));function d(){return(0,n.useMemo)((()=>(0,c.createSnackbar)()),[])}const u=({children:e,...t})=>{const o=(0,n.useRef)(null);return n.createElement(s.default,{...t,nodeRef:o},n.createElement("li",{className:"SnackbarContainer__item",ref:o},e))}},459154:(e,t,o)=>{o.d(t,{StickersConfigProvider:()=>l,useStickersConfig:()=>s});var n=o(296540),r=o(155912),a=o(70915),i=o(401193);function s(){const e=(0,n.useContext)(c);if(void 0===e)throw new Error("StickersConfigProvider не добавлен в дерево Реакта!");return e}const c=n.createContext(void 0),l=({children:e,forceStickersReload:t})=>{const o=(0,a.useDispatch)(),s=(0,r.useStickersApi)(),[l,d]=(0,n.useState)(null);return(0,n.useEffect)((()=>{let e=!1;s.cache.reload().then((()=>s.cache.imageConfigs.get())).then((t=>!e&&d(t))).catch(i.noop);const t=s.cache.stickersAsync.subscribe((async t=>{if("imageConfigs"===t){const t=await s.cache.imageConfigs.get();e||d(t)}}));return()=>{t(),e=!0}}),[s.cache]),(0,n.useEffect)((()=>{t&&s.cache.reload(!0).then((()=>o({type:"StickersReloadCompleted"})))}),[t,s.cache,o]),n.createElement(c.Provider,{value:l},e)}},606312:(e,t,o)=>{o.d(t,{StickersPopupAnimationContextProvider:()=>i,useStickersPopupAnimationContext:()=>r});var n=o(296540);function r(){const e=(0,n.useContext)(a);if(!e)throw new Error("StickersPopupAnimationContextProvider не добавлен в дерево Реакта!");return e}const a=n.createContext(null),i=({children:e})=>{const[t,o]=(0,n.useState)(null),r=(0,n.useCallback)((e=>{o(e)}),[]),i=(0,n.useCallback)((()=>{o(null)}),[]),s=(0,n.useCallback)((e=>{if(!t)return!1;const o=t.peerId===e.peerId;return"Queued"===e.kind?o&&t.randomId===e.randomId:o&&t.cmid===e.cmid}),[t]),c=(0,n.useMemo)((()=>({hasPopupAnimationPlaying:s,playPopupAnimation:r,resetPopupAnimation:i,currentAnimatedMessage:t})),[s,r,i,t]);return n.createElement(a.Provider,{value:c},e)}},967646:(e,t,o)=>{o.d(t,{useWithoutBubblesTheme:()=>i});var n=o(70915),r=o(587534),a=o(843779);function i(){const e=(0,n.useViewer)(),t=(0,n.useFeatureFlags)(),{isTouchOnly:o}=(0,r.useDeviceData)();return!o&&a.isWithoutBubbles(e,t)}},207768:(e,t,o)=>{o.d(t,{ActionsMenu:()=>d,ActionsMenuAction:()=>u,ActionsMenuDropdownAction:()=>m,ActionsMenuSeparator:()=>p});o(536683);var n=o(296540),r=o(32485),a=o.n(r),i=o(402184),s=o(377833),c=o(280240),l=o(70915);const d=({className:e,children:t,...o})=>n.createElement("div",{role:"menu","aria-orientation":"vertical",...o,className:a()("ActionsMenu",e)},t),u=(0,n.forwardRef)((function({disabled:e,leftIcon:t,rightIcon:o,title:r,subtitle:i,type:c="secondary",size:d="regular",isActive:u=!1,isLoading:m,className:p,onPointerMove:h,onPointerLeave:f,onFocus:v,titleClassName:g,..._},E){const{active:b,ref:y,onFocus:k}=(0,s.useFocusState)(),w=(0,l.useCombinedRefs)(E,y);return n.createElement("button",{tabIndex:b?0:-1,role:"menuitem",..._,ref:w,disabled:e,className:a()("ActionsMenuAction",c&&`ActionsMenuAction--${c}`,m&&"ActionsMenuAction--loading",b&&"ActionsMenuAction--focused",u&&"ActionsMenuAction--active",`ActionsMenuAction--size-${d}`,p),onPointerMove:t=>{e||t.defaultPrevented||"mouse"!==t.pointerType||b||t.currentTarget.focus?.({preventScroll:!0}),h?.(t)},onPointerLeave:t=>{e||t.defaultPrevented||"mouse"!==t.pointerType||!b||t.currentTarget.blur?.(),f?.(t)},onFocus:t=>{e||t.defaultPrevented||k(t),v?.(t)}},t&&n.createElement("i",{className:"ActionsMenuAction__icon"},t),n.createElement("span",{className:a()("ActionsMenuAction__title",g)},r,i&&n.createElement("span",{className:"ActionsMenuAction__subtitle"},i)),o&&n.createElement("i",{className:"ActionsMenuAction__icon"},o))})),m=({children:e,icon:t,openType:o,hideOnClick:r=!0,position:s,align:l,actionsMenuClassName:m,layoutMode:p,enableFocusTrap:h,...f})=>{const[v,g]=(0,n.useState)(!1),_=(0,n.useMemo)((()=>{const e="two-column"===p?{position:"right",align:"left"}:{position:"bottom",align:"right"};return s&&(e.position=s),l&&(e.align=l),e}),[p,s,l]);return n.createElement(c.Dropdown,{enableFocusTrap:h,content:n.createElement(d,{id:f["aria-controls"],className:a()(m,{"ActionsMenu--dropdown":"two-column"===p})},e),..."click"===o?{openType:"click"}:{openType:"hover",hideDelay:0,delay:300},..._,classNames:{trigger:"ActionsMenu--dropdown-trigger"},open:v,adaptation:"vertical",onOpen:()=>g(!0),onClose:()=>g(!1),hideOnClick:r,canOpen:!f.disabled},n.createElement(u,{"aria-haspopup":"menu",...f,"aria-expanded":v,isActive:v,leftIcon:t,rightIcon:n.createElement(i.Icon16Chevron,null)}))},p=({className:e})=>n.createElement("div",{role:"separator","aria-orientation":"horizontal",className:a()("ActionsMenuAction__separator",e)})},972112:(e,t,o)=>{o.d(t,{AttachAudio:()=>P});o(379755);var n=o(296540),r=o(32485),a=o.n(r),i=o(401193),s=o(70915),c=o(861218),l=o(37942),d=o(45056),u=o(826965),m=o(58240),p=o(529019),h=o(227490),f=o(607413),v=o(722341),g=o(982069),_=o(797110),E=o(753457),b=o(433412),y=o(892336),k=o(866456),w=o(280240),C=o(207768),A=o(587534),S=o(840648),I=o(944294);const P=n.memo((function({audio:e,withPhoto:t=!0,isOut:o,isInBubble:r,isPrimary:a,actions:i,className:s,withDuration:c,highlightActiveTrackTitle:l,source:d,onWidthChange:u}){const m=r&&o;return Boolean(e.contentRestricted)?n.createElement(N,{audio:e,withPhoto:t,isInOutBubble:m,isPrimary:a,className:s,withDuration:c,highlightActiveTrackTitle:l,onWidthChange:u}):n.createElement(x,{audio:e,withPhoto:t,isInOutBubble:m,isPrimary:a,actions:i,className:s,withDuration:c,highlightActiveTrackTitle:l,source:d,onWidthChange:u})})),x=n.memo((function({audio:e,withPhoto:t,isInOutBubble:o,isPrimary:r,actions:a,className:i,withDuration:d,highlightActiveTrackTitle:u,source:m,onWidthChange:p}){const{player:h}=(0,s.useBrowserEnv)(),f=(0,n.useContext)(c.ConvoAudiosPlaylistContext),v=(0,s.usePixelDensity)(),[g,_]=(0,n.useState)("stopped"),[E,b]=(0,n.useState)(0),y=(0,n.useRef)(`${e.ownerId}_${e.id}`),k=(0,n.useCallback)((e=>{const{currentTrackEntity:t,status:o}=e;if(t?.audioTrack&&t.audioTrack.id===y.current){const{progress:e}=t.audioTrack;_(o),b(e)}else _("stopped"),b(0)}),[]);(0,n.useEffect)((()=>(h.subscribe("stateupdated",k),()=>{h.unsubscribe("stateupdated",k)})),[e,k,h]),(0,n.useEffect)((()=>{k(h.getState())}),[]);const w=(0,n.useCallback)((t=>{if(e.url){if("playing"===g)h.pause();else{const t=f();h.play((0,l.toConvoAudioTrack)(E,e,m,v),t)}t.preventDefault()}}),[e,g,h,f,E,m,v]);return n.createElement(R,{progress:E,artist:e.artist,title:e.title,duration:e.duration,status:g,thumb:e.thumb,isExplicit:e.isExplicit,isInOutBubble:o,isPrimary:r,actions:a,onClick:w,withPhoto:t,className:i,withDuration:d,highlightActiveTrackTitle:u,onWidthChange:p})}));function N({audio:e,withPhoto:t,isInOutBubble:o,isPrimary:r,className:i,withDuration:s,highlightActiveTrackTitle:c,onWidthChange:l}){const{navigate:u}=(0,d.useRouter)();return n.createElement(R,{progress:0,artist:e.artist,title:e.title,duration:e.duration,status:"stopped",thumb:e.thumb,isExplicit:e.isExplicit,isInOutBubble:o,isPrimary:r,withPhoto:t,withDuration:s,highlightActiveTrackTitle:c,className:a()("AttachAudio__restricted",i),onClick:()=>{u({kind:"AudioRestrictionRuntimeRoute",audio:e})},onWidthChange:l})}const R=({progress:e,duration:t,artist:o,title:r,status:c,thumb:d,withPhoto:P,isInOutBubble:x,isPrimary:N,isExplicit:R,className:T,withDuration:M,highlightActiveTrackTitle:O,actions:L,onClick:D,onWidthChange:j})=>{const{lang:F}=(0,s.useBrowserEnv)(),{isTouchOnly:U}=(0,A.useDeviceData)(),B=(0,s.usePixelDensity)(),V="dark"===(0,E.useAppearance)(),{settings:K}=(0,s.useViewer)(),H=K.fastActionsTrigger,{isDropdownFastActionsOpened:G,isContextMenuFastActionsOpened:$,openDropdownFastActions:W,openContextMenuFastActions:z,closeDropdownFastActions:q,closeContextMenuFastActions:Y}=(0,I.useFastActionsState)(),[J,X]=(0,n.useState)(null),Z=N?u.Icon28Pause:m.Icon20PauseCircle,Q=N?p.Icon28Play:h.Icon20PlayCircle,ee=N?f.Icon28SongOutline:v.Icon20SongOutline,te=N?E.Subhead:E.Footnote,[oe,ne]=(0,b.useHover)(),re="playing"===c||"paused"===c,ae=B?135:68,ie=B?270:135,se=(0,l.getAudioThumb)(d,N?ie:ae),ce=O&&re;return(0,n.useEffect)((()=>{if(N){const e=220;j?.(e)}}),[N,j]),n.createElement("div",{ref:e=>{oe(e),X(e)},className:a()("AttachAudio",T,{"AttachAudio--dark":V,"AttachAudio--out":x,"AttachAudio--primary MEAppThemeStylesContrastDisable":N}),onClick:D},P&&n.createElement("div",{className:"AttachAudio__album"},d?n.createElement("img",{className:"AttachAudio__albumImg",alt:`${r} — ${o}`,src:se}):n.createElement("div",{className:"AttachAudio__albumImg AttachAudio__albumImg--placeholder"},!ne&&!re&&n.createElement(ee,null)),(()=>{const t=re||ne;return n.createElement("div",{className:"AttachAudio__albumControls"},n.createElement("div",{className:a()("AttachAudio__albumControlsBackdrop",{"AttachAudio__albumControlsBackdrop--show":t})}),n.createElement("div",{className:"AttachAudio__albumControlsIcon"},(()=>{const e=F.use("me_attach_track_play_aria_label"),t=F.use("me_attach_track_play_aria_label");return"playing"===c?(ne||N)&&n.createElement(Z,{"aria-label":t}):"paused"===c?(ne||N)&&n.createElement(Q,{"aria-label":e}):"stopped"===c?ne&&n.createElement(Q,{"aria-label":e}):void 0})()),!N&&re&&n.createElement(y.AttachAudioSoundBar,{isActive:"playing"===c,className:a()("AttachAudio__albumControlsBar",{"AttachAudio__albumControlsBar--hide":ne})}),N&&re&&n.createElement(k.ProgressCircle,{className:"AttachAudio__albumControlsProgress",progress:Number((100*e).toFixed(2)),size:46,ariaLabel:F.use("me_attach_track_progress_aria_label")}))})()),n.createElement("div",{className:"AttachAudio__info"},n.createElement(E.Headline,{level:N?"1":"2",weight:N?"2":"3",className:"AttachAudio__title",Component:"h4"},ce&&n.createElement(y.AttachAudioSoundBar,{isActive:"playing"===c,color:"var(--vkui--color_text_accent)"}),n.createElement("span",{className:a()("AttachAudio__titleText",{"AttachAudio__titleText--highlight":ce})},r),R&&n.createElement("span",{className:"AttachAudio__titleExplicit","aria-label":F.use("me_attach_track_explicit_aria_label")},n.createElement(g.Icon12Explicit,null))),N?n.createElement(E.Subhead,{className:"AttachAudio__artist",Component:"h5"},o):n.createElement(E.Footnote,{className:"AttachAudio__artist"},o)),M&&n.createElement(te,{className:"AttachAudio__duration"},n.createElement("span",{role:"timer",className:"AttachAudio__durationProgress","aria-label":F.use("me_attach_track_time_left_aria_label")},re?function(e,t){return(0,i.formatDuration)(Math.ceil(t*e))}(e,t):(0,i.formatDuration)(t))),L&&"rightClick"!==H&&n.createElement("div",{className:"AttachAudio__actions"},n.createElement(w.Dropdown,{open:G,onOpen:W,onClose:q,classNames:{wrapper:a()("AttachAudio__dropdown",{"AttachAudio__dropdown--open":U}),wrapperOpened:"AttachAudio__dropdown--open"},content:n.createElement(C.ActionsMenu,null,L),align:"center",position:"bottom",openType:U?"click":"hover"},n.createElement("button",{className:"AttachAudio__action","aria-label":F.use("me_actions_more")},U&&n.createElement("div",{className:"AttachAudio__actionTapArea"}),n.createElement(_.Icon20More,null)))),L&&"hover"!==H&&n.createElement(S.ContextMenu,{ref:{current:J},open:$,onOpen:z,onClose:Y,allowNativeContextMenu:!0,content:n.createElement(C.ActionsMenu,null,L)}))}},892336:(e,t,o)=>{o.d(t,{AttachAudioSoundBar:()=>s});o(504923);var n=o(296540),r=o(32485),a=o.n(r),i=o(401193);const s=({isActive:e,color:t,className:o})=>{const r=(0,n.useRef)(null),s=(0,n.useRef)(e);s.current=e;const c=(0,n.useRef)(!1),l=[[.4,1],[.3,.85],[.2,.65],[.05,.5]];(0,n.useEffect)((()=>{const e=setInterval((()=>{if(!r.current)return;if(!s.current&&c.current)return;const e=r.current.children;for(let t=0;t<e.length;t++){const o=e[t],n=o instanceof HTMLDivElement&&o.style;if(!n)return;if(!s.current){n.height="2px";continue}const[r=0,a=0]=l[t]??[];n.height=(0,i.getRandomFloat)(14*r,14*a)+"px"}c.current=!s.current}),150);return()=>{clearInterval(e)}}),[]);const d={...t&&{color:t}};return n.createElement("div",{ref:r,className:a()("AttachAudioSoundBar",o),style:d},n.createElement("div",{className:"AttachAudioSoundBar__bar"}),n.createElement("div",{className:"AttachAudioSoundBar__bar"}),n.createElement("div",{className:"AttachAudioSoundBar__bar"}),n.createElement("div",{className:"AttachAudioSoundBar__bar"}))}},700312:(e,t,o)=>{o.d(t,{AttachCard:()=>d,getExpectedAttachPhotoWidth:()=>u});o(852483);var n=o(296540),r=o(870134),a=o(70915),i=o(143880),s=o(32485),c=o.n(s),l=o(462700);const d=({href:e,attach:t,picture:o,title:s,subtitle:d,alt:u,isInBubble:m,isOut:p,picturePlaceholder:h,className:f})=>{const{calls:v,router:g,isEduAvailable:_}=(0,a.useBrowserEnv)(),E=n.createElement(i.AttachmentCell,{isInBubble:m,isOut:p,alt:u,image:o||h,title:s,subtitle:d}),b=t?{kind:"AttachProxyRoute",attach:t,fallbackUrl:e||void 0}:null,y="ConvoRoute"===g.screenRoute.kind?g.screenRoute:null;if(e&&b&&y&&g.toUrl(b)){const t=v&&(0,l.getCallJoinHash)(e,_),o=(0,l.getChatJoinHash)(e,_);if(t||o)return n.createElement(r.ExternalLink,{href:e,onClick:e=>{e.preventDefault(),g.push({...y,chatJoinHash:o,callJoinHash:t})},className:"AttachCard"},E);if((0,l.isSferumChatInviteLink)(e)||(0,l.isSferumCallInviteLink)(e))return n.createElement(r.ExternalLink,{href:e,className:c()(f,"AttachCard")},E)}return b?n.createElement(r.Link,{to:b,className:c()(f,"AttachCard")},E):e?n.createElement(r.ExternalLink,{href:e,className:c()(f,"AttachCard")},E):n.createElement("span",{className:"AttachCard"},E)};function u(){return 40*("undefined"!=typeof window?window.devicePixelRatio:1)}},519636:(e,t,o)=>{o.d(t,{AttachDoc:()=>R});o(133063);var n=o(296540),r=o(520828),a=o(681362),i=o(948513),s=o(724673),c=o(242514),l=o(34046),d=o(118013),u=o(349811),m=o(889977),p=o(870134),h=o(401193),f=o(32485),v=o.n(f),g=o(70915),_=o(522300),E=o(529976),b=o(793415),y=o(753457),k=o(143880),w=o(125272),C=o(174728),A=o(483620),S=o(306684),I=o(768836),P=o(419108),x=o(826520),N=o(587534);const R=({doc:e,variant:t="inline",isInBubble:o=!1,forwardLevel:f=0,isOut:y=!1,className:w,subtitle:C,isClickDisabled:A=!1})=>{const S=(0,g.usePixelDensity)(),[,I]=(0,_.getExpectedAttachWidth)(S,o,f,232),P=(0,b.useModal)(),{shouldOpenFilesPreview:x}=(0,g.useBrowserEnv)(),{isTouchOnly:R}=(0,N.useDeviceData)(),M=(0,n.useCallback)((t=>{e.isUnsafe&&(0!==t.button&&1!==t.button||(t.preventDefault(),P.open()))}),[e.isUnsafe,P]),O=r.preview(e,I),L=[e.ext.toUpperCase(),(0,h.formatFileSize)(e.size)],D=(0,n.useMemo)((()=>{switch(e.type){case"spreadsheet":return n.createElement(a.Icon24DocumentListOutline,null);case"audio":return n.createElement(i.Icon24MusicOutline,null);case"video":return n.createElement(s.Icon24VideoOutline,null);case"image":case"gif":return n.createElement(c.Icon24PictureOutline,null);case"ebook":return n.createElement(l.Icon24BooksOutline,null);case"archive":return n.createElement(d.Icon28ZipOutline,{width:24});case"text":return n.createElement(u.Icon24DocumentTextOutline,null);case"default":return n.createElement(m.Icon24DocumentOutline,null);default:(0,h.exhaustivenessCheck)(e.type)}}),[e.type]);if("preview"===t&&e.image)return n.createElement(E.AttachDocPreview,{doc:e,meta:C,isInBubble:o,forwardLevel:f});const j=x?r.overrideUrlForPreview(e,R):e.url;return n.createElement(n.Fragment,null,n.createElement(p.ExternalLink,{onClick:M,onAuxClick:M,disabled:A,href:j,className:v()("AttachDoc",w)},n.createElement(k.AttachmentCell,{isInBubble:o,isOut:y,image:O?O.url:D,title:e.title,subtitle:C||L,alt:e.title})),P.isActive&&n.createElement(T,{onClose:P.close,title:e.title,url:j}))},T=({onClose:e,url:t,title:o})=>{const{lang:r}=(0,g.useBrowserEnv)(),a=(0,n.useId)();return n.createElement(S.ModalView,{onEscape:e,contextClass:"MEConfig"},n.createElement(C.ModalBackdrop,{onClick:e},n.createElement(A.ModalPanel,{className:"AttachDoc__unsafe-modal",ariaLabelledby:a},n.createElement(I.ModalHeader,{closeLabel:r.use("me_close"),onClose:e,title:r.use("me_download_unsafe_title"),titleId:a}),n.createElement(P.ModalBody,null,n.createElement(w.FormattedLangKey,{langkey:"me_download_unsafe_text",values:{filename:n.createElement("b",{className:"AttachDoc__unsafe-filename"},o)}})),n.createElement(x.ModalFooter,{buttons:[n.createElement(y.Button,{mode:"tertiary",key:"cancel",onClick:e},r.use("me_cancel")),n.createElement(y.Button,{href:t,download:!0,mode:"primary",onClick:e,key:"download"},r.use("me_download"))]}))))}},529976:(e,t,o)=>{o.d(t,{AttachDocPreview:()=>y});o(962383);var n=o(296540),r=o(520828),a=o(870134),i=o(340328),s=o(800483),c=o(103881),l=o(492286),d=o(70915),u=o(522300),m=o(743464),p=o(401193),h=o(939158),f=o(140094),v=o(753457),g=o(32485),_=o.n(g),E=o(794515),b=o(595328);const y=({doc:e,meta:t,width:o,height:g,isInBubble:y=!1,forwardLevel:k=0,isTheOnlyAttach:w})=>{const{api:C,lang:A}=(0,d.useBrowserEnv)(),S=(0,d.usePixelDensity)(),I=(0,d.useViewer)(),P=(0,d.useFeatureFlags)(),x=(0,E.useSnackbar)(),N="gif"===e.ext,[R,T]=(0,n.useState)(!1),[M,O]=(0,n.useState)(!1),[L,D]=(0,n.useState)(null),{ref:j,inView:F}=(0,f.useInView)({threshold:.25,skip:!P.vkm_gifs_autoplay||!w||!N});(0,n.useEffect)((()=>{T(F)}),[F]);const U=[e.ext.toUpperCase(),(0,p.formatFileSize)(e.size)].join(" · "),B=(0,u.getAttachForwardIndent)(k),{width:V}=(0,h.useImagesLayout)(),[K,H]=(0,u.getExpectedAttachWidth)(S,y,k,V-B),G=r.preview(e,H);if(!G)return null;const{width:$,height:W}=(0,u.applySizeLimitations)(G.width,G.height,K,K,120,120);return n.createElement(a.ExternalLink,{href:e.url,className:_()("AttachDocPreview",{"AttachDocPreview--playing":R}),style:{width:o||$,height:g||W},onClick:N?e=>{T((e=>!e)),e.preventDefault()}:void 0,target:N?"_self":"_blank",ref:j},n.createElement(m.PhotoItem,{alt:e.title,src:R?e.url:G.url,width:o||$,height:g||W,withLoader:R}),N&&!R&&n.createElement("div",{className:"AttachDocPreview__play"},n.createElement(s.Icon24Play,null)),n.createElement(i.ComposerAttachPreviewMeta,{className:"AttachDocPreview__metaWrapper",rounded:!0,top:!0,left:!0},n.createElement("span",{className:"AttachDocPreview__meta"},t||U)),N&&w&&e.ownerId!==I.id&&n.createElement(b.Tooltip,{content:!0===M?A.use("me_added_to_docs_tooltip"):A.use("me_add_to_docs_tooltip"),delay:500,tooltipClassName:"AttachDocPreview__saveTooltip",position:"bottom",align:"right",arrowOffset:{x:-4},vkuiStyle:!0,watchContentChange:!0},n.createElement("button",{className:"AttachDocPreview__saveButton",onClick:async t=>{if(t.stopPropagation(),t.preventDefault(),"loading"===M)return;const o=null!==L;try{if(O("loading"),o)await C.fetch("docs.delete",{doc_id:L,owner_id:I.id}),O(!1),D(null);else{const t=await C.fetch("docs.add",{doc_id:e.id,owner_id:e.ownerId,access_key:e.accessKey});O(!0),D(t)}}catch{O(o),x({message:o?A.use("me_doc_delete_error"):A.use("me_doc_add_error")})}}},!1===M&&n.createElement(c.Icon24AddOutline,null),"loading"===M&&n.createElement(v.Spinner,{className:"AttachDocPreview__saveSpinner"}),!0===M&&n.createElement(l.Icon24DoneOutline,null))))}},504328:(e,t,o)=>{o.d(t,{AttachLink:()=>c});o(60323);var n=o(296540),r=o(520828),a=o(700312),i=o(623500),s=o(70915);const c=({link:e,isInBubble:t,isOut:o})=>{const{lang:c}=(0,s.useBrowserEnv)(),{url:l,subtitle:d,title:u}=e,m=r.preview(e,(0,a.getExpectedAttachPhotoWidth)(),0,!0),p=u||c.use("me_attaches_link_title_fallback");return n.createElement(a.AttachCard,{attach:e,href:l,title:p,subtitle:d,picture:m?.url,picturePlaceholder:n.createElement(i.Icon24ExternalLinkOutline,null),alt:p,isInBubble:t,isOut:o})}},726552:(e,t,o)=>{o.d(t,{AttachMiniApp:()=>l});var n=o(296540),r=o(313979),a=o(120009),i=o(70915),s=o(520828),c=o(633580);const l=n.memo((function({isCompact:e,isForwarded:t,isInBubble:o,isOut:l,isPrimary:u,isRich:m,miniApp:p}){const{lang:h}=(0,i.useBrowserEnv)(),f=s.isGame(p),v=s.isMiniAppAvailable(p),g=f?r.Icon16Game:a.Icon16Services;return n.createElement(c.AttachMiniAppCell,{route:{kind:"AttachProxyRoute",attach:p},isAvailable:v,isCompact:e,isForwarded:t,isInBubble:o,isOut:l,isPrimary:u,isRich:m,imageSrc:d(p),imageAlt:h.use("me_attaches_mini_app_alt"),subtitle:f?h.use("me_attaches_game_description"):h.use("me_attaches_mini_app_description"),description:p.description,buttonText:p.buttonText||(f?h.use("me_attaches_game_action"):h.use("me_attaches_miniapp_action")),buttonIcon:n.createElement(g,null)},p.title)}));function d(e){const t=(0,i.usePixelDensity)(),[o,n]=e.images;return((t?n:o)||o).url}},633580:(e,t,o)=>{o.d(t,{AttachMiniAppCell:()=>m});o(608567);var n=o(296540),r=o(32485),a=o.n(r),i=o(753457),s=o(70915),c=o(870134),l=o(143880);const d=({isAvailable:e=!0,isCompact:t,isForwarded:o,isInBubble:r,isPrimary:l,route:d,imageSrc:u,imageAlt:m,className:p,children:h,description:f,buttonIcon:v,buttonText:g,after:_,onNavigate:E})=>{const[b]=(0,s.useViewport)({debounced:!0}),y=t||b<=740;return n.createElement("div",{className:a()("AttachMiniAppCell AttachMiniAppCell--rich",{"AttachMiniAppCell--classic":!r,"AttachMiniAppCell--compact":y,"AttachMiniAppCell--disabled":!e,"AttachMiniAppCell--forwarded":o,"AttachMiniAppCell--primary":l},p)},n.createElement(i.RichCell,{multiline:!e,caption:e&&f,before:n.createElement(i.Image,{size:y?48:80,borderRadius:"m",src:u,alt:m}),actions:e&&n.createElement(i.ButtonGroup,{mode:"horizontal",gap:"s",stretched:!0},n.createElement(c.Link,{to:d,onNavigate:E},n.createElement(i.Button,{Component:"span",tabIndex:void 0,role:void 0,appearance:"accent-invariable",mode:"outline",before:v},g)))},e?h:f),_)},u=({isAvailable:e=!0,isInBubble:t,isOut:o,route:r,imageSrc:i,imageAlt:s,className:d,children:u,subtitle:m,onNavigate:p})=>n.createElement(c.Link,{to:r,disabled:!e,className:a()("AttachMiniAppCell AttachMiniAppCell--basic",d),onNavigate:p},n.createElement(l.AttachmentCell,{isClickable:e,isInBubble:t,isOut:o,title:u,subtitle:e?m:void 0,image:i,alt:s})),m=e=>e.isRich?n.createElement(d,{...e}):n.createElement(u,{...e})},586118:(e,t,o)=>{o.d(t,{AttachPhotosVideos:()=>C,getDuration:()=>I});o(357765);var n=o(296540),r=o(520828),a=o(32485),i=o.n(a),s=o(800483),c=o(204733),l=o(401193),d=o(870134),u=o(522300),m=o(939158),p=o(743464),h=o(222472),f=o(175953),v=o(70915),g=o(753457),_=o(863211),E=o(949100),b=o(340832),y=o(981220),k=o(529976),w=o(74612);const C=({videos:e=[],photos:t=[],docs:o=[],isCompact:a=!1,forwardLevel:i=0,attachmentsCount:s,showDateOutInsidePublicVideo:c,isUnread:l,forceAutoPlay:d,message:p,withSwipeNavigation:h,isInBubble:g,hidePublicVideoInfo:_,vkComLegacyAnalyticsPostId:E,autoplay:w,getAdditionalLinkPayload:C,onWidthChange:I})=>{const P=(0,u.getAttachForwardIndent)(i),{width:x,maxSingleHeight:N}=(0,m.useImagesLayout)(),R=x-P,T=t.length+o.length+e.length===1,M=(0,v.usePeers)(),O=e.filter((e=>!M.has(f.resolveId(e.ownerId)))).map((e=>f.resolveId(e.ownerId))),{fetchProfilesAndGroups:L}=(0,b.useConvoAttachesGetMissedPeers)(O);return(0,n.useEffect)((()=>{L()}),[]),n.createElement(y.AttachesGrid,{forwardLevel:i,onWidthChange:I},t.map((e=>{const o=r.preview(e,R);if(!o)return null;const{width:a,height:s}=(0,u.applySizeLimitations)(o.width,o.height,R,N,250,100),c=h??!0;return n.createElement(S,{key:e.id,src:o.url,width:a,height:s,previewWidth:o.width,previewHeight:o.height,photo:e,getAdditionalLinkPayload:C,photos:i?t:void 0,position:0===e.id||c?e.position:0})})).concat(o.map((e=>{const t=r.preview(e,R);if(!t)return null;const{width:o,height:a}=(0,u.applySizeLimitations)(t.width,t.height,R,N,250,100);return n.createElement(k.AttachDocPreview,{key:e.id,doc:e,width:o,height:a,isInBubble:g,forwardLevel:i,isTheOnlyAttach:T})}))).concat(e.map((t=>{const o=r.preview(t,R);if(!o)return null;const{url:i}=o;let{width:m,height:f}=o;const{id:v,duration:g,platform:b,files:y,restriction:k}=t;if("short_video"===t.type)m=a?132:200,f=a?236:356;else{const{width:e,height:t}=(0,u.applySizeLimitations)(m,f,R,N,220,100);m=e,f=t}return n.createElement(A,{key:v,src:i,width:m,height:f,video:t,showPlayIcon:e.length<=3,duration:g,platform:b,files:y,restriction:k,attachmentsCount:s,forceAutoPlay:d,isTheOnlyAttach:T,isUnread:l,message:p,autoplay:w,vkComLegacyAnalyticsPostId:E,showDateOutInsidePublicVideo:c,position:h?(S=t,"short_video"===S.type||!S.isFromMessage||S.files?.external?void 0:S.position):0,hidePublicVideoInfo:_,getAdditionalLinkPayload:C});var S}))).filter((e=>Boolean(e))))},A=({src:e,width:t,height:o,video:r,duration:a,restriction:l,files:u,autoplay:m,vkComLegacyAnalyticsPostId:b,platform:y,showPlayIcon:k,attachmentsCount:C,forceAutoPlay:A,isTheOnlyAttach:S,showDateOutInsidePublicVideo:P,isUnread:x,message:N,position:R,hidePublicVideoInfo:T,getAdditionalLinkPayload:M})=>{const O=(0,v.useFeatureFlags)(),L=(0,v.usePeers)(),{lang:D,vkDomain:j}=(0,v.useBrowserEnv)(),F=!!l?.isBlur,U=void 0===l?.canPlay||l.canPlay,B=I(a,!!u?.external)||y,V=O.vkm_new_attach_video&&1===C&&!r.isFromMessage&&void 0===r.platform&&"short_video"!==r.type&&r,K=O.vkm_new_attach_video&&1===C&&void 0!==r.platform&&r;let H;!1!==V&&S&&L.has(f.resolveId(V.ownerId))&&(H=f.safeGet(L,f.resolveId(V.ownerId)));const G=!1!==V&&function(e,t){if(!e)return"";const o=Date.now()/1e3-e/1e3;if(o<60)return t.use("me_video_added_less_than_a_minute_ago");if(o<3600)return t.use("me_video_mins_ago",{num:Math.floor(o/60)});if(o<86400)return t.use("me_video_hours_ago",{num:Math.floor(o/3600)});if(o<2592e3)return t.use("me_video_days_ago",{num:Math.floor(o/86400)});if(o<31536e3)return t.use("me_video_months_ago",{num:Math.floor(o/2592e3)});return t.use("me_video_years_ago",{num:Math.floor(o/31363200)})}(V.uploadDate,D),$=!!l&&(F||!U);return n.createElement("div",{className:i()("AttachVideos__base",{"AttachVideos__base--withFooter":V&&H||K})},n.createElement(w.AttachVideoInlinePlayer,{autoplay:m,forceAutoPlay:A,attachmentsCount:C,vkComLegacyAnalyticsPostId:b,hasRestriction:$,isVkVideo:!r.platform,videoId:`${r.ownerId}_${r.id}`,listId:r.accessKey||"",shortVideo:"short_video"===r.type},n.createElement(d.Link,{to:{kind:"AttachMediaProxyRoute",attach:r,source:M?.({mediaViewerItemPosition:R})},className:"AttachVideos__link",disabled:!U},"short_video"===r.type?n.createElement(h.AttachVideosClip,{ownerId:r.ownerId,height:o,width:t,clip:r,previewUrl:e,isRestricted:$}):n.createElement(n.Fragment,null,n.createElement(p.PhotoItem,{width:t,height:o,src:e,alt:r.title,widthAndHeightAsAttr:!!V,className:i()({AttachVideos__previewBackdrop:F||!U})}),!(F||!U)&&n.createElement(n.Fragment,null,k&&n.createElement("div",{className:"AttachVideos__videoPlay"},n.createElement(s.Icon24Play,null)),B&&"live"!==r.type&&n.createElement("div",{className:"AttachVideos__videoInfo"},B),"live"===r.type&&n.createElement("div",{className:"AttachVideos__videoLive"},n.createElement(_.IconLiveText20h,{className:"AttachVideos__videoLive--icon"}))),(F||!U)&&n.createElement("div",{className:"AttachVideos__videoRestrictionWrap"},n.createElement("div",{className:"AttachVideos__videoIconRestriction",style:{backgroundImage:`url('${l?.cardIcon?.slice(-1).pop()?.url}')`,filter:"invert(100%)"}}),void 0!==l?.title&&n.createElement("div",null,l.title))))),V&&H&&!T&&n.createElement("div",{className:"AttachVideos__info",style:{maxWidth:t}},n.createElement(g.Subhead,{className:"AttachVideos__videoName",Component:"h5"},n.createElement(d.Link,{to:{kind:"AttachMediaProxyRoute",attach:r,source:M?.({mediaViewerItemPosition:R})},className:"AttachVideos__videoName--link",disabled:!U},V.title)),n.createElement("div",{className:"AttachVideos__authorName"},r.mainArtists&&r.mainArtists.map(((e,t,o)=>n.createElement(d.ExternalLink,{href:`https://${j}/artist/${e.domain}`,className:"AttachVideos__authorLink AttachVideos__artistLink"},n.createElement("span",null,e.name),t<o.length-1&&n.createElement("span",null,", ")))),!r.mainArtists&&n.createElement(d.ExternalLink,{href:`https://${j}/${"short_video"===V.type?"clips/":"video/@"}${f.linkVideo(H)}`,className:"AttachVideos__authorLink"},n.createElement("span",null,f.name(H)),"isVerified"in H&&H.isVerified&&n.createElement("span",null,n.createElement(c.Icon16Verified,{className:"AttachVideos__authorVerified"})))),U&&n.createElement("div",{className:"AttachVideos__views"},D.use("me_convo_attaches_video_views",{num:V.views,formatted:"short",values:{count:D.formatNumber(V.views,"short")}}),G&&n.createElement(n.Fragment,null," · ",G),P&&"Normal"===N?.kind&&void 0!==x&&n.createElement(E.ConvoMessageBottomInfo,{className:"ConvoMessage__info AttachVideos__bottomInfo",dateClassName:"ConvoMessage__date",message:N,isUnread:x,showDate:!0}))),K&&!T&&n.createElement("div",{className:"AttachVideos__info",style:{maxWidth:t}},n.createElement(g.Subhead,{className:"AttachVideos__videoName AttachVideos__videoName--external",Component:"h5"},n.createElement(d.Link,{to:{kind:"AttachMediaProxyRoute",attach:r,source:M?.({mediaViewerItemPosition:R})},className:"AttachVideos__videoName--link",disabled:!U},K.title)),n.createElement("div",{className:"AttachVideos__views"},n.createElement(d.ExternalLink,{href:K.files?.external||"",className:"AttachVideos__authorLink"},K.platform,P&&"Normal"===N?.kind&&void 0!==x&&n.createElement(E.ConvoMessageBottomInfo,{className:"ConvoMessage__info ConvoMessage__info--external AttachVideos__bottomInfo",dateClassName:"ConvoMessage__date",message:N,isUnread:x,showDate:!0})))))},S=({src:e,width:t,height:o,previewHeight:r,previewWidth:a,photo:i,position:s,getAdditionalLinkPayload:c,photos:l})=>{const[u,m]=(0,n.useState)(!1),h=function(e,t,o,n){if(o<e&&n<t)return!1;const r=o/n,a=e/t,i=r/a;return i<3&&i>1/3}(t,o,a,r);return n.createElement(d.Link,{disabled:u,to:{kind:"AttachMediaProxyRoute",attach:i,source:c?.({mediaViewerItemPosition:s}),vkcomIntegrationAdditionalParam:l}},n.createElement(p.PhotoItem,{height:o,width:t,cover:h,src:e,thumbhashUrl:i.thumbhashUrl,showReload:!0,onError:()=>m(!0),onLoad:()=>m(!1)}))};function I(e,t){return void 0===e?"":!t||t&&e?(0,l.formatDuration)(e):""}},74612:(e,t,o)=>{o.d(t,{AttachVideoInlinePlayer:()=>s});var n=o(296540),r=o(522300),a=o(70915),i=o(140094);const s=e=>{const{autoplay:t,videoId:o,listId:s,children:c,isVkVideo:l,shortVideo:d,forceAutoPlay:u,hasRestriction:m,attachmentsCount:p,vkComLegacyAnalyticsPostId:h}=e,{inView:f,ref:v,entry:g}=(0,i.useInView)({threshold:1}),_=(0,a.useFeatureFlags)(),{vkcom_me:E}=(0,a.useBrowserEnv)(),b=(0,n.useRef)(null),y=f&&g?.boundingClientRect.height&&g?.boundingClientRect.width&&b.current?.clientHeight&&b.current?.clientWidth,k=1===p,w=_.vkm_autoplay_video&&k&&t&&l&&y&&!m;(0,n.useEffect)((()=>{w&&b.current&&E?.showInlineVideo?.(o,s,d,b.current,!0,u,h)}),[o,s,d,E,w,h,u]);return n.createElement("div",{onContextMenu:e=>{b.current&&e.target instanceof Node&&!b.current.contains(e.target)&&(e.stopPropagation(),e.preventDefault())},ref:v},n.createElement("div",{onClickCapture:e=>{m||k&&((0,r.isMouseEventWithModifier)(e)||E?.showInlineVideo&&(e.preventDefault(),e.stopPropagation(),E.showInlineVideo(o,s,d,e.currentTarget,!1,void 0,h)))},className:"page_video_autoplayable",ref:b},c))}},222472:(e,t,o)=>{o.d(t,{AttachVideosClip:()=>h});var n=o(296540),r=o(32485),a=o.n(r),i=o(800483),s=o(59907),c=o(294539),l=o(70915),d=o(408664),u=o(836692),m=o(743464),p=o(175953);o(203195);const h=({ownerId:e,clip:t,previewUrl:o,width:r,height:h,isRestricted:f=!1})=>{const v=(0,l.usePeers)(),{lang:g}=(0,l.useBrowserEnv)(),_=p.safeGet(v,p.resolveId(e));return n.createElement("div",{className:a()("AttachVideosClip",{"AttachVideosClip--restricted":f}),style:{width:r,height:h}},n.createElement("div",{className:"AttachVideosClip__container"},!f&&n.createElement(n.Fragment,null,n.createElement("div",{className:"AttachVideosClip__head"},n.createElement(u.Avatar,{peer:_,size:20,className:"AttachVideosClip__avatar"}),n.createElement(d.PeerTitle,{peer:_,className:"AttachVideosClip__title",iconColor:"var(--vkui--color_text_contrast)"})),n.createElement(m.PhotoItem,{width:r,height:h,src:o,alt:t.title,cover:!0}),n.createElement("div",{className:"AttachVideosClip__videoPlay"},n.createElement(i.Icon24Play,null)),n.createElement("span",{className:"AttachVideosClip__logo"},n.createElement(s.Icon20LogoClipsOutline,null))),f&&n.createElement("div",{className:"AttachVideosClip__restrictedContainer"},n.createElement(c.Icon28LockOutline,{className:"AttachVideosClip__restrictedIcon"}),n.createElement("p",{className:"AttachVideosClip__restrictedText"},g.use("me_attach_clip_private")))))}},981220:(e,t,o)=>{o.d(t,{AttachesGrid:()=>d});o(943371);var n=o(296540),r=o(32485),a=o.n(r),i=o(713432),s=o(522300),c=o(939158),l=o(967646);const d=({children:e,forwardLevel:t=0,onWidthChange:o})=>{const r=(0,s.getAttachForwardIndent)(t),{width:a,minHeight:l,preferredRatio:d}=(0,c.useImagesLayout)(),p=a-r,h=u(n.Children.toArray(e)),f=function(e){return u(n.Children.toArray(e)).map(((e,t)=>({width:e.props.width,height:e.props.height,i:t})))}(e);if(!f.length||1===f.length)return n.createElement(m,{onWidthChange:o,gap:2},e);var v,g;const _=(v=(0,i.computeAttachePhotosLayout)(d,p,{minHeight:l},f),g=2,v.forEach((e=>e.forEach(((t,o)=>{1!==e.length&&(0===o||o===e.length-1?t.width=t.width-g/2:t.width=t.width-g)})))),v).map((e=>e.map((e=>{const{i:t,width:o,height:r}=e,a=h[t];return a&&n.isValidElement(a)?n.cloneElement(a,{width:o,height:r}):null}))));return n.createElement(m,{onWidthChange:o,width:p,gap:2},_.map(((e,t)=>n.createElement("div",{className:"AttachesGrid__row",key:t},e))))};function u(e){return e.reduce(((e,t)=>(n.isValidElement(t)&&t.props.width&&t.props.height&&e.push(t),e)),[])}function m(e){const{gap:t,width:o,children:r,onWidthChange:i}=e,s=(0,l.useWithoutBubblesTheme)(),c=(0,n.useCallback)((e=>{if(e&&i){const{width:t}=e.getBoundingClientRect();i(t)}}),[i]);return n.createElement("div",{ref:c,className:a()("AttachesGrid",s&&"AttachesGrid--withoutBubblesTheme"),style:{maxWidth:o||"max-content","--photoAttachGap":t+"px"}},r)}},143880:(e,t,o)=>{o.d(t,{AttachmentCell:()=>c,AttachmentCellButton:()=>l});var n=o(753457),r=(o(721403),o(296540)),a=o(743464),i=o(32485),s=o.n(i);const c=({className:e,isAvailable:t=!0,isClickable:o,isOut:i=!1,isInBubble:c=!1,title:l,subtitle:d,image:u,onClick:m,imageShape:p="square",icon:h,alt:f,imageDetailRightBottom:v,buttonRight:g,additionalBlock:_})=>{o=void 0===o?!g:o;const E=(0,r.useCallback)((()=>{const e="roundWithBorder"===p?"calc(var(--attachmentCellImageHeight) - 5px)":"var(--attachmentCellImageHeight)";return r.createElement("div",{className:s()("AttachmentCell__imageBlockContainer",{"AttachmentCell__imageBlockContainer--inOutBubble":c&&i,"AttachmentCell__imageBlockContainer--roundWithBorder":"roundWithBorder"===p,"AttachmentCell__imageBlockContainer--round":"round"===p,"AttachmentCell__imageBlockContainer--square":"square"===p})},r.createElement("div",{className:"AttachmentCell__imageBlockBackground"}),r.createElement("div",{className:s()("AttachmentCell__imageBlock")},"string"==typeof u?r.createElement(a.PhotoItem,{className:"AttachmentCell__photoItem",src:u,height:e,width:e,alt:f,cover:!0}):u),h&&r.createElement("div",{className:s()("AttachmentCell__icon",{"AttachmentCell__icon--withImage":u,"AttachmentCell__icon--roundWithBorder":"roundWithBorder"===p,"AttachmentCell__icon--round":"round"===p,"AttachmentCell__icon--square":"square"===p})},h),v&&r.createElement("div",{className:"AttachmentCell__imageDetailLeftBottom"},v))}),[p,c,i,u,f,h,v]),b=(0,r.useCallback)((()=>Array.isArray(d)?`${d[0]} ᐧ ${d[1]}`:d),[d]);return r.createElement("div",{className:s()(e,"AttachmentCell",{"AttachmentCell--withButton":g,"AttachmentCell--clickable":o}),onClick:m},E(),r.createElement("div",{className:"AttachmentCell__infoBlockContainer"},r.createElement("div",{className:"AttachmentCell__infoBlock"},t?r.createElement(r.Fragment,null,r.createElement(n.Headline,{level:"1",className:"AttachmentCell__headline",Component:"h4"},l),r.createElement(n.Footnote,{className:s()("AttachmentCell__footnote",{"AttachmentCell__footnote--inOutBubble":c&&i})},b())):r.createElement(n.Headline,{level:"1",className:"AttachmentCell__headline AttachmentCell__headline--unavailable",Component:"h4"},l)),_&&r.createElement("div",{className:"AttachmentCell_additionalBlockContainer"},_)),g&&r.createElement("div",{className:"AttachmentCell_buttonContainer"},g))},l=e=>r.createElement(n.Button,{size:"s",mode:"primary",...e},e.children)},836692:(e,t,o)=>{o.d(t,{Avatar:()=>d});o(685203);var n=o(296540),r=o(32485),a=o.n(r),i=o(70915),s=o(401193),c=o(331599),l=o(482288);const d=n.memo((function({peer:e,size:t,activityIndicator:o,withOnline:r=!1,withBirthday:s=!1,activeCall:c,className:d,isCollapsed:m=!1}){const p=function(e,t){if(!e?.isOnline)return"Offline";if(t)switch(e.platform){case"vkme":case"mobile":return"Mobile";case"other":return"Online";default:e.platform;return"Online"}return"Offline"}((0,i.useLastSeen)(e.id),r),h=!!c,f=s&&function(e){if("User"!==e.kind||!e.bdate)return!1;const t=new Date,o=String(t.getDate()),n=String(t.getMonth()+1),{day:r,month:a}=RegExp("(?<day>\\d+)\\.(?<month>\\d+)").exec(e.bdate)?.groups||{};return r===o&&a===n}(e),v=(0,n.useMemo)((()=>({width:t,height:t})),[t]),g=function(e,t,o){return`mePeerFrame${e}${t}${o?"c":""}`}(p,t,!m&&(h||f)),_=`url(#${g}Mask${e.id})`,E=a()("MEAvatar",`MEAvatar--size-${t}`,{"MEAvatar--withActivity":!!o,"MEAvatar--collapsed":m},d);return n.createElement("figure",{style:v,className:E},n.createElement("div",{className:"MEAvatar__imgWrapper",style:{clipPath:_}},n.createElement(l.PeerAvatar,{peer:e,size:t}),o&&n.createElement("div",{className:"MEAvatar__activityIndicator"},o)),n.createElement(u,{frameType:p}),f&&n.createElement("div",{className:a()("MEAvatar__icon MEAvatar__birthday MEAvatar__icon--upper-right")},n.createElement("svg",{className:"MEAvatar__upperRightIconSvg"},n.createElement("use",{href:"#meCake10"}))),h&&n.createElement("div",{className:a()("MEAvatar__icon MEAvatar__call",{"MEAvatar__call--empty":"empty"===c,"MEAvatar__icon--hidden":m&&"empty"===c,"MEAvatar__icon--upper-right":!m,"MEAvatar__icon--bottom-right":m})},n.createElement("svg",{className:"MEAvatar__upperRightIconSvg"},n.createElement("use",{href:"#mePhone10"}))),n.createElement("svg",{className:"MEAvatar__svg"},n.createElement("clipPath",{id:g+"Mask"+e.id},n.createElement("use",{href:"#"+g})),n.createElement("use",{href:"#"+g,className:"MEAvatar__shadow",clipPath:_})))}));const u=({frameType:e})=>{switch(e){case"Mobile":return n.createElement("div",{className:"MEAvatar__mobile"},n.createElement(c.Icon12OnlineMobile,null));case"Online":return n.createElement("div",{className:"MEAvatar__online"});case"Offline":return null;default:(0,s.exhaustivenessCheck)(e)}}},529672:(e,t,o)=>{o.d(t,{AvatarFavorites:()=>l});var n=o(296540),r=(o(797523),o(32485)),a=o.n(r),i=o(70915),s=o(524598),c=o(390842);const l=({size:e,className:t})=>{const{lang:o}=(0,i.useBrowserEnv)(),r=(0,n.useMemo)((()=>({width:e,height:e})),[e]),s=a()("AvatarFavorites",t);return n.createElement("div",{style:r,className:s,"aria-label":o.use("me_favorites")},d[e])},d={24:n.createElement("svg",{fill:"currentColor",height:"12",width:"12",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},n.createElement("path",{d:"M5.55 1.29h.9c.58 0 1.05 0 1.42.03.38.03.71.1 1.01.25.49.24.88.64 1.13 1.12.15.3.21.63.25 1.01.03.38.03.84.03 1.42v3.7c0 .44 0 .8-.03 1.07-.02.27-.08.55-.25.77-.24.3-.61.48-1 .48-.28 0-.53-.12-.76-.27-.23-.15-.51-.36-.85-.63l-.82-.64a1.8 1.8 0 00-.47-.32.43.43 0 00-.22 0 1.8 1.8 0 00-.47.32l-.82.64c-.34.27-.62.48-.85.63-.23.15-.48.28-.76.27-.39 0-.76-.18-1-.48-.17-.22-.23-.5-.25-.77-.03-.28-.03-.63-.03-1.06v-3.7c0-.59 0-1.05.03-1.43.04-.38.1-.71.25-1.01.25-.48.64-.88 1.13-1.12.3-.16.63-.22 1-.25.38-.03.85-.03 1.43-.03zm-1.35.88c-.33.03-.53.08-.7.16-.32.16-.58.43-.74.75-.08.16-.13.36-.16.69-.03.34-.03.77-.03 1.37v3.67c0 .46 0 .77.02 1 .02.24.06.3.07.32.08.1.2.16.34.16.01 0 .09-.01.29-.14.2-.12.44-.32.8-.6l.8-.62.06-.04c.25-.2.46-.37.71-.43.22-.06.46-.06.68 0 .25.06.46.23.71.43l.06.04.8.62c.36.28.6.48.8.6.2.13.28.14.3.14.12 0 .25-.06.33-.16 0-.02.05-.08.07-.32.02-.23.02-.54.02-1V5.14c0-.6 0-1.03-.03-1.37a1.81 1.81 0 00-.16-.7 1.71 1.71 0 00-.75-.74 1.81 1.81 0 00-.69-.16c-.33-.03-.76-.03-1.37-.03h-.86c-.6 0-1.04 0-1.37.03z"})),32:n.createElement("svg",{fill:"currentColor",height:"16",width:"16",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},n.createElement("path",{d:"M7.4 1.71h1.2c.78 0 1.4 0 1.9.05.5.04.94.12 1.34.33.65.33 1.17.85 1.5 1.5.2.4.3.83.33 1.34.04.5.04 1.12.04 1.9v4.94c0 .58 0 1.05-.03 1.41-.03.37-.1.74-.34 1.03-.32.4-.8.65-1.33.65-.37 0-.7-.17-1.01-.36-.31-.2-.68-.5-1.14-.84l-1.09-.85a2.4 2.4 0 00-.62-.43.57.57 0 00-.3 0 2.4 2.4 0 00-.62.43l-1.1.85c-.45.35-.82.64-1.13.84-.3.2-.64.36-1.01.36-.52 0-1.01-.24-1.33-.65-.24-.3-.3-.66-.34-1.03-.03-.36-.03-.83-.03-1.4V6.82c0-.78 0-1.4.04-1.9s.13-.94.33-1.34c.33-.65.85-1.17 1.5-1.5.4-.2.83-.3 1.35-.33.5-.05 1.11-.05 1.9-.05zM5.6 2.9c-.44.04-.71.1-.92.22-.43.22-.78.57-1 1-.11.2-.18.48-.21.92a24.9 24.9 0 00-.04 1.83v4.88c0 .61 0 1.03.03 1.34.03.32.08.4.1.42.1.14.26.22.44.22.02 0 .12-.01.38-.19.26-.16.6-.42 1.08-.8l1.07-.83.07-.05c.33-.26.62-.48.95-.57.3-.08.6-.08.9 0 .33.09.62.31.95.57l.07.05 1.07.84c.49.37.82.63 1.08.8.26.17.36.18.38.18.18 0 .34-.08.45-.22.01-.02.06-.1.1-.42.02-.3.02-.73.02-1.34V6.86c0-.81 0-1.39-.04-1.83-.03-.44-.1-.71-.2-.92a2.29 2.29 0 00-1-1c-.22-.11-.49-.18-.93-.22a24.9 24.9 0 00-1.83-.03H7.43c-.81 0-1.38 0-1.83.03z"})),40:n.createElement("svg",{fill:"currentColor",height:"20",width:"20",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},n.createElement("path",{d:"M9.25 2.14h1.5c.97 0 1.74 0 2.37.05a4.4 4.4 0 011.68.42c.8.41 1.46 1.07 1.88 1.87.25.5.36 1.05.41 1.69.05.62.05 1.4.05 2.37v6.18c0 .71 0 1.3-.04 1.76-.04.45-.13.92-.42 1.28-.4.51-1.01.8-1.66.81-.47 0-.89-.2-1.27-.45-.39-.25-.85-.6-1.42-1.05L10.96 16a3 3 0 00-.77-.54.71.71 0 00-.38 0 3 3 0 00-.77.54l-1.37 1.06c-.57.44-1.03.8-1.42 1.05-.38.24-.8.46-1.27.45-.65 0-1.26-.3-1.66-.8a2.36 2.36 0 01-.42-1.29c-.04-.46-.04-1.05-.04-1.76V8.54c0-.97 0-1.75.05-2.37a4.4 4.4 0 01.41-1.69A4.29 4.29 0 015.2 2.61a4.4 4.4 0 011.68-.42c.63-.05 1.4-.05 2.37-.05zM7 3.62c-.55.04-.89.13-1.15.26-.54.28-.98.71-1.25 1.25-.14.27-.22.6-.27 1.15-.04.56-.04 1.28-.04 2.3v6.1c0 .76 0 1.29.03 1.67.04.4.1.5.12.52.13.17.34.27.55.28.03 0 .16-.02.5-.23.32-.21.73-.53 1.33-1l1.34-1.04a41 41 0 00.09-.07c.4-.32.77-.6 1.19-.72.37-.1.75-.1 1.12 0 .42.12.78.4 1.2.72l.08.07 1.34 1.04c.6.47 1.01.79 1.34 1 .33.21.46.23.49.23.21 0 .42-.1.55-.27.02-.03.08-.13.12-.53.03-.38.03-.9.03-1.67v-6.1c0-1.02 0-1.74-.04-2.3a3.02 3.02 0 00-.27-1.15 2.86 2.86 0 00-1.25-1.25c-.26-.13-.6-.22-1.15-.26-.56-.05-1.27-.05-2.29-.05H9.3c-1.02 0-1.73 0-2.3.05z"})),44:n.createElement("svg",{fill:"currentColor",height:"22",width:"22",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},n.createElement("path",{d:"M10.18 2.36h1.64c1.07 0 1.92 0 2.61.05.7.06 1.3.18 1.85.46.89.45 1.61 1.17 2.06 2.06.28.55.4 1.15.46 1.85.06.7.06 1.54.06 2.61v6.8c0 .79 0 1.44-.05 1.94-.04.5-.14 1-.46 1.4-.44.57-1.12.9-1.83.9a2.6 2.6 0 01-1.4-.5c-.42-.27-.93-.67-1.56-1.15l-1.5-1.17a3.3 3.3 0 00-.85-.59.78.78 0 00-.42 0 3.3 3.3 0 00-.85.59l-1.5 1.17c-.63.48-1.14.88-1.56 1.15-.42.27-.89.5-1.4.5-.71 0-1.39-.33-1.83-.9a2.6 2.6 0 01-.46-1.4c-.05-.5-.05-1.15-.05-1.94v-6.8c0-1.07 0-1.92.06-2.6.06-.7.18-1.3.46-1.86a4.71 4.71 0 012.06-2.06c.55-.28 1.15-.4 1.85-.46.69-.05 1.54-.05 2.61-.05zM7.7 3.98c-.6.05-.98.14-1.27.3-.6.3-1.07.77-1.37 1.36-.15.3-.25.67-.3 1.27-.05.62-.05 1.4-.05 2.52v6.72c0 .84 0 1.41.04 1.84.04.43.11.55.13.57.15.19.38.3.61.3.04 0 .17-.01.54-.25.36-.23.81-.58 1.47-1.1l1.47-1.14.1-.08c.45-.35.85-.66 1.31-.79.4-.1.83-.1 1.24 0 .46.13.86.44 1.3.8l.1.07 1.48 1.14c.66.52 1.11.87 1.47 1.1.37.24.5.25.54.25.23 0 .46-.11.6-.3.03-.02.1-.14.14-.57.03-.43.04-1 .04-1.84V9.43c0-1.11 0-1.9-.06-2.52-.04-.6-.14-.97-.29-1.27-.3-.59-.78-1.07-1.37-1.37-.3-.15-.66-.24-1.27-.29-.61-.05-1.4-.05-2.51-.05H10.2c-1.1 0-1.9 0-2.51.05z"})),46:n.createElement("svg",{fill:"currentColor",height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},n.createElement("path",{d:"M11.1 2.57h1.8c1.16 0 2.1 0 2.84.06.77.07 1.42.2 2.02.5.97.5 1.76 1.28 2.25 2.25.3.6.44 1.25.5 2.02.06.75.06 1.68.06 2.85v7.4c0 .87 0 1.58-.05 2.13-.05.54-.16 1.1-.5 1.53-.49.61-1.22.97-2 .98-.56 0-1.06-.25-1.52-.55-.47-.3-1.02-.73-1.7-1.26l-1.64-1.27a3.6 3.6 0 00-.94-.64.86.86 0 00-.44 0 3.6 3.6 0 00-.94.64L9.2 20.48c-.68.53-1.23.97-1.7 1.26-.46.3-.96.55-1.52.55-.78 0-1.51-.37-2-.98-.34-.44-.45-1-.5-1.53-.05-.55-.05-1.26-.05-2.12v-7.41c0-1.17 0-2.1.06-2.85.06-.77.2-1.42.5-2.02a5.14 5.14 0 012.25-2.25c.6-.3 1.25-.43 2.02-.5.75-.06 1.68-.06 2.85-.06zM8.4 4.34c-.66.06-1.07.16-1.39.32-.64.33-1.16.85-1.5 1.5-.16.32-.26.72-.31 1.38-.06.67-.06 1.53-.06 2.75v7.32c0 .92 0 1.55.05 2.01.04.48.12.6.14.63.16.2.4.32.66.33.04 0 .19-.02.59-.28.39-.25.88-.63 1.6-1.2l1.61-1.24.1-.09c.5-.38.93-.72 1.44-.86.44-.12.9-.12 1.34 0 .5.14.94.48 1.43.86l.11.09 1.6 1.24c.73.57 1.22.95 1.61 1.2.4.26.55.28.59.28.26 0 .5-.13.66-.33.02-.03.1-.15.14-.63.05-.46.05-1.09.05-2v-7.33c0-1.22 0-2.08-.06-2.75a3.62 3.62 0 00-.32-1.38 3.43 3.43 0 00-1.5-1.5 3.62 3.62 0 00-1.38-.32c-.67-.05-1.53-.05-2.74-.05h-1.72c-1.21 0-2.07 0-2.74.05z"})),48:n.createElement(s.Icon24BookmarkOutline,null),56:n.createElement(c.Icon56BookmarkOutline,{width:36,height:36}),80:n.createElement(c.Icon56BookmarkOutline,null)}},821160:(e,t,o)=>{o.d(t,{BasicAvatar:()=>s});var n=o(296540),r=o(869859),a=o(70915),i=(o(733835),o(927824));const s=({picture:e,alt:t,content:o,size:s,color:c,className:l,onError:d,style:u})=>{const m=(0,a.useAppropriatePhotoSize)(e,s),[p,h]=(0,n.useState)(!1),f=(0,a.useFeatureFlags)(),v=()=>{h(!0),d?.()},g="contact"===c?"BasicAvatar__noImg--color-contact":`BasicAvatar__noImg--color-${Math.abs((c??0)%6)}`,_=(0,r.classNames)("BasicAvatar",`BasicAvatar--size-${s}`,l),E=(0,n.useMemo)((()=>"string"==typeof o?[...o].slice(0,2).join(""):o),[o]);return n.createElement("div",{className:_},e&&f.vkm_baseurl_avatars?n.createElement(i.ReImage,{image:e,alt:t??"",width:s,height:s,style:u}):!m||p||f.vkm_baseurl_avatars?n.createElement("div",{className:(0,r.classNames)("BasicAvatar__noImg",{[g]:void 0!==c})},E):n.createElement("img",{className:"BasicAvatar__img",alt:t,src:m,onError:v,style:u}))}},340328:(e,t,o)=>{o.d(t,{ComposerAttachPreviewMeta:()=>i});o(80875);var n=o(296540),r=o(32485),a=o.n(r);const i=({children:e,rounded:t,offsetLength:o=5,top:r,right:i,bottom:s,left:c,className:l})=>{const d=["ComposerAttachPreviewMeta",{"ComposerAttachPreviewMeta--rounded":t},l],u=o+"px",m={...r&&{top:u},...i&&{right:u},...s&&{bottom:u},...c&&{left:u},maxWidth:`calc(100% - ${2*o}px)`};return n.createElement("div",{className:a()(d),style:m},e)}},840648:(e,t,o)=>{o.d(t,{ContextMenu:()=>p});o(626235);var n=o(296540),r=o(397914),a=o(573510),i=o(32485),s=o.n(i),c=o(70915),l=o(401193),d=o(196715),u=o(587534),m=o(280240);const p=(0,n.forwardRef)((({classNames:e={},content:t,forceUpdateContent:o,canOpen:i=!0,open:p=!1,hideOnClick:f=!0,hideOnWheel:v=!0,allowNativeContextMenu:g=!1,onStartOpening:_,onOpen:E,onClose:b,children:y,position:k="bottom",align:w="left",onPositionChange:C,getToggleOpen:A,contentPreventDefault:S=!0},I)=>{const{isTouchOnly:P}=(0,u.useDeviceData)(),[x,N]=(0,n.useState)(!1),R=(0,c.usePrevious)(x),T=(0,c.usePrevious)(p),M=(0,n.useRef)(x);M.current=x;const[O,L]=(0,n.useState)(t),[D,j]=(0,n.useState)({x:-999,y:-999}),[F,U]=(0,n.useState)("closed"),B=(0,n.useContext)(m.DropdownDepthContext),V=(0,n.useCallback)((e=>{U((t=>{let o;switch(o="function"==typeof e?e(t):e,o){case"opening":case"opened":B?.setChildOpen(!0);break;case"closing":case"closed":B?.setChildOpen(!1);break;default:(0,l.exhaustivenessCheck)(o)}return o}))}),[B]),K=(0,n.useCallback)((({preventDefault:e,x:t,y:o})=>{g||e?.(),V((n=>{switch(n){case"opened":case"opening":case"closing":return"closing";case"closed":return g&&e?.(),j({x:t,y:o}),"opening";default:(0,l.exhaustivenessCheck)(n)}}))}),[g,V]);A?.(K),(0,n.useLayoutEffect)((()=>{if(!h(I))return;const e=I.current,t=e=>{K({x:e.clientX,y:e.clientY,preventDefault:e.preventDefault.bind(e)})};return e?.addEventListener("contextmenu",t),()=>{e?.removeEventListener("contextmenu",t)}}),[I,g,V,K]),(0,d.useLongTouch)(P&&h(I),h(I)?I:{current:null},(({touches:e})=>{K({x:e[0]?.clientX||0,y:e[0]?.clientY||0})}));const H=(0,n.useCallback)((()=>{V((e=>{switch(e){case"opening":case"closed":return"closed";case"opened":case"closing":return"closing";default:return(0,l.exhaustivenessCheck)(e)}}))}),[V]),G=(0,n.useCallback)((e=>{S&&e.preventDefault(),e.stopPropagation(),f&&H()}),[f,H,S]);(0,n.useLayoutEffect)((()=>{V((e=>p&&i||"closed"===e?i&&p&&"opened"!==e?"opening":e:$.current?"closing":"closed"))}),[p,i,V]);const $=(0,n.useRef)(null),W=(0,n.useCallback)((e=>e instanceof Node&&$.current?.contains(e)),[]);return(0,n.useLayoutEffect)((()=>{const e=e=>{W(e.target)||M.current||H()};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}),[g,W,F,H]),(0,n.useEffect)((()=>{"opening"===F&&_?.(),"opened"===F&&E?.(),"closed"===F&&(b?.(),N(!1))}),[F]),(0,n.useEffect)((()=>{const e=!x&&R,n=!p&&T;!o&&(["closing","opening"].includes(F)||e||n)||L(t)}),[x,t,F,R,o,p,T]),(0,n.useEffect)((()=>{if(!v||"opened"!==F)return;const e=({target:e})=>{W(e)||M.current||H()};return window.addEventListener("wheel",e,!0),()=>{window.removeEventListener("wheel",e,!0)}}),[W,F,H,v]),n.createElement(m.DropdownRootCloseContext.Provider,{value:H},n.createElement(m.DropdownDepthContext.Provider,{value:(0,n.useMemo)((()=>({setChildOpen:N})),[N])},n.createElement(r.Popper,{mode:"cursor",cursor:D,align:w,position:k,portalClassName:e.portal,open:"closed"!==F,onPositionChange:C,watchContentChange:!0,content:n.createElement(a.default,{nodeRef:$,in:"opening"===F||"opened"===F,addEndListener:e=>$.current?.addEventListener("transitionend",e,!1),mountOnEnter:!0,unmountOnExit:!0,appear:!0,classNames:"ContextMenu__contentWrapper-",onEntered:()=>V("opened"),onExited:()=>V("closed")},n.createElement("div",{ref:$,className:s()("ContextMenu__contentWrapper",e.contentWrapper),onClickCapture:e=>{x||"closing"===F&&(e.preventDefault(),e.stopPropagation())},onClick:G},O))})))}));function h(e){return!!e&&"function"!=typeof e}},94036:(e,t,o)=>{o.d(t,{ConvoAttachAudioActionsMenu:()=>c});var n=o(296540),r=o(207768),a=o(401193),i=o(70915),s=o(751500);const c=({cmid:e,goToMessage:t})=>{const{lang:o}=(0,i.useBrowserEnv)(),c=(0,n.useCallback)((o=>{switch(o){case"share":return;case"go_to_message":return void t(e);default:return(0,a.exhaustivenessCheck)(o)}}),[e,t]);return n.createElement(r.ActionsMenu,null,n.createElement(r.ActionsMenuAction,{onClick:()=>c("go_to_message"),title:o.use("me_attach_action_go_to_message"),leftIcon:n.createElement(s.Icon24MessageArrowRightOutline,null),type:"secondary"}))}},535400:(e,t,o)=>{o.d(t,{ConvoAttachDocActionsMenu:()=>c});var n=o(296540),r=o(207768),a=o(751500),i=o(70915),s=o(401193);const c=({cmid:e,id:t,goToMessage:o})=>{const{lang:c}=(0,i.useBrowserEnv)(),l=(0,n.useCallback)((t=>{switch(t){case"share":return;case"go_to_message":return void o(e);default:return(0,s.exhaustivenessCheck)(t)}}),[e,o]);return n.createElement(r.ActionsMenu,{id:t},n.createElement(r.ActionsMenuAction,{title:c.use("me_attach_action_go_to_message"),leftIcon:n.createElement(a.Icon24MessageArrowRightOutline,null),onClick:()=>l("go_to_message"),type:"secondary"}))}},24506:(e,t,o)=>{o.d(t,{ConvoAttachLinkActionsMenu:()=>s});var n=o(296540),r=o(207768),a=o(751500),i=o(70915);const s=({cmid:e,id:t,goToMessage:o})=>{const{lang:s}=(0,i.useBrowserEnv)();return n.createElement(r.ActionsMenu,{id:t},n.createElement(r.ActionsMenuAction,{title:s.use("me_attach_action_go_to_message"),leftIcon:n.createElement(a.Icon24MessageArrowRightOutline,null),onClick:()=>o(e),type:"secondary"}))}},568856:(e,t,o)=>{o.d(t,{ConvoAttachesLinks:()=>f});var n=o(296540),r=o(797110),a=o(70915),i=(o(637495),o(32485)),s=o.n(i),c=o(280240),l=o(24506),d=o(587534),u=o(840648),m=o(504328),p=o(726552),h=o(944294);const f=({items:e,goToMessage:t})=>(()=>{const o=new Set;return n.createElement("ul",{className:"ConvoAttachesLinks"},e.map(((e,r)=>{const a=`${e.cmid}_${e.attach.url}`,i=o.has(a)?`${a}_${r}`:a;return o.add(a),n.createElement(v,{key:i,item:e,goToMessage:t})})))})(),v=({item:e,goToMessage:t})=>{const{isTouchOnly:o}=(0,d.useDeviceData)(),{settings:i}=(0,a.useViewer)(),f=i.fastActionsTrigger,{isDropdownFastActionsOpened:v,isContextMenuFastActionsOpened:g,openDropdownFastActions:_,openContextMenuFastActions:E,closeDropdownFastActions:b,closeContextMenuFastActions:y}=(0,h.useFastActionsState)(),[k,w]=(0,n.useState)(null),{lang:C}=(0,a.useBrowserEnv)(),{attach:A}=e;return n.createElement("li",{ref:e=>{w(e)},className:"ConvoAttachesLinks__itemContainer"},n.createElement("div",{className:"ConvoAttachesLinks__item"},"Link"===A.kind&&n.createElement(m.AttachLink,{link:A,isOut:!1,isInBubble:!1}),"MiniApp"===A.kind&&n.createElement(p.AttachMiniApp,{miniApp:A,isOut:!1,isInBubble:!1})),"rightClick"!==f&&n.createElement(c.Dropdown,{open:v,onOpen:_,onClose:b,classNames:{wrapper:s()("ConvoAttachesLinkItem__dropdown",{"ConvoAttachesLinkItem__dropdown--open":o}),wrapperOpened:"ConvoAttachesLinkItem__dropdown--open"},content:n.createElement(l.ConvoAttachLinkActionsMenu,{id:"convo_attach_link_actions",cmid:e.cmid,goToMessage:t}),align:"center",position:"bottom",openType:o?"click":"hover"},(e=>n.createElement("button",{className:"ConvoProfileAttachments__action","aria-label":C.use("me_actions_more"),"aria-haspopup":"menu","aria-controls":"convo_attach_link_actions","aria-expanded":e},n.createElement(r.Icon20More,null),o&&n.createElement("div",{className:"ConvoProfileAttachments__actionTapArea"})))),"hover"!==f&&n.createElement(u.ContextMenu,{ref:{current:k},open:g,onOpen:E,onClose:y,allowNativeContextMenu:!0,content:n.createElement(l.ConvoAttachLinkActionsMenu,{cmid:e.cmid,goToMessage:t})}))}},81368:(e,t,o)=>{o.d(t,{ConvoAttachesPhotos:()=>E});o(341899);var n=o(296540),r=o(520828),a=o(870134),i=o(280240),s=o(12076),c=o(490639),l=o(52509),d=o(70915),u=o(401193),m=o(207768),p=o(587534),h=o(32485),f=o.n(h),v=o(840648),g=o(944294),_=o(935242);const E=({photos:e,goToMessage:t,withDateSeparator:o})=>{const r=(0,_.useNow)(),{api:a,lang:i}=(0,d.useBrowserEnv)(),[s,c]=(0,n.useState)(0),l=(0,n.useRef)(null),[m,p]=(0,n.useState)([]);(0,n.useLayoutEffect)((()=>{if(!window.IntersectionObserver)return;if(0!==s)return;if(!l.current)return;const e=new ResizeObserver((t=>{t[0]&&c(t[0].contentRect.width),0===t[0]?.contentRect.width&&e.disconnect()}));return e.observe(l.current),()=>{e.disconnect()}}),[]);const h=(0,n.useCallback)(((e,o)=>{switch(e){case"set_as_avatar":case"copy_link":case"download":case"tag_item":case"tag_service":break;case"delete":a.fetch("photos.delete",{photo_id:o.attach.id,owner_id:o.attach.ownerId}).then((()=>{p((e=>[...e,o.attach.id]))}));break;case"restore":a.fetch("photos.restore",{photo_id:o.attach.id,owner_id:o.attach.ownerId}).then((()=>{p((e=>e.filter((e=>e!==o.attach.id))))}));break;case"go_to_message":t(o.cmid);break;default:(0,u.exhaustivenessCheck)(e)}}),[t,a]);if(!o)return n.createElement("ul",{className:"ConvoAttachesPhotos"},e.map(((e,t)=>{const o=0===t,r=0!==s?y(e.attach,s):void 0;return n.createElement(b,{key:`${e.cmid}-${e.attach.id}-${t}`,isDeleted:m.includes(e.attach.id),photo:e,photoSource:r||void 0,measuredElRef:o?l:void 0,onActionClick:h})})));const f=e.reduce(((t,o,n)=>{const r=0===n,a=e[n-1];return(r||a&&!(0,u.isSameMonth)(1e3*a.date,1e3*o.date))&&t.push([]),t[t.length-1]?.push(o),t}),[]);return n.createElement(n.Fragment,null,f.map(((e,t)=>{const o=e[0]?.date||0;return n.createElement(n.Fragment,{key:t},n.createElement("div",{className:"ConvoAttachesPhotos__dateSeparator"},i.use("me_month_year_date",{now:r,date:1e3*o,genMonths:!1})),n.createElement("ul",{className:"ConvoAttachesPhotos--separated"},e.map(((e,o)=>{const r=0===t&&0===o,a=0!==s?y(e.attach,s):void 0;return n.createElement(b,{key:`${e.cmid}-${e.attach.id}-${o}`,isDeleted:m.includes(e.attach.id),photo:e,photoSource:a||void 0,measuredElRef:r?l:void 0,onActionClick:h})}))))})))},b=({photo:e,measuredElRef:t,photoSource:o,isDeleted:r,onActionClick:u})=>{const{isTouchOnly:h}=(0,p.useDeviceData)(),{lang:_}=(0,d.useBrowserEnv)(),E=(0,d.useOwner)(),{settings:b}=(0,d.useViewer)(),y=(0,n.useId)(),k=b.fastActionsTrigger,{isDropdownFastActionsOpened:w,isContextMenuFastActionsOpened:C,openDropdownFastActions:A,openContextMenuFastActions:S,closeDropdownFastActions:I,closeContextMenuFastActions:P}=(0,g.useFastActionsState)(),x=(0,n.useRef)(null),N=(0,n.useMemo)((()=>n.createElement(n.Fragment,null,n.createElement(m.ActionsMenuAction,{key:"action_go_to_message",onClick:()=>u("go_to_message",e),title:_.use("me_attach_action_go_to_message"),leftIcon:n.createElement(s.Icon20MessageArrowRightOutline,null),type:"secondary"}),e.attach.ownerId===E.id&&n.createElement(m.ActionsMenuAction,{key:"action_delete",onClick:()=>u("delete",e),title:_.use("me_attach_action_delete_photo"),leftIcon:n.createElement(c.Icon20DeleteOutline,null),type:"danger"}))),[_,e,E.id,u]),R={kind:"message",peerId:e.authorId,cmid:e.cmid};return n.createElement("li",{className:"ConvoAttachesPhotos__item",ref:t},o&&!r&&n.createElement(n.Fragment,null,n.createElement(a.Link,{ref:x,to:{kind:"AttachMediaProxyRoute",attach:e.attach,source:R},key:e.attach.id,className:"ConvoAttachesPhotos__link"},n.createElement("img",{...o,alt:"",className:"ConvoAttachPhoto__img"})),"rightClick"!==k&&n.createElement(i.Dropdown,{enableFocusTrap:!0,open:w,onOpen:A,onClose:I,classNames:{wrapper:f()("ConvoAttachPhoto__dropdown",{"DropdownReforged--opened":h})},content:n.createElement(m.ActionsMenu,{id:y,className:"ConvoActionsMenu"},N),align:"right",position:"bottom",...h?{adaptation:"horizontal"}:{},hideOnClick:!0},(e=>n.createElement("button",{className:"ConvoAttachPhoto__action","aria-haspopup":"menu","aria-controls":y,"aria-expanded":e,"aria-label":_.use("me_actions_more")},h&&n.createElement("div",{className:"ConvoAttachPhoto__actionTapArea"}),n.createElement(l.Icon24MoreHorizontal,null)))),"hover"!==k&&n.createElement(v.ContextMenu,{ref:x,open:C,onOpen:S,onClose:P,allowNativeContextMenu:!0,content:n.createElement(m.ActionsMenu,{className:"ConvoActionsMenu"},N)})),o&&r&&n.createElement("div",{className:"ConvoAttachesPhotos__restore"},n.createElement("div",{className:"ConvoAttachesPhoto__restore-button",onClick:()=>u("restore",e)},_.use("me_attach_action_restore"))))};function y(e,t){const o=r.preview(e,t,t,!1),n=r.preview(e,2*t,2*t,!1);return o||n?o&&n?{srcSet:`${o.url}, ${n.url} 2x`,src:n.url}:{src:o?o.url:n?n.url:""}:null}},179616:(e,t,o)=>{o.d(t,{ConvoAttachesVideos:()=>E});o(683027);var n=o(296540),r=o(520828),a=o(175953),i=o(401193),s=o(70915),c=o(280240),l=o(12076),d=o(797110),u=o(870134),m=o(207768),p=o(32485),h=o.n(p),f=o(586118),v=o(587534),g=o(840648),_=o(944294);const E=({videos:e,goToMessage:t})=>{const[o,a]=(0,n.useState)(0),{api:c,lang:l}=(0,s.useBrowserEnv)(),d=(0,n.useRef)(null),[u,m]=(0,n.useState)([]),{viewer:p}=(0,s.useViewer)();(0,n.useLayoutEffect)((()=>{if(!window.IntersectionObserver)return;if(0!==o)return;if(!d.current)return;const e=new ResizeObserver((t=>{t[0]&&a(t[0].contentRect.width),0===t[0]?.contentRect.width&&e.disconnect()}));return e.observe(d.current),()=>{e.disconnect()}}),[]);const h=(0,n.useCallback)(((e,o)=>{switch(e){case"go_to_message":t(o.cmid);break;case"delete_from_own":c.fetch("video.delete",{video_id:o.attach.id,owner_id:o.attach.ownerId,target_id:p.id}).then((()=>{m((e=>[...e,o.attach.id]))}));break;case"restore":c.fetch("video.restore",{video_id:o.attach.id,owner_id:o.attach.ownerId}).then((()=>{m((e=>e.filter((e=>e!==o.attach.id))))}));break;case"copy_link":case"download":case"report":case"share":case"add":case"add_to_playlist":break;default:(0,i.exhaustivenessCheck)(e)}}),[t,c,p.id]),f=Date.now();let v=null;return n.createElement("ul",{className:"ConvoAttachesVideos"},e.map(((e,t)=>{const a=0===t,i=new Date(1e3*e.date).getMonth(),s=null===v||i!==v;v=i;const c=0!==o?function(e,t){const o=r.preview(e,t),n=r.preview(e,2*t);if(!o&&!n)return null;if(!o||!n)return{src:o?o.url:n?n.url:""};return{srcSet:`${o.url}, ${n.url} 2x`,src:n.url}}(e.attach,o):void 0;return n.createElement(n.Fragment,null,s&&n.createElement("div",{className:"ConvoAttachesVideos__separator"},l.use("me_month_year_date",{now:f,date:1e3*e.date,genMonths:!1})),n.createElement(b,{key:`${e.cmid}-${e.attach.id}`,measuredElRef:a?d:void 0,isDeleted:u.includes(e.attach.id),onActionClick:h,video:e,videoSource:c||void 0}))})))},b=({video:e,videoSource:t,isDeleted:o,measuredElRef:r,onActionClick:i})=>{const{isTouchOnly:p}=(0,v.useDeviceData)(),{settings:E}=(0,s.useViewer)(),b=E.fastActionsTrigger,{isDropdownFastActionsOpened:y,isContextMenuFastActionsOpened:k,openDropdownFastActions:w,openContextMenuFastActions:C,closeDropdownFastActions:A,closeContextMenuFastActions:S}=(0,_.useFastActionsState)(),[I,P]=(0,n.useState)(null),{lang:x}=(0,s.useBrowserEnv)(),N=(0,s.usePeers)(),R=a.safeGet(N,e.authorId),T=(0,f.getDuration)(e.attach.duration,!!e.attach.files?.external)||e.attach.platform,M=(0,n.useMemo)((()=>n.createElement(m.ActionsMenuAction,{key:"action_go_to_message",onClick:()=>i("go_to_message",e),title:x.use("me_attach_action_go_to_message"),leftIcon:n.createElement(l.Icon20MessageArrowRightOutline,null),type:"secondary"})),[x,e,i]);return n.createElement("li",{ref:r},(()=>{const r=!!t&&!o,i=n.createElement(n.Fragment,null,r&&n.createElement("div",{className:"ConvoAttachesVideoItem__preview"},!!T&&n.createElement("div",{className:"ConvoAttachesVideos__previewInfo"},T),n.createElement("img",{src:t.src,srcSet:t.srcSet,alt:""})),n.createElement("div",{className:"ConvoAttachesVideoItem__content"},n.createElement("div",{className:"ConvoAttachesVideoItem__title"},e.attach.title),n.createElement("div",{className:"ConvoAttachesVideoItem__info"},n.createElement("div",{className:"ConvoAttachesVideoItem__infoSide"},n.createElement(u.Link,{to:{kind:"PeerPanel",peerId:e.authorId,screenName:a.screenName(R)},className:"ConvoAttachesVideoItem__peer"},a.name(R)),n.createElement("div",{className:"ConvoAttachesVideo__views"},x.use("me_convo_attaches_video_views",{num:e.attach.views,formatted:"short",values:{count:x.formatNumber(e.attach.views,"short")}}))),r&&"rightClick"!==b&&n.createElement(c.Dropdown,{enableFocusTrap:!0,open:y,onOpen:w,onClose:A,classNames:{wrapper:h()("ConvoAttachVideo__dropdown",{"ConvoAttachVideo__dropdown--open":p}),wrapperOpened:"ConvoAttachVideo__dropdown--open"},content:n.createElement(m.ActionsMenu,{id:"convo_attach_video_actions",className:"ConvoActionsMenu"},M),align:"center",position:"bottom",openType:p?"click":"hover"},(e=>n.createElement("button",{className:"ConvoAttachVideo__action","aria-label":x.use("me_actions_more"),"aria-haspopup":"menu","aria-controls":"convo_attach_video_actions","aria-expanded":e,onClick:e=>{e.preventDefault(),e.stopPropagation(),w()}},p&&n.createElement("div",{className:"ConvoAttachVideo__actionTapArea"}),n.createElement(d.Icon20More,null)))))),r&&"hover"!==b&&n.createElement(g.ContextMenu,{ref:{current:I},open:k,onOpen:C,onClose:S,allowNativeContextMenu:!0,content:n.createElement(m.ActionsMenu,{className:"ConvoActionsMenu"},M)}));return r?n.createElement(u.Link,{ref:e=>{P(e)},to:{kind:"AttachMediaProxyRoute",attach:e.attach},className:"ConvoAttachesVideoItem"},i):n.createElement("div",{className:"ConvoAttachesVideoItem"},i)})())}},500728:(e,t,o)=>{o.d(t,{ConvoAttachments:()=>E});o(549111);var n=o(296540),r=o(753457),a=o(972112),i=o(519636),s=o(500542),c=o(340832),l=o(70915),d=o(81368),u=o(179616),m=o(280240),p=o(535400),h=o(52509),f=o(94036),v=o(568856),g=o(32485),_=o.n(g);const E=({peerId:e,goToMessage:t,className:o})=>{const[g,E]=(0,n.useState)("photos"),{attaches:b,getNextPage:y}=(0,c.useConvoAttaches)(e),{lang:k}=(0,l.useBrowserEnv)(),w=e=>{e!==g&&(b&&!b[e]&&y(e),E(e))};(0,n.useEffect)((()=>{null===b&&y(g)}));const C=(0,n.useRef)(g);C.current=g;const A=(0,n.useRef)(y);A.current=y;const S=(0,n.useCallback)((e=>{e&&A.current(C.current)}),[]),I=(0,n.useMemo)((()=>({onChange:S,skip:b?.[g]?.isLoading})),[g,b,S]);if(!b)return null;const P=b[g],x=!P||0===P.items.length&&P.isLoading,N=!x&&P&&P.items.length>0&&!P.isAllLoaded,R=P&&!P.isLoading&&0===P.items.length;return n.createElement("div",{className:_()("ConvoAttachments",o)},n.createElement(r.Tabs,{className:"ConvoAttachments_tabs"},n.createElement(r.HorizontalScroll,{arrowSize:"m"},n.createElement(r.TabsItem,{onClick:()=>w("photos"),selected:"photos"===g},k.use("me_convo_attaches_type_photo")),n.createElement(r.TabsItem,{onClick:()=>w("videos"),selected:"videos"===g},k.use("me_convo_attaches_type_video")),n.createElement(r.TabsItem,{onClick:()=>w("audios"),selected:"audios"===g},k.use("me_convo_attaches_type_music")),n.createElement(r.TabsItem,{onClick:()=>w("docs"),selected:"docs"===g},k.use("me_convo_attaches_type_doc")),n.createElement(r.TabsItem,{onClick:()=>w("links"),selected:"links"===g},k.use("me_convo_attaches_type_links")))),b&&n.createElement("div",{className:"ConvoAttachments__block"},(()=>{if(!P?.items||0===P?.items.length)return null;switch(g){case"audios":return n.createElement("ul",{className:"ConvoAttachments__list"},P?.items.map((e=>{const o=e.attach;return"Audio"!==o.kind?null:n.createElement("li",{key:`${e.cmid}-${o.id}`},n.createElement("div",{className:"ConvoAttachments__itemContainer"},n.createElement("div",{className:"ConvoAttachments__item"},n.createElement(a.AttachAudio,{audio:o,isOut:!1,isInBubble:!1})),n.createElement(m.Dropdown,{hideOnClick:!0,content:n.createElement(f.ConvoAttachAudioActionsMenu,{cmid:e.cmid,goToMessage:t}),align:"right",position:"bottom"},n.createElement("button",{className:"ConvoAttachments__itemMenuButton"},n.createElement(h.Icon24MoreHorizontal,null)))))})));case"docs":return n.createElement("ul",{className:"ConvoAttachments__list"},P?.items.map((e=>{const o=e.attach;return"Doc"!==o.kind?null:n.createElement("li",{className:"ConvoAttachments__listItem ConvoAtachments__docItem",key:`${e.cmid}-${o.id}`},n.createElement("div",{className:"ConvoAttachments__itemContainer"},n.createElement("div",{className:"ConvoAttachments__item"},n.createElement(i.AttachDoc,{doc:o})),n.createElement(m.Dropdown,{hideOnClick:!0,content:n.createElement(p.ConvoAttachDocActionsMenu,{cmid:e.cmid,goToMessage:t}),align:"center",position:"left"},n.createElement("button",{className:"ConvoAttachments__itemMenuButton"},n.createElement(h.Icon24MoreHorizontal,null)))))})));case"links":const e=b[g];return e?n.createElement(v.ConvoAttachesLinks,{items:e.items,goToMessage:t}):null;case"photos":const o=b[g]?.items;return o?n.createElement(d.ConvoAttachesPhotos,{photos:o,goToMessage:t}):null;case"videos":const r=b[g]?.items;return r?n.createElement(u.ConvoAttachesVideos,{videos:r,goToMessage:t}):null;default:return null}})(),x&&n.createElement(r.Spinner,{size:"small",className:"ConvoAttachments__loader"}),N&&n.createElement(s.OptimizedSpinner,{size:"small",className:"ConvoAttachments__loader",intersectionOptions:I}),R&&n.createElement("div",{className:"ConvoAttachments__empty"},k.use("me_convo_attaches_empty_type"))))}},939158:(e,t,o)=>{o.d(t,{ImagesLayoutProvider:()=>a,useImagesLayout:()=>i});var n=o(296540);const r=n.createContext(void 0),a=r.Provider,i=()=>{const e=(0,n.useContext)(r);if(!e)throw Error("Все аттачи фото должны сопровождаться контекстом размеров");return e}},949100:(e,t,o)=>{o.d(t,{ConvoMessageBottomInfo:()=>f});o(489251);var n=o(296540),r=o(649166),a=o(70915),i=o(625646),s=o(430565),c=o(32485),l=o.n(c),d=o(185306),u=o(26596),m=o(562584),p=o(595328),h=o(884427);const f=({message:e,isUnread:t,className:o,dateClassName:c,showDate:f,onClick:v})=>{const{lang:g}=(0,a.useBrowserEnv)(),_=(0,a.useFeatureFlags)(),E=r.isMessageEdited(e),b=E&&n.createElement(n.Fragment,null,n.createElement(m.ConvoMessageEditedTimeTooltip,{message:e},n.createElement("span",null,_.vkm_new_read_indicator?g.use("me_message_edited_label_short"):g.use("me_message_edited_label"))),_.vkm_new_read_indicator&&f?" · ":""),y="Normal"===e.kind&&e.isImportant,k=e.attaches.wall?.views,w=_.vkm_new_read_indicator&&(0,d.getMessageOutStatusIcon)({message:e,isUnread:t,className:"ConvoMessageBottomInfo__outStatusIcon",sendingIconColor:"inherit",readIconColor:"inherit",lang:g});return f||E||w||y?n.createElement("span",{onClick:v,className:l()("ConvoMessageBottomInfo",o,{"ConvoMessageBottomInfo--clickable":v,"ConvoMessageBottomInfo--withViews":_.vkm_new_attach_post&&(e.attaches.wall||k)})},Boolean(k)&&_.vkm_new_attach_post&&n.createElement("span",{className:l()("ConvoMessageBottomInfo__views",{"ConvoMessageBottomInfo__views--out":!!w})},n.createElement(i.Icon12View,{className:"ConvoMessageBottomInfo__viewsIcon"}),g.formatNumber(k||0,"short")),n.createElement("span",{className:l()("ConvoMessageBottomInfo__date",{"ConvoMessageBottomInfo__date--out":!!w},c)},b,f&&n.createElement(u.FormattedDate,{timestamp:e.sentAt,variant:"time"})),y&&n.createElement("i",{className:"ConvoMessageBottomInfo__importantIcon",role:"img","aria-label":g.use("me_important_message_icon_alt")},n.createElement(s.Icon12Favorite,null)),w&&n.createElement(p.Tooltip,{delay:500,tooltipOffset:{x:12,y:2},position:"top",content:n.createElement(h.MessageOutStatusIconHint,{message:e}),vkuiStyle:!0,watchContentChange:!0},n.createElement("span",null,w))):null}},562584:(e,t,o)=>{o.d(t,{ConvoMessageEditedTimeTooltip:()=>c});var n=o(296540),r=o(649166),a=o(70915),i=o(595328),s=o(935242);const c=({children:e,message:t})=>{const{lang:o}=(0,a.useBrowserEnv)(),c=(0,s.useNow)();return t.updatedAt?n.createElement(i.Tooltip,{content:o.use("me_message_edited_tooltip",{values:{time:o.formatDate(t.updatedAt,{variant:"time-ago",now:c})}}),delay:1e3,position:"top",align:"center",disabled:!r.isMessageEdited(t),watchContentChange:!0},e):e}},280240:(e,t,o)=>{o.d(t,{Dropdown:()=>k,DropdownDepthContext:()=>E,DropdownRootCloseContext:()=>b});o(884667);var n=o(296540),r=o(573510),a=o(397914),i=o(32485),s=o.n(i),c=o(650408),l=o(401193),d=o(70915),u=o(587534),m=o(196715),p=o(497076),h=o(181735),f=o(133160),v=o(185044),g=o(815046),_=o(522300);const E=(0,n.createContext)(void 0),b=(0,n.createContext)(void 0),y=({children:e,hide:t})=>(0,n.useContext)(b)?n.createElement(n.Fragment,null,e):n.createElement(b.Provider,{value:t},e),k=(0,n.forwardRef)((({openType:e="hover",delay:t,hideDelay:o=150,classNames:i={},content:k,children:w,hideOnClick:C,hideOnWheel:A,hideOnMouseLeave:S,canOpen:I=!0,open:P=!1,onOpen:x,onClose:N,forceUpdateContent:R,contentPreventDefault:T=!0,disableInert:M,enableFocusTrap:O,returnFocus:L,...D},j)=>{const[F,U]=(0,n.useState)(!1),B=(0,d.usePrevious)(F),V=(0,d.usePrevious)(P),[K,H]=(0,n.useState)(k),{isTouchOnly:G}=(0,u.useDeviceData)(),$=G&&"hover"===e?"click":e,{displayState:W,$content:z,$trigger:q,isNavigating:Y,nested:J,onClick:X,onHover:Z,onKeyDown:Q,handleHide:ee,handleOpened:te,handleClosed:oe,handleContentKeyDown:ne}=function({canOpen:e,open:t,openType:o,delay:r,hideDelay:a,hideOnMouseLeave:i,childOpen:s}){const[c,d]=(0,n.useState)("closed"),u=(0,n.useRef)(null),p=(0,n.useRef)(null),f=(0,n.useContext)(E),v=Boolean(f),_=(0,n.useRef)(!1),b=(0,n.useCallback)((e=>{d((t=>{let o;switch(o="function"==typeof e?e(t):e,o){case"opening":case"opened":f?.setChildOpen(!0);break;case"closing":case"closed":f?.setChildOpen(!1);break;default:(0,l.exhaustivenessCheck)(o)}return o}))}),[f]),{hideOnHover:y,onMouseOver:k}=function({open:e,canOpen:t,delay:o,hideDelay:r,hideOnMouseLeave:a,openType:i,displayState:s,setDisplayState:c,$content:l,$trigger:d,childOpen:u,isNavigating:m}){const p=(0,n.useRef)(null),h=(0,n.useRef)(null),f=(0,n.useRef)(null),v=(0,n.useRef)(s);v.current=s;const g=(0,n.useRef)(u);g.current=u;const _=(0,n.useCallback)((()=>d.current?.matches(":hover")||l.current?.matches(":hover")),[l,d]),E=(0,n.useCallback)((e=>{e.current&&(window.clearTimeout(e.current),e.current=null)}),[]),b=(0,n.useCallback)((()=>{f.current&&(window.cancelAnimationFrame(f.current),f.current=null)}),[]),y=(0,n.useRef)(void 0===e);y.current=void 0===e;const k=(0,n.useCallback)(((e=r,t=!0)=>{if("hover"!==i&&!a)return;E(p);const o="closed"===v.current||"closing"===v.current;if(h.current||o)return;y.current=t;const n=()=>{c((e=>"opened"===e?"closing":"closed")),E(h)};e&&"opened"===v.current?h.current=window.setTimeout((()=>{_()||m.current?E(h):n()}),e):n()}),[r,i,a,E,c,_,m]);(0,n.useLayoutEffect)((()=>{p.current&&(t||E(p))}),[E,p,t]);const w=(0,n.useCallback)((()=>{if("hover"!==i||!t)return;E(h);const e="opened"===v.current||"opening"===v.current;if(p.current||e)return;y.current=!0;const n=()=>{c((e=>"closed"===e?"opening":"opened")),E(p)};o&&"closed"===v.current?p.current=window.setTimeout(n,o):n()}),[o,t,i,c,E]),C=(0,n.useCallback)((()=>{const e=()=>{_()||g.current?("closing"!==v.current||y.current)&&w():(a&&"opened"===v.current&&!m.current&&k(1500,!0),a||m.current||k())};b(),f.current=window.requestAnimationFrame(e)}),[b,_,k,a,w,m]);return(0,n.useEffect)((()=>("hover"!==i&&!a||"closed"===s||(C(),document.addEventListener("mousemove",C,{passive:!0}),document.addEventListener("wheel",C,{passive:!0})),()=>{document.removeEventListener("mousemove",C),document.removeEventListener("wheel",C)})),[a,s,C,i,b,u]),(0,n.useEffect)((()=>()=>{E(p),E(h),b()}),[]),(0,n.useEffect)((()=>{!1===e&&(document.removeEventListener("mousemove",C),document.removeEventListener("wheel",C))}),[e,C,E,b]),{onMouseOver:w,hideOnHover:k}}({open:t,canOpen:e,delay:r,hideDelay:a,hideOnMouseLeave:i,openType:o,displayState:c,setDisplayState:b,$content:u,$trigger:p,childOpen:s,isNavigating:_}),{onClick:w}=function({$content:e,$trigger:t,openType:o,setDisplayState:r,canOpen:a}){const i=(0,n.useCallback)((e=>{"click"!==o&&"contextmenu"!==o&&"longtouch"!==o||(e?.stopPropagation(),"contextmenu"===o&&e?.preventDefault(),r((e=>{switch(e){case"opening":return"closed";case"closed":return a?"opening":"closed";case"opened":case"closing":return"closing";default:return(0,l.exhaustivenessCheck)(e)}})))}),[o,r,a]);return(0,m.useLongTouch)("longtouch"===o,t,(()=>i())),(0,n.useEffect)((()=>{const t=t=>{("click"===o||"contextmenu"===o||"longtouch"===o)&&e.current&&t.target instanceof Node&&!e.current.contains(t.target)&&i()};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}}),[e]),{onClick:i}}({$content:u,$trigger:p,openType:o,setDisplayState:b,canOpen:e});(0,n.useLayoutEffect)((()=>{b((o=>t&&e||"closed"===o?e&&t&&"opened"!==o?"opening":o:u.current?"closing":"closed"))}),[t,e,b]);const C=(0,n.useCallback)((()=>{b("opened")}),[b]),A=(0,n.useCallback)((()=>{b("closed")}),[b]),S=(0,n.useCallback)(((e,t)=>{w(),y(e,t)}),[y,w]),I=(0,n.useMemo)((()=>(0,h.onElementKeyDownFactory)((e=>{p.current&&v&&e===(0,g.localizeNavigationKey)("ArrowRight",p.current)&&(_.current=!0,b("opened"))}))),[v,b]),P=(0,n.useMemo)((()=>(0,h.onElementKeyDownFactory)((e=>{u.current&&v&&e===(0,g.localizeNavigationKey)("ArrowLeft",u.current)&&(_.current=!1,b("closing"))}))),[v,b]);return{displayState:c,$content:u,$trigger:p,nested:v,isNavigating:_,onClick:w,onHover:k,onKeyDown:I,handleHide:S,handleOpened:C,handleClosed:A,handleContentKeyDown:P}}({canOpen:I,open:P,openType:$,delay:t,hideDelay:o,childOpen:F,hideOnMouseLeave:S}),re=(0,n.useContext)(b),{subscribeKeyDown:ae}=(0,p.useModuleKeyBoardHandlers)({moduleName:"Dropdown",blockGlobalHandlers:!0,handlerElementRef:z}),ie=(0,n.useCallback)(((e,t)=>{if(t.stopPropagation(),"Escape"===e)return t.preventDefault(),void ee(0,!1);ne(t)}),[ee,ne]),se="opened"===W&&!F&&("click"===$||"contextmenu"===$);(0,n.useEffect)((()=>{if(se)return ae(ie)}),[ie,ae,se]);const ce=(0,n.useCallback)((e=>{T&&e.preventDefault(),e.stopPropagation(),C&&(re?re():ee(0,!1))}),[C,T,ee,re]);(0,n.useEffect)((()=>{if(!A||"opened"!==W)return;const e=({target:e})=>{e instanceof Node&&z.current?.contains(e)||ee(0,!1)};return window.addEventListener("wheel",e,!0),()=>{window.removeEventListener("wheel",e,!0)}}),[z,W,ee,A]);const le=(0,n.useCallback)((()=>ee(0,!1)),[ee]);(0,n.useEffect)((()=>{"opened"===W&&x?.(),"closed"===W&&(Y.current=!1,N?.(),U(!1))}),[W]),(0,n.useEffect)((()=>{const e=!F&&B,t=!P&&V;!R&&(["closing","opening"].includes(W)||e||t)||H(k)}),[F,k,W,B,R,P,V]);(0,d.useDidUpdate)((()=>{O&&q.current&&"closed"===W&&V&&setTimeout((()=>{const e=(0,_.getOwnerDocument)(q.current),t=(0,_.getActiveElement)(e);if(!J&&t&&e.body!==e.activeElement||!q.current)return;const o=(0,c.getFocusableNodes)([q.current],new Map)[0]?.node;return o?L?L(o):void o.focus({preventScroll:!0}):void 0}),0)}),[W]);const de=(0,n.useCallback)((()=>{Y.current=!0}),[Y]),ue=(0,n.useCallback)(((e,t)=>{t.preventDefault()}),[]);return n.createElement("div",{className:s()("DropdownReforged",i.wrapper,{[i.wrapperOpened||"DropdownReforged--opened"]:"opened"===W,[i.wrapperClosed||"DropdownReforged--closed"]:"closed"===W})},n.createElement(E.Provider,{value:(0,n.useMemo)((()=>({setChildOpen:U})),[U])},n.createElement(y,{hide:le},n.createElement(a.Popper,{ref:e=>{q.current=e,"function"==typeof j?j(e):j&&(j.current=e)},...D,mode:"side",portalClassName:i.portal,onMouseEnter:Z,open:"closed"!==W,content:n.createElement(r.default,{nodeRef:z,in:"opening"===W||"opened"===W,addEndListener:e=>z.current?.addEventListener("transitionend",e,!1),mountOnEnter:!0,unmountOnExit:!0,appear:!0,classNames:"DropdownReforged__contentWrapper-",onEntered:te,onExited:oe},n.createElement(f.FocusTrap,{disabled:!O,returnFocus:!1},O&&!M&&!J&&"opened"===W&&n.createElement(v.OuterInert,{whitelist:"hover"===$?[q]:void 0}),n.createElement(f.FocusTrapNavigation,{ref:z,disableNavigation:!O,onlyTabbable:!1,role:"presentation",className:s()("DropdownReforged__contentWrapper",i.contentWrapper),onClickCapture:e=>{F||C&&"closing"===W&&(e.preventDefault(),e.stopPropagation())},onClick:ce,onKeyDown:se?(0,h.onElementKeyDownFactory)(ie):ne,onNavigation:de,onTabKeyPressed:ue},K)))},n.createElement("div",{className:s()("DropdownReforged__trigger",i.trigger),onMouseOver:Z,onMouseEnter:Z,onKeyDown:Q,onClick:"click"===$?X:void 0,onContextMenu:"contextmenu"===$?X:e=>{e.preventDefault()}},"function"==typeof w?w("opened"===W):w)))))}))},133160:(e,t,o)=>{o.d(t,{FocusTrap:()=>s,FocusTrapNavigation:()=>c});var n=o(296540),r=o(377833),a=o(853406);const i={preventScroll:!0},s=(0,n.forwardRef)((function(e,t){return n.createElement(r.default,{returnFocus:i,...e,ref:t})})),c=(0,n.forwardRef)((function({disableNavigation:e,dir:t,window:o,cycle:r=!0,kind:i,onlyTabbable:s,factory:c,onNavigation:l,onTabKeyPressed:d,onFocusError:u,onKeyDown:m,...p},h){const f=(0,a.useFocusTrapKeyboardNavigation)({disabled:e,dir:t,window:o,cycle:r,kind:i,onlyTabbable:s,factory:c,onNavigation:l,onTabKeyPressed:d,onFocusError:u});return n.createElement("div",{role:"presentation",...p,ref:h,onKeyDown:(...e)=>{f(...e),m?.(...e)}})}))},125272:(e,t,o)=>{o.d(t,{FormattedLangKey:()=>i});var n=o(296540),r=o(70915),a=o(401193);const i=e=>{const{lang:t}=(0,r.useBrowserEnv)(),{className:o,langkey:i,...s}=e;return t.fold(i,(e=>n.createElement(n.Fragment,null,e)),(e=>(a.isDev&&(e=e.map(((e,t)=>"string"==typeof e?n.createElement(n.Fragment,{key:t},e):n.cloneElement(e,{...e.props,key:t})))),n.createElement("span",{className:o},e))),s)}},204948:(e,t,o)=>{o.d(t,{LayerProvider:()=>a,useLayer:()=>i});var n=o(296540);o(440961);const r=(0,n.createContext)({}),a=({layer:e,children:t})=>n.createElement(r.Provider,{value:(0,n.useMemo)((()=>({layer:e})),[e])},t),i=()=>{const{layer:e}=(0,n.useContext)(r);return e||void 0}},742400:(e,t,o)=>{o.d(t,{LayoutDataProvider:()=>i,useLayoutData:()=>s});var n=o(70915),r=o(296540);const a=(0,r.createContext)(null),i=({children:e,mode:t})=>{const[o]=(0,n.useViewport)({debounced:!0}),i=o<640?"one-column":"two-column";return r.createElement(a.Provider,{value:(0,r.useMemo)((()=>({mode:t||i})),[i,t])},e)};function s(){const e=(0,r.useContext)(a);if(!e)throw new Error("LayoutDataContext не добавлен в дерево Реакта!");return e}},870134:(e,t,o)=>{o.d(t,{ExternalLink:()=>l,Link:()=>c});var n=o(296540),r=o(70915),a=o(999230),i=o(462700),s=o(522300);const c=(0,n.forwardRef)((({to:e,children:t,onNavigate:o,stopPropagation:i=!0,preventDefault:c=!0,disabled:d=!1,...u},m)=>{const p={...u,ref:m},{router:h}=(0,r.useBrowserEnv)(),{route:f,url:v}=h.fromEntity(e,a.IRouter.Action.Push),g=t=>{i&&t.stopPropagation(),(0,s.isMouseEventWithModifier)(t)||(c&&t.preventDefault(),h.push(e),o?.())};return a.IRouter.isRuntimeRoute(f)&&!d?n.createElement("span",{...p,onClick:g},t):!v||d?n.createElement("span",{...p},t):f?n.createElement("a",{...p,href:v,onClick:g},t):n.createElement(l,{...p,href:v,onClick:g},t)})),l=(0,n.forwardRef)((({children:e,href:t,target:o,disabled:a,onClick:c,stopPropagation:l=!0,...d},u)=>{const{vkDomain:m}=(0,r.useBrowserEnv)();return a?n.createElement("span",{...d,ref:u},e):n.createElement("a",{...d,ref:u,onClick:e=>{l&&e.stopPropagation(),(0,s.isMouseEventWithModifier)(e)||c?.(e)},href:d.download?t:(0,i.prepareLink)(m,t),target:o||"_blank",rel:"noopener noreferrer"},e)}))},185306:(e,t,o)=>{o.d(t,{getMessageOutStatusIcon:()=>u});o(978905);var n=o(32485),r=o.n(n),a=o(296540),i=o(604084),s=o(405858),c=o(344634),l=o(715426);const d=({message:e,isUnread:t,className:o,sendingIcon:n=a.createElement(i.Icon12ClockOutline,null),sendingIconColor:d,readIconColor:u,lang:m})=>{if(!e.isOut)return null;if("Queued"===e.kind?e.hasFailed:"failed"===e.editing?.status)return a.createElement("div",{className:r()("MessageOutStatusIcon__failed",o)},a.createElement(s.Icon12ErrorCircleFill,{"aria-hidden":!1,"aria-label":m.use("me_message_sending_failed")}));return("Queued"===e.kind?!e.cmid:"pending"===e.editing?.status)?a.createElement("div",{className:r()("MessageOutStatusIcon__sending",o),style:{color:d},role:"img","aria-label":m.use("me_message_sending")},n):a.createElement("div",{className:o,style:{color:u}},t?a.createElement(c.Icon16CheckOutline,null):a.createElement(l.Icon16CheckDoubleOutline,null))},u=({message:e,isUnread:t,className:o,sendingIcon:n,sendingIconColor:r,readIconColor:i,lang:s})=>e.isOut&&"Expired"!==e.kind&&"Service"!==e.kind?a.createElement(d,{message:e,isUnread:t,className:o,sendingIcon:n,sendingIconColor:r,readIconColor:i,lang:s}):null},884427:(e,t,o)=>{o.d(t,{MessageOutStatusIconHint:()=>s});var n=o(296540),r=o(344634),a=o(715426),i=o(125272);o(796698);const s=({message:e})=>{let t;switch(!0){case"Queued"===e.kind&&e.hasFailed:t="me_message_send_failed_tooltip";break;case"Normal"===e.kind&&"failed"===e.editing?.status:t="me_message_edit_failed_tooltip";break;case"Queued"===e.kind&&!e.cmid:case"Normal"===e.kind&&"pending"===e.editing?.status:t="me_message_queued_tooltip";break;default:t="me_message_read_status_tooltip"}return n.createElement(i.FormattedLangKey,{langkey:t,values:{unreadIcon:n.createElement(r.Icon16CheckOutline,{className:"MessageOutStatusIconHint__icon"}),readIcon:n.createElement(a.Icon16CheckDoubleOutline,{className:"MessageOutStatusIconHint__icon"})}})}},174728:(e,t,o)=>{o.d(t,{ModalBackdrop:()=>s});o(182347);var n=o(296540),r=o(32485),a=o.n(r),i=o(174772);const s=({isClear:e,isBodyScrollDisabled:t,onClick:o,children:r,className:s})=>{const c=a()("RE_ModalBackdrop",{"RE_ModalBackdrop--tinted":!e}),{isFullScreen:l}=(0,n.useContext)(i.ModalConfigContext),d=a()(s,"RE_ModalBackdrop__container",l?"RE_ModalBackdrop__container--fullScreen":"RE_ModalBackdrop__container--window");var u;return u=Boolean(t),(0,n.useEffect)((()=>{const e=document.body;if(!u)return;const t=e.getBoundingClientRect(),o=window.innerWidth-(t.left+t.right);if(0===o)return;const n=document.createElement("style");return n.innerText="body { overflow-y: hidden !important; }",e.appendChild(n),e.style.borderRight=`${o}px solid transparent`,()=>{e.style.borderRight="",e.removeChild(n)}}),[u]),n.createElement("div",{className:c},o&&n.createElement("div",{className:"RE_ModalBackdrop__flesh",onClick:o}),n.createElement("div",{className:d},r))}},419108:(e,t,o)=>{o.d(t,{ModalBody:()=>c});var n=o(596934),r=(o(470287),o(296540)),a=o(32485),i=o.n(a),s=o(174772);const c=({children:e,withCustomLayout:t,withScrollHandling:o,scrollbarProps:a,isDark:c})=>{const{isFullScreen:l}=(0,r.useContext)(s.ModalConfigContext),d=i()("RE_ModalBody",{"RE_ModalBody--fullScreen":l,"RE_ModalBody--dark":c});return o?r.createElement(n.ScrollbarProvider,{className:d,scrollableProps:{className:i()({"RE_ModalBody--standard":!t}),...a?.scrollableProps},contentProps:{className:"RE_ModalBody__scrollbar-content",...a?.contentProps}},e):r.createElement("div",{className:i()(d,{"RE_ModalBody--standard":!t})},e)}},570936:(e,t,o)=>{o.d(t,{ModalCloseButton:()=>l});var n=o(670191),r=o(32485),a=o.n(r),i=(o(11699),o(296540)),s=o(174772),c=o(753457);const l=e=>{const{closeLabel:t,mode:o,onClose:r}=e,{isFullScreen:l}=(0,i.useContext)(s.ModalConfigContext),d="dark"===(0,c.useAppearance)();return i.createElement("button",{className:a()("ModalCloseButton",!l&&"ModalCloseButton--outside",d&&"ModalCloseButton--dark","modalHeader"===o&&"ModalCloseButton--modalHeaderMode","modalPanel"===o&&"ModalCloseButton--modalPanelMode"),"aria-label":t,onClick:r},i.createElement(n.Icon24Cancel,null))}},174772:(e,t,o)=>{o.d(t,{ModalConfigContext:()=>a,ModalsConfigProvider:()=>i});var n=o(296540),r=o(742400);const a=(0,n.createContext)({isFullScreen:!1}),i=({children:e})=>{const t=(0,r.useLayoutData)(),o=(0,n.useMemo)((()=>({isFullScreen:"one-column"===t.mode})),[t.mode]);return n.createElement(a.Provider,{value:o},e)}},826520:(e,t,o)=>{o.d(t,{ModalFooter:()=>r});o(176115);var n=o(296540);const r=({buttons:e,hint:t,children:o})=>n.createElement("footer",{className:"RE_ModalFooter"},t&&n.createElement("div",{className:"RE_ModalFooter__hint"},t),o&&n.createElement("div",{className:"RE_ModalFooter__content"},o),e&&n.createElement("div",{className:"RE_ModalFooter__actions"},e))},768836:(e,t,o)=>{o.d(t,{ModalHeader:()=>c});o(729983);var n=o(296540),r=o(680277),a=o(570936),i=o(32485),s=o.n(i);const c=({onClose:e,closeLabel:t,backLabel:o,onBack:i,title:c,children:l,className:d,titleId:u})=>n.createElement("header",{className:s()("RE_ModalHeader",d)},n.createElement("div",{className:"RE_ModalHeader__content"},o&&i&&n.createElement("button",{className:"RE_ModalHeader__back",onClick:i},n.createElement("span",{className:"RE_ModalHeader__backIcon"},n.createElement(r.Icon28ChevronLeftOutline,null)),o),c&&n.createElement("h2",{className:"RE_ModalHeader__title",id:u},c),l&&n.createElement("div",{className:"RE_ModalHeader__container"},l)),n.createElement(a.ModalCloseButton,{closeLabel:t,onClose:e,mode:"modalHeader"}))},483620:(e,t,o)=>{o.d(t,{ModalPanel:()=>s});o(99579);var n=o(296540),r=o(32485),a=o.n(r),i=o(174772);const s=({children:e,className:t,topRight:o,size:r,ariaLabelledby:s})=>{const{isFullScreen:c}=(0,n.useContext)(i.ModalConfigContext),l=a()("RE_ModalPanel",t,{"RE_ModalPanel--fullScreen":c});return n.createElement("article",{className:l,style:r?{width:r.width,height:r.height}:{},role:"dialog","aria-modal":!0,"aria-labelledby":s},e,o&&n.createElement("div",{className:"RE_ModalPanel__TopRight"},o))}},306684:(e,t,o)=>{o.d(t,{ModalView:()=>d});o(819719);var n=o(296540),r=o(32485),a=o.n(r),i=o(149982),s=o(204948),c=o(497076),l=o(181735);const d=({children:e,isHidden:t,onEscape:o,contextClass:r,portalTarget:d})=>{const u=(0,s.useLayer)(),m=a()("RE_ModalView",{"RE_ModalView--hidden":Boolean(t)}),[p,h]=(0,n.useState)(null),{subscribeKeyDown:f,focusHandlerElement:v}=(0,c.useModuleKeyBoardHandlers)({moduleName:"Modal",blockGlobalHandlers:!0,handlerElement:p}),g=(0,n.useCallback)(((e,t)=>{t.stopPropagation(),"Escape"===e&&(t.preventDefault(),o?.())}),[o]);return(0,n.useEffect)((()=>{if(!t)return f(g)}),[t,g,f]),(0,n.useEffect)((()=>{!t&&p&&v()}),[p,t]),n.createElement(i.Portal,{portalClassName:r,portalTarget:d||u},n.createElement("div",{tabIndex:-1,onKeyDown:(0,l.onElementKeyDownFactory)(g),ref:h,"data-no-focus-lock":"true",className:m},e))}},410290:(e,t,o)=>{o.d(t,{ModalsProvider:()=>s,useModalContext:()=>c});var n=o(296540),r=o(401193),a=o(679005);const i=(0,n.createContext)(null),s=({children:e,stacks:t})=>{const o=(0,n.useCallback)((e=>{let o=!0;if(Object.values(t).forEach((t=>{const n=t.currentElement;let r=0;if(n?.groupId===e){for(o=!1;t.currentElement?.groupId===e;)r+=1,t.goBack();t.pop(r)}})),o)throw Error("Пытаетесь закрыть группу модалок, которая закрыта")}),[t]),s=(0,n.useCallback)((({modalId:e,groupId:o,isSubModal:n},r)=>{const a=t[r];if(null!==a.findIndex(e))throw new Error("Пытаетесь открыть модалку, которая открыта");a.push({modalId:e,groupId:o,isSubModal:n})}),[t]),c=(0,n.useCallback)(((e,o)=>{const n=t[o],r=n.currentElement;r?.modalId===e&&n.pop()}),[t]),l=(0,n.useCallback)(((e,o)=>{t[o].forcedRemove((t=>t.modalId===e))}),[t]),d=(0,n.useCallback)(((e,o)=>t[o].findIndex(e)),[t]),[u,m]=(0,n.useState)({rightPanel:[],popup:[]});(0,n.useLayoutEffect)((()=>{const e=Object.keys(t).map((e=>t[e].subscribe((t=>{const{action:o,payload:n}=t;switch(o){case"add":m((0,a.produce)((o=>{o[e]=t.payload.isSubModal?o[e].filter((({modalId:e})=>e!==n.modalId)):[],o[e].push(n)})));break;case"remove":m((0,a.produce)((t=>{const o=t[e].filter((({modalId:e})=>!n.find((t=>e===t.modalId))));o.length<t[e].length&&(t[e]=o)})));break;default:(0,r.exhaustivenessCheck)(o)}}))));return()=>e.forEach((e=>e()))}),[t]);const p=(0,n.useCallback)((e=>t[e].size),[t]),h=(0,n.useMemo)((()=>({openedModals:u,openModal:s,closeModal:c,closeModalForced:l,closeGroup:o,getStackSize:p,findIndexInStack:d})),[u,s,c,l,o,p,d]);return n.createElement(i.Provider,{value:h},e)};function c(){const e=(0,n.useContext)(i);if(!e)throw new Error("ModalContext не добавлен в дерево Реакта!");return e}},500542:(e,t,o)=>{o.d(t,{OptimizedSpinner:()=>c});o(309985);var n=o(296540),r=o(32485),a=o.n(r),i=o(753457),s=o(140094);const c=({className:e,size:t="small",intersectionOptions:o,onIntersection:r})=>{const{ref:c,inView:l}=(0,s.useInView)({...o,threshold:.01});return(0,n.useEffect)((()=>{l&&r&&r()}),[l]),n.createElement("div",{ref:c,className:a()("OptimizedSpinner",e)},l&&n.createElement(i.Spinner,{size:t}))}},185044:(e,t,o)=>{o.d(t,{OuterInert:()=>c});o(171291);var n=o(296540),r=o(32485),a=o.n(r),i=o(123693),s=o(204948);const c=({whitelist:e,onActivation:t,onDeactivation:o,className:r,style:c,children:l,...d})=>{const u=(0,n.useRef)(null),m=(0,s.useLayer)(),{apply:p,remove:h}=(0,i.useInertAttr)(d);return(0,n.useEffect)((()=>{const n=Array.isArray(e)?[...e]:[];return n.push(m||u),p(n),t?.(),()=>{h(),o?.()}}),[]),m?n.createElement(n.Fragment,null,l):n.createElement("div",{ref:u,role:"presentation",className:a()("OuterInert",r),style:c},l)}},482288:(e,t,o)=>{o.d(t,{PeerAvatar:()=>c});var n=o(296540),r=o(175953),a=o(821160),i=o(70915),s=o(529672);const c=n.memo((function({peer:e,size:t,className:o,withFavorite:c}){const l=(0,i.useOwner)(),d=r.isFavorites(e.id,l.id);return c&&d?n.createElement(s.AvatarFavorites,{size:t}):n.createElement(a.BasicAvatar,{size:t,picture:e.photo,alt:r.name(e),content:r.initials(e),color:r.isContactPeerId(e.id)?"contact":e.id,className:o})}))},408664:(e,t,o)=>{o.d(t,{PeerTitle:()=>h});o(414683);var n=o(296540),r=o(793103),a=o(204733),i=o(430565),s=o(688041),c=o(175953),l=o(32485),d=o.n(l),u=o(70915),m=o(843779),p=o(517848);const h=n.memo((function({peer:e,isShortened:t=!1,isAdmin:o=!1,isCreator:l=!1,isFavorites:h=!1,isRestrictedToWrite:f=!1,isClassic:v=!1,className:g,iconColor:_}){const{vkm_convo_member_temporary_ban:E}=(0,u.useFeatureFlags)(),{lang:b}=(0,u.useBrowserEnv)(),y=(0,u.useViewer)(),k=m.isEdu(y.profileType);let w;switch(!0){case h:w=b.use("me_favorites");break;case t:w=c.firstName(e);break;case v:w=c.classicName(e);break;default:w=c.name(e)}return n.createElement("div",{className:d()("PeerTitle",{"PeerTitle--vkAdmin":c.isVkAdministration(e.id)},g)},n.createElement("h3",{className:"PeerTitle__title"},w),n.createElement(p.StatusIcon,{"aria-hidden":!0,peer:e,size:14,className:"PeerTitle__icon"}),"Chat"!==e.kind&&"Contact"!==e.kind&&e.isVerified?n.createElement("span",{className:"PeerTitle__icon PeerTitle__verifiedIcon",style:{color:_}},k&&"User"===e.kind?n.createElement(r.Icon16Education,{width:12,height:12}):n.createElement(a.Icon16Verified,null)):null,(o||l)&&n.createElement("span",{className:d()("PeerTitle__icon",o&&"PeerTitle__adminIcon",l&&"PeerTitle__creatorIcon")},n.createElement(i.Icon12Favorite,{"aria-hidden":!1,"aria-label":b.use(l?"me_aria_creator":"me_aria_admin")})),E&&f&&n.createElement("span",{"aria-label":b.use("me_aria_member_temporary_ban"),className:"PeerTitle__icon PeerTitle__cantWriteIcon"},n.createElement(s.Icon16MessageCross,null)))}))},743464:(e,t,o)=>{o.d(t,{PhotoItem:()=>c});var n=o(296540),r=o(869859),a=o(876382),i=(o(625019),o(661757)),s=o(753457);const c=({src:e,thumbhashUrl:t,alt:o,width:c,height:l,cover:d,showReload:u=!1,className:m,widthAndHeightAsAttr:p,onLoad:h,onError:f,withLoader:v})=>{const g=d?{width:c,height:l}:void 0,[_,E]=(0,n.useState)(1),[b,y]=(0,n.useState)((()=>!!e&&(0,i.isImageLoaded)(e)));(0,n.useEffect)((()=>{y(!!e&&(0,i.isImageLoaded)(e))}),[e]),(0,n.useEffect)((()=>{b&&h?.()}),[b]);const[k,w]=(0,n.useState)(!1),C=(0,n.useCallback)((e=>{k&&u&&(e.preventDefault(),e.stopPropagation(),E((e=>e+1)))}),[k,u]),A=(0,n.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),E((e=>e+1))}),[]);return n.createElement("div",{className:(0,r.classNames)("PhotoItem",m),style:{width:c,height:l},onClick:C},n.createElement("div",{className:(0,r.classNames)("PhotoItem__blur",{PhotoItem__nothumbhash:!t}),style:{"--thumbhashUrl":t&&`url(${t})`}}),n.createElement("img",{key:_,src:e,alt:o,width:p?c:void 0,height:p?l:void 0,className:(0,r.classNames)("PhotoItem__img",{"PhotoItem__img--loaded":b||!t&&!k}),style:g,onLoad:()=>{y(!0),w(!1)},onError:()=>{w(!0),f?.()}}),v&&!b&&!k&&n.createElement("div",{className:"PhotoItem__spinner"},n.createElement(s.Spinner,{className:"PhotoItem__spinnerIcon"})),k&&n.createElement("div",{className:"PhotoItem__error"},u&&n.createElement("button",{type:"button",className:"PhotoItem__reload",onClick:A},n.createElement(a.Icon24DownloadOutline,{className:"PhotoItem__reloadIcon"}))))}},861218:(e,t,o)=>{o.d(t,{ChannelAudiosPlaylistProvider:()=>c,CommentsAudiosPlaylistProvider:()=>l,ConvoAudiosPlaylistContext:()=>i,ConvoAudiosPlaylistProvider:()=>s});var n=o(296540),r=o(37942),a=o(70915);const i=n.createContext((()=>{})),s=({convo:e,children:t})=>{const o=(0,n.useRef)(e),s=(0,a.usePixelDensity)();o.current=e;const c=(0,n.useCallback)((()=>{const e=(0,r.mapConvoToConvoAudioTrackList)(o.current,s),t={type:"temp",source:{kind:"message",peerId:o.current.peerId}};return new r.ConvoAudiosPlaylist({list:e,meta:t})}),[s]);return n.createElement(i.Provider,{value:c},t)},c=({channel:e,children:t})=>{const o=(0,n.useRef)(e),s=(0,a.usePixelDensity)();o.current=e;const c=(0,n.useCallback)((()=>{const e=(0,r.mapChannelToConvoAudioTrackList)(o.current,s),t={type:"temp",source:{kind:"channel",channelId:o.current.id}};return new r.ConvoAudiosPlaylist({list:e,meta:t})}),[s]);return n.createElement(i.Provider,{value:c},t)},l=({post:e,children:t})=>{const o=(0,n.useRef)(e),s=(0,a.usePixelDensity)();o.current=e;const c=(0,n.useCallback)((()=>{const e=(0,r.mapPostCommentsToConvoAudioTrackList)(o.current,s),t={type:"temp",source:{kind:"channel",channelId:o.current.channelId}};return new r.ConvoAudiosPlaylist({list:e,meta:t})}),[s]);return n.createElement(i.Provider,{value:c},t)}},397914:(e,t,o)=>{o.d(t,{Popper:()=>u});o(12005);var n=o(296540),r=o(32485),a=o.n(r),i=o(149982),s=o(70915),c=o(522300),l=o(204948),d=o(418730);const u=(0,n.forwardRef)((function({open:e=!0,position:t="auto",mode:o="side",align:r="auto",adaptation:u,content:_,portalClassName:b,children:y,portalTarget:k,cursor:w,watchContentChange:C=!1,onPositionChange:A,onAlignTypeChange:S,onPositionTypeChange:I,onContentChange:P,pointerEvents:x=!0,...N},R){const T=(0,l.useLayer)(),[M,O]=(0,n.useState)(null),L=(0,n.useRef)(null),D=(0,s.useCombinedRefs)(R,L),[j,F]=(0,n.useState)(null),[U,B]=(0,n.useState)(null),[V,K]=(0,n.useState)(null),{observe:H}=(0,d.useResizeObserver)(),G=(0,n.useCallback)(((n=!1)=>{if(e){if("side"===o&&L.current&&(0!==(a=L.current).offsetWidth||0!==a.offsetHeight)){const[e,o,a]=function(e,t,o,n,r,a,i){let s="fixed",l=e.getBoundingClientRect(),{innerWidth:d,innerHeight:u}=window,_=window.scrollY||document.documentElement.scrollTop,E=window.scrollX||document.documentElement.scrollLeft;a&&(l=(0,c.getOffsetRect)(e,a),d=a.clientWidth,u=a.clientHeight,_=a.scrollTop,E=a.scrollLeft,s="absolute");const b=t?.getBoundingClientRect(),y=b?.width||0,k=b?.height||0,w=y&&!i?Math.max(l.width,y):void 0,C=k&&!i?Math.max(l.height,k):void 0;if(o===m){o=f(l.top-_,_+u-l.top-l.height)}if(n===m){n=v(E+d/3,l.left+.5*l.width,E+2*d/3)}const A=c.browser.safari_mobile&&window.visualViewport?.pageTop||0,S=l.left,I=l.top+A,P=S+l.width,x=I+l.height,N=.5*l.width,R=.5*y,T=.5*l.height,M=.5*k,O=l.width<y,L=l.height<k,D=I<k,j=x+k>u+_,F=a&&I-_<k,U=x<k,B=I+T<M,V=I+k>u+_,K=I+T+M>u+_,H=S-l.width<y,G=S+y>d+E,$=P-l.width<y,W=P+y>d+E,z=S+N<R,q=S+N+R>d+E,Y="horizontal"===r,J="vertical"===r;J||(("top"===o&&D||"center"===n&&B||h.includes(n)&&U)&&(o="bottom"),("bottom"===o&&j||"center"===n&&K||h.includes(n)&&V)&&(o="top"));Y||(p.includes(o)&&(h.includes(n)&&(H&&(n="left"),G&&(n="right")),"center"===n&&(q&&(n="right"),z&&(n="left"))),h.includes(o)&&(p.includes(n)&&(U&&(n="bottom"),V&&(n="top")),$&&(o="right",n="right"===n?"left":n),W&&(o="left",n="left"===n?"right":n)));let X={};switch(o){case"top":X={width:w,top:I-k};break;case"bottom":X={width:w,top:x};break;case"left":X={height:C,left:S-y};break;case"right":X={height:C,left:P}}p.includes(o)&&O&&("right"===n&&(X.left=P-y),"center"===n&&(X.left=S+N-R),Y&&(("center"===n&&z||"right"===n&&$)&&(X.left=0),("center"===n&&q||"left"===n&&W)&&(X.left=d-y+E)));if(h.includes(o)&&L){switch(n){case"center":X.top=I+T-M;break;case"top":X.top=I-k+l.height}J&&(("center"===n&&B||h.includes(n)&&U)&&(X.top=0),F&&"center"===n&&(X.top=_),("center"===n&&K||h.includes(n)&&V)&&(X.top=u-k+_))}return[g({top:I,left:S,...X,position:s}),n,o]}(L.current,M,t,r,u,k?.current||void 0,n);A?.({left:e.left,top:e.top}),S?.(o),I?.(a),F(e),B(o),K(a)}var a;if("cursor"===o&&w){const[e,o,n]=function(e,t,o,n){const{innerWidth:r,innerHeight:a}=window,{x:i,y:s}=e,c=t?.getBoundingClientRect(),l=c?.width||0,d=c?.height||0,u=l||void 0,p=d||void 0;if(o===m){o=f(s,a-s)}if(n===m){n=v(i,i,r-i)}const _=s<d,b=a-s<d,y=s<d/2,k=a-s<d/2,w=i<l,C=r-i<l;("top"===o&&_||"center"===n&&y)&&(o="bottom");("bottom"===o&&b||"center"===n&&k)&&(o="top");h.includes(n)&&(w&&C?n="auto":w?n="left":C&&(n="right"));const A={};switch(o){case"top":A.top=s-d;break;case"bottom":A.top=s}switch(n){case"auto":{const[e,t]=function(e,t){const{innerWidth:o}=window;let n=e,r="right";if(e<o/2){const a=e+t;a>o&&(n=e-(a-o)),r="left"}const a=e-t;a<0&&(n=-a);return[E(n,t,o),r]}(i,l);A.left=e,n=t;break}case"left":A.left=E(i,l,r);break;case"right":A.left=E(i-l,l,r)}return[g({position:"fixed",left:i,top:s,height:p,width:u,...A}),n,o]}(w,M,t,r);A?.({left:e.left,top:e.top}),S?.(o),I?.(n),F(e),B(o),K(n)}}}),[e,o,L,w,M,t,r,u,k,A,S,I]);return(0,n.useLayoutEffect)((()=>{G(),P?.(M);const e=Array.from(M?.children||[])?.[0];if(!e||!C)return;return H(e,(e=>{e.borderBoxSize[0]&&G(!0)}))}),[M,M?.children,H,G,C,P]),n.createElement(n.Fragment,null,"cursor"!==o&&y&&n.cloneElement(y,{...y.props,ref:D}),e&&n.createElement(i.Portal,{...N,ref:O,className:a()("MEPopper","MEConfig",U&&`MEPopper--align${$=U,$.length>0?$.slice(0,1).toUpperCase()+$.slice(1):""}`,V&&`MEPopper--${V}`,!x&&"MEPopper--noPointerEvents"),"data-align":U,"data-position":V,portalClassName:b,style:j||void 0,portalTarget:k?.current||T},_));var $})),m="auto",p=["top","bottom"],h=["left","right"];function f(e,t){return t>e?"bottom":"top"}function v(e,t,o){return t>=e&&t<=o?"center":t>o?"right":"left"}function g(e){return{...e,top:Math.round(e.top),left:Math.round(e.left)}}const _=24;function E(e,t,o){if(e<_)return _;const n=o-_;return e>n?n-t:e}},149982:(e,t,o)=>{o.d(t,{Portal:()=>i});var n=o(296540),r=o(440961),a=o(70915);const i=(0,n.forwardRef)((function({children:e,portalClassName:t,portalTarget:o,...i},s){const[c,l]=(0,n.useState)(null),d=(0,a.usePrevious)(t);return(0,n.useEffect)((()=>{c&&(d&&c.classList.remove(...d.split(" ")),t&&c.classList.add(...t.split(" ")))}),[c,t,d]),(0,n.useLayoutEffect)((()=>{if(null===o)return;const e=function(e,t){const o=document.createElement("div");e&&o.classList.add(...e.split(" "));return(t||document.body).appendChild(o)}(t,o);return l(e),()=>{e.remove()}}),[o]),c?r.createPortal(n.createElement("div",{...i,ref:s},e),c):null}))},866456:(e,t,o)=>{o.d(t,{ProgressCircle:()=>s});o(863251);var n=o(296540),r=o(32485),a=o.n(r),i=o(70915);const s=({size:e,progress:t,strokeWidth:o=2,strokeColor:r="white",strokeOverlayColor:s,className:c,ariaLabel:l})=>{const{lang:d}=(0,i.useBrowserEnv)(),u=(e-o)/2,m=`0 0 ${e} ${e}`,p=u*Math.PI*2,h=p-p*t/100;return n.createElement("div",{role:"progressbar",className:a()("ProgressCircle",c),style:{width:e,height:e},"aria-label":l??d.use("me_progress_circle_default_aria_label"),"aria-valuenow":Math.floor(t)},n.createElement("svg",{width:e,height:e,viewBox:m},s&&n.createElement("circle",{className:"ProgressCircle__progressOverlay",cx:e/2,cy:e/2,r:u,stroke:s,strokeWidth:`${o}px`}),n.createElement("circle",{className:"ProgressCircle__progress",cx:e/2,cy:e/2,r:u,stroke:r,strokeWidth:`${o}px`,transform:`rotate(-90 ${e/2} ${e/2})`,style:{strokeDasharray:p,strokeDashoffset:h}})))}},269396:(e,t,o)=>{o.d(t,{Provider:()=>v});var n=o(296540),r=o(175953),a=o(70915),i=o(410290),s=o(45056),c=o(82839),l=o(193496),d=o(155912),u=o(171355),m=o(911262),p=o(459154),h=o(935242),f=o(606312);const v=({children:e,env:t,featureFlags:o,state:v,dispatch:g,owner:_})=>{const E=(0,n.useCallback)((e=>{g({type:"CacheUpdateReceived",...e})}),[g]),b=r.safeGet(v.peers,v.viewer.id),y=(0,n.useMemo)((()=>({viewer:b,...v.viewer})),[b,v.viewer]),k=(0,n.useMemo)((()=>({popup:t.modals.stack,rightPanel:new l.Stack})),[t.modals.stack]),w=(0,n.useMemo)((()=>({styles:v.themeStyles,appearances:v.themeAppearances,backgrounds:v.themeBackgrounds})),[v.themeAppearances,v.themeBackgrounds,v.themeStyles]),C=(0,m.useStickerEmojiMenuPopper)();return n.createElement(a.BrowserEnvProvider,{value:t},n.createElement(s.RouterProvider,null,n.createElement(i.ModalsProvider,{stacks:k},n.createElement(a.DispatchProvider,{value:g},n.createElement(a.FeatureFlagsProvider,{value:o},n.createElement(a.HelpHintsProvider,{value:v.helpHints},n.createElement(a.LastSeenProvider,{value:v.lastSeens},n.createElement(a.TypingsProvider,{value:v.typings},n.createElement(a.PeersProvider,{value:v.peers},n.createElement(a.OwnerProvider,{value:_},n.createElement(d.StickersApiProvider,null,n.createElement(p.StickersConfigProvider,{forceStickersReload:v.forceStickersReload},n.createElement(u.StickerEmojiMenuProvider,{value:C},n.createElement(f.StickersPopupAnimationContextProvider,null,n.createElement(a.ConvosProvider,{value:v.convos},n.createElement(a.ChannelsProvider,{value:v.channels},n.createElement(a.VideoConvosProvider,{value:v.videoConvos},n.createElement(a.TribunesProvider,{value:v.spacesTribunes},n.createElement(a.SpaceCallsProvider,{value:v.spacesCalls},n.createElement(a.OrganisersProvider,{value:v.organisers},n.createElement(a.ConvosSearchIndexProvider,{value:v.convosSearchIndex},n.createElement(a.ViewerProvider,{value:y},n.createElement(a.InsertIntoCacheProvider,{value:E},n.createElement(c.ComposerDraftsProvider,{value:v.composerDrafts},n.createElement(c.ChannelComposerDraftsProvider,{value:v.channelComposerDrafts},n.createElement(c.CommentsComposerDraftsProvider,{value:v.commentsComposerDrafts},n.createElement(a.VideoMessageShapesProvider,{value:v.videoMessageShapes},n.createElement(a.ThemeStylesContextProvider,{value:w},n.createElement(h.NowContextProvider,null,n.createElement(a.DeviceIdProvider,{value:v.deviceId},e))))))))))))))))))))))))))))))}},927824:(e,t,o)=>{o.d(t,{ReImage:()=>c});o(604179);var n=o(296540),r=o(32485),a=o.n(r),i=o(661757),s=o(70915);const c=({image:e,alt:t,width:o,height:r,className:c,style:l,retries:d=5})=>{const u=(0,s.useUrlFromBaseUrl)(e,r,o),[m,p]=(0,n.useState)((()=>!!u&&(0,i.isImageLoaded)(u))),[h,f]=(0,n.useState)(0),v=(0,n.useRef)();(0,n.useEffect)((()=>()=>{v.current&&clearTimeout(v.current)}),[]);return n.createElement("div",{className:a()("ReImage",c),style:{"--thumbhashUrl":e.thumbhashUrl&&`url(${e.thumbhashUrl})`,height:r,width:o,...l}},n.createElement("div",{className:"ReImage__blur"}),n.createElement("img",{key:h,className:a()("ReImage__img",{"ReImage__img--loaded":m}),src:u,alt:t,onLoad:()=>p(!0),onError:()=>{if(h>=d)return;const e=Math.min(1e4,2**h*1e3);v.current=window.setTimeout((()=>{v.current=void 0,f((e=>e+1))}),e)}}))}},45056:(e,t,o)=>{o.d(t,{RouterProvider:()=>i,useConvoRoute:()=>c,useRouter:()=>s});var n=o(70915),r=o(296540);const a=(0,r.createContext)({}),i=({children:e})=>{const{router:t}=(0,n.useBrowserEnv)(),[o,i]=(0,r.useState)(t.screenRoute);(0,r.useLayoutEffect)((()=>{const e=t.subscribe((e=>i(e)));return()=>e()}),[t]);const s=(0,r.useMemo)((()=>({router:t,screenRoute:o,runtimeRoute:t.runtimeRoute})),[t,o]);return r.createElement(a.Provider,{value:s},e)},s=()=>{const{router:e,screenRoute:t,runtimeRoute:o}=(0,r.useContext)(a);return{router:e,screenRoute:t,runtimeRoute:o,modal:t.modal?.slice(-1).pop()||null,rightPanel:t.rp?.slice(-1).pop()||null,navigate:e.push,back:e.back,forward:e.forward,replace:e.replace}},c=()=>{const{screenRoute:e}=s();if("ConvoRoute"!==e.kind)throw Error("Используйте хук только внутри роута Convo");return e}},98536:(e,t,o)=>{o.d(t,{Snackbar:()=>l});o(567815);var n=o(296540),r=o(32485),a=o.n(r),i=o(587534),s=o(753457),c=o(539267);const l=(0,n.memo)((({message:e,layout:t="horizontal",action:o,before:r,after:l,duration:d=4e3,onActionClick:u,onClose:m,mode:p="default",className:h,stopOnHover:f=!0,isManuallyClosable:v=!1,autoClose:g=!0,requestClose:_=!1,onRequestRemove:E})=>{const{isTouchOnly:b}=(0,i.useDeviceData)(),[y,k]=(0,n.useState)(d);(0,n.useEffect)((()=>{k(d)}),[d]);const w=(0,n.useRef)((()=>{}));w.current=()=>{E(),m?.()};(0,n.useEffect)((()=>{if(null==y||!g)return;let e=null;return e=window.setTimeout((()=>{w.current()}),y),()=>{e&&window.clearTimeout(e)}}),[g,y]),(0,n.useEffect)((()=>{_&&w.current()}),[_]);const C=l||!b?"vertical":t;return n.createElement("div",{className:a()("Snackbar",`Snackbar--layout-${C}`,`Snackbar--mode-${p}`,h),onMouseEnter:()=>{f&&k(null)},onMouseLeave:()=>{f&&k(d)}},n.createElement("div",{className:"Snackbar__body"},r&&n.createElement("div",{className:"Snackbar__before"},r),n.createElement("div",{className:"Snackbar__content"},n.createElement(s.Paragraph,{className:"Snackbar__content-text"},e),o&&n.createElement(s.Button,{align:"left",hasHover:!1,mode:"tertiary",appearance:"dark"===p?"overlay":"accent",size:"s",className:"Snackbar__action",onClick:e=>{o&&u?.(e),w.current()}},o)),l&&n.createElement("div",{className:"Snackbar__after"},l)),v&&n.createElement(s.Button,{onClick:w.current,after:n.createElement(c.Icon12Cancel,null),mode:"tertiary",appearance:"dark"===p?"overlay":"neutral",size:"s",className:"Snackbar__close"}))}))},249833:(e,t,o)=>{o.d(t,{SnackbarContainer:()=>a});var n=o(296540),r=o(149982);o(654982);const a=({withPortal:e=!0,portalProps:t={portalClassName:"MEConfig SnackbarModal"},children:o})=>n.createElement(i,{withPortal:e,portalProps:t},n.createElement("div",{className:"SnackbarContainer"},o)),i=(0,n.memo)((({withPortal:e,children:t,portalProps:o})=>e?n.createElement(r.Portal,{...o},t):n.createElement(n.Fragment,null,t)))},517848:(e,t,o)=>{o.d(t,{StatusIcon:()=>i});var n=o(296540),r=o(869859),a=o(70915);o(36819);const i=({peer:e,size:t,className:o,...i})=>{const s=(0,a.usePixelDensity)();if(!("User"===e.kind&&e.imageStatus))return null;const c=s?2*t:t,l=e.imageStatus.images.find((e=>c<=e.width&&Boolean(e.url)))?.url;return n.createElement("div",{...i,className:(0,r.classNames)(`StatusIcon--size-${t}`,o)},n.createElement("img",{alt:e.imageStatus.name,src:l}))}},911262:(e,t,o)=>{o.d(t,{StickerEmojiMenu:()=>w,StickerEmojiMenuPopper:()=>k,useStickerEmojiMenuPopper:()=>C});o(836413);var n=o(296540),r=o(260658),a=o(782951),i=o(920641),s=o(70915),c=o(175953),l=o(843779),d=o(573510),u=o(592087),m=o(32485),p=o.n(m),h=o(204948),f=o(520828),v=o(73514),g=o(149982),_=o(364449),E=o(155912),b=o(977900),y=o(401193);const k=(0,n.memo)((({isOpen:e,toggleIsOpen:t,className:o,contentClassName:r,triggerClassName:a,children:i,onStickerSend:s,...c})=>{const l=(0,n.useRef)(null),u=(0,n.useRef)(null),m=(0,h.useLayer)(),[f,v]=(0,n.useState)({left:"100vw",top:"100vh",position:"fixed",transform:"translateX(-100%) translateY(-100%)"}),_=(0,n.useCallback)(((...e)=>s?.(...e)),[s]);return(0,n.useEffect)((()=>{const e=e=>{e.target instanceof Node&&l.current&&!l.current.contains(e.target)&&u.current&&!u.current.contains(e.target)&&t(!1)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}),[t]),(0,n.useLayoutEffect)((()=>{if(u.current&&e){const{right:e,top:t}=u.current.getBoundingClientRect();v({left:e,top:t,position:"fixed",transform:`translateX(-100%) translateY(calc(-100% - ${16}px))`})}}),[e]),n.createElement("div",{className:p()(o,"StickerEmojiMenuPopper"),onMouseDown:e=>{e.preventDefault()},onMouseEnter:()=>t(!0),onMouseLeave:()=>t(!1)},n.createElement("div",{className:p()(a,"StickerEmojiMenuPopper__trigger"),ref:u},i),n.createElement(g.Portal,{portalTarget:m},n.createElement(d.default,{nodeRef:l,in:e,timeout:200,classNames:"StickerEmojiMenuPopper__content-",mountOnEnter:!0,style:f},n.createElement("div",{ref:l,className:p()(r,"StickerEmojiMenuPopper__content")},n.createElement(w,{onStickerSend:_,isVisible:e,...c})))))})),w=(0,n.memo)((({className:e,...t})=>{const o=(0,s.useViewer)(),{api:d,router:m,logger:h,vkcom_me:g}=(0,s.useBrowserEnv)(),{profileType:y,settings:k}=(0,s.useViewer)(),w=l.isEdu(y),C=(0,E.useStickersApi)(),{vkm_stickers_popup:A}=(0,s.useFeatureFlags)(),S=(0,n.useMemo)((()=>A?new i.PopupStickerService:void 0),[A]);(0,n.useEffect)((()=>{t.isVisible||(0,_.setActivePackKeyOptions)({activePackKey:C.cache.stickersActiveTab?.get()||void 0})}),[t.isVisible,C]);const I=(0,n.useCallback)(((e,t={})=>d.fetchForExternalLibs(e,t,{timeout:3e4,retries:5}).catch((e=>e instanceof u.IApi.RequestError?Promise.reject(e.apiError):e instanceof u.IApi.ExecuteErrors?Promise.reject({errors:e.list.map((e=>e.apiError))}):Promise.reject(e)))),[d]),P=(0,n.useCallback)((()=>{const e=t.peerId&&c.resolveAnyId(t.peerId);m.push({kind:"StickersStoreProxyRoute",peerId:e&&c.isUserPeerId(e)?e:void 0})}),[m,t.peerId]),x=(0,n.useCallback)((()=>{t.peerId?m.push({kind:"MiniAppModal",miniAppId:f.resolveMiniAppId(v.UGC_STICKERS_APP_ID),hash:new URLSearchParams({peer_id:String(t.peerId),ref:"keyboard"}).toString()}):h.error("У стикерпикера нет peerId для открытия миниаппа UGC")}),[h,t.peerId,m]),N=(0,n.useCallback)((()=>{m.push({kind:"MiniAppModal",miniAppId:f.resolveMiniAppId(v.VMOJI_CONSTRUCTOR_APP_ID),hash:new URLSearchParams({is_suggested:"true",promo_id:"vmoji_avatar_suggestion_stickers_keyboard_hint"}).toString()})}),[m]),R=(0,n.useCallback)((({character_id:e},t)=>{const o={character_id:e,...t};o.disable_share="true",m.push({kind:"MiniAppModal",miniAppId:f.resolveMiniAppId(v.VMOJI_CONSTRUCTOR_APP_ID),hash:new URLSearchParams(o).toString()})}),[m]);return n.createElement(b.StickersPopupRootContainer,{id:r.POPUP_STICKER_CONTAINER_ID,isVisible:t.isVisible,popUpStore:S,isUseAsFullscreen:!0,className:"StickerEmojiMenuPopper__popup",onClick:()=>{S?.destroyByRemove()},position:"absolute"},n.createElement(a.StickersEmojiKeyboard,{...t,onPopUpPlay:(e,o)=>{t.isVisible&&A&&S&&S.preparePreview({stickerElement:e.target,layers:o})},className:p()(e,"StickerEmojiMenu"),userId:o.id,onAPIRequest:I,onShopClick:w?void 0:P,onUGCEditClick:x,onVmojiEditClick:R,onUGCReportClick:g?.onUGCReportClick,onVmojiCreateClick:g?.onVmojiCreateClick,onVmojiSuggestionClick:N,onStockItemGiftClick:g?.onStockItemGiftClick,onStockItemSettingsClick:g?.onStockItemSettingsClick,noAnimation:!k.isStickersAnimationEnabled}))})),C=()=>{const e=(0,n.useRef)(!1),t=(0,n.useRef)(),[o,r]=(0,n.useState)(!1),a=(0,n.useCallback)(((o,n=!0,a=y.noop)=>{o!==e.current&&window.clearTimeout(t.current),e.current=o,t.current=window.setTimeout((()=>{r(o),a(),t.current=void 0}),n?o?100:200:0)}),[]);return(0,n.useEffect)((()=>()=>{window.clearTimeout(t.current)}),[]),(0,n.useMemo)((()=>({isOpen:o,toggleIsOpen:a})),[o,a])}},171355:(e,t,o)=>{o.d(t,{StickerEmojiMenuProvider:()=>a,useStickerEmojiMenu:()=>i});var n=o(296540);const r=n.createContext(void 0),a=r.Provider;function i(){const e=(0,n.useContext)(r);if(!e)throw Error("Каждая беседа должна сопровождаться контекстом StickerEmojiMenu");return e}},155912:(e,t,o)=>{o.d(t,{StickersApiProvider:()=>c,useStickersApi:()=>l});var n=o(296540),r=o(614602),a=o(70915),i=o(592087);const s=n.createContext(null),c=({children:e})=>{const{api:t}=(0,a.useBrowserEnv)(),o=(0,a.useDispatch)(),c=(0,a.useOwner)(),l=(0,n.useCallback)(((e,o={})=>t.fetchForExternalLibs(e,o,{timeout:3e4,retries:5}).catch((e=>e instanceof i.IApi.RequestError?Promise.reject(e.apiError):e instanceof i.IApi.ExecuteErrors?Promise.reject({errors:e.list.map((e=>e.apiError))}):Promise.reject(e)))),[t]),d=(0,n.useMemo)((()=>new r.API({onAPIRequest:l,userId:c.id})),[l,c.id]),u=(0,n.useCallback)((async()=>{const e=await d.cache.getStockItems({active:!0});if(!e)return;const t=e.reduce(((e,t)=>[...e,...t.product.stickers||[]]),[]);o({type:"StickersCacheReceived",stickers:t})}),[o,d.cache]);return(0,n.useEffect)((()=>(u(),d.cache.stickersAsync.subscribe((async e=>{"stockItems"===e&&u()})))),[o,u,d.cache]),n.createElement(s.Provider,{value:d},e)};function l(){const e=(0,n.useContext)(s);if(!e)throw new Error("StickersApiProvider не добавлен в дерево Реакта!");return e}},977900:(e,t,o)=>{o.d(t,{StickersPopupRootContainer:()=>s});o(752091);var n=o(296540),r=o(920641),a=o(284457),i=o(70915);const s=({children:e,allowUseCommon:t,isUseAsFullscreen:o,popUpStore:s,setElementRef:c,position:l="absolute",HtmlElement:d="div",className:u="StickersPopupRootContainer",...m})=>{const{vkm_stickers_popup:p}=(0,i.useFeatureFlags)(),h=(0,n.useMemo)((()=>new r.PopupStickerService),[]);return p?n.createElement(a.PopupRoot,{setElementRef:c,popUpStore:s||h,position:l,className:u,allowUseCommon:t,isUseAsFullscreen:o,HtmlElement:d,...m},e):n.createElement(d,{ref:c,className:u,...m},e)}},26596:(e,t,o)=>{o.d(t,{FormattedDate:()=>s,Time:()=>i});var n=o(296540),r=o(70915),a=o(935242);const i=({timestamp:e,formattedDate:t,withDot:o,className:r})=>n.createElement("time",{className:r,dateTime:new Date(e).toISOString()},o&&n.createElement("span",{"aria-hidden":!0},"· "),t),s=({timestamp:e,variant:t,withDot:o,className:s})=>{const{lang:c}=(0,r.useBrowserEnv)(),l=(0,a.useNow)();return n.createElement(i,{className:s,timestamp:e,withDot:o,formattedDate:c.formatDate(e,{now:l,variant:t})})}},595328:(e,t,o)=>{o.d(t,{Tooltip:()=>m});o(595931);var n=o(296540),r=o(32485),a=o.n(r),i=o(397914),s=o(70915),c=o(587534),l=o(513833),d=o(426690),u=o(401193);const m=(0,n.forwardRef)((({children:e,content:t,disabled:o=!1,open:r=!1,onOpen:m,onClose:p,delay:h=50,pointerEvents:f=!1,showOnTouch:v=!1,align:g="auto",position:_="auto",tooltipClassName:E,arrowOffset:b={},tooltipOffset:y={},vkuiStyle:k,watchContentChange:w},C)=>{const A=(0,c.useDeviceData)(),[S,I]=(0,n.useState)(r?"opened":"closed"),[P,x]=(0,n.useState)(),[N,R]=(0,n.useState)(),[T,M]=(0,n.useState)(null),O=(0,n.useRef)(null),L=(0,n.useRef)(null),D=(0,n.useRef)(null),j=()=>{L.current&&clearTimeout(L.current),D.current&&clearTimeout(D.current),L.current=D.current=null},F=(0,n.useCallback)((()=>{I("closed"),p&&p()}),[p]),U=(0,n.useCallback)((()=>{"opened"===S?(I("is_closing"),D.current=window.setTimeout(F,200)):F()}),[S,F]),B=(0,n.useCallback)((()=>{j(),L.current=window.setTimeout((()=>{I("opened"),m&&m()}),h)}),[h,m]),V=(0,n.useCallback)((()=>{j(),L.current=window.setTimeout(U,0)}),[U]);(0,n.useEffect)((()=>{const e=O.current;return e&&(e.addEventListener("mouseenter",B),e.addEventListener("mouseleave",V)),()=>{e&&(e.removeEventListener("mouseenter",B),e.removeEventListener("mouseleave",V))}}),[B,V]),(0,n.useEffect)((()=>j),[]),(0,s.useDidUpdate)((()=>{r?B():V()}),[r]);const K=(0,n.useMemo)((()=>{if(!N||!P||!T)return{x:0,y:0};const e=T.getBoundingClientRect(),t=b.x||0,o=b.y||0;switch(P){case"center":return"top"===N||"bottom"===N?{x:Math.floor(e.width/2)+(t-d.DEFAULT_ARROW_WIDTH/2)}:{y:Math.floor(e.height/2)+(o-d.DEFAULT_ARROW_HEIGHT/2)};case"top":return{y:Math.floor(e.height)-o-d.DEFAULT_ARROW_WIDTH-d.DEFAULT_ARROW_PADDING};case"left":case"bottom":return{x:t+d.DEFAULT_ARROW_PADDING,y:o+d.DEFAULT_ARROW_PADDING};case"right":return{x:Math.floor(e.width)-t-d.DEFAULT_ARROW_WIDTH-d.DEFAULT_ARROW_PADDING};default:(0,u.exhaustivenessCheck)(P)}}),[P,b.x,b.y,N,T]),H=(0,n.useMemo)((()=>{if(!k||!P||"top"!==N)return{};const e=y.x||0,t=y.y||0;switch(P){case"left":return{left:`-${e}px`,bottom:`${t}px`};case"right":return{right:`-${e}px`,bottom:`${t}px`};case"top":return{top:`-${t}px`};case"bottom":return{bottom:`-${t}px`};case"center":return{bottom:`${t}px`};default:(0,u.exhaustivenessCheck)(P)}}),[P,N,y.x,y.y,k]),G=n.createElement("div",{className:a()("METooltip",E,{"METooltip--removed":"is_closing"===S,"METooltip--vkuiStyle":k}),style:{"--arrowOffsetX":(b.x||0)+"px","--arrowOffsetY":(b.y||0)+"px",...H}},t,k&&N&&K&&n.createElement(l.FloatingArrow,{placement:N,coords:K,iconClassName:"METooltip__arrow"}));return!v&&A.isTouchOnly?e:n.createElement(i.Popper,{content:G,open:!o&&"closed"!==S,ref:e=>{O.current=e,"function"==typeof C?C(e):C&&(C.current=e)},portalClassName:"MEConfig",mode:"side",align:g,position:_,onAlignTypeChange:x,onPositionTypeChange:R,onContentChange:M,watchContentChange:w,pointerEvents:f},e)}))},181735:(e,t,o)=>{o.d(t,{onElementKeyDownFactory:()=>r});var n=o(815046);const r=e=>t=>{const o=(0,n.getModuleKeyCombo)(t);e(o,t)}},661757:(e,t,o)=>{o.d(t,{blobToImageUrl:()=>i,downloadImage:()=>d,fileToStaticImageUrl:()=>l,getFilesFromDataTransferItems:()=>r,getImageSizeByFile:()=>s,isImageLoaded:()=>c});var n=o(513364);async function r(e){const t=[];return await Promise.all(Array.from(e).map((async e=>{if("file"!==e.kind)return;const o=e.webkitGetAsEntry();if(o){const n=await function(e,t){return new Promise((o=>{let n=0;const r=[];function a(e){if(function(e){return e.isFile}(e)){n++;const a=t.getAsFile();e.file((e=>{n--,r.push(e),0===n&&o(r)}),(()=>{a&&(n--,r.push(a)),0===n&&o(r)}))}else(function(e){return e.isDirectory})(e)&&i(e.createReader())}function i(e){n++,e.readEntries((e=>{n--;for(const t of e)a(t);0===n&&o(r)}))}a(e)}))}(o,e);return void t.push(...n)}const n=e.getAsFile();n&&t.push(n)}))),t.map(a)}function a(e){if(e.type)return e;const t=e.name.split(".").pop();if(!t)return e;let o="";switch(t.toLowerCase()){case"mov":o="video/quicktime";break;case"3gp":o="video/3gpp"}return o?new File([e],e.name,{type:o}):e}function i({blob:e}){return URL.createObjectURL(e)}function s(e){return new Promise(((t,o)=>{const n=new Image,r=URL.createObjectURL(e);n.onload=()=>{t({width:n.width,height:n.height}),URL.revokeObjectURL(r),n.remove()},n.onerror=e=>{o(e),n.remove()},n.src=r}))}function c(e){const t=new Image;return t.src=e,t.complete||t.width+t.height>0}function l(e){return new Promise(((t,o)=>{if(!n.IMAGE_TYPES.includes(e.type))return o();if("image/gif"!==e.type)return t(i({blob:e}));const r=new Image;r.onload=async()=>{const{width:n,height:a}=await s(e),i=document.createElement("canvas");i.height=a,i.width=n;const c=i.getContext("2d");if(!c)return o();c.clearRect(0,0,i.width,i.height),c.drawImage(r,0,0),t(i.toDataURL("image/png",1)),i.remove(),r.remove()},r.onerror=()=>{o(),r.remove()},r.src=i({blob:e})}))}async function d(e){const t=await fetch(e),o=await t.blob(),n=URL.createObjectURL(o),r=document.createElement("a");r.href=n,r.download=function(e){try{return new URL(e).pathname.split("/").pop()}catch{}}(e)||"download.jpg",document.body.appendChild(r),r.click(),document.body.removeChild(r)}},713432:(e,t,o)=>{o.d(t,{computeAttachePhotosLayout:()=>d});var n=o(401193);function r(e){if((0,n.isNonEmptyArray)(e))return e;if(n.isDev)throw new Error("not an NonEmptyArray");return[[]]}function a(e,t){const o=e/t.reduce(((e,t)=>e+t.width),0),n=t.map((e=>{const{height:t,width:n}=e;return{...e,height:t*o,width:n*o}}));return r(n)}function i(e,t){const{height:o,width:n}=t,r=e/o;return{...t,height:e,width:n*r}}function s(e){let t=0,o=0;const n=e[0];for(const e of n)o+=e.width;for(const o of e)o[0]&&(t+=o[0].height);return o/t}function c(e,t){let o=t[0];const n=[...t,e].sort(((e,t)=>e-t)),r=n.findIndex((t=>t===e)),a=n[r-1],i=n[r+1];if(!a&&i)o=i;else if(!i&&a)o=a;else if(i&&a){o=i/e>e/a?a:i}return o}function l(e,{minHeight:t},o){return r(o.reduceRight(((o,n)=>{const r=o[o.length-1],a=i(t,n),{width:s}=a,c=r?r.reduce(((e,t)=>e+t.width),0):0;return s+c<=e&&r?r.push(a):o.push([a]),o}),[]).reverse().map((e=>e.reverse())).map((t=>a(e,r(t)))))}function d(e,t,o,n){try{const a=[],i={},d=[9/16,3/4,1,4/3,16/9],m=function(e,t){const{minHeight:o}=t,n=function(e,t,o){const n=[t];let r=e;do{r=n[n.length-1]-t*o,r<e&&(r=e),n.push(r)}while(r!==e);return n}(o,e,.05),r=[];for(let e=0;e<n.length;e++){const t=n[e];t&&r.push({minHeight:t})}return r}(t/e,o),p=function(e,t){return r(e.map((e=>{const o=c(e.width/e.height,t);return e.width>e.height?{...e,width:o*e.height}:{...e,height:e.width/o}})))}(n,d);for(const e of m){const o=u(l(t,e,p)),n=s(o);a.push(n),i[n]=o}const h=c(e,r(a));return h&&i[h]||l(t,o,n)}catch{return[n]}}function u(e){return function(e){const t=e.length,o=r(e[e.length-1]),n=1===o.length;if(t<=2||!n)return e;const s=e[e.length-2];if(!s)return e;const c=s?.reduce(((e,t)=>e+t.width),0);s.push(o[0]);const l=r(s.map((e=>i(1,e))));return e[e.length-2]=a(c,l),r(e.splice(0,e.length-1))}(e)}},815046:(e,t,o)=>{o.d(t,{Modifier:()=>n,getGlobalKeyCombo:()=>u,getKeyCombo:()=>l,getModuleKeyCombo:()=>d,isCharKey:()=>m,localizeNavigationKey:()=>g});var n,r=o(522300);!function(e){e.Mod="Mod",e.Alt="Alt",e.Shift="Shift",e.Meta="Meta"}(n||(n={}));const a=[n.Shift,n.Mod,"ArrowDown","ArrowUp","Enter","Escape","Backspace",`${n.Shift}+Enter`,`${n.Mod}+Enter`,"ArrowLeft","ArrowRight","Tab",`${n.Shift}+Tab`,"Space",`${n.Mod}+B`,`${n.Mod}+U`,`${n.Mod}+I`,`${n.Mod}+I`,`${n.Mod}+Equal`,`${n.Mod}+${n.Shift}+Equal`,`${n.Mod}+Minus`,`${n.Mod}+${n.Shift}+Minus`,"PageUp","PageDown","Home","End"],i=e=>a.includes(e),s=[`${n.Mod}+${n.Shift}+F`,`${n.Mod}+/`],c=e=>s.includes(e),l=e=>{try{const t=[];Object.values(n).forEach((o=>{f[o](e)&&t.push(o)}));if(["Meta","Control","Alt","Shift"].includes(e.key)){const e=t.join("+");return{key:e,code:e}}const o=["Key","Digit","Numpad"].find((t=>e.code.startsWith(t))),r=o?e.code.slice(o.length):e.code,a=1===e.key.length?e.key.toUpperCase():e.key;return{key:[...t,a].join("+"),code:[...t,r].join("+")}}catch(e){return}},d=e=>{const t=l(e);if(!t)return null;const{key:o,code:n}=t;return[o,n].find(i)??null},u=e=>{const t=l(e);if(!t)return null;const{key:o,code:n}=t;return[o,n].find(c)??null},m=e=>{try{for(const t of Object.values(n))if(t!==n.Shift&&f[t](e))return!1;return 1===e.key.length}catch(e){return!1}},p=e=>"Meta"===e.key||e.metaKey,h=e=>"Control"===e.key||e.ctrlKey,f={[n.Mod]:e=>r.isMac?p(e):h(e),[n.Alt]:e=>"Alt"===e.key||e.altKey,[n.Shift]:e=>"Shift"===e.key||e.shiftKey,[n.Meta]:e=>r.isMac?h(e):p(e)},v={ArrowLeft:"ArrowRight",ArrowRight:"ArrowLeft"};function g(e,t){let o;switch(!0){case"string"==typeof t:o=t;break;case t instanceof HTMLElement:o=getComputedStyle(t).direction}return"rtl"===o?v[e]??e:e}},522300:(e,t,o)=>{o.d(t,{applySizeLimitations:()=>w,browser:()=>c,download:()=>b,emptyImage:()=>_,enRuKeysMap:()=>p,formatPhoneNumber:()=>g,getActiveElement:()=>I,getAttachForwardIndent:()=>u,getExpectedAttachWidth:()=>m,getOffsetRect:()=>i,getOrganiserUid:()=>f,getOwnerDocument:()=>S,getPeersInlineNames:()=>h,isInputElementActive:()=>C,isInteractiveElementActive:()=>A,isMac:()=>l,isMouseEventWithModifier:()=>k,isObject:()=>E,isValidJSON:()=>y,isWindows:()=>d,preparePhoneNumber:()=>v});var n=o(296540),r=o(401193),a=o(869859);function i(e,t){if("undefined"==typeof window||!(e instanceof HTMLElement))return{top:0,left:0,width:0,height:0};const o=e.getBoundingClientRect(),n=t?.getBoundingClientRect(),r=document.body,a=document.documentElement,i=t?t.scrollTop:window.pageYOffset||a.scrollTop||r.scrollTop,s=(t?t.scrollLeft:window.pageXOffset)||a.scrollLeft||r.scrollLeft,c=a.clientTop||r.clientTop||0,l=a.clientLeft||r.clientLeft||0;return{top:o.top-(n?.top||0)+i-c,left:o.left-(n?.left||0)+s-l,width:o.width,height:o.height}}const s=navigator.userAgent.toLowerCase(),c={version:(s.match(/.+(?:me|ox|on|rv|it|era|opr|ie|edge)[/: ]([\d.]+)/)||[0,"0"])[1],firefox:/firefox\/\d+/i.test(s),safari:!/chrome/i.test(s)&&/webkit|safari|khtml/i.test(s),safari_mobile:/iphone|ipod|ipad/i.test(s),ios:/.+(ipod|ipad|iphone.*os)/i.test(s),touch:window.matchMedia("(pointer: coarse)").matches,voiceRecordingSupported:Boolean(window.navigator.mediaDevices&&"getUserMedia"in window.navigator.mediaDevices&&(window.AudioContext||window.webkitAudioContext)),mobile:/iphone|ipod|ipad|opera mini|opera mobi|iemobile|android/.test(s)},l="userAgentData"in window.navigator&&"platform"in window.navigator.userAgentData?0===window.navigator.userAgentData.platform.indexOf("mac"):0===window.navigator.platform.indexOf("Mac"),d=window.navigator.platform.toLowerCase().startsWith("win"),u=e=>e>0?22+10*(e-1):0;function m(e,t,o,n){const r=n+(t?0:8)-u(o);return[r,r*(e?"undefined"!=typeof window?window.devicePixelRatio:2:1)]}const p={q:"й",w:"ц",e:"у",r:"к",t:"е",y:"н",u:"г",i:"ш",o:"щ",p:"з","[":"х","]":"ъ",a:"ф",s:"ы",d:"в",f:"а",g:"п",h:"р",j:"о",k:"л",l:"д",";":"ж","'":"э",z:"я",x:"ч",c:"с",v:"м",b:"и",n:"т",m:"ь",",":"б",".":"ю","/":".",[l?"\\":"`"]:"ё"},h=(e,t,o,r)=>{const a=[];return e.forEach(((n,i)=>{a.push(o(n),(o=>o===e.length-1?"":t===e.length&&o===e.length-2?` ${r.use("me_chat_members_last_divider")} `:", ")(i))})),t>e.length&&(0===e.length?a.push(r.use("me_chat_members_count",{num:t-e.length})):a.push(r.use("me_chat_members_count_lots",{num:t-e.length,values:{names:""}}))),a.length>0?n.createElement(n.Fragment,null,a):null};function f(e){switch(e.kind){case"filters":return e.filter;case"folders":return e.id;default:(0,r.exhaustivenessCheck)(e)}}function v(e){if(0===e.length)return"";let t=e;return"9"===t[0]&&(t="+7"+t),"8"===t[0]&&(t="+7"+e.slice(1)),"+"!==t[0]&&(t="+"+t),t}async function g(e){const{parsePhoneNumber:t}=await o.e(85128).then(o.bind(o,85128)),n=t(e.replace(/^(\+|)+/,"+"));return{isValid:n.valid,international:n.number?.international??e,national:n.number?.national??e}}const _="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";function E(e){return"[object Object]"===Object.prototype.toString.call(e)}function b({blob:e,filename:t}){const o=document.createElement("a");o.setAttribute("download",t);const n=URL.createObjectURL(e);o.setAttribute("href",n),o.setAttribute("target","_blank"),o.click(),URL.revokeObjectURL(n)}function y(e){if(!(0,a.isString)(e))return!1;try{return JSON.parse(e),!0}catch{return!1}}window.screen.lockOrientation||window.screen.mozLockOrientation||window.screen.msLockOrientation;window.screen.unlockOrientation||window.screen.mozUnlockOrientation||window.screen.msUnlockOrientation;function k(e){return e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||1===e.button}function w(e,t,o,n,r,a){const i=e/t;let s=Math.max(e,r);s=Math.min(s,o);let c=s/i;c=Math.max(c,a),c=Math.min(c,n);const l=s/c,d={height:c,width:s};let u=Math.max(t,a);u=Math.min(u,n);let m=u*i;m=Math.max(m,r),m=Math.min(m,o);const p=m/u,h={height:u,width:m};return Math.abs(1-i/l)<Math.abs(1-i/p)?d:h}function C(){const e=I();return!!e&&("INPUT"===e.tagName||"TEXTAREA"===e.tagName||e instanceof HTMLElement&&!0===e.isContentEditable)}function A(){const e=I();return!!e&&(C()||["A","AUDIO","VIDEO","SUMMARY","DETAILS","IFRAME","EMBED","LABEL","IMG","OBJECT","BUTTON","OPTION","SELECT"].includes(e.tagName))}function S(e){return e?.ownerDocument||document}function I(e){let t;switch(!0){case e instanceof Document:case e instanceof ShadowRoot:t=e;break;case e instanceof Element:t=S(e);break;default:t=document}const o=t.activeElement;if(o instanceof HTMLIFrameElement)try{const e=o.contentWindow?.document;if(e)return I(e)}catch{return}return o}},818005:(e,t,o)=>{o.d(t,{SEND_OPTIONS:()=>c,VISIBILITY:()=>s,empty:()=>r,hasActiveUploads:()=>i,isEmpty:()=>a,validateRequiredFields:()=>l});var n=o(103026);function r(){return{text:"",attaches:{},uploadsTrackIds:new Set,visibility:"all",donutDelay:-1,sendOptions:{selected:[],disabled:[]},ads:{predId:"",erId:"",isAd:!1}}}function a(e,t){const o=0!==Object.keys(e.attaches).length;return 0===t.length&&!o&&!e.forward&&!i(e)}function i(e){return 0!==e.uploadsTrackIds.size}const s=["all","donut"],c=["close_comments","signed","mute_notifications"];function l(e){const t=r();return Object.entries(e).reduce(((e,[o,r])=>{const a=n.resolveId(+o);return e[a]=r,r.uploadsTrackIds instanceof Set||(e[a]={...r,uploadsTrackIds:t.uploadsTrackIds}),void 0===r.ads&&(e[a]={...r,ads:t.ads}),e}),{})}},884618:(e,t,o)=>{function n(){return{text:"",attaches:{},uploadsTrackIds:new Set}}function r(e,t){const o=0!==Object.keys(e.attaches).length;return 0===t.length&&!o&&!a(e)}function a(e){return 0!==e.uploadsTrackIds.size}o.d(t,{empty:()=>n,hasActiveUploads:()=>a,isEmpty:()=>r})},19068:(e,t,o)=>{o.d(t,{DEFAULT_FORWARD_AUTHOR_HIDDEN:()=>i,empty:()=>a,getNormalForward:()=>l,hasActiveUploads:()=>c,isEmpty:()=>s,validateRequiredFields:()=>d});var n=o(175953),r=o(401193);function a(){return{text:"",attaches:{},uploadsTrackIds:new Set}}const i=!1;function s(e,t){const o=0!==Object.keys(e.attaches).length;return!(0!==t.length||e.forward||e.reply||o||c(e))}function c(e){return 0!==e.uploadsTrackIds.size}function l(e,t){if(!e.forward||e.forward.kind!==t)return;const o=[...e.forward.items].filter((e=>"Normal"===e.kind));return(0,r.isNonEmptyArray)(o)?o:void 0}function d(e){const t=a();return Object.entries(e).reduce(((e,[o,r])=>{const a=n.resolveId(+o);return Array.isArray(r)?(e[a]=r,e):("kind"in r||(r.uploadsTrackIds instanceof Set||(r={...r,uploadsTrackIds:t.uploadsTrackIds}),e[a]=[r]),e)}),{})}},843779:(e,t,o)=>{o.d(t,{VIEWER_DEFAULT_PUSH_SETTINGS:()=>s,eduAccount:()=>d,isEdu:()=>c,isReducedMotionSetting:()=>i,isService:()=>l,isWithoutBubbles:()=>m,mainAccount:()=>u,updateIsStickersAnimationEnabled:()=>p});var n=o(726356),r=o(401193);const a=["isStickersAnimationEnabled","messageReactionAnimation","videoMessageAutoplay"],i=e=>a.includes(e),s={userConvo:{isEnabled:!0,withMessageText:!0},chatConvo:{isEnabled:!0,withMessageText:!0},groupConvo:{isEnabled:!0,withMessageText:!0},mention:"every-mention",messageReaction:{isEnabled:!0,withMessageText:!0}};function c(e){return"edu"===e}function l(e){return Boolean(e.accounts.find((e=>e.isService)))}function d(e){return e.accounts.find((e=>c(e.profileType)))}function u(e){return e.accounts.find((e=>!c(e.profileType)))}function m(e,t){const{settings:o}=e;switch(t.vkm_bubble_theme_default_value){case!1:case 0:return!1;case 1:return"disabled"===o.bubblesTheme;case 2:return"enabled"!==o.bubblesTheme;default:(0,r.exhaustivenessCheck)(t.vkm_bubble_theme_default_value)}}function p(e,t){e.settings.isStickersAnimationEnabled=t,(0,n.setIsAnimationAutoplay)(t)}},592087:(e,t,o)=>{var n;o.d(t,{COMMUNITY_ADMIN_NEED_2FA:()=>r,IApi:()=>n}),function(e){e.resolveTrackId=function(e,t){if(0===t.length)throw new Error("Нельзя отдавать пустую строку в IApi.resolveTrackId");return`${e}-${t}`};class t extends Error{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}}e.AuthError=t;class o extends Error{constructor(e){super(e),Object.setPrototypeOf(this,o.prototype)}}e.TimeoutError=o;class n extends Error{constructor(e){super(e),Object.setPrototypeOf(this,n.prototype)}}e.AbortError=n;class r extends Error{constructor(e,t,o,n){super(t),this.code=e,this.apiError=o,this.subcode=n,Object.setPrototypeOf(this,r.prototype)}}e.RequestError=r;class a extends Error{constructor(e,t){super(e[0].message),this.list=e,this.response=t,Object.setPrototypeOf(this,a.prototype)}}e.ExecuteErrors=a,e.isCaptchaData=function(e){const{captcha_sid:t,captcha_img:o,captcha_type:n,is_refresh_enabled:r}=e;return!("string"!=typeof t||"string"!=typeof o||void 0!==n&&"string"!=typeof n||void 0!==r&&"boolean"!=typeof r)}}(n||(n={}));const r=1169},999230:(e,t,o)=>{o.d(t,{IRouter:()=>n});var n,r=o(401193);!function(e){let t,o,n,a;function i(e){switch(e.kind){case"MainRoute":case"ConvoRoute":case"CallJoinRoute":case"CallJoinShortenedRoute":case"ChannelRoute":case"ChannelsListRoute":case"ChatJoinRoute":case"NotFoundRoute":case"SettingsRoute":case"SpaceRoute":case"SpaceRoomRoute":return n.Screen;case"AttachProxyRoute":case"AttachMediaProxyRoute":case"HashtagProxyRoute":case"ChatJoinProxyRoute":case"HashtagMentionProxyRoute":case"ScreenNameProxyRoute":case"VkProxyRoute":case"StickerPackProxyRoute":case"StickersStoreProxyRoute":case"GiftsCatalogProxyRoute":case"SferumChannelProxyRoute":case"CallJoinProxyRoute":case"CallJoinShortenedProxyRoute":case"ChannelJoinProxyRoute":return n.Proxy;case"ModalMessageRuntimeRoute":case"EmptyRuntimeRoute":case"AudioRestrictionRuntimeRoute":case"RedirectRuntimeRoute":return n.Runtime;case"PhotoModal":case"VideoModal":case"MiniAppModal":case"PollModal":case"NewFolderModal":case"EditFolderModal":case"ImportantMessagesModal":case"MiniAppCatalogModal":case"SpaceRoomCreateModal":case"SpaceSectionCreateModal":case"SpaceRoomUpdateModal":return o.Modal;case"PeerPanel":case"ChannelPanel":case"SpacePanel":return o.RightPanel;default:(0,r.exhaustivenessCheck)(e)}}!function(e){e.Push="PUSH",e.Replace="REPLACE",e.Pop="POP"}(t=e.Action||(e.Action={})),function(e){e.Modal="MODAL",e.RightPanel="RIGHT_PANEL"}(o=e.StackableType||(e.StackableType={})),function(e){e.Screen="SCREEN",e.Proxy="PROXY",e.Runtime="RUNTIME"}(n=e.PlainRouteType||(e.PlainRouteType={})),e.stackableLevels=[o.Modal,o.RightPanel],e.SettingsRouteSectionKeys=["main","account","folders","notifications","theme","experimental","about","edu","schedule"],e.PeerPanelTabKeys=["members","invitations","photos","audios","videos","docs","links"],e.ChannelPanelSectionKeys=["settings"],function(e){e[e.Message=0]="Message",e[e.Post=1]="Post",e[e.PostponedPost=2]="PostponedPost",e[e.Composer=3]="Composer",e[e.Comment=4]="Comment",e[e.ChannelComposer=5]="ChannelComposer",e[e.CommentsComposer=6]="CommentsComposer"}(a=e.RouteSourceKind||(e.RouteSourceKind={})),e.globalParamsKeys=["tab","folder","createPoll","sferum","modal","rp","p"],e.convoRouteExtraParamsKeys=["settings"],e.withExtraConvoParams=e=>"MainRoute"===e.kind||"ConvoRoute"===e.kind||"ChannelRoute"===e.kind||"ChannelsListRoute"===e.kind,e.isEnabledWithCommunity=e=>("ConvoRoute"!==e.kind||!e.chatJoinHash)&&("PeerPanel"===e.kind||"ConvoRoute"===e.kind||"MainRoute"===e.kind||"NotFoundRoute"===e.kind),e.isStackable=t=>e.isModal(t)||e.isRightPanel(t),e.isModal=e=>i(e)===o.Modal,e.isRightPanel=e=>i(e)===o.RightPanel,e.isProxyRoute=e=>i(e)===n.Proxy,e.isRuntimeRoute=e=>!!e&&i(e)===n.Runtime}(n||(n={}))},328149:(e,t,o)=>{var n;o.d(t,{IUploader:()=>n}),function(e){class t extends Error{constructor(e="Aborted"){super(e),Object.setPrototypeOf(this,t.prototype)}}e.AbortError=t;class o extends Error{constructor(e="Timeout"){super(e),Object.setPrototypeOf(this,o.prototype)}}e.TimeoutError=o}(n||(n={}))},193496:(e,t,o)=>{o.d(t,{Stack:()=>r,createGroupId:()=>s,createModalId:()=>i,resolveModalId:()=>a});var n=o(444329);class r{push(e){this.history.push(e),this.index=this.history.length-1,this.listeners.call({action:"add",payload:e})}goBack(e=1){this.index-=e}subscribe(e){return this.listeners.push(e)}get lastElement(){return this.history[this.history.length-1]||null}get currentElement(){return this.history[this.index]||null}findIndex(e){const t=this.history.findIndex((t=>t.modalId===e));return-1!==t?t:null}get size(){return this.history.length}onItemsRemove(e){this.index=this.history.length-1,this.listeners.call({action:"remove",payload:e}),this.lastElement&&this.listeners.call({action:"add",payload:this.lastElement})}constructor(){this.index=0,this.pop=(e=1)=>{const t=this.history.splice(-e,e);this.onItemsRemove(t)},this.forcedRemove=e=>{const t=this.history.reduce(((t,o)=>(e(o)?t.toRemove.push(o):t.actualHistory.push(o),t)),{actualHistory:[],toRemove:[]});this.history=t.actualHistory,this.onItemsRemove(t.toRemove)},this.history=[],this.listeners=function(){let e=[];return{get length(){return e.length},push:t=>(e.push(t),function(){e=e.filter((e=>e!==t))}),call(t){e.forEach((e=>e&&e(t)))}}}()}}function a(e){return e}function i(){return(0,n.nanoid)()}function s(){return(0,n.nanoid)()}},513364:(e,t,o)=>{o.d(t,{IMAGE_TYPES:()=>m,Uploader:()=>w,VIDEO_TYPES:()=>p,areAudios:()=>N,areImages:()=>S,arePreviewable:()=>R,areVideos:()=>P,haveDirectory:()=>M,isChannelUpload:()=>F,isConvoUpload:()=>U,isImage:()=>A,preloadImage:()=>O});var n=o(872060),r=o(592087),a=o(328149),i=o(401193),s=o(175953),c=o(103026),l=o(679005),d=o(444329),u=o(399332);const m=["image/png","image/gif","image/jpeg","image/webp"],p=["video/x-msvideo","video/mp4","video/mpeg","video/3gpp","video/quicktime","video/x-flv","video/x-ms-wmv","video/avi","video/webm","video/x-matroska"],h=["audio/mp3","audio/ogg","audio/wav","audio/mpeg","audio/flac","audio/aac","audio/m4a","audio/mp4","audio/x-m4a"],f=e=>"image"===e.kind,v=e=>"video"===e.kind,g=e=>"audio"===e.kind,_=e=>"doc"===e.kind;class E{getUploadServer(e,t){let o=this.cache.get(e);if(!o)return o=t().then((t=>(this.cache.set(e,{url:t,timestamp:Date.now()}),t))).catch((t=>(this.cache.delete(e),Promise.reject(t)))),this.cache.set(e,o),o;if(o instanceof Promise)return o;return this.validateCache(o.timestamp)?Promise.resolve(o.url):(this.cache.delete(e),this.getUploadServer(e,t))}dropCache(){0!==this.cache.size&&Array.from(this.cache.entries()).forEach((([e,t])=>{if(t instanceof Promise)return;this.validateCache(t.timestamp)||this.cache.delete(e)}))}validateCache(e){return Date.now()-e<=5e3}dispose(){window.clearInterval(this.dropCacheInteervalId)}constructor(){this.cache=new Map,this.dropCacheInteervalId=window.setInterval((()=>{this.dropCache.call(this)}),u.Time.Minute)}}class b{handleUploadV2Erros(e){if("error_code"in e)throw new Error(`${e.error_code}: ${e.error_msg}`);if("files"in e&&e.files.file1&&"error_code"in e.files.file1)throw new Error(`${e.files.file1.error_code}: ${e.files.file1.error_msg}`)}async uploadImage({file:e,trackId:t},o){const a={peer_id:o.viewerId,group_id:o.groupId?s.toRealId(o.groupId):0,upload_v2:this.uploadV2},i=r.IApi.resolveTrackId("photos.getMessagesUploadServer",t),c=()=>this.api.fetch("photos.getMessagesUploadServer",a,{trackId:i}).then((({upload_url:e})=>e)),l=()=>this.photosUploadUrlCache.getUploadServer(JSON.stringify(a),c),d=()=>this.api.dangerouslyAbort(i),u=new FormData,m=r.IApi.resolveTrackId("photos.saveMessagesPhoto",t),p=async e=>{const t=await this.api.fetch("photos.saveMessagesPhoto",{...e,group_id:a.group_id},{trackId:m});if(0===t.length||void 0===t[0])throw new Error("Метод photos.saveMessagesPhoto не вернул фотографию");const o=(0,n.fromApiPhoto)({apiPhoto:t[0]});if(void 0===o)throw new Error("Не удалось конвертировать фотографию с сервера");return o},h=()=>this.api.dangerouslyAbort(m);return 0===this.uploadV2?(u.append("file1",e),this.uploadRequest({getUrl:l,abortGetUrl:d,body:u,uploadTrackId:t,postprocess:({data:e})=>p(e),abortPostprocess:h})):(u.append("file1",e),this.uploadRequest({getUrl:l,abortGetUrl:d,body:u,uploadTrackId:t,postprocess:({data:e})=>(this.handleUploadV2Erros(e),p({upload_v2:1,photo:JSON.stringify(e)})),abortPostprocess:h}))}async uploadVideo({file:e,trackId:t},o){let a="messages";o.isChannel&&(a="wall"),o.isComment&&(a="comment");const i={target:a,preview:1,no_comments:1,group_id:"wall"===a&&j(o)?c.toRealGroupId(o.targetPeerId):o.groupId?s.toRealId(o.groupId):void 0},l=r.IApi.resolveTrackId("video.save",t),d=new FormData;d.append("video_file",e);const u=r.IApi.resolveTrackId("video.get",t);return this.uploadRequest({getUrl:()=>this.api.fetch("video.save",i,{trackId:l}).then((({upload_url:e})=>{if(!e)throw new Error("В методе video.save не вернулся upload_url");return e})),abortGetUrl:()=>this.api.dangerouslyAbort(l),body:d,uploadTrackId:t,postprocess:async({data:{video_id:e,owner_id:t}})=>{const o={kind:"Video",id:e,ownerId:t,image:[{url:n.emptyPreview,width:1,height:1}],views:0,isFromMessage:!0},r=(await this.api.fetch("video.get",{owner_id:t,videos:`${t}_${e}`,extended:0},{trackId:u})).items[0];if(!r)return o;return(0,n.fromApiVideo)({apiVideo:r,useFirstFrame:!0})||o},abortPostprocess:()=>this.api.dangerouslyAbort(u)})}async uploadAudio({file:e,trackId:t}){const o={},a=r.IApi.resolveTrackId("audio.getUploadServer",t),i=new FormData;i.append("file",e);const s=r.IApi.resolveTrackId("audio.save",t);return this.uploadRequest({getUrl:()=>this.api.fetch("audio.getUploadServer",o).then((({upload_url:e})=>e)),abortGetUrl:()=>this.api.dangerouslyAbort(a),body:i,uploadTrackId:t,postprocess:async({data:{server:e,audio:t,hash:o}})=>{const r=await this.api.fetch("audio.save",{server:e,audio:t,hash:o},{trackId:s});return(0,n.fromApiAudio)(r)},abortPostprocess:()=>this.api.dangerouslyAbort(s)})}async uploadDoc({file:e,trackId:t},o){const a={peer_id:o.targetPeerId,group_id:o.groupId?s.toRealId(o.groupId):0},i=r.IApi.resolveTrackId("docs.getMessagesUploadServer",t),c=()=>this.api.fetch("docs.getMessagesUploadServer",a,{trackId:i}).then((({upload_url:e})=>e)),l=new FormData;l.append("file",e);const d=r.IApi.resolveTrackId("docs.save",t);return this.uploadRequest({getUrl:()=>this.docsUploadUrlCache.getUploadServer(JSON.stringify(a),c),abortGetUrl:()=>this.api.dangerouslyAbort(i),body:l,uploadTrackId:t,postprocess:async({data:{file:e}})=>{const t=await this.api.fetch("docs.save",{file:e,group_id:a.group_id},{trackId:d});if(!t.doc)throw new Error("Метод doc.save не вернул документ");const o=(0,n.fromApiDoc)(t.doc);if(!o)throw new Error("Не удалось конвертировать документ (нет поля url)");return o},abortPostprocess:()=>this.api.dangerouslyAbort(d)})}async uploadWallDoc({file:e,trackId:t},o){const a={group_id:0},i=r.IApi.resolveTrackId("docs.getWallUploadServer",t),s=()=>this.api.fetch("docs.getWallUploadServer",a).then((({upload_url:e})=>e)),c=new FormData;c.append("file",e);const l=r.IApi.resolveTrackId("docs.save",t);return this.uploadRequest({getUrl:()=>this.wallDocsUploadUrlCache.getUploadServer(JSON.stringify(a),s),abortGetUrl:()=>this.api.dangerouslyAbort(i),body:c,uploadTrackId:t,postprocess:async({data:{file:e}})=>{const t=await this.api.fetch("docs.save",{file:e,group_id:0},{trackId:l});if(!t.doc)throw new Error("Метод doc.save не вернул документ");const o=(0,n.fromApiDoc)(t.doc);if(!o)throw new Error("Не удалось конвертировать документ (нет поля url)");return o},abortPostprocess:()=>this.api.dangerouslyAbort(l)})}async uploadVoice({file:e,trackId:t},o){const a={type:"audio_message",peer_id:o.targetPeerId,group_id:o.groupId?s.toRealId(o.groupId):0};let i,c;if(this.uploadV2Voice){const e=r.IApi.resolveTrackId("messages.getAudioMessageUploadServer",t);i=()=>this.api.fetch("messages.getAudioMessageUploadServer",{group_id:a.group_id},{trackId:e}).then((({upload_url:e})=>e)),c=()=>this.api.dangerouslyAbort(e)}else{const e=r.IApi.resolveTrackId("docs.getMessagesUploadServer",t);i=()=>this.api.fetch("docs.getMessagesUploadServer",a,{trackId:e}).then((({upload_url:e})=>e)),c=()=>this.api.dangerouslyAbort(e)}const l=new FormData;if(l.append("file",e),!this.uploadV2Voice){const e=r.IApi.resolveTrackId("docs.save",t),o=async({data:{file:e}})=>{const t=await this.api.fetch("docs.save",{file:e});if(!t.audio_message)throw new Error("Метод doc.save не вернул аудиосообщение");return(0,n.fromApiVoice)(t.audio_message)},a=()=>this.api.dangerouslyAbort(e);return this.uploadRequest({getUrl:i,abortGetUrl:c,body:l,uploadTrackId:t,postprocess:o,abortPostprocess:a})}const d=r.IApi.resolveTrackId("messages.saveAudioMessage",t),u=async e=>{const t=await this.api.fetch("messages.saveAudioMessage",{file:JSON.stringify(e)},{trackId:d});return(0,n.fromApiVoice)(t)};return this.uploadRequest({getUrl:i,abortGetUrl:c,body:l,uploadTrackId:t,postprocess:({data:e})=>(this.handleUploadV2Erros(e),u(e)),abortPostprocess:()=>this.api.dangerouslyAbort(d)})}async uploadChatPhoto({file:e,trackId:t},o){if(!o.targetPeerId||!s.isChatPeerId(o.targetPeerId))throw new Error("Для обновления аватара чата targetPeerId обязательно должен быть ChatId");const n=await function(e){return new Promise((t=>{const o=new Image,n=URL.createObjectURL(e);o.onload=()=>{const e=Math.min(o.width,o.height),n=Math.floor((o.width-e)/2),r=Math.floor((o.height-e)/2);t({x:n,y:r,width:e})},o.src=n}))}(e),a={chat_id:s.toRealId(o.targetPeerId),crop_x:n.x,crop_y:n.y,crop_width:n.width},i=r.IApi.resolveTrackId("photos.getChatUploadServer",t),c=new FormData;c.append("photo",e);const l=r.IApi.resolveTrackId("messages.setChatPhoto",t);return this.uploadRequest({getUrl:()=>this.api.fetch("photos.getChatUploadServer",a,{trackId:i}).then((({upload_url:e})=>e)),abortGetUrl:()=>this.api.dangerouslyAbort(i),body:c,uploadTrackId:t,postprocess:async({data:{response:e}})=>{await this.api.fetch("messages.setChatPhoto",{file:e,user_id:s.toRealId(o.viewerId)})},abortPostprocess:()=>this.api.dangerouslyAbort(l)})}async uploadOwnerPhoto({file:e,trackId:t},o){const n={owner_id:o.viewerId,upload_v2:this.uploadV2},a=r.IApi.resolveTrackId("photos.getOwnerPhotoUploadServer",t),i=()=>this.api.fetch("photos.getOwnerPhotoUploadServer",n,{trackId:a}).then((({upload_url:e})=>e)),s=()=>this.api.dangerouslyAbort(a),c=new FormData,l=r.IApi.resolveTrackId("photos.saveOwnerPhoto",t),d=async e=>{await this.api.fetch("photos.saveOwnerPhoto",e,{trackId:l})},u=()=>this.api.dangerouslyAbort(l);return 0===this.uploadV2?(c.append("photo",e),this.uploadRequest({getUrl:i,abortGetUrl:s,body:c,uploadTrackId:t,postprocess:({data:{server:e,photo:t,hash:n}})=>d({owner_id:o.viewerId,server:e,hash:n,photo:t}),abortPostprocess:u})):(c.append("file1",e),this.uploadRequest({getUrl:i,abortGetUrl:s,body:c,uploadTrackId:t,postprocess:({data:e})=>(this.handleUploadV2Erros(e),d({upload_v2:1,photo:JSON.stringify(e)})),abortPostprocess:u}))}async uploadChannelPhoto({file:e,trackId:t},o){const n={owner_id:o.targetPeerId},a=r.IApi.resolveTrackId("photos.getOwnerPhotoUploadServer",t),i=new FormData;i.append("photo",e);const s=r.IApi.resolveTrackId("photos.saveOwnerPhoto",t);return this.uploadRequest({getUrl:()=>this.api.fetch("photos.getOwnerPhotoUploadServer",n,{trackId:a}).then((({upload_url:e})=>e)),abortGetUrl:()=>this.api.dangerouslyAbort(a),body:i,uploadTrackId:t,postprocess:async({data:{hash:e,photo:t,server:n}})=>{await this.api.fetch("photos.saveOwnerPhoto",{owner_id:c.toRealGroupId(o.targetPeerId),server:n,hash:e,photo:t},{trackId:s})},abortPostprocess:()=>this.api.dangerouslyAbort(s)})}async uploadWallImage({file:e,trackId:t},o){const a={group_id:c.toRealGroupId(o.targetPeerId),upload_v2:0},i=r.IApi.resolveTrackId("photos.getWallUploadServer",t),s=()=>this.api.fetch("photos.getWallUploadServer",a,{trackId:i}).then((({upload_url:e})=>e)),l=new FormData;l.append("photo",e);const d=r.IApi.resolveTrackId("photos.saveWallPhoto",t);return this.uploadRequest({getUrl:()=>this.wallPhotosUploadUrlCache.getUploadServer(JSON.stringify(a),s),abortGetUrl:()=>this.api.dangerouslyAbort(i),body:l,uploadTrackId:t,postprocess:async({data:{server:e,hash:t,photo:r}})=>{const a=await this.api.fetch("photos.saveWallPhoto",{group_id:c.toRealGroupId(o.targetPeerId),server:e,hash:t,photo:r},{trackId:d});if(0===a.length||void 0===a[0])throw new Error("Метод photos.saveWallPhoto не вернул фотографию");const i=(0,n.fromApiPhoto)({apiPhoto:a[0]});if(void 0===i)throw new Error("Не удалось конвертировать фотографию с сервера");return i},abortPostprocess:()=>this.api.dangerouslyAbort(d)})}async convoUpload(e,t){return f(e)?this.uploadImage(e,t):v(e)?this.uploadVideo(e,t):g(e)?this.uploadAudio(e):_(e)?this.uploadDoc(e,t):"voice"===e.kind?this.uploadVoice(e,t):(e=>"chat-photo"===e.kind)(e)?this.uploadChatPhoto(e,t):(e=>"owner-photo"===e.kind)(e)?this.uploadOwnerPhoto(e,t):Promise.reject()}async channelsUpload(e,t){return f(e)?this.uploadWallImage(e,t):v(e)?this.uploadVideo(e,t):g(e)?this.uploadAudio(e):_(e)?this.uploadWallDoc(e,t):"channel-photo"===e.kind?this.uploadChannelPhoto(e,t):Promise.reject()}async upload(e,t){return j(t)?this.channelsUpload(e,t):function(e){return!j(e)}(t)?this.convoUpload(e,t):Promise.reject()}uploadRequest({getUrl:e,abortGetUrl:t,body:o,uploadTrackId:n,postprocess:r,abortPostprocess:i}){const s=new AbortController,c=()=>{t(),s.abort(),i()};this.abortControllers.add(c);return{abort:c,trackId:n,response:(async()=>function(e,t,o={}){return new Promise(((n,r)=>{const{method:i="POST",signal:s,onUploadProgress:c,headers:l={},timeout:d}=o;if(s?.aborted)return r(new a.IUploader.AbortError);const u=new XMLHttpRequest,m=()=>u.abort();s&&(s.addEventListener("abort",m),u.addEventListener("readystatechange",(()=>{const{readyState:e}=u;e===B&&s.removeEventListener("abort",m)}))),u.addEventListener("abort",(()=>{r(new a.IUploader.AbortError)})),u.addEventListener("error",r),u.addEventListener("timeout",(()=>{r(new a.IUploader.TimeoutError)})),u.upload.addEventListener("progress",(e=>{e.lengthComputable&&c?.(e)})),u.addEventListener("loadend",(()=>{const{readyState:e,status:t,responseText:o}=u;let a;try{a=JSON.parse(o)}catch(e){return r(e)}return e===B&&t===V?n({data:a}):r(a)})),u.open(i,e,!0),Object.entries(l).forEach((([e,t])=>{u.setRequestHeader(e,t)})),d&&(u.timeout=d),u.send(t)}))}(await e(),o,{signal:s.signal,timeout:this.requestTimeout,headers:{Accept:"application/json, text/plain, */*"},onUploadProgress:({loaded:e,total:t})=>{this.emitter.emit(n,{loaded:e,total:t})}}).then(r).finally((()=>{this.abortControllers.delete(c),this.emitter.removeListener(n)})))()}}trackProgress(e,t){this.emitter.addListener(e,t)}dispose(){Array.from(this.abortControllers).forEach((e=>e())),this.photosUploadUrlCache.dispose(),this.wallPhotosUploadUrlCache.dispose(),this.docsUploadUrlCache.dispose(),this.wallDocsUploadUrlCache.dispose()}constructor(e,t){this.abortControllers=new Set,this.emitter=new C,this.requestTimeout=0,this.photosUploadUrlCache=new E,this.wallPhotosUploadUrlCache=new E,this.docsUploadUrlCache=new E,this.wallDocsUploadUrlCache=new E,this.api=e,this.featureFlags=t,this.uploadV2=this.featureFlags.vkm_upload_v2?1:0,this.uploadV2Voice=this.featureFlags.vkm_upload_v2_voice}}class y{constructor(e){this.uploads=new Map,this.start=(e,t,o)=>{this.uploads.set(e,{trackIds:t,onUploadFinish:o,finishedUploads:new Map})},this.removeUpload=(e,t)=>{const o=this.uploads.get(e);o&&(o.trackIds=o.trackIds.filter((e=>e!==t)),this.tryFinish(e))},this.push=(e,{trackId:t,attach:o})=>{const n=this.uploads.get(e);n&&(n.finishedUploads.set(t,o),this.tryFinish(e))},this.tryFinish=e=>{const t=this.uploads.get(e);if(!t)return;const{trackIds:o,finishedUploads:n}=t;if(o.length===n.size){const r=new Map(o.reduce(((e,t)=>{const o=n.get(t);return o&&e.push([t,o]),e}),[]));this.state.remove(o),this.uploads.delete(e),t.onUploadFinish?.(r)}},this.state=e}}class k{subscribe(e,t){return this.emitter.addListener(e,t),()=>{this.emitter.removeListener(e)}}get(e){return this.attaches.get(e)}filterMissing(e){return e.filter((e=>!this.attaches.has(e)))}update(e,t){const o=this.attaches.get(e),n="function"==typeof t?t(o):t;n&&(this.attaches.set(e,n),this.emitter.emit(e,n))}remove(e){new Set(e).forEach((e=>{this.attaches.delete(e),this.emitter.removeListener(e)}))}constructor(){this.attaches=new Map,this.emitter=new C}}class w extends b{uploadFiles(e,t,o,n={}){const r=e.map((e=>this.toUploaderFileInfo(e,t).catch((()=>(n.onConvertationError?.(e),null)))));Promise.all(r).then((e=>{const t=e.filter((e=>null!==e)).reduce(((e,t)=>(e[t.kind]=[...e[t.kind]||[],t],e)),{});Object.values(t).forEach((e=>{const t=e.map((({trackId:e})=>e));let r;e.length>1&&(r=(0,d.nanoid)(5),this.queue.start(r,t,n.onUploadFinish)),e.forEach((e=>{this.doUpload(e,o,n,r)}))}))})).catch((e=>{console.error("[UPLOADER] Ошибка",e)}))}abortUpload(e){const t=this.uploads.get(e);t&&(t.queueId&&this.queue.removeUpload(t.queueId,t.process.trackId),t.process.abort(),t.handlers.onUploadAbort?.(e),this.uploads.delete(e));const o=this.failedUploads.get(e);o&&(o.handlers.onUploadAbort?.(e),this.failedUploads.delete(e)),this.state.remove([e])}retryUpload(e){const t=this.failedUploads.get(e);if(t){this.failedUploads.delete(e);const{fileInfo:o,messengerData:n,handlers:r}=t;this.doUpload(o,n,r),this.state.update(o.trackId,(e=>{if(e)return{...e,error:!1}}))}}getOrphans(e){return this.state.filterMissing(e)}subscribe(e,t){if(0===e.length)return()=>{};t(this.getState(e));const o=e.map((o=>this.state.subscribe(o,(()=>{t(this.getState(e))}))));return t=>{o.forEach((e=>e())),t(e)}}getState(e){if(0===e.length)return{};const t=e.reduce(((e,t)=>{const o=this.state.get(t);return o&&e.push(o),e}),[]);return this.buildOptimisticAttachments(t)}doUpload(e,t,o,n){const{trackId:i}=e;o.onUploadStart?.(i),this.upload(e,t).then((async e=>{this.uploads.set(i,{process:e,handlers:o,queueId:n}),this.trackProgress(i,(({loaded:e,total:t})=>this.updateAttachProgress(i,{loaded:e,total:t,error:!1},o)));try{const t=await Promise.resolve(e.response),r=this.modifyUploadedAttach(i,t);if(n)this.queue.push(n,{trackId:i,attach:r});else{const e=new Map([[i,r]]);o.onUploadFinish?.(e),this.state.remove([i]),this.uploads.delete(i)}}catch(e){return e instanceof a.IUploader.AbortError||e instanceof r.IApi.AbortError||"string"==typeof e&&e.toLowerCase().includes("abort")?Promise.resolve():await Promise.reject(e)}})).catch((r=>{console.error("[UPLOADER] Ошибка загрузки",r),o.onError?.(i),n&&this.queue.removeUpload(n,i),this.uploads.delete(i),this.failedUploads.set(i,{fileInfo:e,messengerData:t,handlers:o}),this.updateAttachProgress.call(this,i,{loaded:0,total:0,error:!0},o)}))}async toUploaderFileInfo(e,{asFiles:t,asVoice:o,asChatPhoto:r,asOwnerPhoto:a,asChannelPhoto:i}){if(!(e instanceof File)){if(!o)throw new Error("Загрузить аудиосообщения можно только с флагом asVoice");const{blob:t,duration:n,waveform:r}=e,a=new File([t],"voice_recording",{type:"audio/ogg"}),i=w.toFileInfo(a,"voice"),s=await function(e,t,o,n){return Promise.resolve({kind:"OptimisticVoice",id:e.trackId,blob:t,duration:o,waveform:n,loaded:0,total:e.file.size})}(i,t,n,r);return this.state.update(i.trackId,s),i}const s=e;if(r)return w.toFileInfo(s,"chat-photo");if(a)return w.toFileInfo(s,"owner-photo");if(i)return w.toFileInfo(s,"channel-photo");if(!t&&A(s)&&(!A(c=s)||"image/gif"!==c.type)){const e=w.toFileInfo(s,"image"),t=await async function(e){const t=await O(e.file);return{kind:"OptimisticPhoto",id:e.trackId,image:t,loaded:0,total:e.file.size}}(e);return this.state.update(e.trackId,t),e}var c,l;if(!t&&(I(s)||function(e){const t=D(e.name),o=["mkv"];return""===e.type&&o.includes(t)}(s))){const e=w.toFileInfo(s,"video"),t=await async function(e){let t=null,o=n.emptyPreview;try{t=await function(e){const t=URL.createObjectURL(e);return L(t)}(e.file),o=await async function(e){function t(e,t){return new Promise(((o,n)=>{e.onseeked=()=>{e.videoWidth&&e.videoHeight||o(void 0);const t=document.createElement("canvas");t.width=e.videoWidth,t.height=e.videoHeight;const n=t.getContext("2d");n?(n.drawImage(e,0,0),o(t.toDataURL("image/jpeg"))):o(void 0)},e.onerror=n,e.currentTime=t}))}try{return t(e,.5*e.duration)}catch(o){if("string"==typeof o||!(o instanceof Event))return Promise.reject(o);const n=o.composedPath()?.[0];if(!(n instanceof HTMLVideoElement)||4!==n?.error?.code)return Promise.reject(o);return t(await L(e.src),Math.min(e.duration,1))}}(t)||n.emptyPreview}catch{}return{kind:"OptimisticVideo",id:e.trackId,duration:Math.floor(t?.duration||0),loaded:0,total:e.file.size,image:{url:o,width:t?.videoWidth||1,height:t?.videoHeight||1}}}(e);return this.state.update(e.trackId,t),e}if(!t&&x(s)){const e=w.toFileInfo(s,"audio"),t=await(l=e,new Promise((e=>{const t=new Audio,o=URL.createObjectURL(l.file);t.addEventListener("loadedmetadata",(()=>{e({kind:"OptimisticAudio",id:l.trackId,duration:t.duration,artist:"",title:l.file.name,loaded:0,total:l.file.size})})),t.src=o})));return this.state.update(e.trackId,t),e}const d=w.toFileInfo(s,"doc"),u=await async function(e){const t={kind:"OptimisticDoc",id:e.trackId,title:e.file.name,size:e.file.size,ext:D(e.file.name),loaded:0,total:e.file.size};if(A(e.file)){const o=await O(e.file);return{...t,image:o}}return t}(d);return this.state.update(d.trackId,u),d}modifyUploadedAttach(e,t){if(!t)return null;const o=this.state.get(e);let r=t;if("Video"===t.kind&&"OptimisticVideo"===o?.kind){const e=!!o.duration,a=o.image.url!==n.emptyPreview,i=t.image.length>1||t.image[0].url!==n.emptyPreview;e&&a&&!i&&(r={...t,duration:o.duration,image:[o.image]})}return r}updateAttachProgress(e,t,{onUploadProgressUpdate:o}){this.state.update(e,(e=>{if(e){switch(e.kind){case"OptimisticPhoto":o?.("photo");break;case"OptimisticVideo":o?.("video");break;case"OptimisticDoc":o?.("file")}return{...e,...t}}}))}buildOptimisticAttachments(e){return e.reduce(((e,t)=>{const o=[],n=[],r=[],a=[];switch(t.kind){case"OptimisticPhoto":o.push(t);break;case"OptimisticVideo":n.push(t);break;case"OptimisticAudio":r.push(t);break;case"OptimisticDoc":a.push(t);break;case"OptimisticVoice":e.voice=t}return o.length&&(e.photos=[...e.photos||[],...o]),n.length&&(e.videos=[...e.videos||[],...n]),r.length&&(e.audios=[...e.audios||[],...r]),a.length&&(e.docs=[...e.docs||[],...a]),e}),{})}static clearOptimisticAttachments(e,t){t.forEach((t=>{if("photos"in e){if(!e.photos)return;const o=(0,i.toNonEmpty)(e.photos.filter((({id:e})=>e!==t)));o?e.photos=o:delete e.photos}if("videos"in e){if(!e.videos)return;const o=(0,i.toNonEmpty)(e.videos.filter((({id:e})=>e!==t)));o?e.videos=o:delete e.videos}if("audios"in e){if(!e.audios)return;const o=(0,i.toNonEmpty)(e.audios.filter((({id:e})=>e!==t)));o?e.audios=o:delete e.audios}if("docs"in e){if(!e.docs)return;const o=(0,i.toNonEmpty)(e.docs.filter((({id:e})=>e!==t)));o?e.docs=o:delete e.docs}"voice"in e&&delete e.voice}))}static buildAttachments(e){return e.filter((e=>null!==e)).reduce(((e,t)=>(0,l.produce)(e,(o=>{let n=null,r=null,a=null,s=null;switch(t.kind){case"Photo":n=(0,i.toNonEmpty)([t]);break;case"Video":r=(0,i.toNonEmpty)([t]);break;case"Audio":a=(0,i.toNonEmpty)([t]);break;case"Doc":s=(0,i.toNonEmpty)([t]);break;case"Voice":o.voice=t}n?.length&&(o.photos=[...e.photos||[],...n]),r?.length&&(o.videos=[...e.videos||[],...r]),a?.length&&(o.audios=[...e.audios||[],...a]),s?.length&&(o.docs=[...e.docs||[],...s])}))),{})}static hash(){return Math.floor(1e8*Math.random()+1e8).toString(16)}static resolveTrackId(e,t){if(0===t.length)throw new Error("Нельзя отдавать пустую строку в Uploader.resolveTrackId");return`${e}-${t}`}static toFileInfo(e,t){switch(t){case"image":return{kind:"image",trackId:w.resolveTrackId("image",w.hash()),file:e};case"video":return{kind:"video",trackId:w.resolveTrackId("video",w.hash()),file:e};case"audio":return{kind:"audio",trackId:w.resolveTrackId("audio",w.hash()),file:e};case"doc":return{kind:"doc",trackId:w.resolveTrackId("doc",w.hash()),file:e};case"voice":return{kind:"voice",trackId:w.resolveTrackId("voice",w.hash()),file:e};case"chat-photo":return{kind:"chat-photo",trackId:w.resolveTrackId("chat-photo",w.hash()),file:e};case"owner-photo":return{kind:"owner-photo",trackId:w.resolveTrackId("owner-photo",w.hash()),file:e};case"channel-photo":return{kind:"channel-photo",trackId:w.resolveTrackId("channel-photo",w.hash()),file:e};default:(0,i.exhaustivenessCheck)(t)}}constructor(...e){super(...e),this.uploads=new Map,this.failedUploads=new Map,this.state=new k,this.queue=new y(this.state)}}class C{addListener(e,t){this.map.set(e,[...this.map.get(e)||[],t])}removeListener(e){this.map.delete(e)}emit(e,t){this.map.get(e)?.forEach((e=>e(t)))}constructor(){this.map=new Map}}function A(e){return!(e instanceof DataTransferItem&&"file"!==e.kind)&&Boolean(e.type&&m.includes(e.type))}function S(e){return e.every(A)}function I(e){return!(e instanceof DataTransferItem&&"file"!==e.kind)&&(e instanceof File&&!e.type?/\.wmv$|\.avi$/.test(e.name):Boolean(e.type&&p.includes(e.type)))}function P(e){return e.every(I)}function x(e){return!(e instanceof DataTransferItem&&"file"!==e.kind)&&Boolean(e.type&&h.includes(e.type))}function N(e){return e.every(x)}function R(e){return e.some(A)||e.some(I)}function T(e){return e instanceof DataTransferItem&&""===e.kind||Boolean(""===e.type)}function M(e){return e.some(T)}function O(e){const t=URL.createObjectURL(e);return new Promise(((e,o)=>{const n=new Image;n.onload=()=>{e({url:t,width:n.width,height:n.height})},n.onerror=o,n.src=t}))}function L(e){return new Promise(((t,o)=>{const n=document.createElement("video");n.volume=0,n.preload="metadata",n.onloadedmetadata=()=>t(n),n.onerror=o,n.src=e}))}function D(e){const t=/\.([0-9a-z]+)$/i.exec(e);return t?.[1]||""}function j(e){return!!e.targetPeerId&&c.isChannelId(e.targetPeerId)&&!!e.isChannel}function F(e,t){return!!e&&c.isChannelId(e)&&!!t}function U(e,t){return!!e&&!c.isChannelId(e)||!t}const B=4,V=200},790986:(e,t,o)=>{o.d(t,{createSnackbar:()=>i,snackbarStore:()=>a});var n=o(444329),r=o(679005);const a=function(e=[]){let t=e;const o=new Set,i=e=>{t=e(t),o.forEach((e=>e(t)))};return{getState:()=>t,subscribe:e=>(o.add(e),()=>{o.delete(e)}),reset:()=>i((()=>e)),create:e=>{const t=e.id||(0,n.nanoid)(),o={...e,id:t,onRequestRemove:()=>a.remove(t),requestClose:!1};return i((0,r.produce)((e=>{e.push(o),e.sort(((e,t)=>(e.priority||0)-(t.priority||0)))}))),t},remove:e=>{i((t=>t.filter((t=>t.id!==e))))},update:(e,t)=>{i((0,r.produce)((o=>{const n=o.findIndex((t=>t.id===e)),r=o[n];r&&(o[n]={...r,...t},o.sort(((e,t)=>(e.priority||0)-(t.priority||0))))})))},closeAll:e=>{i((t=>e?.length?t.map((t=>({...t,requestClose:e.includes(t.id)??t.requestClose}))):t.map((e=>({...e,requestClose:!0})))))},close:e=>{i((t=>t.map((t=>({...t,requestClose:t.id===e})))))}}}();function i(){const e=e=>a.create(e);return e.update=(e,t)=>{a.update(e,t)},e.closeAll=a.closeAll,e.close=a.close,e}},137656:(e,t,o)=>{function n(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}o.d(t,{assignRef:()=>n})},168728:(e,t,o)=>{o.d(t,{useMergeRefs:()=>c});var n=o(296540),r=o(137656),a=o(578536),i="undefined"!=typeof window?n.useLayoutEffect:n.useEffect,s=new WeakMap;function c(e,t){var o=(0,a.useCallbackRef)(t||null,(function(t){return e.forEach((function(e){return(0,r.assignRef)(e,t)}))}));return i((function(){var t=s.get(o);if(t){var n=new Set(t),a=new Set(e),i=o.current;n.forEach((function(e){a.has(e)||(0,r.assignRef)(e,null)})),a.forEach((function(e){n.has(e)||(0,r.assignRef)(e,i)}))}s.set(o,e)}),[e]),o}},578536:(e,t,o)=>{o.d(t,{useCallbackRef:()=>r});var n=o(296540);function r(e,t){var o=(0,n.useState)((function(){return{value:e,callback:t,facade:{get current(){return o.value},set current(e){var t=o.value;t!==e&&(o.value=e,o.callback(e,t))}}}}))[0];return o.callback=t,o.facade}},857309:(e,t,o)=>{o.d(t,{createMedium:()=>i,createSidecarMedium:()=>s});var n=o(331635);function r(e){return e}function a(e,t){void 0===t&&(t=r);var o=[],n=!1;return{read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return o.length?o[o.length-1]:e},useMedium:function(e){var r=t(e,n);return o.push(r),function(){o=o.filter((function(e){return e!==r}))}},assignSyncMedium:function(e){for(n=!0;o.length;){var t=o;o=[],t.forEach(e)}o={push:function(t){return e(t)},filter:function(){return o}}},assignMedium:function(e){n=!0;var t=[];if(o.length){var r=o;o=[],r.forEach(e),t=o}var a=function(){var o=t;t=[],o.forEach(e)},i=function(){return Promise.resolve().then(a)};i(),o={push:function(e){t.push(e),i()},filter:function(e){return t=t.filter(e),o}}}}}function i(e,t){return void 0===t&&(t=r),a(e,t)}function s(e){void 0===e&&(e={});var t=a(null);return t.options=(0,n.__assign)({async:!0,ssr:!1},e),t}},777387:(e,t,o)=>{o.d(t,{default:()=>r});var n=o(363662);function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,n.default)(e,t)}},198587:(e,t,o)=>{function n(e,t){if(null==e)return{};var o={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;o[n]=e[n]}return o}o.d(t,{default:()=>n})},140094:(e,t,o)=>{o.d(t,{observe:()=>l,useInView:()=>d});var n=o(296540);const r=new Map,a=new WeakMap;let i,s=0;function c(e){return Object.keys(e).sort().filter((t=>void 0!==e[t])).map((t=>{return`${t}_${"root"===t?(o=e.root,o?(a.has(o)||(s+=1,a.set(o,s.toString())),a.get(o)):"0"):e[t]}`;var o})).toString()}function l(e,t,o={},n=i){if(void 0===window.IntersectionObserver&&void 0!==n){const r=e.getBoundingClientRect();return t(n,{isIntersecting:n,target:e,intersectionRatio:"number"==typeof o.threshold?o.threshold:0,time:0,boundingClientRect:r,intersectionRect:r,rootBounds:r}),()=>{}}const{id:a,observer:s,elements:l}=function(e){let t=c(e),o=r.get(t);if(!o){const n=new Map;let a;const i=new IntersectionObserver((t=>{t.forEach((t=>{var o;const r=t.isIntersecting&&a.some((e=>t.intersectionRatio>=e));e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=r),null==(o=n.get(t.target))||o.forEach((e=>{e(r,t)}))}))}),e);a=i.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),o={id:t,observer:i,elements:n},r.set(t,o)}return o}(o);let d=l.get(e)||[];return l.has(e)||l.set(e,d),d.push(t),s.observe(e),function(){d.splice(d.indexOf(t),1),0===d.length&&(l.delete(e),s.unobserve(e)),0===l.size&&(s.disconnect(),r.delete(a))}}n.Component;function d({threshold:e,delay:t,trackVisibility:o,rootMargin:r,root:a,triggerOnce:i,skip:s,initialInView:c,fallbackInView:d,onChange:u}={}){var m;const[p,h]=n.useState(null),f=n.useRef(),[v,g]=n.useState({inView:!!c,entry:void 0});f.current=u,n.useEffect((()=>{if(s||!p)return;let n;return n=l(p,((e,t)=>{g({inView:e,entry:t}),f.current&&f.current(e,t),t.isIntersecting&&i&&n&&(n(),n=void 0)}),{root:a,rootMargin:r,threshold:e,trackVisibility:o,delay:t},d),()=>{n&&n()}}),[Array.isArray(e)?e.toString():e,p,a,r,i,s,o,d,t]);const _=null==(m=v.entry)?void 0:m.target,E=n.useRef();p||!_||i||s||E.current===_||(E.current=_,g({inView:!!c,entry:void 0}));const b=[h,v.inView,v.entry];return b.ref=b[0],b.inView=b[1],b.entry=b[2],b}}}]);try{stManager.done("dist/web/chunks/986547c8.f6265deb.js")}catch(e){}