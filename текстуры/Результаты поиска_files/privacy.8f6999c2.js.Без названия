(()=>{"use strict";var e,i,s,t,n,r,o={369085:(e,i,s)=>{s.d(i,{privacy:()=>S});var t=s(610989),n=s(624216),r=s(663878),o=s(452314),c=s(248298),l=s(317412),d=s(691004),a=s(879007),w=s(850101),u=s(810903),f=s(20025),p=s(211981),h=s(730874),_=s(606390),v=s(780061),y=s(388078);const S={customType:4,someType:5,listsType:6,contactsType:7,specialTypes:[8,9,10],flistBox(e,i,s,n,r,c,l){if(l=!!l,window.cur.flistTpl=n,0===s.length&&(s={}),window.cur.flistList=i,window.cur.flistFriends=i,window.cur.flistSearchList=[],window.cur.flistSearchTotal=-1,window.cur.flistSearchLoadStr="",window.cur.flistSelectedList=s&&s[0]?s:[],window.cur.flistSelected={},(0,a.each)(s,((e,i)=>{window.cur.flistSelected[i[0]]=1})),window.cur.flistSelectedShowed=0,window.cur.flistHash=c,window.cur.flistBox=e,window.cur.isVKMiniApp=l,window.cur.flistIndex=new p.vkIndexer(i,(e=>e[1]+" "+e[4])),e.removeButtons(),e.addButton(r||t.getLang("global_save"),this.submitFlistBox),window.cur.flistTooltip){const i=(0,o.ge)("flist_sel");let s={className:"flist_info_tt",text:window.cur.flistTooltip,width:250,nohide:1,nohideover:1};s=window.cur.flistTooltipRight?(0,a.extend)(s,{dir:"left",slideX:-15,shift:[-(0,o.getSize)(i)[0]-15,-28]}):(0,a.extend)(s,{dir:"right",slideX:15,shift:[265,-28]}),(0,u.showTooltip)(i,s),window.stManager.add([window.jsc("web/tooltips.js")],(()=>{e.setOptions({onHide:tooltips.hide.pbind(i)})}))}else e.addButton(t.getLang("global_cancel"),(()=>{e.hide()}),"no");return window.cur.flistScrollbar=new Scrollbar("flist_scroll_wrap",{nomargin:!0,right:window.vk.rtl?"auto":0,left:window.vk.rtl?0:"auto",more:S.flistMore,onScroll:e=>{(0,o.ge)("flist_scroll_wrap").scrollTop>0?(0,o.addClass)("flist_cont","flist_scrolled"):(0,o.removeClass)("flist_cont","flist_scrolled")}}),window.cur.flistAllCont=(0,o.ge)("flist_all_list"),window.cur.flistSelCont=(0,o.ge)("flist_sel_list"),window.cur.flistSearchEl=(0,o.ge)("flist_search"),window.cur.flistSearchContEl=(0,o.geByClass1)("flist_search_cont","flist_cont"),window.cur.flistLimit&&window.cur.flistSelectedCnt>=window.cur.flistLimit-1&&S.flistFull(),window.cur.flistCountStr&&window.cur.flistSelectedCnt>0&&((0,o.ge)("flist_sel_summary").innerHTML=(0,t.langNumeric)(window.cur.flistSelectedCnt,window.cur.flistCountStr)),(0,o.toggleClass)("flist_cont","flist_select_items",window.cur.flistSelectedCnt>0),!1},submitFlistBox(){const e=(0,o.ge)("flist_list_name");let i=!1;if((0,o.isVisible)(e)){if(i=e.value,!i)return(0,c.notaBene)(e);(0,d.placeholderSetup)(e,{back:!0}),(0,o.elfocus)(e,0,e.value.length)}const s={},t=[];if(window.cur.isVKMiniApp&&(s.lists=[],s.friends=[]),(0,a.each)(window.cur.flistSelectedList,((e,i)=>{window.cur.isVKMiniApp?"list"===i[5]?s.lists.push(i):s.friends.push(i):s[i[0]]=i,t.push(i[0])})),window.cur.flistFriendsPrivacy)return n.ajax.post("al_settings.php",{act:"hide_friends",hash:window.cur.flistHash,ids:t.join(",")},{onDone:(e,i)=>{(0,w.showDoneBox)(window.cur.flistFriendsPrivacyText),window.cur.flistBox.hide()},showProgress:window.cur.flistBox.showProgress,hiderogress:window.cur.flistBox.hideProgress}),(0,w.showDoneBox)(window.cur.flistFriendsPrivacyText,{out:4e3}),void(window.cur.flistNavReload&&setTimeout((()=>{window.nav.reload()}),2e3));window.cur.onFlistSave&&window.cur.onFlistSave(t,s,window.cur.flistHash,i),window.cur.flistBox.leaveOnSave||window.cur.flistBox.hide(!0)},flistMore(){window.cur.privacy&&window.cur.privacy.pagination&&!window.cur.flistSelectedShowed&&window.cur.flistList.length-window.cur.flistShown<10&&window.cur.flistList.length<window.cur.flistTotalCount?window.cur.flistSearchStr?S.flistSearchPagination():window.cur.flistMoreLoading||(window.cur.flistMoreLoading=!0,n.ajax.post("al_friends.php",(0,a.extend)({},window.cur.privacy.chooseBoxOpts||{},{act:"select_friends_box",Checked:Object.keys(window.cur.flistSelected).join(","),pagination:1,offset:window.cur.flistList.length}),{onDone:e=>{window.cur.flistMoreLoading=!1,(0,a.isArray)(e)&&(e.forEach((e=>{window.cur.flistFriends.push(e),window.cur.flistIndex.add(e)})),S.flistMore())},onFail:()=>{window.cur.flistMoreLoading=!1}})):S.flistDrawItems()},flistDrawItems(){const e=window.cur.flistShown+60;for(;window.cur.flistShown<e&&S.flistShowOne(window.cur.flistList[window.cur.flistShown+1]);)++window.cur.flistShown;setTimeout((()=>{window.cur.flistScrollbar&&window.cur.flistScrollbar.update()}),10)},flistShowOne(e,i){if(!e)return!1;if((0,o.ge)("flist_item_wrap"+e[0]))return(0,o.show)((0,o.ge)("flist_item_wrap"+e[0])),!0;let s=e[1];window.cur.flistSelection&&(s=s.replace(window.cur.flistSelection.re,window.cur.flistSelection.val));const t=(0,o.ce)("div",{id:"flist_item_wrap"+e[0],className:"flist_item_wrap"+(window.cur.flistSelected[e[0]]?" flist_item_checked":""),innerHTML:(0,o.rs)(window.cur.flistTpl,{id:e[0],name:s,photo:e[2],alt:(0,a.clean)(s)})});return i?window.cur.flistAllCont.insertBefore(t,window.cur.flistAllCont.firstChild):window.cur.flistAllCont.appendChild(t),!0},flistSelect(e,i,s){const n=(0,o.ge)("flist_item_wrap"+e),r=i.parentNode,c=Boolean(i.dataset.isOne);if("flist_item_sel"==r.id.slice(0,14)||(0,o.hasClass)(n,"flist_item_checked")){delete window.cur.flistSelected[e];for(let i=0;i<window.cur.flistSelectedList.length;i++)if(window.cur.flistSelectedList[i][0]==e){window.cur.flistSelectedList.splice(i,1);break}n&&(0,o.removeClass)(n,"flist_item_checked");const i=(0,o.ge)("flist_item_sel"+e);if(i&&((0,o.re)(i),window.cur.flistSelectedCnt>window.cur.flistSelInRow&&window.cur.flistSelectedList[window.cur.flistSelInRow-1])){const e=window.cur.flistSelectedList[window.cur.flistSelInRow-1];(0,o.ge)("flist_item_sel"+e[0])||window.cur.flistSelCont.insertBefore((0,o.ce)("div",{id:"flist_item_sel"+e[0],className:"flist_item_wrap",innerHTML:(0,o.rs)(window.cur.flistTpl,{id:e[0],name:e[1],photo:e[2],alt:(0,a.clean)(e[1])})}),(0,o.ge)("flist_sel_show_all"))}window.cur.flistSelectedCnt--,0===window.cur.flistSelectedCnt?((0,o.show)("flist_info"),window.cur.flistSelectedShowed||(0,o.hide)("flist_search_toggler_wrap")):window.cur.flistSelectedCnt>window.cur.flistSelInRow?((0,o.val)("flist_sel_show_all","+"+(window.cur.flistSelectedCnt-window.cur.flistSelInRow)),(0,o.removeClass)("flist_sel_show_all","unshown")):window.cur.flistSelectedCnt==window.cur.flistSelInRow&&(0,o.addClass)("flist_sel_show_all","unshown"),window.cur.flistLimit&&window.cur.flistSelectedCnt==window.cur.flistLimit-1&&(0,o.removeClass)(window.cur.flistAllCont,"flist_full"),(0,w.curBox)().changed=!0}else if(!(0,o.hasClass)(n,"flist_item_checked")){if(window.cur.flistLimit&&window.cur.flistSelectedCnt>=window.cur.flistLimit)return S.flistFull(s||window.event),!1;const i=(0,o.val)(n);if((0,o.addClass)(n,"flist_item_checked"),0==window.cur.flistSelectedCnt&&((0,o.hide)("flist_info"),(0,o.show)("flist_search_toggler_wrap")),window.cur.flistSelectedCnt++,window.cur.flistSelCont.insertBefore((0,o.ce)("div",{id:"flist_item_sel"+e,className:"flist_item_wrap",innerHTML:i}),window.cur.flistSelCont.firstChild),window.cur.flistSelectedCnt>window.cur.flistSelInRow){const e=(0,o.geByClass)("flist_item_wrap",window.cur.flistSelCont);(0,o.re)(e[e.length-1]),(0,o.val)("flist_sel_show_all","+"+(window.cur.flistSelectedCnt-window.cur.flistSelInRow)),(0,o.removeClass)("flist_sel_show_all","unshown")}window.cur.flistLimit&&window.cur.flistSelectedCnt>=window.cur.flistLimit&&S.flistFull(s||window.event);for(let i=0;i<window.cur.flistList.length;i++)if(window.cur.flistList[i]&&window.cur.flistList[i][0]==e){window.cur.flistSelectedList.unshift(window.cur.flistList[i]);break}window.cur.flistSelected[e]=1,window.cur.flistSearchStr&&S.flistSearch(!1)}return(0,o.toggleClass)("flist_cont","flist_select_items",window.cur.flistSelectedCnt>0),window.cur.flistCountStr&&(0,o.val)("flist_sel_summary",window.cur.flistSelectedCnt>0?(0,t.langNumeric)(window.cur.flistSelectedCnt,window.cur.flistCountStr):window.cur.flistNoSelStr),window.cur.flistScrollbar.update(),c&&this.submitFlistBox(),!1},flistFull(e){if(e){let i;(0,o.hasClass)(e.target,"flist_item_thumb")?i=e.target:((0,o.hasClass)(e.target,"flist_item")&&(i=e.target)||(i=(0,o.gpeByClass)("flist_item",e.target)))&&(i=(0,o.geByClass1)("flist_item_thumb",i)),i&&(window.tooltips&&tooltips.hideAll(),(0,u.showTooltip)(i,{text:window.cur.limitTooltip,className:"flist_max_size_tt",dir:"auto",slide:-15,shift:[15,10],nohide:1,nohideover:1,hasover:1}),setTimeout((()=>{window.tooltips&&tooltips.hide(i)}),2e3))}(0,o.addClass)(window.cur.flistAllCont,"flist_full")},flistSearch(e){e=(0,a.trim)(e),window.cur.flistSearchStr=e,window.cur.privacy&&window.cur.privacy.pagination&&!window.cur.flistSelectedShowed&&window.cur.flistIndex.list.length<window.cur.flistTotalCount&&e?S.flistSearchPagination():(window.cur.flistSearchList=[],window.cur.flistSearchTotal=-1,window.cur.flistSearchLoadStr="",clearTimeout(window.cur.flistSearchLoadMore),e?(window.cur.flistList=(window.cur.flistSelectedShowed?window.cur.flistSelectedIndex:window.cur.flistIndex).search(e),window.cur.flistSelection={re:new RegExp("("+e.replace(window.cur.flistIndex.delimiter,"|").replace(/[\/\\\(\)\[\]\{\}\*,]/g,"").replace(/^\||\|$/g,"")+")","gi"),val:'<em class="highlight">$1</em>'},window.cur.flistScrollbar.scrollTop(0)):(window.cur.flistList=window.cur.flistSelectedShowed?window.cur.flistSelectedList:window.cur.flistFriends,window.cur.flistSelection=!1,(0,o.val)(window.cur.flistSearchEl,""),(0,o.addClass)(window.cur.flistSearchContEl,"ui_search_field_empty")),window.cur.flistList.length?(window.cur.flistAllCont.innerHTML="",window.cur.flistShown=-1,S.flistMore()):(window.cur.flistAllCont.innerHTML="",window.cur.flistAllCont.append((0,o.ce)("div",{className:"flist_empty no_select",innerHTML:t.getLang("apps_no_friends_for_query")})),window.cur.flistShown=0))},flistSearchPagination(){if(window.cur.flistSearchLoading||window.cur.flistSearchLoadStr===window.cur.flistSearchStr&&window.cur.flistSearchList.length>=window.cur.flistSearchTotal||!window.cur.privacy)return;const e=window.cur.flistSearchStr;function i(){window.cur.flistSearchLoading=!0,n.ajax.post("al_friends.php",(0,a.extend)({},window.cur.privacy.chooseBoxOpts||{},{act:"select_friends_search",q:e,offset:window.cur.flistSearchLoadStr===e?window.cur.flistSearchList.length:0}),{onDone:(i,s)=>{window.cur.flistSearchLoadStr!==e&&(window.cur.flistSearchLoadStr=e,window.cur.flistShown=-1,window.cur.flistSearchList=[],window.cur.flistAllCont.innerHTML=""),window.cur.flistSearchTotal=+s,i.forEach((e=>{window.cur.flistSearchList.push(e)})),window.cur.flistList=window.cur.flistSearchList,S.flistDrawItems(),window.cur.flistSearchLoading=!1},onFail:()=>{window.cur.flistSearchLoading=!1}})}window.cur.flistSearchLoadMore&&clearTimeout(window.cur.flistSearchLoadMore),window.cur.flistSearchLoadStr===e?i():window.cur.flistSearchLoadMore=setTimeout(i,500)},flistToggleAllSelected(){window.cur.flistSelectedShowed?(window.cur.flistSelectedShowed=0,(0,o.removeClass)("flist_sel_show_all","flist_sel_showed_all"),(0,o.removeClass)("flist_search_toggler","on"),0===window.cur.flistSelectedCnt&&((0,o.hide)("flist_search_toggler_wrap"),(0,o.removeClass)("flist_cont","flist_select_items")),S.flistSearch(!1)):(window.cur.flistSelectedShowed=1,(0,o.addClass)("flist_sel_show_all","flist_sel_showed_all"),(0,o.addClass)("flist_search_toggler","on"),window.cur.flistList=window.cur.flistSelectedList,window.cur.flistAllCont.innerHTML="",window.cur.flistShown=-1,S.flistMore(),window.cur.flistSelectedIndex=new p.vkIndexer(window.cur.flistSelectedList,(e=>e[1]+" "+e[4]))),window.cur.flistSelection=!1,(0,o.val)(window.cur.flistSearchEl,"")},hideFriends(e,i){const s=window.cur.privacy[e][2];return(0,f.showBox)("al_friends.php",{act:"select_friends_box",from:"friends_privacy",Checked:s.join(",")},{stat:[window.jsc("web/privacy.js"),"privacy.css",window.jsc("web/indexer.js")]}),window.cur.onFlistSave=function(i,s,t){n.ajax.post("al_settings.php",{act:"hide_friends",hash:t,ids:i.join(",")},{onDone:(i,s)=>{(0,o.ge)("privacy_"+e+"_hide").innerHTML=i,window.cur.privacy[e]=s,window.cur.onPrivacyChanged&&window.cur.onPrivacyChanged(e)}})},!1},update(e,i){const s=(0,o.ge)("privacy_edit_"+e),n=window.cur.privacy[e],r=n[0],c=window.cur.privacy,l=c[e+"_types"]||c._types,d=c[e+"_lists"]||c._lists||{},a={};for(let e in d)d.hasOwnProperty(e)&&(a[parseInt(e)]=d[e]);if(s){const i=r==h.PRIVACY_CATEGORIES.FRIENDS,d=r==h.PRIVACY_CATEGORIES.FRIENDS_OF_FRIENDS,w=!l[r]&&e.match("profile_button"),u="list28";let f=w?l[u]:l[r];if(e===h.PRIVACY_KEYS.CALLS&&(i||d)){const e=c.hasOwnProperty(h.PRIVACY_KEYS.CALLS_HAS_MESSAGES)&&!c[h.PRIVACY_KEYS.CALLS_HAS_MESSAGES][0],s=c.hasOwnProperty(h.PRIVACY_KEYS.CALLS_IN_CONTACTS)&&!c[h.PRIVACY_KEYS.CALLS_IN_CONTACTS][0];e&&s?f=i?t.getLang("settings_options_friends_contacts_and_chat_partners"):t.getLang("settings_options_friends_friends_contacts_and_chat_partners"):e?f=i?t.getLang("settings_options_friends_and_chat_partners"):t.getLang("settings_options_friends_friends_and_chat_partners"):s&&(f=i?t.getLang("settings_options_friends_and_contacts"):t.getLang("settings_options_friends_friends_and_contacts"))}s.innerHTML=f;const p=(0,o.ge)("privacy_header");p&&(p.innerHTML=w?l[u]:l[r]);const _=(0,o.gpeByClass)("privacy_edit_wrap",s);if(_&&_.nextSibling&&!w)if(r==S.listsType){const e=[];for(let i in n[2])if(n[2].hasOwnProperty(i)){const s=-n[2][i],t=(s-1)%8+1;if(a[s]){let i;i=s<100?'<a href="/friends?section=list'+s+'" class="group'+t+'" role="listitem">'+a[s]+"</a>":'<span class="group'+t+'">'+a[s]+"</span>",e.push(i)}}_.nextSibling.innerHTML=(e.length?": ":"")+e.join(", ")}else _.nextSibling.innerHTML="";if(_&&(0,o.hasClass)(_,"privacy_graphic")){(0==r&&"hidden_friends"!==e||r==S.customType&&n[1]&&n[2]&&"0"==n[2][0]||i&&"appscall"===e||i&&"bdate_visibility"===e?o.removeClass:o.addClass)(_,"privacy_locked")}}window.cur.onPrivacyChanged&&window.cur.onPrivacyChanged(e,i?(0,_.fixPrivacyValueTypes)(i):i)},setValue(e,i){const s=window.cur.privacy[e],t=window.cur.onPrivacyChanged;window.cur.privacy[e]=i,window.cur.onPrivacyChanged=null,S.update(e,s),window.cur.onPrivacyChanged=t},someSaved(e,i,s,n){const r=window.cur.privacy[e];window.cur.privacy[e]=[S.someType,0,i,[]];const c=window.cur.privacy.lang||{},l=i.length;let d=[];for(let e=0;e<l&&e<5;++e){const t=i[e],r=n?s[e]:s[t],o=r[4].replace(/'/g,"");d.push('<a href="/'+(o||"id"+t)+'" onclick="return nav.go(this, event)">'+(r[5]||r[1])+"</a>")}d=d.join(", "),l>5&&(d+=" "+(c.some?t.getLang(c.some,l-5):t.getLang("privacy_N_friends_some",l-5)));const a=(0,o.ge)("privacy_edit_"+e),w=(0,o.gpeByClass)("privacy_edit_wrap",a),u=window.cur.privacy[e+"_types"]||window.cur.privacy._types;a.innerHTML=u[S.someType],w.nextSibling.innerHTML=": "+d,window.cur.onPrivacyChanged&&window.cur.onPrivacyChanged(e,r)},customSaved(e,i,s,n){const r=window.cur.privacy[e];window.cur.privacy[e]=i;const c=window.cur.privacy.lang||{};if(1==i[1]&&!i[3].length||i[0]==S.listsType)S.update(e,r);else if(i[0]==S.someType)S.someSaved(e,i[2],s,!0);else{const r=(0,o.ge)("privacy_edit_"+e),l=(0,o.gpeByClass)("privacy_edit_wrap",r),d=window.cur.privacy[e+"_types"]||window.cur.privacy._types,a=window.cur.privacy[e+"_lists"]||window.cur.privacy._lists||{};let w=d[S.listsType],u="";if(1==i[1])w=d[i[2][0]];else{u=[];const e=s.length;let i=!1;for(let t=0;t<e&&t<5;++t){const e=s[t],n=e[0];if(y.Ranges.isUserId(Number(n))){const s=e[4].replace(/'/g,"");i=!0,u.push('<a href="/'+(s||"id"+n)+'" onclick="return nav.go(this, event)">'+e[6]+"</a>")}else{const e=-n,i=(e-1)%8+1;u.push('<a href="/friends?section=list'+e+'" class="group'+i+'" role="listitem">'+a[e]+"</a>")}}i&&(w=d[S.someType]),u=": "+u.join(", "),e>5&&(u+=" "+t.getLang(c.some||"privacy_N_friends_some",e-5))}if(n.length){const e=n.length,i=[];for(let s=0;s<e&&s<5;++s){const e=n[s],t=e[0];if(y.Ranges.isUserId(Number(t))){const s=e[4].replace(/'/g,"");i.push('<a href="/'+(s||"id"+t)+'" onclick="return nav.go(this, event)">'+e[6]+"</a>")}else{const e=-t,s=(e-1)%8+1;i.push('<a href="/friends?section=list'+e+'" class="group'+s+'" role="listitem">'+a[e]+"</a>")}}u+=", "+t.getLang("global_privacy_except")+" "+i.join(", "),e>5&&(u+=" "+t.getLang("privacy_N_friends_more",e-5))}r.innerHTML=w,l.nextSibling.innerHTML=u,(0,o.hasClass)(l,"privacy_graphic")&&(i[1]&&i[2]&&"0"==i[2][0]?o.removeClass:o.addClass)(l,"privacy_locked"),window.cur.onPrivacyChanged&&window.cur.onPrivacyChanged(e)}},choose(e,i,s,t){const n=window.cur.privSel,r=window.cur.privacy._noselect||"chat_actions"===n;let c=window.cur.privacy[n];if(!window.cur.privacyNeedConfirm||t){if(r)return window.cur.onPrivacyChanged&&window.cur.onPrivacyChanged(n,i,s),S.qhide(),(0,l.cancelEvent)(e);if(i==S.customType){let e,i,s=[],t="";return c[0]==S.customType?(e=c[1],i=c[2],s=c[3]):c[0]==S.someType||c[0]==S.listsType?(e=0,i=c[2]):c[0]==S.specialTypes[0]?(e=1,i=["0"]):(e=1,i=c[2]),window.cur.onCprivSave=S.customSaved.pbind(n),window.cur.privacy.custom_box_type&&(t=window.cur.privacy.custom_box_type),(0,f.showBox)("al_friends.php",(0,a.extend)(window.cur.privacy.chooseBoxOpts||{},{act:"custom_privacy_box",type:e,plus:i.join(","),minus:s.join(","),opt:t,key:n}),{stat:["ui_controls.js","ui_controls.css"]})}if(i==S.someType){const e=c[0]==S.someType||c[0]==S.complexType&&0==c[1]?c[2].join(","):"";return window.cur.onFlistSave=function(e,i){S.someSaved(n,e,i)},(0,f.showTabbedBox)("al_friends.php",(0,a.extend)({},window.cur.privacy.chooseBoxOpts||{},{act:"select_friends_box",Checked:e,pagination:window.cur.privacy.pagination?1:""}),{stat:["ui_controls.js"]})}if(i==S.listsType){const t=(0,o.ge)("privacy_l_item"+s);if(!t&&n.match("profile_button"))c=window.cur.privacy[n]=[i,0,[-s],[]];else if("l_item_sel"==t.className){t.className="l_item";const e=(0,a.indexOf)(c[2],-s);if(-1!=e&&c[2].splice(e,1),!c[2].length&&"updates"!=n){const e=window.cur.privacy[n+"_types"]||window.cur.privacy._types,i=Object.keys(e);window.cur.privacy[n]=[(0,a.intval)(i[0]),1,[0],[]]}}else t.className="l_item_sel",c[0]!=i&&(c=window.cur.privacy[n]=[i,0,[],[]]),c[2].push(-s);return S.update(n,c),(0,l.cancelEvent)(e)}if("hidden_groups"===n)return 2==i?void(0,v.showModalHideGroups)(c[2],(e=>{c[0]=i,c[2]=e,S.update(n,c),S.qhide()})):(c[0]=i,S.update(n,c),void S.qhide());window.cur.privacy[n]=[i,1,[i],[]],S.update(n,c),S.qhide()}else window.cur.privacyNeedConfirm(n,i,(()=>{S.show((0,o.ge)("privacy_edit_"+n),e,n),S.choose(e,i,s,!0)}))},select(e,i){if(!i&&e===window.cur.privSelIndex)return;if(!1!==window.cur.privSelIndex){const e=(0,o.ge)("privacy_item"+window.cur.privSelIndex);e&&(e.className="item"),window.cur.privSelIndex==S.listsType&&window.cur.privacy[window.cur.privSel][0]!=S.listsType&&(0,o.hide)(e.nextSibling)}window.cur.privSelIndex=e;const s=(0,o.ge)("privacy_item"+window.cur.privSelIndex),t=window.cur.privSelIndex==S.someType?"_plus":"";s.nextSibling&&s.nextSibling.id=="privacy_item"+S.listsType&&(0,o.isVisible)(s.nextSibling.nextSibling)?s.className="last item_sel"+t:e==S.listsType?(0,o.show)(s.nextSibling):s.className="item_sel"+t},unselect(e){e==window.cur.privSelIndex&&((0,o.ge)("privacy_item"+e).className="item",window.cur.privSelIndex=!1)},hide(e){if(e&&e>0)return void(window.cur.hidePrivacyTimer=window.setTimeout((()=>S.hide(0)),e));clearTimeout(window.cur.hidePrivacyTimer);const i=(0,o.ge)("privacy_header");i&&(-1===e?((0,o.hide)(window.cur.privEl),i&&i.tt&&(0,a.isFunction)(i.tt.hide)&&i.tt.hide()):o.isVisible&&((0,r.fadeOut)(window.cur.privEl,200),i&&i.tt&&(0,a.isFunction)(i.tt.hide)&&i.tt.hide()),window.cur.privSel=window.cur.privSelIndex=!1,(0,l.removeEvent)(document,"click",S.qhide))},show(e,i,s){if((0,o.hasClass)(e,"privacy_link_disabled"))return(0,l.cancelEvent)(i);const t=window.cur.privacy[s],n=(0,o.gpeByClass)("privacy_edit_wrap",e);if(!t||!n)return;if(window.cur.onPrivacyShow&&window.cur.onPrivacyShow(s),window.cur.privEl||(window.cur.privEl=(0,o.ge)("privacy_dropdown"),window.cur.privEl&&(window.cur.privRows=window.cur.privEl.firstChild)),window.cur.privEl){if(window.cur.privEl.parentNode!=n){(0,o.re)(window.cur.privEl),window.cur.privEl=n.appendChild(window.cur.privEl);const e=(0,o.ge)("privacy_header");e&&e.tt&&(0,a.isFunction)(e.tt.hide)&&e.tt.hide()}}else window.cur.privEl=n.appendChild((0,o.ce)("div",{id:"privacy_dropdown",innerHTML:'<div class="rows rows__flex"></div>'})),window.cur.privRows=window.cur.privEl.firstChild,(0,l.addEvent)(window.cur.privEl,"mouseout",S.hide.pbind(500)),(0,l.addEvent)(window.cur.privEl,"mouseover",(()=>{clearTimeout(window.cur.hidePrivacyTimer)}));window.cur.privEl.className="privacy_dropdown privacy_dropdown_"+s,setTimeout(l.addEvent.pbind(document,"click",S.qhide),1);const r=window.cur.privacy[s+"_types"]||window.cur.privacy._types,c=window.cur.privacy[s+"_lists"]||window.cur.privacy._lists||{},d=window.cur.privacy[s+"_hidden"]||window.cur.privacy._hidden||{},w=(0,o.getStyle)(e,"fontSize")||parseInt(window.getComputedStyle(document.body).fontSize);(0,o.setStyle)(window.cur.privRows,{fontSize:w}),window.cur.privSelIndex=t[0],d[window.cur.privSelIndex]&&(window.cur.privSelIndex=0);const f=[];let p,h,_=Object.keys(c).length>0;f.push('<div class="header" onclick="Privacy.hide(-1)"><div id="privacy_header" class="header_label">'+e.innerHTML+"</div></div>"),f.push('<div class="body body__flex" role="list" aria-labelledby="privacy_who_can_view">');let v=Object.entries(r);const y=v.findIndex((e=>Number(e[0])===S.specialTypes[0]));if(-1!==y){const e=v.splice(y,1);v=[...e,...v]}for(let[e,i]of v){const s=b(e,i);s&&f.push(s)}function b(e,i){if(d[e])return"";p=e==window.cur.privSelIndex&&e!=S.listsType?"_sel":"";let s="",t="";if(s+=`onmouseover="Privacy.select('${e}')"`,s+="list28"===e?' onclick="Privacy.choose(event, 6, 28)"':` onclick="Privacy.choose(event, '${e}')"`,s+=` onkeydown="if (event.key === 'Tab') {if (event.shiftKey) {Privacy.select('${+e-1}')} else {Privacy.select('${+e+1}')}}"`,e==S.listsType&&_&&(t=' tabindex="-1"'),e==S.listsType){if(!_)return""}else s+=` onmouseout="Privacy.unselect('${e}')"`;return p&&e==S.someType&&(p+="_plus"),'<button role="listitem" class="item'+p+'" id="privacy_item'+e+'" '+s+t+'type="button">'+i+"</button>"}if(r[S.listsType]&&_){h=window.cur.privSelIndex!=S.listsType,f.push('<div id="privacy_lists" class="privacy_lists privacy_lists__flex">'),f.push('<div class="l_header" onclick="return cancelEvent(event)"><div class="l_header_label">'+r[S.listsType]+"</div></div>");for(let e in c)if(c.hasOwnProperty(e)){const i=parseInt(e);p=h?"":(0,a.inArray)(-i,t[2])?"_sel":"",f.push('<button class="l_item'+p+'" id="privacy_l_item'+i+'" onclick="Privacy.choose(event, '+S.listsType+", "+i+')"><div class="privacy_item_icon"></div><span class="l_item_text">'+c[e]+"</span></button>")}f.push("</div>")}f.push("</div>"),window.cur.privRows.innerHTML=f.join(""),window.cur.privSel=s;const g=(0,o.data)(window.cur.privEl,"tween");g&&g.stop(!0),(0,o.show)(window.cur.privEl),r[S.listsType]&&h&&(0,o.hide)("privacy_lists"),S.toup=!1,(0,o.getClientRectOffsetY)(window.cur.privEl)>0&&(0,o.getClientRectOffsetY)(window.cur.privEl,!1,(0,o.getSize)(window.cur.privEl)[1])>0&&(S.toup=!0),S.toup?(0,o.addClass)(window.cur.privEl,"pdd_to_up"):(0,o.removeClass)(window.cur.privEl,"pdd_to_up"),window.cur.privacy[s+"_ralign"]?(0,o.addClass)(window.cur.privEl,"pdd_ralign"):(0,o.removeClass)(window.cur.privEl,"pdd_ralign");const m=window.cur.privacy[s+"_help"],C=window.cur.privacy[s+"_help_w"];if(m){const e=(0,o.ge)("privacy_header"),i=(0,o.getSize)(e);(0,u.showTooltip)(e,{text:m,width:C||300,dir:"left",slideX:15,shift:[-(i[0]+10),-i[1]/2,0],nohide:!0})}return(0,l.cancelEvent)(i)},getValue(e){if(!window.cur.privacy||!window.cur.privacy[e])return"";const i=window.cur.privacy[e];let s=[];if(i[0]<S.customType||i[0]==S.contactsType||S.specialTypes.some((e=>i[0]==e)))s=[i[0]];else if(i[0]==S.someType)s=[4,i[2].join(",")];else if(i[0]==S.listsType){const e=[];for(let s in i[2])i[2].hasOwnProperty(s)&&e.push(-i[2][s]);s=[5,e.join(",")]}else s=[-1,i[1],i[2].join(","),i[3].join(",")];return s.join("_")}};S.qhide=S.hide.pbind(-1)},210367:(e,i,s)=>{var t=s(490712),n=s(369085);window.vk?.pe?.static_manager_dynamic_imports&&window.vk?.stDomain&&(s.p=window.vk.stDomain+"/dist/"),window.Privacy=n.privacy;try{window.stManager.done(window.jsc("web/privacy.js"))}catch(e){}requestIdleCallback((()=>{try{(0,t.statlogsValueEvent)("entries_requests",1,"privacy","web")}catch{}}),{timeout:5e3})},780061:(e,i,s)=>{s.d(i,{showModalHideGroups:()=>c});var t=s(474848),n=s(507607),r=s(272259),o=s(689938);function c(e,i){const c=(0,n.asyncComponent)((()=>Promise.all([s.e(91498),s.e(89631),s.e(21529),s.e(86274)]).then(s.bind(s,564350))),(({ModalHideGroupsWidget:e})=>e));(0,r.showMessageBoxModalSuspense)((s=>(0,t.jsx)(o.DIRootWebProvider,{children:(0,t.jsx)(c,{...s,selectedIds:e,onSave:i})})),{width:440})}},730874:(e,i,s)=>{s.d(i,{CURRENT_EVENT_SCREEN:()=>c,FOLLOWERS_MODE_ABOUT_MODAL_STEP:()=>r,FOLLOWERS_MODE_ONBOARDING_CLICK_TYPE_ENTRYPOINT:()=>l,FOLLOWERS_MODE_ONBOARDING_CONTEXT_PRIVACY:()=>o,PRIVACY_CATEGORIES:()=>n,PRIVACY_KEYS:()=>t});const t={PROFILE:"profile",SEARCH_ACCESS:"search_access",UPDATES:"updates",COMPANY_MESSAGES:"company_messages",PROFILE_CLOSED:"profile_closed",CONTACT_AVATAR:"contact_avatar",CALLS_FROM_COMMUNITY:"calls_from_community",CALLS_HAS_MESSAGES:"calls_has_messages",CALLS_IN_CONTACTS:"calls_in_contacts",CALLS:"calls",FOLLOWERS_MODE:"followers_mode"},n={ALL:0,FRIENDS:1,FRIENDS_OF_FRIENDS:2,ONLY_ME:3,ADVANCED_SETTINGS:4,SOME_FRIENDS:5,SOME_FRIENDS_LIST:6,CONTACTS:7},r=1,o="privacy",c="privacy",l="entrypoint"},606390:(e,i,s)=>{s.d(i,{fixPrivacyValueTypes:()=>l,getPrivacyValueFromCur:()=>c,isSpecialPrivacyKey:()=>n,savePrivacySetting:()=>d,savePrivacyShowSaved:()=>r,selectPrivacySettingElement:()=>o});var t=s(730874);function n(e){return[t.PRIVACY_KEYS.SEARCH_ACCESS,t.PRIVACY_KEYS.UPDATES,t.PRIVACY_KEYS.COMPANY_MESSAGES,t.PRIVACY_KEYS.PROFILE_CLOSED,t.PRIVACY_KEYS.CONTACT_AVATAR,t.PRIVACY_KEYS.CALLS_FROM_COMMUNITY,t.PRIVACY_KEYS.CALLS_HAS_MESSAGES,t.PRIVACY_KEYS.CALLS_IN_CONTACTS,t.PRIVACY_KEYS.FOLLOWERS_MODE].includes(e)}function r(e){window.uiPageBlock&&window.uiPageBlock.showSaved("privacy_edit_"+e)}function o(e){return document.querySelector(`._${e}`)}function c(e){if(window.cur.privacy&&Array.isArray(window.cur.privacy[e]))return l(window.cur.privacy[e])}function l(e){if(Array.isArray(e)){const[i,s,t,n]=e;return[parseInt(i),parseInt(s),Array.isArray(t)?t.map((e=>parseInt(e))):[],Array.isArray(n)?n.map((e=>parseInt(e))):[]]}}function d(e){return new Promise(((i,s)=>{window.ajax.post("al_friends.php?act=save_privacy",{key:e.key,val:e.value,hash:e.hash},{onDone:e=>{i(e)},onFail:e=>(s(e),!0)})}))}}},c={};function l(e){var i=c[e];if(void 0!==i)return i.exports;var s=c[e]={exports:{}};return o[e].call(s.exports,s,s.exports,l),s.exports}l.m=o,e=[],l.O=(i,s,t,n)=>{if(!s){var r=1/0;for(a=0;a<e.length;a++){for(var[s,t,n]=e[a],o=!0,c=0;c<s.length;c++)(!1&n||r>=n)&&Object.keys(l.O).every((e=>l.O[e](s[c])))?s.splice(c--,1):(o=!1,n<r&&(r=n));if(o){e.splice(a--,1);var d=t();void 0!==d&&(i=d)}}return i}n=n||0;for(var a=e.length;a>0&&e[a-1][2]>n;a--)e[a]=e[a-1];e[a]=[s,t,n]},l.n=e=>{var i=e&&e.__esModule?()=>e.default:()=>e;return l.d(i,{a:i}),i},s=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var n=Object.create(null);l.r(n);var r={};i=i||[null,s({}),s([]),s(s)];for(var o=2&t&&e;"object"==typeof o&&!~i.indexOf(o);o=s(o))Object.getOwnPropertyNames(o).forEach((i=>r[i]=()=>e[i]));return r.default=()=>e,l.d(n,r),n},l.d=(e,i)=>{for(var s in i)l.o(i,s)&&!l.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:i[s]})},l.f={},l.e=e=>Promise.all(Object.keys(l.f).reduce(((i,s)=>(l.f[s](e,i),i)),[])),l.u=e=>45458===e?"web/chunks/hls.c49a3f53.js":56229===e?"web/chunks/366130d1.async.1c06797d.js":30072===e?"web/chunks/showCaptchaPopup.a4740a52.js":19072===e?"web/chunks/left_menu_store.b41d694b.js":42255===e?"web/chunks/wikiModalExampleInitiator.bf570c13.js":56965===e?"web/chunks/stories_web_lib.ba126e07.js":17213===e?"web/chunks/2bd60279.async.ea157d31.js":42943===e?"web/chunks/video_web_lib.782f771d.js":53927===e?"web/chunks/questions_boxes_web.d05c4563.js":40482===e?"web/chunks/0ca8e07a.async.981f6895.js":12679===e?"web/chunks/2c4420c0.async.0fa14a60.js":40617===e?"web/chunks/93bd35f8.async.944fc663.js":27602===e?"web/chunks/2fea6d3f.async.fa8b17c6.js":24535===e?"web/chunks/4e9ddeeb.async.0371d26b.js":74336===e?"web/chunks/show_audio_playlist.c4ee742f.js":93033===e?"web/chunks/a6f550f7.async.84ccbfa1.js":89870===e?"web/chunks/5ad2d924.async.2e93ba52.js":17895===e?"web/chunks/money_transfer_box.50183b92.js":50905===e?"web/chunks/money_transfer.e2c2d345.js":21608===e?"web/chunks/bf8fbce1.async.1f467086.js":66118===e?"web/chunks/6fb21264.async.74f2b319.js":36237===e?"web/chunks/2fb8e07d.async.2c799e4e.js":56154===e?"web/chunks/cc6f5392.async.8d8a5bcd.js":58292===e?"web/chunks/437a8ce6.async.378b5454.js":49925===e?"web/chunks/8af15a4d.async.5eadc2fd.js":68349===e?"web/chunks/5f266f5f.async.3ed461f1.js":25459===e?"web/chunks/2c9432b5.async.06e9b990.js":84835===e?"web/chunks/unauth_action_box.29aa267e.js":23045===e?"web/chunks/0d674423.async.5458427b.js":71247===e?"web/chunks/364659da.async.59a0e75a.js":59886===e?"web/chunks/StoryPublisherV2.2ad86f85.js":70989===e?"web/chunks/4b497ab9.async.e13543c1.js":29311===e?"web/chunks/feed-client-nav-skeleton.774b8a5c.js":56091===e?"web/chunks/feed-client-nav-async-right-block.323099af.js":86274===e?"web/chunks/ModalHideGroups.55d4796e.js":73248===e?"web/chunks/5792d39d.async.ad94820b.js":42099===e?"web/chunks/58131fc9.async.2e7c43e3.js":51943===e?"web/chunks/VideoUpload.8e2a8bde.js":1715===e?"web/chunks/AudioLongtapModal.d6e38506.js":96649===e?"web/chunks/ecomm_market_product_attach.e1343ea9.js":51713===e?"web/chunks/voice_message_player.172315d5.js":9925===e?"web/chunks/speech.257a7e64.js":73214===e?"web/chunks/SilentModeForms.c8c406fe.js":69706===e?"web/chunks/e0383668.async.b99eb451.js":43802===e?"web/chunks/d5b01a55.async.6a0ae0bd.js":10504===e?"web/chunks/StoriesCreatorVKApp.f31236ac.js":54833===e?"web/chunks/performance-stats.99d41d48.js":57088===e?"web/chunks/79f739a7.async.7b7d443d.js":32643===e?"web/chunks/story_blocks.0da84ca4.js":13410===e?"web/chunks/283c0b16.async.33f5912b.js":17448===e?"web/chunks/b1bc3b17.async.86dcbc32.js":99370===e?"web/chunks/VideoEditorModal.cd800b6f.js":95805===e?"web/chunks/PublishClipToVideoModal.fb197348.js":91906===e?"web/chunks/VideoUploadModal.07557685.js":74205===e?"web/chunks/VideoExternalUploadModal.15030051.js":36637===e?"web/chunks/ClipUploadModal.bb853a52.js":18493===e?"web/chunks/AddClipToVideoBlock.d29cc984.js":40953===e?"web/chunks/AddClipToVideoModal.6f004f3e.js":60274===e?"web/chunks/ClipPlayerModule.600f713b.js":40074===e?"chunks/"+e+".4d8e0cba.js":37557===e?"chunks/"+e+".46b5840d.js":60899===e?"chunks/"+e+".0471a2c1.js":29290===e?"chunks/"+e+".b54ef2c0.js":{762:"web/chunks/state-management",17356:"web/chunks/videoplayer-interactive",57407:"web/chunks/shopify",79210:"web/chunks/audioplayer-lib"}[e]+"."+{762:"a46c500d",17356:"95a5926a",57407:"78df6599",79210:"1c52d153"}[e]+".js",l.miniCssF=e=>30072===e?"web/chunks/eba149c1.css":{74336:1,17895:1,50905:1}[e]?"web/chunks/43d06ff5.css":59886===e?"web/chunks/c3646f82.css":86274===e?"web/chunks/623afd86.css":51943===e?"web/chunks/443c0dba.css":1715===e?"web/chunks/4aa73755.css":96649===e?"web/chunks/8272fe04.css":73214===e?"web/chunks/122e7a6e.css":10504===e?"web/chunks/8a71df77.css":32643===e?"web/chunks/1deee1aa.css":99370===e?"web/chunks/aa88a2a7.css":95805===e?"web/chunks/70c35bc4.css":{91906:1,74205:1,36637:1}[e]?"web/chunks/f89919fd.css":18493===e?"web/chunks/85bd25a0.css":40953===e?"web/chunks/d66415b4.css":60274===e?"web/chunks/a9cca8ef.css":79210===e?"web/chunks/audioplayer-lib.93b52d88.css":void 0,l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),t={},l.l=(e,i,s,n)=>{if(t[e])t[e].push(i);else{var r,o;if(void 0!==s)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var a=c[d];if(a.getAttribute("src")==e||a.getAttribute("data-webpack")=="vk:"+s){r=a;break}}r||(o=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,l.nc&&r.setAttribute("nonce",l.nc),r.setAttribute("data-webpack","vk:"+s),r.src=e),t[e]=[i];var w=(i,s)=>{r.onerror=r.onload=null,clearTimeout(u);var n=t[e];if(delete t[e],r.parentNode&&r.parentNode.removeChild(r),n&&n.forEach((e=>e(s))),i)return i(s)},u=setTimeout(w.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=w.bind(null,r.onerror),r.onload=w.bind(null,r.onload),o&&document.head.appendChild(r)}},l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.p="/dist/",n=e=>new Promise(((i,s)=>{var t=l.miniCssF(e),n=l.p+t;if(((e,i)=>{for(var s=document.getElementsByTagName("link"),t=0;t<s.length;t++){var n=(o=s[t]).getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(n===e||n===i))return o}var r=document.getElementsByTagName("style");for(t=0;t<r.length;t++){var o;if((n=(o=r[t]).getAttribute("data-href"))===e||n===i)return o}})(t,n))return i();((e,i,s,t)=>{var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.onerror=n.onload=r=>{if(n.onerror=n.onload=null,"load"===r.type)s();else{var o=r&&("load"===r.type?"missing":r.type),c=r&&r.target&&r.target.href||i,l=new Error("Loading CSS chunk "+e+" failed.\n("+c+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=o,l.request=c,n.parentNode.removeChild(n),t(l)}},n.href=i,document.head.appendChild(n)})(e,n,i,s)})),r={53654:0},l.f.miniCss=(e,i)=>{r[e]?i.push(r[e]):0!==r[e]&&{1715:1,10504:1,17895:1,18493:1,30072:1,32643:1,36637:1,40953:1,50905:1,51943:1,59886:1,60274:1,73214:1,74205:1,74336:1,79210:1,86274:1,91906:1,95805:1,96649:1,99370:1}[e]&&i.push(r[e]=n(e).then((()=>{r[e]=0}),(i=>{throw delete r[e],i})))},(()=>{l.b=document.baseURI||self.location.href;var e={53654:0};l.f.j=(i,s)=>{var t=l.o(e,i)?e[i]:void 0;if(0!==t)if(t)s.push(t[2]);else{var n=new Promise(((s,n)=>t=e[i]=[s,n]));s.push(t[2]=n);var r=l.p+l.u(i),o=new Error;l.l(r,(s=>{if(l.o(e,i)&&(0!==(t=e[i])&&(e[i]=void 0),t)){var n=s&&("load"===s.type?"missing":s.type),r=s&&s.target&&s.target.src;o.message="Loading chunk "+i+" failed.\n("+n+": "+r+")",o.name="ChunkLoadError",o.type=n,o.request=r,t[1](o)}}),"chunk-"+i,i)}},l.O.j=i=>0===e[i];var i=(i,s)=>{var t,n,[r,o,c]=s,d=0;if(r.some((i=>0!==e[i]))){for(t in o)l.o(o,t)&&(l.m[t]=o[t]);if(c)var a=c(l)}for(i&&i(s);d<r.length;d++)n=r[d],l.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return l.O(a)},s=self.webpackChunkvkweb=self.webpackChunkvkweb||[];s.forEach(i.bind(null,0)),s.push=i.bind(null,s.push.bind(s))})();var d=l.O(void 0,[91498,50560,89631,85172,21529,35623,81765,23592],(()=>l(210367)));d=l.O(d)})();