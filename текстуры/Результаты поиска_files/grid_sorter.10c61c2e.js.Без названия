(()=>{"use strict";var t,e={645625:(t,e,i)=>{i.d(e,{default:()=>a});var o=i(688701),s=i(507035),n=i(452314),r=i(879007),l=i(317412);function h(t,e,i){if((0,r.isObject)(e)?i=e:this._dragElClass=e,this.options=(0,r.extend)({dragThreshold:h.DRAG_THRESHOLD_DIST},i),this._contEl=(0,n.ge)(t),this._contEl){this._excludedCount=0;for(let t=0;t<this._contEl.children.length;t++)this._contEl.children[t].getAttribute("nodrag")&&this._excludedCount++;(0,l.addEvent)(this._contEl,"mousedown",this._ev_mousedown_handler=this._onMouseDown.bind(this)),(0,n.setStyle)(this._contEl,"position","relative"),this._inited=!0,this._updateScrollbar=this._initUpdaterScrollbar()}}h.AUTO_SCROLL_DY=10,h.DRAG_THRESHOLD_DIST=0,h.AUTO_SCROLL_DISTANCE_THRESHOLD=300,h.AUTO_SCROLL_GAP=300,h.prototype.destroy=function(){this._inited&&(this._inited=!1,this._deinitEvents(!0))},h.prototype._getParentDragItemEl=function(t){let e,i=t;for(;i&&(e=(0,n.domPN)(i))!==this._contEl;)i=e;return i===this._curPlaceholderEl&&(i=null),i},h.prototype._onKey=function(t){t.keyCode===l.KEY.ESC&&this.isCurrentlyDragging()&&this._onMouseUp()},h.prototype.forceFinishDrag=function(t){this.isCurrentlyDragging()?(this.onDragFinish=t,this._onMouseUp(!0)):t()},h.prototype._onMouseDown=function(t){if(this._disabled||0!=t.button||this._curDragEl||(0,n.attr)(t.target,"nodrag")||this._dragElClass&&!(0,n.domClosest)(this._dragElClass,t.target))return;let e=t.target;for(;e&&e!==window.document;){if((0,r.intval)((0,n.domData)(e,"nodrag")))return;e=(0,n.domPN)(e)}const i=this._getParentDragItemEl(t.target);if(!i||(0,n.attr)(i,"nodrag"))return;if((0,n.re)((0,n.geByClass1)("ui_gridsorter_placeholder"),this._contEl),this._contInfo=this._contInfo||{prevSize:(0,n.getSize)(this._contEl)},this._ensureGridIsActual(),this._grid.length<=1)return;const o=window.getComputedStyle(i),s=(0,n.getXY)(i);this._initial={candidateEl:i,x:t.clientX,y:t.clientY,itemMargin:{x:parseInt(o.marginLeft),y:parseInt(o.marginTop)},shift:{x:t.pageX-s[0],y:t.pageY-s[1]}},(0,l.addEvent)(document,"mousemove",this._ev_mousemove_handler=this._onMouseMove.bind(this)),(0,l.addEvent)(document,"mouseup",this._ev_mouseup_handler=this._onMouseUp.bind(this)),(0,l.addEvent)(document,"keydown",this._ev_keydown_handler=this._onKey.bind(this)),cur.cancelClick=!1,(0,l.cancelEvent)(t)},h.prototype._dist=function(t){return Math.abs(t.clientX-this._initial.x)+Math.abs(t.clientY-this._initial.y)},h.prototype._onMouseUp=function(t){const e=this._curDragEl;let i=!t;if(!0===t&&(t=void 0),this._curDragEl){this._curDragEl=null,(0,n.removeClass)(e,"ui_gridsorter_moveable_notrans"),this._curOverCell||(this._curOverCell={el:this._curPlaceholderEl,pos:(0,n.getXY)(this._curPlaceholderEl),size:(0,n.getSize)(this._curPlaceholderEl)});const o=this._curOverCell.pos,s=this._curOverCell.el,r=this._grid[this._curDragCellIndex],h=r&&r.size;(0,n.gpeByClass)("_ape_item_list",e)&&(o[0]+=20,o[1]+=20),h&&this._isShiftToLeft&&(o[1]-=h[1]-this._curOverCell.size[1]),setTimeout((()=>{if(i){for(let t=0,e=this._grid.length;t<e;t++){const e=this._grid[t];e.dirty&&this._setPos(e.el,{left:0,top:0})}this._setPos(e,this._initialCurDragPos)}else this._setPos(e,{left:o[0],top:o[1]})})),setTimeout((()=>{if((0,n.re)(this._curPlaceholderEl),(0,n.removeClass)(this._contEl,"ui_gridsorter_cont"),this.options.dragCls&&(0,n.removeClass)(e,this.options.dragCls),!this._inited)return;let t;if(i){let t=this._grid.length;for(let e=0;e<t;e++){const t=this._grid[e];t.dirty&&this._setPos(t.el,{left:null,top:null})}this._setPos(e,{left:null,top:null,width:null,height:null})}else{let i;t=this._isShiftToLeft?(0,n.domNS)(s):s,this._contEl.insertBefore(e,t);let o=-1,r=this._initial.hasInlineSize;this._setPos(e,{left:null,top:null}),r||(0,n.setStyle)(e,{width:null,height:null});let l=this._grid.length;for(let t=0;t<l;t++){const l=this._grid[t];(l.dirty||l.el===e)&&(this._setPos(l.el,{left:null,top:null}),r||(0,n.setStyle)(l.el,{width:null,height:null}),l.pos=this._calcElementPos(l.el),l.dirty=!1),l.el===e?i=t:l.el===s&&(o=t)}if(o>=0){const t=this._grid.splice(i,1);this._grid.splice(o,0,t[0])}}(0,n.removeClass)(e,"ui_gridsorter_moveable"),this._curOverCell=this._curPlaceholderEl=null,i&&this.update(),this.options.onDragFinish&&this.options.onDragFinish(e),s!==e&&!i&&this.options.onReorder&&this.options.onReorder(e,t,(0,n.domPS)(e)),this.onDragFinish&&(this.onDragFinish(),this.onDragFinish=void 0)}),210),t&&this._dist(t)>5&&((0,l.cancelEvent)(t),cur.cancelClick=!0)}this._updateScrollbar(),this._deinitEvents(),e&&this._overEl&&this.options.onDragLeave&&this.options.onDragLeave(this._overEl,e),i||e&&this._overEl&&this.options.onDragDrop&&(i=this.options.onDragDrop(this._overEl,e)),this._overEl=null},h.prototype._deinitEvents=function(t){t&&(this._onMouseUp(),(0,l.removeEvent)(this._contEl,"mousedown",this._ev_mousedown_handler)),clearTimeout(this._autoScrollTO),this._autoScrollTO=!1,this._ev_mousemove_handler&&(0,l.removeEvent)(document,"mousemove",this._ev_mousemove_handler),this._ev_mouseup_handler&&(0,l.removeEvent)(document,"mouseup",this._ev_mouseup_handler),this._ev_keydown_handler&&(0,l.removeEvent)(document,"keydown",this._ev_keydown_handler)},h.prototype._setPos=function(t,e){this.options.noPosTransform||!this._hasTranslateFeauture&&!(this._hasTranslateFeauture=window.getComputedStyle(t).getPropertyValue("transform"))?(0,n.setStyle)(t,(0,r.extend)({transform:null},e)):null===e.left||null===e.top?(0,n.setStyle)(t,{transform:null,top:null,left:null}):(0,n.setStyle)(t,{transform:"translate("+e.left+"px, "+e.top+"px)",top:null,pos:null})},h.prototype._recalc=function(){const t=this._curDragEl,e=this._curOverCell.el;if(this._initGrid(),e===t){let e=this._grid.length;for(let i=0;i<e;i++){const e=this._grid[i];e.el!==t&&e.dirty&&(e.dirty=!1,this._setPos(e.el,{left:null,top:null}))}return}let i=0,o=!1,s=!1,n=this._grid.length;for(let i=0;i<n;i++){const s=this._grid[i];if(s.el===t){o=!0;break}if(s.el===e){o=!1;break}}this._isShiftToLeft=o;let r=o?0:this._grid.length-1,l=o?this._grid.length:-1,h=o?1:-1,a=[0,0];for(;r!==l;r+=h){const n=this._grid[r];if(2!==i)if(n.el!==t){if(n.el===e&&i++,1===i||2===i){let t=0,e=0;o?(t=s.pos[0]+a[0],e=s.pos[1]+a[1],a[0]+=n.size[0]-s.size[0],a[1]+=n.size[1]-s.size[1]):(a[0]+=s.size[0]-n.size[0],a[1]+=s.size[1]-n.size[1],t=s.pos[0]+a[0],e=s.pos[1]+a[1]),this._setPos(n.el,{left:t-n.pos[0],top:e-n.pos[1]}),n.dirty=!0}else n.dirty&&(this._setPos(n.el,{left:null,top:null}),n.dirty=!1);s=n}else i++,s=n;else n.dirty&&(this._setPos(n.el,{left:null,top:null}),n.dirty=!1),s=n}},h.prototype.disable=function(){this._disabled=!0},h.prototype.enable=function(){this._disabled=!1,this._initGrid(!0)},h.prototype.update=function(){this._disabled||this._initGrid(!0)},h.prototype._ensureGridIsActual=function(){this._initGrid()},h.prototype._needGridUpdate=function(){if(!this._grid)return 1;this._contInfo.prevSize=this._contInfo.prevSize||(0,n.getSize)(this._contEl);let t=0,e=this._contEl.children.length-this._excludedCount-(0,r.intval)(!!this._curPlaceholderEl);if(e!==this._grid.length)t=e>this._grid.length?2:1,this._contInfo.prevSize=(0,n.getSize)(this._contEl);else{let e=(0,n.getSize)(this._contEl),i=this._contInfo.prevSize;(Math.abs(i[0]-e[0])>5||Math.abs(i[1]-e[1])>5)&&(t=1),this._contInfo.prevSize=e}return t},h.prototype._initGrid=function(t){let e=t?1:this._needGridUpdate();if(!e)return;1===e&&(this._grid=[],this._contInfo&&(delete this._contInfo.pos,delete this._contInfo.size));let i=this._grid?this._grid[this._grid.length-1]:null;this._grid=this._grid||[];let o,s=!!i,r=this._contEl.children;if(!r.length)return;let l=this._getItemMargins();for(let t=this._curDragEl?this._grid.length:0,e=r.length;t<e;t++){let e=r[t];i&&e===i.el?s=!1:s||e===this._curPlaceholderEl||e.getAttribute("nodrag")||(o=(0,n.getSize)(e),o[0]+=l[0],o[1]+=l[1],this._grid.push({el:e,size:o,pos:this._calcElementPos(e)}))}},h.prototype._getRelativeMousePos=function(t){let e=this._getContPos(),i=this._getContShift();return{left:t.clientX-e[0]-i[0],top:t.clientY-e[1]-i[1]}},h.prototype._updateDraggablePosition=function(t){if(!this._curDragEl)return;let e=this._getRelativeMousePos(t),i=this._getItemShift(),o=this._getContShift(),s=this._getContSize(),r=e.top-this._initial.shift.y-i[1]+o[1];this.options.limitBottomMove&&(r=Math.min(r,s[1]+30)),(0,n.hasClass)(this._contEl,"_ape_item_list")&&(r+=this._contEl.scrollTop),this._setPos(this._curDragEl,{left:e.left-this._initial.shift.x-i[0]+o[0],top:r}),window.AudioPage&&window.AudioPage.onUpdateDraggablePosition&&window.AudioPage.onUpdateDraggablePosition()},h.prototype._getContShift=function(){if(this._contInfo=this._contInfo||{},!this._contInfo.shift){let t=window.getComputedStyle(this._contEl);this._contInfo.shift=[parseFloat(t.paddingLeft),parseFloat(t.paddingTop)]}return this._contInfo.shift},h.prototype._getContSize=function(){return this._contInfo=this._contInfo||{},this._contInfo.size=(0,n.getSize)(this._contEl),this._contInfo.size},h.prototype._getContPos=function(){return this._contInfo=this._contInfo||{},this._contInfo.pos=(0,n.getXY)(this._contEl),this._contInfo.pos[1]-=(0,o.scrollGetY)(),this._contInfo.pos},h.prototype._getItemShift=function(){if(this._contInfo=this._contInfo||{},!this._contInfo.itemShift){let t=window.getComputedStyle((0,n.domFC)(this._contEl));this._contInfo.itemShift=[parseFloat(t.marginLeft),parseFloat(t.marginTop)]}return this._contInfo.itemShift},h.prototype._getItemMargins=function(){if(this._contInfo=this._contInfo||{},!this._contInfo.itemMargins){let t=window.getComputedStyle((0,n.domFC)(this._contEl));this._contInfo.itemMargins=[parseFloat(t.marginLeft)+parseFloat(t.marginRight),parseFloat(t.marginTop)+parseFloat(t.marginBottom)]}return this._contInfo.itemMargins},h.prototype._calcElementPos=function(t){let e=this._getContShift(),i=this._getItemShift();return[t.offsetLeft-e[0]-i[0],t.offsetTop-e[1]-i[1]]},h.prototype.isCurrentlyDragging=function(){return!!this._curDragEl},h.prototype._initUpdaterScrollbar=function(){return(0,s.throttle)((t=>{const e=this.options.wrapNode||t;let i=(0,n.data)(e,"sb");i&&i.update(!1,!0)}),500)},h.prototype._onMouseMove=function(t){const e=()=>this.options.wrapNode?this.options.wrapNode.scrollTop:(0,o.scrollGetY)(),i=t=>{this.options.wrapNode?this.options.wrapNode.scrollTop=t:(0,o.scrollToY)(t,0,!1,!0)};if(this._curDragEl){this._ensureGridIsActual(),!t&&(t={clientX:this._lastMousePos.x,clientY:this._lastMousePos.y}),this._lastMousePos={x:t.clientX,y:t.clientY},this._updateDraggablePosition(t);let s=this._getContSize(),r=this._getRelativeMousePos(t),l=!1;if((0,n.hasClass)(this._contEl,"_ape_item_list")&&(r.top+=this._contEl.scrollTop),r.left>0&&r.left<s[0]&&r.top>0&&r.top<s[1]){let t=0,e=this._grid.length-1,i=50;for(;i;){let o=t+Math.floor((e-t)/2);const s=this._grid[o];if(r.left>s.pos[0]&&r.top>s.pos[1]&&r.left<s.pos[0]+s.size[0]&&r.top<s.pos[1]+s.size[1]){l=s;break}if(t===e)break;r.top<s.pos[1]||r.left<s.pos[0]&&r.top<s.pos[1]+s.size[1]?e=e===o?e-1:o:t=t===o?t+1:o,i--}}else{let t,e,i,o=this._grid.length,s=999999;for(let n=0;n<o;n++){const o=this._grid[n];e=r.left-(o.pos[0]+o.size[0]/2),i=r.top-(o.pos[1]+o.size[1]/2);const l=e*e+i*i;s>l&&(s=l,t=o)}l=t}!l||this._curOverCell&&this._curOverCell.el===l.el||(this._curOverCell=l,this._recalc());{let s,r,l,h,a=0;if(this.options.wrapNode)s=h=this.options.wrapNode,r=(0,n.getSize)(s),l=(0,n.getXY)(s),l[1]-=(0,o.scrollGetY)(),a=t.clientY;else{let e=window,i=document.documentElement,o=document.body,s=e.innerWidth||i.clientWidth||o.clientWidth,n=e.innerHeight||i.clientHeight||o.clientHeight;h=e.bodyNode,r=[s,n],l=[0,0],a=t.clientY}let _=Math.max(20,r[1]/10),d=l[1]+_-a,c=_-(l[1]+r[1]-a);if(c>0||d>0){let t=Math.min(1,d/_),o=Math.min(1,c/_);this._autoScrollTO||(this._autoScrollTO=setTimeout((()=>{this._autoScrollTO=!1;let s=e();i(s+16*(t>0?-t:o)),s!==h.scrollTop&&(this._updateScrollbar(h),this._onMouseMove())}),20))}}if(this.options.onDragOverElClass){let e=t.target;(0,n.hasClass)(e,this.options.onDragOverElClass)||(e=(0,n.gpeByClass)(this.options.onDragOverElClass,e))?this._overEl!==e&&(this._overEl&&this.options.onDragLeave&&this.options.onDragLeave(this._overEl,this._curDragEl),this.options.onDragEnter&&this.options.onDragEnter(e,this._curDragEl),this._overEl=e):(this._overEl&&this.options.onDragLeave&&this.options.onDragLeave(this._overEl,this._curDragEl),this._overEl=null)}}else if(this._dist(t)>this.options.dragThreshold){this._curDragEl=this._initial.candidateEl;let e=this._grid.length;for(let t=0;t<e;t++)if(this._grid[t].el===this._curDragEl){this._curDragCellIndex=t;break}this.options.dragCls&&(0,n.addClass)(this._curDragEl,this.options.dragCls);const i=(0,n.getSize)(this._curDragEl),o=(0,n.getXY)(this._curDragEl),s=window.getComputedStyle(this._curDragEl),r=this._getContPos();this._initial.hasInlineSize=!(!this._curDragEl.style.width&&!this._curDragEl.style.height),(0,n.setStyle)(this._curDragEl,{width:i[0],height:i[1]}),this._initialCurDragPos={left:o[0]-r[0],top:o[1]-r[1]-document.body.scrollTop},this._curPlaceholderEl=(0,n.ce)("div",{className:"ui_gridsorter_placeholder"}),(0,n.setStyle)(this._curPlaceholderEl,{width:i[0]+parseFloat(s.marginLeft)+parseFloat(s.marginRight),height:i[1]+parseFloat(s.marginTop)+parseFloat(s.marginBottom)}),this._contEl.insertBefore(this._curPlaceholderEl,this._curDragEl),(0,n.addClass)(this._curDragEl,"ui_gridsorter_moveable"),(0,n.addClass)(this._curDragEl,"ui_gridsorter_moveable_notrans"),(0,n.addClass)(this._contEl,"ui_gridsorter_cont"),this._onMouseMove(t),this._updateDraggablePosition(t),this.options.onDragStart&&this.options.onDragStart(this._curDragEl)}(0,l.cancelEvent)(t)};const a=h},801761:(t,e,i)=>{var o=i(490712),s=i(645625);window.vk?.pe?.static_manager_dynamic_imports&&window.vk?.stDomain&&(i.p=window.vk.stDomain+"/dist/"),window.GridSorter=s.default;try{window.stManager.done(window.jsc("web/grid_sorter.js"))}catch(t){}requestIdleCallback((()=>{try{(0,o.statlogsValueEvent)("entries_requests",1,"grid_sorter","web")}catch{}}),{timeout:5e3})}},i={};function o(t){var s=i[t];if(void 0!==s)return s.exports;var n=i[t]={exports:{}};return e[t].call(n.exports,n,n.exports,o),n.exports}o.m=e,t=[],o.O=(e,i,s,n)=>{if(!i){var r=1/0;for(_=0;_<t.length;_++){for(var[i,s,n]=t[_],l=!0,h=0;h<i.length;h++)(!1&n||r>=n)&&Object.keys(o.O).every((t=>o.O[t](i[h])))?i.splice(h--,1):(l=!1,n<r&&(r=n));if(l){t.splice(_--,1);var a=s();void 0!==a&&(e=a)}}return e}n=n||0;for(var _=t.length;_>0&&t[_-1][2]>n;_--)t[_]=t[_-1];t[_]=[i,s,n]},o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var i in e)o.o(e,i)&&!o.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},o.e=()=>Promise.resolve(),o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.p="/dist/",(()=>{var t={28924:0};o.O.j=e=>0===t[e];var e=(e,i)=>{var s,n,[r,l,h]=i,a=0;if(r.some((e=>0!==t[e]))){for(s in l)o.o(l,s)&&(o.m[s]=l[s]);if(h)var _=h(o)}for(e&&e(i);a<r.length;a++)n=r[a],o.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return o.O(_)},i=self.webpackChunkvkweb=self.webpackChunkvkweb||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var s=o.O(void 0,[35623],(()=>o(801761)));s=o.O(s)})();