/*! For license information please see bfb56a2c.b798efd8.js.LICENSE.txt */
"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[82314],{433376:(e,t,r)=>{r.d(t,{Icon12Add:()=>o});var o=(0,r(844990).makeIcon)("Icon12Add","add_12","0 0 12 12",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 12 12" id="add_12"><path d="M6.75 1.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5z" /></symbol>',12,12,!1,void 0)},235930:(e,t,r)=>{r.d(t,{Icon20AddCircleOutline:()=>o});var o=(0,r(844990).makeIcon)("Icon20AddCircleOutline","add_circle_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="add_circle_outline_20"><path fill="currentColor" fill-rule="evenodd" d="M10 18.5a8.5 8.5 0 1 0 0-17 8.5 8.5 0 0 0 0 17m7-8.5a7 7 0 1 1-14 0 7 7 0 0 1 14 0m-7 4a.75.75 0 0 1-.75-.75v-2.5h-2.5a.75.75 0 0 1 0-1.5h2.5v-2.5a.75.75 0 0 1 1.5 0v2.5h2.5a.75.75 0 0 1 0 1.5h-2.5v2.5A.75.75 0 0 1 10 14" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},185372:(e,t,r)=>{r.d(t,{Icon20BrushOutline:()=>o});var o=(0,r(844990).makeIcon)("Icon20BrushOutline","brush_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="brush_outline_20"><path fill-rule="evenodd" d="M6.667 12.493c-1.006 0-1.77.77-1.814 1.726-.064 1.352-.707 2.16-1.285 2.65.528.155 1.268.213 2.226-.072 1.903-.567 2.687-1.724 2.687-2.613 0-.897-.775-1.69-1.814-1.69ZM3.36 14.148a3.295 3.295 0 0 1 3.308-3.156c1.791 0 3.31 1.392 3.31 3.192 0 1.806-1.499 3.38-3.758 4.052-2.157.642-3.64-.025-4.348-.548a.9.9 0 0 1-.293-.353.84.84 0 0 1-.036-.614c.15-.46.637-.658.987-.938.382-.305.789-.761.83-1.635M15.702 2.001a1.61 1.61 0 0 1 2.261-.07 1.69 1.69 0 0 1 .17 2.287l-6.08 7.498a.746.746 0 0 1-1.052.108.753.753 0 0 1-.108-1.056l6.074-7.491a.185.185 0 0 0-.017-.242c-.067-.061-.133-.026-.202.04L9.745 9.783a.746.746 0 0 1-1.057-.025.753.753 0 0 1 .025-1.061z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},665561:(e,t,r)=>{r.d(t,{Icon20ChevronRight:()=>o});var o=(0,r(844990).makeIcon)("Icon20ChevronRight","chevron_right_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="chevron_right_20"><path fill-rule="evenodd" d="M7.293 4.293a1 1 0 0 1 1.414 0l5 5a1 1 0 0 1 0 1.414l-5 5a1 1 0 0 1-1.414-1.414L11.586 10 7.293 5.707a1 1 0 0 1 0-1.414" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},510348:(e,t,r)=>{r.d(t,{Icon20CropOutline:()=>o});var o=(0,r(844990).makeIcon)("Icon20CropOutline","crop_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="crop_outline_20"><path fill-rule="evenodd" d="M6.001 1.75a.75.75 0 1 0-1.5 0v2.744H1.75a.75.75 0 0 0 0 1.5H4.5v7.092a2.417 2.417 0 0 0 2.417 2.418h7.085v2.746a.75.75 0 1 0 1.5 0v-2.746h2.747a.75.75 0 0 0 0-1.5H6.918a.917.917 0 0 1-.917-.918zm2.75 2.747a.75.75 0 0 0 0 1.5h4.342c.506 0 .917.412.917.918v4.33a.75.75 0 1 0 1.5 0v-4.33a2.417 2.417 0 0 0-2.417-2.418H8.752Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},846696:(e,t,r)=>{r.d(t,{Icon20FilterOutline:()=>o});var o=(0,r(844990).makeIcon)("Icon20FilterOutline","filter_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="filter_outline_20"><path fill="currentColor" fill-rule="evenodd" d="M7.5 7.75a1 1 0 1 1 0-2 1 1 0 0 1 0 2M5.114 6a2.501 2.501 0 0 1 4.772 0h6.364a.75.75 0 0 1 0 1.5H9.886a2.501 2.501 0 0 1-4.772 0H3.75a.75.75 0 0 1 0-1.5zm7.386 8.25a1 1 0 1 0 0-2 1 1 0 0 0 0 2m2.386-1.75a2.501 2.501 0 0 0-4.771 0H3.75a.75.75 0 0 0 0 1.5h6.365a2.501 2.501 0 0 0 4.77 0h1.365a.75.75 0 0 0 0-1.5z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},373347:(e,t,r)=>{r.d(t,{Icon20FlipHorizontal:()=>o});var o=(0,r(844990).makeIcon)("Icon20FlipHorizontal","flip_horizontal_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="flip_horizontal_20"><path fill-rule="evenodd" d="M8.465 7.531A.75.75 0 0 1 9 8.25v8a.75.75 0 0 1-.75.75H3a.75.75 0 0 1-.627-1.162l5.25-8a.75.75 0 0 1 .842-.307M4.389 15.5H7.5v-4.74zM6.53 1.47a.75.75 0 0 1 0 1.06l-.72.72h8.38l-.72-.72a.75.75 0 0 1 1.06-1.06l2 2a.75.75 0 0 1 0 1.06l-2 2a.75.75 0 1 1-1.06-1.06l.72-.72H5.81l.72.72a.75.75 0 0 1-1.06 1.06l-2-2a.75.75 0 0 1 0-1.06l2-2a.75.75 0 0 1 1.06 0m5.005 6.061a.75.75 0 0 1 .842.308l5.25 8A.75.75 0 0 1 17 17h-5.25a.75.75 0 0 1-.75-.75v-8a.75.75 0 0 1 .535-.719m.965 3.229v4.74h3.11z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},21357:(e,t,r)=>{r.d(t,{Icon20FlipVertical:()=>o});var o=(0,r(844990).makeIcon)("Icon20FlipVertical","flip_vertical_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="flip_vertical_20"><path fill-rule="evenodd" d="M3.394 2.34a.75.75 0 0 1 .767.033l8 5.25A.75.75 0 0 1 11.75 9h-8A.75.75 0 0 1 3 8.25V3a.75.75 0 0 1 .394-.66M4.5 4.39V7.5h4.74zM3 11.75a.75.75 0 0 1 .75-.75h8a.75.75 0 0 1 .412 1.377l-8 5.25A.75.75 0 0 1 3 17zm1.5.75v3.11l4.74-3.11zm10.97-9.03a.75.75 0 0 1 1.06 0l2 2a.75.75 0 0 1-1.06 1.06l-.72-.72v8.38l.72-.72a.75.75 0 1 1 1.06 1.06l-2 2a.75.75 0 0 1-1.06 0l-2-2a.75.75 0 1 1 1.06-1.06l.72.72V5.81l-.72.72a.75.75 0 1 1-1.06-1.06z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},253934:(e,t,r)=>{r.d(t,{Icon20FolderOutline:()=>o});var o=(0,r(844990).makeIcon)("Icon20FolderOutline","folder_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="folder_outline_20"><path fill-rule="evenodd" d="M7.066 2.058C6.812 2 6.552 2 6.256 2h-.09c-.65 0-1.18 0-1.612.034-.446.035-.85.11-1.23.295A3.25 3.25 0 0 0 1.83 3.824c-.185.38-.26.784-.295 1.23-.034.432-.034.962-.034 1.611v5.616c0 .674 0 1.224.037 1.672.037.463.118.882.317 1.272a3.25 3.25 0 0 0 1.42 1.42c.391.2.81.28 1.273.318.447.037.998.037 1.671.037h7.563c.674 0 1.224 0 1.672-.037.463-.038.882-.118 1.272-.317a3.25 3.25 0 0 0 1.42-1.42c.2-.391.28-.81.318-1.273.037-.448.037-.998.037-1.672V8.85c0-.673 0-1.224-.037-1.672-.037-.463-.118-.881-.317-1.272a3.25 3.25 0 0 0-1.42-1.42c-.391-.2-.81-.28-1.273-.318-.447-.037-.998-.037-1.672-.037h-3.486c-.404 0-.484-.004-.55-.02a.8.8 0 0 1-.218-.091c-.059-.036-.118-.09-.403-.377l-.758-.764c-.208-.21-.391-.395-.611-.534a2.3 2.3 0 0 0-.69-.287M6.196 3.5c.39 0 .466.004.53.02a.8.8 0 0 1 .23.095c.056.035.113.086.388.363l.759.766c.216.218.406.41.636.552.202.125.423.217.653.273.263.063.534.063.84.063h3.518c.712 0 1.202 0 1.58.031.371.03.57.086.714.16.33.167.598.435.765.764.074.144.13.343.16.714q.008.094.012.199H3v-.805c0-.686 0-1.157.03-1.523.027-.357.08-.55.147-.69a1.75 1.75 0 0 1 .805-.805c.14-.068.333-.12.69-.148.366-.029.837-.03 1.523-.03ZM3 9v3.25c0 .712 0 1.202.032 1.58.03.371.085.57.159.714.167.33.435.597.764.765.145.074.344.129.714.16.38.03.869.03 1.581.03h7.5c.712 0 1.202 0 1.58-.03.371-.031.57-.086.714-.16a1.75 1.75 0 0 0 .765-.765c.074-.144.13-.343.16-.713.03-.38.031-.869.031-1.581V9z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},890589:(e,t,r)=>{r.d(t,{Icon20FullscreenOutline:()=>o});var o=(0,r(844990).makeIcon)("Icon20FullscreenOutline","fullscreen_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="fullscreen_outline_20"><path fill="currentColor" fill-rule="evenodd" d="M11.75 3.75A.75.75 0 0 1 12.5 3h3.75a.75.75 0 0 1 .75.75V7.5a.75.75 0 0 1-1.5 0V5.56l-3.223 3.224a.75.75 0 0 1-1.061-1.061L14.439 4.5H12.5a.75.75 0 0 1-.75-.75m-2.967 7.466a.75.75 0 0 1 0 1.06L5.561 15.5H7.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75V12.5a.75.75 0 0 1 1.5 0v1.94l3.223-3.224a.75.75 0 0 1 1.06 0" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},453076:(e,t,r)=>{r.d(t,{Icon20Grid4UnevenVerticalOutline:()=>o});var o=(0,r(844990).makeIcon)("Icon20Grid4UnevenVerticalOutline","grid_4_uneven_vertical_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="grid_4_uneven_vertical_outline_20"><path fill-rule="evenodd" d="M14.121 8c-.395 0-.736 0-1.017-.023a2.3 2.3 0 0 1-.875-.222 2.25 2.25 0 0 1-.984-.984 2.3 2.3 0 0 1-.222-.875 8 8 0 0 1-.021-.546H11V4.5h.003c.003-.136.009-.259.02-.396a2.3 2.3 0 0 1 .222-.875 2.25 2.25 0 0 1 .984-.984 2.3 2.3 0 0 1 .875-.222C13.384 2 13.726 2 14.12 2h.758c.395 0 .736 0 1.017.023.297.024.592.078.875.222.424.216.768.56.984.984.144.283.198.578.222.875.011.137.017.26.02.396H18v.85h-.002a8 8 0 0 1-.02.546c-.025.297-.079.592-.223.875a2.25 2.25 0 0 1-.983.984c-.284.144-.58.198-.876.222C15.616 8 15.274 8 14.88 8zm2.361-3.774c.016.2.018.326.018.699 0 .39-.002.65-.018.85-.017.203-.045.278-.064.315a.75.75 0 0 1-.328.328c-.037.02-.112.047-.316.064-.212.017-.492.018-.924.018h-.7c-.432 0-.712 0-.924-.018-.204-.017-.28-.045-.317-.064a.75.75 0 0 1-.327-.328c-.02-.037-.047-.112-.064-.316-.016-.2-.018-.458-.018-.847 0-.375.002-.501.018-.701.017-.204.045-.28.064-.316a.75.75 0 0 1 .327-.328c.038-.02.113-.047.317-.064.212-.017.492-.018.924-.018h.7c.432 0 .712 0 .924.018.204.017.28.045.316.064a.75.75 0 0 1 .328.328c.02.037.047.112.064.316M11 13.12c0-.395 0-.736.023-1.017a2.3 2.3 0 0 1 .222-.875 2.25 2.25 0 0 1 .984-.984 2.3 2.3 0 0 1 .875-.222c.28-.023.65-.023 1.046-.023h.7c.395 0 .765 0 1.046.023.297.024.592.078.875.222.424.216.768.56.984.984.144.283.198.578.222.875.023.28.023.622.023 1.017v1.758c0 .395 0 .736-.023 1.017a2.3 2.3 0 0 1-.222.875 2.25 2.25 0 0 1-.983.984c-.284.144-.58.198-.876.222-.28.023-.65.023-1.046.023h-.7c-.395 0-.765 0-1.046-.023a2.3 2.3 0 0 1-.875-.222 2.25 2.25 0 0 1-.984-.983 2.3 2.3 0 0 1-.222-.876C11 15.616 11 15.274 11 14.88zm3.85 3.379h-.7c-.432 0-.712 0-.924-.018-.204-.017-.28-.045-.317-.064a.75.75 0 0 1-.327-.328c-.02-.037-.047-.112-.064-.316a13 13 0 0 1-.018-.924v-1.7c0-.432 0-.712.018-.924.017-.204.045-.28.064-.317a.75.75 0 0 1 .327-.327c.038-.02.113-.047.317-.064.212-.017.492-.018.924-.018h.7c.432 0 .712 0 .924.018.204.017.28.045.316.064a.75.75 0 0 1 .328.327c.02.038.047.113.064.317.017.212.018.492.018.924v1.7c0 .432 0 .712-.018.924-.017.204-.045.28-.064.316a.75.75 0 0 1-.328.328c-.037.02-.112.047-.316.064-.212.017-.492.018-.924.018M2 5.121V6.88c0 .395 0 .736.023 1.017.024.297.078.592.222.875.216.424.56.768.984.984.283.144.578.198.875.222.28.023.65.023 1.046.023h.7c.395 0 .765 0 1.046-.023a2.3 2.3 0 0 0 .875-.222 2.25 2.25 0 0 0 .984-.984 2.3 2.3 0 0 0 .222-.875C9 7.616 9 7.274 9 6.88V5.12c0-.395 0-.736-.023-1.017a2.3 2.3 0 0 0-.222-.875 2.25 2.25 0 0 0-.984-.984 2.3 2.3 0 0 0-.875-.222C6.616 2 6.246 2 5.85 2h-.7c-.395 0-.765 0-1.046.023a2.3 2.3 0 0 0-.875.222 2.25 2.25 0 0 0-.984.984 2.3 2.3 0 0 0-.222.875C2 4.384 2 4.726 2 5.12ZM5.5 8.5h.35c.432 0 .712 0 .924-.018.204-.017.28-.045.316-.064a.75.75 0 0 0 .328-.327c.02-.038.047-.113.064-.317.017-.212.018-.492.018-.924v-1.7c0-.432 0-.712-.018-.924-.017-.204-.045-.28-.064-.316a.75.75 0 0 0-.328-.328c-.037-.02-.112-.047-.316-.064A13 13 0 0 0 5.85 3.5h-.7c-.432 0-.712 0-.924.018-.204.017-.28.045-.316.064a.75.75 0 0 0-.328.328c-.02.037-.047.112-.064.316-.017.212-.018.492-.018.924v1.7c0 .432 0 .712.018.924.017.204.045.28.064.317a.75.75 0 0 0 .328.327c.037.02.112.047.316.064.212.017.492.018.924.018zM2 15.121V14.5h.004q.004-.215.019-.396a2.3 2.3 0 0 1 .222-.875 2.25 2.25 0 0 1 .984-.984 2.3 2.3 0 0 1 .875-.222C4.384 12 4.754 12 5.15 12h.7c.395 0 .765 0 1.046.023.297.024.592.078.875.222.424.216.768.56.984.984.144.283.198.578.222.875q.015.18.019.396H9v1h-.004a7 7 0 0 1-.019.396 2.3 2.3 0 0 1-.222.875 2.25 2.25 0 0 1-.984.984 2.3 2.3 0 0 1-.875.222C6.616 18 6.246 18 5.85 18h-.7c-.395 0-.765 0-1.046-.023a2.3 2.3 0 0 1-.875-.222 2.25 2.25 0 0 1-.984-.983 2.3 2.3 0 0 1-.222-.876 7 7 0 0 1-.019-.396H2zm5.482-.895c.015.187.018.425.018.774s-.003.587-.018.774c-.017.204-.045.28-.064.316a.75.75 0 0 1-.328.328c-.037.02-.112.047-.316.064-.212.017-.492.018-.924.018h-.7c-.432 0-.712 0-.924-.018-.204-.017-.28-.045-.316-.064a.75.75 0 0 1-.328-.328c-.02-.037-.047-.112-.064-.316A11 11 0 0 1 3.5 15c0-.349.003-.587.018-.774.017-.204.045-.28.064-.317a.75.75 0 0 1 .328-.327c.037-.02.112-.047.316-.064.212-.017.492-.018.924-.018h.7c.432 0 .712 0 .924.018.204.017.28.045.316.064a.75.75 0 0 1 .328.327c.02.038.047.113.064.317" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},4030:(e,t,r)=>{r.d(t,{Icon20ImageFilterOutline:()=>o});var o=(0,r(844990).makeIcon)("Icon20ImageFilterOutline","image_filter_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="image_filter_outline_20"><path d="M7.75 12.906A6 6 0 0 1 7 10a6 6 0 0 1 .75-2.906 3.001 3.001 0 0 1 0 5.812" /><path fill-rule="evenodd" d="M1 10a6 6 0 0 0 9 5.197 6 6 0 1 0 0-10.395A6 6 0 0 0 1 10m1.5 0a4.5 4.5 0 1 0 9 0 4.5 4.5 0 0 0-9 0m8.812-4.173A5.98 5.98 0 0 1 13 10a5.98 5.98 0 0 1-1.688 4.172 4.5 4.5 0 1 0 0-8.345" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},545459:(e,t,r)=>{r.d(t,{Icon20RemoveCircleOutline:()=>o});var o=(0,r(844990).makeIcon)("Icon20RemoveCircleOutline","remove_circle_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="remove_circle_outline_20"><path d="M6.75 9.25a.75.75 0 0 0 0 1.5h6.5a.75.75 0 0 0 0-1.5zM10 18.5a8.5 8.5 0 1 0 0-17 8.5 8.5 0 0 0 0 17m7-8.5a7 7 0 1 1-14 0 7 7 0 0 1 14 0" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},406152:(e,t,r)=>{r.d(t,{Icon20RotateLeft:()=>o});var o=(0,r(844990).makeIcon)("Icon20RotateLeft","rotate_left_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="rotate_left_20"><path fill-rule="evenodd" d="M9.2 9.5H6.8c-.865 0-1.423.001-1.848.036-.408.033-.559.09-.633.127a1.5 1.5 0 0 0-.656.656c-.037.074-.094.225-.127.633-.035.425-.036.983-.036 1.848v.4c0 .865.001 1.423.036 1.848.033.408.09.559.127.633a1.5 1.5 0 0 0 .656.656c.074.037.225.094.633.127.425.035.983.036 1.848.036h2.4c.865 0 1.423-.001 1.848-.036.408-.033.559-.09.633-.127a1.5 1.5 0 0 0 .655-.656c.038-.074.095-.225.128-.633.035-.425.036-.983.036-1.848v-.4c0-.865-.001-1.423-.036-1.848-.033-.408-.09-.559-.128-.633a1.5 1.5 0 0 0-.655-.656c-.074-.037-.225-.094-.633-.127C10.623 9.5 10.065 9.5 9.2 9.5m-6.873.138C2 10.28 2 11.12 2 12.8v.4c0 1.68 0 2.52.327 3.162a3 3 0 0 0 1.311 1.311C4.28 18 5.12 18 6.8 18h2.4c1.68 0 2.52 0 3.162-.327a3 3 0 0 0 1.311-1.311C14 15.72 14 14.88 14 13.2v-.4c0-1.68 0-2.52-.327-3.162a3 3 0 0 0-1.311-1.311C11.72 8 10.88 8 9.2 8H6.8c-1.68 0-2.52 0-3.162.327a3 3 0 0 0-1.311 1.311M13.53 1.97a.75.75 0 0 1 0 1.06l-.72.72H13a4.75 4.75 0 0 1 4.75 4.75V11a.75.75 0 0 1-1.5 0V8.5A3.25 3.25 0 0 0 13 5.25h-.19l.72.72a.75.75 0 0 1-1.06 1.06l-2-2a.75.75 0 0 1 0-1.06l2-2a.75.75 0 0 1 1.06 0" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},773479:(e,t,r)=>{r.d(t,{Icon20RotateRight:()=>o});var o=(0,r(844990).makeIcon)("Icon20RotateRight","rotate_right_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="rotate_right_20"><path fill-rule="evenodd" d="M13.2 9.5h-2.4c-.865 0-1.423.001-1.848.036-.408.033-.559.09-.633.127a1.5 1.5 0 0 0-.656.656c-.037.074-.094.225-.127.633-.035.425-.036.983-.036 1.848v.4c0 .865.001 1.423.036 1.848.033.408.09.559.127.633a1.5 1.5 0 0 0 .656.656c.074.037.225.094.633.127.425.035.983.036 1.848.036h2.4c.865 0 1.423-.001 1.848-.036.408-.033.559-.09.633-.127a1.5 1.5 0 0 0 .656-.656c.037-.074.094-.225.127-.633.035-.425.036-.983.036-1.848v-.4c0-.865-.001-1.423-.036-1.848-.033-.408-.09-.559-.127-.633a1.5 1.5 0 0 0-.656-.656c-.074-.037-.225-.094-.633-.127-.425-.035-.983-.036-1.848-.036m-6.873.138C6 10.28 6 11.12 6 12.8v.4c0 1.68 0 2.52.327 3.162a3 3 0 0 0 1.311 1.311C8.28 18 9.12 18 10.8 18h2.4c1.68 0 2.52 0 3.162-.327a3 3 0 0 0 1.311-1.311C18 15.72 18 14.88 18 13.2v-.4c0-1.68 0-2.52-.327-3.162a3 3 0 0 0-1.311-1.311C15.72 8 14.88 8 13.2 8h-2.4c-1.68 0-2.52 0-3.162.327a3 3 0 0 0-1.311 1.311M6.47 1.97a.75.75 0 0 1 1.06 0l2 2a.75.75 0 0 1 0 1.06l-2 2a.75.75 0 0 1-1.06-1.06l.72-.72H7A3.25 3.25 0 0 0 3.75 8.5V11a.75.75 0 0 1-1.5 0V8.5A4.75 4.75 0 0 1 7 3.75h.19l-.72-.72a.75.75 0 0 1 0-1.06" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},511548:(e,t,r)=>{r.d(t,{Icon20Stars:()=>o});var o=(0,r(844990).makeIcon)("Icon20Stars","stars_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="stars_20"><path fill-rule="evenodd" d="M12.004 8.13c-.368.835-.857 1.717-1.507 2.367s-1.532 1.14-2.367 1.507c.835.367 1.717.857 2.367 1.507s1.14 1.532 1.507 2.367c.367-.835.857-1.717 1.507-2.367s1.532-1.14 2.367-1.507c-.835-.368-1.717-.857-2.367-1.507s-1.14-1.532-1.507-2.367m-.785-2.178c-.421 1.317-1.014 2.716-1.782 3.485-.769.768-2.168 1.36-3.485 1.782a21 21 0 0 1-1.162.338c-.38.1-.38.793 0 .894a27 27 0 0 1 .912.26q.124.037.25.078c1.317.421 2.716 1.014 3.485 1.782s1.36 2.168 1.782 3.485a21 21 0 0 1 .27.907l.068.255c.1.38.793.38.894 0a28 28 0 0 1 .26-.912q.037-.124.078-.25c.421-1.317 1.014-2.717 1.782-3.485s2.168-1.36 3.485-1.782a21 21 0 0 1 .907-.27l.255-.068c.38-.1.38-.793 0-.894a28 28 0 0 1-.912-.26l-.25-.078c-1.317-.421-2.717-1.014-3.485-1.782-.768-.769-1.36-2.168-1.782-3.485a21 21 0 0 1-.338-1.162c-.1-.38-.793-.38-.894 0a27 27 0 0 1-.26.912zM4.365.763a.385.385 0 0 0-.73 0l-.414 1.24a1.93 1.93 0 0 1-1.218 1.218l-1.24.414a.385.385 0 0 0 0 .73l1.24.414a1.93 1.93 0 0 1 1.218 1.218l.414 1.24a.385.385 0 0 0 .73 0l.414-1.24a1.93 1.93 0 0 1 1.218-1.218l1.24-.414a.385.385 0 0 0 0-.73l-1.24-.414a1.93 1.93 0 0 1-1.218-1.218z" /></symbol>',20,20,!1,void 0)},235728:(e,t,r)=>{r.d(t,{Icon20StickerSmileOutline:()=>o});var o=(0,r(844990).makeIcon)("Icon20StickerSmileOutline","sticker_smile_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="sticker_smile_outline_20"><path d="M7.887 9.405c.607 0 1.101-.493 1.104-1.1a1.094 1.094 0 0 0-1.095-1.102c-.607 0-1.101.493-1.104 1.101s.487 1.1 1.095 1.1Zm5.901-1.801a1.106 1.106 0 0 1-1.104 1.1 1.094 1.094 0 0 1-1.095-1.1 1.106 1.106 0 0 1 1.105-1.101c.607 0 1.097.493 1.094 1.1Z" /><path fill-rule="evenodd" d="M2.042 7.416a4.256 4.256 0 0 1 3.616-4.805l7.545-1.064A4.244 4.244 0 0 1 18 5.164l.415 2.97c.667 4.764-2.63 9.172-7.373 9.881-.274.049-.552.08-.827.117l-2.337.33a4.244 4.244 0 0 1-4.796-3.618zm14.472-2.042.337 2.406a1.25 1.25 0 0 1-1.055 1.357l-1.07.164a3.755 3.755 0 0 0-3.148 3.2 4.7 4.7 0 0 1-1.622.06c-.555-.076-.978-.239-1.213-.41a.749.749 0 1 0-.884 1.212c.505.37 1.196.59 1.894.685.6.082 1.257.08 1.895-.031l.156 1.114a1.25 1.25 0 0 1-1.005 1.403l-3.13.442a2.746 2.746 0 0 1-3.103-2.341l-1.04-7.428a2.754 2.754 0 0 1 2.34-3.11l7.545-1.064a2.746 2.746 0 0 1 3.103 2.341m.424 4.934a7.28 7.28 0 0 1-3.65 5.38 2.8 2.8 0 0 0 0-.767l-.223-1.597a2.253 2.253 0 0 1 1.888-2.54l1.069-.163c.33-.051.64-.16.916-.313" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},936419:(e,t,r)=>{r.d(t,{Icon20TextOutline:()=>o});var o=(0,r(844990).makeIcon)("Icon20TextOutline","text_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="text_outline_20"><path d="M9.794 15.478c.522 0 .898-.364.898-.885 0-.17-.035-.342-.119-.587L7.651 5.533C7.4 4.813 6.997 4.5 6.335 4.5c-.654 0-1.057.327-1.3 1.04l-2.917 8.466c-.083.23-.118.439-.118.587 0 .543.355.885.905.885.466 0 .73-.246.897-.825l.661-2.037h3.751l.662 2.052c.16.572.431.81.918.81m-2.048-4.466H4.918l1.383-4.49h.048zm9.412 4.488c.487 0 .842-.335.842-.93V9.638c0-1.583-1.19-2.616-3.02-2.616-1.413 0-2.486.58-2.862 1.494a1.2 1.2 0 0 0-.118.506c0 .445.306.743.73.743.293 0 .523-.12.704-.372.431-.676.801-.921 1.476-.921.856 0 1.378.475 1.378 1.3v.853l-1.955.12c-1.796.118-2.805.958-2.805 2.355 0 1.42 1.037 2.379 2.464 2.379.953 0 1.878-.528 2.303-1.383h.035v.55c.028.55.355.855.828.855Zm-2.638-1.42c-.751 0-1.26-.408-1.26-1.055 0-.624.481-1.026 1.316-1.085l1.712-.112v.602c0 .952-.793 1.65-1.768 1.65" /></symbol>',20,20,!1,void 0)},480809:(e,t,r)=>{r.d(t,{Icon20WaterDropOutline:()=>o});var o=(0,r(844990).makeIcon)("Icon20WaterDropOutline","water_drop_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="water_drop_outline_20"><path fill-rule="evenodd" d="M5.4 8.683c-.419.85-.65 1.647-.65 2.317a5.25 5.25 0 1 0 10.5 0c0-.67-.231-1.467-.65-2.317-.414-.842-.988-1.69-1.615-2.447-.628-.759-1.292-1.408-1.874-1.86a5 5 0 0 0-.76-.499 1.6 1.6 0 0 0-.255-.106A.4.4 0 0 0 10 3.75a.4.4 0 0 0-.096.02q-.098.029-.254.107a5 5 0 0 0-.76.5c-.583.451-1.247 1.1-1.875 1.859-.627.757-1.201 1.605-1.615 2.447m3.573-6.145c.308-.155.667-.288 1.027-.288s.72.133 1.027.288c.322.163.662.389 1.003.654.684.53 1.425 1.26 2.11 2.087.686.828 1.33 1.774 1.806 2.742.473.96.804 1.992.804 2.979a6.75 6.75 0 0 1-13.5 0c0-.987.331-2.018.804-2.979.476-.969 1.12-1.914 1.806-2.742.685-.827 1.426-1.557 2.11-2.087a6.4 6.4 0 0 1 1.003-.654" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},159907:(e,t,r)=>{r.d(t,{Icon24AddCircleDottedOutline:()=>o});var o=(0,r(844990).makeIcon)("Icon24AddCircleDottedOutline","add_circle_dotted_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="add_circle_dotted_outline_24"><g fill="currentColor"><path d="M13 13v3a1 1 0 1 1-2 0v-3H8a1 1 0 1 1 0-2h3V8a1 1 0 1 1 2 0v3h3a1 1 0 1 1 0 2z" /><path fill-rule="evenodd" d="M10.069 2.288a9.9 9.9 0 0 1 3.862 0 .9.9 0 1 1-.35 1.766 8.1 8.1 0 0 0-3.163 0 .9.9 0 1 1-.349-1.766M7.747 4.015A.9.9 0 0 1 7.5 5.264 8.15 8.15 0 0 0 5.264 7.5.9.9 0 0 1 3.768 6.5a9.9 9.9 0 0 1 2.73-2.731.9.9 0 0 1 1.25.247m8.506 0a.9.9 0 0 1 1.248-.247 9.95 9.95 0 0 1 2.731 2.73.9.9 0 0 1-1.496 1.002A8.1 8.1 0 0 0 16.5 5.264a.9.9 0 0 1-.247-1.249m4.401 5.346a.9.9 0 0 1 1.058.708 9.9 9.9 0 0 1 0 3.862.9.9 0 1 1-1.766-.35 8.1 8.1 0 0 0 0-3.163.9.9 0 0 1 .708-1.057m-17.308 0a.9.9 0 0 1 .708 1.057 8.1 8.1 0 0 0 0 3.164.9.9 0 0 1-1.766.349 9.9 9.9 0 0 1 0-3.862.9.9 0 0 1 1.058-.708m.67 6.892a.9.9 0 0 1 1.248.247A8.1 8.1 0 0 0 7.5 18.736.9.9 0 0 1 6.5 20.232a10 10 0 0 1-2.731-2.73.9.9 0 0 1 .247-1.25m15.969 0a.9.9 0 0 1 .247 1.248 9.9 9.9 0 0 1-2.73 2.731.9.9 0 0 1-1.002-1.496 8.15 8.15 0 0 0 2.236-2.236.9.9 0 0 1 1.249-.247M9.36 20.654a.9.9 0 0 1 1.057-.708 8.1 8.1 0 0 0 3.164 0 .9.9 0 1 1 .349 1.766 9.9 9.9 0 0 1-3.862 0 .9.9 0 0 1-.708-1.058" clip-rule="evenodd" /></g></symbol>',24,24,!1,void 0)},280196:(e,t,r)=>{r.d(t,{Icon24ArrowUturnLeftOutline:()=>o});var o=(0,r(844990).makeIcon)("Icon24ArrowUturnLeftOutline","arrow_uturn_left_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="arrow_uturn_left_outline_24"><path fill-rule="evenodd" d="M10.236 3.264a.9.9 0 0 1 0 1.272L7.673 7.1H12a5.9 5.9 0 1 1 0 11.8H7.9a.9.9 0 1 1 0-1.8H12a4.1 4.1 0 0 0 0-8.2H7.673l2.563 2.564a.9.9 0 0 1-1.272 1.272l-4.1-4.1a.9.9 0 0 1 0-1.272l4.1-4.1a.9.9 0 0 1 1.272 0" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},48813:(e,t,r)=>{r.d(t,{Icon24ArrowUturnRightOutline:()=>o});var o=(0,r(844990).makeIcon)("Icon24ArrowUturnRightOutline","arrow_uturn_right_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="arrow_uturn_right_outline_24"><path fill-rule="evenodd" d="M13.764 3.264a.9.9 0 0 1 1.272 0l4.1 4.1a.9.9 0 0 1 0 1.272l-4.1 4.1a.9.9 0 0 1-1.272-1.272L16.327 8.9H12a4.1 4.1 0 1 0 0 8.2h4.1a.9.9 0 0 1 0 1.8H12a5.9 5.9 0 1 1 0-11.8h4.327l-2.563-2.564a.9.9 0 0 1 0-1.272" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},979337:(e,t,r)=>{r.d(t,{Icon24BlurOutline:()=>o});var o=(0,r(844990).makeIcon)("Icon24BlurOutline","blur_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="blur_outline_24"><path d="M12 2.002q-.663.001-1.305.085a.9.9 0 0 0 .233 1.785 8.3 8.3 0 0 1 2.144 0 .9.9 0 0 0 .233-1.785A10 10 0 0 0 12 2.002m6.087 2.066a.9.9 0 0 0-1.097 1.427 8.3 8.3 0 0 1 1.514 1.515.9.9 0 1 0 1.427-1.097 10 10 0 0 0-1.845-1.845ZM7.01 5.495a.9.9 0 1 0-1.096-1.427 10 10 0 0 0-1.845 1.845.9.9 0 1 0 1.427 1.097A8.3 8.3 0 0 1 7.01 5.495m-3.138 5.433a.9.9 0 0 0-1.784-.233 10 10 0 0 0 0 2.609.9.9 0 0 0 1.784-.233 8.3 8.3 0 0 1 0-2.143m18.041-.233a.9.9 0 0 0-1.785.232 8.3 8.3 0 0 1 0 2.144.9.9 0 1 0 1.785.233 10 10 0 0 0 0-2.61Zm-1.982 7.391a.9.9 0 1 0-1.427-1.097 8.3 8.3 0 0 1-1.514 1.514.9.9 0 0 0 1.097 1.427 10 10 0 0 0 1.844-1.844M5.496 16.989a.9.9 0 0 0-1.427 1.097 10 10 0 0 0 1.845 1.844.9.9 0 1 0 1.096-1.427 8.3 8.3 0 0 1-1.514-1.514m5.432 3.138a.9.9 0 1 0-.233 1.785 10 10 0 0 0 2.61 0 .9.9 0 1 0-.233-1.785 8.3 8.3 0 0 1-2.144 0" /><path fill-rule="evenodd" d="M17 12a5 5 0 1 1-10 0 5 5 0 0 1 10 0m-1.8 0a3.2 3.2 0 1 1-6.4 0 3.2 3.2 0 0 1 6.4 0" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},215588:(e,t,r)=>{r.d(t,{Icon24BrushOutline:()=>o});var o=(0,r(844990).makeIcon)("Icon24BrushOutline","brush_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="brush_outline_24"><path d="M20.377 3.467a1.857 1.857 0 0 0-2.558.09l-6.93 6.866a.91.91 0 0 0-.007 1.285.904.904 0 0 0 1.281.008l6.935-6.87c.044-.045.117-.018.07.04l-6.154 7.74a.91.91 0 0 0 .143 1.278.904.904 0 0 0 1.273-.143l6.15-7.735a1.85 1.85 0 0 0-.203-2.56Z" /><path fill-rule="evenodd" d="M8.488 12.624c-2.003 0-3.476 1.63-3.56 3.533-.043.938-.454 1.416-.83 1.732-.382.321-.894.553-1.052 1.065-.13.418.033.863.373 1.128.763.593 2.355 1.343 4.654.622 2.399-.752 3.977-2.509 3.977-4.506a3.57 3.57 0 0 0-3.562-3.574m-1.75 3.614c.046-1.037.82-1.796 1.75-1.796.967 0 1.75.786 1.75 1.756 0 .947-.789 2.17-2.705 2.77-.866.272-1.549.249-2.057.123.59-.56 1.198-1.442 1.261-2.853Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},775464:(e,t,r)=>{r.d(t,{Icon24CheckCircleFilledBlue:()=>o});var o=(0,r(844990).makeIcon)("Icon24CheckCircleFilledBlue","check_circle_filled_blue_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="check_circle_filled_blue_24"><path fill="#3f8ae0" d="M24 12c0 6.627-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0s12 5.373 12 12" /><path stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6.5 12.5 10 16l7.5-7.5" /></symbol>',24,24,!1,void 0)},430571:(e,t,r)=>{r.d(t,{Icon24Crop:()=>o});var o=(0,r(844990).makeIcon)("Icon24Crop","crop_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="crop_24"><g fill="currentColor"><path d="M6 1.006a.9.9 0 0 1 .9.9V14.8c0 .575 0 .952.024 1.24.023.278.062.394.096.46a1.1 1.1 0 0 0 .48.48c.067.034.182.073.46.096.288.023.665.024 1.24.024h12.898a.9.9 0 0 1 0 1.8H18.9v3.198a.9.9 0 1 1-1.8 0V18.9H9.165c-.53 0-.981 0-1.352-.03-.389-.032-.768-.102-1.13-.286a2.9 2.9 0 0 1-1.267-1.267c-.184-.362-.254-.741-.286-1.13-.03-.37-.03-.822-.03-1.352V6.9H1.903a.9.9 0 0 1 0-1.8H5.1V1.906a.9.9 0 0 1 .9-.9" /><path d="M16.04 6.924c-.288-.023-.665-.024-1.24-.024H9.907a.9.9 0 1 1 0-1.8h4.928c.53 0 .981 0 1.352.03.39.032.768.102 1.13.286a2.9 2.9 0 0 1 1.267 1.267c.184.362.254.74.286 1.13.03.37.03.822.03 1.352v4.937a.9.9 0 1 1-1.8 0V9.2c0-.575 0-.952-.024-1.24-.023-.278-.062-.394-.096-.46a1.1 1.1 0 0 0-.48-.48c-.067-.034-.182-.073-.46-.096" /></g></symbol>',24,24,!1,void 0)},741583:(e,t,r)=>{r.d(t,{Icon24Filter:()=>o});var o=(0,r(844990).makeIcon)("Icon24Filter","filter_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="filter_24"><path fill-rule="evenodd" d="M6.242 8.9a2.901 2.901 0 0 0 5.516 0H20a.9.9 0 1 0 0-1.8h-8.242a2.901 2.901 0 0 0-5.515 0H4a.9.9 0 1 0 0 1.8zM9 6.9a1.1 1.1 0 1 0 0 2.2 1.1 1.1 0 0 0 0-2.2M3.1 16a.9.9 0 0 1 .9-.9h8.242a2.901 2.901 0 0 1 5.516 0H20a.9.9 0 1 1 0 1.8h-2.242a2.901 2.901 0 0 1-5.516 0H4a.9.9 0 0 1-.9-.9m10.8 0a1.1 1.1 0 1 1 2.2 0 1.1 1.1 0 0 1-2.2 0" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},31994:(e,t,r)=>{r.d(t,{Icon24Fullscreen:()=>o});var o=(0,r(844990).makeIcon)("Icon24Fullscreen","fullscreen_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="fullscreen_24"><path fill-rule="evenodd" d="M14 4.9a.9.9 0 0 1 .9-.9h4.2a.9.9 0 0 1 .9.9v4.2a.9.9 0 1 1-1.8 0V7.073l-3.664 3.663a.9.9 0 1 1-1.272-1.272L16.927 5.8H14.9a.9.9 0 0 1-.9-.9m-3.264 8.364a.9.9 0 0 1 0 1.272L7.073 18.2h2.025a.9.9 0 1 1 0 1.8H4.9a.9.9 0 0 1-.9-.9v-4.2a.9.9 0 0 1 1.8 0v2.027l3.664-3.663a.9.9 0 0 1 1.272 0" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},846217:(e,t,r)=>{r.d(t,{Icon24FullscreenExit:()=>o});var o=(0,r(844990).makeIcon)("Icon24FullscreenExit","fullscreen_exit_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="fullscreen_exit_24"><path fill-rule="evenodd" d="M5 13.9a.9.9 0 0 1 .9-.9h4.2a.9.9 0 0 1 .9.9v4.2a.9.9 0 1 1-1.8 0v-2.027l-3.664 3.663a.9.9 0 1 1-1.272-1.272L7.927 14.8H5.9a.9.9 0 0 1-.9-.9m14.736-9.636a.9.9 0 0 1 0 1.272L16.073 9.2h2.025a.9.9 0 0 1 0 1.8H13.9a.9.9 0 0 1-.9-.9V5.9a.9.9 0 1 1 1.8 0v2.027l3.664-3.663a.9.9 0 0 1 1.272 0" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},665485:(e,t,r)=>{r.d(t,{Icon24HorizontalRectangle16x9Outline:()=>o});var o=(0,r(844990).makeIcon)("Icon24HorizontalRectangle16x9Outline","horizontal_rectangle_16x9_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="horizontal_rectangle_16x9_outline_24"><path fill-rule="evenodd" d="M22.999 10.665v2.67c0 .809 0 1.47-.044 2.006-.045.556-.142 1.059-.381 1.527a3.9 3.9 0 0 1-1.705 1.705c-.468.239-.97.335-1.526.38-.538.045-1.198.045-2.006.045H6.663c-.808 0-1.469 0-2.006-.044-.556-.046-1.058-.142-1.527-.381a3.9 3.9 0 0 1-1.704-1.705c-.239-.468-.336-.97-.381-1.526C1 14.803 1 14.143 1 13.335v-2.67c0-.809 0-1.47.044-2.006.045-.556.142-1.058.381-1.527A3.9 3.9 0 0 1 3.13 5.427c.47-.239.971-.336 1.527-.38.537-.045 1.198-.045 2.006-.045h10.674c.808 0 1.468 0 2.006.044.555.045 1.058.142 1.526.381a3.9 3.9 0 0 1 1.705 1.705c.239.469.335.97.38 1.527.045.537.045 1.197.045 2.005Zm-1.838-1.86c-.036-.445-.103-.683-.191-.856a2.1 2.1 0 0 0-.918-.918c-.173-.088-.412-.155-.856-.19-.455-.038-1.042-.039-1.897-.039H6.7c-.855 0-1.442 0-1.897.038-.445.036-.684.103-.857.191a2.1 2.1 0 0 0-.917.918c-.088.173-.155.411-.191.856-.037.455-.038 1.042-.038 1.897v2.596c0 .855 0 1.442.038 1.897.036.444.103.683.19.856a2.1 2.1 0 0 0 .918.918c.173.088.412.155.857.19.455.038 1.042.039 1.897.039h10.598c.855 0 1.442 0 1.897-.038.444-.036.683-.103.856-.191a2.1 2.1 0 0 0 .918-.918c.088-.173.155-.411.19-.856.038-.455.039-1.042.039-1.897v-2.596c0-.855 0-1.442-.038-1.897Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},332716:(e,t,r)=>{r.d(t,{Icon24HorizontalRectangleOutline:()=>o});var o=(0,r(844990).makeIcon)("Icon24HorizontalRectangleOutline","horizontal_rectangle_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="horizontal_rectangle_outline_24"><path fill-rule="evenodd" d="M22 10.462v3.076c0 .948 0 1.714-.05 2.334-.053.64-.163 1.203-.43 1.726a4.4 4.4 0 0 1-1.922 1.922c-.523.267-1.087.377-1.726.43-.62.05-1.386.05-2.334.05H8.461c-.947 0-1.713 0-2.333-.05-.64-.053-1.203-.163-1.726-.43a4.4 4.4 0 0 1-1.923-1.922c-.266-.523-.376-1.087-.428-1.726C2 15.252 2 14.486 2 13.538v-3.076c0-.948 0-1.714.05-2.334.053-.64.163-1.203.43-1.726A4.4 4.4 0 0 1 4.401 4.48c.523-.267 1.087-.377 1.726-.43C6.748 4 7.514 4 8.46 4h7.077c.948 0 1.714 0 2.334.05.64.053 1.203.163 1.726.43a4.4 4.4 0 0 1 1.922 1.922c.267.523.377 1.087.43 1.726.05.62.05 1.386.05 2.334Zm-1.845-2.188c-.043-.527-.123-.828-.239-1.054a2.6 2.6 0 0 0-1.136-1.137c-.226-.115-.527-.195-1.055-.238-.538-.044-1.23-.045-2.225-.045h-7c-.995 0-1.687 0-2.226.045-.528.043-.828.123-1.054.238A2.6 2.6 0 0 0 4.083 7.22c-.115.226-.195.527-.238 1.054C3.8 8.813 3.8 9.505 3.8 10.5v3c0 .995 0 1.687.045 2.226.043.527.123.828.238 1.054a2.6 2.6 0 0 0 1.137 1.137c.226.115.526.195 1.054.238.539.044 1.231.045 2.226.045h7c.995 0 1.687 0 2.225-.045.528-.043.829-.123 1.055-.238a2.6 2.6 0 0 0 1.136-1.137c.116-.226.196-.527.24-1.055.043-.538.044-1.23.044-2.225v-3c0-.995 0-1.687-.045-2.226" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},815254:(e,t,r)=>{r.d(t,{Icon24ImageFilterOutline:()=>o});var o=(0,r(844990).makeIcon)("Icon24ImageFilterOutline","image_filter_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="image_filter_outline_24"><path d="M8.983 15.8a3.8 3.8 0 0 0 0-7.6A7.17 7.17 0 0 0 7.9 12c0 1.395.396 2.696 1.083 3.8" /><path fill-rule="evenodd" d="M8.9 4.6A7.4 7.4 0 1 0 12 18.721a7.4 7.4 0 1 0 0-13.443A7.4 7.4 0 0 0 8.9 4.6M3.3 12a5.6 5.6 0 1 1 11.2 0 5.6 5.6 0 0 1-11.2 0m10.586-5.468A7.38 7.38 0 0 1 16.3 12a7.38 7.38 0 0 1-2.414 5.468 5.6 5.6 0 1 0 0-10.936" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},798320:(e,t,r)=>{r.d(t,{Icon24MagicWandOutline:()=>o});var o=(0,r(844990).makeIcon)("Icon24MagicWandOutline","magic_wand_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="magic_wand_outline_24"><g fill="currentColor"><path d="M5.374 8.397a.2.2 0 0 1-.27-.27l.991-1.877-.992-1.876a.2.2 0 0 1 .27-.27l1.877.991 1.876-.992a.2.2 0 0 1 .27.27L8.406 6.25l.992 1.876a.2.2 0 0 1-.27.27L7.25 7.406zM17.25 6.905l-1.876.992a.2.2 0 0 1-.27-.27l.991-1.877-.992-1.876a.2.2 0 0 1 .27-.27l1.877.991 1.876-.992a.2.2 0 0 1 .27.27l-.991 1.877.992 1.876a.2.2 0 0 1-.27.27zM15.374 17.397a.2.2 0 0 1-.27-.27l.991-1.877-.992-1.876a.2.2 0 0 1 .27-.27l1.877.991 1.876-.992a.2.2 0 0 1 .27.27l-.991 1.877.992 1.876a.2.2 0 0 1-.27.27l-1.877-.991z" /><path fill-rule="evenodd" d="M13.136 10.364a.9.9 0 0 1 0 1.272l-9.5 9.5a.9.9 0 1 1-1.272-1.272l9.5-9.5a.9.9 0 0 1 1.272 0" clip-rule="evenodd" /></g></symbol>',24,24,!1,void 0)},390768:(e,t,r)=>{r.d(t,{Icon24SmileOutline:()=>o});var o=(0,r(844990).makeIcon)("Icon24SmileOutline","smile_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="smile_outline_24"><path d="M8.438 14.297a.9.9 0 0 1 1.259.133c.013.016.196.223.53.432.383.24.97.488 1.773.488a3.3 3.3 0 0 0 1.773-.488c.191-.12.382-.26.53-.432a.9.9 0 0 1 1.4 1.132 4 4 0 0 1-.976.826A5.1 5.1 0 0 1 12 17.15a5.1 5.1 0 0 1-2.727-.762 4 4 0 0 1-.976-.826.9.9 0 0 1 .14-1.265Zm1.812-4.047a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0M15 11.5A1.25 1.25 0 1 0 15 9a1.25 1.25 0 0 0 0 2.5m-3-9.4c-5.468 0-9.9 4.432-9.9 9.9s4.432 9.9 9.9 9.9 9.9-4.432 9.9-9.9-4.432-9.9-9.9-9.9M3.9 12a8.1 8.1 0 1 1 16.2 0 8.1 8.1 0 0 1-16.2 0" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},72899:(e,t,r)=>{r.d(t,{Icon24SquareOutline:()=>o});var o=(0,r(844990).makeIcon)("Icon24SquareOutline","square_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="square_outline_24"><path fill-rule="evenodd" d="M9.461 3h5.077c.948 0 1.714 0 2.334.05.64.053 1.203.163 1.726.43a4.4 4.4 0 0 1 1.922 1.922c.267.523.377 1.087.43 1.726.05.62.05 1.386.05 2.334v5.076c0 .948 0 1.714-.05 2.334-.053.64-.163 1.203-.43 1.726a4.4 4.4 0 0 1-1.922 1.922c-.523.267-1.087.377-1.726.43-.62.05-1.386.05-2.334.05H9.461c-.947 0-1.713 0-2.333-.05-.64-.053-1.203-.163-1.726-.43a4.4 4.4 0 0 1-1.923-1.922c-.266-.523-.376-1.087-.428-1.726C3 16.252 3 15.486 3 14.538V9.462c0-.948 0-1.714.05-2.334.053-.64.163-1.203.43-1.726A4.4 4.4 0 0 1 5.401 3.48c.523-.267 1.087-.377 1.726-.43C7.748 3 8.514 3 9.46 3ZM7.274 4.845c-.528.043-.828.123-1.054.238A2.6 2.6 0 0 0 5.083 6.22c-.115.226-.195.527-.238 1.054C4.8 7.813 4.8 8.505 4.8 9.5v5c0 .995 0 1.687.045 2.226.043.527.123.828.238 1.054a2.6 2.6 0 0 0 1.137 1.137c.226.115.526.195 1.054.238.539.044 1.231.045 2.226.045h5c.995 0 1.687 0 2.225-.045.528-.043.829-.123 1.055-.238a2.6 2.6 0 0 0 1.136-1.137c.116-.226.196-.527.24-1.055.043-.538.044-1.23.044-2.225v-5c0-.995 0-1.687-.045-2.226-.043-.527-.123-.828-.239-1.054a2.6 2.6 0 0 0-1.136-1.137c-.226-.115-.527-.195-1.055-.238-.538-.044-1.23-.045-2.225-.045h-5c-.995 0-1.687 0-2.226.045" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},182490:(e,t,r)=>{r.d(t,{Icon24StorefrontOutline:()=>o});var o=(0,r(844990).makeIcon)("Icon24StorefrontOutline","storefront_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="storefront_outline_24"><path fill-rule="evenodd" d="M7 14a.9.9 0 0 1 .9.9v4.2h8.2v-4.2a.9.9 0 0 1 1.8 0V20a.9.9 0 0 1-.9.9H7a.9.9 0 0 1-.9-.9v-5.1A.9.9 0 0 1 7 14" clip-rule="evenodd" /><path fill-rule="evenodd" d="M3 20a.9.9 0 0 1 .9-.9h16.2a.9.9 0 1 1 0 1.8H3.9A.9.9 0 0 1 3 20m13.9-10a1.1 1.1 0 0 0 2.2 0h1.8a2.9 2.9 0 0 1-5.8 0z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M16 9.1a.9.9 0 0 1 .9.9 1.1 1.1 0 0 0 2.2 0 .9.9 0 1 1 1.8 0 2.9 2.9 0 0 1-5.8 0 .9.9 0 0 1 .9-.9" clip-rule="evenodd" /><path fill-rule="evenodd" d="M12 9.1a.9.9 0 0 1 .9.9 1.1 1.1 0 0 0 2.2 0 .9.9 0 1 1 1.8 0 2.9 2.9 0 0 1-5.8 0 .9.9 0 0 1 .9-.9" clip-rule="evenodd" /><path fill-rule="evenodd" d="M8 9.1a.9.9 0 0 1 .9.9 1.1 1.1 0 0 0 2.2 0 .9.9 0 1 1 1.8 0 2.9 2.9 0 0 1-5.8 0 .9.9 0 0 1 .9-.9" clip-rule="evenodd" /><path fill-rule="evenodd" d="M4 9.1a.9.9 0 0 1 .9.9 1.1 1.1 0 0 0 2.2 0 .9.9 0 0 1 1.8 0 2.9 2.9 0 0 1-5.8 0 .9.9 0 0 1 .9-.9" clip-rule="evenodd" /><path fill-rule="evenodd" d="M8.703 3.1h6.594c.553 0 1.019-.001 1.453.137a2.9 2.9 0 0 1 1.033.585c.342.301.581.7.865 1.175l.056.094 1.612 2.686.027.045c.143.239.264.44.352.66q.116.293.167.604c.038.234.038.47.038.747V10h-1.8v-.114c0-.358-.003-.438-.014-.51a1 1 0 0 0-.064-.228c-.027-.068-.066-.138-.25-.445L17.16 6.017c-.37-.618-.462-.752-.566-.843a1.1 1.1 0 0 0-.392-.222c-.131-.042-.294-.052-1.014-.052H8.812c-.72 0-.883.01-1.014.052a1.1 1.1 0 0 0-.392.222c-.104.091-.196.225-.566.843L5.228 8.703c-.185.307-.223.377-.25.445a1 1 0 0 0-.064.228c-.011.072-.014.152-.014.51V10H3.1v-.167c0-.278 0-.513.038-.747a3 3 0 0 1 .167-.603c.088-.22.209-.422.352-.66l.027-.046L5.296 5.09l.056-.094c.284-.474.523-.874.865-1.175a2.9 2.9 0 0 1 1.033-.585c.434-.138.9-.138 1.453-.137Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},450117:(e,t,r)=>{r.d(t,{Icon24VerticalRectangle9x16Outline:()=>o});var o=(0,r(844990).makeIcon)("Icon24VerticalRectangle9x16Outline","vertical_rectangle_9x16_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="vertical_rectangle_9x16_outline_24"><path fill-rule="evenodd" d="M10.664 1.001h2.671c.808 0 1.47 0 2.006.044.556.045 1.058.142 1.527.381a3.9 3.9 0 0 1 1.705 1.704c.238.47.335.971.38 1.527.045.537.045 1.198.045 2.006v10.674c0 .808 0 1.469-.044 2.006-.046.556-.143 1.058-.381 1.526a3.9 3.9 0 0 1-1.705 1.705c-.469.239-.97.336-1.527.381-.537.044-1.197.044-2.006.044h-2.67c-.809 0-1.47 0-2.007-.044-.556-.045-1.058-.142-1.526-.381a3.9 3.9 0 0 1-1.705-1.705c-.239-.468-.336-.97-.381-1.526-.044-.537-.044-1.198-.044-2.006V6.663c0-.808 0-1.469.044-2.006.045-.556.142-1.058.381-1.527a3.9 3.9 0 0 1 1.705-1.704c.468-.239.97-.336 1.526-.381C9.195 1 9.856 1 10.664 1ZM8.805 2.839c-.445.036-.683.103-.856.19a2.1 2.1 0 0 0-.918.919c-.088.172-.155.411-.191.856-.037.455-.038 1.042-.038 1.897v10.598c0 .855 0 1.442.038 1.897.036.445.103.683.191.856a2.1 2.1 0 0 0 .918.918c.173.088.411.155.856.191.455.037 1.042.038 1.897.038h2.596c.855 0 1.442 0 1.897-.038.444-.036.683-.103.856-.19a2.1 2.1 0 0 0 .918-.919c.088-.172.154-.411.19-.856.038-.455.039-1.042.039-1.897V6.701c0-.855-.001-1.442-.038-1.897-.037-.445-.103-.684-.191-.856a2.1 2.1 0 0 0-.918-.918c-.173-.088-.412-.155-.856-.191-.455-.037-1.042-.038-1.897-.038h-2.596c-.855 0-1.442 0-1.897.038" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},245278:(e,t,r)=>{r.d(t,{Icon24VerticalRectangleOutline:()=>o});var o=(0,r(844990).makeIcon)("Icon24VerticalRectangleOutline","vertical_rectangle_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="vertical_rectangle_outline_24"><path fill-rule="evenodd" d="M10.461 2h3.077c.948 0 1.714 0 2.334.05.64.053 1.203.163 1.726.43a4.4 4.4 0 0 1 1.922 1.922c.267.523.377 1.087.43 1.726.05.62.05 1.386.05 2.334v7.076c0 .948 0 1.714-.05 2.334-.053.64-.163 1.203-.43 1.726a4.4 4.4 0 0 1-1.922 1.922c-.523.267-1.087.377-1.726.43-.62.05-1.386.05-2.334.05h-3.077c-.947 0-1.713 0-2.333-.05-.64-.053-1.203-.163-1.726-.43a4.4 4.4 0 0 1-1.923-1.922c-.266-.523-.376-1.087-.428-1.726C4 17.252 4 16.486 4 15.538V8.462c0-.948 0-1.714.05-2.334.053-.64.163-1.203.43-1.726A4.4 4.4 0 0 1 6.401 2.48c.523-.267 1.087-.377 1.726-.43C8.748 2 9.514 2 10.46 2ZM8.274 3.845c-.528.043-.828.123-1.054.238A2.6 2.6 0 0 0 6.083 5.22c-.115.226-.195.527-.238 1.054C5.8 6.813 5.8 7.505 5.8 8.5v7c0 .995 0 1.687.045 2.226.043.527.123.828.238 1.054a2.6 2.6 0 0 0 1.137 1.137c.226.115.526.195 1.054.238.539.044 1.231.045 2.226.045h3c.995 0 1.687 0 2.225-.045.528-.043.829-.123 1.055-.238a2.6 2.6 0 0 0 1.136-1.137c.116-.226.196-.527.24-1.055.043-.538.044-1.23.044-2.225v-7c0-.995 0-1.687-.045-2.226-.043-.527-.123-.828-.239-1.054a2.6 2.6 0 0 0-1.136-1.137c-.226-.115-.527-.195-1.055-.238-.538-.044-1.23-.045-2.225-.045h-3c-.995 0-1.687 0-2.226.045" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},410748:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"CellList-module__root--YQ57V",gapXs:"CellList-module__gapXs--EbMEa",gapS:"CellList-module__gapS--FqUb3",gapM:"CellList-module__gapM--YSg6A",gapL:"CellList-module__gapL--l9ZbP",gapXl:"CellList-module__gapXl--IQeNb"}},909446:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"ClickableZones-module__root--GSAKQ"}},366754:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"ColorPicker-module__root--acT7x",item:"ColorPicker-module__item--UhrPK",itemWhite:"ColorPicker-module__itemWhite--R_9cf"}},789482:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"DropBox-module__root--fMtc3",cap:"DropBox-module__cap--RMq26",hover:"DropBox-module__hover--_o57e"}},339905:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"EditorMainMenu-module__root--H5E8f",pane:"EditorMainMenu-module__pane--hMZLc",prevPane:"EditorMainMenu-module__prevPane--iZryn",nextPane:"EditorMainMenu-module__nextPane--GU0lg",scrollable:"EditorMainMenu-module__scrollable--fMKGb",contentWrapper:"EditorMainMenu-module__contentWrapper--Urxz7",mainMenuBody:"EditorMainMenu-module__mainMenuBody--N3PD7",mainMenuBefore:"EditorMainMenu-module__mainMenuBefore--SEyD0",mainMenuAfter:"EditorMainMenu-module__mainMenuAfter--ZnOHd"}},929514:(e,t,r)=>{r.d(t,{default:()=>o});const o={spinnerWrapper:"EditorMainMenuItem-module__spinnerWrapper--inyoV",caption:"EditorMainMenuItem-module__caption--eivxe",complexCaption:"EditorMainMenuItem-module__complexCaption--DSVVi",shrinkable:"EditorMainMenuItem-module__shrinkable--h5J_T",cancelButtonWrapper:"EditorMainMenuItem-module__cancelButtonWrapper--wP5JC",cancelButton:"EditorMainMenuItem-module__cancelButton--NGOYI",visuallyMuted:"EditorMainMenuItem-module__visuallyMuted--ljDv9"}},611026:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"EditorTabs-module__root--fP6Cw",header:"EditorTabs-module__header--oVeQU",item:"EditorTabs-module__item--wSzxM",itemDisabled:"EditorTabs-module__itemDisabled--CCSyH",itemCurrent:"EditorTabs-module__itemCurrent--w9XX_",content:"EditorTabs-module__content--iAEOb",tab:"EditorTabs-module__tab--eQl8p",tabCurrent:"EditorTabs-module__tabCurrent--PutYP",tooltip:"EditorTabs-module__tooltip--U8zft",tooltipText:"EditorTabs-module__tooltipText--byS4G"}},802320:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"EditorText-module__root--ftVRm",inner:"EditorText-module__inner--RJh4t",textArea:"EditorText-module__textArea--NSvuj"}},280442:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"Layer-module__root--fFYF7",locked:"Layer-module__locked--rZAmS",inner:"Layer-module__inner--TCdrT",innerDisabled:"Layer-module__innerDisabled--BIYSz",img:"Layer-module__img--HRwqs",imgHidden:"Layer-module__imgHidden--MajsP"}},745286:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"LayerControls-module__root--oiN84",rootNewUi:"LayerControls-module__rootNewUi--FyNzB",ants:"LayerControls-module__ants--s7_24",handler:"LayerControls-module__handler--XphVu",handlerNewUi:"LayerControls-module__handlerNewUi--igNkZ",handlerNw:"LayerControls-module__handlerNw--MDIxB",handlerNe:"LayerControls-module__handlerNe--m_V4v",handlerSw:"LayerControls-module__handlerSw--aS0Sc",handlerSe:"LayerControls-module__handlerSe--l4EaO",handlerDeleteIcon:"LayerControls-module__handlerDeleteIcon--obKs9"}},607848:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"Layers-module__root--peQ15",background:"Layers-module__background--eswQB",items:"Layers-module__items--tbVfj"}},189830:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"NewColorPicker-module__root--LBnj3",item:"NewColorPicker-module__item--vWD2r",itemCurrent:"NewColorPicker-module__itemCurrent--NHd1X"}},619032:(e,t,r)=>{r.d(t,{default:()=>o});const o={labelText:"PEFormItem-module__labelText--FoGNS",aside:"PEFormItem-module__aside--Nck3p"}},569206:(e,t,r)=>{r.d(t,{default:()=>o});const o={scrollable:"ScrollableContainer-module__scrollable--FZRnM",scrollDetector:"ScrollableContainer-module__scrollDetector--wgcU1",fadeout:"ScrollableContainer-module__fadeout--gZnJx",fadeoutInstant:"ScrollableContainer-module__fadeoutInstant--FE_6H",fadeoutTop:"ScrollableContainer-module__fadeoutTop--OWH7Q",fadeoutBottom:"ScrollableContainer-module__fadeoutBottom--IWWr6",content:"ScrollableContainer-module__content--JDXW5",contentPadded:"ScrollableContainer-module__contentPadded--k6BGX"}},749190:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"StickerList-module__root--c59eh",sticker:"StickerList-module__sticker--JbnPY",stickerImage:"StickerList-module__stickerImage--f2FLJ"}},777478:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"SwitchMode-module__root--OkxGq",mode:"SwitchMode-module__mode--xF2VU",modeActive:"SwitchMode-module__modeActive--lx4fr",icon:"SwitchMode-module__icon--nixtS"}},667688:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"BaseEditor-module__root--_48Id",canvas:"BaseEditor-module__canvas--vj92A",tabs:"BaseEditor-module__tabs--oO1T9",redesignTabs:"BaseEditor-module__redesignTabs--TbFKu",tabsInner:"BaseEditor-module__tabsInner--nykCW",actions:"BaseEditor-module__actions--nPXhB",fontPreload:"BaseEditor-module__fontPreload--RX3Gl",inputFile:"BaseEditor-module__inputFile--qYELf",imageContainer:"BaseEditor-module__imageContainer--L3jgB",navigatorContainer:"BaseEditor-module__navigatorContainer--pMMOm",navigatorContainerHidden:"BaseEditor-module__navigatorContainerHidden--jfTgd",menuAfterLabel:"BaseEditor-module__menuAfterLabel--L9O6s"}},933714:(e,t,r)=>{r.d(t,{default:()=>o});const o={contents:"BlurPanel-module__contents--OVZ5d"}},636514:(e,t,r)=>{r.d(t,{default:()=>o});const o={}},690822:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"ColorCorrectionPanel-module__root--bAFJu",items:"ColorCorrectionPanel-module__items--ruILA",item:"ColorCorrectionPanel-module__item--FdNqa",itemName:"ColorCorrectionPanel-module__itemName--sBmJj",link:"ColorCorrectionPanel-module__link--LKCdo",icon:"ColorCorrectionPanel-module__icon--Se981",box:"ColorCorrectionPanel-module__box--Xw_2u",select:"ColorCorrectionPanel-module__select--w3wOe",slider:"ColorCorrectionPanel-module__slider--AFhvJ",dvd:"ColorCorrectionPanel-module__dvd--P9Xd8"}},251898:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"DrawPanel-module__root--EFjUE",sliders:"DrawPanel-module__sliders--PDdlP",slider:"DrawPanel-module__slider--LLVCO",title:"DrawPanel-module__title--kRFoP"}},561585:(e,t,r)=>{r.d(t,{default:()=>o});const o={canvas:"DrawingLayer-module__canvas--U7H8x",draw:"DrawingLayer-module__draw--hM14K",drawUpper:"DrawingLayer-module__drawUpper--pA5R_",disabled:"DrawingLayer-module__disabled--NIRV3"}},160914:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"EditorCanvas-module__root--TAUyx",scaleButton:"EditorCanvas-module__scaleButton--kzD_2",templateSticker:"EditorCanvas-module__templateSticker--D_liO",switchMode:"EditorCanvas-module__switchMode--xhbRb",switchModeAtTop:"EditorCanvas-module__switchModeAtTop--wYJsU",blurCursor:"EditorCanvas-module__blurCursor--YvQlZ",postIcon:"EditorCanvas-module__postIcon--ZanKI",postIconToolTip:"EditorCanvas-module__postIconToolTip--rhnHe",roundedCanvas:"EditorCanvas-module__roundedCanvas--xh8XZ"}},882762:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"FilterItem-module__root--zWowR",active:"FilterItem-module__active--ZIE3w",checked:"FilterItem-module__checked--YEjGA",inner:"FilterItem-module__inner--UiF5w",image:"FilterItem-module__image--vVuoT",name:"FilterItem-module__name--sQ3_I"}},641350:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"FiltersPanel-module__root--r_QWV",header:"FiltersPanel-module__header--kSvjL",inner:"FiltersPanel-module__inner--Bpqtl",slider:"FiltersPanel-module__slider--TZjc5",title:"FiltersPanel-module__title--_3WhY"}},540276:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"ImageLayer-module__root--Jc2Ut"}},530114:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"Navigator-module__root--qFzRU",rectangle:"Navigator-module__rectangle--hXPR3",rectangleNoTransitions:"Navigator-module__rectangleNoTransitions--SLMpR",rectContainer:"Navigator-module__rectContainer--dBX2Z",imageContainer:"Navigator-module__imageContainer--nz0Oj",shadowRect:"Navigator-module__shadowRect--N4Z40",image:"Navigator-module__image--Pcb4o"}},669270:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"NewCropControls-module__root--u8Ozs",inner:"NewCropControls-module__inner--Y4QtK",grid:"NewCropControls-module__grid--E58xC",line:"NewCropControls-module__line--YL8YN",lineH:"NewCropControls-module__lineH--Fj0cr",lineV:"NewCropControls-module__lineV--GqDH6",handle:"NewCropControls-module__handle--PZlFg",handleCorner:"NewCropControls-module__handleCorner--kW9n7",handleCornerNw:"NewCropControls-module__handleCornerNw--DV9Hg",handleCornerNe:"NewCropControls-module__handleCornerNe--zBsSO",handleCornerSw:"NewCropControls-module__handleCornerSw--iUHLb",handleCornerSe:"NewCropControls-module__handleCornerSe--D3E21",handleN:"NewCropControls-module__handleN--UMzcW",handleS:"NewCropControls-module__handleS--cuv8q",handleW:"NewCropControls-module__handleW--k47WF",handleE:"NewCropControls-module__handleE--KTa67",buttons:"NewCropControls-module__buttons--L7AWG",buttonsTop:"NewCropControls-module__buttonsTop--UhXgI",buttonsSmall:"NewCropControls-module__buttonsSmall--WLlx_",separator:"NewCropControls-module__separator--yRDnW"}},976488:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"NewCropPanel-module__root--sQmlZ",title:"NewCropPanel-module__title--n30Mn",tabs:"NewCropPanel-module__tabs--TRGYi",tabsItem:"NewCropPanel-module__tabsItem--C9EQn",tabsButton:"NewCropPanel-module__tabsButton--d6DKh",tabsButtonActive:"NewCropPanel-module__tabsButtonActive--ssoMK",settings:"NewCropPanel-module__settings--NySDc",settingsItem:"NewCropPanel-module__settingsItem--P0N4P"}},952400:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"NewDrawPanel-module__root--oJ4vC",brushPreviewContainer:"NewDrawPanel-module__brushPreviewContainer--orfjY",scrollableControls:"NewDrawPanel-module__scrollableControls--aM8Rd"}},857918:(e,t,r)=>{r.d(t,{default:()=>o});const o={row:"NewFiltersPanel-module__row--Rbwph",rowExpanded:"NewFiltersPanel-module__rowExpanded--HyroL",image:"NewFiltersPanel-module__image--S8skn"}},51952:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"NavigationHelperTopbar-module__root--izldK",fadeout:"NavigationHelperTopbar-module__fadeout--TCizQ",fadeoutLeft:"NavigationHelperTopbar-module__fadeoutLeft--VnHGL",fadeoutRight:"NavigationHelperTopbar-module__fadeoutRight--p0QHN",scrollable:"NavigationHelperTopbar-module__scrollable--Kx09X",tab:"NavigationHelperTopbar-module__tab--ZE7d_",tabSelected:"NavigationHelperTopbar-module__tabSelected--wlp3d",thumbImage:"NavigationHelperTopbar-module__thumbImage--vU6gr",arrow:"NavigationHelperTopbar-module__arrow--xBwCO",arrowLeft:"NavigationHelperTopbar-module__arrowLeft--TSf91",arrowRight:"NavigationHelperTopbar-module__arrowRight--Z4zV2",arrowIconFlipped:"NavigationHelperTopbar-module__arrowIconFlipped--Onyb4",arrowHidden:"NavigationHelperTopbar-module__arrowHidden--fQDF4",disableTransition:"NavigationHelperTopbar-module__disableTransition--zf7C4"}},752598:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"NewStickersPanelStickerPacks-module__root--tOVyW",header:"NewStickersPanelStickerPacks-module__header--siKSn",content:"NewStickersPanelStickerPacks-module__content--RvTTT",stickerPack:"NewStickersPanelStickerPacks-module__stickerPack--DEGVk",title:"NewStickersPanelStickerPacks-module__title--hzmzL",stickerList:"NewStickersPanelStickerPacks-module__stickerList--GK6rF"}},284362:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"SegmentationPane-module__root--zQ6nc",positive:"SegmentationPane-module__positive--mL8kG",negative:"SegmentationPane-module__negative--W_JIf",loading:"SegmentationPane-module__loading--PkWof"}},676308:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"SegmentationPanel-module__root--n7iVW",title:"SegmentationPanel-module__title--EjZPo",selection:"SegmentationPanel-module__selection--J9v2d",colors:"SegmentationPanel-module__colors--bRwdo"}},206838:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"StatusPanel-module__root--d7Llj",inner:"StatusPanel-module__inner--DB7re",link:"StatusPanel-module__link--UmNWP",info:"StatusPanel-module__info--YFYei",backgrounds:"StatusPanel-module__backgrounds--U9Qec",background:"StatusPanel-module__background--SA1IK",backgroundActive:"StatusPanel-module__backgroundActive--v__RN",arrow:"StatusPanel-module__arrow--gyvAO",arrowIcon:"StatusPanel-module__arrowIcon--CBJeJ",arrowLeft:"StatusPanel-module__arrowLeft--xeDoN",arrowRight:"StatusPanel-module__arrowRight--yinX7",square:"StatusPanel-module__square--zbkX7"}},994814:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"StickerPacksPanel-module__root--Cs2xQ",header:"StickerPacksPanel-module__header--rfkna",scroll:"StickerPacksPanel-module__scroll--fTDhF",tab:"StickerPacksPanel-module__tab--myqJ5",tabSelected:"StickerPacksPanel-module__tabSelected--Oo8H7",arrow:"StickerPacksPanel-module__arrow--hB7l6",arrowIcon:"StickerPacksPanel-module__arrowIcon--fM7lm",arrowLeft:"StickerPacksPanel-module__arrowLeft--IaeqU",arrowRight:"StickerPacksPanel-module__arrowRight--DCIgN",arrowRightDark:"StickerPacksPanel-module__arrowRightDark--K4cWy",arrowLeftDark:"StickerPacksPanel-module__arrowLeftDark--SYwWx",content:"StickerPacksPanel-module__content--hNxxV",preview:"StickerPacksPanel-module__preview--IfZAn",previewImage:"StickerPacksPanel-module__previewImage--eHJ1e"}},790594:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"StickersPanel-module__root--kZemz",content:"StickersPanel-module__content--zqKKY",preview:"StickersPanel-module__preview--Cd37C",previewImage:"StickersPanel-module__previewImage--g4tCd"}},601430:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"TextPanel-module__root--uLviH",fonts:"TextPanel-module__fonts--VI1Qb",fontSize:"TextPanel-module__fontSize--Wggv3",title:"TextPanel-module__title--yZMh8",radio:"TextPanel-module__radio--C6pOb",colors:"TextPanel-module__colors--YD4_W"}},601352:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"UndoRedo-module__root--EqrtK",scaleButton:"UndoRedo-module__scaleButton--iFweF",scaleButtonActive:"UndoRedo-module__scaleButtonActive--iXvgL"}},481786:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"ViewportHandler-module__root--DdA4M",grid:"ViewportHandler-module__grid--uzXTw",line:"ViewportHandler-module__line--gcid4",lineH:"ViewportHandler-module__lineH--RBbbi",lineV:"ViewportHandler-module__lineV--bkF7y"}},65055:(e,t,r)=>{r.d(t,{default:()=>o});const o={classic:"font-style-module__classic--ul2dx",cursive:"font-style-module__cursive--R5tf4",marker:"font-style-module__marker--AISc3",italics:"font-style-module__italics--sFk_w",typewriter:"font-style-module__typewriter--i43cs",poster:"font-style-module__poster--SRYxi",retro:"font-style-module__retro--Rwp8N",impact:"font-style-module__impact--Arlbi",lobster:"font-style-module__lobster--UP_KH"}},704235:(e,t,r)=>{r.d(t,{default:()=>o});const o="attribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform vec2 u_resolution;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n\t// convert the rectangle from pixels to 0.0 to 1.0\n\tvec2 zeroToOne = a_position / u_resolution;\n\n\t// convert from 0->1 to 0->2\n\tvec2 zeroToTwo = zeroToOne * 2.0;\n\n\t// convert from 0->2 to -1->+1 (clipspace)\n\tvec2 clipSpace = zeroToTwo - 1.0;\n\n\tgl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n\n\t// pass the texCoord to the fragment shader\n\t// The GPU will interpolate this value between points.\n\tv_texCoord = a_texCoord;\n}\n"},224465:(e,t,r)=>{r.d(t,{default:()=>o});const o="precision mediump float;\n\nvarying vec2 v_texCoord;\n\nuniform sampler2D u_image0; // image\nuniform sampler2D u_image1; // contrast_negative.png\nuniform sampler2D u_image2; // contrast_positive.png\nuniform sampler2D u_image3; // exposure_negative.png\nuniform sampler2D u_image4; // exposure_positive.png\nuniform sampler2D u_image5; // warm_negative_lut.png\nuniform sampler2D u_image6; // warm_positive_lit.png\nuniform sampler2D u_image7; // color table\n\nuniform float u_exposure;\nuniform float u_contrast;\nuniform float u_saturation;\nuniform float u_warmth;\nuniform float u_amount;\n\nvec3 ContrastSaturationBrightness(vec3 color, float brt, float sat, float con) {\n\tconst float AvgLumR = 0.5;\n\tconst float AvgLumG = 0.5;\n\tconst float AvgLumB = 0.5;\n\n\tconst vec3 LumCoeff = vec3(0.2125, 0.7154, 0.0721);\n\n\tvec3 AvgLumin = vec3(AvgLumR, AvgLumG, AvgLumB);\n\tvec3 brtColor = color * brt;\n\tvec3 intensity = vec3(dot(brtColor, LumCoeff));\n\tvec3 satColor = mix(intensity, brtColor, sat);\n\tvec3 conColor = mix(AvgLumin, satColor, con);\n\n\treturn conColor;\n}\n\nfloat BF_SoftLight(float base, float blend) {\n\treturn 2.0 * base * blend + base * base * (1.0 - 2.0 * blend);\n}\n\nvec3 BF_SoftLight(vec3 base, vec3 blend) {\n\treturn vec3(BF_SoftLight(base.r, blend.r), BF_SoftLight(base.g, blend.g), BF_SoftLight(base.b, blend.b));\n}\n\nvec3 Exposure(vec3 view, float intensity) {\n\tvec3 exposure1;\n\texposure1.r = texture2D(u_image3, vec2(view.r, 0.5)).r;\n\texposure1.g = texture2D(u_image3, vec2(view.g, 0.5)).g;\n\texposure1.b = texture2D(u_image3, vec2(view.b, 0.5)).b;\n\n\tvec3 exposure2;\n\texposure2.r = texture2D(u_image4, vec2(view.r, 0.5)).r;\n\texposure2.g = texture2D(u_image4, vec2(view.g, 0.5)).g;\n\texposure2.b = texture2D(u_image4, vec2(view.b, 0.5)).b;\n\n\tvec3 result;\n\tif (intensity >= 0.0) {\n\t\tresult = mix(view, exposure2, intensity);\n\t} else {\n\t\tresult = mix(view, exposure1, -intensity);\n\t}\n\n\treturn result;\n}\n\nvec3 Contrast(vec3 view, float intensity) {\n\tvec3 contrast1;\n\tcontrast1.r = texture2D(u_image1, vec2(view.r, 0.5)).r;\n\tcontrast1.g = texture2D(u_image1, vec2(view.g, 0.5)).g;\n\tcontrast1.b = texture2D(u_image1, vec2(view.b, 0.5)).b;\n\n\tvec3 contrast2;\n\tcontrast2.r = texture2D(u_image2, vec2(view.r, 0.5)).r;\n\tcontrast2.g = texture2D(u_image2, vec2(view.g, 0.5)).g;\n\tcontrast2.b = texture2D(u_image2, vec2(view.b, 0.5)).b;\n\n\tvec3 result;\n\tif (intensity >= 0.0) {\n\t\tresult = mix(view, contrast2, intensity);\n\t} else {\n\t\tresult = mix(view, contrast1, -intensity);\n\t}\n\n\treturn result;\n}\n\nvec3 ColorTemp(vec3 view, float intensity) {\n\tfloat blueColor = view.b * 63.0;\n\n\tvec2 quad1;\n\tquad1.y = floor(floor(blueColor) / 8.0);\n\tquad1.x = floor(blueColor) - (quad1.y * 8.0);\n\n\tvec2 quad2;\n\tquad2.y = floor(ceil(blueColor) / 8.0);\n\tquad2.x = ceil(blueColor) - (quad2.y * 8.0);\n\n\tvec2 texPos1;\n\ttexPos1.x = (quad1.x * 0.125) + 0.5 / 960.0 + ((0.125 - 1.0 / 960.0) * view.r);\n\ttexPos1.y = (quad1.y * 0.125) + 0.5 / 960.0 + ((0.125 - 1.0 / 960.0) * view.g);\n\n\tvec2 texPos2;\n\ttexPos2.x = (quad2.x * 0.125) + 0.5 / 960.0 + ((0.125 - 1.0 / 960.0) * view.r);\n\ttexPos2.y = (quad2.y * 0.125) + 0.5 / 960.0 + ((0.125 - 1.0 / 960.0) * view.g);\n\n\tvec3 coldColor1 = texture2D(u_image5, texPos1).rgb;\n\tvec3 coldColor2 = texture2D(u_image5, texPos2).rgb;\n\tvec3 coldColor = mix(coldColor1, coldColor2, fract(blueColor));\n\n\tvec3 warmColor1 = texture2D(u_image6, texPos1).rgb;\n\tvec3 warmColor2 = texture2D(u_image6, texPos2).rgb;\n\tvec3 warmColor = mix(warmColor1, warmColor2, fract(blueColor));\n\n\tvec3 result;\n\n\tif (intensity >= 0.0) {\n\t\tresult = mix(view, warmColor, intensity);\n\t} else {\n\t\tresult = mix(view, coldColor, -intensity);\n\t}\n\n\treturn result;\n}\n\nvec3 Saturation(vec3 view, float intensity) {\n\treturn ContrastSaturationBrightness(view, 1.0, intensity, 1.0);\n}\n\nvec3 Lut(vec3 view, sampler2D tex, float intensity) {\n\tfloat blueColor = view.b * 63.0;\n\n\tvec2 quad1;\n\tquad1.y = floor(floor(blueColor) / 8.0);\n\tquad1.x = floor(blueColor) - (quad1.y * 8.0);\n\n\tvec2 quad2;\n\tquad2.y = floor(ceil(blueColor) / 8.0);\n\tquad2.x = ceil(blueColor) - (quad2.y * 8.0);\n\n\tvec2 texPos1;\n\ttexPos1.x = (quad1.x * 0.125) + 0.5 / 512.0 + ((0.125 - 1.0 / 512.0) * view.r);\n\ttexPos1.y = (quad1.y * 0.125) + 0.5 / 512.0 + ((0.125 - 1.0 / 512.0) * view.g);\n\n\tvec2 texPos2;\n\ttexPos2.x = (quad2.x * 0.125) + 0.5 / 512.0 + ((0.125 - 1.0 / 512.0) * view.r);\n\ttexPos2.y = (quad2.y * 0.125) + 0.5 / 512.0 + ((0.125 - 1.0 / 512.0) * view.g);\n\n\tvec3 newColor1 = texture2D(tex, texPos1).rgb;\n\tvec3 newColor2 = texture2D(tex, texPos2).rgb;\n\n\tvec3 newColor = mix(newColor1, newColor2, fract(blueColor));\n\tvec3 color = mix(view, newColor, intensity);\n\n\treturn color;\n}\n\n// [-1.0; 1.0]\nvec3 pExposure(vec3 view, float intensity) {\n\tintensity = clamp(intensity, -1.0, 1.0);\n\treturn Exposure(view, intensity);\n}\n\n// [-1.0; 1.0]\nvec3 pContrast(vec3 view, float intensity) {\n\tintensity = clamp(intensity, -1.0, 1.0);\n\treturn Contrast(view, intensity);\n}\n\n// [-1.0; 1.0]\nvec3 pColorTemp(vec3 view, float intensity) {\n\tintensity = clamp(intensity, -1.0, 1.0);\n\treturn ColorTemp(view, intensity);\n}\n\n// [-1.0; 1.0]\nvec3 pSaturation(vec3 view, float intensity) {\n\tvec2 range = vec2(0.0, 1.6);\n\tintensity = clamp(intensity, -1.0, 1.0);\n\tintensity = (intensity >= 0.0) ? 1.0 + (range.y - 1.0) * intensity : range.x + (1.0 - range.x) * (intensity + 1.0);\n\treturn Saturation(view, intensity);\n}\n\n// [0.0; 1.0]\nvec3 pLut(vec3 view,sampler2D tex, float intensity) {\n\tvec2 range = vec2(0.0, 1.0);\n\tintensity = clamp(intensity, 0.0, 1.0);\n\treturn Lut(view, tex, intensity);\n}\n\nvoid main() {\n\t// Хак для того, чтобы перевернуть текстуру\n\tvec2 texelCoord = v_texCoord;\n\ttexelCoord.y = 1. - texelCoord.y;\n\n\tvec4 texture = texture2D(u_image0, texelCoord);\n\n\ttexture.rgb = pColorTemp(texture.rgb, u_warmth);\n\ttexture.rgb = pLut(texture.rgb, u_image7, u_amount);\n\ttexture.rgb = pExposure(texture.rgb, u_exposure);\n\ttexture.rgb = pContrast(texture.rgb, u_contrast);\n\ttexture.rgb = pSaturation(texture.rgb, u_saturation);\n\n\tgl_FragColor = texture;\n}\n"},951584:(e,t,r)=>{r.d(t,{default:()=>o});const o="precision mediump float;\n\nuniform sampler2D u_image0; // blurred image\nuniform sampler2D u_image1; // original image\nuniform vec2 u_position;\nuniform float u_radius;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n\t// Хак для того, чтобы перевернуть текстуру\n\tvec2 texelCoord = v_texCoord;\n\ttexelCoord.y = 1. - texelCoord.y;\n\n\tvec4 color = texture2D(u_image0, texelCoord);\n\tfloat distanceFromCenter = distance(u_position, texelCoord);\n\n\tcolor = mix(texture2D(u_image1, texelCoord), color, clamp(smoothstep(u_radius / 3.0, u_radius, distanceFromCenter), 0.0, 1.0));\n\tgl_FragColor = color;\n}\n"},731437:(e,t,r)=>{r.d(t,{default:()=>o});const o="precision mediump float;\n\nuniform sampler2D u_image0; // blurred image\nuniform sampler2D u_image1; // original image\nuniform vec2 u_position;\nuniform float u_radius;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n\t// Хак для того, чтобы перевернуть текстуру\n\tvec2 texelCoord = v_texCoord;\n\ttexelCoord.y = 1. - texelCoord.y;\n\n\tvec4 color = texture2D(u_image0, texelCoord);\n\tvec2 realPosition = u_position;\n\trealPosition.x = texelCoord.x;\n\n\tfloat distanceFromCenter = distance(realPosition, texelCoord);\n\tcolor = mix(texture2D(u_image1, texelCoord), color, clamp(smoothstep(u_radius / 4.0, u_radius / 2.0, distanceFromCenter), 0.0, 1.0));\n\n\tgl_FragColor = color;\n}\n"},31709:(e,t,r)=>{r.d(t,{default:()=>o});const o="precision mediump float;\n\nuniform sampler2D u_texture;\nvarying vec2 v_texCoord;\n\nvoid main() {\n\tvec4 color = texture2D(u_texture, vec2(v_texCoord.x, 1.0 - v_texCoord.y));\n\tgl_FragColor = color;\n}\n"},267776:(e,t,r)=>{r.d(t,{default:()=>o});const o="precision mediump float;\n\nvarying vec2 v_texCoord;\n\nuniform sampler2D u_image0;\n\nuniform float u_vignette;\nuniform float u_sharpness;\nuniform float u_grain;\n\nuniform vec2 u_sourceSize;\n\nvec4 rnm(in vec2 tc) {\n\tfloat timer = 0.4;\n\tfloat noise = sin(dot(tc + vec2(timer, timer), vec2(12.9898, 78.233))) * 43758.5453;\n\n\tfloat noiseR = fract(noise) * 2.0 - 1.0;\n\tfloat noiseG = fract(noise * 1.2154) * 2.0 - 1.0;\n\tfloat noiseB = fract(noise * 1.3453) * 2.0 - 1.0;\n\tfloat noiseA = fract(noise * 1.3647) * 2.0 - 1.0;\n\n\treturn vec4(noiseR,noiseG,noiseB,noiseA);\n}\n\nfloat fade(in float t) {\n\treturn t * t * t * (t * (t * 6.0 - 15.0) + 10.0);\n}\n\nfloat pnoise3D(in vec3 p) {\n\tvec3 pi = 0.00195313 * floor(p) + 0.00195313;\n\tvec3 pf = fract(p); // Fractional part for interpolation\n\n\t// Noise contributions from (x=0, y=0), z=0 and z=1\n\tfloat perm00 = rnm(pi.xy).a ;\n\tvec3  grad000 = rnm(vec2(perm00, pi.z)).rgb * 4.0 - 1.0;\n\tfloat n000 = dot(grad000, pf);\n\tvec3  grad001 = rnm(vec2(perm00, pi.z + 0.00195313)).rgb * 4.0 - 1.0;\n\tfloat n001 = dot(grad001, pf - vec3(0.0, 0.0, 1.0));\n\n\t// Noise contributions from (x=0, y=1), z=0 and z=1\n\tfloat perm01 = rnm(pi.xy + vec2(0.0, 0.00195313)).a ;\n\tvec3  grad010 = rnm(vec2(perm01, pi.z)).rgb * 4.0 - 1.0;\n\tfloat n010 = dot(grad010, pf - vec3(0.0, 1.0, 0.0));\n\tvec3  grad011 = rnm(vec2(perm01, pi.z + 0.00195313)).rgb * 4.0 - 1.0;\n\tfloat n011 = dot(grad011, pf - vec3(0.0, 1.0, 1.0));\n\n\t// Noise contributions from (x=1, y=0), z=0 and z=1\n\tfloat perm10 = rnm(pi.xy + vec2(0.00195313, 0.0)).a ;\n\tvec3  grad100 = rnm(vec2(perm10, pi.z)).rgb * 4.0 - 1.0;\n\tfloat n100 = dot(grad100, pf - vec3(1.0, 0.0, 0.0));\n\tvec3  grad101 = rnm(vec2(perm10, pi.z + 0.00195313)).rgb * 4.0 - 1.0;\n\tfloat n101 = dot(grad101, pf - vec3(1.0, 0.0, 1.0));\n\n\t// Noise contributions from (x=1, y=1), z=0 and z=1\n\tfloat perm11 = rnm(pi.xy + vec2(0.00195313, 0.00195313)).a ;\n\tvec3  grad110 = rnm(vec2(perm11, pi.z)).rgb * 4.0 - 1.0;\n\tfloat n110 = dot(grad110, pf - vec3(1.0, 1.0, 0.0));\n\tvec3  grad111 = rnm(vec2(perm11, pi.z + 0.00195313)).rgb * 4.0 - 1.0;\n\tfloat n111 = dot(grad111, pf - vec3(1.0, 1.0, 1.0));\n\n\t// Blend contributions along x\n\tvec4 n_x = mix(vec4(n000, n001, n010, n011), vec4(n100, n101, n110, n111), fade(pf.x));\n\n\t// Blend contributions along y\n\tvec2 n_xy = mix(n_x.xy, n_x.zw, fade(pf.y));\n\n\t// Blend contributions along z\n\tfloat n_xyz = mix(n_xy.x, n_xy.y, fade(pf.z));\n\n\t// We're done, return the final noise value.\n\treturn n_xyz;\n}\n\n//2d coordinate orientation thing\nvec2 coordRot(in vec2 tc, in float angle) {\n\tfloat aspect = u_sourceSize.x / u_sourceSize.y;\n\tvec2 uv = (tc * 2.0) - 1.0;\n\tfloat rotX = (uv.x * aspect * cos(angle)) - (uv.y * sin(angle));\n\tfloat rotY = (uv.y * cos(angle)) + (uv.x * aspect * sin(angle));\n\trotX = ((rotX / aspect) * 0.5 + 0.5);\n\trotY = rotY * 0.5 + 0.5;\n\treturn vec2(rotX, rotY);\n}\n\nvec3 BF_Multiply(vec3 base, vec3 blend) {\n\treturn base * blend;\n}\n\nfloat BF_Screen(float base, float blend) {\n\treturn 1.0 - ((1.0 - base) * (1.0 - blend));\n}\n\nvec3 BF_Screen(vec3 base, vec3 blend) {\n\treturn 1.0 - ((1.0 - base) * (1.0 - blend));\n}\n\nvec3 Sharpness(vec3 view, float intensity) {\n\tvec2 uv = v_texCoord;\n\tvec2 step = 1.0 / u_sourceSize;\n\n\tvec3 texA = texture2D(u_image0, uv + vec2(-step.x, -step.y) * 1.0).rgb;\n\tvec3 texB = texture2D(u_image0, uv + vec2( step.x, -step.y) * 1.0).rgb;\n\tvec3 texC = texture2D(u_image0, uv + vec2(-step.x,  step.y) * 1.0).rgb;\n\tvec3 texD = texture2D(u_image0, uv + vec2( step.x,  step.y) * 1.0).rgb;\n\n\tvec3 around = 0.25 * (texA + texB + texC + texD);\n\tvec3 center  = texture2D(u_image0, uv ).rgb;\n\tvec3 col = center + (center - around) * intensity;\n\n\treturn col;\n}\n\nvec3 Grain(vec3 view, float intensity) {\n\tvec2 texCoord = v_texCoord;\n\n\tfloat timer = 0.4;\n\tfloat coloramount = 0.4;\n\tfloat grainsize = 2.0;\n\tfloat lumamount = 0.3;\n\n\tbool colored = true;\n\n\tvec3 rotOffset = vec3(1.425, 3.892, 5.835); // rotation offset values\n\tvec2 rotCoordsR = coordRot(texCoord, timer + rotOffset.x);\n\tvec3 noise = vec3(pnoise3D(vec3(rotCoordsR * vec2(u_sourceSize.x / grainsize, u_sourceSize.y / grainsize), 0.0)));\n\n\tif (colored) {\n\t\tvec2 rotCoordsG = coordRot(texCoord, timer + rotOffset.y);\n\t\tvec2 rotCoordsB = coordRot(texCoord, timer + rotOffset.z);\n\t\tnoise.g = mix(noise.r, pnoise3D(vec3(rotCoordsG * vec2(u_sourceSize.x / grainsize, u_sourceSize.y / grainsize), 1.0)), coloramount);\n\t\tnoise.b = mix(noise.r, pnoise3D(vec3(rotCoordsB * vec2(u_sourceSize.x / grainsize, u_sourceSize.y / grainsize), 2.0)), coloramount);\n\t}\n\n\tvec3 col = view.rgb;\n\tvec3 lumcoeff = vec3(0.299, 0.587, 0.114);\n\tfloat luminance = lumamount * dot(col, lumcoeff);\n\tfloat lum = smoothstep(0.2, 0.0, luminance);\n\n\tlum += luminance;\n\tnoise = mix(noise, vec3(0.0), pow(lum, 4.0));\n\tcol = col + noise * intensity;\n\n\treturn col;\n}\n\nvec3 Vignette(vec3 view, float intensity) {\n\tfloat inten = abs(intensity);\n\tfloat dist = distance(v_texCoord, vec2(0.5, 0.5));\n\tfloat size = 0.5 - inten * 0.4;\n\tfloat amount = inten * inten * 0.1 + 0.5 * inten;\n\tfloat vignette = smoothstep(0.8, size * 0.799, dist * (amount + size));\n\treturn (intensity >= 0.0) ? view * vignette : BF_Screen(view,vec3(1.0-vignette));\n}\n\n// [-1; 1]\nvec3 pSharpness(vec3 view, float intensity) {\n\tvec2 range = vec2(0.0, 1.5);\n\tintensity = clamp(intensity, 0.0, 1.0);\n\tintensity = (intensity >= 0.0) ? range.y * intensity : -range.x * (intensity+1.0) + range.x;\n\treturn Sharpness(view, intensity);\n}\n\n// [0; 1]\nvec3 pGrain(vec3 view, float intensity) {\n\tvec2 range = vec2(0.0, 0.2);\n\n\tintensity = clamp(intensity, 0.0, 1.0);\n\tintensity = (intensity >= 0.0) ? range.y * intensity : -range.x * (intensity + 1.0) + range.x;\n\treturn Grain(view, intensity);\n}\n\n// [-1; 1]\nvec3 pVignette(vec3 view, float intensity) {\n\tvec2 range = vec2(-1.0, 1.0);\n\tintensity = clamp(intensity, -1.0, 1.0);\n\tintensity = (intensity >= 0.0) ? range.y * intensity : -range.x * (intensity + 1.0) + range.x;\n\treturn Vignette(view, intensity);\n}\n\nvoid main() {\n\tvec4 texture = texture2D(u_image0, v_texCoord);\n\n\ttexture.rgb = pSharpness(texture.rgb, u_sharpness);\n\ttexture.rgb = pVignette(texture.rgb, u_vignette);\n\ttexture.rgb = pGrain(texture.rgb, u_grain);\n\n\tgl_FragColor = texture;\n}\n"},744084:(e,t,r)=>{r.d(t,{default:()=>o});const o="precision mediump float;\n\nuniform sampler2D u_image0; // original image\nuniform vec2 u_delta;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n\tvec4 color = vec4(0.0);\n\tfloat total = 0.0;\n\tfloat offset = fract(sin(dot(gl_FragCoord.xyz, vec3(12.9898, 78.233, 151.7182))) * 43758.5453);\n\n\tfor (float t = -30.0; t <= 30.0; t++) {\n\t\tfloat percent = (t + offset - 0.5) / 30.0;\n\t\tfloat weight = 1.0 - abs(percent);\n\t\tvec4 sampleColor = texture2D(u_image0, v_texCoord + u_delta * percent);\n\t\tsampleColor.rgb *= sampleColor.a;\n\n\t\tcolor += sampleColor * weight;\n\t\ttotal += weight;\n\t}\n\n\tcolor = color / total;\n\tcolor.rgb /= color.a + 0.00001;\n\tgl_FragColor = color;\n}\n"},216073:(e,t,r)=>{var o=r(82960).compose;t.composeWithDevTools=function(){if(0!==arguments.length)return"object"==typeof arguments[0]?o:o.apply(null,arguments)}},954785:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ActionCreators=t.ActionTypes=void 0;var r={UNDO:"@@redux-undo/UNDO",REDO:"@@redux-undo/REDO",JUMP_TO_FUTURE:"@@redux-undo/JUMP_TO_FUTURE",JUMP_TO_PAST:"@@redux-undo/JUMP_TO_PAST",JUMP:"@@redux-undo/JUMP",CLEAR_HISTORY:"@@redux-undo/CLEAR_HISTORY"};t.ActionTypes=r;var o={undo:function(){return{type:r.UNDO}},redo:function(){return{type:r.REDO}},jumpToFuture:function(e){return{type:r.JUMP_TO_FUTURE,index:e}},jumpToPast:function(e){return{type:r.JUMP_TO_PAST,index:e}},jump:function(e){return{type:r.JUMP,index:e}},clearHistory:function(){return{type:r.CLEAR_HISTORY}}};t.ActionCreators=o},296453:(e,t)=>{function r(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o,i;Object.defineProperty(t,"__esModule",{value:!0}),t.set=function(e){o=e},t.start=function(e,t){void(i={header:[],prev:[],action:[],next:[],msgs:[]}),o&&(console.group?(i.header=["%credux-undo","font-style: italic","action",e.type],i.action=s("action",n.action,e),i.prev=s("prev history",n.prevState,t)):(i.header=["redux-undo action",e.type],i.action=["action",e],i.prev=["prev history",t]))},t.end=function(e){o&&(console.group?i.next=s("next history",n.nextState,e):i.next=["next history",e],function(){var e=i,t=e.header,o=e.prev,n=e.next,s=e.action,a=e.msgs;if(console.group){var l,c,d,h,u;(l=console).groupCollapsed.apply(l,r(t)),(c=console).log.apply(c,r(o)),(d=console).log.apply(d,r(s)),(h=console).log.apply(h,r(n)),(u=console).log.apply(u,r(a)),console.groupEnd()}else{var p,g,_,m,f;(p=console).log.apply(p,r(t)),(g=console).log.apply(g,r(o)),(_=console).log.apply(_,r(s)),(m=console).log.apply(m,r(n)),(f=console).log.apply(f,r(a))}}())},t.log=function(){if(o){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];i.msgs=i.msgs.concat([].concat(t,["\n"]))}};var n={prevState:"#9E9E9E",action:"#03A9F4",nextState:"#4CAF50"};function s(e,t,r){return["%c".concat(e),"color: ".concat(t,"; font-weight: bold"),r]}},695075:(e,t)=>{function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Array.isArray(e)?e:"string"==typeof e?[e]:t}Object.defineProperty(t,"__esModule",{value:!0}),t.parseActions=r,t.isHistory=function(e){return void 0!==e.present&&void 0!==e.future&&void 0!==e.past&&Array.isArray(e.future)&&Array.isArray(e.past)},t.includeAction=function(e){var t=r(e);return function(e){return t.indexOf(e.type)>=0}},t.excludeAction=function(e){var t=r(e);return function(e){return t.indexOf(e.type)<0}},t.combineFilters=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((function(e,t){return function(r,o,i){return e(r,o,i)&&t(r,o,i)}}),(function(){return!0}))},t.groupByActionTypes=function(e){var t=r(e);return function(e){return t.indexOf(e.type)>=0?e.type:null}},t.newHistory=function(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{past:e,present:t,future:r,group:o,_latestUnfiltered:t,index:e.length,limit:e.length+r.length+1}}},503618:(e,t,r)=>{Object.defineProperty(t,"ActionCreators",{enumerable:!0,get:function(){return i.ActionCreators}}),Object.defineProperty(t,"includeAction",{enumerable:!0,get:function(){return n.includeAction}}),Object.defineProperty(t,"combineFilters",{enumerable:!0,get:function(){return n.combineFilters}}),Object.defineProperty(t,"newHistory",{enumerable:!0,get:function(){return n.newHistory}}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s.default}});var o,i=r(954785),n=r(695075),s=(o=r(650190))&&o.__esModule?o:{default:o}},650190:(e,t,r)=>{function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i.set(t.debug);var r,o=c({limit:void 0,filter:function(){return!0},groupBy:function(){return null},undoType:n.ActionTypes.UNDO,redoType:n.ActionTypes.REDO,jumpToPastType:n.ActionTypes.JUMP_TO_PAST,jumpToFutureType:n.ActionTypes.JUMP_TO_FUTURE,jumpType:n.ActionTypes.JUMP,neverSkipReducer:!1,ignoreInitialState:!1,syncFilter:!1},t,{initTypes:(0,s.parseActions)(t.initTypes,["@@redux-undo/INIT"]),clearHistoryType:(0,s.parseActions)(t.clearHistoryType,[n.ActionTypes.CLEAR_HISTORY])}),a=o.neverSkipReducer?function(t,r){for(var o=arguments.length,i=new Array(o>2?o-2:0),n=2;n<o;n++)i[n-2]=arguments[n];return c({},t,{present:e.apply(void 0,[t.present,r].concat(i))})}:function(e){return e};return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i.start(n,t);for(var l,c,d=t,m=arguments.length,f=new Array(m>2?m-2:0),S=2;S<m;S++)f[S-2]=arguments[S];if(!r){if(i.log("history is uninitialized"),void 0===t){return d=u(e.apply(void 0,[t,{type:"@@redux-undo/CREATE_HISTORY"}].concat(f)),o.ignoreInitialState),i.log("do not set initialState on probe actions"),i.end(d),d}(0,s.isHistory)(t)?(d=r=o.ignoreInitialState?t:(0,s.newHistory)(t.past,t.present,t.future),i.log("initialHistory initialized: initialState is a history",r)):(d=r=u(t,o.ignoreInitialState),i.log("initialHistory initialized: initialState is not a history",r))}switch(n.type){case void 0:return d;case o.undoType:return l=_(d,-1),i.log("perform undo"),i.end(l),a.apply(void 0,[l,n].concat(f));case o.redoType:return l=_(d,1),i.log("perform redo"),i.end(l),a.apply(void 0,[l,n].concat(f));case o.jumpToPastType:return l=g(d,n.index),i.log("perform jumpToPast to ".concat(n.index)),i.end(l),a.apply(void 0,[l,n].concat(f));case o.jumpToFutureType:return l=p(d,n.index),i.log("perform jumpToFuture to ".concat(n.index)),i.end(l),a.apply(void 0,[l,n].concat(f));case o.jumpType:return l=_(d,n.index),i.log("perform jump to ".concat(n.index)),i.end(l),a.apply(void 0,[l,n].concat(f));case c=n.type,o.clearHistoryType.indexOf(c)>-1?c:!c:return l=u(d.present,o.ignoreInitialState),i.log("perform clearHistory"),i.end(l),a.apply(void 0,[l,n].concat(f));default:if(l=e.apply(void 0,[d.present,n].concat(f)),o.initTypes.some((function(e){return e===n.type})))return i.log("reset history due to init action"),i.end(r),r;if(d._latestUnfiltered===l)return d;if("function"==typeof o.filter&&!o.filter(n,l,d)){var v=(0,s.newHistory)(d.past,l,d.future,d.group);return o.syncFilter||(v._latestUnfiltered=d._latestUnfiltered),i.log("filter ignored action, not storing it in past"),i.end(v),v}var E=o.groupBy(n,l,d);if(null!=E&&E===d.group){var T=(0,s.newHistory)(d.past,l,d.future,d.group);return i.log("groupBy grouped the action with the previous action"),i.end(T),T}return d=function(e,t,r,o){var n=e.past.length+1;i.log("inserting",t),i.log("new free: ",r-n);var a=e.past,l=e._latestUnfiltered,c=r&&r<=n,d=a.slice(c?1:0),u=null!=l?[].concat(h(d),[l]):d;return(0,s.newHistory)(u,t,[],o)}(d,l,o.limit,E),i.log("inserted new state into history"),i.end(d),d}}};var i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var s=i?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(r,n,s):r[n]=e[n]}r.default=e,t&&t.set(e,r);return r}(r(296453)),n=r(954785),s=r(695075);function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(e,t){var r=(0,s.newHistory)([],e,[]);return t&&(r._latestUnfiltered=null),r}function p(e,t){if(t<0||t>=e.future.length)return e;var r=e.past,o=e.future,i=e._latestUnfiltered,n=[].concat(h(r),[i],h(o.slice(0,t))),a=o[t],l=o.slice(t+1);return(0,s.newHistory)(n,a,l)}function g(e,t){if(t<0||t>=e.past.length)return e;var r=e.past,o=e.future,i=e._latestUnfiltered,n=r.slice(0,t),a=[].concat(h(r.slice(t+1)),[i],h(o)),l=r[t];return(0,s.newHistory)(n,l,a)}function _(e,t){return t>0?p(e,t-1):t<0?g(e,e.past.length+t):e}},556373:(e,t,r)=>{function o(){return{icon:'<svg fill="none" height="12" viewBox="0 0 12 12" width="12" xmlns="http://www.w3.org/2000/svg"><path d="M9.77 5.35c.5.29.5 1.01 0 1.3L4.15 9.9a.75.75 0 0 1-1.13-.65v-6.5c0-.57.63-.94 1.13-.65z" fill="currentColor"/></svg>',name:"play_12"}}r.d(t,{getIcon12Play:()=>o})},77294:(e,t,r)=>{r.d(t,{statlogsProbValueEvent:()=>s,statlogsValueEvent:()=>n});var o=r(476726),i=r(490712);function n(e,t,r,o,n){return(0,i.statlogsValueEvent)(e,t,r,o,n)}function s(e,t,r,i,s,a){(0,o.randEnabled)(e)&&n(t,r,i,s,a)}},357128:(e,t,r)=>{r.d(t,{Atom:()=>o});class o{set(e,{notify:t=!0}={}){t&&this.base.notify(this.key)}getKey(){return`${this.base.options.storeName}-${this.key}`}constructor({key:e,base:t}){this.key=e,this.base=t}}},200644:(e,t,r)=>{r.d(t,{Store:()=>o});class o{subscribe(e,t){const r=this.getListeners(t);return r.add(e),()=>{r.delete(e)}}notify(e,t){this.getListeners(t).forEach((t=>{t(e)}))}refresh(){try{localStorage.setItem(this.key,""),localStorage.removeItem(this.key)}catch{}}destroy(){this.listeners.clear(),this.syncListeners.clear(),o.instances.delete(this.key)}get key(){const{dbName:e,storeName:t,version:r}=this.options;return`${e}-v${r}-${t}`}getListeners(e){return e?this.syncListeners:this.listeners}constructor(e){this.listeners=new Set,this.syncListeners=new Set,this.options=e,o.instances.set(this.key,this)}}o.instances=new Map,window.addEventListener("storage",(({key:e,newValue:t})=>{if(!e||null===t)return;const r=o.instances.get(e);r?.notify()}))},199880:(e,t,r)=>{r.d(t,{SyncAtom:()=>n,SyncAtomType:()=>o});var o,i=r(357128);!function(e){e.OBJECT="object",e.STRING="string",e.NUMBER="number",e.BOOLEAN="boolean",e.STRING_NUMBER="string_number"}(o||(o={}));class n extends i.Atom{get(){const e=this.getKey();try{let t=localStorage.getItem(e);if(!t)return null;switch(this.type){case o.OBJECT:try{t=JSON.parse(t)}catch{return null}break;case o.NUMBER:t=Number(t)||0;break;case o.STRING_NUMBER:t=Number(t)||t;break;case o.BOOLEAN:t=Boolean(Number(t))}return t}catch(t){return console.log(`${e}: Ошибка чтения данных из хранилища`),console.log(t),this.cache||null}}set(e,t){const r=this.getKey();let i;switch(this.type){case o.OBJECT:i=JSON.stringify(e);break;case o.BOOLEAN:i=String(Number(e));break;default:i=String(e)}try{localStorage.setItem(r,i)}catch(t){console.log(`${r}: Не удалось записать данные в хранилище`),console.log(t),this.cache=e}super.set(e,t)}delete(){const e=this.getKey();try{delete this.cache,localStorage.removeItem(e)}catch(t){console.log(`${e}: Ошибка удаления ключа из хранилища`),console.log(t)}}getKey(){return`${this.base.key}-${this.key}`}constructor(e){super(e);const{base:t,type:r}=e;this.base=t,this.type=r}}},415117:(e,t,r)=>{r.d(t,{createSyncStore:()=>s});var o=r(200644),i=r(199880);class n extends o.Store{createAtom(e,t){return new i.SyncAtom({key:e,type:t,base:this})}constructor(e){super(e)}}function s(e){return new n(e)}},579605:(e,t,r)=>{r.d(t,{loadImage:()=>o});const o=(e,t)=>new Promise(((r,o)=>{const i=new Image;i.crossOrigin=e.startsWith("data:")?null:"Anonymous",t&&(i.dataset.name=t),i.onerror=()=>{const t=e?.startsWith("data:")?"<dataURL>":e;o(new Error(`Failed to load image's URL: ${t}`))},i.onload=()=>{r(i)},i.src=e}))},343302:(e,t,r)=>{r.d(t,{AnswerQuestionSticker:()=>l});var o=r(102670),i=r(971779),n=r(885486),s=r(660354),a=r(399893);class l extends o.Sticker{prepareData(){return new Promise(((e,t)=>{const{questionOwnerPhoto:r,answerOwnerPhoto:o,cornerIcon:i,cornerIconFlipped:n}=this.props,s={questionOwnerPhoto:r,answerOwnerPhoto:o,cornerIcon:i,cornerIconFlipped:n};this.loadImages(s).then((()=>e(1))).catch((e=>t(e)))}))}render(){return new Promise(((e,t)=>{this.prepareData().then((()=>{this.draw(),e(1)})).catch((e=>{t(e)}))}))}draw(){const e=this.drawQuestion(a.AnswerQuestionStickerStyles.question.top,a.AnswerQuestionStickerStyles.question.left),t=this.drawAnswer(e.bottom+a.AnswerQuestionStickerStyles.answer.top,a.AnswerQuestionStickerStyles.answer.left);this.setWidth(t.right),this.setHeight(t.bottom),this.drawScene()}drawQuestion(e,t){const r=a.AnswerQuestionStickerStyles.question.width-2*a.AnswerQuestionStickerStyles.question.padding,o=new n.ImageItem({x:t+a.AnswerQuestionStickerStyles.questionCorner.marginLeft,image:this.getImage("cornerIcon"),width:a.AnswerQuestionStickerStyles.questionCorner.width,height:a.AnswerQuestionStickerStyles.questionCorner.height}),l=new i.RectItem({x:t+a.AnswerQuestionStickerStyles.question.marginLeft,y:e,width:a.AnswerQuestionStickerStyles.question.width,radius:a.AnswerQuestionStickerStyles.question.borderRadius,background:a.AnswerQuestionStickerStyles.question.background}),c=new n.ImageItem({x:l.getBoundingClientRect().left+a.AnswerQuestionStickerStyles.question.padding,y:l.getBoundingClientRect().top+a.AnswerQuestionStickerStyles.question.padding,image:this.getImage("questionOwnerPhoto"),width:a.AnswerQuestionStickerStyles.avatar.width,height:a.AnswerQuestionStickerStyles.avatar.height,radius:a.AnswerQuestionStickerStyles.avatar.width/2,borderSize:a.AnswerQuestionStickerStyles.avatar.borderSize,borderColor:a.AnswerQuestionStickerStyles.avatar.borderColor}),d=new s.TextItem({x:c.getBoundingClientRect().right+a.AnswerQuestionStickerStyles.questionOwnerName.marginLeft,y:c.getBoundingClientRect().top+a.AnswerQuestionStickerStyles.questionOwnerName.marginTop,text:this.props.questionOwnerName,fontSize:a.AnswerQuestionStickerStyles.questionOwnerName.fontSize,lineHeight:a.AnswerQuestionStickerStyles.questionOwnerName.lineHeight,fontFamily:a.AnswerQuestionStickerStyles.questionOwnerName.fontFamily,color:a.AnswerQuestionStickerStyles.questionOwnerName.color,maxWidth:r-c.getBoundingClientRect().width-a.AnswerQuestionStickerStyles.questionOwnerName.marginLeft,maxLines:1}),h=new s.TextItem({x:l.getBoundingClientRect().left+a.AnswerQuestionStickerStyles.question.padding,y:c.getBoundingClientRect().bottom+a.AnswerQuestionStickerStyles.questionText.marginTop,text:this.props.questionText,fontSize:a.AnswerQuestionStickerStyles.questionText.fontSize,lineHeight:a.AnswerQuestionStickerStyles.questionText.lineHeight,fontFamily:a.AnswerQuestionStickerStyles.questionText.fontFamily,fontWeight:a.AnswerQuestionStickerStyles.questionText.fontWeight,color:a.AnswerQuestionStickerStyles.questionText.color,maxWidth:r,maxLines:8});return l.setHeight(h.getBoundingClientRect().bottom+a.AnswerQuestionStickerStyles.question.padding-8),o.setY(l.getBoundingClientRect().bottom-124),this.add(o),this.add(l),this.add(c),this.add(d),this.add(h),l.getBoundingClientRect()}drawAnswer(e,t){const r=a.AnswerQuestionStickerStyles.answer.width-2*a.AnswerQuestionStickerStyles.answer.padding,o=new i.RectItem({x:t,y:e,width:a.AnswerQuestionStickerStyles.answer.width,radius:a.AnswerQuestionStickerStyles.answer.borderRadius,background:a.AnswerQuestionStickerStyles.answer.background}),l=new n.ImageItem({x:o.getBoundingClientRect().right+a.AnswerQuestionStickerStyles.answerCorner.marginLeft,image:this.getImage("cornerIconFlipped"),width:a.AnswerQuestionStickerStyles.answerCorner.width,height:a.AnswerQuestionStickerStyles.answerCorner.height}),c=new n.ImageItem({x:o.getBoundingClientRect().left+a.AnswerQuestionStickerStyles.answer.padding,y:o.getBoundingClientRect().top+a.AnswerQuestionStickerStyles.answer.padding,image:this.getImage("answerOwnerPhoto"),width:a.AnswerQuestionStickerStyles.avatar.width,height:a.AnswerQuestionStickerStyles.avatar.height,radius:a.AnswerQuestionStickerStyles.avatar.width/2,borderSize:a.AnswerQuestionStickerStyles.avatar.borderSize,borderColor:a.AnswerQuestionStickerStyles.avatar.borderColor}),d=new s.TextItem({x:c.getBoundingClientRect().right+a.AnswerQuestionStickerStyles.answerOwnerName.marginLeft,y:c.getBoundingClientRect().top+a.AnswerQuestionStickerStyles.answerOwnerName.marginTop,text:this.props.answerOwnerName,fontSize:a.AnswerQuestionStickerStyles.answerOwnerName.fontSize,lineHeight:a.AnswerQuestionStickerStyles.answerOwnerName.lineHeight,fontFamily:a.AnswerQuestionStickerStyles.answerOwnerName.fontFamily,maxWidth:r-c.getBoundingClientRect().width-a.AnswerQuestionStickerStyles.answerOwnerName.marginLeft,maxLines:1,color:a.AnswerQuestionStickerStyles.answerOwnerName.color}),h=new s.TextItem({x:o.getBoundingClientRect().left+a.AnswerQuestionStickerStyles.answer.padding,y:c.getBoundingClientRect().bottom+a.AnswerQuestionStickerStyles.answerText.marginTop,text:this.props.answerText,fontSize:a.AnswerQuestionStickerStyles.answerText.fontSize,lineHeight:a.AnswerQuestionStickerStyles.answerText.lineHeight,fontFamily:a.AnswerQuestionStickerStyles.answerText.fontFamily,fontWeight:a.AnswerQuestionStickerStyles.answerText.fontWeight,color:a.AnswerQuestionStickerStyles.answerText.color,maxWidth:r,maxLines:8});return o.setHeight(h.getBoundingClientRect().bottom+a.AnswerQuestionStickerStyles.answer.padding-16-e),l.setY(o.getBoundingClientRect().bottom-124),this.add(l),this.add(o),this.add(c),this.add(d),this.add(h),l.getBoundingClientRect()}constructor(e){super(),this.props=e}}},399893:(e,t,r)=>{r.d(t,{AnswerQuestionStickerStyles:()=>o});const o={avatar:{width:96,height:96,borderSize:4,borderColor:"rgba(0, 0, 0, 0.08)"},question:{top:0,left:0,width:968,padding:64,marginLeft:32,borderRadius:64,background:"#fff"},questionOwnerName:{marginLeft:32,marginTop:20,fontSize:60,lineHeight:80,fontFamily:"SF Pro Text, sans-serif",color:"#000"},questionText:{marginTop:48,fontSize:84,lineHeight:104,fontFamily:"SF Pro Text, sans-serif",fontWeight:"600",color:"#000"},questionCorner:{width:132,height:132,marginLeft:4},answer:{top:80,left:168,width:968,padding:64,borderRadius:64,background:"#fff"},answerOwnerName:{marginLeft:32,marginTop:20,fontSize:60,lineHeight:80,fontFamily:"SF Pro Text, sans-serif",color:"#2C2D2E"},answerText:{marginTop:48,fontSize:80,lineHeight:96,fontFamily:"SF Pro Text, sans-serif",fontWeight:"400",color:"#000"},answerCorner:{width:132,height:132,marginLeft:-100}}},23021:(e,t,r)=>{r.d(t,{AskQuestionAvatar:()=>n});var o=r(102670),i=r(885486);class n extends o.Sticker{render(){return new Promise(((e,t)=>{this.loadImages({photo:this.props.photoUrl}).then((()=>{this.draw(),e(1)})).catch((e=>{t(e)}))}))}draw(){const{size:e,borderSize:t=0,borderColor:r=""}=this.props,o=4*e,n=4*t,s=new i.ImageItem({image:this.getImage("photo"),width:o,height:o,radius:o/2,borderSize:n,borderColor:r});this.add(s),this.setWidth(s.getWidth()),this.setHeight(s.getHeight()),this.drawScene()}constructor(e){super(),this.props=e}}},574614:(e,t,r)=>{r.d(t,{AskQuestionText:()=>s});var o=r(102670),i=r(660354),n=r(448517);class s extends o.Sticker{render(){return new Promise((e=>{this.draw(),e(1)}))}draw(){const e=new i.TextItem({text:this.props.text,fontSize:n.AskQuestionTextStyles.fontSize,lineHeight:n.AskQuestionTextStyles.lineHeight,fontFamily:n.AskQuestionTextStyles.fontFamily,fontWeight:n.AskQuestionTextStyles.fontWeight,color:n.AskQuestionTextStyles.color,fillColor:n.AskQuestionTextStyles.fillColor,fillRadius:n.AskQuestionTextStyles.fillRadius,padding:{top:n.AskQuestionTextStyles.paddingTop,bottom:n.AskQuestionTextStyles.paddingBottom,left:n.AskQuestionTextStyles.paddingLeft,right:n.AskQuestionTextStyles.paddingRight}});this.add(e),this.setWidth(e.getWidth()),this.setHeight(e.getHeight()),this.drawScene()}constructor(e){super(),this.props=e}}},448517:(e,t,r)=>{r.d(t,{AskQuestionTextStyles:()=>o});const o={fontSize:136,lineHeight:144,fontFamily:"VK Sans Display, SF Pro Text, sans-serif",fontWeight:"600",color:"#000",fillColor:"#fff",fillRadius:48,paddingTop:64,paddingBottom:40,paddingLeft:72,paddingRight:72}},474477:(e,t,r)=>{r.d(t,{CommentSticker:()=>I});var o=r(102670),i=r(971779),n=r(885486),s=r(660354),a=r(453672),l=r(936716),c=r(43604),d=r(879570),h=r(577027),u=r(630203),p=r(952742),g=r(525420),_=r(445452),m=r(354327),f=r(817587),S=r(637399),v=r(131857),E=r(454188),T=r(398282),w=r(171867),C=r(671342),y=r(169697);const x=80,b="SF Pro Text, sans-serif";class I extends o.Sticker{static getReplyMediaIcon(e){let t="";switch(e){case"photo":t=(0,a.getIcon20CameraOutline)().icon;break;case"video":t=(0,l.getIcon20VideoCircleOutline)().icon;break;case"audio":t=(0,c.getIcon20MusicOutline)().icon;break;case"doc":t=(0,d.getIcon20DocumentOutline)().icon;break;case"article":t=(0,h.getIcon20ArticleOutline)().icon;break;case"narrative":t=(0,u.getIcon20NarrativeOutline)().icon;break;default:t=(0,p.getIcon20Attach)().icon}return t}static getPostMediaIcon(e){let t="";switch(e){case"audio":t=(0,g.getIcon28MusicOutline)().icon;break;case"video":t=(0,_.getIcon28VideoOutline)().icon;break;case"poll":t=(0,m.getIcon28PollSquareOutline)().icon;break;case"narrative":t=(0,f.getIcon28NarrativeOutline)().icon;break;case"audio_playlist":t=(0,S.getIcon28PlaylistOutline)().icon;break;case"market":t=(0,v.getIcon28MarketOutline)().icon;break;case"geo":t=(0,E.getIcon28PlaceOutline)().icon;break;case"doc":t=(0,T.getIcon28DocumentOutline)().icon;break;case"article":t=(0,w.getIcon28ArticleOutline)().icon;break;default:t=(0,C.getIcon28AttachOutline)().icon}return t}prepareData(){return new Promise(((e,t)=>{const{replyOwnerPhoto:r,replyMediaType:o,replyMediaPreviewUrl:i,postOwnerPhoto:n,postMediaType:s,postMediaPreviewUrl:a}=this.props,l={replyOwnerPhoto:r,postOwnerPhoto:n,replyIcon:this.getIconUrl((0,y.getIcon12Repost)().icon.replace("currentColor","#99A2AD"))};if(i)l.replySticker=i;else if(o){const e=I.getReplyMediaIcon(o);e&&(l.replyMediaIcon=this.getIconUrl(e.replace("currentColor","#3F8AE0")))}if(a)l.postPreview=a;else if(s){const e=I.getPostMediaIcon(s);e&&(l.postMediaIcon=this.getIconUrl(e.replace("currentColor","#99A2AD")))}this.loadImages(l).then((()=>e(1))).catch((e=>t(e)))}))}render(){return new Promise(((e,t)=>{this.prepareData().then((()=>{this.draw(),e(1)})).catch((e=>{t(e)}))}))}draw(){const e=new i.RectItem({x:0,y:0,radius:72,background:"#fff"});this.add(e);const t=this.renderReplyHeader(x,x),r=this.renderReplyMessage(x,t.bottom+46),o=r?r.bottom:t.bottom,{bottom:n}=this.renderPost(x,o+52);this.setHeight(n+x),e.setWidth(this.getWidth()),e.setHeight(this.getHeight()),this.drawScene()}renderReplyHeader(e,t){const r=new n.ImageItem({x:e,y:t,image:this.getImage("replyOwnerPhoto"),width:160,height:160,radius:80,borderSize:4,borderColor:"rgba(0, 0, 0, 0.08)"}),o=r.getBoundingClientRect(),i=o.right+52,a=new s.TextItem({x:i,y:o.top+20,text:this.props.replyOwnerName,fontSize:60,lineHeight:80,fontFamily:b,fontWeight:"500",maxWidth:this.getInnerWidth()-o.width-52,maxLines:1,color:"#000"}),l=new n.ImageItem({x:i,y:a.getBoundingClientRect().bottom,image:this.getImage("replyIcon"),width:44,height:44,radius:0}),c=new s.TextItem({x:l.getBoundingClientRect().right+20,y:l.getBoundingClientRect().top,text:this.props.replySubtitle,fontSize:48,lineHeight:56,fontFamily:b,fontWeight:"400",maxWidth:880,maxLines:1,color:"#818C99"});return this.add(r),this.add(a),this.add(l),this.add(c),o}renderReplyMessage(e,t){let r={bottom:t};if(this.props.replyMediaPreviewUrl){const o=new n.ImageItem({x:e,y:t,image:this.getImage("replySticker"),width:288,height:288});r=o.getBoundingClientRect(),this.add(o)}else if(this.props.replyText){const o=new s.TextItem({x:e,y:t,text:this.props.replyText,fontSize:68,lineHeight:88,fontFamily:"SF Pro Text, sans-serif",fontWeight:"400",color:"#2C2D2E",maxWidth:1152,maxLines:3});r=o.getBoundingClientRect(),this.add(o)}if(this.props.replyMediaType&&"sticker"!==this.props.replyMediaType){const o=r?r.bottom+4:t;r=this.renderReplyAttach(e,o)}return r}renderReplyAttach(e,t){const r=new n.ImageItem({x:e,y:t,image:this.getImage("replyMediaIcon"),width:76,height:76});return this.add(r),this.add(new s.TextItem({x:r.getBoundingClientRect().right+32,y:r.getBoundingClientRect().top+12,text:this.props.replyMediaName,fontSize:56,lineHeight:72,fontFamily:"SF Pro Text, sans-serif",color:"#3F8AE0"})),r.getBoundingClientRect()}renderPost(e,t){const{postMediaType:r}=this.props,o=48,a=192,l=this.getInnerWidth()-96,c=l-a-32,d=new n.ImageItem({x:e+o,y:t+o,image:this.getImage("postOwnerPhoto"),width:96,height:96,radius:48,borderSize:2,borderColor:"rgba(0, 0, 0, 0.08)"}),h=l-d.getBoundingClientRect().width-32,u=h-a-32,p=new s.TextItem({x:d.getBoundingClientRect().right+32,y:d.getBoundingClientRect().top+20,text:this.props.postOwnerName,fontSize:56,lineHeight:72,fontFamily:b,fontWeight:"400",maxWidth:r?u:h,maxLines:1,color:"#000"});let g,_;this.props.postText&&(g=new s.TextItem({x:e+o,y:d.getBoundingClientRect().bottom+34,text:this.props.postText,fontSize:52,lineHeight:64,fontFamily:b,fontWeight:"400",color:"#000",maxWidth:r?c:l,maxLines:2})),_=g?g.getBoundingClientRect().bottom+20:d.getBoundingClientRect().bottom+48;const m=new s.TextItem({x:e+o,y:_,text:this.props.postDate,fontSize:48,lineHeight:56,fontFamily:b,fontWeight:"400",color:"#818C99"}),f=new i.RectItem({x,y:t,width:this.getInnerWidth(),height:m.getBoundingClientRect().bottom-t+36,radius:64,background:"#fff",borderSize:4,borderColor:"#E1E3E6"});if(this.add(f),this.add(d),this.add(p),this.add(m),g&&this.add(g),r){const s=e+o+c+32;if("photo"===r&&this.props.postMediaPreviewUrl)this.add(new n.ImageItem({x:s,y:t+o,image:this.getImage("postPreview"),width:a,height:a,radius:32,borderSize:4,borderColor:"rgba(0, 0, 0, 0.08)"}));else{const e=new i.RectItem({x:s,y:t+o,width:a,height:a,radius:32,background:"#F5F5F5",borderSize:4,borderColor:"rgba(0, 0, 0, 0.08)"});this.add(e);const r=e.getBoundingClientRect(),l=96;this.add(new n.ImageItem({x:r.left+(e.getWidth()/2-l/2),y:r.top+(e.getHeight()/2-l/2),image:this.getImage("postMediaIcon"),width:l,height:l,radius:0}))}}return f.getBoundingClientRect()}getInnerWidth(){return this.getWidth()-160}constructor(e){super(),this.props=e,this.setWidth(1400)}}},324279:(e,t,r)=>{r.d(t,{MusicSticker:()=>d});var o=r(102670),i=r(660354),n=r(885486),s=r(977601),a=r(971779),l=r(857295),c=r(651094);class d extends o.Sticker{get coverSize(){return this.data.isCoverImagePlaceholder?d.PLACEHOLDER_COVER_SIZE:d.COVER_SIZE}render(){return new Promise(((e,t)=>{const r=(0,l.getIcon24Explicit)().icon.replace(/currentColor/,"rgba(255, 255, 255, 0.6)"),o=(0,s.getIcon56SongOutline)().icon.replace(/currentColor/,"rgba(0, 0, 0, 0.24)"),i={};this.data.isExplicit&&(i.explicit="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(r)),this.data.isCoverImagePlaceholder?i.placeholder="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(o):(i.cover=this.data.audioImageUrl,i.label=this.data.labelUrl),this.loadImages(i).then((()=>{this.doRender(),e(1)})).catch(t)}))}doRender(){let e;this.data.isCoverImagePlaceholder?this.doRenderPlaceholderCover():this.doRenderCover();const t=this.doRenderTitle(),r=this.doRenderArtist(t.getBoundingClientRect().bottom);e=r,this.data.isCoverImagePlaceholder||(e=this.doRenderLabel(r.getBoundingClientRect().bottom));const o=e.getBoundingClientRect().bottom+d.STICKER_VPADDING;this.setWidth(d.STICKER_WIDTH),this.setHeight(o),this.drawScene()}doRenderPlaceholderCover(){const e=new a.RectItem({x:(d.STICKER_WIDTH-this.coverSize)/2,y:d.STICKER_VPADDING,width:this.coverSize,height:this.coverSize,radius:48,background:"rgba(255, 255, 255, 1)",shadowBlur:48,shadowColor:"rgba(0, 0, 0, 0.16)"});this.add(e);const t=132,r=new n.ImageItem({x:(d.STICKER_WIDTH-t)/2,y:d.STICKER_VPADDING+(this.coverSize-t)/2,width:t,height:t,image:this.getImage("placeholder")});this.add(r);const o=e.getBoundingClientRect().bottom+d.STICKER_VPADDING;this.setClickableHeight(o)}doRenderCover(){const e=new n.ImageItem({x:(d.STICKER_WIDTH-this.coverSize)/2,y:d.STICKER_VPADDING,image:this.getImage("cover"),width:this.coverSize,height:this.coverSize,radius:48,shadowBlur:48,shadowColor:"rgba(0, 0, 0, 0.16)"});this.add(e);const t=e.getBoundingClientRect().bottom+d.STICKER_VPADDING;this.setClickableHeight(t)}doRenderTitle(){const e=this.data.isExplicit?84:0,t=new i.TextItem({x:0,y:d.STICKER_VPADDING+this.coverSize+60,text:this.data.audioTitle,fontSize:60,lineHeight:72,fontWeight:"500",maxWidth:d.STICKER_WIDTH,maxLines:3,align:i.Align.CENTER,color:"#fff",shadowBlur:12,shadowColor:"rgba(0, 0, 0, 0.08)",afterPadding:e});if(this.add(t),this.data.isExplicit){const e=t.getLinesWidth(),r=e[e.length-1],o=r+(d.STICKER_WIDTH-r)/2-72,i=c.browser.safari?0:4,s=t.getBoundingClientRect().bottom-72-i,a=new n.ImageItem({x:o,y:s,image:this.getImage("explicit"),width:72,height:72});this.add(a)}return t}doRenderArtist(e){const t=new i.TextItem({x:0,y:e+24,text:this.data.audioArtist,fontSize:48,lineHeight:60,fontWeight:"400",maxWidth:d.STICKER_WIDTH,maxLines:2,align:i.Align.CENTER,color:"rgba(255, 255, 255, 0.6)",shadowBlur:12,shadowColor:"rgba(0, 0, 0, 0.08)"});return this.add(t),t}doRenderLabel(e){const t=new n.ImageItem({x:(d.STICKER_WIDTH-354)/2,y:e+240,image:this.getImage("label"),width:354,height:108,cropType:n.ImageItemCropType.FULL});return this.add(t),t}getClickableHeight(){return this.clickableHeight}setClickableHeight(e){this.clickableHeight=e}constructor(e){super(),this.clickableHeight=0,this.data=e}}d.STICKER_WIDTH=936,d.STICKER_VPADDING=48,d.PLACEHOLDER_COVER_SIZE=396,d.COVER_SIZE=696},350944:(e,t,r)=>{r.d(t,{PlaylistSticker:()=>d});var o=r(102670),i=r(660354),n=r(885486),s=r(922952),a=r(971779),l=r(857295),c=r(651094);class d extends o.Sticker{get coverSize(){return this.data.isCoverImagePlaceholder?d.PLACEHOLDER_COVER_SIZE:d.COVER_SIZE}render(){return new Promise(((e,t)=>{const r=(0,l.getIcon24Explicit)().icon.replace(/currentColor/,"rgba(255, 255, 255, 0.6)"),o=(0,s.getIcon56PlaylistOutline)().icon.replace(/currentColor/,"rgba(0, 0, 0, 0.24)"),i={};this.data.isExplicit&&(i.explicit="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(r)),this.data.isCoverImagePlaceholder?i.placeholder="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(o):(i.cover=this.data.playlistImageUrl,i.label=this.data.labelUrl),this.loadImages(i).then((()=>{this.doRender(),e(1)})).catch(t)}))}doRender(){let e;this.data.isCoverImagePlaceholder?this.doRenderPlaceholderCover():this.doRenderCover();const t=this.doRenderTitle(),r=this.doRenderArtist(t.getBoundingClientRect().bottom);e=r,this.data.isCoverImagePlaceholder||(e=this.doRenderLabel(r.getBoundingClientRect().bottom));const o=e.getBoundingClientRect().bottom+d.STICKER_VPADDING;this.setWidth(d.STICKER_WIDTH),this.setHeight(o),this.drawScene()}doRenderPlaceholderCover(){const e=new a.RectItem({x:(d.STICKER_WIDTH-this.coverSize)/2,y:d.STICKER_VPADDING,width:this.coverSize,height:this.coverSize,radius:48,shadowBlur:48,shadowColor:"rgba(0, 0, 0, 0.16)",background:"rgba(255, 255, 255, 1)"});this.add(e);const t=132,r=new n.ImageItem({x:(d.STICKER_WIDTH-t)/2,y:d.STICKER_VPADDING+(this.coverSize-t)/2,width:t,height:t,image:this.getImage("placeholder")});this.add(r);const o=e.getBoundingClientRect().bottom+d.STICKER_VPADDING;this.setClickableHeight(o)}doRenderCover(){const e=new n.ImageItem({x:(d.STICKER_WIDTH-this.coverSize)/2,y:d.STICKER_VPADDING,image:this.getImage("cover"),width:this.coverSize,height:this.coverSize,radius:48,shadowBlur:48,shadowColor:"rgba(0, 0, 0, 0.16)"});this.add(e);const t=e.getBoundingClientRect().bottom+d.STICKER_VPADDING;this.setClickableHeight(t)}doRenderTitle(){const e=this.data.isExplicit?84:0,t=new i.TextItem({x:0,y:d.STICKER_VPADDING+this.coverSize+60,text:this.data.playlistTitle,fontSize:60,lineHeight:72,fontWeight:"500",maxWidth:d.STICKER_WIDTH,maxLines:3,align:i.Align.CENTER,color:"#fff",shadowBlur:12,shadowColor:"rgba(0, 0, 0, 0.08)",afterPadding:e});if(this.add(t),this.data.isExplicit){const e=t.getLinesWidth(),r=e[e.length-1],o=r+(d.STICKER_WIDTH-r)/2-72,i=c.browser.safari?0:4,s=t.getBoundingClientRect().bottom-72-i,a=new n.ImageItem({x:o,y:s,image:this.getImage("explicit"),width:72,height:72});this.add(a)}return t}doRenderArtist(e){const t=new i.TextItem({x:0,y:e+24,text:this.data.playlistAuthorName,fontSize:48,lineHeight:60,fontWeight:"400",maxWidth:d.STICKER_WIDTH,maxLines:2,align:i.Align.CENTER,color:"rgba(255, 255, 255, 0.6)",shadowBlur:12,shadowColor:"rgba(0, 0, 0, 0.08)"});return this.add(t),t}doRenderLabel(e){const t=new n.ImageItem({x:(d.STICKER_WIDTH-354)/2,y:e+240,image:this.getImage("label"),width:354,height:108,cropType:n.ImageItemCropType.FULL});return this.add(t),t}getClickableHeight(){return this.clickableHeight}setClickableHeight(e){this.clickableHeight=e}constructor(e){super(),this.clickableHeight=0,this.data=e}}d.STICKER_WIDTH=936,d.STICKER_VPADDING=48,d.PLACEHOLDER_COVER_SIZE=396,d.COVER_SIZE=696},885486:(e,t,r)=>{r.d(t,{ImageItem:()=>n,ImageItemCropType:()=>o});var o,i=r(746085);!function(e){e.FULL="FULL",e.CENTER="CENTER"}(o||(o={}));class n extends i.Shape{draw(e){const{x:t=0,y:r=0,image:i,width:n=0,height:s=0,radius:a=0,borderSize:l=0,borderColor:c="transparent",shadowBlur:d=0,shadowColor:h="",cropType:u=o.CENTER}=this.props;let p,g,_,m;switch(u){case o.FULL:p=0,g=0,_=i.width,m=i.height;break;case o.CENTER:{const e=Math.min(i.width,i.height);p=(i.width-e)/2,g=(i.height-e)/2,_=e,m=e;break}}e.save(),e.lineWidth=l,e.strokeStyle=c,d&&h&&(e.shadowBlur=d,e.shadowColor=h,e.shadowOffsetX=1e4+t,e.shadowOffsetY=1e4+r,e.fillRect(-1e4,-1e4,n,n)),e.beginPath(),e.arc(t+a,r+a,a,Math.PI,Math.PI+Math.PI/2),e.lineTo(t+n-a,r),e.arc(t+n-a,r+a,a,Math.PI+Math.PI/2,2*Math.PI),e.lineTo(t+n,r+s-a),e.arc(t+n-a,r+s-a,a,2*Math.PI,Math.PI/2),e.lineTo(t+a,r+s),e.arc(t+a,r+s-a,a,Math.PI/2,Math.PI),e.closePath(),e.clip(),e.drawImage(i,p,g,_,m,t,r,n,s),e.stroke(),e.restore()}getWidth(){return this.props.width}setWidth(e){this.props.width=e}getHeight(){return this.props.height}setWeight(e){this.props.height=e}}},971779:(e,t,r)=>{r.d(t,{RectItem:()=>i});var o=r(746085);class i extends o.Shape{draw(e){const{x:t=0,y:r=0,width:o=0,height:i=0,background:n="transparent",borderSize:s=0,borderColor:a="transparent",shadowBlur:l=0,shadowColor:c=""}=this.props;let{radius:d=0}=this.props;o<2*d&&(d=o/2),i<2*d&&(d=i/2),e.save(),l&&c&&(e.shadowBlur=l,e.shadowColor=c),e.beginPath(),e.fillStyle=n,e.lineWidth=s,e.strokeStyle=a,e.moveTo(t+d,r),e.arcTo(t+o,r,t+o,r+i,d),e.arcTo(t+o,r+i,t,r+i,d),e.arcTo(t,r+i,t,r,d),e.arcTo(t,r,t+o,r,d),e.closePath(),e.stroke(),e.fill(),e.restore()}getWidth(){const{width:e=0}=this.props;return e}setWidth(e){this.props.width=e}getHeight(){const{height:e=0}=this.props;return e}setHeight(e){this.props.height=e}}},746085:(e,t,r)=>{r.d(t,{Shape:()=>o});class o{getBoundingClientRect(){const{x:e=0,y:t=0}=this.props;return{width:this.getWidth(),height:this.getHeight(),top:t,left:e,right:e+this.getWidth(),bottom:t+this.getHeight()}}setX(e){this.props.x=e}setY(e){this.props.y=e}constructor(e){this.props=e}}},660354:(e,t,r)=>{r.d(t,{Align:()=>o,TextItem:()=>s});var o,i=r(746085),n=r(8520);!function(e){e.LEFT="LEFT",e.CENTER="CENTER"}(o||(o={}));class s extends i.Shape{draw(e){const{x:t=0,y:r=0,color:i="#000",lineHeight:n,fillColor:a,fillRadius:l=0,align:c=o.LEFT,maxWidth:d=0,shadowBlur:h,shadowColor:u,maxLines:p,afterPadding:g=0}=this.props;if(e.save(),this.setFont(e),e.fillStyle=i,e.textBaseline="top",e.textAlign="left",h&&u&&(e.shadowBlur=h,e.shadowColor=u),a){const i=this.getPadding();let h=r;this.splitText.forEach(((r,u)=>{let{width:_}=e.measureText(r);p&&u===this.splitText.length-1&&(_+=g);let m=t;c===o.CENTER&&(m=t+(d-_)/2,m-=i.left);let f=0;f=0===u?i.top:i.top/2;let S=0;S=u===this.splitText.length-1?i.bottom:i.bottom/2;let v={tl:0,tr:0,bl:0,br:0};if(0===u){v.tl=l,v.tr=l;const t=this.splitText[u+1],{width:r}=e.measureText(this.splitText[u]),{width:o}=e.measureText(t);void 0===t?(v.bl=l,v.br=l):r>o&&(v.bl=0,v.br=l)}else if(u===this.splitText.length-1){v.bl=l,v.br=l;const{width:t}=e.measureText(this.splitText[u]),{width:r}=e.measureText(this.splitText[u-1]);t>r&&(v.tl=0,v.tr=l)}else{const{width:t}=e.measureText(this.splitText[u]),{width:r}=e.measureText(this.splitText[u-1]),{width:o}=e.measureText(this.splitText[u+1]);t>r&&(v.tl=0,v.tr=l),t>o&&(v.bl=0,v.br=l)}const E=n+f+S;s.drawFill(e,m,h,_+i.left+i.right,E,a,v),e.fillText(r,m+i.left,h+f),h+=E}))}else this.splitText.forEach(((i,s)=>{let{width:a}=e.measureText(i);p&&s===this.splitText.length-1&&(a+=g);let l=t;c===o.CENTER&&(l=t+(d-a)/2),e.fillText(i,l,r+n*s)}));e.restore()}static drawFill(e,t,r,o,i,n,s){e.save(),e.beginPath(),e.fillStyle=n,e.lineWidth=0,e.strokeStyle="transparent",e.moveTo(t+s.tl,r),e.lineTo(t+o-s.tr,r),e.quadraticCurveTo(t+o,r,t+o,r+s.tr),e.lineTo(t+o,r+i-s.br),e.quadraticCurveTo(t+o,r+i,t+o-s.br,r+i),e.lineTo(t+s.bl,r+i),e.quadraticCurveTo(t,r+i,t,r+i-s.bl),e.lineTo(t,r+s.tl),e.quadraticCurveTo(t,r,t+s.tl,r),e.closePath(),e.stroke(),e.fill(),e.restore()}setFont(e){const{fontSize:t,lineHeight:r,fontFamily:o="sans-serif",fontWeight:i="normal"}=this.props;e.font=`${i} ${t}px/${r}px ${o}`}splitLongWords(e){const{context:t}=this,{maxWidth:r=0}=this.props,o=[];return t&&r?(this.setFont(t),e.forEach((e=>{if("\n"===e)return void o.push(e);const{width:i}=t.measureText(e);if(i<=r)return void o.push(e);const n=Array.from(e).reduce(((e,o)=>{const{width:i}=t.measureText(e.current+o);return i>r?{current:o,items:[...e.items,e.current]}:{current:e.current+o,items:[...e.items]}}),{current:"",items:[]});o.push(...n.items,n.current)})),o):e}splitTextIntoLines(){const{context:e}=this;let{text:t,maxWidth:r=0,maxLines:o=0,afterPadding:i=0}=this.props;const s=String((0,n.decodeHTMLEntities)(t)).replace(/(?:<br\s*\/?>)+/gim,"\n");if(!e)return s.split(/\n/);if(r<=0)return s.split(/\n/);this.setFont(e);const a=this.splitLongWords(s.replaceAll("\n"," \n ").split(" "));let l=0,c=[];for(;a.length;)if(o&&c.length>=o-1){const t=a.splice(0).join(" "),{width:o}=e.measureText(t);if(o+i<=r)c.push(t);else{const o="...",{width:n}=e.measureText(o);let s=!1;const a=Array.from(t).reduce(((t,o)=>{const{width:a}=e.measureText(t+o);return!s&&a+n+i<=r?t+o:(s=!0,t)}),"");c.push(a.trim()+o)}}else{const t=l+1,o="\n"===a[l],n=a.slice(0,t).join(" ");let{width:s}=e.measureText(n);if(t>=a.length&&(s+=i),s>r||t>a.length||o){const e=a.splice(0,o?t:t-1);c.push(e.join(" ")),l=0}else l++}return c}getWidth(){const e=this.getLinesWidth();return 0===e.length?0:Math.max(...e)}getLinesWidth(){const{context:e}=this,{maxLines:t,afterPadding:r=0}=this.props;if(!e)return[];this.setFont(e);const o=this.getPadding();let i=[];for(let n=0;n<this.splitText.length;n++){let{width:s}=e.measureText(this.splitText[n]);t&&n===this.splitText.length-1&&(s+=r),s+=o.left+o.right,i.push(Math.round(s))}return i}getHeight(){const e=this.getPadding(),{fillColor:t,lineHeight:r}=this.props;if(t){const t=this.splitText.length*r,o=(this.splitText.length-1)*(e.top+e.bottom)/2;return e.top+t+o+e.bottom}return this.splitText.length*(r+e.top+e.bottom)}getPadding(){const{padding:e=0}=this.props;return"number"==typeof e?{top:e,bottom:e,left:e,right:e}:e}constructor(e){super(e),this.context=document.createElement("canvas").getContext("2d"),this.splitText=this.splitTextIntoLines()}}},102670:(e,t,r)=>{r.d(t,{Sticker:()=>i});var o=r(579605);class i{drawScene(){const e=this.ctx;e&&(this.canvas.width=this.getWidth(),this.canvas.height=this.getHeight(),e.clearRect(0,0,this.canvas.width,this.canvas.height),this.layers.forEach((t=>{t.draw(e)})))}add(e){this.layers.push(e)}getCanvas(){return this.canvas}toBlob(){return new Promise(((e,t)=>{this.canvas.toBlob((r=>{r?e(r):t()}),"image/png",1)}))}getWidth(){return this.width}getHeight(){return this.height}setWidth(e){this.width=e}setHeight(e){this.height=e}loadImages(e){return new Promise(((t,r)=>{const i=[];for(const[t,r]of Object.entries(e))t&&r&&i.push((0,o.loadImage)(r,t));Promise.all(i).then((e=>{this.images=e,t(1)})).catch((e=>{r(e)}))}))}getIconUrl(e){return URL.createObjectURL(new Blob([e],{type:"image/svg+xml"}))}getImage(e){return this.images.find((t=>t.dataset.name===e))}constructor(){this.layers=[],this.images=[],this.width=0,this.height=0,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}}},366765:(e,t,r)=>{r.d(t,{nativeStickerTypeGuard:()=>i,situationalTemplateTypeGuard:()=>n,stickerContainerTypeGuard:()=>o});const o=e=>e.some((e=>"native"===e.sticker_type||"renderable"===e.sticker_type)),i=e=>"native"===e?.sticker_type&&"situational_template"===e?.sticker?.action_type,n=e=>"situational_template"===e?.action_type},501644:(e,t,r)=>{r.d(t,{VmojiSticker:()=>a});var o=r(102670),i=r(660354),n=r(733595),s=r(885486);class a extends o.Sticker{async prepareData(){const{stickerImageUrl:e}=this.props;return await this.loadImages({stickerImageUrl:e}),1}async render(){return await this.prepareData(),this.draw(),1}draw(){const e=this.drawImage(),t=e.getBoundingClientRect(),r=this.drawText(t.bottom-this.TEXT_MARGIN_TOP,t.right),o=r.getBoundingClientRect();this.add(e),this.add(r),this.setWidth(t.right),this.setHeight(Math.max(o.bottom,t.bottom)),this.drawScene()}drawImage(){return new s.ImageItem({image:this.getImage("stickerImageUrl"),width:this.IMAGE_SIZE,height:this.IMAGE_SIZE})}drawText(e,t){return new i.TextItem({y:e,text:this.props.text,fontSize:n.VmojiStickerStyles.text.fontSize,lineHeight:n.VmojiStickerStyles.text.lineHeight,align:i.Align.CENTER,padding:{top:n.VmojiStickerStyles.text.paddingTop,bottom:n.VmojiStickerStyles.text.paddingBottom,left:n.VmojiStickerStyles.text.paddingLeft,right:n.VmojiStickerStyles.text.paddingRight},maxWidth:t,fontFamily:n.VmojiStickerStyles.text.fontFamily,fontWeight:n.VmojiStickerStyles.text.fontWeight,color:n.VmojiStickerStyles.text.color,fillColor:n.VmojiStickerStyles.text.fillColor,fillRadius:n.VmojiStickerStyles.text.fillRadius})}constructor(e){super(),this.IMAGE_SIZE=512,this.TEXT_MARGIN_TOP=40,this.props=e}}},733595:(e,t,r)=>{r.d(t,{VmojiStickerStyles:()=>o});const o={text:{fontSize:38,lineHeight:38,fontFamily:"VK Sans Display, SF Pro Text, sans-serif",fontWeight:"600",color:"#000",fillColor:"#fff",fillRadius:48,paddingTop:25,paddingBottom:25,paddingLeft:40,paddingRight:40}}},169697:(e,t,r)=>{function o(){return{icon:'<svg fill="none" height="12" viewBox="0 0 12 12" width="12" xmlns="http://www.w3.org/2000/svg"><path d="m7.58.92.06-.1A.6.6 0 0 1 8.4.7l.08.06 2.78 2.32.04.05a.6.6 0 0 1 0 .76l-.07.08-2.75 2.29a.6.6 0 0 1-.97-.37l-.01-.1V4.5H4a1 1 0 0 0-1 .88V8a1 1 0 0 0 .88 1H8a1 1 0 0 1 .12 2H4a3 3 0 0 1-3-2.82V5.5a3 3 0 0 1 2.82-3H7.5V1.2c0-.1.03-.2.08-.3l.06-.08z" fill="currentColor"/></svg>',name:"repost_12"}}r.d(t,{getIcon12Repost:()=>o})},577027:(e,t,r)=>{function o(){return{icon:'<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M17.5 5.25a.75.75 0 0 0-.74-.75H3.24a.75.75 0 0 0-.74.75c0 .41.34.75.74.75h13.52c.4 0 .74-.33.74-.75Zm0 5a.75.75 0 0 0-.74-.75H3.24a.75.75 0 0 0-.74.75c0 .41.34.75.74.75h13.52c.4 0 .74-.33.74-.75Zm-15 5c0 .41.34.75.76.75h8.98c.42 0 .76-.33.76-.75a.75.75 0 0 0-.76-.75H3.26a.75.75 0 0 0-.76.75Z" id="article_outline_20__path-1"/></defs><g id="article_outline_20__Page-2" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="article_outline_20__article_outline_20"><path id="article_outline_20__Shape" d="M0 0h20v20H0z"/><mask id="article_outline_20__mask-2" fill="#fff"><use xlink:href="#article_outline_20__path-1"/></mask><use id="article_outline_20__Icon-Color" fill="currentColor" fill-rule="nonzero" xlink:href="#article_outline_20__path-1"/></g></g></svg>',name:"article_outline_20"}}r.d(t,{getIcon20ArticleOutline:()=>o})},952742:(e,t,r)=>{function o(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M14.95 3.8a2.72 2.72 0 0 0-3.86 0L5.56 9.35a4.5 4.5 0 0 0 0 6.34 4.46 4.46 0 0 0 6.32 0l2.88-2.86a.75.75 0 0 1 1.06 1.06l-2.88 2.86a5.96 5.96 0 0 1-8.44 0 6 6 0 0 1 0-8.46l5.53-5.55a4.22 4.22 0 0 1 5.98 0 4.24 4.24 0 0 1 0 6l-5.53 5.54a2.49 2.49 0 1 1-3.52-3.52l3.1-3.09a.75.75 0 0 1 1.06 1.07l-3.1 3.08a1 1 0 0 0 0 1.4.99.99 0 0 0 1.4 0l5.53-5.55a2.74 2.74 0 0 0 0-3.87z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"attach_20"}}r.d(t,{getIcon20Attach:()=>o})},453672:(e,t,r)=>{function o(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M5.5 5.5c.57 0 1-.2 1.34-.52.24-.24.43-.54.55-.74l.06-.1c.15-.23.26-.37.39-.47.11-.08.3-.17.66-.17h3c.36 0 .55.09.66.17.13.1.24.24.4.48l.05.09c.12.2.3.5.55.74.33.32.77.52 1.34.52.73 0 .99 0 1.19.04.9.18 1.59.88 1.77 1.77.04.2.04.46.04 1.19v3.45c0 .85 0 1.45-.04 1.9-.04.46-.1.72-.2.92-.22.42-.57.77-.99.98-.2.1-.46.17-.91.21-.46.04-1.06.04-1.91.04h-6.9c-.85 0-1.45 0-1.91-.04a2.4 2.4 0 0 1-.91-.2 2.25 2.25 0 0 1-.99-.99 2.4 2.4 0 0 1-.2-.91c-.04-.46-.04-1.06-.04-1.91V8.5c0-.73 0-.99.04-1.19.18-.9.88-1.59 1.77-1.77.2-.04.46-.04 1.19-.04zm3-3.5c-.64 0-1.14.16-1.54.46-.39.27-.62.63-.78.9l-.08.11c-.13.22-.2.34-.3.43-.06.05-.12.1-.3.1h-.09c-.61 0-1.03 0-1.4.07a3.75 3.75 0 0 0-2.94 2.95C1 7.38 1 7.8 1 8.42v3.56c0 .81 0 1.47.04 2 .05.55.14 1.03.37 1.47.36.7.93 1.28 1.64 1.64.44.23.92.32 1.47.37.53.04 1.18.04 2 .04H13.48c.81 0 1.47 0 2-.04a3.84 3.84 0 0 0 1.47-.37c.7-.36 1.28-.93 1.64-1.64.23-.44.32-.92.37-1.47.04-.53.04-1.19.04-2V8.41c0-.61 0-1.03-.07-1.4a3.75 3.75 0 0 0-2.95-2.94 7.5 7.5 0 0 0-1.4-.07h-.08c-.18 0-.24-.05-.3-.1-.1-.1-.17-.2-.3-.43l-.08-.12c-.16-.26-.4-.62-.78-.9-.4-.29-.9-.45-1.54-.45zm3.75 8.25a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0zm1.5 0a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"camera_outline_20"}}r.d(t,{getIcon20CameraOutline:()=>o})},879570:(e,t,r)=>{function o(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10.18 1.5H9c-.8 0-1.47 0-2.01.05-.63.05-1.17.16-1.67.41a4.25 4.25 0 0 0-1.86 1.86c-.25.5-.36 1.04-.41 1.67C3 6.1 3 6.86 3 7.82v4.36c0 .95 0 1.71.05 2.33.05.63.16 1.17.41 1.67a4.25 4.25 0 0 0 1.86 1.86c.5.25 1.04.36 1.67.4.61.06 1.37.06 2.33.06h1.36c.96 0 1.72 0 2.33-.05a4.39 4.39 0 0 0 1.67-.41 4.25 4.25 0 0 0 1.86-1.86c.25-.5.36-1.04.41-1.67.05-.62.05-1.38.05-2.33V8.32c0-.48 0-.73-.06-.96-.05-.2-.13-.4-.24-.58-.12-.2-.3-.37-.64-.72l-3.62-3.62a4.27 4.27 0 0 0-.72-.65 2 2 0 0 0-.58-.24c-.23-.05-.48-.05-.96-.05Zm5.32 10.65c0 1 0 1.7-.04 2.24a2.9 2.9 0 0 1-.26 1.1A2.75 2.75 0 0 1 14 16.7c-.25.13-.57.21-1.11.26-.55.04-1.25.04-2.24.04h-1.3c-1 0-1.7 0-2.24-.04a2.9 2.9 0 0 1-1.1-.26 2.75 2.75 0 0 1-1.21-1.2 2.94 2.94 0 0 1-.26-1.11c-.04-.55-.04-1.25-.04-2.24v-4.3c0-1 0-1.7.04-2.24.05-.53.13-.86.26-1.1A2.75 2.75 0 0 1 6 3.3c.25-.13.57-.21 1.11-.26C7.66 3 8.36 3 9.35 3H10v2.35c0 .4 0 .76.02 1.05.03.3.09.61.24.9.21.4.54.73.94.94.29.15.6.21.9.24.29.02.64.02 1.05.02h2.35v3.65ZM14.88 7 11.5 3.62v1.7c0 .45 0 .74.02.95.02.22.05.3.07.33a.75.75 0 0 0 .3.31c.05.02.12.05.33.07.22.02.51.02.96.02h1.7Z" clip-rule="evenodd"/></svg>',name:"document_outline_20"}}r.d(t,{getIcon20DocumentOutline:()=>o})},43604:(e,t,r)=>{function o(){return{icon:'<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g id="music_outline_20__Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="music_outline_20__Icons-20/music_outline_20"><g id="music_outline_20__music_outline_20"><path d="M0 0h20v20H0z"/><path d="M14.73 2.05a2.28 2.28 0 0 1 2.75 2.23v7.99c0 3.57-3.5 5.4-5.39 3.51-1.9-1.9-.06-5.38 3.52-5.38h.37V6.76L8 8.43v5.82c0 3.5-3.35 5.34-5.27 3.62l-.11-.1c-1.9-1.9-.06-5.4 3.51-5.4h.37V6.24c0-.64.05-1 .19-1.36l.05-.13c.17-.38.43-.7.76-.93.36-.26.7-.4 1.41-.54ZM6.5 13.88h-.37c-2.32 0-3.34 1.94-2.45 2.82.88.89 2.82-.13 2.82-2.45v-.37Zm9.48-1.98h-.37c-2.32 0-3.34 1.94-2.46 2.82.89.89 2.83-.13 2.83-2.45v-.37Zm-.02-7.78a.78.78 0 0 0-.92-.6L9.06 4.77c-.4.09-.54.15-.68.25a.8.8 0 0 0-.27.33c-.08.18-.1.35-.1.88v.67l7.97-1.67V4.2Z" id="music_outline_20__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></g></svg>',name:"music_outline_20"}}r.d(t,{getIcon20MusicOutline:()=>o})},630203:(e,t,r)=>{function o(){return{icon:'<svg height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h20v20H0z"/><path d="M10.53 1.5c.69.17 1.29.51 1.77 1.03.53.56.82 1.16 1.16 2.44l.3 1.14a.75.75 0 1 1-1.44.38l-.3-1.13c-.3-1.07-.48-1.45-.81-1.8-.28-.3-.62-.5-1.02-.6-.44-.1-.84-.08-1.75.16l-.22.05-2.23.6c-.88.24-1.3.42-1.6.63l-.07.06-.14.12c-.3.28-.49.62-.58 1.01-.1.41-.09.78.1 1.55l.1.42 1.9 7.06.11.42c.23.76.4 1.09.7 1.4.27.29.61.48 1 .58.48.1.9.08 1.98-.2l.56-.16a.75.75 0 0 1 .4 1.45l-.57.15c-1.3.34-1.96.4-2.7.22a3.48 3.48 0 0 1-1.77-1.02 4.76 4.76 0 0 1-1.1-2.2L4.25 15l-1.9-7.06c-.34-1.29-.39-1.95-.21-2.7.14-.6.43-1.15.86-1.61l.17-.17.18-.15a5.1 5.1 0 0 1 2-.93l.25-.07 2.23-.6c1.3-.34 1.96-.39 2.7-.21zm5.6 6.75a3.2 3.2 0 0 1 3.12 3.28c0 1.75-.66 2.64-3.32 4.84l-1.15.96c-.45.37-1.1.37-1.56 0l-1.41-1.17c-2.44-2.05-3.06-2.93-3.06-4.63a3.2 3.2 0 0 1 5.12-2.65l.13.1.13-.1a3.44 3.44 0 0 1 1.78-.62zm0 1.5c-.59 0-1.1.24-1.58.75l-.19.2a.5.5 0 0 1-.72 0l-.19-.2c-.47-.51-.99-.75-1.58-.75-.88 0-1.62.78-1.62 1.78 0 1.16.44 1.75 2.77 3.69l.98.8.98-.8c2.25-1.87 2.74-2.49 2.77-3.58v-.11c0-1-.74-1.78-1.62-1.78z" fill="currentColor" fill-rule="nonzero"/></g></svg>',name:"narrative_outline_20"}}r.d(t,{getIcon20NarrativeOutline:()=>o})},936716:(e,t,r)=>{function o(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M10 17a7 7 0 1 1 0-14 7 7 0 0 1 0 14zm-8.5-7a8.5 8.5 0 1 1 17 0 8.5 8.5 0 0 1-17 0zm8.65 3.38 2.7-1.56a2.1 2.1 0 0 0 0-3.64l-2.7-1.56A2.1 2.1 0 0 0 7 8.44v3.12a2.1 2.1 0 0 0 3.15 1.82zm1.95-3.9c.4.23.4.8 0 1.04l-2.7 1.56a.6.6 0 0 1-.9-.52V8.44c0-.46.5-.75.9-.52z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"video_circle_outline_20"}}r.d(t,{getIcon20VideoCircleOutline:()=>o})},857295:(e,t,r)=>{function o(){return{icon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.65 4c1.34 0 1.83.14 2.32.4.48.26.87.65 1.13 1.13.26.5.4.98.4 2.32v7.8c0 1.34-.14 1.83-.4 2.32-.26.48-.65.87-1.13 1.13-.5.26-.98.4-2.32.4h-7.8c-1.34 0-1.83-.14-2.32-.4a2.73 2.73 0 0 1-1.13-1.13c-.26-.5-.4-.98-.4-2.32v-7.8c0-1.34.14-1.83.4-2.32.26-.48.65-.87 1.13-1.13.5-.26.98-.4 2.32-.4h7.8Zm-.21 1.5H8.06c-.89 0-1.21.1-1.54.27-.32.17-.58.43-.75.75-.18.33-.27.65-.27 1.54v7.38c0 .89.1 1.21.27 1.54.17.32.43.58.75.75.33.18.65.27 1.54.27h7.38c.89 0 1.21-.1 1.54-.27.32-.17.58-.43.75-.75.18-.33.27-.65.27-1.54V8.06c0-.89-.1-1.21-.27-1.54a1.82 1.82 0 0 0-.75-.75c-.33-.18-.65-.27-1.54-.27Zm-5.94 10V8h5v1.5H11V11h3.5v1.5H11V14h3.5v1.5h-5Z" fill="currentColor"/></svg>',name:"explicit_24"}}r.d(t,{getIcon24Explicit:()=>o})},171867:(e,t,r)=>{function o(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M17.59 3c2.18 0 3.23.2 4.32.79a5.54 5.54 0 0 1 2.3 2.3c.59 1.09.79 2.14.79 4.32v7.18c0 2.18-.2 3.23-.79 4.32a5.54 5.54 0 0 1-2.3 2.3c-1.09.59-2.14.79-4.32.79h-7.18c-2.18 0-3.23-.2-4.32-.79a5.54 5.54 0 0 1-2.3-2.3C3.2 20.82 3 19.77 3 17.6v-7.18c0-2.18.2-3.23.79-4.32a5.54 5.54 0 0 1 2.3-2.3C7.18 3.2 8.23 3 10.4 3h7.18Zm0 2h-7.18c-1.88 0-2.62.14-3.38.55-.64.34-1.14.84-1.48 1.48-.4.76-.55 1.5-.55 3.38v7.18c0 1.88.14 2.62.55 3.38.34.64.84 1.14 1.48 1.48.76.4 1.5.55 3.38.55h7.18c1.88 0 2.62-.14 3.38-.55a3.54 3.54 0 0 0 1.48-1.48c.4-.76.55-1.5.55-3.38v-7.18c0-1.88-.14-2.62-.55-3.38a3.54 3.54 0 0 0-1.48-1.48c-.76-.4-1.5-.55-3.38-.55ZM13 17.5a1 1 0 1 1 0 2H9a1 1 0 1 1 0-2h4Zm6-4.5a1 1 0 1 1 0 2H9a1 1 0 1 1 0-2h10Zm0-4.5a1 1 0 1 1 0 2H9a1 1 0 1 1 0-2h10Z" fill="currentColor"/></svg>',name:"article_outline_28"}}r.d(t,{getIcon28ArticleOutline:()=>o})},671342:(e,t,r)=>{function o(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><g id="attach_outline_28__Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="attach_outline_28__attach_outline_28"><path d="M0 0h28v28H0z"/><path d="M14.19 10.9a1 1 0 1 1 1.41 1.41l-4.17 4.17a1.5 1.5 0 0 0 0 2.12c.6.6 1.56.57 2.12 0l7.78-7.77a4 4 0 0 0-5.66-5.66L7.9 12.95a6.52 6.52 0 0 0 0 9.19 6.52 6.52 0 0 0 9.19 0l4.17-4.17a1 1 0 0 1 1.41 1.41l-4.17 4.17a8.52 8.52 0 0 1-12.02 0 8.52 8.52 0 0 1 0-12.02l7.78-7.77a6 6 0 0 1 8.48 8.48l-7.77 7.78a3.5 3.5 0 0 1-4.95-4.95l4.17-4.17Z" id="attach_outline_28__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></svg>',name:"attach_outline_28"}}r.d(t,{getIcon28AttachOutline:()=>o})},398282:(e,t,r)=>{function o(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" viewBox="0 0 28 28"><path fill-rule="evenodd" d="M11.7 2c-2.46 0-3.53.22-4.63.8A5.47 5.47 0 0 0 4.8 5.07C4.22 6.17 4 7.24 4 9.69v8.62c0 2.45.22 3.53.8 4.62a5.46 5.46 0 0 0 2.27 2.27c1.1.58 2.17.8 4.62.8h4.62c2.45 0 3.53-.22 4.62-.8a5.46 5.46 0 0 0 2.27-2.27c.59-1.1.8-2.17.8-4.62v-5.95c0-.8-.03-1.16-.12-1.56a3.61 3.61 0 0 0-.47-1.13 6.4 6.4 0 0 0-1.02-1.2l-4.87-4.86c-.56-.57-.84-.8-1.2-1.02a3.61 3.61 0 0 0-1.12-.47A5.3 5.3 0 0 0 14 2h-2.3Zm0 2c-2.34 0-3.03.21-3.69.56a3.47 3.47 0 0 0-1.44 1.45C6.2 6.67 6 7.36 6 9.7v8.62c0 2.33.21 3.02.56 3.68a3.47 3.47 0 0 0 1.45 1.45c.66.35 1.35.56 3.68.56h4.62c2.33 0 3.02-.21 3.68-.56a3.47 3.47 0 0 0 1.45-1.45c.35-.66.56-1.35.56-3.68V12h-5.5A2.5 2.5 0 0 1 14 9.5V4H11.7Zm4.4 1.02-.1-.1V9.5a.5.5 0 0 0 .41.5h4.68a25.43 25.43 0 0 0-.11-.1L16.1 5.01Z" clip-rule="evenodd"/></svg>',name:"document_outline_28"}}r.d(t,{getIcon28DocumentOutline:()=>o})},131857:(e,t,r)=>{function o(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21.15 8c1.34 0 1.83.14 2.32.4.48.26.87.65 1.13 1.13l.1.19c.2.44.3.96.3 2.13v7.68c-.04 2.02-.3 2.83-.73 3.66a5 5 0 0 1-2.08 2.08c-.9.47-1.79.73-4.24.73H9.47c-2.02-.04-2.83-.3-3.66-.73a5 5 0 0 1-2.08-2.08c-.45-.86-.7-1.71-.73-3.94v-7.4c0-1.34.14-1.83.4-2.32.26-.48.65-.87 1.13-1.13l.19-.1c.4-.18.88-.28 1.88-.3h14.55Zm0 2H6.5c-.63.01-.82.06-1.01.16a.73.73 0 0 0-.32.32c-.1.2-.15.42-.16 1.18v7.29c0 1.93.13 2.6.5 3.3a3 3 0 0 0 1.26 1.25c.69.37 1.36.5 3.3.5h7.89c1.93 0 2.6-.13 3.3-.5a3 3 0 0 0 1.25-1.26c.37-.69.5-1.36.5-3.3v-7.1c0-.91-.04-1.14-.16-1.36a.73.73 0 0 0-.32-.32c-.2-.1-.38-.15-1.01-.16h-.36ZM19 12a1 1 0 1 1 0 2 1 1 0 0 1 0-2ZM9 12a1 1 0 1 1 0 2 1 1 0 0 1 0-2Zm5-10a6 6 0 0 1 6 6h-2a4 4 0 0 0-8 0H8a6 6 0 0 1 6-6Z" fill="currentColor"/></svg>',name:"market_outline_28"}}r.d(t,{getIcon28MarketOutline:()=>o})},525420:(e,t,r)=>{function o(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><g id="music_outline_28__Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="music_outline_28__music_outline_28"><path d="M0 0h28v28H0z"/><path d="M11 16.93v2.46c0 4.7-4.58 7.1-7.07 4.61-2.5-2.49-.08-7.07 4.6-7.07H11Zm-2 2h-.46c-3.02 0-4.34 2.52-3.2 3.66C6.48 23.73 9 22.4 9 19.39v-.46Zm10.39-15.4A3 3 0 0 1 23 6.45v10.43c0 4.7-4.58 7.1-7.07 4.61-2.5-2.49-.08-7.07 4.6-7.07H21v-4.7L11 11.8V18H9V8.92c0-.95.08-1.43.31-1.96.23-.5.56-.9 1-1.23.47-.33.93-.51 1.85-.7ZM21 16.42h-.46c-3.02 0-4.34 2.52-3.2 3.66 1.14 1.14 3.66-.18 3.66-3.2v-.46Zm-.02-10.17a1 1 0 0 0-1.18-.78l-7.23 1.5c-.67.15-.88.23-1.08.37-.16.12-.27.25-.35.43-.1.23-.14.45-.14 1.14v.85l10-2.08V6.46a1 1 0 0 0 0-.1Z" id="music_outline_28__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></svg>',name:"music_outline_28"}}r.d(t,{getIcon28MusicOutline:()=>o})},817587:(e,t,r)=>{function o(){return{icon:'<svg fill="none" height="28" viewBox="0 0 28 28" width="28" xmlns="http://www.w3.org/2000/svg"><g clip-rule="evenodd" fill="currentColor" fill-rule="evenodd"><path d="M24.11 19.09c.64-.88.88-1.86.89-2.93 0-2.3-1.86-4.16-4.16-4.16a5 5 0 0 0-2.7.82l-.14.1-.14-.1a4.76 4.76 0 0 0-2.7-.82A4.16 4.16 0 0 0 11 16.16c0 1.07.25 2.06.89 2.93.66.91 1.77 1.9 3.55 3.3l1.65 1.3c.53.42 1.29.42 1.82 0l1.65-1.3c1.77-1.4 2.89-2.39 3.55-3.3zm-10.6-1.18c.48.66 1.37 1.5 3.17 2.9L18 21.87l1.32-1.04c1.8-1.42 2.7-2.25 3.18-2.9.39-.54.5-1.1.5-1.76 0-1.2-.97-2.16-2.16-2.16-.8 0-1.5.3-2.13.94l-.36.35a.5.5 0 0 1-.7 0l-.36-.35a2.9 2.9 0 0 0-2.13-.94c-1.2 0-2.16.97-2.16 2.16 0 .65.12 1.22.5 1.75z"/><path d="m7.65 3.47 3.36-.9c.78-.2 1.42-.38 1.95-.48.56-.1 1.08-.13 1.62-.02a4 4 0 0 1 2.14 1.23c.36.4.6.88.78 1.41.18.52.36 1.16.56 1.93l.68 2.54a1 1 0 0 1-1.93.52l-.67-2.5c-.22-.83-.37-1.39-.52-1.81a2.16 2.16 0 0 0-.39-.75 2 2 0 0 0-1.07-.62c-.17-.03-.4-.04-.84.04-.44.08-1 .23-1.83.46L8.2 5.4c-.82.22-1.38.37-1.81.52-.41.15-.61.27-.74.39a2 2 0 0 0-.62 1.07c-.04.17-.04.4.04.83.08.45.23 1.01.45 1.84L8.2 20.09c.22.83.37 1.4.52 1.82.15.41.27.61.4.74a2 2 0 0 0 1.06.62c.34.07.79.01 2.1-.33a1 1 0 0 1 .5 1.93c-1.18.31-2.12.55-3.01.36a4 4 0 0 1-2.15-1.24c-.36-.4-.59-.88-.78-1.4-.18-.52-.35-1.16-.56-1.94L3.58 10.53c-.21-.78-.39-1.42-.48-1.96a4.09 4.09 0 0 1-.03-1.6 4 4 0 0 1 1.24-2.15c.4-.36.88-.6 1.4-.78.52-.19 1.16-.36 1.94-.57z"/></g></svg>',name:"narrative_outline_28"}}r.d(t,{getIcon28NarrativeOutline:()=>o})},454188:(e,t,r)=>{function o(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><g id="place_outline_28__Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="place_outline_28__place_outline_28"><path d="M0 0h28v28H0z"/><path d="M23 12.01a9 9 0 1 0-18 0c0 3.55 2.18 7.83 6.48 12.92a3.3 3.3 0 0 0 5.04 0c4.3-5.09 6.48-9.37 6.48-12.92ZM14.84 23.8a1.3 1.3 0 0 1-1.83-.15C8.98 18.88 7 14.98 7 12a7 7 0 1 1 14 0c0 2.97-1.98 6.87-6 11.63l-.16.15ZM10 12a4 4 0 1 1 8 0 4 4 0 0 1-8 0Zm2 0a2 2 0 1 0 4 0 2 2 0 0 0-4 0Z" id="place_outline_28__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></svg>',name:"place_outline_28"}}r.d(t,{getIcon28PlaceOutline:()=>o})},637399:(e,t,r)=>{function o(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><g id="playlist_outline_28__Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="playlist_outline_28__playlist_outline_28"><path d="M0 0h28v28H0z"/><path d="M24.78 4.02A1 1 0 0 1 26 5v2.1a3.6 3.6 0 0 1-2.67 3.48l-3.33.89v7.92c0 4.7-4.58 7.1-7.07 4.61-2.58-2.57-.11-6.8 5.07-7.06v-6.22a1 1 0 0 1 0-.04V8.93c-.03-1.92.91-3.29 2.68-3.88.64-.21 2-.55 4.1-1.03ZM18 18.94c-3.54.2-4.84 2.46-3.66 3.65 1.14 1.14 3.66-.18 3.66-3.2ZM8.5 17a1 1 0 0 1 0 2h-4a1 1 0 0 1 0-2h4Zm5-6a1 1 0 0 1 0 2h-9a1 1 0 0 1 0-2h9ZM24 6.26c-1.35.31-2.25.54-2.68.69-.94.31-1.34.89-1.32 1.97v.48l2.81-.75A1.6 1.6 0 0 0 24 7.1ZM15 5a1 1 0 0 1 0 2H4.5a1 1 0 1 1 0-2H15Z" id="playlist_outline_28__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></svg>',name:"playlist_outline_28"}}r.d(t,{getIcon28PlaylistOutline:()=>o})},354327:(e,t,r)=>{function o(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><g id="poll_square_outline_28__Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="poll_square_outline_28__poll_square_outline_28"><path id="poll_square_outline_28__poll_outline_28" d="M0 0h28v28H0z"/><path d="M10.7 5c-2.14 0-2.9.15-3.69.57-.63.33-1.1.81-1.44 1.44C5.15 7.8 5 8.56 5 10.7v6.62c0 2.13.15 2.9.57 3.68.33.63.81 1.1 1.44 1.44.78.42 1.55.57 3.68.57h6.62c2.13 0 2.9-.15 3.68-.57A3.45 3.45 0 0 0 22.43 21c.42-.78.57-1.55.57-3.68v-6.62c0-2.13-.15-2.9-.57-3.68A3.45 3.45 0 0 0 21 5.57C20.2 5.15 19.44 5 17.3 5h-6.62Zm0-2h6.6c2.68 0 3.65.28 4.63.8a5.45 5.45 0 0 1 2.27 2.27c.52.98.8 1.95.8 4.62v6.62c0 2.67-.28 3.64-.8 4.62a5.45 5.45 0 0 1-2.27 2.27c-.98.52-1.95.8-4.62.8h-6.62c-2.67 0-3.64-.28-4.62-.8a5.45 5.45 0 0 1-2.27-2.27c-.52-.98-.8-1.95-.8-4.62v-6.62c0-2.67.28-3.64.8-4.62A5.45 5.45 0 0 1 6.07 3.8c.98-.52 1.95-.8 4.62-.8Zm.3 16a1 1 0 0 1-2 0v-6a1 1 0 0 1 2 0v6Zm4 0a1 1 0 0 1-2 0V9a1 1 0 0 1 2 0v10Zm4 0a1 1 0 0 1-2 0v-4a1 1 0 0 1 2 0v4Z" id="poll_square_outline_28__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></svg>',name:"poll_square_outline_28"}}r.d(t,{getIcon28PollSquareOutline:()=>o})},445452:(e,t,r)=>{function o(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><g id="video_outline_28__Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="video_outline_28__video_outline_28" fill-rule="nonzero"><path d="M0 0h28v28H0z"/><path d="M14 2a12 12 0 1 1 0 24 12 12 0 0 1 0-24Zm0 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20Zm-2.05 5.12c.35 0 .68.1.98.26l5.08 2.93a1.95 1.95 0 0 1 0 3.38l-5.08 2.93a1.95 1.95 0 0 1-2.93-1.7v-5.84c0-1.08.88-1.96 1.95-1.96Zm.05 2.03v5.7L16.94 14 12 11.15Z" id="video_outline_28__Icon-Color" fill="currentColor"/></g></g></svg>',name:"video_outline_28"}}r.d(t,{getIcon28VideoOutline:()=>o})},922952:(e,t,r)=>{function o(){return{icon:'<svg width="56" height="56" viewBox="0 0 56 56" xmlns="http://www.w3.org/2000/svg"><g id="playlist_outline_56__Icons-56/playlist_outline_56" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="playlist_outline_56__playlist_outline_28"><path id="playlist_outline_56__playlist_outline_56" d="M0 0h56v56H0z"/><path d="M39 38.93c0 4.55-1.94 7.97-5.07 9.62-2.84 1.5-6.24 1.22-8.22-.76-2.04-2.04-2.3-5.5-.58-8.3C27 36.44 30.77 34.61 36 34.5V16.76a6.88 6.88 0 0 1 5.03-6.68c1.08-.36 3.24-.92 6.5-1.67l1.64-.37A1.5 1.5 0 0 1 51 9.5v4.2a6.7 6.7 0 0 1-4.97 6.48L39 22.05Zm-3-1.42h-.4c-4 .18-6.67 1.53-7.91 3.54-1.02 1.66-.88 3.6.14 4.62.98.98 2.96 1.14 4.7.22 2.12-1.11 3.47-3.5 3.47-6.96V37.5ZM27.5 22a1.5 1.5 0 0 1 0 3h-19a1.5 1.5 0 0 1 0-3h19ZM48 11.38a83.8 83.8 0 0 0-6.03 1.54l-.21.08c-1.93.71-2.8 2.05-2.76 4.33v1.62l6.25-1.67A3.7 3.7 0 0 0 48 13.71ZM30.5 10a1.5 1.5 0 0 1 0 3h-22a1.5 1.5 0 0 1 0-3h22Z" id="playlist_outline_56__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></svg>',name:"playlist_outline_56"}}r.d(t,{getIcon56PlaylistOutline:()=>o})},977601:(e,t,r)=>{function o(){return{icon:'<svg fill="none" height="56" viewBox="0 0 56 56" width="56" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M29 39.5v2.93c0 4.55-1.94 7.97-5.07 9.62-2.84 1.5-6.24 1.22-8.22-.76-2.03-2.04-2.29-5.5-.57-8.3C17 39.94 20.77 38.11 26 38V11.76a6.88 6.88 0 0 1 5.03-6.68c1.08-.36 3.24-.92 6.5-1.67l1.64-.37A1.5 1.5 0 0 1 41 4.5v4.2a6.7 6.7 0 0 1-4.97 6.48L29 17.05V38zm6.25-27.22L29 13.95v-1.62c-.03-2.28.83-3.62 2.76-4.33l.21-.08A83.8 83.8 0 0 1 38 6.38v2.33a3.7 3.7 0 0 1-2.75 3.57zM26 42.42c0 3.47-1.35 5.85-3.46 6.97-1.75.91-3.73.76-4.7-.23-1.02-1.01-1.17-2.95-.15-4.61 1.24-2.02 3.9-3.36 7.92-3.54L26 41z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"song_outline_56"}}r.d(t,{getIcon56SongOutline:()=>o})},427717:(e,t,r)=>{r.d(t,{ERRORS:()=>o});const o={NOT_FOUND_WEBGL_CONTEXT:"WebGL context not found",TEXTURE_CREATE_FAILED:"Create texture failed",SHADER_COMPILE_FAILED:"Shader compile failed",PROGRAM_CREATE_FAILED:"Create program failed",PROGRAM_CREATE_FRAMEBUFFER_FAILED:"Create framebuffer failed",PROGRAM_FRAMEBUFFER_INCOMPLETE:"Incomplete framebuffer",FILTER_NOT_FOUND:"Filter not found",FILTER_LOADING_TEXTURES_FAILED:"Filter loading textures failed"}},80157:(e,t,r)=>{r.d(t,{Renderer:()=>E});var o=r(194815),i=r(200031),n=r(427717),s=r(704235),a=r(224465),l=r(267776),c=r(31709),d=r(744084),h=r(951584),u=r(731437),p=r(801013),g=r(149543),_=r(906110);const m={preserveDrawingBuffer:!0,premultipliedAlpha:!1},f=document.createElement("canvas"),S=f.getContext("webgl",m)||f.getContext("experimental-webgl",m),v={};class E{static getOrCreateTexture(e,t,r){const o=r?`${t.src}_auto`:t.src;if(!v[o]){let n;n=r?E.getAuto(t):t;const s=new i.Texture(e);s.attachImage(e,n),v[o]=s}return v[o]}static loadTextures(e,t){return new Promise((r=>{const o=[],i=t.map((e=>p.imageCacheGlobal.get(e)));Promise.all(i).then((t=>{t.forEach((t=>{const r=E.getOrCreateTexture(e,t);o.push(r)})),r(o)})).catch((()=>{}))}))}static getAuto(e){const t=document.createElement("canvas");let r=t.getContext("2d");if(!r)return t;t.width=e.width,t.height=e.height,r.drawImage(e,0,0,e.width,e.height);let o=e.width*e.height,i=255,n=r.getImageData(0,0,e.width,e.height),s=n.data;function a(e,t,r,o){t+r>=e&&(t=(e-1)/2,r=(e-1)/2);const n=function(e,t,r,o){let i,n=256,a=[];for(let e=0;e<256;e++)a.push(0);let l=0;for(i=0;i<e;i++)l=4*i,a[s[l+o]]+=1;for(i=1;i<n;i++)a[i]+=a[i-1];let c={};for(i=0;i<n&&a[i]<=t;)i++;for(c.min=i,i=255;i<n&&a[i]>e-r;)i--;return i<255&&i++,c.max=i,c}(e,t,r,o),{min:a,max:l}=n;!function(e,t,r,o){let n,a;if(r<=t)for(n=0;n<e;n++)a=4*n,s[a+o]=127.5;else{let l=new Array(256);for(n=0;n<t;n++)l[n]=0;for(n=t;n<r;n++)l[n]=(n-t)*i/(r-t)+.5;for(n=r;n<256;n++)l[n]=i;for(n=0;n<e;n++)a=4*n,s[a+o]=l[s[a+o]]}}(e,a,l,o)}!function(e,t,r){a(e,t,r,0),a(e,t,r,1),a(e,t,r,2)}(o,.01*o,.01*o),r.putImageData(n,0,0);const l=document.createElement("canvas");return l.width=e.width,l.height=e.height,r=l.getContext("2d"),r?.drawImage(t,0,0,t.width,t.height),t}render(e,t,r,o,i={},s,a){return new Promise((l=>{requestAnimationFrame((()=>{if(!S)throw new Error(n.ERRORS.NOT_FOUND_WEBGL_CONTEXT);const c=(0,g.getColorTable)(o);if(!c)throw new Error(n.ERRORS.FILTER_NOT_FOUND);const d=E.getOrCreateTexture(S,r,a);E.loadTextures(S,c).then((r=>{let o=this.postProcessTexture;if(this.baseColorCorrectionProgram.draw({width:e,height:t,uniforms:{u_exposure:i.exposure,u_contrast:i.contrast,u_warmth:i.warmth,u_saturation:i.saturation,u_amount:i.amount},textures:[d,...r]},this.colorCorrectionTexture),this.postProcessProgram.draw({width:e,height:t,uniforms:{u_vignette:i.vignette,u_sharpness:i.sharpness,u_sourceSize:i.sourceSize,u_grain:i.grain},textures:[this.colorCorrectionTexture]},this.postProcessTexture),s&&s.isEnabled){const r=s.form===_.BLUR_TYPES.ROUND?this.roundBlurProgram:this.squareBlurProgram;this.triangleBlurProgram.draw({width:e,height:t,uniforms:{u_delta:[s.size/e,0]},textures:[this.postProcessTexture]},this.blurTexture1),this.triangleBlurProgram.draw({width:e,height:t,uniforms:{u_delta:[0,s.size/t]},textures:[this.blurTexture1]},this.blurTexture2),o=this.blurTexture2,s.position&&(r.draw({width:e,height:t,uniforms:{u_position:s.position,u_radius:s.radius},textures:[this.blurTexture2,this.postProcessTexture]},this.resultBlurTexture),o=this.resultBlurTexture)}return this.flippedProgram.draw({width:e,height:t,uniforms:{},textures:[o]}),l(f)})).catch((e=>{console.error(new Error(e))}))}))}))}constructor(){this.baseColorCorrectionProgram=new o.ShaderProgram(S,s.default,a.default),this.postProcessProgram=new o.ShaderProgram(S,s.default,l.default),this.flippedProgram=new o.ShaderProgram(S,s.default,c.default),this.triangleBlurProgram=new o.ShaderProgram(S,s.default,d.default),this.roundBlurProgram=new o.ShaderProgram(S,s.default,h.default),this.squareBlurProgram=new o.ShaderProgram(S,s.default,u.default),this.colorCorrectionTexture=new i.Texture(S),this.postProcessTexture=new i.Texture(S),this.blurTexture1=new i.Texture(S),this.blurTexture2=new i.Texture(S),this.resultBlurTexture=new i.Texture(S)}}},308171:(e,t,r)=>{r.d(t,{Shader:()=>i});var o=r(427717);class i{constructor(e,t,r){const i=e.createShader(r);if(!i)throw new Error(o.ERRORS.SHADER_COMPILE_FAILED);e.shaderSource(i,t),e.compileShader(i);if(!e.getShaderParameter(i,e.COMPILE_STATUS))throw new Error(`${e.getShaderInfoLog(i)}`);this.shader=i}}},194815:(e,t,r)=>{r.d(t,{ShaderProgram:()=>a});var o=r(308171),i=r(200031),n=r(427717),s=r(8520);class a{createProgram(e,t){const r=this.gl.createProgram();if(!r)throw new Error(`${n.ERRORS.PROGRAM_CREATE_FAILED}, gl error - ${this.gl.getError()}`);this.gl.attachShader(r,e),this.gl.attachShader(r,t),this.gl.linkProgram(r);if(!this.gl.getProgramParameter(r,this.gl.LINK_STATUS))throw new Error(`${this.gl.getProgramInfoLog(r)}`);return r}destroy(){this.gl.deleteProgram(this.program)}attribute(e,t){const r=this.gl.getAttribLocation(this.program,e),o=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,o),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(t),this.gl.STATIC_DRAW),this.gl.enableVertexAttribArray(r),this.gl.vertexAttribPointer(r,2,this.gl.FLOAT,!1,0,0)}uniforms(e){this.gl.useProgram(this.program);for(let t in e){if(!e.hasOwnProperty(t))continue;const r=this.gl.getUniformLocation(this.program,t),o=e[t];if(Array.isArray(o))switch(o.length){case 1:this.gl.uniform1fv(r,new Float32Array(o));break;case 2:this.gl.uniform2fv(r,new Float32Array(o));break;case 3:this.gl.uniform3fv(r,new Float32Array(o));break;case 4:this.gl.uniform4fv(r,new Float32Array(o))}else(0,s.isNumber)(o)&&this.gl.uniform1f(r,o)}}textures(e,t){this.gl.useProgram(this.program),e.forEach(((e,r)=>{t?(e.use(this.gl,r),this.gl.uniform1i(this.gl.getUniformLocation(this.program,`u_image${r}`),r)):i.Texture.unuse(this.gl,r)}))}draw(e,t){this.gl.useProgram(this.program),t&&(t.updateSize(this.gl,e.width,e.height),this.bindTexture(t.texture)),this.gl.canvas.width=e.width,this.gl.canvas.height=e.height,this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight);const r=e.width,o=e.height;this.attribute("a_position",[0,0,r,0,0,o,0,o,r,0,r,o]),this.attribute("a_texCoord",[0,0,1,0,0,1,0,1,1,0,1,1]),this.uniforms(Object.assign(e.uniforms,{u_resolution:[e.width,e.height]})),e.textures&&this.textures(e.textures,!0),this.gl.clearColor(0,0,0,0),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,6),e.textures&&this.textures(e.textures,!1),t&&this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)}bindTexture(e,t){if(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.framebuffer),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,e,0),t){const e=this.gl.checkFramebufferStatus(this.gl.FRAMEBUFFER);if(e!==this.gl.FRAMEBUFFER_COMPLETE){let t="";switch(e){case this.gl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:t="The attachment types are mismatched or not all framebuffer attachment points are framebuffer attachment complete.";break;case this.gl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:t="There is no attachment.";break;case this.gl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:t="Height and width of the attachment are not the same.";break;case this.gl.FRAMEBUFFER_UNSUPPORTED:t="The format of the attachment is not supported or if depth and stencil attachments are not the same renderbuffer."}throw new Error(`${n.ERRORS.PROGRAM_FRAMEBUFFER_INCOMPLETE}. ${t}`)}}}constructor(e,t,r){if(!e)throw new Error(n.ERRORS.NOT_FOUND_WEBGL_CONTEXT);const i=new o.Shader(e,t,e.VERTEX_SHADER).shader,s=new o.Shader(e,r,e.FRAGMENT_SHADER).shader;this.gl=e,this.program=this.createProgram(i,s),this.framebuffer=e.createFramebuffer()}}},200031:(e,t,r)=>{r.d(t,{Texture:()=>i});var o=r(427717);class i{attachImage(e,t){e.bindTexture(e.TEXTURE_2D,this.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.bindTexture(e.TEXTURE_2D,null)}updateSize(e,t,r){e.bindTexture(e.TEXTURE_2D,this.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,r,0,e.RGBA,e.UNSIGNED_BYTE,null),e.bindTexture(e.TEXTURE_2D,null)}use(e,t){e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)}static unuse(e,t){e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,null)}destroy(e){e.deleteTexture(this.texture)}constructor(e,t,r){if(!e)throw new Error(o.ERRORS.NOT_FOUND_WEBGL_CONTEXT);const i=e.createTexture();if(!i)throw new Error(o.ERRORS.TEXTURE_CREATE_FAILED);this.texture=i,e.bindTexture(e.TEXTURE_2D,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t&&r&&this.updateSize(e,t,r),e.bindTexture(e.TEXTURE_2D,null)}}},149543:(e,t,r)=>{r.d(t,{getColorTable:()=>R});var o=r(43991),i=r(995788),n=r(341832),s=r(711694),a=r(190623),l=r(179445),c=r(854037),d=r(497098),h=r(536322),u=r(520065),p=r(463130),g=r(812376),_=r(881990),m=r(433157),f=r(857108),S=r(434944),v=r(115508),E=r(67443),T=r(174059),w=r(403072),C=r(220964),y=r(851994),x=r(352014);const b={regular:o,nox:i,vesper:n,latona:s,liber:a,luna:l,minerva:c,mitra:d,pro:h,terra:u,veles:p,vesta:g,zaria:_,sepia:m,genius:f,horus:S,fortuna:v},I=[E,T,w,C,y,x];function R(e){const t=b[e];if(t)return[...I,t]}},801013:(e,t,r)=>{r.d(t,{imageCacheGlobal:()=>i});var o=r(579605);const i=new class{get(e){return new Promise(((t,r)=>{const i=this.images[e];i?t(i):(0,o.loadImage)(e).then((r=>{this.setImage(e,r),t(r)})).catch(r)}))}setImage(e,t){this.images[e]=t}constructor(){this.images={}}}},60920:(e,t,r)=>{r.d(t,{rendererScene:()=>l});var o=r(291718),i=r(906110),n=r(579605),s=r(561583),a=r(8520);const l=new class{draw(e,t,r,i,n,s,l,c,d,h,u=!1){return new Promise(((p,g)=>{const _=r[0];this.canvas.width=e,this.canvas.height=t,(0,o.drawBlurFromImage)(this.canvas,_.canvas,_.avgColor);let m=0,f=0,S=0,v=0;if("photo"===h&&(m=e,f=t,S=0,v=0,this.drawImage(_.canvas,m,f,S,v,_.rotate,!1)),"story"===h&&(m=_.width*_.scale,f=_.height*_.scale,S=_.x-m/2,v=_.y-f/2,this.drawImage(_.canvas,m*n,f*n,S*n,v*n,_.rotate,!u)),c){const e=document.createElement("canvas");e.width=m*n,e.height=f*n;const t=e.getContext("2d"),r=c.getContext("2d");if(r&&t){const o=r.getImageData(0,0,m*n,f*n);t.putImageData(o,0,0),t.drawImage(e,0,0,m*n,f*n),this.drawImage(e,m*n,f*n,S*n,v*n,_.rotate)}}u||this.drawBrush(i,n),this.drawLayers(r,n,e,t,s,l).then((()=>{if(u&&this.drawBrush(i,n),d){const{croppedWidth:e,croppedHeight:t,croppedY:r,croppedX:o,containerHeight:i,containerWidth:n}=d;(0,a.isNumber)(e)&&(0,a.isNumber)(t)&&(0,a.isNumber)(r)&&(0,a.isNumber)(o)&&(0,a.isNumber)(i)&&(0,a.isNumber)(n)&&this.cropImage(e,t,o,r,n,i)}this.canvas.toBlob((e=>{p({blob:e,width:this.canvas.width,height:this.canvas.height})}),"image/jpeg",1)})).catch((e=>{g(e)}))}))}cropImage(e,t,r,o,i,n){if(!this.context||!this.canvas)return;const s=document.createElement("canvas");s.width=i,s.height=n;const a=s.getContext("2d");s&&a&&(a.drawImage(this.canvas,r,o,e,t,0,0,i,n),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.canvas.width=i,this.canvas.height=n,this.context.drawImage(s,0,0))}drawImage(e,t,r,o,i,n,s=!0){this.context&&(this.context.save(),this.context.imageSmoothingEnabled=s,this.context.translate(o,i),this.context.translate(t/2,r/2),this.context.rotate(n*Math.PI/180),this.context.translate(-t/2,-r/2),this.context.drawImage(e,0,0,t,r),this.context.restore())}drawBrush(e,t){const{context:r}=this;r&&(r.save(),r.lineCap="round",r.lineJoin="round",e.forEach((e=>{r.lineWidth=e.width*i.BRUSH_WIDTH_COEFFICIENT*t,r.strokeStyle=(0,o.hexToRgba)(e.color,e.opacity),r.beginPath(),r.moveTo(e.path[0][0]*t/e.scale,e.path[0][1]*t/e.scale),e.path.forEach((o=>{r.lineTo(o[0]*t/e.scale,o[1]*t/e.scale)})),r.stroke()})),r.restore())}drawLayers(e,t,r,o,n,a){return new Promise(((r,o)=>{const l=[];e.forEach(((e,r)=>{let o=null;if(e.type!==i.LAYER_TYPES.BACKGROUND){if(e.type===i.LAYER_TYPES.STICKER){const t=n(e.id,i.STICKER_LARGE);o=this.fetchImage(t,e.width*e.scale/e.baseScale,e.height*e.scale/e.baseScale,e.x,e.y,e.rotate)}else if(e.type===i.LAYER_TYPES.IMAGE)o=this.fetchImage(e.url,e.width*e.scale,e.height*e.scale,e.x,e.y,e.rotate);else if(e.type===i.LAYER_TYPES.TEXT){const i=document.querySelector(`[data-index="${r}"] [data-name="${s.layerSelector}"]`);i&&(o=this.drawTextLayer(e,i,t,a))}o&&l.push(o)}})),Promise.all(l).then((e=>{e.forEach((e=>{const r=e.width,o=e.height,i=e.x-r/2,n=e.y-o/2;this.drawImage(e.image,r*t,o*t,i*t,n*t,e.rotate)})),r()})).catch((e=>{o(e)}))}))}drawTextLayer(e,t,r,n){return new Promise(((s,a)=>{const l=document.createElement("canvas"),c=l.getContext("2d");if(!c)return a();const d=100;l.width=t.offsetWidth/n*i.CANVAS_SCALE*r+d,l.height=t.offsetHeight/n*i.CANVAS_SCALE*r+d;let h="";switch(e.fontStyle){case"classic":h="RobotoPE";break;case"cursive":h="PacificoPE";break;case"marker":h="AmaticPE";break;case"italics":h="TTCommonsPE";break;case"typewriter":h="GoraPE";break;case"poster":h="DinPE";break;case"retro":h="Rodchenko";break;case"impact":h="Impact";break;case"lobster":h="Lobster"}const u=e.fontSize*e.scale*i.FONT_SIZE_COEFFICIENT*i.CANVAS_SCALE*r/e.baseScale;c.font=`${u}px ${h}, serif`,c.fillStyle=e.color,c.textAlign="center",c.textBaseline="top",(0,o.printAtWordWrap)(c,e.text,l.width/2,50,u,l.width-d),s({image:l,width:l.width/i.CANVAS_SCALE/r,height:l.height/i.CANVAS_SCALE/r,x:e.x,y:e.y,rotate:e.rotate})}))}fetchImage(e,t,r,o,i,s){return new Promise((a=>{(0,n.loadImage)(e).then((e=>{a({image:e,width:t,height:r,x:o,y:i,rotate:s})})).catch((e=>{console.error(e)}))}))}constructor(){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d")}}},864876:(e,t,r)=>{r.d(t,{ADD_DRAWING:()=>J,ADD_LAYER_IMAGE:()=>H,ADD_LAYER_STICKER:()=>B,ADD_LAYER_TEXT:()=>F,DELETE_LAYER:()=>$,RESET_SEGMENTATION_DATA:()=>se,SET_CURRENT_BACKGROUND_ID:()=>oe,SET_CURRENT_BACKGROUND_TYPE:()=>te,SET_CURRENT_LAYER:()=>M,SET_CURRENT_PHOTO_URL:()=>re,SET_CURRENT_STICKER_PACK_INDEX:()=>a,SET_CURRENT_TAB:()=>s,SET_DATA:()=>ie,SET_DATA_LOADED:()=>o,SET_HEADER_SCROLL_POSITION:()=>l,SET_LAYERS_SCALE:()=>W,SET_LAYERS_SHIFT:()=>G,SET_LAYER_COLOR:()=>Y,SET_LAYER_FONT_SIZE:()=>V,SET_LAYER_FONT_STYLE:()=>X,SET_LAYER_POSITION:()=>U,SET_LAYER_SCALE:()=>j,SET_LAYER_TEXT:()=>K,SET_SAVE_LOADING:()=>n,SET_SEGMENTATION_DATA:()=>ne,SET_SETTING_AUTO_CORRECTION:()=>w,SET_SETTING_BLUR_ENABLE:()=>f,SET_SETTING_BLUR_FORM:()=>S,SET_SETTING_BLUR_POSITION:()=>T,SET_SETTING_BLUR_RADIUS:()=>E,SET_SETTING_BLUR_SIZE:()=>v,SET_SETTING_BRUSH_OPACITY:()=>h,SET_SETTING_BRUSH_WIDTH:()=>d,SET_SETTING_COLOR:()=>c,SET_SETTING_COLOR_CORRECTION:()=>g,SET_SETTING_CROP:()=>D,SET_SETTING_CROPPED:()=>y,SET_SETTING_CROP_ASPECT:()=>C,SET_SETTING_ENHANCE:()=>O,SET_SETTING_FILTER:()=>_,SET_SETTING_FILTER_AMOUNT:()=>m,SET_SETTING_FLIP_X:()=>x,SET_SETTING_FLIP_Y:()=>b,SET_SETTING_FONT_FAMILY:()=>p,SET_SETTING_FONT_SIZE:()=>u,SET_SETTING_LOADING:()=>P,SET_SETTING_ROTATE:()=>I,SET_SETTING_SEGMENTATION:()=>R,SET_SETTING_SEGMENTATION_BACKGROUND_COLOR:()=>L,SET_SETTING_SEGMENTATION_DELETE:()=>k,SET_SETTING_SEGMENTATION_INVERSE:()=>A,SET_SETTING_SEGMENTATION_RESET:()=>N,SET_SHOW_DROP_BOX:()=>i,START_LAYER_SCALE:()=>z,TOGGLE_TEXT_EDIT:()=>Z,UPDATE_BACKGROUND_LAYER:()=>q,UPDATE_DRAWING:()=>ee,UPDATE_LAYERS_AFTER_CROP:()=>Q});const o="SET_DATA_LOADED",i="SET_SHOW_DROP_BOX",n="SET_SAVE_LOADING",s="SET_CURRENT_TAB",a="SET_CURRENT_STICKER_PACK_INDEX",l="SET_HEADER_SCROLL_POSITION",c="SET_SETTING_COLOR",d="SET_SETTING_BRUSH_WIDTH",h="SET_SETTING_BRUSH_OPACITY",u="SET_SETTING_FONT_SIZE",p="SET_SETTING_FONT_FAMILY",g="SET_SETTING_COLOR_CORRECTION",_="SET_SETTING_FILTER",m="SET_SETTING_FILTER_AMOUNT",f="SET_SETTING_BLUR_ENABLE",S="SET_SETTING_BLUR_FORM",v="SET_SETTING_BLUR_SIZE",E="SET_SETTING_BLUR_RADIUS",T="SET_SETTING_BLUR_POSITION",w="SET_SETTING_AUTO_CORRECTION",C="SET_SETTING_CROP_ASPECT",y="SET_SETTING_CROPPED",x="SET_SETTING_FLIP_X",b="SET_SETTING_FLIP_Y",I="SET_SETTING_ROTATE",R="SET_SETTING_SEGMENTATION",A="SET_SETTING_SEGMENTATION_INVERSE",k="SET_SETTING_SEGMENTATION_DELETE",N="SET_SETTING_SEGMENTATION_RESET",L="SET_SETTING_SEGMENTATION_BACKGROUND_COLOR",P="SET_SETTING_LOADING",O="SET_SETTING_ENHANCE",D="SET_CROP_SETTINGS",M="SET_CURRENT_LAYER",B="ADD_LAYER_STICKER",F="ADD_LAYER_TEXT",H="ADD_LAYER_IMAGE",U="SET_LAYER_POSITION",j="SET_LAYER_SCALE",W="SET_LAYERS_SCALE",G="SET_LAYERS_SHIFT",z="START_LAYER_SCALE",Y="SET_LAYER_COLOR",V="SET_LAYER_FONT_SIZE",X="SET_LAYER_FONT_STYLE",K="SET_LAYER_TEXT",Z="TOGGLE_TEXT_EDITOR",q="UPDATE_BACKGROUND_LAYER",$="DELETE_LAYER",Q="UPDATE_LAYERS_AFTER_CROP",J="ADD_VECTOR",ee="UPDATE_DRAWING",te="SET_CURRENT_BACKGROUND_TYPE",re="SET_CURRENT_PHOTO_URL",oe="SET_CURRENT_BACKGROUND_ID",ie="SET_DATA",ne="SET_SEGMENTATION_DATA",se="RESET_SEGMENTATION_DATA"},922679:(e,t,r)=>{r.d(t,{setBackgroundType:()=>i,setCurrentBackgroundId:()=>s,setCurrentPhotoUrl:()=>n});var o=r(864876);const i=(e,t=!0)=>({type:o.SET_CURRENT_BACKGROUND_TYPE,value:e,canUndo:t}),n=(e,t=!0)=>({type:o.SET_CURRENT_PHOTO_URL,value:e,canUndo:t}),s=(e,t=!0)=>({type:o.SET_CURRENT_BACKGROUND_ID,value:e,canUndo:t})},404245:(e,t,r)=>{r.d(t,{setCrop:()=>h,setCropSettings:()=>d});var o=r(506996),i=r(922679),n=r(318659),s=r(196058),a=r(775633),l=r(919552),c=r(864876);const d=(e,t=!0)=>({type:c.SET_SETTING_CROP,value:e,canUndo:t}),h=e=>t=>{(0,o.batch)((()=>{e.hasOwnProperty("url")&&t((0,i.setCurrentPhotoUrl)(e.url)),e.hasOwnProperty("data")&&t((0,n.setData)(e.data)),e.hasOwnProperty("isCropped")&&t((0,s.setCropped)(e.isCropped)),e.hasOwnProperty("flipX")&&t((0,s.setFlipX)(e.flipX)),e.hasOwnProperty("flipY")&&t((0,s.setFlipY)(e.flipY)),e.hasOwnProperty("rotate")&&t((0,s.setRotate)(e.rotate)),e.hasOwnProperty("layers")&&t((0,a.updateLayersAfterCrop)(e.layers)),e.hasOwnProperty("drawings")&&t((0,l.updateDrawings)(e.drawings)),e.hasOwnProperty("enhance")&&t((0,s.setEnhance)({active:e.enhance.active,url:e.enhance.url,srcUrl:e.enhance.srcUrl})),e.hasOwnProperty("resetCrop")&&(t(d(null,!1)),t((0,a.setLayersScale)(1,!0)),t((0,a.setLayersShift)(0,0)))}))}},318659:(e,t,r)=>{r.d(t,{setData:()=>i});var o=r(864876);const i=e=>({type:o.SET_DATA,payload:e})},919552:(e,t,r)=>{r.d(t,{addDrawing:()=>i,updateDrawings:()=>n});var o=r(864876);const i=e=>({type:o.ADD_DRAWING,payload:e}),n=e=>({type:o.UPDATE_DRAWING,payload:e})},775633:(e,t,r)=>{r.d(t,{addLayerImage:()=>h,addLayerSticker:()=>d,addLayerText:()=>u,closeTextEditor:()=>I,deleteLayer:()=>b,setCurrentLayer:()=>l,setLayerColor:()=>E,setLayerFontSize:()=>T,setLayerFontStyle:()=>w,setLayerPosition:()=>f,setLayerScale:()=>S,setLayerText:()=>C,setLayersScale:()=>_,setLayersShift:()=>m,startLayerScale:()=>v,toggleTextEditor:()=>y,updateBackgroundLayer:()=>x,updateLayersAfterCrop:()=>R});var o=r(38145),i=r(864876),n=r(8520),s=r(291718),a=r(906110);const l=e=>({type:i.SET_CURRENT_LAYER,index:e}),c=(e,t,r=!0,o)=>(i,n)=>{const{items:s}=n().present.layers;i({type:e,payload:t,canUndo:o}),r&&i(l(s.length))},d=(e,t=!0)=>c(i.ADD_LAYER_STICKER,{type:a.LAYER_TYPES.STICKER,id:e.id,x:e.x,y:e.y,width:e.width,height:e.height,rotate:e.rotate,canDelete:e.canDelete,scale:e.scale,baseScale:e.baseScale},!0,t),h=(e,t=!0)=>c(i.ADD_LAYER_IMAGE,{type:a.LAYER_TYPES.IMAGE,url:e.url,x:e.x,y:e.y,width:e.width,height:e.height,rotate:e.rotate,clickableZones:e.clickableZones,canDelete:e.canDelete,scale:e.scale,baseScale:1},!0,t),u=(e,t,r=!0)=>(o,l)=>{const{data:d,settings:h,layers:u}=l().present,{shiftX:p,shiftY:g,globalScale:_}=u;let m,f=(h.containerWidth||d.artboardWidth)/2/_,S=(h.containerHeight||d.artboardHeight)/2/_,v=(0,n.decodeHTMLEntities)(d.placeholders[(0,s.irand)(0,d.placeholders.length-1)]),E=0,T=!1,w=h.fontStyle,C=h.color,y=h.fontSize,x=1,b=1;t&&(f=void 0!==t.x?t.x:f,S=void 0!==t.y?t.y:S,v=void 0!==t.text?t.text:v,E=void 0!==t.rotate?t.rotate:E,T=void 0!==t.isEdit?t.isEdit:T,w=void 0!==t.style?t.style:w,C=void 0!==t.color?t.color:C,y=void 0!==t.fontSize?t.fontSize:y,m=t.initialFontSize,x=void 0!==t.scale?t.scale:x,b=void 0!==t.baseScale?t.baseScale:b),d.helpers?.sendStat("add_text"),o(c(i.ADD_LAYER_TEXT,{type:a.LAYER_TYPES.TEXT,text:v,x:f-p/_,y:S-g/_,rotate:E,isEdit:T,fontSize:y,initialFontSize:m,fontStyle:w,color:C,scale:x,canDelete:!0,baseScale:b},e,r))};function p(e){return e?.type===a.BACKGROUND_MODES.BACKGROUND&&"isBackground"in e&&e.isBackground}function g(e){return e.find(p)??null}const _=(e,t=!1,r)=>(o,s)=>{const{layers:a,settings:l,data:c}=s().present,{items:d,shiftX:h,shiftY:u,globalScale:p,defaultScale:_}=a,{containerWidth:m,containerHeight:f,croppedX:S,croppedY:v,croppedWidth:E,croppedHeight:T,disableCropRestrictions:w}=l,C=g(d);if(!C)return;const y=1===C.width&&(0,n.isNumber)(c.artboardWidth)?c.artboardWidth:C.width,x=1===C.height&&(0,n.isNumber)(c.artboardHeight)?c.artboardHeight:C.height,b=(0,n.isNumber)(S)?S:0,I=(0,n.isNumber)(v)?v:0,R=y*p-y+2*b,A=x*p-x+2*I,k=Math.abs(R/h)||0,N=Math.abs(A/u)||0,L=y*e-y,P=x*e-x;let O=1===p?-(L+2*b)/2:-(L+2*b)/k,D=1===p?-(P+2*I)/2:-(P+2*I)/N;if(r&&(0,n.isNumber)(r.x)&&(0,n.isNumber)(r.y)){const t=y,o=x;let i=0===h?0===b?0:b:h,n=0===u?0===I?0:I:u;const s=r.x/t,a=r.y/o;w&&(i=h,n=u),O=i-s*(t*(e-p+1)-t),D=n-a*(o*(e-p+1)-o)}const M=(0,n.isNumber)(m)?y-m:0,B=(0,n.isNumber)(f)?x-f:0,F=(0,n.isNumber)(E)?E:y,H=(0,n.isNumber)(T)?T:x,U=y-y*e+(y*e-(F+b)*e)-M,j=x-x*e+(x*e-(H+I)*e)-B;let W=O>-(S||0)*e?-(S||0)*e:O<U?U:O,G=D>-(v||0)*e?-(v||0)*e:D<j?j:D;w&&(W=O>-L-M?O>0?0:O:-L-M,G=D>-P-B?D>0?0:D:-P-B);const z={scale:e,shiftX:W,shiftY:G,defaultScale:t?e:_};o({type:i.SET_LAYERS_SCALE,payload:z})},m=(e,t,r=!1)=>(o,s)=>{const{layers:a,settings:l,data:c}=s().present,{shiftX:d,shiftY:h,items:u,globalScale:p}=a,{containerWidth:_,containerHeight:m,croppedX:f,croppedY:S,croppedWidth:v,croppedHeight:E,disableCropRestrictions:T}=l,w=g(u);if(!w)return;const C=1===w.width&&(0,n.isNumber)(c.artboardWidth)?c.artboardWidth:w.width,y=1===w.height&&(0,n.isNumber)(c.artboardHeight)?c.artboardHeight:w.height,x=r?e:((0,n.isNumber)(d)?d:0)+e,b=r?t:((0,n.isNumber)(h)?h:0)+t,I=C-C*p,R=y-y*p,A=(0,n.isNumber)(_)?C-_:0,k=(0,n.isNumber)(m)?y-m:0,N=(0,n.isNumber)(v)?v:C,L=(0,n.isNumber)(E)?E:y,P=(0,n.isNumber)(f)?f:0,O=(0,n.isNumber)(S)?S:0;let D=I+(C*p-(N+P)*p)-A,M=R+(y*p-(L+O)*p)-k,B=x>-P*p?-P*p:x<D?D:x,F=b>-O*p?-O*p:b<M?M:b;T&&(B=x>I-A?x>0?0:x:I-A,F=b>R-k?b>0?0:b:R-k),o({type:i.SET_LAYERS_SHIFT,payload:{shiftX:B,shiftY:F}})},f=(e,t)=>(r,o)=>{const{currentIndex:n,items:s}=o().present.layers;null!==n&&s[n]&&r({type:i.SET_LAYER_POSITION,payload:{x:e,y:t}})},S=(e,t)=>(r,o)=>{const{currentIndex:n,items:s}=o().present.layers;null!==n&&s[n]&&r({type:i.SET_LAYER_SCALE,payload:{scale:e,rotate:t}})},v=()=>({type:i.START_LAYER_SCALE}),E=e=>(t,r)=>{const{currentIndex:o,items:n}=r().present.layers;null!==o&&n[o]&&t({type:i.SET_LAYER_COLOR,payload:{color:e}})},T=e=>(t,r)=>{const{currentIndex:o,items:n}=r().present.layers;null!==o&&n[o]&&t({type:i.SET_LAYER_FONT_SIZE,payload:{fontSize:e}})},w=e=>(t,r)=>{const{currentIndex:o,items:n}=r().present.layers;null!==o&&n[o]&&t({type:i.SET_LAYER_FONT_STYLE,payload:{fontStyle:e}})},C=e=>(t,r)=>{const{currentIndex:o,items:n}=r().present.layers;null!==o&&n[o]&&t({type:i.SET_LAYER_TEXT,payload:{text:e}})},y=e=>(t,r)=>{const{currentIndex:o,items:n}=r().present.layers;null!==o&&n[o]&&t({type:i.TOGGLE_TEXT_EDIT,payload:{isEdit:e}})},x=(e,t=!0)=>({type:i.UPDATE_BACKGROUND_LAYER,payload:e,canUndo:t}),b=()=>(e,t)=>{const{currentIndex:r,items:n}=t().present.layers,{helpers:s}=t().present.data;if(null===r)return;const l=n[r];l&&(l.type===a.LAYER_TYPES.STICKER?s?.sendStat("delete_sticker"):l.type===a.LAYER_TYPES.TEXT&&s?.sendStat("delete_text"),e((0,o.setShowDropBox)(!1)),e({type:i.DELETE_LAYER,index:r}))},I=()=>(e,t)=>{const{currentIndex:r,items:o}=t().present.layers;if(null===r)return;const i=o[r];i&&i.type===a.LAYER_TYPES.TEXT&&(o[r].text.trim()?e(y(!1)):e(b()))},R=e=>({type:i.UPDATE_LAYERS_AFTER_CROP,items:e})},175910:(e,t,r)=>{r.d(t,{resetSegmentationData:()=>n,setSegmentationData:()=>i});var o=r(864876);const i=e=>({type:o.SET_SEGMENTATION_DATA,payload:e}),n=()=>({type:o.RESET_SEGMENTATION_DATA})},196058:(e,t,r)=>{r.d(t,{changeBlurEnable:()=>g,resetSegmentationSettings:()=>A,setAspect:()=>E,setAutoCorrection:()=>v,setBlurEnable:()=>p,setBlurForm:()=>_,setBlurPosition:()=>S,setBlurRadius:()=>f,setBlurSize:()=>m,setBrushOpacity:()=>a,setBrushWidth:()=>s,setColor:()=>n,setColorCorrection:()=>d,setCropped:()=>T,setEnhance:()=>k,setFilter:()=>h,setFilterAmount:()=>u,setFlipX:()=>w,setFlipY:()=>C,setFontSize:()=>l,setFontStyle:()=>c,setLoading:()=>N,setRotate:()=>y,setSegmentation:()=>x,setSegmentationBackgroundColor:()=>I,setSegmentationDelete:()=>R,setSegmentationInverse:()=>b});var o=r(775633),i=r(864876);const n=e=>(t,r)=>{const{currentIndex:n,items:s}=r().present.layers;n&&!s[n]||t((0,o.setLayerColor)(e)),t({type:i.SET_SETTING_COLOR,color:e})},s=e=>({type:i.SET_SETTING_BRUSH_WIDTH,brushWidth:Math.max(.01,e)}),a=e=>({type:i.SET_SETTING_BRUSH_OPACITY,brushOpacity:e}),l=e=>(t,r)=>{const{currentIndex:n,items:s}=r().present.layers;n&&!s[n]||t((0,o.setLayerFontSize)(Math.max(.01,e))),t({type:i.SET_SETTING_FONT_SIZE,fontSize:Math.max(.01,e)})},c=e=>(t,r)=>{const{currentIndex:n,items:s}=r().present.layers;n&&!s[n]||t((0,o.setLayerFontStyle)(e)),t({type:i.SET_SETTING_FONT_FAMILY,fontStyle:e})},d=(e,t)=>({type:i.SET_SETTING_COLOR_CORRECTION,filter:e,value:t}),h=e=>({type:i.SET_SETTING_FILTER,name:e}),u=e=>({type:i.SET_SETTING_FILTER_AMOUNT,value:e}),p=e=>({type:i.SET_SETTING_BLUR_ENABLE,isEnabled:e}),g=e=>(t,r)=>{const o=r().present.settings.blur.isEnabled;if(e!==o){const{helpers:o}=r().present.data;o?.sendStat(e?"enable_blur":"disable_blur"),t(p(e))}},_=e=>({type:i.SET_SETTING_BLUR_FORM,form:e}),m=e=>({type:i.SET_SETTING_BLUR_SIZE,size:e}),f=e=>({type:i.SET_SETTING_BLUR_RADIUS,radius:e}),S=e=>({type:i.SET_SETTING_BLUR_POSITION,position:e}),v=e=>({type:i.SET_SETTING_AUTO_CORRECTION,isAutoCorrection:e}),E=(e,t=!1)=>({type:i.SET_SETTING_CROP_ASPECT,aspect:e,cropUseInitial:t}),T=e=>({type:i.SET_SETTING_CROPPED,isCropped:e}),w=e=>({type:i.SET_SETTING_FLIP_X,value:e}),C=e=>({type:i.SET_SETTING_FLIP_Y,value:e}),y=e=>({type:i.SET_SETTING_ROTATE,value:e}),x=e=>({type:i.SET_SETTING_SEGMENTATION,value:e}),b=e=>({type:i.SET_SETTING_SEGMENTATION_INVERSE,value:e}),I=e=>({type:i.SET_SETTING_SEGMENTATION_BACKGROUND_COLOR,value:e}),R=e=>({type:i.SET_SETTING_SEGMENTATION_DELETE,value:e}),A=({canUndo:e})=>({type:i.SET_SETTING_SEGMENTATION_RESET,canUndo:e||!1}),k=e=>({type:i.SET_SETTING_ENHANCE,value:e}),N=e=>({type:i.SET_SETTING_LOADING,value:e})},38145:(e,t,r)=>{r.d(t,{setCurrentStickerPackIndex:()=>h,setDataLoaded:()=>a,setHeaderScrollPosition:()=>u,setMode:()=>d,setSaveLoading:()=>c,setShowDropBox:()=>l});var o=r(775633),i=r(864876),n=r(906110),s=r(931977);const a=()=>({type:i.SET_DATA_LOADED}),l=e=>({type:i.SET_SHOW_DROP_BOX,value:e}),c=e=>({type:i.SET_SAVE_LOADING,value:e}),d=e=>(t,r)=>{const{items:a,currentIndex:l,defaultScale:c}=r().present.layers,{isRedesignEnabled:d}=r().present.data;null!==l&&(a[l].type===n.LAYER_TYPES.TEXT&&t((0,o.closeTextEditor)()),e&&[n.TABS.PAINT,n.TABS.FILTERS,n.TABS.COLOR,n.TABS.CROP].includes(e)&&t((0,o.setCurrentLayer)(null))),"crop"===e&&(0,s.scaleAction)(c),d&&"text"===e&&(0,s.currentLayerAction)("textAdd"),t({type:i.SET_CURRENT_TAB,value:e})},h=e=>({type:i.SET_CURRENT_STICKER_PACK_INDEX,value:e}),u=e=>({type:i.SET_HEADER_SCROLL_POSITION,value:e})},655461:(e,t,r)=>{r.d(t,{BackgroundCanvas:()=>s});var o=r(474848),i=r(296540),n=r(906110);class s extends i.PureComponent{componentDidUpdate(){this.drawImage()}render(){const{layer:e}=this.props,t=e.width,r=e.height;return(0,o.jsx)("canvas",{ref:this.canvasBg,width:t*n.CANVAS_SCALE,height:r*n.CANVAS_SCALE,style:{width:t,height:r},"data-name":"background-canvas"})}drawImage(){const{layer:e,globalScale:t,shiftY:r,shiftX:o}=this.props,{current:i}=this.canvasBg,s=i?.getContext("2d");if(s){const i=e.width,a=e.height;s.save(),s.scale(n.CANVAS_SCALE,n.CANVAS_SCALE),s.drawImage(e.canvas,o,r,i*t,a*t),s.restore()}}constructor(e){super(e),this.canvasBg=(0,i.createRef)()}}},140632:(e,t,r)=>{r.d(t,{StoryBackgroundCanvas:()=>s});var o=r(474848),i=r(296540),n=r(906110);class s extends i.PureComponent{componentDidUpdate(){this.drawImage()}render(){const{layer:e}=this.props,t=e.width*e.scale,r=e.height*e.scale;return(0,o.jsx)("canvas",{ref:this.canvasBg,width:t*n.CANVAS_SCALE,height:r*n.CANVAS_SCALE,style:{width:t,height:r}})}drawImage(){const{layer:e}=this.props,{current:t}=this.canvasBg,r=t?.getContext("2d");if(r){const t=e.width*e.scale,o=e.height*e.scale;r.drawImage(e.canvas,0,0,t*n.CANVAS_SCALE,o*n.CANVAS_SCALE)}}constructor(e){super(e),this.canvasBg=(0,i.createRef)()}}},800709:(e,t,r)=>{r.d(t,{CellList:()=>a});var o=r(474848),i=r(8520),n=r(410748);const s={s:n.default.gapS,m:n.default.gapM,l:n.default.gapL,xs:n.default.gapXs,xl:n.default.gapXl},a=({className:e,gap:t="m",children:r})=>{const a=(0,i.isNumber)(t)?{gap:t}:void 0;return(0,o.jsx)("div",{className:(0,i.classNames)(n.default.root,(0,i.isString)(t)&&s[t],e),style:a,children:r})}},902349:(e,t,r)=>{r.d(t,{CheckboxLike:()=>a});var o=r(474848),i=r(234337),n=r(753457),s=r(455878);const a=({type:e="radio",checked:t,label:r,icon:a,disabled:l=!1,...c})=>{const d=t?(0,o.jsx)(s.Icon24CheckCircleOn,{className:(0,i.getColorClass)("color_icon_accent")}):null,h=a||null;return(0,o.jsxs)(n.Cell,{Component:"label",before:h,after:d,disabled:l,children:[(0,o.jsx)(n.VisuallyHidden,{Component:"input",type:e,checked:t,...c}),r]})}},143919:(e,t,r)=>{r.d(t,{ClickableZones:()=>s});var o=r(474848),i=r(296540),n=r(909446);class s extends i.Component{render(){return this.props.isDev?this.props.clickableZones.map((({clickable_area:e},t)=>{const r=100*Math.abs(e[1].x-e[0].x),i=100*Math.abs(e[2].y-e[1].y);return(0,o.jsx)("div",{className:n.default.root,style:{top:100*e[0].y+"%",left:100*e[0].x+"%",width:`${r}%`,height:`${i}%`}},t)})):null}}},514751:(e,t,r)=>{r.d(t,{ColorPicker:()=>d});var o=r(474848),i=r(296540),n=r(291718),s=r(8520),a=r(303913),l=r(906110),c=r(366754);class d extends i.Component{shouldComponentUpdate(e){return JSON.stringify(e.avgColor)!==JSON.stringify(this.props.avgColor)&&(this.colors=this.getColors(e.avgColor)),!0}render(){return(0,o.jsx)("div",{className:c.default.root,children:this.colors.map(((e,t)=>{const r=e===this.props.color,i=(0,s.classNames)(c.default.item,"#FFFFFF"===e&&c.default.itemWhite);return(0,o.jsx)("div",{className:i,style:{backgroundColor:e},onClick:()=>this.props.setColor(e),children:r&&(0,o.jsx)(a.Icon24Done,{})},t)}))})}getColors(e){const t=(0,n.rgb2hsv)(e.r,e.g,e.b),r=[];return l.AVERAGE_COLORS_MAP.forEach((e=>{const o=Math.round(Math.min(Math.max(t.s+e.s,0),100)),i=Math.round(Math.min(Math.max(t.v+e.v,0),100));r.push((0,n.hsl2hex)(t.h,o,i).toUpperCase())})),(0,s.uniqueArray)([...l.COLORS,...r]).slice(0,30)}constructor(e){super(e),this.colors=this.getColors(e.avgColor)}}},56191:(e,t,r)=>{r.d(t,{DropBox:()=>a});var o=r(474848),i=r(296540),n=r(8520),s=r(789482);class a extends i.PureComponent{render(){const e=(0,n.classNames)(s.default.root,this.state.onHover&&s.default.hover);return(0,o.jsx)("div",{className:e,onMouseOver:()=>this.setState({onHover:!0}),onMouseOut:()=>this.setState({onHover:!1}),onMouseUp:this.props.onDelete,children:a.renderIcon()})}static renderIcon(){return(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",fill:"none",children:[(0,o.jsx)("path",{fill:"#fff",d:"M17.5 18.38a1 1 0 00-2 .24l1.8 15.23a3 3 0 002.98 2.65h9.44a3 3 0 002.98-2.65l1.8-15.23a1 1 0 10-2-.24l-1.78 15.24a1 1 0 01-1 .88h-9.44a1 1 0 01-1-.88L17.5 18.38z"}),(0,o.jsx)("path",{fill:"#fff",d:"M22 21.45a1 1 0 00-2 .1l.5 10a1 1 0 102-.1l-.5-10zm8 .1a1 1 0 00-2-.1l-.5 10a1 1 0 102 .1l.5-10zm-4-.05a1 1 0 10-2 0v10a1 1 0 002 0v-10z"}),(0,o.jsx)("path",{fill:"#fff",fillRule:"evenodd",d:"M20.62 16.5c.08-.35.2-.77.42-1.2.32-.64.8-1.19 1.38-1.59A4.55 4.55 0 0125 13c1.05 0 1.9.27 2.58.71.59.4 1.06.95 1.38 1.6.21.42.34.84.42 1.19H36a1 1 0 010 2H14a1 1 0 010-2h6.63zm6.68 0a2.9 2.9 0 00-.13-.3c-.16-.33-.4-.61-.7-.82-.31-.2-.77-.38-1.47-.38s-1.16.17-1.47.38c-.32.2-.54.5-.7.82-.05.1-.1.2-.13.3h4.6z",className:s.default.cap,clipRule:"evenodd"})]})}constructor(e){super(e),this.state={onHover:!1}}}},963239:(e,t,r)=>{r.d(t,{EditorMainMenu:()=>_});var o=r(474848),i=r(296540),n=r(8520),s=r(591707),a=r(800709),l=r(458849),c=r(431399),d=r(764391),h=r(339905),u=r(593724);const p=e=>{if(!e)return;const t=function(e){const t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>"INPUT"===e.tagName&&"hidden"===e.type?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}).nextNode();return t&&e.contains(t)?t:null}(e)||e;t instanceof HTMLElement&&t.focus({preventScroll:!0})};function g(e){const t=e.currentTarget;t&&t.scrollLeft>0&&(t.scrollLeft=0)}const _=({className:e,before:t,after:r,menuItems:_=[],activePanel:m,defaultActivePanel:f,onChange:S=n.noop})=>{const v=m||f||null,[E,T]=(0,i.useState)(v),w=void 0!==m?m:E,C=_.filter((e=>!e.disabled)),y=C.filter(c.isEditorSubMenuItem),x=w&&y.find((({key:e})=>e===w))||null,b=x?x.key:null,I=(0,i.useRef)(null),R=(0,d.useMenuRenderingLogic)(b),A=(0,i.useCallback)((e=>{setTimeout((()=>{const t=I.current,r=document.activeElement;t&&(!r||t===r||t.contains(r)||"INPUT"!==r.tagName&&"TEXTAREA"!==r.tagName)&&p(e)}),0)}),[]);function k(e){b!==e&&(T(e),S(e))}function N(e,t){e.target===e.currentTarget&&"transform"===e.propertyName&&R.onTransitionFinished(t)}return(0,o.jsxs)("div",{className:(0,n.classNames)(h.default.root,e),tabIndex:-1,onKeyDown:function(e){const t=null!=b&&"Escape"===e.key;!e.defaultPrevented&&t&&(k(null),e.preventDefault(),e.stopPropagation())},onScroll:g,ref:I,children:[R.panelsToRender.includes(null)&&(0,o.jsx)("div",{className:(0,n.classNames)(h.default.pane,R.panelsOnTheLeft.includes(null)&&h.default.prevPane),tabIndex:-1,onTransitionEnd:e=>N(e,null),ref:null===R.activePanel?A:void 0,children:(0,o.jsxs)(u.InertHelper,{inert:null!==R.activePanel,className:h.default.contentWrapper,children:[t&&(0,o.jsx)("div",{className:h.default.mainMenuBefore,children:t}),(0,o.jsx)("div",{className:h.default.mainMenuBody,children:(0,o.jsx)(s.ScrollableContainer,{fadeEffect:!0,className:h.default.scrollable,children:(0,o.jsx)(a.CellList,{gap:2,children:C.map((e=>(0,o.jsx)(l.EditorMainMenuItemView,{item:e,onNavigateTo:()=>k(e.key)},e.key)))})})}),r&&(0,o.jsx)("div",{className:h.default.mainMenuAfter,children:r})]})}),y.filter((({key:e})=>R.panelsToRender.includes(e))).map((e=>(0,o.jsx)("div",{className:(0,n.classNames)(h.default.pane,R.panelsOnTheLeft.includes(e.key)&&h.default.prevPane,R.panelsOnTheRight.includes(e.key)&&h.default.nextPane),tabIndex:-1,onTransitionEnd:t=>N(t,e.key),ref:R.activePanel===e.key?p:void 0,children:(0,o.jsx)(u.InertHelper,{inert:R.activePanel!==e.key,className:h.default.contentWrapper,children:e.panel})},e.key)))]})}},764391:(e,t,r)=>{r.d(t,{useMenuRenderingLogic:()=>n});var o=r(296540),i=r(610351);function n(e){const[t,r]=(0,o.useState)({currentPanelKey:e,lastPanelKey:null,isTransitioning:!1,currentPanelEntersFromTheRight:!0});let n=t;(0,i.useVariableUpdateTrackerSync)(e,((e,r)=>{const o=null===r;n={...n},n.currentPanelKey=r,n.lastPanelKey=e,n.isTransitioning=!0,o?n.currentPanelEntersFromTheRight=!1:t.isTransitioning?r!==t.lastPanelKey?n.currentPanelEntersFromTheRight=!0:n.currentPanelEntersFromTheRight=!t.currentPanelEntersFromTheRight:n.currentPanelEntersFromTheRight=!0}));const s=(0,o.useRef)(0);(0,o.useEffect)((()=>{if(n===t)return;const e=s.current,o=e+1<1e7?e+1:0;s.current=o;const i=()=>{r((e=>{const t=s.current;return t>o||o>8e6&&t<2e6?e:n}))};document.hidden?setTimeout(i,1e3/30*2):requestAnimationFrame((()=>requestAnimationFrame(i)))}),[n,t]);const a=e=>{const t=[e.currentPanelKey];return e.isTransitioning&&t.push(e.lastPanelKey),t},l=a(t),c=a(n),d=[...new Set([...l,...c])],h=[],u=[];return d.forEach((e=>{!l.includes(e)?n.currentPanelEntersFromTheRight?u.push(e):h.push(e):t.currentPanelKey!==e&&(t.currentPanelEntersFromTheRight?h.push(e):u.push(e))})),{activePanel:t.currentPanelKey,panelsToRender:d,panelsOnTheLeft:h,panelsOnTheRight:u,onTransitionFinished:e=>{n.currentPanelKey===e&&r((e=>e.isTransitioning||null!=e.lastPanelKey?{...e,lastPanelKey:null,isTransitioning:!1}:e))}}}},458849:(e,t,r)=>{r.d(t,{EditorMainMenuItemView:()=>S});var o=r(474848),i=r(296540),n=r(8520),s=r(753457),a=r(445248),l=r(488880),c=r(828902),d=r(569658),h=r(380118),u=r(234337),p=r(852485),g=r(929514);const _=e=>(0,o.jsx)(a.SimpleCell,{"data-testid":`pH${e.dataId}`,before:e.icon,onClick:()=>e.onClick(),children:(0,o.jsx)("span",{className:g.default.caption,children:e.label})}),m=e=>(0,o.jsx)(a.SimpleCell,{"data-testid":`pH${e.dataId}`,Component:"label",before:e.icon,after:(0,o.jsx)(s.Switch,{checked:e.active,onChange:t=>{e.onChange(t.currentTarget.checked)}}),children:(0,o.jsx)("span",{className:g.default.caption,children:e.label})}),f=e=>{const t=(0,p.useLangMap)();let r=e.icon;e.loading&&(r=(0,o.jsx)(l.FakeIcon,{"data-testid":`pH${e.dataId}`,size:20,children:(0,o.jsx)("div",{className:g.default.spinnerWrapper,children:(0,o.jsx)(c.Spinner,{size:"small"})})}));return(0,o.jsxs)(a.SimpleCell,{Component:"label",before:r,disabled:e.loading,children:[(0,o.jsx)(s.VisuallyHidden,{Component:"input",type:"checkbox",checked:e.active,readOnly:e.loading,onChange:t=>{if(e.loading)return t.preventDefault(),!1;e.onChange(t.currentTarget.checked)}}),(0,o.jsx)("span",{className:(0,n.classNames)(g.default.caption,e.active&&g.default.complexCaption,e.loading&&g.default.visuallyMuted),children:e.active?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:g.default.shrinkable,children:e.labelActive}),(0,o.jsx)(d.InterpunctSeparator,{}),(0,o.jsx)("span",{className:g.default.cancelButtonWrapper,children:(0,o.jsx)(h.Headline,{Component:"span",weight:"2",normalize:!1,children:(0,o.jsx)("div",{className:g.default.cancelButton,children:t?.photos_pe_cancel})})})]}):e.label})]})},S=({item:{key:e,disabled:t,icon:r,...s},onNavigateTo:a})=>{if(t)return null;const l=(0,u.getColorClass)("color_icon_secondary"),c=(0,i.isValidElement)(r)?(0,i.cloneElement)(r,{className:(0,n.classNames)(r.props.className,l)}):r;switch(s.type){case"submenu":return(0,o.jsx)(_,{icon:c,dataId:e,...s,onClick:a});case"toggle":return(0,o.jsx)(m,{icon:c,dataId:e,...s});case"action_cancellable":return(0,o.jsx)(f,{icon:c,dataId:e,...s})}}},431399:(e,t,r)=>{function o(e){return"submenu"===e.type}r.d(t,{isEditorSubMenuItem:()=>o})},610351:(e,t,r)=>{r.d(t,{useMutableObject:()=>n,useVariableUpdateTrackerSync:()=>i});var o=r(296540);function i(e,t){const r=(0,o.useRef)(e),i=r.current,n=e;i!==n&&t(i,n),(0,o.useEffect)((()=>{r.current=n}),[n])}function n(e){return(0,o.useRef)(e).current}},727227:(e,t,r)=>{r.d(t,{EditorTabs:()=>f});var o=r(474848),i=r(296540),n=r(8520),s=r(753457),a=r(765668),l=r(611026),c=r(390768),d=r(16547),h=r(215588),u=r(430571),p=r(741583),g=r(815254),_=r(159907),m=r(906110);class f extends i.Component{render(){return(0,o.jsxs)("div",{className:l.default.root,children:[(0,o.jsx)("div",{className:l.default.header,children:i.Children.map(this.props.children,(e=>{if((0,i.isValidElement)(e))return this.getHeaderItem(e)}))}),(0,o.jsx)("div",{className:l.default.content,children:i.Children.map(this.props.children,(e=>{if((0,i.isValidElement)(e))return this.getTabContentItem(e)}))})]})}static getIcon(e){let t;switch(e){case m.TABS.STICKERS:t=(0,o.jsx)(c.Icon24SmileOutline,{});break;case m.TABS.TEXT:t=(0,o.jsx)(d.Icon24TextOutline,{});break;case m.TABS.PAINT:t=(0,o.jsx)(h.Icon24BrushOutline,{});break;case m.TABS.CROP:t=(0,o.jsx)(u.Icon24Crop,{});break;case m.TABS.COLOR:t=(0,o.jsx)(p.Icon24Filter,{});break;case m.TABS.FILTERS:t=(0,o.jsx)(g.Icon24ImageFilterOutline,{});break;case m.TABS.SEGMENTATION:t=(0,o.jsx)(_.Icon24AddCircleDottedOutline,{})}return t}constructor(){super(...arguments),this.getHeaderItem=e=>{const t=e.props["data-disabled"],r=(0,n.classNames)(l.default.item,this.props.current===e.props["data-mode"]&&l.default.itemCurrent,t&&l.default.itemDisabled),i=(0,o.jsx)("div",{className:r,onClick:()=>this.onTabClick(e.props["data-mode"],t),children:f.getIcon(e.props["data-mode"])},e.props["data-mode"]);if(t){const e=(0,o.jsxs)("div",{className:l.default.tooltip,children:[(0,o.jsx)("span",{className:l.default.tooltipText,children:this.props.langMap?.photos_pe_filters_disabled_text}),(0,o.jsx)(a.Link,{onClick:()=>this.props.setMode(m.BACKGROUND_MODES.PHOTO),children:this.props.langMap?.photos_pe_filters_disabled_button})]});return(0,o.jsx)(s.Tooltip,{text:e,children:i})}return i},this.getTabContentItem=e=>{const t=(0,n.classNames)(e.props.className,l.default.tab,this.props.current===e.props["data-mode"]&&l.default.tabCurrent);return(0,i.cloneElement)(e,{className:t})},this.onTabClick=(e,t)=>{t||this.props.change(e)}}}},637409:(e,t,r)=>{r.d(t,{EditorText:()=>d});var o=r(474848),i=r(296540),n=r(8520),s=r(906110),a=r(291718),l=r(802320);const c="editor-text-inner";class d extends i.Component{componentDidUpdate(e){e.layer.fontSize===this.props.layer.fontSize&&e.layer.fontStyle===this.props.layer.fontStyle||this.onChange()}constructor(e){super(e),this.componentDidMount=()=>{const{current:e}=this.textareaEl;e&&(this.onChange(),e.select())},this.render=()=>{const{layer:e}=this.props;let t=Math.max(10,e.fontSize*s.FONT_SIZE_COEFFICIENT);return e.initialFontSize&&(t=e.initialFontSize*s.FONT_SIZE_COEFFICIENT),(0,o.jsx)("div",{className:l.default.root,children:(0,o.jsx)("div",{className:l.default.inner,"data-name":c,children:(0,o.jsx)("textarea",{ref:this.textareaEl,className:(0,n.classNames)(l.default.textArea,(0,a.getComputedFontFamily)(e.fontStyle)),defaultValue:(0,n.decodeHTMLEntities)(e.text).replace(/(\v)/gm,""),autoFocus:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,onInput:this.onChange,onPaste:this.onChange,style:{color:e.color,fontSize:t,height:this.state.height}})})})},this.onKeyDown=e=>{if("Enter"===e.key)if(e.preventDefault(),e.stopPropagation(),e.ctrlKey||e.metaKey||e.shiftKey){const{current:t}=this.textareaEl;if(t){const r=e.target.selectionStart,o=e.target.selectionEnd;t.value=t.value.substring(0,r)+"\n"+t.value.substring(o),t.selectionStart=t.selectionEnd=r+1,this.onChange()}}else this.props.closeTextEditor()},this.onChange=()=>{const{current:e}=this.textareaEl;e&&(this.setState({height:0},(()=>{this.setState({height:e.scrollHeight})})),this.props.onChange(this.applyLineBreaks(e)))},this.applyLineBreaks=e=>{const t=e.value,r=e.cloneNode(!0);document.querySelector(`[data-name="${c}"]`).appendChild(r),r.setAttribute("wrap","off"),r.value="";const o=r.scrollWidth;for(let e=0,i=-1;e<t.length;e++){const n=t.charAt(e);if(" "!==n&&"-"!==n&&"+"!==n||(i=e),r.value+=n,r.scrollWidth>o){let o="";if(i>=0){for(let r=i+1;r<e;r++)o+=t.charAt(r);i=-1}o+=n,r.value=r.value.substr(0,r.value.length-o.length),r.value+="\n\v"+o}}return r.remove(),r.value.replace(/(\n\v)/gm,"\v")},this.state={height:0},this.textareaEl=(0,i.createRef)(),(0,n.isFunction)(this.props.sendStat)&&this.props.sendStat("edit_text")}}},593724:(e,t,r)=>{r.d(t,{InertHelper:()=>s});var o=r(474848),i=r(296540),n=r(8520);const s=({inert:e,Component:t="span",className:r,children:s})=>{const a=(0,i.useRef)(null);return(0,i.useLayoutEffect)((()=>{const t=a.current;null!=t&&(e?t.setAttribute("inert",""):t.removeAttribute("inert"))}),[e]),(0,o.jsx)(t,{className:(0,n.classNames)(r),ref:a,children:s})}},561583:(e,t,r)=>{r.d(t,{Layer:()=>m,layerSelector:()=>_});var o=r(474848),i=r(296540),n=r(440961),s=r(655461),a=r(503499),l=r(143919),c=r(8520),d=r(906110),h=r(291718),u=r(280442),p=r(532265),g=r(140632);const _="editor-layer";class m extends i.Component{render(){const{layer:e,index:t}=this.props;let r=null;const o=(0,c.classNames)(u.default.root,e.locked&&u.default.locked,e.type===d.LAYER_TYPES.TEXT&&(0,h.getComputedFontFamily)(e.fontStyle));switch(e.type){case d.LAYER_TYPES.STICKER:r=this.renderLayerSticker(e,t,o);break;case d.LAYER_TYPES.TEXT:r=this.renderLayerText(e,t,o);break;case d.LAYER_TYPES.IMAGE:r=this.renderLayerImage(e,t,o);break;case d.LAYER_TYPES.BACKGROUND:r=this.props.context===d.CONTEXT_TYPES.STORY?this.renderStoriesLayerBackground(e,t,o):this.renderPhotoLayerBackground(e,t)}if(e.isBackground){const e=document.querySelector(`[data-name="${p.layersSelector}"`);return e?n.createPortal(r,e):null}return r}renderStoriesLayerBackground(e,t,r){return(0,o.jsx)("div",{"data-name":_,className:r,"data-index":t,style:{width:1,height:1,transform:`translate(${e.x}px, ${e.y}px) rotateZ(${e.rotate}deg)`},children:(0,o.jsxs)("div",{className:u.default.inner,"data-name":_,children:[(0,o.jsx)(g.StoryBackgroundCanvas,{layer:e}),this.props.currentIndex===t&&(0,o.jsx)(a.LayerControls,{layer:e,setLayerScale:this.props.setLayerScale,startLayerScale:this.props.startLayerScale,globalScale:1,shiftX:0,shiftY:0,isNewUi:this.isNewUi()})]})},t)}renderPhotoLayerBackground(e,t){const{globalScale:r,shiftY:i,shiftX:n}=this.props;return(0,o.jsxs)("div",{"data-name":_,"data-index":t,children:[(0,o.jsx)(s.BackgroundCanvas,{layer:e,globalScale:r,shiftX:n,shiftY:i}),this.props.currentIndex===t&&(0,o.jsx)(a.LayerControls,{layer:e,setLayerScale:this.props.setLayerScale,startLayerScale:this.props.startLayerScale,globalScale:this.props.globalScale,shiftX:this.props.shiftX,shiftY:this.props.shiftY,isNewUi:this.isNewUi()})]},t)}renderLayerSticker(e,t,r){const{disabled:i,getStickerUrlById:n,globalScale:s,shiftY:l,shiftX:h,deleteLayerAction:p}=this.props,g=e.width*e.scale*(s/e.baseScale),m=e.height*e.scale*(s/e.baseScale),f=n(e.id,+d.STICKER_MEDIUM),S=n(e.id,d.STICKER_LARGE),v=this.largeStickerLoaded===S;return(0,o.jsx)("div",{"data-name":_,className:r,"data-index":t,style:{width:1,height:1,transform:`translate(${e.x*s+h}px, ${e.y*s+l}px) rotateZ(${e.rotate}deg)`},children:(0,o.jsxs)("div",{className:(0,c.classNames)(u.default.inner,i&&u.default.innerDisabled),"data-name":_,style:{width:g,height:m},children:[(0,o.jsx)("img",{src:S,alt:"",className:(0,c.classNames)(u.default.img,!v&&u.default.imgHidden),crossOrigin:"anonymous",onLoad:()=>{this.largeStickerLoaded=S,this.forceUpdate()}}),(0,o.jsx)("img",{src:f,alt:"",className:(0,c.classNames)(u.default.img,v&&u.default.imgHidden)}),this.props.currentIndex===t&&(0,o.jsx)(a.LayerControls,{layer:e,setLayerScale:this.props.setLayerScale,startLayerScale:this.props.startLayerScale,globalScale:this.props.globalScale,shiftX:this.props.shiftX,shiftY:this.props.shiftY,isNewUi:this.isNewUi(),deleteIconCb:()=>p()})]})},t)}renderLayerImage(e,t,r){const{disabled:i,globalScale:n}=this.props;return(0,o.jsx)("div",{"data-name":_,className:r,"data-index":t,style:{width:1,height:1,transform:`translate(${e.x}px, ${e.y}px) rotateZ(${e.rotate}deg)`},children:(0,o.jsxs)("div",{className:(0,c.classNames)(u.default.inner,i&&u.default.innerDisabled),"data-name":_,style:{width:e.width*e.scale,height:e.height*e.scale,backgroundImage:`url('${e.url}')`},children:[this.props.currentIndex===t&&(0,o.jsx)(a.LayerControls,{layer:e,setLayerScale:this.props.setLayerScale,startLayerScale:this.props.startLayerScale,globalScale:n,shiftX:this.props.shiftX,shiftY:this.props.shiftY,isNewUi:this.isNewUi()}),e.clickableZones&&(0,o.jsx)(l.ClickableZones,{clickableZones:e.clickableZones})]})},t)}renderLayerText(e,t,r){const{disabled:i,globalScale:n,shiftY:s,shiftX:l,deleteLayerAction:h}=this.props,p={fontSize:Math.max(10,e.fontSize*d.FONT_SIZE_COEFFICIENT)*e.scale*(n/e.baseScale),color:e.color};return this.props.currentIndex===t&&e.isEdit?null:(0,o.jsx)("div",{"data-name":_,className:r,"data-index":t,style:{width:1,height:1,transform:`translate(${e.x*n+l}px, ${e.y*n+s}px) rotateZ(${e.rotate}deg)`},children:(0,o.jsxs)("div",{className:(0,c.classNames)(u.default.inner,i&&u.default.innerDisabled),"data-name":_,style:p,onDoubleClick:this.handleDoubleClick,children:[(0,o.jsx)("div",{children:(0,c.decodeHTMLEntities)(e.text.replace(/(\v)/gm,"\n"))}),this.props.currentIndex===t&&(0,o.jsx)(a.LayerControls,{layer:e,setLayerScale:this.props.setLayerScale,startLayerScale:this.props.startLayerScale,globalScale:this.props.globalScale,shiftX:this.props.shiftX,shiftY:this.props.shiftY,isNewUi:this.isNewUi(),deleteIconCb:()=>h()})]})},t)}isNewUi(){return!0===this.props.isRedesignEnabled}constructor(){super(...arguments),this.largeStickerLoaded=null,this.handleDoubleClick=()=>{this.props.toggleTextEditor(!0)}}}},503499:(e,t,r)=>{r.d(t,{LayerControls:()=>p});var o=r(474848),i=r(296540),n=r(291718),s=r(906110),a=r(8520),l=r(745286),c=r(561583),d=r(552819),h=r(533048),u=r(923699);class p extends i.Component{render(){const{isNewUi:e=!1,deleteIconCb:t}=this.props;return(0,o.jsxs)("div",{className:(0,a.classNames)(l.default.root,e&&l.default.rootNewUi),children:[(0,o.jsx)("div",{className:(0,a.classNames)(l.default.handler,l.default.handlerNw,e&&l.default.handlerNewUi),onMouseDown:e=>this.controlMouseDown(e,"nw")}),(0,o.jsx)("div",{className:(0,a.classNames)(l.default.handler,l.default.handlerNe,e&&l.default.handlerNewUi),onMouseDown:e=>this.controlMouseDown(e,"ne")}),(0,o.jsx)("div",{className:(0,a.classNames)(l.default.handler,l.default.handlerSw,e&&l.default.handlerNewUi),onMouseDown:e=>this.controlMouseDown(e,"sw")}),(0,o.jsx)("div",{className:(0,a.classNames)(l.default.handler,l.default.handlerSe,e&&l.default.handlerNewUi),onMouseDown:e=>this.controlMouseDown(e,"se")}),e&&(0,a.isFunction)(t)&&(0,o.jsx)("div",{className:l.default.handlerDeleteIcon,children:(0,o.jsx)(h.Button,{mode:"primary",appearance:"overlay",size:"s",onClick:t,before:(0,o.jsx)(u.Icon16DeleteOutline,{color:"black"})})})]})}componentWillUnmount(){this.removeEventListeners()}removeEventListeners(){window.removeEventListener("mousemove",this.controlMouseMove),window.removeEventListener("mouseup",this.controlMouseUp),window.removeEventListener("blur",this.controlMouseUp),delete this.width,delete this.height,delete this.centerCoordinates,delete this.offsetFromCenter,delete this.distanceToZero}constructor(){super(...arguments),this.controlMouseDown=(e,t)=>{if(!(e.button>0)){if(e.preventDefault(),e.stopPropagation(),this.props.startLayerScale(),this.layer=this.props.layer,this.layer.type===s.LAYER_TYPES.TEXT){const t=e.target.closest(`[data-name="${c.layerSelector}"]`);if(!t)return;this.width=t.offsetWidth/this.layer.scale,this.height=t.offsetHeight/this.layer.scale}else this.width=this.layer.width*this.props.globalScale/this.layer.baseScale,this.height=this.layer.height*this.props.globalScale/this.layer.baseScale;if(void 0!==this.width&&void 0!==this.height){switch(window.addEventListener("mousemove",this.controlMouseMove),window.addEventListener("mouseup",this.controlMouseUp),window.addEventListener("blur",this.controlMouseUp),t){case"se":this.offsetFromCenter={x:this.width/2,y:this.height/2};break;case"sw":this.offsetFromCenter={x:-this.width/2,y:this.height/2};break;case"ne":this.offsetFromCenter={x:this.width/2,y:-this.height/2};break;case"nw":this.offsetFromCenter={x:-this.width/2,y:-this.height/2}}void 0!==this.offsetFromCenter&&(this.distanceToZero=Math.sqrt(this.offsetFromCenter.x*this.offsetFromCenter.x+this.offsetFromCenter.y*this.offsetFromCenter.y))}}},this.controlMouseMove=e=>{const{x:t,y:r}=(0,n.getRelativeXY)(e,document.querySelector(`[data-name="${d.drawingLayerSelector}"]`));if(void 0===this.offsetFromCenter||void 0===this.distanceToZero||void 0===this.width||void 0===this.height)return;const o={x:t-(this.layer?.x||0)*this.props.globalScale-this.props.shiftX,y:r-(this.layer?.y||0)*this.props.globalScale-this.props.shiftY},i=180*(Math.atan2(o.y,o.x)-Math.atan2(this.offsetFromCenter.y,this.offsetFromCenter.x))/Math.PI,a=Math.max(s.LAYER_MIN_SIZE,Math.sqrt(o.x*o.x+o.y*o.y))/this.distanceToZero;this.props.setLayerScale(a,i)},this.controlMouseUp=()=>{this.removeEventListeners()}}}},532265:(e,t,r)=>{r.d(t,{Layers:()=>h,layersSelector:()=>c});var o=r(474848),i=r(296540),n=r(561583),s=r(8520),a=r(906110),l=r(607848);const c="photo-editor-image-layer-bg",d=[a.TABS.PAINT,a.TABS.FILTERS,a.TABS.BLUR,a.TABS.COLOR,a.TABS.CROP,a.TABS.SEGMENTATION,a.TABS.COLLAGE];class h extends i.Component{render(){const{isRedesignEnabled:e}=this.props,{items:t,currentIndex:r,shiftX:i,shiftY:a}=this.props.layers,h=d.includes(this.props.currentMode);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:(0,s.classNames)(l.default.root,l.default.items),children:t.map(((t,s)=>(0,o.jsx)(n.Layer,{index:s,currentIndex:r,layer:t,setLayerScale:this.props.setLayerScale,startLayerScale:this.props.startLayerScale,toggleTextEditor:this.props.toggleTextEditor,getStickerUrlById:this.props.getStickerUrlById,deleteLayerAction:this.props.deleteLayerAction,globalScale:this.props.globalScale,shiftX:i,shiftY:a,disabled:h,context:this.props.context,isRedesignEnabled:e},s)))}),(0,o.jsx)("div",{className:(0,s.classNames)(l.default.root,l.default.background),"data-name":c})]})}}},214211:(e,t,r)=>{r.d(t,{NewColorPicker:()=>c});var o=r(474848),i=r(296540),n=r(8520),s=r(189830),a=r(291718),l=r(906110);const c=({className:e,colors:t,currentColor:r,onClick:c,avgColor:d})=>{const h=(0,i.useRef)(null);let u=!1;const p=(0,i.useMemo)((()=>{if(!d)return t;const e=(0,a.rgb2hsv)(d.r,d.g,d.b),r=[];return l.AVERAGE_COLORS_MAP.forEach((t=>{const o=Math.round(Math.min(Math.max(e.s+t.s,0),100)),i=Math.round(Math.min(Math.max(e.v+t.v,0),100));r.push((0,a.hsl2hex)(e.h,o,i).toUpperCase())})),(0,n.uniqueArray)([...l.COLORS,...r]).slice(0,30)}),[t,d]),g=e=>(0,o.jsx)("button",{"data-testid":`ph${e}`,className:(0,n.classNames)(s.default.item,e===r&&s.default.itemCurrent),style:{backgroundColor:e},onClick:()=>c(e)},e),_=p.map((e=>(e===r&&(u=!0),g(e))));return u||null==r||(h.current=r),(0,o.jsxs)("div",{className:(0,n.classNames)(s.default.root,e),children:[_,h.current?g(h.current):null]})}},195165:(e,t,r)=>{r.d(t,{PEFormItem:()=>l});var o=r(474848),i=r(278374),n=r(529558),s=r(753457),a=r(619032);const l=({children:e,label:t,after:r,hiddenLabel:l,...c})=>{const d=(0,o.jsx)("span",{className:a.default.aside,"aria-hidden":!0,children:r}),h=(0,o.jsx)(i.FormItemLabel,{aside:null!=r?d:null,children:(0,o.jsx)("div",{className:a.default.labelText,children:t})});return(0,o.jsx)(n.FormItem,{top:l?(0,o.jsx)(s.VisuallyHidden,{children:h}):h,...c,children:e})}},591707:(e,t,r)=>{r.d(t,{ScrollableContainer:()=>l});var o=r(474848),i=r(296540),n=r(8520),s=r(569206),a=r(821174);const l=({className:e,fadeEffect:t,padded:r,getRootRef:l,children:c})=>{const d=(0,i.useRef)(null),h=(0,i.useRef)(null),u=(0,i.useRef)(null),p=(0,a.useMergedRefCallback)(u,l),g=(0,i.useRef)(!1),[_,m]=(0,i.useState)(!1),[f,S]=(0,i.useState)(!1);(0,i.useLayoutEffect)((()=>{const e=u.current;if(t&&e){if("undefined"==typeof IntersectionObserver){const t={passive:!0},o=()=>{const{scrollTop:t,scrollHeight:o,clientHeight:i}=e;m(t>2),S(Math.abs(o-i-t)>2),r()};return o(),e.addEventListener("scroll",o,t),()=>e.removeEventListener("scroll",o,t)}{const t=d.current,o=h.current,i=new IntersectionObserver((e=>{e.forEach((e=>{switch(e.target){case t:return m(!e.isIntersecting);case o:return S(!e.isIntersecting)}})),r()}),{root:e});return t&&i.observe(t),o&&i.observe(o),()=>i.disconnect()}}function r(){requestAnimationFrame((()=>{g.current=!0}))}}),[t]);const v=g.current,E=(0,n.classNames)(s.default.scrollable,t&&s.default.fadeout,_&&s.default.fadeoutTop,f&&s.default.fadeoutBottom,!v&&s.default.fadeoutInstant,e);return(0,o.jsxs)("div",{className:E,ref:p,tabIndex:-1,children:[(0,o.jsx)("span",{className:s.default.scrollDetector,ref:d}),(0,o.jsx)("div",{className:(0,n.classNames)(s.default.content,r&&s.default.contentPadded),children:c}),(0,o.jsx)("span",{className:s.default.scrollDetector,ref:h})]})}},821174:(e,t,r)=>{function o(e,t){return r=>{[e,t].forEach((e=>{e&&("function"==typeof e?e(r):e.current=r)}))}}r.d(t,{useMergedRefCallback:()=>o})},141979:(e,t,r)=>{r.d(t,{StickerList:()=>d});var o=r(474848),i=r(296540),n=r(753457),s=r(8520),a=r(906110),l=r(291718),c=r(749190);const d=({className:e,stickers:t,onClick:r,canUseDarkVersions:d=!1,forceUseDarkVersions:h=!1,corsPolicy:u})=>{const p=(0,i.useRef)([]),g="dark"===(0,n.useAppearance)()&&d||h,_=t.map(((e,t)=>{const i=(0,l.getStickerSize)(e.sizes,a.STICKER_MEDIUM,g);return(0,o.jsx)("button",{className:c.default.sticker,onClick:t=>{0===t.screenX&&0===t.screenY&&r(t,e.id),t.preventDefault()},onMouseDown:t=>{0===t.button&&(r(t,e.id),t.preventDefault())},"aria-label":"Add sticker",children:(0,o.jsx)("img",{"data-src":i,alt:"","aria-hidden":!0,className:c.default.stickerImage,crossOrigin:u,draggable:!1,ref:e=>{null!==e&&(p.current[t]=e)}})},t)}));return(0,i.useEffect)((()=>{const e=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting&&e.target instanceof HTMLImageElement&&(e.target.src=e.target.dataset?.src||"")}))}));return p.current.forEach((function(t){e.observe(t)})),()=>{e.disconnect()}}),[]),(0,i.useMemo)((()=>(0,o.jsx)("div",{className:(0,s.classNames)(c.default.root,e),children:_})),[t,d,h,u])}},765159:(e,t,r)=>{r.d(t,{SwitchMode:()=>h,switchModeSelector:()=>d});var o=r(474848),i=r(296540),n=r(8520),s=r(390147),a=r(906110),l=r(48226),c=r(777478);const d="switch-mode";class h extends i.PureComponent{render(){return(0,o.jsx)("div",{className:c.default.root,"data-name":d,children:Object.values(a.BACKGROUND_MODES).map((e=>{if(!this.props.allowBackgroundChange&&e===a.BACKGROUND_MODES.BACKGROUND)return null;const t=e===this.props.current,r=(0,n.classNames)(c.default.mode,t&&c.default.modeActive);return(0,o.jsx)("span",{className:r,onClick:()=>this.setMode(e),children:this.getBackgroundIcon(e)},e)}))})}getBackgroundIcon(e){return e===a.BACKGROUND_MODES.PHOTO?(0,o.jsx)(s.Icon28CameraOutline,{}):e===a.BACKGROUND_MODES.BACKGROUND?(0,o.jsx)(l.SwitchModeIcon,{className:c.default.icon}):null}constructor(){super(...arguments),this.setMode=e=>{(0,n.isFunction)(this.props.sendStat)&&e===a.BACKGROUND_MODES.BACKGROUND&&this.props.sendStat("click_to_gradient_icon"),this.props.setMode(e)}}}},48226:(e,t,r)=>{r.d(t,{SwitchModeIcon:()=>n});var o=r(474848);const i={xmlns:"http://www.w3.org/1999/xhtml"},n=e=>(0,o.jsxs)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",...e,children:[(0,o.jsxs)("defs",{children:[(0,o.jsx)("circle",{id:"photo-editor-gradient-icon-background__circle",cx:"12",cy:"12",r:"11"}),(0,o.jsx)("clipPath",{id:"photo-editor-gradient-icon-background__clip",children:(0,o.jsx)("use",{xlinkHref:"#photo-editor-gradient-icon-background__circle"})})]}),(0,o.jsx)("use",{xlinkHref:"#photo-editor-gradient-icon-background__circle",fill:"#FD5C5C"}),(0,o.jsx)("foreignObject",{width:"24",height:"24",clipPath:"url(#photo-editor-gradient-icon-background__clip)",children:(0,o.jsx)("div",{...i,style:{width:24,height:24,background:"conic-gradient(from 90deg at 50% 50%, #FF9161 0deg, #FD5C5C 31.14deg, #FE77C4 72.38deg, #C47EFF 119.66deg, #508DFA 160.51deg, #5FE3FF 206.24deg, #50E98E 248.92deg, #FFED63 293.99deg, #FFB063 341.15deg, #FF9261 359.9deg)"}})}),(0,o.jsx)("use",{xlinkHref:"#photo-editor-gradient-icon-background__circle",stroke:"#fff",strokeWidth:"2"})]})},906110:(e,t,r)=>{r.d(t,{AVERAGE_COLORS_MAP:()=>l,BACKGROUND_MODES:()=>n,BLUR_TYPES:()=>h,BOTTOM_PANEL_HEIGHT:()=>E,BRUSH_WIDTH_COEFFICIENT:()=>x,CANVAS_SCALE:()=>T,COLORS:()=>s,COLORS_NEW:()=>a,CONTEXT_TYPES:()=>p,CROP_ASPECTS:()=>f,CROP_ASPECT_FREE:()=>_,CROP_ASPECT_ORIGINAL:()=>m,CROP_MIN_SIZE:()=>D,CROP_SIDES:()=>g,DRAWING_PREVIEW_HEIGHT:()=>O,DRAWING_PREVIEW_WIDTH:()=>P,FILTER_PREVIEW_HEIGHT:()=>k,FILTER_PREVIEW_HEIGHT_NEW_UI:()=>L,FILTER_PREVIEW_WIDTH:()=>A,FILTER_PREVIEW_WIDTH_NEW_UI:()=>N,FONTS:()=>c,FONT_SIZE_COEFFICIENT:()=>b,LAYER_DEFAULT_SIZE:()=>R,LAYER_MIN_SIZE:()=>I,LAYER_TYPES:()=>u,PHOTO_FILTERS:()=>d,STICKER_LARGE:()=>y,STICKER_MEDIUM:()=>C,STICKER_THUMB:()=>w,STORY_BASE_HEIGHT:()=>v,STORY_BASE_WIDTH:()=>S,TABS:()=>i});var o=r(8520);const i={AUTO_COLORS:"color_correction_auto",IMAGE_UPSCALE:"upscale_source_image",STICKERS:"stickers",TEXT:"text",PAINT:"paint",CROP:"crop",FILTERS:"filters",COLOR:"color",SEGMENTATION:"segmentation",BLUR:"blur",COLLAGE:"collage"},n={PHOTO:"photo",BACKGROUND:"background"},s=["#FFFFFF","#000000","#FF3301","#FF8C49","#F9D827","#2EBA48","#4189E8","#9F4BED","#69E4B3","#FF84A0","#F7A978","#F8786C","#8B3232","#93B658","#556E35","#5B4490","#1B1B1B","#333333","#4D4D4D","#666666","#808080","#999999","#B3B3B3","#CCCCCC"],a=["#FFFFFF","#181919","#AFA399","#3F8AE0","#22BD8A","#FAC725","#FF5773","#A393F5","#925CFF","#FA60A3","#FF8000","#B1E718","#7AD3FF","#585F67","#DAD1CA","#EDEFF4"],l=[{s:12,v:-40},{s:9,v:-30},{s:6,v:-20},{s:3,v:-10},{s:0,v:0},{s:-3,v:10},{s:-6,v:20},{s:-9,v:30},{s:-12,v:40}],c=["classic","cursive","marker","italics","typewriter","poster","retro","impact","lobster"],d=["regular","nox","vesper","latona","liber","luna","minerva","mitra","pro","terra","veles","vesta","zaria","sepia","genius","horus","fortuna"],h={ROUND:"round",RECTANGULAR:"rectangular"},u={STICKER:"sticker",TEXT:"text",IMAGE:"image",BACKGROUND:"background",STORY_BACKGROUND:"story_background"},p={PHOTO:"photo",STORY:"story"},g={CENTER:"center",NW:"nw",NE:"ne",SW:"sw",SE:"se",N:"n",S:"s",W:"w",E:"e"},_=0,m=-1,f=[{title:"photos_pe_crop_aspect_free",value:_},{title:"photos_pe_crop_aspect_original",value:m},{title:"photos_pe_crop_aspect_16_9",value:16/9},{title:"photos_pe_crop_aspect_4_3",value:4/3},{title:"photos_pe_crop_aspect_1_1",value:1},{title:"photos_pe_crop_aspect_3_4",value:3/4},{title:"photos_pe_crop_aspect_9_16",value:9/16}],S=1080,v=1920,E=50,T=(0,o.isRetina)()?2:1,w="thumb",C=(0,o.isRetina)()?"256":"128",y=512,x=40,b=100,I=30,R=128,A=127,k=95,N=40,L=40,P=270,O=110,D=100},585721:(e,t,r)=>{r.d(t,{BaseEditor:()=>ee});var o=r(474848),i=r(296540),n=r(8520),s=r(757550),a=r(533048),l=r(828902),c=r(506996),d=r(503618),h=r(38145),u=r(196058),p=r(775633),g=r(318659),_=r(922679),m=r(404245),f=r(906110),S=r(77755),v=r(727227),E=r(352207),T=r(210725),w=r(478067),C=r(845471),y=r(996879),x=r(884035),b=r(60920),I=r(291718),R=r(350944),A=r(23021),k=r(474477),N=r(574614),L=r(366765),P=r(324279),O=r(343302),D=r(667688),M=r(579605),B=r(738877),F=r(552819),H=r(765159),U=r(561583),j=r(931977),W=r(587199),G=r(982139),z=r(443363),Y=r(144187),V=r(645203),X=r(886065),K=r(335871),Z=r(160952),q=r(967193),$=r(501644);class Q extends i.Component{setBackground({advice_gradients:e,colors:t},r,o=!0){let i=f.BACKGROUND_MODES.PHOTO;this.props.data.context===f.CONTEXT_TYPES.STORY&&(i=this.props.data.photoUrl?f.BACKGROUND_MODES.PHOTO:f.BACKGROUND_MODES.BACKGROUND),this.props.setBackgroundType(i,o),this.props.data.photoUrl&&this.props.setCurrentPhotoUrl(this.props.data.photoUrl,o);const n=[...e,...t];let s;const a=this.props?.stickers?.find((e=>"native"===e.sticker_type&&"situational_template"===e.sticker.action_type)),l=(0,L.nativeStickerTypeGuard)(a)&&(0,L.situationalTemplateTypeGuard)(a.sticker);if(r)s=r;else{const e=Math.floor(Math.random()*n.length);s=n[e]?.id||0}if(l){const e=n.find((e=>"#585F67"===e.background));e&&(s=e.id)}return this.props.setCurrentBackgroundId(s,o),s}renderSidebar(){return!!this.props.data?.isRedesignEnabled?this.renderNewSidebarContents():this.renderOldSidebarContents()}renderNewSidebarContents(){const e=this.props.data,{addons:t}=e,r=Boolean(t)&&!t.canEdit,i=!!e.disableCrop||e.context===f.CONTEXT_TYPES.STORY;return(0,o.jsx)(Z.MainMenu,{enableCrop:!i,stickersTab:this.renderStickersTab(),allowAutoColorCorrection:!0,allowUpscaling:this.canUpscaleImage(),onAutoColorCorrectionToggle:this.toggleAutoColorCorrection,onUpscaleToggle:this.toggleUpscaleImage,onMenuItemClicked:this.handleMenuItemClicked,after:r?(0,o.jsx)("span",{className:D.default.menuAfterLabel,children:e.langMap?.photos_will_be_saved_to_pe_album}):null})}canUpscaleImage(){const{enhanceCb:e,enhanceEnabled:t,disableCrop:r}=this.props.data;return!!t&&!!e&&!r}async transformImageToCurrentOrientation(e){const t=(0,n.isNumber)(this.props.settings.rotation)?this.props.settings.rotation:0,r=this.props.settings.flipX,o=this.props.settings.flipY;try{return await(0,I.rotateImageToCurrentAngleAndFlip)({url:e,angle:t,flipX:r,flipY:o})}catch(e){return console.error(e)}}renderOldSidebarContents(){const{data:e,background:t}=this.props,{isNewFeaturesEnabled:r,isRedesignEnabled:i}=e,n=e.context===f.CONTEXT_TYPES.STORY&&t.currentBackgroundType===f.BACKGROUND_MODES.BACKGROUND,l=this.renderStickersTab();let c=this.props.data?.langMap?.photos_pe_save_action;return this.props.data.context===f.CONTEXT_TYPES.STORY&&(c=this.props.data?.langMap?.photos_pe_publish_action),(0,o.jsxs)("div",{className:D.default.tabsInner,children:[(0,o.jsxs)(v.EditorTabs,{current:this.props.ui.currentMode??f.TABS.STICKERS,change:j.currentTabAction,setMode:this.setMode,langMap:this.props.data?.langMap,children:[l&&(0,o.jsx)("div",{"data-mode":f.TABS.STICKERS,children:l}),(0,o.jsx)("div",{"data-mode":f.TABS.TEXT,children:(0,o.jsx)(w.TextPanel,{})}),(0,o.jsx)("div",{"data-mode":f.TABS.PAINT,children:i?(0,o.jsx)(T.NewDrawPanel,{}):(0,o.jsx)(E.DrawPanel,{})}),!e.disableCrop&&e.context===f.CONTEXT_TYPES.PHOTO&&(0,o.jsx)("div",{"data-mode":f.TABS.CROP,children:(0,o.jsx)(q.NewCropPanel,{})}),(0,o.jsx)("div",{"data-mode":f.TABS.FILTERS,"data-disabled":n,children:(0,o.jsx)(y.FiltersPanel,{})}),(0,o.jsx)("div",{"data-mode":f.TABS.COLOR,"data-disabled":n,children:(0,o.jsx)(C.ColorCorrectionPanel,{newDesign:i})}),r&&(0,o.jsx)("div",{"data-mode":f.TABS.SEGMENTATION,children:(0,o.jsx)(Y.SegmentationPanelComponent,{})})]}),this.props.data?.showStatusActions&&!this.props.data?.isRedesignEnabled&&(0,o.jsx)("div",{className:D.default.actions,children:(0,o.jsxs)(s.ButtonGroup,{gap:"m",align:"right",stretched:!0,children:[this.props.data?.statusPanelLeftSideNode,(0,o.jsx)(a.Button,{mode:"secondary",stretched:!0,onClick:this.props.data.close,children:this.props.data?.langMap?.photos_pe_cancel_action}),(0,o.jsx)(a.Button,{mode:"primary",loading:this.props.ui.isSaveLoading,disabled:this.isSaveDisabled,onClick:this.save,children:c})]})})]})}renderStickersTab(){const{isRedesignEnabled:e,customStickers:t,stickers:r}=this.props.data;return t?.length?e?(0,o.jsx)(G.NewStickersPanelCustom,{onClick:this.addSticker,customStickers:this.props.data.customStickers,canUseDarkVersions:!0,forceUseDarkVersions:!0}):(0,o.jsx)(W.StickersPanel,{stickerMouseDown:this.addSticker,customStickers:this.props.data.customStickers}):r?.length?e?(0,o.jsx)(z.NewStickersPanelStickerPacks,{onClick:this.addSticker,canUseDarkVersions:!0,forceUseDarkVersions:!0}):(0,o.jsx)(x.StickerPacksPanel,{stickerMouseDown:this.addSticker}):null}isTextEditorOpen(){const e=this.getCurrentLayer();return e&&e.type===f.LAYER_TYPES.TEXT&&e.isEdit}isZoomedIn(){const{globalScale:e,defaultScale:t}=this.props.layers;return e.toFixed(2)!==t.toFixed(2)}isZoomRestrictedTab(){const e=this.props.ui.currentMode,t=[f.TABS.CROP];return null!=e&&t.includes(e)}getCurrentLayer(){const{currentIndex:e,items:t}=this.props.layers;return null!=e&&t[e]?t[e]:null}constructor(e){super(e),this.acceptImageTypes=this.props.data?.acceptImageTypes||["image/*"],this.componentDidMount=()=>{const e=()=>this.props.data.close(!1,!0);if(window.addEventListener("keydown",this.handleKeyDown,{capture:!0}),window.addEventListener("mousedown",this.canvasMouseDown),this.undoSub=j.undoAction.watch((e=>{(0,n.isNumber)(e)?this.props.jumpToPast(e):this.props.undo()})),this.redoSub=j.redoAction.watch((()=>{this.props.redo()})),this.cropSub=j.cropAction.watch((e=>{this.props.setAspect(e.value,e.useInitialCrop)})),this.currentTabActionSub=j.applyOrDenyChangesAndChangeTab.watch((({tab:e,depth:t})=>{(0,n.isNumber)(t)&&this.props.jumpToPast(t),this.props.setMode(e),this.props.setCurrentLayer(null),(0,n.isFunction)(this.props.data?.currentTabCb)&&this.props.data.currentTabCb(e)})),this.scaleSub=j.scaleAction.watch((e=>{e<1?this.props.setLayersScale(1):this.props.setLayersScale(Math.round(100*e)/100)})),this.layerActionSub=j.currentLayerAction.watch((e=>{setTimeout((()=>{"textEdit"===e&&this.props.toggleTextEditor(!0),"textAdd"===e&&this.props.addLayerText(!0,{isEdit:!0,baseScale:this.props.layers.defaultScale}),"cropReset"===e&&(this.props.setCropSettings(null),this.props.setLayersScale(1,!0),this.props.setLayersShift(0,0))}),0)})),(0,n.isFunction)(this.props.data?.currentCropRatioCb)&&(this.currentTabSub=j.$cropActionStatus.watch((e=>{e?.value&&this.props.data.currentCropRatioCb(e.value)}))),(0,n.isFunction)(this.props.data?.currentTabCb)&&(this.currentTabSub=j.$currentTab.watch(this.props.data.currentTabCb)),(0,n.isFunction)(this.props?.data.scaleOptionsCb)&&(this.scaleOptionsSub=j.$scaleStatus.watch((e=>{this.props.data.scaleOptionsCb(e)}))),(0,n.isFunction)(this.props.data?.saveCb)&&(this.getEditedPhotoSub=j.getEditedPhoto.watch((()=>{if("handler"===this.props?.data?.initialCropType){const{settings:e,data:t}=this.props,{initialCrop:r}=t;this.props.data.saveCb({croppedWidth:Math.round((e.croppedWidth||0)*r.xViewPortRatio),croppedHeight:Math.round((e.croppedHeight||0)*r.yViewPortRatio),croppedX:Math.round(Math.abs((e.croppedX||0)*r.xViewPortRatio)),croppedY:Math.round(Math.abs((e.croppedY||0)*r.yViewPortRatio))})}else if("zoom"===this.props?.data?.initialCropType){const{layers:e,data:t,settings:r}=this.props,{containerWidth:o,containerHeight:i}=r,{shiftX:s,shiftY:a,globalScale:l}=e,{initialCrop:c}=t;(0,n.isNumber)(o)&&(0,n.isNumber)(i)&&this.props.data.saveCb({croppedWidth:Math.round(o/l*c.xViewPortRatio),croppedHeight:Math.round(i/l*c.yViewPortRatio),croppedX:Math.round(Math.abs(s/l*c.xViewPortRatio)),croppedY:Math.round(Math.abs(a/l*c.yViewPortRatio))})}else this.renderImageFromState().then(this.props.data.saveCb)}))),(0,n.isFunction)(this.props.data?.save)&&(this.getEditedPhotoSub=j.getEditedPhoto.watch((()=>{this.save()}))),(0,n.isFunction)(this.props.data?.undoRedoStatusCb)&&(this.undoRedoStatusSub=j.$undoRedoStatusFiltered.watch(this.props.data.undoRedoStatusCb)),(0,n.isFunction)(this.props.data?.currentLayerStatusCb)&&(this.currentLayerStatusSub=j.$currentLayerStatus.watch(this.props.data.currentLayerStatusCb)),(0,n.isFunction)(this.props.data.helpers?.getPhotoEditorData))this.props.data.helpers.getPhotoEditorData(e).then((e=>{const{stickers:t,backgrounds:r,storyUploadUrlHash:o,storySaveHash:i}=e,n=this.setBackground(r,this.props.data?.backgroundId,!1),s={};t.forEach((e=>{e.items.forEach((e=>{s[e.id]=e}))})),this.props.setData({stickers:t,stickersMap:s,backgrounds:r,placeholders:this.props.data?.langMap?.photos_pe_texts_placeholders,fontsPlaceholders:this.props.data?.langMap?.photos_pe_fonts,storyUploadUrlHash:o,storySaveHash:i}),this.props.setDataLoaded(),this.props.data?.serviceInfo?.open_text_editor?this.props.addLayerText(!0,{isEdit:!0,text:""},!1):this.props.stickers||this.props.background.currentBackgroundType!==f.BACKGROUND_MODES.BACKGROUND||(this.props.addLayerText(!0,{isEdit:!0,color:[201,206,203,207,205,202,204,303,306,307].includes(n)?"#333333":"#FFFFFF"},!1),this.props.closeTextEditor(),this.props.setCurrentLayer(null)),this.props.stickers&&this.prepareStickers(this.props.stickers)}));else{const e={colors:[],emojies:[],gradients:[],advice_gradients:[]};if(this.setBackground(e,this.props.data?.backgroundId,!1),this.props.setData({backgrounds:e,placeholders:this.props.data?.langMap?.photos_pe_texts_placeholders,fontsPlaceholders:this.props.data?.langMap?.photos_pe_fonts}),"zoom"===this.props?.data?.initialCropType){const{croppedHeight:e,croppedWidth:t,croppedX:r,croppedY:o}=this.props.data.initialCrop,{artboardHeight:i,artboardWidth:n}=this.props.data,s=n/i,a=t/e;let l,c,d;if(s>a){if(d=n,c=n/a,l=n/t,c>i){const t=c-i;c=i,d=n-t*a,l=i/e}}else if(s<a){if(c=i,d=i*a,l=i/e,d>n){const e=d-n;d=n,c=i-e/a,l=n/t}}else c=i,d=n,l=i/e;const h={croppedWidth:t,croppedHeight:e,croppedX:r,croppedY:o,containerWidth:d,containerHeight:c,disableCropRestrictions:!1};setTimeout((()=>{this.props.setCropSettings(h,!1),this.props.setLayersScale(l),this.props.setCropSettings({...h,disableCropRestrictions:!0},!1)})),this.props.setDataLoaded()}else if("handler"===this.props?.data?.initialCropType){const{ratio:e}=this.props.data.initialCrop;this.props.setMode(f.TABS.CROP),this.props.setAspect(e,!0),this.props.setDataLoaded()}else this.props.setMode(f.TABS.TEXT),this.props.setDataLoaded()}},this.componentWillUnmount=()=>{window.removeEventListener("keydown",this.handleKeyDown,{capture:!0}),window.removeEventListener("mousedown",this.canvasMouseDown),(0,j.resetTrigger)(),this.undoSub?.unsubscribe(),this.redoSub?.unsubscribe(),this.cropSub?.unsubscribe(),this.undoRedoStatusSub?.unsubscribe(),this.getEditedPhotoSub?.unsubscribe(),this.currentTabSub?.unsubscribe(),this.scaleSub?.unsubscribe(),this.scaleOptionsSub?.unsubscribe(),this.currentTabActionSub?.unsubscribe(),this.currentLayerStatusSub?.unsubscribe(),this.layerActionSub?.unsubscribe()},this.render=()=>{const{ui:e,data:t,background:r}=this.props,{imageContainerHeight:i,artboardWidth:s,isRedesignEnabled:a=!1}=t,c=!0===t?.showStatusActions&&!a,d=c&&!a?f.BOTTOM_PANEL_HEIGHT:8,h=(0,n.isNumber)(i)?i:0,u={width:s,height:h+d};a&&(u.marginLeft=t.marginLeft),this.isSaveDisabled=!1;const p=!e.isDataLoaded,g=this.props.settings.disableCropRestrictions||this.isZoomedIn()&&!this.isZoomRestrictedTab()&&!this.isTextEditorOpen(),_=c&&!p,m=Boolean(this.props.data?.initialCropType),v=(0,o.jsxs)("div",{className:D.default.imageContainer,style:{width:t.imageContainerWidth},children:[_&&(0,o.jsx)(X.UndoRedo,{}),a&&!p&&(0,o.jsx)("div",{className:(0,n.classNames)(D.default.navigatorContainer,!g&&D.default.navigatorContainerHidden),children:(0,o.jsx)(K.Navigator,{})}),(0,o.jsx)("div",{className:D.default.canvas,style:u,children:(0,o.jsx)(S.EditorCanvas,{getStickerUrlById:this.getStickerUrlById,setMode:this.setMode,stickers:this.props.stickers})}),_&&(0,o.jsx)(V.StatusPanel,{allowBackgroundChange:this.props.data.serviceInfo?.allow_background_editor,currentBackgroundId:r.currentBackgroundId,setCurrentBackgroundId:this.props.setCurrentBackgroundId,currentBackgroundType:r.currentBackgroundType,uploadPhoto:this.uploadPhoto,backgrounds:this.props.data.backgrounds})]});return(0,o.jsxs)("div",{className:D.default.root,style:{height:h+d},children:[v,m?null:(0,o.jsx)("div",{className:(0,n.classNames)(D.default.tabs,this.props.data?.isRedesignEnabled&&D.default.redesignTabs),children:e.isDataLoaded?this.renderSidebar():(0,o.jsx)(l.Spinner,{})}),(0,o.jsx)("input",{type:"file",accept:this.acceptImageTypes.join(","),className:D.default.inputFile,onChange:this.handleChooseFile,ref:this.inputFile}),!e.isDataLoaded&&this.renderFontsPreloading()]})},this.handleMenuItemClicked=e=>{const t=e=>{switch(e){case"crop":return"click_to_crop";case"filters":return"click_to_filter";case"stickers":return"click_to_stickers";case"text":return"click_to_text";case"paint":return"click_to_brush";case"color":return"click_to_photo_correction";case"segmentation":return"click_to_segmentation";default:return null}};t(e)&&this.props.data?.helpers?.sendStat(t(e))},this.toggleUpscaleImage=e=>{const{setLoading:t,setCrop:r,data:o,settings:i}=this.props,{enhanceCb:s,photoUrl:a}=o;if(e){if((0,n.isFunction)(s)){if((0,n.isString)(i.enhance?.srcUrl)&&i.enhance?.srcUrl)return void this.transformImageToCurrentOrientation(i.enhance?.srcUrl).then((e=>{if(e){const{url:t,width:o,height:i}=e;r({url:t,data:{originalWidth:o,originalHeight:i},enhance:{active:!0,url:t}})}}));t({enhance:!0}),s((e=>{t({enhance:!1}),e&&this.transformImageToCurrentOrientation(e).then((t=>{if(t){const{url:o,width:i,height:s}=t;if((0,n.isString)(o)){r({url:o,data:{originalWidth:i,originalHeight:s},enhance:{active:!0,url:o,srcUrl:e}})}}})),this.props.data?.helpers?.sendStat("upgrade")}))}}else this.transformImageToCurrentOrientation(a).then((e=>{if(e){const{url:t,width:o,height:i}=e;r({url:t,data:{originalWidth:o,originalHeight:i},enhance:{active:!1}})}}))},this.toggleAutoColorCorrection=e=>{this.props.setAutoCorrection(e),this.props.data?.helpers?.sendStat(e?"enable_autocorrection":"disable_autocorrection")},this.renderFontsPreloading=()=>(0,o.jsx)("div",{className:D.default.fontPreload,children:f.FONTS.map((e=>(0,o.jsx)("span",{className:(0,I.getComputedFontFamily)(e)},e)))}),this.save=()=>{this.props.closeTextEditor(),this.props.setCurrentLayer(null),this.props.setSaveLoading(!0),setTimeout((()=>{this.renderImageFromState().then((({blob:e,width:t,height:r})=>{const{layers:o,drawings:i,background:n}=this.props,s=this.props.data?.helpers?.prepareStat(o.items,i,n.currentBackgroundType,n.currentBackgroundId),a=[];this.props.layers.items.forEach((e=>{e.clickableZones&&e.clickableZones.forEach((t=>{a.push(this.getPreparedClickableZone(e,t))}))}));const l=this.props?.stickers?.find((e=>"native"===e.sticker_type&&"situational_template"===e.sticker.action_type));if(l){const e=l.sticker?.transform?.translation_y,t=this.getTemplateStickerClickableZone({height:r,top:e});a.push(t)}const c={original_width:t,original_height:r,clickable_stickers:a};this.props.data.save(e,(()=>{this.props.setSaveLoading(!1)}),{attachment:this.props.data.attachment,storyUploadUrlHash:this.props.data.storyUploadUrlHash,storySaveHash:this.props.data.storySaveHash,analytics:JSON.stringify(s),clickableStickers:JSON.stringify(c)})})).catch((e=>{this.props.setSaveLoading(!1),console.error(e)}))}),0)},this.renderImageFromState=()=>{const{layers:e,drawings:t,data:r,settings:o}=this.props,{globalScale:i}=e,{artboardWidth:s,originalWidth:a,originalHeight:l,context:c}=r,d=a/s,h=o.segmentation?.delete?r.maskCanvas:null,{croppedWidth:u,croppedHeight:p,croppedX:g,croppedY:_,containerWidth:m,containerHeight:f}=o,S=this.props?.stickers?.find((e=>"native"===e.sticker_type&&"situational_template"===e.sticker.action_type));let v=null;return(0,n.isNumber)(u)&&(0,n.isNumber)(p)&&(0,n.isNumber)(g)&&(0,n.isNumber)(_)&&(0,n.isNumber)(m)&&(0,n.isNumber)(f)&&(v={croppedWidth:u*d,croppedHeight:p*d,croppedX:g*d,croppedY:_*d,containerWidth:m*d,containerHeight:f*d}),new Promise(((r,o)=>{b.rendererScene.draw(a,l,e.items,t,d,this.getStickerUrlById,i,h,v,c,!!S).then((({blob:e,width:t,height:o})=>{r({blob:e,width:t,height:o})})).catch((e=>{o(e)}))}))},this.getPreparedClickableZone=(e,t)=>{const r=this.props.data.originalWidth/this.props.data.artboardWidth,o=e.rotate*(Math.PI/180),i=e.width*e.scale,n=e.height*e.scale,s=e.x-i/2,a=e.y-n/2,l=parseFloat(e.x)+(s-e.x)*Math.cos(o)-(a-e.y)*Math.sin(o),c=parseFloat(e.y)+(a-e.y)*Math.cos(o)+(s-e.x)*Math.sin(o),d=t.clickable_area?.map((e=>{const t=e.x*i,s=e.y*n,a=t*Math.cos(o)-s*Math.sin(o),d=t*Math.sin(o)+s*Math.cos(o);return{x:(l+a)*r,y:(c+d)*r}})),h={type:t.action_type,clickable_area:d};return"link"===t.action_type?(h.link=t.action.link,t.action.tooltip_text_key&&(h.tooltip_text_key=t.action.tooltip_text_key)):this.props.data.isAppStickerDisabled||"app"!==t.action_type?"music"===t.action_type?(h.audio_owner_id=t.action.audioOwnerId,h.audio_id=t.action.audioId,h.audio_access_key=t.action.audioAccessKey,h.is_cover=!0):"playlist"===t.action_type&&(h.playlist_owner_id=t.action.playlistOwnerId,h.playlist_id=t.action.playlistId):(h.app_id=t.action.app_id,t.action.app_context&&(h.app_context=t.action.app_context)),h},this.getTemplateStickerClickableZone=({height:e,top:t=-.8})=>{const{artboardHeight:r,artboardWidth:o}=this.props.data,i=e/r,n=document.querySelector(`.${S.stickerTemplateSelector}`),{width:s,height:a}=n instanceof HTMLDivElement?n.getBoundingClientRect():{width:0,height:0},l=o/2-s/2,c=Math.abs(r-(r-r*Math.abs(t)));return{type:"situational_template",clickable_area:[{x:l*i,y:c*i},{x:(l+s)*i,y:c*i},{x:(l+s)*i,y:(c+a)*i},{x:l*i,y:(c+a)*i}]}},this.handleKeyDown=e=>{if("Escape"===e.key&&this.props.layers.currentIndex&&this.props.layers.items[this.props.layers.currentIndex].isEdit&&(e.preventDefault(),e.stopPropagation(),this.props.closeTextEditor()),(e.ctrlKey||e.metaKey)&&"z"===e.key&&(e.shiftKey?this.props.redo():this.props.undo()),null!==this.props.layers.currentIndex&&"TEXTAREA"!==e.target.nodeName)if(["Backspace","Delete"].includes(e.key))e.preventDefault(),this.props.layers.items[this.props.layers.currentIndex].canDelete&&this.props.deleteLayer();else if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key)){const t=this.getCurrentLayer();if(!t)return;const r={x:t.x,y:t.y},o=e.shiftKey?10:1;switch(e.key){case"ArrowUp":r.y-=o;break;case"ArrowDown":r.y+=o;break;case"ArrowLeft":r.x-=o;break;case"ArrowRight":r.x+=o}this.props.setLayerPosition(r.x,r.y)}},this.canvasMouseDown=e=>{const{globalScale:t}=this.props.layers,{data:r}=this.props,{isRedesignEnabled:o}=r,i=this.getCurrentLayer(),n=e.target,s=this.props.ui.currentMode;if(0!==e.button)return!1;if("TEXTAREA"!==n.tagName&&n.closest(`[data-name="${S.editorCanvasSelector}"]`)&&!(n.closest(`[data-name="${H.switchModeSelector}"]`)||s&&[f.TABS.PAINT,f.TABS.FILTERS].includes(s)))if(n.closest(`[data-name="${U.layerSelector}"]`))this.layerDragStart(e);else{if(this.props.ui.currentMode===f.TABS.TEXT){if(i&&i.type===f.LAYER_TYPES.TEXT&&i.isEdit)return void this.props.closeTextEditor();if(o&&i)return void this.props.setCurrentLayer(null);if(!o)return;return this.props.addLayerText(!0,{isEdit:!0,baseScale:t}),void e.preventDefault()}(this.props.ui.currentMode===f.TABS.COLOR&&this.props.settings.blur.isEnabled||this.props.ui.currentMode===f.TABS.BLUR&&this.props.settings.blur.isEnabled)&&this.moveBlurStart(e),i&&(i&&i.type===f.LAYER_TYPES.TEXT&&this.props.toggleTextEditor(!1),this.props.setCurrentLayer(null))}},this.moveBlurStart=e=>{window.addEventListener("mousemove",this.moveBlurProcess),window.addEventListener("mouseup",this.moveBlurFinish),this.moveBlurProcess(e)},this.moveBlurProcess=e=>{const{croppedX:t,croppedY:r}=this.props.settings,{globalScale:o}=this.props.layers,i=t||0,n=r||0,{x:s,y:a,width:l,height:c}=(0,I.getRelativeXY)(e,document.querySelector(`[data-name="${B.imageLayerSelector}"]`)),d=s/o+i,h=a/o+n,u=[Math.max(0,Math.min(d/l,1)),1-Math.max(0,Math.min(h/c,1))];this.props.setBlurPosition(u)},this.moveBlurFinish=()=>{window.removeEventListener("mousemove",this.moveBlurProcess),window.removeEventListener("mouseup",this.moveBlurFinish)},this.layerDragStart=e=>{const{globalScale:t}=this.props.layers;window.addEventListener("mousemove",this.layerDragProcess),window.addEventListener("mouseup",this.layerDragFinish);const r=e.target.closest("[data-index]");let o;o=r?Number((0,I.domData)(r,"index")):this.props.layers.currentIndex,this.props.layers.currentIndex!==o&&this.props.setCurrentLayer(o);const{x:i,y:n}=(0,I.getRelativeXY)(e,document.querySelector(`[data-name="${F.drawingLayerSelector}"]`));if(this.currentLayer=this.getCurrentLayer(),!this.currentLayer)return;const s=this.currentLayer;s.isBackground&&s.locked?this.props.setCurrentLayer(null):(this.clientX=e.clientX,this.clientY=e.clientY,this.shiftX=i/t-this.currentLayer.x,this.shiftY=n/t-this.currentLayer.y)},this.layerDragProcess=e=>{const{globalScale:t}=this.props.layers;if(!this.currentLayer)return;const r=document.querySelector(`[data-name="${F.drawingLayerSelector}"]`);if(!r)return;const{x:o,y:i}=(0,I.getRelativeXY)(e,r);if(void 0===this.shiftX||void 0===this.shiftY)return;let n=o/t-this.shiftX,s=i/t-this.shiftY;this.props.setLayerPosition(n,s),this.props.ui.isShowDropBox||this.props.setShowDropBox(!0)},this.layerDragFinish=e=>{const{globalScale:t}=this.props.layers;window.removeEventListener("mousemove",this.layerDragProcess),window.removeEventListener("mouseup",this.layerDragFinish);if(!this.getCurrentLayer())return;if(!this.currentLayer)return;if(void 0===this.shiftX||void 0===this.shiftY)return;const r=document.querySelector(`[data-name="${F.drawingLayerSelector}"]`);if(!r)return;const{x:o,y:i}=(0,I.getRelativeXY)(e,r);let n=o/t-this.shiftX,s=i/t-this.shiftY;this.props.setLayerPosition(Math.round(n),Math.round(s)),this.props.setShowDropBox(!1),delete this.currentLayer,delete this.shiftX,delete this.shiftY,delete this.clientX,delete this.clientY},this.getStickerUrlById=(e,t)=>{const r=this.props.data?.stickersMap??{},o=this.props.data?.customStickers??[],i=r?.[e],n=o?.find((t=>e===t.id)),s=[128,256,512].includes(t)?t:f.STICKER_LARGE;return i?(0,I.getStickerSize)(i.sizes,s,!0)||"":n&&(0,I.getStickerSize)(n.sizes,s,!0)||""},this.addSticker=(e,t)=>{const{globalScale:r,shiftX:o,shiftY:i}=this.props.layers,{containerWidth:n,containerHeight:s}=this.props.settings,{artboardWidth:a,artboardHeight:l}=this.props.data,c=(n||a)/2/r-o/r,d=(s||l)/2/r-i/r;e.persist(),this.props.addLayerSticker({id:t,x:c,y:d,width:f.LAYER_DEFAULT_SIZE,height:f.LAYER_DEFAULT_SIZE,rotate:0,canDelete:!0,scale:1,baseScale:r}),this.props.data?.helpers?.sendStat("add_sticker")},this.prepareStickers=e=>{const{artboardWidth:t,artboardHeight:r}=this.props.data;e.forEach((e=>{let{gravity:o="center",rotation:i=0,translation_x:n=0,translation_y:s=0,relation_width:a}=e.sticker.transform||{};if(n=Math.min(Math.max(n,-1),1),s=Math.min(Math.max(s,-1),1),a&&(a=Math.min(Math.max(a,.1),1)),"renderable"===e.sticker_type)this.prepareRenderableSticker(e.sticker,o,n,s,a).then((({url:t,x:r,y:o,stickerWidth:n,stickerHeight:s,clickableZones:a})=>{this.props.addLayerImage({url:t,x:r,y:o,width:Math.round(n),height:Math.round(s),rotate:-i,clickableZones:a,canDelete:Boolean(e.sticker.can_delete),scale:1,baseScale:1},!1)})).catch((e=>{this.props.data?.helpers?.logError(e,{environment:"photoEditor"})}));else if("native"===e.sticker_type)switch(e.sticker.action_type){case"sticker":{let l=a?t*a:f.LAYER_DEFAULT_SIZE,c=a?t*a:f.LAYER_DEFAULT_SIZE;const d=`${e.sticker.action.pack_id}_${e.sticker.action.sticker_id}`;if(this.props.data.stickersMap[d]){const{x:e,y:a}=(0,I.getPositionWithGravity)(o,t,r,l/2,c/2,n*t,s*r);this.props.addLayerSticker({id:d,x:e,y:a,width:Math.round(l),height:Math.round(c),rotate:-i,canDelete:!0,scale:1,baseScale:1})}break}case"text":{let l=.5;a&&(l=this.getFontSize(e.sticker.action.text,t*a,e.sticker.action.style));const{width:c,height:d}=this.getTextRect(e.sticker.action.text,l*f.FONT_SIZE_COEFFICIENT,e.sticker.action.style),{x:h,y:u}=(0,I.getPositionWithGravity)(o,t,r,c/2,d/2,n*t,s*r);this.props.addLayerText(!0,{isEdit:!0,text:e.sticker.action.text,style:e.sticker.action.style,color:e.sticker.action.selection_color,fontSize:l,initialFontSize:l,rotate:-i,scale:1,x:h,y:u}),this.props.closeTextEditor(),this.props.setCurrentLayer(null);break}case"comment":{const{postRawId:i,replyId:a}=e.sticker.action,l=new k.CommentSticker(e.sticker.action);l.render().then((()=>{l.toBlob().then((c=>{const{x:d,y:h}=(0,I.getPositionWithGravity)(o,t,r,l.getWidth()/2,l.getHeight()/2,n*t,s*r),u=l.getWidth()/t,p=l.getWidth()/u,g=l.getHeight()/u;this.props.addLayerImage({url:URL.createObjectURL(c),x:d,y:h,width:Math.round(p),height:Math.round(g),rotate:0,clickableZones:[{action_type:"link",action:{link:`https://${this.props.data?.helpers?.getHostName()}/wall${i}?reply=${a}`,tooltip_text_key:"tooltip_open_post"},clickable_area:[{x:0,y:0},{x:1,y:0},{x:1,y:1},{x:0,y:1}]}],canDelete:Boolean(e.sticker.can_delete),scale:.8,baseScale:1},!1)})).catch((e=>{this.props.data?.helpers?.logError(e,{environment:"photoEditor"})}))})).catch((e=>{this.props.data?.helpers?.logError(e,{environment:"photoEditor"})}));break}case"answer_question":{const l=new O.AnswerQuestionSticker(e.sticker.action);l.render().then((()=>{l.toBlob().then((c=>{const d=l.getHeight()/l.getWidth(),h=a?t*a:l.getWidth()/4,u=a?h*d:l.getHeight()/4,{x:p,y:g}=(0,I.getPositionWithGravity)(o,t,r,h/2,u/2,n*t,s*r);this.props.addLayerImage({url:URL.createObjectURL(c),x:p,y:g,width:Math.round(h),height:Math.round(u),rotate:-i,canDelete:Boolean(e.sticker.can_delete),scale:1,baseScale:1},!1)})).catch((e=>{this.props.data?.helpers?.logError(e,{environment:"photoEditor"})}))})).catch((e=>{this.props.data?.helpers?.logError(e,{environment:"photoEditor"})}));break}case"ask_question_avatar":{const a=new A.AskQuestionAvatar(e.sticker.action);a.render().then((()=>{a.toBlob().then((l=>{const c=a.props.size,d=a.props.size,{x:h,y:u}=(0,I.getPositionWithGravity)(o,t,r,c/2,d/2,n*t,s*r);this.props.addLayerImage({url:URL.createObjectURL(l),x:h,y:u,width:Math.round(c),height:Math.round(d),rotate:-i,canDelete:Boolean(e.sticker.can_delete),scale:1,baseScale:1},!1)})).catch((e=>{this.props.data?.helpers?.logError(e,{environment:"photoEditor"})}))})).catch((e=>{this.props.data?.helpers?.logError(e,{environment:"photoEditor"})}));break}case"ask_question_text":{const a=new N.AskQuestionText(e.sticker.action);a.render().then((()=>{a.toBlob().then((l=>{const c=a.getWidth()/4,d=a.getHeight()/4,{x:h,y:u}=(0,I.getPositionWithGravity)(o,t,r,c/2,d/2,n*t,s*r);this.props.addLayerImage({url:URL.createObjectURL(l),x:h,y:u,width:Math.round(c),height:Math.round(d),rotate:-i,canDelete:Boolean(e.sticker.can_delete),scale:1,baseScale:1},!1)})).catch((e=>{console.error(e)}))})).catch((e=>{console.error(e)}));break}case"music":{const i=e.sticker.action,n=new P.MusicSticker(i);n.render().then((()=>{n.toBlob().then((s=>{const a=n.getWidth()+198,l=t*n.getWidth()/a,c=n.getWidth()/l,d=n.getHeight()/c,h=n.getClickableHeight()/c/d,{x:u,y:p}=(0,I.getPositionWithGravity)(o,t,r,n.getWidth()/2,n.getHeight()/2,0,0);this.props.addLayerImage({url:URL.createObjectURL(s),x:u,y:p,width:l,height:d,rotate:0,clickableZones:[{action_type:"music",action:{audioOwnerId:i.audioOwnerId,audioId:i.audioId,audioAccessKey:i.audioAccessKey},clickable_area:[{x:0,y:0},{x:1,y:0},{x:1,y:h},{x:0,y:h}]}],canDelete:Boolean(e.sticker.can_delete),scale:1,baseScale:1},!1)})).catch((e=>{this.props.data?.helpers?.logError(e,{environment:"photoEditor"})}))})).catch((e=>{this.props.data?.helpers?.logError(e,{environment:"photoEditor"})}));break}case"playlist":{const i=e.sticker.action,n=new R.PlaylistSticker(i);n.render().then((()=>{n.toBlob().then((s=>{const a=n.getWidth()+198,l=t*n.getWidth()/a,c=n.getWidth()/l,d=n.getHeight()/c,h=n.getClickableHeight()/c/d,{x:u,y:p}=(0,I.getPositionWithGravity)(o,t,r,n.getWidth()/2,n.getHeight()/2,0,0);this.props.addLayerImage({url:URL.createObjectURL(s),x:u,y:p,width:l,height:d,rotate:0,clickableZones:[{action_type:"playlist",action:{playlistOwnerId:i.playlistOwnerId,playlistId:i.playlistId},clickable_area:[{x:0,y:0},{x:1,y:0},{x:1,y:h},{x:0,y:h}]}],canDelete:Boolean(e.sticker.can_delete),scale:1,baseScale:1},!1)})).catch((e=>{this.props.data?.helpers?.logError(e,{environment:"photoEditor"})}))})).catch((e=>{this.props.data?.helpers?.logError(e,{environment:"photoEditor"})}));break}case"vmoji":{const l=e.sticker.action,c=new $.VmojiSticker(l);c.render().then((()=>{c.toBlob().then((l=>{const d=a||.6,h=c.getWidth(),u=c.getHeight(),{x:p,y:g}=(0,I.getPositionWithGravity)(o,t,r,h/2,u/2,n*t,s*r);this.props.addLayerImage({url:URL.createObjectURL(l),x:p,y:g,width:Math.round(h),height:Math.round(u),rotate:-i,canDelete:Boolean(e.sticker.can_delete),scale:d,baseScale:1},!1)})).catch((e=>{this.props.data?.helpers?.logError(e,{environment:"photoEditor"})}))})).catch((e=>{this.props.data?.helpers?.logError(e,{environment:"photoEditor"})}));break}}}))},this.prepareRenderableSticker=(e,t,r,o,i)=>{const{artboardWidth:n,artboardHeight:s,originalWidth:a}=this.props.data,l=a/n;return new Promise(((a,c)=>{"string"!=typeof e.url&&"string"!=typeof e.blob&&c();const d=e.url||e.blob||"";(0,M.loadImage)(d).then((c=>{const h=c.height/c.width;let u=0,p=0;i?(u=n*i,p=u*h):(u=c.width/l,p=c.height/l,u>n&&(u=n,p=u*h));const{x:g,y:_}=(0,I.getPositionWithGravity)(t,n,s,u/2,p/2,r*n,o*s);let m;e.clickable_zones&&(m=e.clickable_zones.map((e=>{let t;return t=e.clickable_area?e.clickable_area.map((e=>({x:e.x/c.width,y:e.y/c.height}))):[{x:0,y:0},{x:1,y:0},{x:1,y:1},{x:0,y:1}],{...e,clickable_area:t}}))),a({url:d,x:g,y:_,stickerWidth:u,stickerHeight:p,clickableZones:m})})).catch((()=>{c()}))}))},this.getTextRect=(e,t,r)=>{const o=document.createElement("span");o.innerHTML=(0,I.clean)(e),o.style.display="inline-block",o.style.fontSize=`${t}px`,o.style.lineHeight="1em",o.style.whiteSpace="pre";const i=(0,I.getComputedFontFamily)(r);i&&o.classList.add(i),document.body.appendChild(o);const n=o.getBoundingClientRect();return o.remove(),n},this.getFontSize=(e,t,r)=>{let o=2*t;const i=document.createElement("span");for(i.innerHTML=(0,I.clean)(e),i.style.display="inline-block",i.style.width=`${t}px`,i.style.fontSize=`${o}px`,i.style.lineHeight="1em",i.style.whiteSpace="pre",r&&i.classList.add(`PhotoEditorFontStyle--${r}`),document.body.appendChild(i);o&&i.scrollWidth>Math.round(t);)o--,i.style.fontSize=`${o}px`;return i.remove(),o/100},this.uploadPhoto=()=>{this.inputFile.current?.click()},this.setMode=e=>{const{ui:t}=this.props,{currentBackgroundType:r,currentPhotoUrl:o}=this.props.background;if(this.props.setCurrentLayer(null),e===f.BACKGROUND_MODES.PHOTO){if(!o||r===e)return void this.uploadPhoto();this.props.data?.helpers?.sendStat("click_to_camera_icon")}this.props.setBackgroundType(e),e===f.BACKGROUND_MODES.BACKGROUND&&t.currentMode&&[f.TABS.COLOR,f.TABS.FILTERS].includes(t.currentMode)&&this.props.setMode(null)},this.handleChooseFile=async e=>{let t=e.target.files?.item(0);if(t)try{if(!this.isValidFileType(t,this.acceptImageTypes))throw this.props.data?.langMap?.stories_create_image_incorrect;if(this.props.data?.prepareImageFile&&(t=await this.props.data.prepareImageFile(t),!t))throw this.props.data?.langMap?.stories_create_image_incorrect;const e=URL.createObjectURL(t),r=await(0,I.getOrientation)(t),{width:o,height:i}=await(0,I.getWidthHeightOfImageUrl)(e);if(-1===r||-2===r||1===r)this.props.setCurrentPhotoUrl(e),this.props.setBackgroundType(f.BACKGROUND_MODES.PHOTO,!1);else{const t=await(0,I.resetOrientation)(e,r);this.props.setCurrentPhotoUrl(t),this.props.setBackgroundType(f.BACKGROUND_MODES.PHOTO,!1)}this.props.data?.helpers?.sendStat("click_to_camera_icon",{img:{width:o,height:i}})}catch(e){this.props.data?.helpers?.showErrorBox(this.props.data?.langMap?.global_error,e||this.props.data?.langMap?.stories_create_image_incorrect)}else console.error("File not found")},this.isValidFileType=(e,t)=>{if(!e)return!1;if(e.type){if(!t.includes(e.type))return!1}else if(!t?.includes("image/heic"))return!1;return!0},this.inputFile=(0,i.createRef)()}}const J=Object.assign(d.ActionCreators,{setMode:h.setMode,setAutoCorrection:u.setAutoCorrection,addLayerSticker:p.addLayerSticker,addLayerText:p.addLayerText,addLayerImage:p.addLayerImage,setLayerPosition:p.setLayerPosition,deleteLayer:p.deleteLayer,setCurrentLayer:p.setCurrentLayer,setDataLoaded:h.setDataLoaded,setShowDropBox:h.setShowDropBox,setSaveLoading:h.setSaveLoading,closeTextEditor:p.closeTextEditor,setData:g.setData,setBlurPosition:u.setBlurPosition,setBackgroundType:_.setBackgroundType,setCurrentPhotoUrl:_.setCurrentPhotoUrl,setCurrentBackgroundId:_.setCurrentBackgroundId,setLayersScale:p.setLayersScale,setLoading:u.setLoading,toggleTextEditor:p.toggleTextEditor,setCrop:m.setCrop,setCropSettings:m.setCropSettings,setLayersShift:p.setLayersShift,setAspect:u.setAspect}),ee=(0,c.connect)((e=>{const{croppedWidth:t,croppedHeight:r}=e.present.settings,{defaultScale:o,globalScale:i,currentIndex:s,items:a}=e.present.layers,l=Math.round(100*i)/100,c=Math.round(100*o)/100,d=c+3,h=l<=c?c:l<=d?l:d;(0,j.scaleActionStatus)({scale:h,defaultScale:c}),(0,j.currentTabActionStatus)(e.present.ui.currentMode),(0,j.undoRedoStatus)({canUndo:e.past.length>0,canRedo:e.future.length>0,depth:e.past.length});const u=(0,n.isNumber)(s)?a[s]:null;return u&&(0,n.isNumber)(s)?(0,j.currentLayerStatusAction)({type:u.type||"unknown",index:s,isEdit:u.isEdit}):"crop"===e.present.ui.currentMode&&(0,n.isNumber)(t)&&(0,n.isNumber)(r)?(0,j.currentLayerStatusAction)({type:"crop",isEdit:!0}):(0,j.currentLayerStatusAction)(null),{ui:e.present.ui,settings:e.present.settings,layers:e.present.layers,drawings:e.present.drawings,background:e.present.background,data:e.present.data}}),J,null,{forwardRef:!0})(Q)},36919:(e,t,r)=>{r.d(t,{BlurPanel:()=>S});var o=r(474848),i=r(296540),n=r(506996),s=r(8520),a=r(290494),l=r(428918),c=r(196058),d=r(906110),h=r(852485),u=r(591707),p=r(195165),g=r(902349),_=r(933714);const m=({label:e,value:t,onChange:r,...n})=>{const[s,l]=(0,i.useState)(t);(0,i.useEffect)((()=>{s!==t&&l(t)}),[t]);return(0,o.jsx)(p.PEFormItem,{label:e,after:s,children:(0,o.jsx)(a.Slider,{...n,value:s,onChange:e=>{l(e),r(e)}})})},f=e=>(0,i.useCallback)((0,s.debounce)(e,100),[]),S=({className:e})=>{const t=(0,n.useDispatch)(),{artboardHeight:r,artboardWidth:a,langMap:p}=(0,h.useData)(),{croppedHeight:S,croppedWidth:v,blur:{isEnabled:E,size:T,form:w,radius:C}}=(0,h.useSettings)();const y=S?r/S:1,x=v?a/v:1,b=w===d.BLUR_TYPES.ROUND?Math.min(y,x):y,I=Math.min(Math.round(100*C*b),100),R=f((function(e){t((0,c.setBlurSize)(e)),t((0,c.changeBlurEnable)(e>=1))})),A=f((e=>t((0,c.setBlurRadius)(e/100/b)))),k=[{label:p?.photos_pe_correction_blur_type_round,value:d.BLUR_TYPES.ROUND},{label:p?.photos_pe_correction_blur_type_rec,value:d.BLUR_TYPES.RECTANGULAR}];return(0,o.jsx)(u.ScrollableContainer,{fadeEffect:!0,className:(0,s.classNames)(e),children:(0,o.jsxs)("div",{className:_.default.contents,children:[(0,o.jsx)("form",{onSubmit:()=>!1,children:k.map((e=>(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)(g.CheckboxLike,{value:e.value,name:"photo_editor_blur_type",checked:w===e.value,label:e.label,onChange:()=>t((0,c.setBlurForm)(e.value))}),(0,o.jsx)(l.Spacing,{size:2})]},e.value)))}),(0,o.jsx)(l.Spacing,{size:10}),(0,o.jsx)(m,{label:p?.photos_pe_intensity,min:0,max:100,gravity:1,step:1,isShowHandle:!0,value:E?T:0,onChange:R}),(0,o.jsx)(l.Spacing,{size:2}),(0,o.jsx)(m,{label:p?.photos_pe_correction_blur_radius,min:0,max:100,gravity:1,step:1,isShowHandle:!0,value:I,onChange:A})]})})}},883707:(e,t,r)=>{r.d(t,{CollagePanel:()=>a});var o=r(474848),i=r(8520),n=r(591707),s=r(636514);const a=({className:e})=>(0,o.jsx)(n.ScrollableContainer,{fadeEffect:!0,className:(0,i.classNames)(s.default.root,e),children:"Collages are not yet implemented"})},845471:(e,t,r)=>{r.d(t,{ColorCorrectionPanel:()=>y});var o=r(474848),i=r(296540),n=r(506996),s=r(196058),a=r(404245),l=r(890589),c=r(511548),d=r(480809),h=r(290494),u=r(428918),p=r(765668),g=r(533048),_=r(753457),m=r(906110),f=r(690822),S=r(195165),v=r(591707),E=r(8520),T=r(291718);class w extends i.Component{render(){const{settings:e,setColorCorrection:t,langMap:r,newDesign:i,className:n}=this.props,s=[{filter:"exposure",label:r?.photos_pe_correction_exposure,min:-1,max:1},{filter:"contrast",label:r?.photos_pe_correction_contrast,min:-1,max:1},{filter:"saturation",label:r?.photos_pe_correction_saturation,min:-1,max:1},{filter:"warmth",label:r?.photos_pe_correction_warmth,min:-1,max:1},{filter:"vignette",label:r?.photos_pe_correction_vignette,min:-1,max:1},{filter:"sharpness",label:r?.photos_pe_correction_sharpness,min:0,max:1},{filter:"grain",label:r?.photos_pe_correction_grain,min:0,max:1}];return i?(0,o.jsx)(v.ScrollableContainer,{fadeEffect:!0,className:n,children:(0,o.jsx)("div",{children:s.map((({label:r,filter:i,...n})=>{const s=e.colorCorrection[i];return(0,o.jsxs)(S.PEFormItem,{label:r,after:(e=>{const t=Math.round(100*e);return t>0&&(n.min??0)<0?`+${t}`:t})(s),children:[(0,o.jsx)(h.Slider,{isShowHandle:!0,isShowZero:!1,gravity:2,...n,value:s,onChange:e=>t(i,e)}),(0,o.jsx)(u.Spacing,{size:2})]},i)}))})}):(0,o.jsxs)("div",{className:(0,E.classNames)(f.default.root,n),children:[(0,o.jsx)("div",{className:f.default.items,children:s.map((({label:r,filter:i,...n})=>(0,o.jsxs)("div",{className:f.default.item,children:[(0,o.jsx)("span",{className:f.default.itemName,children:r}),(0,o.jsx)(h.Slider,{isShowHandle:!0,isShowZero:!0,gravity:2,formatHint:e=>Math.round(100*e),...n,value:e.colorCorrection[i],onChange:e=>t(i,e)})]},i)))}),(0,o.jsx)("div",{className:f.default.link,children:this.renderAutoCorrectionPanel()}),(0,o.jsx)("div",{className:f.default.link,children:this.renderBlurPanel()}),this.canUpscaleImage()&&(0,o.jsx)("div",{className:f.default.link,children:this.renderEnhancePanel()})]})}canUpscaleImage(){return!1}transformImageToCurrentOrientation(e){const t=(0,E.isNumber)(this.props.settings.rotation)?this.props.settings.rotation:0,r=this.props.settings.flipX,o=this.props.settings.flipY;return(0,T.rotateImageToCurrentAngleAndFlip)({url:e,angle:t,flipX:r,flipY:o}).catch((e=>console.error(e)))}renderEnhancePanel(){const{settings:e,langMap:t}=this.props;return e.enhance?.active?(0,o.jsx)("div",{className:f.default.box,children:(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{children:"Вы увеличили разрешение"}),(0,o.jsx)("span",{className:f.default.dvd}),(0,o.jsx)(p.Link,{onClick:this.toggleUpscaleImage,children:t?.photos_pe_cancel})]})}):(0,o.jsx)(g.Button,{mode:"tertiary",size:"s",before:(0,o.jsx)(l.Icon20FullscreenOutline,{className:f.default.icon}),onClick:this.toggleUpscaleImage,loading:e.loading.enhance,children:"Увеличение разрешения"})}renderAutoCorrectionPanel(){const{settings:e,setAutoCorrection:t,helpers:r,langMap:i}=this.props,n=e=>{r?.sendStat(e?"enable_autocorrection":"disable_autocorrection"),t(e)};return e.isAutoCorrection?(0,o.jsx)("div",{className:f.default.box,children:(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{dangerouslySetInnerHTML:{__html:i?.photos_pe_correction_auto_enabled}}),(0,o.jsx)("span",{className:f.default.dvd}),(0,o.jsx)(p.Link,{onClick:()=>n(!1),children:i?.photos_pe_cancel})]})}):(0,o.jsx)(g.Button,{mode:"tertiary",size:"s",before:(0,o.jsx)(c.Icon20Stars,{className:f.default.icon}),onClick:()=>n(!0),children:i?.photos_pe_correction_auto})}renderBlurPanel(){const{settings:e,setBlurEnable:t,setBlurForm:r,setBlurSize:i,helpers:n,langMap:s}=this.props,{blur:a}=e,l=e=>{n?.sendStat(e?"enable_blur":"disable_blur"),t(e)},c=[{label:s?.photos_pe_correction_blur_type_round,value:m.BLUR_TYPES.ROUND},{label:s?.photos_pe_correction_blur_type_rec,value:m.BLUR_TYPES.RECTANGULAR}];return a.isEnabled?(0,o.jsxs)("div",{className:f.default.box,children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{dangerouslySetInnerHTML:{__html:s?.photos_pe_correction_blur_enabled}}),(0,o.jsx)("span",{className:f.default.dvd}),(0,o.jsx)(p.Link,{onClick:()=>l(!1),children:s?.photos_pe_cancel})]}),(0,o.jsx)("div",{className:f.default.slider,children:(0,o.jsx)(h.Slider,{min:0,max:100,gravity:2,isShowHandle:!0,isShowZero:!0,value:e.blur.size,onChange:e=>i(e),formatHint:e=>Math.round(e)})}),(0,o.jsx)(_.CustomSelect,{className:f.default.select,value:a.form,options:c,onChange:e=>r(String(e.target.value))})]}):(0,o.jsx)(g.Button,{mode:"tertiary",size:"s",before:(0,o.jsx)(d.Icon20WaterDropOutline,{className:f.default.icon}),onClick:()=>l(!0),children:s?.photos_pe_correction_blur})}constructor(){super(...arguments),this.toggleUpscaleImage=()=>{const{setLoading:e,setCrop:t,settings:r,enhanceCb:o,photoUrl:i,helpers:n}=this.props;if(!0===r.enhance?.active)this.transformImageToCurrentOrientation(i).then((e=>{if(e){const{url:r,width:o,height:i}=e;t({url:r,data:{originalWidth:o,originalHeight:i},enhance:{active:!1}})}}));else if((0,E.isFunction)(o)){if((0,E.isString)(r.enhance?.srcUrl)&&r.enhance?.srcUrl)return void this.transformImageToCurrentOrientation(r.enhance?.srcUrl).then((e=>{if(e){const{url:r,width:o,height:i}=e;t({data:{originalWidth:o,originalHeight:i},enhance:{active:!0,url:r}})}}));e({enhance:!0}),o((r=>{e({enhance:!1}),r&&this.transformImageToCurrentOrientation(r).then((e=>{if(e){const{url:o,width:i,height:n}=e;if((0,E.isString)(o)){t({data:{originalWidth:i,originalHeight:n},enhance:{active:!0,url:o,srcUrl:r}})}}})),n?.sendStat("upgrade")}))}}}}const C={setColorCorrection:s.setColorCorrection,setBlurEnable:s.setBlurEnable,setBlurForm:s.setBlurForm,setBlurSize:s.setBlurSize,setAutoCorrection:s.setAutoCorrection,setLoading:s.setLoading,setEnhance:s.setEnhance,setCrop:a.setCrop},y=(0,n.connect)((e=>({enhanceCb:e.present.data.enhanceCb,enhanceEnabled:e.present.data.enhanceEnabled,disableCrop:e.present.data.disableCrop,settings:e.present.settings,helpers:e.present.data.helpers,langMap:e.present.data.langMap,originalWidth:e.present.data.originalWidth,originalHeight:e.present.data.originalHeight,photoUrl:e.present.data.photoUrl})),C)(w)},352207:(e,t,r)=>{r.d(t,{DrawPanel:()=>g});var o=r(474848),i=r(296540),n=r(506996),s=r(196058),a=r(514751),l=r(291718),c=r(290494),d=r(906110),h=r(251898);class u extends i.Component{constructor(e){super(e),this.componentDidMount=()=>{this.updateDrawingPreview()},this.render=()=>{const{settings:e,setColor:t,setBrushWidth:r,setBrushOpacity:i,avgColor:n,langMap:s}=this.props;return this.updateDrawingPreview(),(0,o.jsxs)("div",{className:h.default.root,children:[(0,o.jsx)("canvas",{ref:this.previewCanvas,width:d.DRAWING_PREVIEW_WIDTH*d.CANVAS_SCALE,height:d.DRAWING_PREVIEW_HEIGHT*d.CANVAS_SCALE,style:{width:d.DRAWING_PREVIEW_WIDTH,height:d.DRAWING_PREVIEW_HEIGHT}}),(0,o.jsxs)("div",{className:h.default.sliders,children:[(0,o.jsxs)("div",{className:h.default.slider,children:[(0,o.jsx)("div",{className:h.default.title,children:s?.photos_pe_intensity}),(0,o.jsx)(c.Slider,{min:0,max:1,isShowHandle:!0,defaultValue:e.brushOpacity,formatHint:e=>`${Math.round(100*e)}%`,onChange:e=>i(e)})]}),(0,o.jsxs)("div",{className:h.default.slider,children:[(0,o.jsx)("div",{className:h.default.title,children:s?.photos_pe_line_width}),(0,o.jsx)(c.Slider,{min:0,max:1,isShowHandle:!0,defaultValue:e.brushWidth,formatHint:e=>`${Math.round(100*e)}%`,onChange:e=>r(e)})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:h.default.title,children:s?.photos_pe_color}),(0,o.jsx)(a.ColorPicker,{color:e.color,avgColor:n,setColor:t})]})]})},this.updateDrawingPreview=()=>{const{current:e}=this.previewCanvas,{settings:t}=this.props;if(!e)return;const r=e.getContext("2d");if(!r)return;const{width:o,height:i}=r.canvas;r.clearRect(0,0,o,i);const n=d.CANVAS_SCALE,s=new Path2D(`M${69*n} ${65*n}L${93*n} ${41*n}L${121*n} ${69*n}L${149*n} ${41*n}L${177*n} ${69*n}L${201*n} ${45*n}`),a="#FFFFFF"===t.color?"#F1F1F1":t.color;r.lineWidth=t.brushWidth*d.BRUSH_WIDTH_COEFFICIENT*n,r.strokeStyle=(0,l.hexToRgba)(a,t.brushOpacity),r.lineJoin=r.lineCap="round",r.stroke(s)},this.previewCanvas=(0,i.createRef)()}}const p={setColor:s.setColor,setBrushWidth:s.setBrushWidth,setBrushOpacity:s.setBrushOpacity},g=(0,n.connect)((e=>({settings:e.present.settings,drawings:e.present.drawings,avgColor:e.present.layers.items[0].avgColor,langMap:e.present.data.langMap})),p)(u)},552819:(e,t,r)=>{r.d(t,{DrawingLayer:()=>m,drawingLayerSelector:()=>u});var o=r(474848),i=r(296540),n=r(506996),s=r(919552),a=r(775633),l=r(291718),c=r(8520),d=r(906110),h=r(561585);const u="photo-editor-drawing-layer",p=(e,t)=>{const r=e>t?e/t:t/e;return{canvasWidth:e>t?Math.round(1e3*r):1e3,canvasHeight:t>e?Math.round(1e3*r):1e3}};class g extends i.PureComponent{render(){const{data:e,width:t,height:r,ui:i}=this.props,{originalWidth:n,originalHeight:s}=e,{canvasWidth:a,canvasHeight:l}=p(n,s),g=(0,c.classNames)(h.default.canvas,h.default.draw,i.currentMode!==d.TABS.PAINT&&h.default.disabled,this.props.drawPriority&&h.default.drawUpper);return(0,o.jsx)("canvas",{ref:this.canvas,className:g,onMouseDown:this.drawStart,width:a,height:l,"data-name":u,style:{width:t,height:r}})}componentDidMount(){this.renderDrawings()}drawImage(){const{data:e,width:t,height:r,globalScale:o,shiftY:i,shiftX:n}=this.props,{current:s}=this.canvas,{originalWidth:a,originalHeight:l}=e,c=s?.getContext("2d");if(c&&s){const{canvasWidth:e,canvasHeight:d}=p(a,l);s.width=e,s.height=d,s.style.width=`${t}px`,s.style.height=`${r}px`,c.drawImage(s,n,i,e*o,d*o)}}componentDidUpdate(e){e.globalScale!==this.props.globalScale&&this.drawImage(),this.renderDrawings()}constructor(e){super(e),this.renderDrawings=()=>{const{drawings:e,globalScale:t,height:r,width:o,shiftX:i,shiftY:n,data:s}=this.props,{originalWidth:a,originalHeight:c}=s,{current:h}=this.canvas;if(!h)return;const u=h.getContext("2d");if(!u)return;const{canvasWidth:g,canvasHeight:_}=p(a*t,c*t),m=_/r,f=g/o,S=_/r*t;u.clearRect(0,0,h.width,h.height),u.lineCap="round",u.lineJoin="round",e.forEach((e=>{const t=S/e.scale,r=i*m,o=n*f;u.lineWidth=e.width*d.BRUSH_WIDTH_COEFFICIENT*S,u.strokeStyle=(0,l.hexToRgba)(e.color,e.opacity),u.beginPath(),u.moveTo(e.path[0][0]*t+r,e.path[0][1]*t+o),e.path.forEach((e=>{u.lineTo(e[0]*t+r+.01,e[1]*t+o+.01)})),u.stroke()}))},this.drawStart=e=>{const{globalScale:t,shiftX:r,shiftY:o}=this.props;if(this.props.ui.currentMode!==d.TABS.PAINT)return;window.addEventListener("mousemove",this.drawProcess),window.addEventListener("mouseup",this.drawFinish);const{x:i,y:n}=(0,l.getRelativeXY)(e.nativeEvent,this.canvas.current);this.currentDrawing=[[i-r,n-o]];const{settings:s}=this.props;this.props.addDrawing({color:s.color,width:s.brushWidth,opacity:s.brushOpacity,path:this.currentDrawing,scale:t,shiftX:r,shiftY:o}),this.props.data.helpers?.sendStat("add_graffiti"),this.renderDrawings()},this.drawProcess=e=>{const{x:t,y:r}=(0,l.getRelativeXY)(e,this.canvas.current),{shiftX:o,shiftY:i}=this.props;this.currentDrawing.push([t-o,r-i]),this.renderDrawings()},this.drawFinish=()=>{window.removeEventListener("mousemove",this.drawProcess),window.removeEventListener("mouseup",this.drawFinish),this.currentDrawing=[],this.renderDrawings()},this.canvas=(0,i.createRef)(),this.currentDrawing=[]}}const _={addDrawing:s.addDrawing,addLayerText:a.addLayerText},m=(0,n.connect)((e=>({ui:e.present.ui,settings:e.present.settings,drawings:e.present.drawings,data:e.present.data})),_)(g)},77755:(e,t,r)=>{r.d(t,{EditorCanvas:()=>O,editorCanvasSelector:()=>k,stickerTemplateSelector:()=>N});var o=r(474848),i=r(296540),n=r(506996),s=r(629484),a=r(775633),l=r(922679),c=r(175910),d=r(196058),h=r(552819),u=r(738877),p=r(532265),g=r(637409),_=r(765159),m=r(56191),f=r(753457),S=r(856554),v=r(8520),E=r(160864),T=r(31994),w=r(846217),C=r(906110),y=r(160914),x=r(107871),b=r(917891),I=r(299867),R=r(547399),A=r(366765);const k="editor-canvas",N="sticker-template";class L extends i.Component{componentWillUnmount(){this.canvasRef.current instanceof HTMLDivElement&&this.canvasRef.current.removeEventListener("wheel",this.onWheelAction)}constructor(e){super(e),this.render=()=>this.renderCanvas(),this.componentDidMount=()=>{this.canvasRef.current instanceof HTMLDivElement&&this.canvasRef.current.addEventListener("wheel",this.onWheelAction,{passive:!1})},this.onWheelAction=e=>{const{ui:t,data:r,globalScale:o,layers:i}=this.props,{shiftX:n,shiftY:s}=i,{artboardWidth:a,originalWidth:l,isRedesignEnabled:c}=r,d=l/a,h=a*d/(a*o),u=e.offsetX*h-n*h,p=e.offsetY*h-s*h,g=e=>{if(!c)return;if(t.currentMode===C.TABS.CROP)return;const r=this.props.globalScale||1;r+e>this.props.defaultScale+3?this.props.setLayersScale(this.props.defaultScale+3,!1,{x:u/d,y:p/d}):r+e<this.props.defaultScale?this.props.setLayersScale(this.props.defaultScale,!1,{x:u/d,y:p/d}):this.props.setLayersScale(r+e,!1,{x:u/d,y:p/d})};g(e.deltaY<0?.05:-.05),e.preventDefault()},this.getMaskPhotoEditorApi=(e,t)=>{const{settings:r,data:o,setLoading:i}=this.props,{segmentationCb:n}=o,s=r.segmentation?.mode,{segmentation:a}=this.props;if(!n)return;const l=[...a?.clicks||[],{col:Math.round(e),row:Math.round(t),positive:"positive"===s}];i({segmentation:!0}),n(l,a?.mask||"",(r=>{r?this.props.setSegmentationData({click:{col:Math.round(e),row:Math.round(t),positive:"positive"===s},mask:r}):this.props.setSegmentation({mode:"positive",enabled:!1}),i({segmentation:!1})})),"positive"===s?this.props.data.helpers?.sendStat("select_object"):this.props.data.helpers?.sendStat("delete_selection")},this.renderCanvas=()=>{const{layers:e,background:t,data:r,ui:n,settings:s,langMap:a,globalScale:l,setLayersShift:c}=this.props,{artboardWidth:d,artboardHeight:L,attachment:P,originalWidth:O,isRedesignEnabled:D,initialCrop:M,initialCropType:B}=r,{currentIndex:F,items:H,shiftX:U,shiftY:j}=this.props.layers,{croppedWidth:W,croppedHeight:G,containerHeight:z,containerWidth:Y}=s,V="zoom"===B,X=null!==F&&H[F],K=!e.items[0].locked,Z=X&&X.type===C.LAYER_TYPES.TEXT&&X.isEdit,q=void 0===this.props.data.serviceInfo?.allow_background_editor||Boolean(this.props.data.serviceInfo?.allow_background_editor),$=this.props.ui.isDataLoaded&&this.props.data.context===C.CONTEXT_TYPES.STORY,Q=(0,v.isNumber)(z)?z:L,J=(0,v.isNumber)(Y)?Y:d,ee=n.currentMode===C.TABS.COLOR&&s.blur.isEnabled||n.currentMode===C.TABS.BLUR&&s.blur.isEnabled,te=(0,v.classNames)(y.default.root,ee&&y.default.blurCursor,D&&y.default.roundedCanvas),re=O/d,oe=(0,o.jsx)("div",{className:y.default.postIconToolTip,children:a?.photos_pe_attached_post}),ie=D?this.props.marginTop+8:this.props.marginTop,ne=this.props?.stickers?.find((e=>"native"===e.sticker_type&&"situational_template"===e.sticker.action_type)),se=(0,A.nativeStickerTypeGuard)(ne)&&(0,A.situationalTemplateTypeGuard)(ne.sticker);return(0,o.jsxs)("div",{style:{width:J,height:Q,marginTop:ie},"data-name":k,className:te,ref:this.canvasRef,children:[this.props.ui.isDataLoaded&&n.currentMode===C.TABS.CROP&&(0,o.jsx)(I.NewCropControls,{width:J,height:Q,artboardWidth:d,artboardHeight:L,initialCrop:M}),V&&(0,o.jsx)(R.ViewportHandler,{move:(e,t)=>c(e,t,!1)}),n.currentMode===C.TABS.SEGMENTATION&&(0,o.jsx)(x.SegmentationPane,{globalScale:l,width:d,height:Q,shiftX:U,shiftY:j,croppedWidth:W,croppedHeight:G,aspectRatio:re,mode:s.segmentation.enabled?s.segmentation.mode:void 0,loading:Boolean(s.loading.segmentation),click:this.getMaskPhotoEditorApi}),(0,o.jsx)(p.Layers,{setLayerScale:this.props.setLayerScale,startLayerScale:this.props.startLayerScale,toggleTextEditor:this.props.toggleTextEditor,currentMode:this.props.ui.currentMode,getStickerUrlById:this.props.getStickerUrlById,layers:e,globalScale:l,context:this.props.data?.context,deleteLayerAction:this.props.deleteLayer,isRedesignEnabled:D}),Z&&X?(0,o.jsx)(g.EditorText,{layer:X,onChange:this.onChangeText,closeTextEditor:this.props.closeTextEditor,sendStat:this.props.data.helpers?.sendStat}):$&&(0,o.jsxs)(i.Fragment,{children:[Boolean(P)&&!n.isShowDropBox&&(0,o.jsx)(f.Tooltip,{text:oe,children:(0,o.jsx)("span",{className:y.default.postIcon,children:(0,o.jsx)(E.Icon16Repost,{})})}),!n.isShowDropBox&&!this.props.data.locked&&this.props.background.currentBackgroundType===C.BACKGROUND_MODES.PHOTO&&[C.TABS.STICKERS,C.TABS.TEXT,null].includes(this.props.ui.currentMode)&&(0,o.jsx)("button",{className:y.default.scaleButton,onClick:this.onClickScaleButton,children:K?(0,o.jsx)(T.Icon24Fullscreen,{}):(0,o.jsx)(w.Icon24FullscreenExit,{})}),!n.isShowDropBox&&(0,o.jsx)("div",{className:(0,v.classNames)(y.default.switchMode,Boolean(se)&&y.default.switchModeAtTop),children:(0,o.jsx)(_.SwitchMode,{allowBackgroundChange:q,current:t.currentBackgroundType,setMode:this.props.setMode,sendStat:this.props.data?.helpers?.sendStat})})]}),this.props.ui.isDataLoaded&&se&&(0,o.jsx)("div",{className:(0,v.classNames)(y.default.templateSticker,N),style:{top:`calc(${Math.abs(ne.sticker.transform?.translation_y||-.8)} * 100%)`},children:(0,o.jsx)(S.UsersStackWithCaption,{count:(0,A.situationalTemplateTypeGuard)(ne.sticker)&&ne.sticker?.action?.count||0,photos:(0,A.situationalTemplateTypeGuard)(ne.sticker)&&ne.sticker?.action?.users?.map((e=>e.photo_100))||[],caption:a?.photos_pe_sticker_template,stopButtonPropagation:!0})}),!D&&n.isShowDropBox&&X&&X.canDelete&&(0,o.jsx)(m.DropBox,{onDelete:this.props.deleteLayer}),this.props.ui.isDataLoaded&&(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)(h.DrawingLayer,{width:d,height:L,globalScale:l,shiftX:U,shiftY:j,drawPriority:Boolean(se)}),(0,o.jsx)(b.SegmentationLayer,{globalScale:l,shiftX:U,shiftY:j,width:d,height:L})]}),this.props.ui.isDataLoaded&&(0,o.jsx)(u.ImageLayer,{width:d,height:L})]})},this.onClickScaleButton=()=>{const e=this.props.layers.items[0],t={},{artboardWidth:r,artboardHeight:o}=this.props.data,i=e.height/e.width;let n,s;i>1.77?(s=o,n=s/i):(n=r,s=r*i);const a=r/2,l=o/2;e.locked?(this.props.data.helpers?.sendStat("zoom"),Object.assign(t,{locked:!1,scale:.7})):(this.props.data.helpers?.sendStat("unzoom"),Object.assign(t,{locked:!0,rotate:0,x:a,y:l,width:n,height:s,scale:1})),this.props.updateBackgroundLayer(t),this.props.setCurrentLayer(e.locked?0:null)},this.onChangeText=e=>{this.props.setLayerText(e)},this.canvasRef=(0,i.createRef)()}}const P={addLayerText:a.addLayerText,setCurrentBackgroundId:l.setCurrentBackgroundId,setLayerScale:a.setLayerScale,startLayerScale:a.startLayerScale,setLayerText:a.setLayerText,toggleTextEditor:a.toggleTextEditor,deleteLayer:a.deleteLayer,updateBackgroundLayer:a.updateBackgroundLayer,setCurrentLayer:a.setCurrentLayer,setBackgroundType:l.setBackgroundType,closeTextEditor:a.closeTextEditor,setSegmentationData:c.setSegmentationData,setSegmentation:d.setSegmentation,setLoading:d.setLoading,setLayersScale:a.setLayersScale,setLayersShift:a.setLayersShift},O=(0,n.connect)((e=>({ui:e.present.ui,settings:e.present.settings,layers:e.present.layers,drawings:e.present.drawings,background:e.present.background,data:e.present.data,marginTop:(0,s.getMarginTop)(e),langMap:e.present.data.langMap,globalScale:e.present.layers.globalScale,defaultScale:e.present.layers.defaultScale,segmentation:e.present.ml.segmentation})),P)(L)},478611:(e,t,r)=>{r.d(t,{FiltersItem:()=>f});var o=r(474848),i=r(296540),n=r(629484),s=r(506996),a=r(80157),l=r(801013),c=r(196058),d=r(291718),h=r(8520),u=r(511617),p=r(906110),g=r(882762);class _ extends i.Component{componentDidMount(){this.update(this.props.currentBackgroundUrl)}render(){const{langMap:e}=this.props,t=this.props.currentFilterName===this.props.filter,r=(0,h.classNames)(g.default.root,t&&g.default.active),i=t?(0,o.jsx)("div",{className:g.default.checked,children:(0,o.jsx)(u.Icon16Done,{})}):null;return(0,o.jsx)("div",{className:r,onClick:this.handleClick,children:(0,o.jsxs)("div",{className:g.default.inner,style:{width:p.FILTER_PREVIEW_WIDTH},children:[(0,o.jsx)("canvas",{className:g.default.image,ref:this.canvas,width:p.FILTER_PREVIEW_WIDTH*p.CANVAS_SCALE,height:p.FILTER_PREVIEW_HEIGHT*p.CANVAS_SCALE,style:{width:p.FILTER_PREVIEW_WIDTH,height:p.FILTER_PREVIEW_HEIGHT}}),(0,o.jsx)("span",{className:g.default.name,children:this.getFilterLang(this.props.filter,e)}),i]})})}getFilterLang(e,t){if(t)switch(e){case"regular":return t.photos_pe_filter_regular;case"nox":return t.photos_pe_filter_nox;case"vesper":return t.photos_pe_filter_vesper;case"latona":return t.photos_pe_filter_latona;case"liber":return t.photos_pe_filter_liber;case"luna":return t.photos_pe_filter_luna;case"minerva":return t.photos_pe_filter_minerva;case"mitra":return t.photos_pe_filter_mitra;case"pro":return t.photos_pe_filter_pro;case"terra":return t.photos_pe_filter_terra;case"veles":return t.photos_pe_filter_veles;case"vesta":return t.photos_pe_filter_vesta;case"zaria":return t.photos_pe_filter_zaria;case"sepia":return t.photos_pe_filter_sepia;case"genius":return t.photos_pe_filter_genius;case"horus":return t.photos_pe_filter_horus;case"fortuna":return t.photos_pe_filter_fortuna;default:return}}update(e){e&&l.imageCacheGlobal.get(e).then((e=>{this.renderImage(e)})).catch((e=>{console.error(e)}))}renderImage(e){this.renderer.render(p.FILTER_PREVIEW_WIDTH*p.CANVAS_SCALE,p.FILTER_PREVIEW_HEIGHT*p.CANVAS_SCALE,e,this.props.filter,{amount:.75,sourceSize:[e.width,e.height]}).then((t=>{if(!t)return;const r=this.canvas.current;if(!r)return;const o=r.getContext("2d");if(!o)return;const i=+(e.height/e.width).toFixed(2);let n,s;i>1.77?(n=r.height/i,s=r.height):(n=r.width,s=r.width*i);const a=r.width/2-n/2,l=r.height/2-s/2;(0,d.drawBlurFromImage)(r,t,this.props.avgColor),o.drawImage(t,a,l,n,s)})).catch((e=>{console.error(new Error(e))}))}constructor(e){super(e),this.shouldComponentUpdate=e=>{const{currentBackgroundUrl:t,currentFilterName:r}=this.props,o=t!==e.currentBackgroundUrl;return r!==e.currentFilterName||(o&&this.update(e.currentBackgroundUrl),!1)},this.handleClick=()=>{this.props.setFilter(this.props.filter),"regular"===this.props.filter?this.props.helpers?.sendStat("remove_filter"):this.props.helpers?.sendStat("add_filter")},this.canvas=(0,i.createRef)(),this.renderer=new a.Renderer}}const m={setFilter:c.setFilter},f=(0,s.connect)((e=>({currentFilterName:e.present.settings.filter.name,currentBackgroundUrl:(0,n.getCurrentImageUrl)(e),helpers:e.present.data.helpers,langMap:e.present.data.langMap})),m)(_)},786374:(e,t,r)=>{r.d(t,{FilterPreview:()=>d});var o=r(474848),i=r(296540),n=r(80157),s=r(801013),a=r(291718),l=r(906110),c=r(852485);function d({className:e,width:t,height:r,filterName:d,intensity:h=.75}){const u=(0,c.useBackgroundUrl)(),p=(0,c.useAvgColor)(),g=(0,i.useRef)(null),_=(0,i.useMemo)((()=>new n.Renderer),[]);return(0,i.useLayoutEffect)((()=>{const e=g.current,t=e?.getContext("2d");(async function(){if(!e||!t||!u)return;const r=await s.imageCacheGlobal.get(u),o=await _.render(e.width,e.height,r,d,{amount:h,sourceSize:[r.naturalWidth,r.naturalHeight]}),i=e.width/e.height,n=r.naturalWidth/r.naturalHeight;let l,c;n>i?(l=e.height*n,c=e.height):(l=e.width,c=e.width/n);const g=e.width/2-l/2,m=e.height/2-c/2;(0,a.drawBlurFromImage)(e,o,p),t.drawImage(o,g,m,l,c)})().catch((e=>console.error(e)))}),[d,h,_,u]),(0,o.jsx)("canvas",{className:e,ref:g,width:t*l.CANVAS_SCALE,height:r*l.CANVAS_SCALE,style:{width:t,height:r}})}},996879:(e,t,r)=>{r.d(t,{FiltersPanel:()=>p});var o=r(474848),i=r(296540),n=r(478611),s=r(196058),a=r(506996),l=r(290494),c=r(906110),d=r(641350);class h extends i.Component{render(){return(0,o.jsxs)("div",{className:d.default.root,children:[(0,o.jsx)("div",{className:d.default.header,children:this.renderHeader()}),(0,o.jsx)("div",{className:d.default.inner,children:c.PHOTO_FILTERS.map((e=>(0,o.jsx)(n.FiltersItem,{avgColor:this.props.avgColor,filter:e},e)))})]})}renderHeader(){const{settings:e,langMap:t}=this.props;return"regular"===e.filter.name?(0,o.jsx)("span",{children:t?.photos_pe_filter_disabled}):(0,o.jsxs)("div",{className:d.default.slider,children:[(0,o.jsx)("span",{className:d.default.title,children:t?.photos_pe_filter_enabled}),(0,o.jsx)(l.Slider,{min:0,max:1,value:e.filter.value,isShowHandle:!0,onChange:this.props.setFilterAmount,formatHint:e=>`${Math.round(100*e)}%`})]})}}const u={setFilterAmount:s.setFilterAmount},p=(0,a.connect)((e=>({settings:e.present.settings,avgColor:e.present.layers.items[0].avgColor,langMap:e.present.data.langMap})),u)(h)},738877:(e,t,r)=>{r.d(t,{ImageLayer:()=>S,imageLayerSelector:()=>_});var o=r(474848),i=r(296540),n=r(506996),s=r(629484),a=r(775633),l=r(291718),c=r(801013),d=r(80157),h=r(906110),u=r(8520),p=r(540276);const g={},_="photo-editor-image-layer";class m extends i.PureComponent{componentDidMount(){this.update(!1)}componentDidUpdate(e){const{originalWidth:t,originalHeight:r,background:o}=this.props,i=t!==e.originalWidth||r!==e.originalHeight;this.needUpdateSize=i||JSON.stringify(o)!==JSON.stringify(e.background),this.update()}render(){const{originalWidth:e,originalHeight:t}=this.props;return(0,o.jsx)("canvas",{ref:this.canvas,className:p.default.root,width:e,height:t,"data-name":_,style:{width:this.props.width,height:this.props.height}})}update(e=!0){const{currentBackgroundUrl:t,enhance:r}=this.props;let o=t;r?.active&&r?.url&&(o=r.url),o&&c.imageCacheGlobal.get(o).then((t=>{this.renderImage(t,e)})).catch((e=>{console.error(e)}))}renderImage(e,t){const{current:r}=this.canvas;if(!r)return;if(!r.getContext("2d"))return;const{background:o}=this.props;let{colorCorrection:i,filter:n,blur:s,isAutoCorrection:a}=this.props;o.currentBackgroundType===h.BACKGROUND_MODES.BACKGROUND&&(n={name:h.PHOTO_FILTERS[0],value:0},i={exposure:0,contrast:0,saturation:0,warmth:0,vignette:0,sharpness:0,grain:0},s={isEnabled:!1,form:s.form,size:s.size,radius:s.radius,position:s.position},a=!1);const c={exposure:i.exposure,contrast:i.contrast,saturation:i.saturation,warmth:i.warmth,amount:n.value,vignette:i.vignette,sharpness:i.sharpness,grain:i.grain,sourceSize:[e.width,e.height]};this.renderer.render(e.width,e.height,e,n.name,c,s,a).then((o=>{if(!o)return;let i=this.props.width,n=this.props.height;const s=e.height/e.width;"story"===this.props.context&&(s>1.77?(i=this.props.height/s,n=this.props.height):(i=this.props.width,n=this.props.width*s));const a=Math.floor(this.props.width/2),c=Math.floor(this.props.height/2),d=(0,l.copyCanvas)(o);let h=g[e.src];h||(g[e.src]=(0,l.getAverageRGB)(d),h=g[e.src]),(0,l.drawBlurFromImage)(r,d,h);const u={canvas:d,width:i,height:n,avgColor:h};this.needUpdateSize&&Object.assign(u,{x:a,y:c,locked:!0,rotate:0,scale:1}),this.props.updateBackgroundLayer(u,t),this.firstRender&&(this.props.renderTime(performance.now()-this.props.renderStart),this.firstRender=!1)})).catch((e=>{console.error(new Error(e))}))}constructor(e){super(e),this.firstRender=!0,this.canvas=(0,i.createRef)(),this.renderer=new d.Renderer,this.needUpdateSize=!0}}const f={updateBackgroundLayer:a.updateBackgroundLayer},S=(0,n.connect)((e=>({currentBackgroundUrl:(0,s.getCurrentImageUrl)(e),originalWidth:e.present.data.originalWidth,originalHeight:e.present.data.originalHeight,background:e.present.background,isAutoCorrection:e.present.settings.isAutoCorrection,colorCorrection:e.present.settings.colorCorrection,filter:e.present.settings.filter,blur:e.present.settings.blur,ml:e.present.ml,enhance:e.present.settings.enhance,renderTime:e.present.data.helpers?.renderTime||u.noop,renderStart:e.present.data.renderStart,context:e.present.data.context})),f)(m)},160952:(e,t,r)=>{r.d(t,{MainMenu:()=>k});var o=r(474848),i=r(296540),n=r(102846),s=r(798320),a=r(890589),l=r(185372),c=r(510348),d=r(4030),h=r(936419),u=r(235728),p=r(235930),g=r(979337),_=r(846696),m=r(453076),f=r(906110),S=r(852485),v=r(931977),E=r(963239),T=r(815443),w=r(339),C=r(210725),y=r(144187),x=r(36919),b=r(845471),I=r(883707),R=r(967193);const A=({className:e,enableCrop:t,stickersTab:r,allowAutoColorCorrection:i,allowUpscaling:A,onAutoColorCorrectionToggle:k,onUpscaleToggle:N,onMenuItemClicked:L,before:P,after:O})=>{const D=(0,S.useCurrentMode)(),M=(0,S.useLangMap)()||{},B=(0,S.useNewFeaturesCheck)(),F=(0,S.useSnapshot)((e=>Boolean(e.settings.isAutoCorrection))),H=(0,S.useSnapshot)((e=>!0===e.settings.enhance?.active)),U=(0,S.useSnapshot)((e=>e.settings.loading.enhance)),j=e=>String(M[e]??e),W=[{type:"action_cancellable",key:f.TABS.AUTO_COLORS,icon:(0,o.jsx)(s.Icon24MagicWandOutline,{width:20,height:20}),label:j("photos_pe_correction_auto"),labelActive:(G="photos_pe_correction_auto_enabled_short",(0,o.jsx)(n.InnerHTML,{children:j(G)??""})),disabled:!i,active:F,onChange:k},{type:"action_cancellable",key:f.TABS.IMAGE_UPSCALE,icon:(0,o.jsx)(a.Icon20FullscreenOutline,{}),label:j("photos_pe_upscale"),labelActive:j("photos_pe_upscale_short"),active:H,disabled:!A,loading:U,onChange:N},{type:"submenu",key:"smart_removal",icon:(0,o.jsx)(l.Icon20BrushOutline,{}),label:j("photos_pe_tool_object_removal"),disabled:!0,panel:(0,o.jsx)("span",{children:"Not implemented"})},{type:"submenu",key:f.TABS.CROP,icon:(0,o.jsx)(c.Icon20CropOutline,{}),label:j("photos_pe_tool_crop"),disabled:!t,panel:(0,o.jsx)(R.NewCropPanel,{})},{type:"submenu",key:f.TABS.FILTERS,icon:(0,o.jsx)(d.Icon20ImageFilterOutline,{}),label:j("photos_pe_tool_filters"),panel:(0,o.jsx)(T.NewFiltersPanel,{})},{type:"submenu",key:f.TABS.TEXT,icon:(0,o.jsx)(h.Icon20TextOutline,{}),label:j("photos_pe_tool_text"),panel:(0,o.jsx)(w.NewTextPanel,{})},{type:"submenu",key:f.TABS.PAINT,icon:(0,o.jsx)(l.Icon20BrushOutline,{}),label:j("photos_pe_tool_brush"),panel:(0,o.jsx)(C.NewDrawPanel,{})},{type:"submenu",key:f.TABS.STICKERS,icon:(0,o.jsx)(u.Icon20StickerSmileOutline,{}),label:j("photos_pe_tool_stickers"),disabled:null==r,panel:r||(0,o.jsx)("br",{})},{type:"submenu",key:f.TABS.SEGMENTATION,icon:(0,o.jsx)(p.Icon20AddCircleOutline,{}),label:j("photos_pe_tool_segmentation"),disabled:!B,panel:(0,o.jsx)(y.SegmentationPanelComponent,{})},{type:"submenu",key:f.TABS.BLUR,icon:(0,o.jsx)(g.Icon24BlurOutline,{width:20,height:20}),label:j("photos_pe_tool_blur"),panel:(0,o.jsx)(x.BlurPanel,{})},{type:"submenu",key:f.TABS.COLOR,icon:(0,o.jsx)(_.Icon20FilterOutline,{}),label:j("photos_pe_tool_color_correction"),panel:(0,o.jsx)(b.ColorCorrectionPanel,{newDesign:!0})},{type:"submenu",key:f.TABS.COLLAGE,icon:(0,o.jsx)(m.Icon20Grid4UnevenVerticalOutline,{}),label:j("photos_pe_tool_collage"),disabled:!0,panel:(0,o.jsx)(I.CollagePanel,{})}];var G;return(0,o.jsx)(E.EditorMainMenu,{className:e,menuItems:W,onChange:e=>{L?.(e),(0,v.currentTabAction)(e)},activePanel:D,before:P,after:O})},k=(0,i.memo)(A)},335871:(e,t,r)=>{r.d(t,{Navigator:()=>p});var o=r(474848),i=r(296540),n=r(801013),s=r(8520),a=r(775633),l=r(506996),c=r(852485),d=r(530114);function h(e,t,r){return Math.max(t,Math.min(e,r))}const u={s:137.68,m:171.92,l:224.76},p=({className:e,size:t="m"})=>{const r=(0,i.useRef)(null),p=(0,i.useRef)(null),g=(0,i.useRef)(null),_=(0,i.useRef)({top:0,left:0}),m=(0,i.useRef)(!1),f=(0,l.useDispatch)(),S=(0,c.useBackgroundUrl)(),v=(0,c.useCropSettings)(),{artboardWidth:E,artboardHeight:T}=(0,c.useArtboardSizes)(),{canvasWidth:w,canvasHeight:C,realScale:y,visibleRectWidth:x,visibleRectHeight:b,visibleRectX:I,visibleRectY:R,scaledBaseLayerShiftX:A,scaledBaseLayerShiftY:k,scaledMaxLayerShiftX:N,scaledMaxLayerShiftY:L}=(0,c.useViewportSizes)(),P=N-A,O=L-k,D=P<=0?0:I*y/P,M=O<=0?0:R*y/O,B=u[t],[F,H]=function(e,t,r=156){const o=r/Math.sqrt(Math.pow(e,2)+Math.pow(t,2));return[Math.round(e*o),Math.round(t*o)]}(w,C,B),U=F/w,j=E*U,W=T*U,G=v.disableCropRestrictions?0:v.croppedX*U,z=v.disableCropRestrictions?0:v.croppedY*U,Y=Math.round(x*U),V=Math.round(b*U);let X=Math.round((F-Y)*D),K=Math.round((H-V)*M);X=Math.min(X,F-Y),K=Math.min(K,H-V);const Z=(e,t)=>{const r=-1*(A+P*e),o=-1*(k+O*t);return f((0,a.setLayersShift)(r,o,!0))},q=e=>{const t=Y/2,r=F-Y/2,o=V/2,i=H-V/2,n=_.current,s=h(e.clientX-n.left,t,r),a=h(e.clientY-n.top,o,i);return[(s-t)/(F-Y),(a-o)/(H-V)]};function $(){if(!r.current)return;const{top:e,left:t}=r.current.getBoundingClientRect();_.current.top=e,_.current.left=t}const Q=e=>{const[t,r]=q(e);m.current=!0,Z(t,r)},J=()=>{m.current=!1,window.removeEventListener("mousemove",Q),window.removeEventListener("mouseup",J),window.removeEventListener("blur",J)};(0,i.useEffect)((()=>J),[]);function ee(){const e=g.current;e&&(e.style.width=`${j}px`,e.style.height=`${W}px`,e.style.transform=`translate(-${G}px, -${z}px)`)}function te(e=!1){const t={width:Y,height:V,transform:`translate(${X}px, ${K}px)`,"--shadow-spread":`0 0 0 ${Math.ceil(Math.max(F,H))}px`};return(0,o.jsx)("div",{className:(0,s.classNames)(d.default.rectangle,e&&d.default.shadowRect,m.current&&d.default.rectangleNoTransitions),style:t})}return(0,i.useLayoutEffect)((()=>{S&&n.imageCacheGlobal.get(S).then((e=>{if(!p.current)return;const t=e.cloneNode();t.alt="",t.className=d.default.image,t.draggable=!1,g.current=t,ee(),p.current.appendChild(t)}))}),[S]),(0,i.useLayoutEffect)((()=>{ee()}),Object.values(v)),(0,i.useLayoutEffect)((()=>{$()}),[F,H]),(0,o.jsxs)("div",{className:(0,s.classNames)(d.default.root,e),style:{width:F,height:H},onMouseDown:e=>{if(0!==e.button)return;e.preventDefault(),$();const[t,r]=q(e);Z(t,r),window.addEventListener("mousemove",Q),window.addEventListener("mouseup",J),window.addEventListener("blur",J)},ref:r,children:[(0,o.jsx)("div",{className:d.default.imageContainer,ref:p}),(0,o.jsx)("div",{className:d.default.rectContainer,children:te(!0)}),te(!1)]})}},299867:(e,t,r)=>{r.d(t,{NewCropControls:()=>v});var o=r(474848),i=r(296540),n=r(533048),s=r(196058),a=r(404245),l=r(775633),c=r(506996),d=r(629484),h=r(291718),u=r(8520),p=r(906110),g=r(669270),_=r(931977);const m=(e,t,r,o,i,n)=>{if(n)return{x:n.croppedX,y:n.croppedY,width:n.croppedWidth,height:n.croppedHeight};const s=o||r,a=i||t;[p.CROP_ASPECT_ORIGINAL,p.CROP_ASPECT_FREE].includes(e)&&(e=a/s);let l=a,c=l/e;return c>s&&(c=s,l=c*e),{x:a/2-l/2,y:s/2-c/2,width:l,height:c}};class f extends i.Component{shouldComponentUpdate(e){const{initialCrop:t,cropUseInitial:r}=this.props;return e.cropAspect===this.props.cropAspect&&e.width===this.props.width&&e.height===this.props.height&&e.cropUseInitial===r||(e.cropUseInitial?this.setState(m(e.cropAspect,e.width,e.height,void 0,void 0,t)):this.setState(m(e.cropAspect,e.width,e.height))),!0}checkIsInitialCropChanged(){const{initialCrop:e}=this.props,{x:t,y:r,width:o,height:i}=this.state;if(e){const{croppedX:n,croppedY:s,croppedWidth:a,croppedHeight:l}=e;return t!==n||r!==s||o!==a||i!==l}return!0}render(){const{artboardWidth:e,artboardHeight:t,langMap:r,settings:i,initialCrop:s}=this.props,{containerHeight:a,containerWidth:l}=i,{x:c,y:d,width:h,height:_,isButtonDisable:m}=this.state,f=a||t,S=h<210,v=S?100:60,E=(0,u.classNames)(g.default.buttons,d+_+v>=f&&g.default.buttonsTop,S&&g.default.buttonsSmall),T=l||e,w=a||t,C=Math.round(100*h)/100!=Math.round(100*T)/100||Math.round(100*_)/100!=Math.round(100*w)/100,y=s?C&&this.checkIsInitialCropChanged():C;return(0,o.jsx)("div",{className:g.default.root,ref:this.containerEl,children:(0,o.jsxs)("div",{className:g.default.inner,ref:this.areaEl,style:{top:d,left:c,width:h,height:_},children:[y&&(0,o.jsxs)("div",{className:E,children:[(0,o.jsx)(n.Button,{size:"s",mode:"secondary",appearance:"overlay",onClick:()=>{this.reset(T,w),this.props.data.helpers?.sendStat("cancel_crop")},"data-testid":"phCropCancel",children:r?.photos_pe_crop_cancel}),(0,o.jsx)("div",{className:g.default.separator}),(0,o.jsx)(n.Button,{size:"s",onClick:this.cropImage,appearance:"overlay",disabled:m,"data-testid":"phCropApply",children:r?.photos_pe_crop_apply})]}),(0,o.jsxs)("div",{className:g.default.grid,onMouseDown:e=>this.controlMouseDown(e,p.CROP_SIDES.CENTER),children:[(0,o.jsx)("div",{className:(0,u.classNames)(g.default.line,g.default.lineV),style:{left:"33.3333%"}}),(0,o.jsx)("div",{className:(0,u.classNames)(g.default.line,g.default.lineV),style:{left:"66.6666%"}}),(0,o.jsx)("div",{className:(0,u.classNames)(g.default.line,g.default.lineH),style:{top:"33.3333%"}}),(0,o.jsx)("div",{className:(0,u.classNames)(g.default.line,g.default.lineH),style:{top:"66.6666%"}}),(0,o.jsx)("div",{className:(0,u.classNames)(g.default.handleCorner,g.default.handleCornerNw),onMouseDown:e=>this.controlMouseDown(e,p.CROP_SIDES.NW)}),(0,o.jsx)("div",{className:(0,u.classNames)(g.default.handleCorner,g.default.handleCornerNe),onMouseDown:e=>this.controlMouseDown(e,p.CROP_SIDES.NE)}),(0,o.jsx)("div",{className:(0,u.classNames)(g.default.handleCorner,g.default.handleCornerSw),onMouseDown:e=>this.controlMouseDown(e,p.CROP_SIDES.SW)}),(0,o.jsx)("div",{className:(0,u.classNames)(g.default.handleCorner,g.default.handleCornerSe),onMouseDown:e=>this.controlMouseDown(e,p.CROP_SIDES.SE)}),this.props.cropAspect===p.CROP_ASPECT_FREE&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:(0,u.classNames)(g.default.handle,g.default.handleN),onMouseDown:e=>this.controlMouseDown(e,p.CROP_SIDES.N)}),(0,o.jsx)("div",{className:(0,u.classNames)(g.default.handle,g.default.handleS),onMouseDown:e=>this.controlMouseDown(e,p.CROP_SIDES.S)}),(0,o.jsx)("div",{className:(0,u.classNames)(g.default.handle,g.default.handleW),onMouseDown:e=>this.controlMouseDown(e,p.CROP_SIDES.W)}),(0,o.jsx)("div",{className:(0,u.classNames)(g.default.handle,g.default.handleE),onMouseDown:e=>this.controlMouseDown(e,p.CROP_SIDES.E)})]})]})]})})}constructor(e){super(e),this.controlMouseDown=(e,t)=>{e.stopPropagation();const{current:r}=this.areaEl;if(!r)return;window.addEventListener("mousemove",this.controlMouseMove),window.addEventListener("mouseup",this.controlMouseUp);const{x:o,y:i}=(0,h.getRelativeXY)(e.nativeEvent,r);this.shiftX=o,this.shiftY=i,this.initCrop=this.state,this.side=t},this.controlMouseMove=e=>{const{current:t}=this.containerEl;if(!t||void 0===this.shiftX||void 0===this.shiftY||void 0===this.initCrop||void 0===this.side)return;const r=this.state,{artboardWidth:o,artboardHeight:i,cropAspect:n}=this.props,s=n===p.CROP_ASPECT_ORIGINAL?o/i:n,{x:a,y:l,width:c,height:d}=(0,h.getRelativeXY)(e,t);let u=r.x,g=r.y,_=r.width,m=r.height,f=p.CROP_MIN_SIZE,S=p.CROP_MIN_SIZE;if(s&&(s>1?f=p.CROP_MIN_SIZE*s:s<1&&(S=p.CROP_MIN_SIZE/s)),this.side===p.CROP_SIDES.CENTER)u=Math.min(Math.max(0,a-this.shiftX),c-_),g=Math.min(Math.max(0,l-this.shiftY),d-m);else{const e=Math.max(0,a-this.shiftX),t=Math.max(0,l-this.shiftY);switch(this.side){case p.CROP_SIDES.S:m=l-g-(this.shiftY-this.initCrop.height);break;case p.CROP_SIDES.N:g=t,m-=g-r.y;break;case p.CROP_SIDES.W:u=e,_-=u-r.x;break;case p.CROP_SIDES.E:_=a-u-(this.shiftX-this.initCrop.width);break;case p.CROP_SIDES.NW:u=e,g=t,_-=u-r.x,m-=g-r.y;break;case p.CROP_SIDES.NE:g=t,_=a-u-(this.shiftX-this.initCrop.width),m-=g-r.y;break;case p.CROP_SIDES.SW:u=e,_-=u-r.x,m=l-g-(this.shiftY-this.initCrop.height);break;case p.CROP_SIDES.SE:_=a-u-(this.shiftX-this.initCrop.width),m=l-g-(this.shiftY-this.initCrop.height)}if(s){let e=Math.min(_,c-u)/s;if([p.CROP_SIDES.NW,p.CROP_SIDES.NE].includes(this.side)&&(g=Math.max(0,g+m-e)),d-(g+e)<-.1)return;m=e}_=Math.min(Math.max(f,_),c-u),m=Math.min(Math.max(S,m),d-g),_-f<=0&&(u=r.x,_=r.width),m-S<=0&&(g=r.y,m=r.height)}this.setState({x:u,y:g,width:_,height:m})},this.controlMouseUp=()=>{window.removeEventListener("mousemove",this.controlMouseMove),window.removeEventListener("mouseup",this.controlMouseUp),delete this.shiftX,delete this.shiftY,delete this.initCrop,delete this.side},this.cropImage=()=>{const{width:e,height:t,x:r,y:o}=this.state,{layers:i,artboardWidth:n,artboardHeight:s,setCropSettings:a,setLayersScale:l,settings:c,width:d,height:h,originalWidth:p}=this.props,{croppedY:g,croppedX:_,croppedWidth:m,croppedHeight:f}=c,{globalScale:S}=i;this.setState({isButtonDisable:!0});if(!document.createElement("canvas").getContext("2d"))return;const v=(0,u.isNumber)(m)?m-(d-e)/S:e,E=(0,u.isNumber)(f)?f-(h-t)/S:t,T=n/s,w=v/E;let C,y,x;if(T>w){if(x=n,y=n/w,C=n/v,y>s){const e=y-s;y=s,x=n-e*w,C=s/E}}else if(T<w){if(y=s,x=s*w,C=s/E,x>n){const e=x-n;x=n,y=s-e/w,C=n/v}}else y=s,x=n,C=s/E;const b=p/n;if(C>b){y=s-(s/b-E)*b,x=n-(n/b-v)*b,C=b}a({croppedWidth:v,croppedHeight:E,croppedX:((0,u.isNumber)(r)&&r||0)/S+((0,u.isNumber)(_)&&_||0),croppedY:((0,u.isNumber)(o)&&o||0)/S+((0,u.isNumber)(g)&&g||0),containerWidth:x,containerHeight:y}),l(C,!0),this.onApplyReset(x,y)},this.onApplyReset=(e,t)=>{this.setState({x:0,y:0,width:e,height:t,isButtonDisable:!1,currentCropAspect:this.props.cropAspect}),this.props.setAspect(this.props.cropAspect,!1)},this.reset=(e,t)=>{const{initialCrop:r,settings:o}=this.props,{currentCropAspect:i}=this.state;r?o.containerWidth&&o.containerHeight?(this.setState({x:0,y:0,width:e,height:t,isButtonDisable:!1}),i&&(0,u.isFunction)(_.photoEditorActions.cropAction)&&_.photoEditorActions.cropAction({value:i})):(this.setState({x:r.croppedX,y:r.croppedY,width:r.croppedWidth,height:r.croppedHeight,isButtonDisable:!1}),(0,u.isFunction)(_.photoEditorActions.cropAction)&&_.photoEditorActions.cropAction({value:r.croppedWidth/r.croppedHeight,useInitialCrop:!0})):this.setState({x:0,y:0,width:e,height:t,isButtonDisable:!1})},this.containerEl=(0,i.createRef)(),this.areaEl=(0,i.createRef)();const{cropAspect:t,artboardWidth:r,artboardHeight:o,prevCropWidth:n,prevCropHeight:s,settings:a,initialCrop:l}=e,{containerWidth:c,containerHeight:d}=a;this.state={currentCropAspect:void 0,isButtonDisable:!1,...m(t,n||r,s||o,d,c,l)}}}const S={setAspect:s.setAspect,setCropSettings:a.setCropSettings,setLayersScale:l.setLayersScale,setLayersShift:l.setLayersShift},v=(0,c.connect)((e=>({currentBackgroundUrl:(0,d.getCurrentImageUrl)(e),cropAspect:e.present.settings.cropAspect,cropUseInitial:e.present.settings.cropUseInitial,data:e.present.data,prevCropWidth:e.present.data.croppedWidth,prevCropHeight:e.present.data.croppedHeight,originalWidth:e.present.data.originalWidth,layers:e.present.layers,drawings:e.present.drawings,langMap:e.present.data.langMap,settings:e.present.settings})),S)(f)},967193:(e,t,r)=>{r.d(t,{NewCropPanel:()=>A});var o=r(474848),i=r(296540),n=r(533048),s=r(428918),a=r(445248),l=r(234337),c=r(506996),d=r(629484),h=r(404245),u=r(196058),p=r(775633),g=r(8520),_=r(801013),m=r(773479),f=r(406152),S=r(373347),v=r(21357),E=r(906110),T=r(751069),w=r(902349),C=r(591707),y=r(976488),x=r(291718),b=r(800709);class I extends i.Component{render(){const e=this.props.langMap,t=(0,o.jsxs)("div",{className:y.default.root,children:[(0,o.jsx)("span",{className:y.default.title,children:e?.photos_pe_crop_aspect_title}),(0,o.jsx)("ul",{className:y.default.tabs,children:E.CROP_ASPECTS.map((t=>{const r=(0,g.classNames)(y.default.tabsButton,this.props.cropAspect===t.value&&y.default.tabsButtonActive);return(0,o.jsx)("li",{className:y.default.tabsItem,children:(0,o.jsx)("button",{className:r,onClick:()=>{this.props.setAspect(t.value),this.props.helpers?.sendStat("change_crop_mode",t.value)},children:e&&e[t.title]})},t.title)}))}),(0,o.jsxs)("ul",{className:y.default.settings,children:[(0,o.jsx)("li",{className:y.default.settingsItem,children:(0,o.jsx)(n.Button,{mode:"tertiary",size:"s",before:(0,o.jsx)(m.Icon20RotateRight,{}),onClick:()=>this.rotate(!1),children:e?.photos_pe_rotate_right})}),(0,o.jsx)("li",{className:y.default.settingsItem,children:(0,o.jsx)(n.Button,{mode:"tertiary",size:"s",before:(0,o.jsx)(f.Icon20RotateLeft,{}),onClick:()=>this.rotate(!0),children:e?.photos_pe_rotate_left})}),(0,o.jsx)("li",{className:y.default.settingsItem,children:(0,o.jsx)(n.Button,{mode:"tertiary",size:"s",before:(0,o.jsx)(S.Icon20FlipHorizontal,{}),onClick:()=>this.flip(!0,!1),children:e?.photos_pe_flip_horizontal})}),(0,o.jsx)("li",{className:y.default.settingsItem,children:(0,o.jsx)(n.Button,{mode:"tertiary",size:"s",before:(0,o.jsx)(v.Icon20FlipVertical,{}),onClick:()=>this.flip(!1,!0),children:e?.photos_pe_flip_vertical})})]})]}),r=(0,o.jsx)(C.ScrollableContainer,{fadeEffect:!0,children:(0,o.jsxs)(b.CellList,{gap:2,children:[E.CROP_ASPECTS.map((t=>(0,o.jsx)(i.Fragment,{children:(0,o.jsx)(w.CheckboxLike,{value:t.value,name:"photo_editor_aspect_ratio",label:e&&e[t.title],icon:(0,T.getAspectRatioIcon)(t.value,20,"color_icon_secondary"),onChange:()=>{this.props.setAspect(t.value),this.props.data?.helpers?.sendStat("change_crop_mode",t.value)},checked:this.props.cropAspect===t.value,"data-testid":`phCrop${t.value}`})},t.value))),(0,o.jsx)(s.Spacing,{size:12}),(0,o.jsx)(a.SimpleCell,{onClick:()=>this.rotate(!0),before:(0,o.jsx)(f.Icon20RotateLeft,{className:(0,l.getColorClass)("color_icon_secondary")}),"data-testid":"phCropRotate",children:e?.photos_pe_rotate_left}),(0,o.jsx)(s.Spacing,{size:12}),(0,o.jsx)(a.SimpleCell,{onClick:()=>this.flip(!0,!1),before:(0,o.jsx)(S.Icon20FlipHorizontal,{className:(0,l.getColorClass)("color_icon_secondary")}),"data-testid":"phCropFlipX",children:e?.photos_pe_flip_horizontal}),(0,o.jsx)(a.SimpleCell,{onClick:()=>this.flip(!1,!0),before:(0,o.jsx)(v.Icon20FlipVertical,{className:(0,l.getColorClass)("color_icon_secondary")}),"data-testid":"phCropFlipY",children:e?.photos_pe_flip_vertical})]})});return this.props.data.isRedesignEnabled?r:t}getVisibleCenter(){const{artboardHeight:e,artboardWidth:t}=this.props,r=this.props.settings;return[(r.croppedX||0)+(r.croppedWidth||t)/2,(r.croppedY||0)+(r.croppedHeight||e)/2]}constructor(){super(...arguments),this.flip=(e,t)=>{const r=document.createElement("canvas"),o=r?.getContext("2d"),{currentBackgroundUrl:i,enhance:n}=this.props;o&&_.imageCacheGlobal.get(i).then((i=>{r.width=i.width,r.height=i.height,e?(o.translate(r.width,0),o.scale(-1,1),this.props.helpers?.sendStat("flipX")):t&&(o.translate(0,r.height),o.scale(1,-1),this.props.helpers?.sendStat("flipY")),o.drawImage(i,0,0),r.toBlob((r=>{if(!r)return;const o=URL.createObjectURL(r),i={};n.active?i.enhance={url:o}:i.url=o,e&&(i.flipX=!this.props.flipX),t&&(i.flipY=!this.props.flipY),this.props.setCrop({...i,resetCrop:!0});const s=JSON.parse(JSON.stringify(this.props.drawings)),[a,l]=this.getVisibleCenter();for(const r of s)for(let o=0;o<r.path.length;o++){let[i,n]=r.path[o];[i,n]=(0,x.getScaledCoordinates)(i,n,1/r.scale),e&&([i,n]=(0,x.flipPointHorizontally)(i,n,a)),t&&([i,n]=(0,x.flipPointVertically)(i,n,l)),[i,n]=(0,x.getScaledCoordinates)(i,n,r.scale),r.path[o][0]=i,r.path[o][1]=n}this.props.setCrop({drawings:s})}),"image/jpeg",1)})).catch((e=>{console.error(e)}))},this.rotate=e=>{const t=document.createElement("canvas"),r=t?.getContext("2d"),{currentBackgroundUrl:o,originalWidth:i,originalHeight:n,enhance:s}=this.props;r&&_.imageCacheGlobal.get(o).then((o=>{t.width=o.height,t.height=o.width;const a=e?-90:90;r.translate(t.width/2,t.height/2),r.rotate(a*Math.PI/180),r.drawImage(o,-o.width/2,-o.height/2),t.toBlob((e=>{if(!e)return;const r=t.height/t.width,o=((0,g.isNumber)(this.props.rotate)?this.props.rotate:0)+a;this.props.rotate>o?this.props.helpers?.sendStat("turn_left"):this.props.helpers?.sendStat("turn_right");const l=this.props.data.imageContainerWidth-(this.props.data.marginLeft||0),c=this.props.data.imageContainerHeight?this.props.data.imageContainerHeight-(this.props.data.marginTop||0):this.props.data.artboardHeight;let d,h;if(r>=.67?(d=c/r,h=c):(d=l,h=l*r),d>l){h-=(d-l)*r,d=l}if(h>c){d-=(h-c)*r,h=c}if(d>n){const e=d-n;d=n,h-=e*r}if(h>i){const e=h-i;h=i,d-=e*r}const u=URL.createObjectURL(e),p=JSON.parse(JSON.stringify(this.props.drawings)),[_,m]=this.getVisibleCenter(),f=h/(2*_);for(const e of p){e.width*=f;for(let t=0;t<e.path.length;t++){let[r,o]=e.path[t];[r,o]=(0,x.getScaledCoordinates)(r,o,1/e.scale),[r,o]=(0,x.rotatePoint)(r,o,_,m,a),[r,o]=(0,x.getRelativeCoordinates)(r,o,_,m),[r,o]=(0,x.getScaledCoordinates)(r,o,f),[r,o]=(0,x.getRelativeCoordinates)(r,o,-d/2,-h/2),[r,o]=(0,x.getScaledCoordinates)(r,o,e.scale),e.path[t][0]=r,e.path[t][1]=o}}const S={data:{artboardWidth:d,artboardHeight:h,originalWidth:n,originalHeight:i},rotate:Math.abs(o)>270?0:o,drawings:p,resetCrop:!0};s.active?S.enhance={url:u}:S.url=u,this.props.setCrop(S)}),"image/jpeg",1)})).catch((e=>{console.error(e)}))}}}const R={setCrop:h.setCrop,setAspect:u.setAspect,setCropSettings:h.setCropSettings,updateBackgroundLayer:p.updateBackgroundLayer,setLayersScale:p.setLayersScale,setLayersShift:p.setLayersShift},A=(0,c.connect)((e=>({enhance:e.present.settings.enhance,flipX:e.present.settings.flipX,flipY:e.present.settings.flipY,rotate:e.present.settings.rotation,cropAspect:e.present.settings.cropAspect,currentBackgroundUrl:(0,d.getCurrentImageUrl)(e),addons:e.present.data.addons,artboardWidth:e.present.data.artboardWidth,artboardHeight:e.present.data.artboardHeight,originalWidth:e.present.data.originalWidth,originalHeight:e.present.data.originalHeight,helpers:e.present.data.helpers,langMap:e.present.data.langMap,data:e.present.data,layers:e.present.layers,settings:e.present.settings,drawings:e.present.drawings})),R)(I)},751069:(e,t,r)=>{r.d(t,{getAspectRatioIcon:()=>g});var o=r(474848),i=r(890589),n=r(253934),s=r(665485),a=r(332716),l=r(450117),c=r(245278),d=r(72899),h=r(906110),u=r(234337),p=r(8520);function g(e,t,r){const g=t?{width:t,height:t}:null,_=(0,p.isString)(r)?(0,u.getColorClass)(r):void 0;switch(e){case h.CROP_ASPECT_FREE:return(0,o.jsx)(i.Icon20FullscreenOutline,{...g,className:_});case h.CROP_ASPECT_ORIGINAL:return(0,o.jsx)(n.Icon20FolderOutline,{...g,className:_});default:{const t={tallest:.6810700359928015,tall:.8998200359928015,wide:1.1252813203300827,widest:1.5141702092189715};return e>t.wide?e>=t.widest?(0,o.jsx)(s.Icon24HorizontalRectangle16x9Outline,{...g,className:(0,u.getColorClass)(r)}):(0,o.jsx)(a.Icon24HorizontalRectangleOutline,{...g,className:_}):e<t.tall?e<t.tallest?(0,o.jsx)(l.Icon24VerticalRectangle9x16Outline,{...g,className:_}):(0,o.jsx)(c.Icon24VerticalRectangleOutline,{...g,className:_}):(0,o.jsx)(d.Icon24SquareOutline,{...g,className:_})}}}},210725:(e,t,r)=>{r.d(t,{NewDrawPanel:()=>v});var o=r(474848),i=r(296540),n=r(506996),s=r(290494),a=r(428918),l=r(8520),c=r(196058),d=r(852485),h=r(195165),u=r(214211),p=r(291718),g=r(906110),_=r(952400),m=r(591707);const f=[["M",69,65],["L",93,41],["L",121,69],["L",149,41],["L",177,69],["L",201,45]];function S(e){return`${Math.round(100*e)}%`}const v=({className:e,useOldPalette:t,useAvgColors:r})=>{const v=(0,n.useDispatch)(),E=(0,d.useSettings)(),T=(0,d.useAvgColor)(),w=(0,d.useLangMap)(),C=(0,i.useRef)(null),{color:y,brushWidth:x,brushOpacity:b}=E;return(0,i.useLayoutEffect)((()=>{!function(e,t,r,o){const i=e?.getContext("2d");if(!e||!i)return;const n=g.CANVAS_SCALE,s=f.map((([e,t,r])=>`${e}${t*n} ${r*n}`)).join(""),a=new Path2D(s);e.width=e.width,i.lineWidth=r*g.BRUSH_WIDTH_COEFFICIENT*n,i.strokeStyle=(0,p.hexToRgba)(t,o),i.lineJoin=i.lineCap="round",i.stroke(a)}(C.current,y,x,b)}),[y,b,x]),(0,o.jsxs)("div",{className:(0,l.classNames)(_.default.root,e),children:[(0,o.jsx)("div",{className:_.default.brushPreviewContainer,children:(0,o.jsx)("canvas",{ref:C,width:g.DRAWING_PREVIEW_WIDTH*g.CANVAS_SCALE,height:g.DRAWING_PREVIEW_HEIGHT*g.CANVAS_SCALE,style:{width:g.DRAWING_PREVIEW_WIDTH,height:g.DRAWING_PREVIEW_HEIGHT}})}),(0,o.jsxs)(m.ScrollableContainer,{fadeEffect:!0,className:_.default.scrollableControls,children:[(0,o.jsx)(h.PEFormItem,{label:w?.photos_pe_line_width,after:S(x),children:(0,o.jsx)(s.Slider,{min:0,max:1,isShowHandle:!0,value:x,onChange:function(e){v((0,c.setBrushWidth)(e))}})}),(0,o.jsx)(h.PEFormItem,{label:w?.photos_pe_intensity,after:S(b),children:(0,o.jsx)(s.Slider,{min:0,max:1,isShowHandle:!0,value:b,onChange:function(e){v((0,c.setBrushOpacity)(e))}})}),(0,o.jsx)(a.Spacing,{size:12}),(0,o.jsx)(h.PEFormItem,{hiddenLabel:!0,label:w?.photos_pe_color,children:(0,o.jsx)(u.NewColorPicker,{currentColor:E.color,colors:t?g.COLORS:g.COLORS_NEW,onClick:function(e){v((0,c.setColor)(e))},avgColor:r?T:void 0})})]})]})}},815443:(e,t,r)=>{r.d(t,{NewFiltersPanel:()=>E});var o=r(474848),i=r(8520),n=r(506996),s=r(775464),a=r(945329),l=r(445248),c=r(234337),d=r(290494),h=r(852485),u=r(906110),p=r(196058),g=r(591707),_=r(786374),m=r(195165),f=r(610351),S=r(857918);const v="regular",E=({className:e})=>{const t=(0,n.useDispatch)(),r=(0,h.useLangMap)(),E=(0,h.useSettings)(),T=(0,h.useHelpers)(),w=(0,h.useCurrentFilter)(),C={regular:r?.photos_pe_filter_regular,nox:r?.photos_pe_filter_nox,vesper:r?.photos_pe_filter_vesper,latona:r?.photos_pe_filter_latona,liber:r?.photos_pe_filter_liber,luna:r?.photos_pe_filter_luna,minerva:r?.photos_pe_filter_minerva,mitra:r?.photos_pe_filter_mitra,pro:r?.photos_pe_filter_pro,terra:r?.photos_pe_filter_terra,veles:r?.photos_pe_filter_veles,vesta:r?.photos_pe_filter_vesta,zaria:r?.photos_pe_filter_zaria,sepia:r?.photos_pe_filter_sepia,genius:r?.photos_pe_filter_genius,horus:r?.photos_pe_filter_horus,fortuna:r?.photos_pe_filter_fortuna},y=(0,f.useMutableObject)({});return(0,o.jsx)(g.ScrollableContainer,{fadeEffect:!0,className:(0,i.classNames)(S.default.root,e),children:u.PHOTO_FILTERS.map((e=>{const n=(0,o.jsx)(_.FilterPreview,{className:S.default.image,filterName:e,intensity:.75,width:u.FILTER_PREVIEW_WIDTH_NEW_UI,height:u.FILTER_PREVIEW_HEIGHT_NEW_UI}),h=e===w,g=e!==v;return(0,o.jsxs)("div",{className:(0,i.classNames)(S.default.row,h&&S.default.rowExpanded),children:[(0,o.jsx)(l.SimpleCell,{before:n,disabled:e===v&&h,hasActive:!1,after:h?(0,o.jsx)(s.Icon24CheckCircleFilledBlue,{}):g?(0,o.jsx)(a.Icon24ChevronDown,{className:(0,c.getColorClass)("color_icon_tertiary")}):null,onClick:()=>function(e){const r=y[e]??.5;null==y[e]&&(y[e]=r),t((0,p.setFilter)(e)),t((0,p.setFilterAmount)(r)),"regular"===e?T.sendStat?.("remove_filter"):T.sendStat?.("add_filter")}(h?v:e),children:C[e]}),g&&h&&(0,o.jsx)("div",{children:(0,o.jsx)(m.PEFormItem,{label:r?.photos_pe_filter_enabled,after:`${Math.round(100*E.filter.value)}%`,children:(0,o.jsx)(d.Slider,{min:0,max:1,value:E.filter.value,isShowHandle:!0,onChange:e=>{return r=e,y[w]=r,t((0,p.setFilterAmount)(r)),void T.sendStat?.("change_filter_value");var r}})})})]},e)}))})}},982139:(e,t,r)=>{r.d(t,{NewStickersPanelCustom:()=>s});var o=r(474848),i=r(591707),n=r(141979);const s=({className:e,customStickers:t,...r})=>(0,o.jsx)(i.ScrollableContainer,{className:e,fadeEffect:!0,children:(0,o.jsx)(n.StickerList,{stickers:t,...r})})},887111:(e,t,r)=>{r.d(t,{NavigationHelperTopbar:()=>u});var o=r(474848),i=r(296540),n=r(8520),s=r(665561),a=r(182490),l=r(410655),c=r(390768),d=r(906110),h=r(51952);const u=({className:e,stickers:t,onClick:r,activeItemId:u,showStickerShop:p})=>{const g=(0,i.useRef)(null),_=(0,i.useRef)(!1),m=String(u),[f,S]=(0,i.useState)(!1),[v,E]=(0,i.useState)(!1),[T,w]=(0,i.useState)(!0);(0,i.useEffect)((()=>{if(!_.current){const e=g.current??null,t=e?.querySelector(`button[data-pack-id="${m}"]`);if(e&&t){const r=t.offsetLeft-(e.clientWidth/2-t.clientWidth/2);requestAnimationFrame((()=>{e.scrollTo({top:0,left:Math.max(0,r),behavior:"smooth"})}))}}_.current=!1}),[m]);const C=e=>{const t=g.current;if(null==t)return;const{scrollLeft:r,scrollWidth:o,clientWidth:i}=t,n=.9*(i-56)*(e>0?1:-1),s=Math.max(0,Math.min(r+n,o-i));t.scrollTo({left:s,behavior:"smooth"})};return(0,i.useLayoutEffect)((()=>{const e=g.current,t={passive:!0};if(null!=e)return r(),e.addEventListener("scroll",r,t),()=>e.removeEventListener("scroll",r,t);function r(){if(null==e)return;const{scrollLeft:t,scrollWidth:r,clientWidth:o}=e;S(t>1),E(Math.abs(r-o-t)>1),w(!1)}}),[]),(0,o.jsxs)("div",{className:(0,n.classNames)(h.default.root,e),children:[(0,o.jsx)("button",{className:(0,n.classNames)(h.default.arrow,h.default.arrowLeft,!f&&h.default.arrowHidden,T&&h.default.disableTransition),tabIndex:-1,"aria-hidden":!0,onClick:()=>C(-1),children:(0,o.jsx)(s.Icon20ChevronRight,{className:h.default.arrowIconFlipped})}),(0,o.jsx)("button",{className:(0,n.classNames)(h.default.arrow,h.default.arrowRight,!v&&h.default.arrowHidden,T&&h.default.disableTransition),tabIndex:-1,"aria-hidden":!0,onClick:()=>C(1),children:(0,o.jsx)(s.Icon20ChevronRight,{})}),(0,o.jsx)("div",{className:(0,n.classNames)(h.default.fadeout,f&&h.default.fadeoutLeft,v&&h.default.fadeoutRight,T&&h.default.disableTransition),children:(0,o.jsxs)("div",{className:h.default.scrollable,ref:g,children:[p&&(0,o.jsx)("div",{className:h.default.tab,onClick:p,children:(0,o.jsx)(a.Icon24StorefrontOutline,{})}),t.map((e=>{const{id:t}=e,i=(e=>{const{items:t=[]}=e,[r]=t;return r.sizes?.[d.STICKER_THUMB]??null})(e),s=String(t)===String(u);let a=(0,o.jsx)("img",{src:i||"",alt:"",draggable:"false",className:h.default.thumbImage});return"recent"===t&&(a=(0,o.jsx)(l.Icon24RecentOutline,{})),"editor"===t&&(a=(0,o.jsx)(c.Icon24SmileOutline,{})),i?(0,o.jsx)("button",{onClick:e=>function(e,t){_.current=!0,r(e,t)}(e,t),className:(0,n.classNames)(h.default.tab,s&&h.default.tabSelected),"data-pack-id":t,children:a},t):null}))]})})]})}},443363:(e,t,r)=>{r.d(t,{NewStickersPanelStickerPacks:()=>_});var o=r(474848),i=r(296540),n=r(506996),s=r(8520),a=r(480958),l=r(380118),c=r(102846),d=r(591707),h=r(141979),u=r(887111),p=r(318659),g=r(752598);const _=({className:e,...t})=>{const r=function(e){const t=(0,n.useSelector)((e=>e.present.data?.stickers??[]));return e?t.filter((e=>"editor"!==e.id)):t}(!1),_=(0,n.useDispatch)(),m=(0,i.useRef)([]),f=(0,n.useSelector)((e=>e.present.data?.helpers??{}),n.shallowEqual),S=48,v=(0,i.useRef)(null),[E,T]=(0,i.useState)("recent");function w(e){T(String(e)),function(e){const t=v.current??null,r=t?.querySelector(`div[data-pack-id="${e}"]`);if(t&&r){const e=t.scrollTop,o=r.offsetTop,i=Math.max(0,o-.1*S),n=i-e,s=Math.abs(n)>16?i+(n>0?-16:16):e;r.focus({preventScroll:!0}),t.scrollTop=s,t.scrollTo({top:i,behavior:"smooth"})}}(e)}const C=!!f?.showStickerShop;function y(){f.showStickerShop?.((()=>{f.fetchStickers?.((e=>{const t={};e.stickers.forEach((e=>{e.items.forEach((e=>{t[e.id]=e}))})),_((0,p.setData)({stickers:e.stickers,stickersMap:t}))}),(e=>(console.error(e),!0)))})),f.sendStat?.("click_to_shop")}return(0,i.useEffect)((()=>{const e=new IntersectionObserver((function(e){e.forEach((function(e){var t;e.isIntersecting&&e.target instanceof HTMLDivElement&&(t=e.target.dataset?.packId||"",T(String(t)))}))}),{threshold:1});return m.current.forEach((function(t){e.observe(t)})),()=>{e.disconnect()}}),[]),(0,i.useMemo)((()=>(0,o.jsxs)("div",{className:(0,s.classNames)(g.default.root,e),children:[(0,o.jsx)(u.NavigationHelperTopbar,{className:g.default.header,stickers:r,showStickerShop:C?y:void 0,activeItemId:E,onClick:(e,t)=>w(t)}),(0,o.jsx)(d.ScrollableContainer,{className:g.default.content,fadeEffect:!0,getRootRef:v,children:r.map(((e,r)=>(0,o.jsxs)("div",{className:g.default.stickerPack,tabIndex:-1,children:[(0,o.jsx)("div",{"data-pack-id":e.id,className:g.default.title,ref:e=>{e&&(m.current[r]=e)},children:(0,o.jsx)(a.TextClamp,{TypographyComponent:l.Text,as:"div",normalize:!0,weight:"3",lines:1,children:(0,o.jsx)(c.InnerHTML,{children:e.title||""})})}),(0,o.jsx)(h.StickerList,{stickers:e.items,className:g.default.stickerList,...t})]},e.id)))})]})),[E])}},339:(e,t,r)=>{r.d(t,{NewTextPanel:()=>S});var o=r(474848),i=r(506996),n=r(428918),s=r(290494),a=r(196058),l=r(906110),c=r(291718),d=r(852485),h=r(591707),u=r(195165),p=r(214211),g=r(902349),_=r(800709);const m=e=>{switch(e){case"typewriter":return"18px";case"poster":return"24px";case"retro":return"19px";case"marker":return"26px";case"italics":return"22px";default:return"20px"}};function f(e){return!!e&&"fontSize"in e&&"fontStyle"in e}const S=({className:e})=>{const t=(0,i.useDispatch)(),r=(0,d.useLangMap)(),S=(0,d.useSettings)(),v=(0,d.useCurrentLayer)(),E=(0,d.useFontsPlaceholders)(),T=f(v)?v.fontStyle:S.fontStyle,w=f(v)?v.fontSize:S.fontSize,C=f(v)?v.color:S.color;return(0,o.jsx)(h.ScrollableContainer,{fadeEffect:!0,className:e,children:(0,o.jsxs)(_.CellList,{gap:2,children:[(0,o.jsx)("form",{onSubmit:()=>!1,children:l.FONTS.map(((e,r)=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(g.CheckboxLike,{value:e,name:"photo_editor_fonts",label:(0,o.jsx)("span",{style:{fontSize:m(e)},className:(0,c.getComputedFontFamily)(e),children:E?.[r]}),onChange:()=>t((0,a.setFontStyle)(e)),checked:T===e},e),r!==l.FONTS.length?(0,o.jsx)(n.Spacing,{size:2}):(0,o.jsx)(n.Spacing,{size:12})]})))}),(0,o.jsx)(u.PEFormItem,{label:r?.photos_pe_font_size,after:Math.round(100*w),children:(0,o.jsx)(s.Slider,{min:0,max:1,isShowHandle:!0,value:w,onChange:e=>t((0,a.setFontSize)(e))})}),(0,o.jsx)(u.PEFormItem,{hiddenLabel:!0,label:r?.photos_pe_color,children:(0,o.jsx)(p.NewColorPicker,{currentColor:C,colors:l.COLORS_NEW,onClick:e=>t((0,a.setColor)(e))})})]})})}},107871:(e,t,r)=>{r.d(t,{SegmentationPane:()=>l});var o=r(474848),i=r(284362),n=r(296540),s=r(291718),a=r(8520);const l=({width:e,height:t,aspectRatio:r,globalScale:l,shiftX:c,shiftY:d,click:h,mode:u,croppedWidth:p,croppedHeight:g,loading:_=!1})=>{const m=(0,n.useRef)(null);return(0,o.jsx)("div",{ref:m,className:(0,a.classNames)(i.default.root,"positive"===u&&i.default.positive,"negative"===u&&i.default.negative,_&&i.default.loading),style:{width:e,height:t},onMouseDown:t=>{if(!u||_)return;const{x:o,y:i}=(0,s.getRelativeXY)(t.nativeEvent,m.current),n=e*r/(e*l);h(o*n-c*n+(p||0)*n*l,i*n-d*n+(g||0)*n*l)}})}},144187:(e,t,r)=>{r.d(t,{SegmentationPanelComponent:()=>m});var o=r(474848),i=r(676308),n=r(296540),s=r(533048),a=r(428918),l=r(757550),c=r(235930),d=r(545459),h=r(196058),u=r(175910),p=r(506996),g=r(514751);const _={setSegmentation:h.setSegmentation,resetSegmentationData:u.resetSegmentationData,setSegmentationInverse:h.setSegmentationInverse,setSegmentationDelete:h.setSegmentationDelete,resetSegmentationSettings:h.resetSegmentationSettings,setSegmentationBackgroundColor:h.setSegmentationBackgroundColor},m=(0,p.connect)((e=>({settings:e.present.settings,segmentation:e.present.ml.segmentation,avgColor:e.present.layers.items[0].avgColor,helpers:e.present.data.helpers})),_)((({setSegmentation:e,settings:t,segmentation:r,resetSegmentationData:h,setSegmentationDelete:u,setSegmentationInverse:p,resetSegmentationSettings:_,avgColor:m,setSegmentationBackgroundColor:f,helpers:S})=>{const v=t.segmentation.enabled,E="positive"===t.segmentation.mode,T="negative"===t.segmentation.mode,w=t.segmentation.color,C=!r?.mask,y=t.segmentation.delete;return(0,o.jsxs)("div",{className:i.default.root,children:[(0,o.jsxs)(n.Fragment,{children:[(0,o.jsx)("span",{className:i.default.title,children:"Выделение объекта"}),(0,o.jsxs)("ul",{className:i.default.selection,children:[(0,o.jsx)(s.Button,{mode:E&&v?"secondary":"tertiary",size:"s",before:(0,o.jsx)(c.Icon20AddCircleOutline,{}),disabled:y,onClick:()=>{e({...t.segmentation,enabled:!(v&&E),mode:"positive"}),(!v||!E)&&S?.sendStat("select_object")},children:"Добавить выделение"}),(0,o.jsx)(a.Spacing,{size:12}),(0,o.jsx)(s.Button,{mode:T&&v?"secondary":"tertiary",size:"s",before:(0,o.jsx)(d.Icon20RemoveCircleOutline,{}),onClick:()=>{e({...t.segmentation,enabled:!(v&&T),mode:"negative"}),S?.sendStat("delete_selection")},disabled:C||y,children:"Снять выделение"})]})]}),(0,o.jsx)("span",{className:i.default.title,children:"Выделить или убрать выделение объектов можно с помощью нажатия на них"}),(0,o.jsx)(a.Spacing,{size:25}),!y&&(0,o.jsxs)("ul",{className:i.default.selection,children:[(0,o.jsxs)(l.ButtonGroup,{stretched:!0,children:[(0,o.jsx)(s.Button,{stretched:!0,mode:"secondary",size:"s",disabled:C,onClick:()=>{p(!Boolean(t.segmentation.inverse)),S?.sendStat("invert_object")},children:"Инвертировать"}),(0,o.jsx)(s.Button,{stretched:!0,mode:"secondary",size:"s",disabled:C,onClick:()=>{h(),_({canUndo:!1})},children:"Сбросить"})]}),(0,o.jsx)(a.Spacing,{size:12}),(0,o.jsx)(s.Button,{stretched:!0,mode:"secondary",size:"s",disabled:C,onClick:()=>{u(!y),S?.sendStat("delete_object")},children:"Удалить выбранную область"})]}),y&&(0,o.jsxs)("div",{className:i.default.colors,children:[(0,o.jsx)("div",{className:i.default.title,children:"Цвет фона"}),(0,o.jsx)(g.ColorPicker,{color:w??"#000",avgColor:m,setColor:e=>{f(e),S?.sendStat("change_object_color")}})]})]})}))},917891:(e,t,r)=>{r.d(t,{SegmentationLayer:()=>g});var o=r(474848),i=r(296540),n=r(629484),s=r(506996),a=r(291718),l=r(801013),c=r(318659),d=r(8520),h=r(906110);class u extends i.PureComponent{componentDidUpdate(e){const t=e.inverse!==this.props.inverse,r=e.delete!==this.props.delete,o=e.segmentation?.mask!==this.props.segmentation?.mask,i=e.color!==this.props.color,n=e.croppedWidth!==this.props.croppedWidth||e.croppedHeight!==this.props.croppedHeight,s=o||t||r||i||n;this.update(s)}update(e){const{currentBackgroundUrl:t}=this.props;t&&l.imageCacheGlobal.get(t).then((t=>{const r=t.width,o=t.height;this.drawImage(e,r,o,t)})).catch((e=>{console.error(e)}))}drawImage(e,t,r,o){const{globalScale:i,shiftY:n,shiftX:s,segmentation:l,width:c,height:u}=this.props,{current:p}=this.canvasBg,{r:g,g:_,b:m}=(0,a.hexToRgbaValues)(this.props.color??"#000000"),f=p?.getContext("2d"),S=c*i,v=u*i;if(f&&p)if(p.width=c*h.CANVAS_SCALE,p.height=u*h.CANVAS_SCALE,f.clearRect(0,0,S,v),e){const e=document.createElement("canvas");e.width=t,e.height=r;const i=e.getContext("2d"),a=this.maskCanvas.getContext("2d"),c=this.canvasRender.getContext("2d");if(!a||!c||!i)return;if(!this.props.segmentation?.mask)return void a.clearRect(0,0,S,v);const u=new Image;u.onload=()=>{this.maskCanvas.width=t,this.maskCanvas.height=r,this.canvasRender.width=t,this.canvasRender.height=r,a.drawImage(u,0,0,t,r),i.drawImage(o,0,0,t,r);const e=i.getImageData(0,0,t,r).data,l=a.getImageData(0,0,t,r),d=l.data;for(let t=0;t<d.length;t+=4){const r=!(0!==d[t]&&1!==d[t]||0!==d[t+1]&&1!==d[t+1]||0!==d[t+2]&&1!==d[t+2]);if(this.props.delete)if(this.props.inverse)d[t]=e[t]*d[t]/255+g*(1-d[t]/255),d[t+1]=e[t+1]*d[t+1]/255+_*(1-d[t+1]/255),d[t+2]=e[t+2]*d[t+2]/255+m*(1-d[t+2]/255);else{const r=255-d[t],o=255-d[t+1],i=255-d[t+2];d[t]=e[t]*r/255+g*(1-r/255),d[t+1]=e[t+1]*o/255+_*(1-o/255),d[t+2]=e[t+2]*i/255+m*(1-i/255)}else this.props.inverse?r?(d[t+1]=128,d[t+2]=255,d[t+3]=100):d[t+3]=0:r?d[t+3]=0:(d[t]=0,d[t+1]=128,d[t+2]=255,d[t+3]=100)}a.putImageData(l,0,0),c.drawImage(this.maskCanvas,0,0,t,r),f.save(),f.scale(h.CANVAS_SCALE,h.CANVAS_SCALE),f.drawImage(this.maskCanvas,s,n,S,v),f.restore(),this.props.setData({maskCanvas:this.canvasRender})},u.src=(0,d.isString)(l.mask)?`data:image/png;base64,${l.mask}`:""}else f.save(),f.scale(h.CANVAS_SCALE,h.CANVAS_SCALE),f.drawImage(this.maskCanvas,s,n,S,v),f.restore()}render(){return(0,o.jsx)("canvas",{width:this.props.width*h.CANVAS_SCALE,height:this.props.height*h.CANVAS_SCALE,style:{position:"absolute",top:0,left:0,zIndex:1,pointerEvents:"none",width:this.props.width,height:this.props.height},ref:this.canvasBg})}constructor(e){super(e),this.canvasBg=(0,i.createRef)(),this.maskCanvas=document.createElement("canvas"),this.canvasRender=document.createElement("canvas")}}const p={setData:c.setData},g=(0,s.connect)((e=>({currentBackgroundUrl:(0,n.getCurrentImageUrl)(e),croppedY:e.present.data.croppedY,croppedX:e.present.data.croppedX,croppedWidth:e.present.data.croppedWidth,croppedHeight:e.present.data.croppedHeight,originalWidth:e.present.data.originalWidth,originalHeight:e.present.data.originalHeight,segmentation:e.present.ml.segmentation,inverse:e.present.settings.segmentation.inverse,delete:e.present.settings.segmentation.delete,color:e.present.settings.segmentation.color})),p)(u)},645203:(e,t,r)=>{r.d(t,{StatusPanel:()=>p});var o=r(474848),i=r(296540),n=r(506996),s=r(775633),a=r(8520),l=r(190214),c=r(906110),d=r(206838);class h extends i.Component{componentDidMount(){const{current:e}=this.scrollElement,t=document.querySelector('[data-status-active="true"]');if(!e||!t)return;t.offsetLeft+30>e.offsetWidth&&this.setPosition(e.offsetWidth)}constructor(e){super(e),this.componentDidUpdate=()=>{this.scrollWithAnimation=!1},this.render=()=>{const{langMap:e}=this.props,{currentIndex:t,items:r}=this.props.layers,i=null!==t&&r[t],n=i&&i.type===c.LAYER_TYPES.TEXT&&i.isEdit;let s="";i&&(i.type===c.LAYER_TYPES.STICKER?s=e?.photos_pe_delete_sticker:i.type===c.LAYER_TYPES.TEXT&&(s=e?.photos_pe_delete_text));const l=void 0===this.props.allowBackgroundChange||Boolean(this.props.allowBackgroundChange);let h;return this.props.currentBackgroundType===c.BACKGROUND_MODES.BACKGROUND&&!i&&l&&(h=!0),(0,o.jsx)("div",{className:(0,a.classNames)(d.default.root,d.default.square),children:h?this.renderBackgrounds():(0,o.jsxs)("div",{className:d.default.inner,children:[this.renderLeftBlock(),(0,o.jsxs)("div",{children:[i&&!n&&(0,o.jsx)("a",{className:d.default.link,onClick:this.props.deleteLayer,children:s}),i&&n&&(0,o.jsx)("a",{className:d.default.link,onClick:this.props.closeTextEditor,children:e?.photos_pe_save_text})]})]})})},this.renderLeftBlock=()=>{const{addons:e,langMap:t}=this.props;return"photo"===this.props.context?(0,o.jsxs)("div",{children:[e&&e.edited&&e.canEdit&&(0,o.jsx)("a",{className:d.default.link,onClick:e.restore,children:t?.photos_filtered_restore}),e&&!e.canEdit&&(0,o.jsx)("span",{className:d.default.info,children:t?.photos_will_be_saved_to_pe_album})]}):(0,o.jsx)("div",{children:this.props.currentBackgroundType===c.BACKGROUND_MODES.PHOTO&&(0,o.jsx)("a",{className:d.default.link,onClick:()=>this.props.uploadPhoto(),children:t?.photos_pe_change_photo})})},this.renderBackgrounds=()=>{const{scrollBlockPosition:e}=this.state,{advice_gradients:t,colors:r}=this.props.backgrounds,{current:i}=this.scrollElement,n=i?e+i.offsetWidth:0,s=!!e,c=!i||!!(i.scrollWidth-n),h=[...t,...r];return(0,o.jsxs)("div",{className:d.default.backgrounds,onWheel:this.panelMouseWheel,children:[(0,o.jsx)("div",{style:{transform:`translateX(-${e}px)`,transition:""+(this.scrollWithAnimation?"transform .3s ease-out":"")},ref:this.scrollElement,children:h.map((({id:e,preview:t,background:r})=>(0,o.jsx)("a",{className:(0,a.classNames)(d.default.background,e===this.props.currentBackgroundId&&d.default.backgroundActive),"data-status-active":e===this.props.currentBackgroundId,style:{backgroundColor:r,backgroundImage:`url(${t})`},onClick:()=>{this.props.setCurrentBackgroundId(e),this.props.helpers?.sendStat("select_background")}},e)))}),s&&(0,o.jsx)("div",{className:(0,a.classNames)(d.default.arrow,d.default.arrowLeft),onClick:()=>this.handleArrowClick(!0),children:(0,o.jsx)(l.Icon24Chevron,{className:d.default.arrowIcon})}),c&&(0,o.jsx)("div",{className:(0,a.classNames)(d.default.arrow,d.default.arrowRight),onClick:()=>this.handleArrowClick(!1),children:(0,o.jsx)(l.Icon24Chevron,{className:d.default.arrowIcon})})]})},this.panelMouseWheel=e=>{this.setPosition(Math.abs(e.deltaY)>Math.abs(e.deltaX)?e.deltaY:e.deltaX)},this.setPosition=(e,t)=>{const{current:r}=this.scrollElement;if(!r)return;const{scrollBlockPosition:o}=this.state,i=r.offsetWidth,n=Math.max(0,Math.min(o+e,r.scrollWidth-i));t&&(this.scrollWithAnimation=!0),this.setState({scrollBlockPosition:n})},this.handleArrowClick=e=>{const{current:t}=this.scrollElement;if(!t)return;let r=t.offsetWidth/2;e&&(r=-r),this.setPosition(r,!0)},this.state={scrollBlockPosition:0},this.scrollElement=(0,i.createRef)(),this.scrollWithAnimation=!1}}const u={deleteLayer:s.deleteLayer,closeTextEditor:s.closeTextEditor},p=(0,n.connect)((e=>({context:e.present.data.context,layers:e.present.layers,addons:e.present.data.addons,helpers:e.present.data.helepers,langMap:e.present.data.langMap})),u)(h)},884035:(e,t,r)=>{r.d(t,{StickerPacksPanel:()=>S});var o=r(474848),i=r(296540),n=r(506996),s=r(38145),a=r(318659),l=r(8520),c=r(182490),d=r(410655),h=r(390768),u=r(190214),p=r(906110),g=r(291718),_=r(994814);class m extends i.Component{fetchStickers(){this.props.helpers.fetchStickers((e=>{const t={};e.stickers.forEach((e=>{e.items.forEach((e=>{t[e.id]=e}))})),this.props.setData({stickers:e.stickers,stickersMap:t})}),(e=>(console.error(e),!0)))}showStickerShop(){this.props.helpers.showStickerShop((()=>this.fetchStickers()))}constructor(e){super(e),this.componentDidMount=()=>{this.fetchStickers()},this.componentDidUpdate=()=>{this.scrollWithAnimation=!1},this.render=()=>{const e="vkcom_dark"===document.body.getAttribute("scheme"),{stickers:t,stickerMouseDown:r}=this.props,{stickerHeaderScrollPosition:i,currentStickerPackIndex:n}=this.props.ui,{current:s}=this.scrollElement,a=!!i;let m=!1,f=0;s&&(f=((0,l.isNumber)(i)?i:0)+s.offsetWidth,m=!!(s.scrollWidth-f));let S=t[n]?t[n].items:[];const v=[];for(let e=0,t=S.length;e<t;e+=3)v.push(S.slice(e,e+3));return(0,o.jsxs)("div",{className:_.default.root,children:[(0,o.jsxs)("div",{className:_.default.header,children:[(0,o.jsxs)("div",{className:_.default.scroll,style:{transform:`translateX(-${i}px)`,transition:""+(this.scrollWithAnimation?"transform .3s ease-out":"")},ref:this.scrollElement,onWheel:this.tabsMouseWheel,children:[(0,o.jsx)("div",{className:_.default.tab,onClick:()=>this.showStickerShop(),children:(0,o.jsx)(c.Icon24StorefrontOutline,{})}),t.map((({id:e},t)=>{const r=this.getTabPreviewUrl(t);if(!r)return null;const i=!["recent","editor"].includes(e.toString()),s=(0,l.classNames)(_.default.tab,t===n&&_.default.tabSelected),a=i?null:"recent"===e?(0,o.jsx)(d.Icon24RecentOutline,{}):(0,o.jsx)(h.Icon24SmileOutline,{});return(0,o.jsx)("div",{className:s,style:i?{backgroundImage:`url('${r}')`}:void 0,onClick:()=>this.selectStickerPack(t),children:a},e)}))]}),a&&(0,o.jsx)("div",{className:(0,l.classNames)(_.default.arrow,_.default.arrowLeft,e&&_.default.arrowLeftDark),onClick:()=>this.handleTabArrowClick(!0),children:(0,o.jsx)(u.Icon24Chevron,{className:_.default.arrowIcon})}),m&&(0,o.jsx)("div",{className:(0,l.classNames)(_.default.arrow,_.default.arrowRight,e&&_.default.arrowRightDark),onClick:()=>this.handleTabArrowClick(!1),children:(0,o.jsx)(u.Icon24Chevron,{className:_.default.arrowIcon})})]}),(0,o.jsx)("div",{className:_.default.content,children:v.map(((e,t)=>(0,o.jsx)("div",{children:e.map((({id:e,sizes:t})=>{const i=(0,g.getStickerSize)(t,p.STICKER_MEDIUM,!0);return(0,o.jsx)("div",{className:_.default.preview,onMouseDown:t=>r(t,e),children:(0,o.jsx)("img",{src:i,alt:"",className:_.default.previewImage})},e)}))},t)))})]})},this.getTabPreviewUrl=e=>{const{items:t}=this.props.stickers[e],[r=null]=t||[];return!(!t||!r)&&r.sizes[p.STICKER_THUMB]},this.selectStickerPack=e=>{this.props.setCurrentStickerPackIndex(e)},this.tabsMouseWheel=e=>{this.setPosition(Math.abs(e.deltaY)>Math.abs(e.deltaX)?e.deltaY:e.deltaX)},this.handleTabArrowClick=e=>{const{current:t}=this.scrollElement;if(!t)return;let r=t.offsetWidth;e&&(r=-r),this.setPosition(r,!0)},this.setPosition=(e,t)=>{const{current:r}=this.scrollElement,{stickerHeaderScrollPosition:o}=this.props.ui;if(!r)return;const i=r.offsetWidth,n=Math.max(0,Math.min(((0,l.isNumber)(o)?o:0)+e,r.scrollWidth-i));t&&(this.scrollWithAnimation=!0),this.props.setHeaderScrollPosition(n)},this.loadingLimit=25,this.scrollElement=(0,i.createRef)(),this.scrollWithAnimation=!1}}const f={setCurrentStickerPackIndex:s.setCurrentStickerPackIndex,setHeaderScrollPosition:s.setHeaderScrollPosition,setData:a.setData},S=(0,n.connect)((e=>({ui:e.present.ui,stickers:e.present.data.stickers,helpers:e.present.data.helpers})),f)(m)},587199:(e,t,r)=>{r.d(t,{StickersPanel:()=>l});var o=r(474848),i=r(296540),n=r(906110),s=r(291718),a=r(790594);const l=({stickerMouseDown:e,customStickers:t})=>{const r=t.map(((t,r)=>{const i=(0,s.getStickerSize)(t.sizes,n.STICKER_MEDIUM,!0);return(0,o.jsx)("div",{className:a.default.preview,onMouseDown:r=>e(r,t.id),children:(0,o.jsx)("img",{src:i,className:a.default.previewImage})},r)}));return(0,i.useMemo)((()=>(0,o.jsx)("div",{className:a.default.root,children:(0,o.jsx)("div",{className:a.default.content,children:r})})),[t])}},478067:(e,t,r)=>{r.d(t,{TextPanel:()=>S});var o=r(474848),i=r(296540),n=r(506996),s=r(775633),a=r(196058),l=r(514751),c=r(433376),d=r(533048),h=r(361182),u=r(290494),p=r(906110),g=r(601430),_=r(291718);class m extends i.Component{constructor(){super(...arguments),this.render=()=>{const{settings:e,setColor:t,setFontSize:r,layer:i,fontsPlaceholders:n,avgColor:s,langMap:a,globalScale:m}=this.props,f=i&&i.isEdit,S=i&&i.fontStyle,v=i&&i.fontSize,E=i&&i.color,T=e=>{switch(e){case"typewriter":return"18px";case"poster":return"24px";case"retro":return"19px";case"marker":return"26px";case"italics":return"22px";default:return"20px"}};return(0,o.jsxs)("div",{className:g.default.root,children:[f?(0,o.jsx)(d.Button,{mode:"primary",onClick:this.props.closeTextEditor,children:a?.photos_pe_save_text}):(0,o.jsx)(d.Button,{mode:"primary",before:(0,o.jsx)(c.Icon12Add,{}),onClick:()=>this.props.addLayerText(!0,{isEdit:!0,baseScale:m}),children:a?.photos_pe_add_text}),(0,o.jsxs)("div",{className:g.default.fonts,children:[(0,o.jsx)("div",{className:g.default.title,children:a?.photos_pe_font}),p.FONTS.map(((t,r)=>(0,o.jsx)(h.Radio,{className:g.default.radio,value:t,name:"photo_editor_fonts",onChange:()=>this.props.setFontStyle(t),checked:S?S===t:e.fontStyle===t,children:(0,o.jsx)("span",{style:{fontSize:T(t)},className:(0,_.getComputedFontFamily)(t),children:n&&n[r]})},t)))]}),(0,o.jsxs)("div",{className:g.default.fontSize,children:[(0,o.jsx)("div",{className:g.default.title,children:a?.photos_pe_font_size}),(0,o.jsx)(u.Slider,{min:0,max:1,isShowHandle:!0,value:v||e.fontSize,formatHint:e=>`${Math.round(100*e)}`,onChange:e=>r(e)})]}),(0,o.jsxs)("div",{className:g.default.colors,children:[(0,o.jsx)("div",{className:g.default.title,children:a?.photos_pe_color}),(0,o.jsx)(l.ColorPicker,{color:E||e.color,avgColor:s,setColor:t})]})]})}}}const f={addLayerText:s.addLayerText,setColor:a.setColor,setFontSize:a.setFontSize,setFontStyle:a.setFontStyle,closeTextEditor:s.closeTextEditor},S=(0,n.connect)((e=>{const{items:t,currentIndex:r}=e.present.layers;let o=null;return null!==r&&(o=t[r]),{settings:e.present.settings,layer:o,fontsPlaceholders:e.present.data.fontsPlaceholders,avgColor:e.present.layers.items[0].avgColor,langMap:e.present.data.langMap,globalScale:e.present.layers.globalScale}}),f)(m)},886065:(e,t,r)=>{r.d(t,{UndoRedo:()=>h});var o=r(474848),i=r(503618),n=r(506996),s=r(280196),a=r(48813),l=r(601352),c=r(8520);const d=i.ActionCreators,h=(0,n.connect)((e=>({canUndo:e.past.length>0,canRedo:e.future.length>0,helpers:e.present.data.helpers})),d)((({canUndo:e,canRedo:t,undo:r,redo:i,helpers:n})=>(0,o.jsxs)("div",{className:l.default.root,children:[(0,o.jsx)("button",{className:(0,c.classNames)(l.default.scaleButton,e&&l.default.scaleButtonActive),disabled:!e,onClick:()=>{n?.sendStat("undo"),r()},children:(0,o.jsx)(s.Icon24ArrowUturnLeftOutline,{})}),(0,o.jsx)("button",{className:(0,c.classNames)(l.default.scaleButton,t&&l.default.scaleButtonActive),disabled:!t,onClick:()=>{n?.sendStat("redo"),i()},children:(0,o.jsx)(a.Icon24ArrowUturnRightOutline,{})})]})))},547399:(e,t,r)=>{r.d(t,{ViewportHandler:()=>a});var o=r(474848),i=r(481786),n=r(296540),s=r(556117);const a=({move:e})=>{const t=(0,n.useRef)(0),r=(0,n.useRef)(0),a=o=>{e(o.clientX-t.current,o.clientY-r.current),t.current=o.clientX,r.current=o.clientY},l=()=>{window.removeEventListener("mousemove",a),window.removeEventListener("mouseup",l)};return(0,o.jsx)("div",{className:i.default.root,onMouseDown:e=>{t.current=e.clientX,r.current=e.clientY,window.addEventListener("mousemove",a),window.addEventListener("mouseup",l)},children:(0,o.jsxs)("div",{className:i.default.grid,children:[(0,o.jsx)("div",{className:(0,s.classNames)(i.default.line,i.default.lineV),style:{left:"33.3333%"}}),(0,o.jsx)("div",{className:(0,s.classNames)(i.default.line,i.default.lineV),style:{left:"66.6666%"}}),(0,o.jsx)("div",{className:(0,s.classNames)(i.default.line,i.default.lineH),style:{top:"33.3333%"}}),(0,o.jsx)("div",{className:(0,s.classNames)(i.default.line,i.default.lineH),style:{top:"66.6666%"}})]})})}},931977:(e,t,r)=>{r.d(t,{$cropActionStatus:()=>_,$currentLayerStatus:()=>p,$currentTab:()=>d,$scaleStatus:()=>C,$undoRedoStatusFiltered:()=>v,applyOrDenyChangesAndChangeTab:()=>a,cropAction:()=>g,currentLayerAction:()=>h,currentLayerStatusAction:()=>u,currentTabAction:()=>l,currentTabActionStatus:()=>c,getEditedPhoto:()=>y,photoEditorActions:()=>b,redoAction:()=>f,resetTrigger:()=>s,scaleAction:()=>T,scaleActionStatus:()=>w,undoAction:()=>m,undoRedoStatus:()=>S});var o=r(32489),i=r(8520);const n=(0,o.createDomain)("PhotoEditorDesktop"),s=n.createEvent(),a=n.createEvent(),l=n.createEvent(),c=n.createEvent(),d=n.createStore(null).on([l,c],((e,t)=>t));d.reset(s);const h=n.createEvent(),u=n.createEvent(),p=n.createStore(null).on([u],((e,t)=>t));p.reset(s);const g=n.createEvent(),_=n.createStore(null).on([g],((e,t)=>t));_.reset(s);const m=n.createEvent(),f=n.createEvent(),S=n.createEvent(),v=n.createStore({canUndo:!1,canRedo:!1,depth:0}).on(S,((e,t)=>(0,i.isEqual)(e,t)?e:t));v.reset(s);const E=n.createStore(0);E.reset(s),(0,o.sample)({clock:l,source:v,fn:e=>e.depth,target:E});const T=n.createEvent(),w=n.createEvent(),C=n.createStore({plus:"enabled",minus:"disabled",zoom:1,hidden:!1}).on([w,d],((e,t)=>{if((0,i.isString)(t)||null===t)return{...e,hidden:"crop"===t};const{scale:r,defaultScale:o}=t,n=o+3,s=o;return r>=n?{hidden:e.hidden,plus:"disabled",minus:"enabled",zoom:n}:r<=s?{hidden:e.hidden,plus:"enabled",minus:"disabled",zoom:s}:{...e,plus:"enabled",minus:"enabled",zoom:r}}));C.reset(s);const y=n.createEvent(),x=n.createEvent();(0,o.sample)({clock:x,source:E,filter:(e,t)=>"deny"===t||"apply"===t,fn:(e,t)=>({tab:null,depth:"deny"===t?e:null}),target:a}),(0,o.sample)({clock:x,fn:()=>null,target:l}),(0,o.sample)({clock:l,fn:e=>({tab:e,depth:null}),target:a});const b={undo:e=>m(e),redo:()=>f(),save:()=>y(),scale:e=>T(e),statusAction:e=>x(e),cropAction:e=>{g({value:e.value,useInitialCrop:!!e.useInitialCrop})}}},18395:(e,t,r)=>{r.d(t,{PhotoEditor:()=>u});var o=r(474848),i=r(296540),n=r(506996),s=r(537153),a=r(318659),l=r(8520),c=r(906110),d=r(585721);class h extends i.Component{createStore(){if(null!=this.$store)return this.$store;const e=this.props.artboardWidth,t=this.props.artboardHeight;let r,o=t-8,i=e-8/(t/e);if(e===t&&(o=t-8,i=e-8),this.props.initialCrop){const e=this.props.originalHeight/o,t=this.props.originalWidth/i;r={croppedWidth:this.props.initialCrop.croppedWidth/t,croppedHeight:this.props.initialCrop.croppedHeight/e,croppedX:this.props.initialCrop.croppedX/t,croppedY:this.props.initialCrop.croppedY/e,ratio:this.props.initialCrop.croppedWidth/this.props.initialCrop.croppedHeight,yViewPortRatio:e,xViewPortRatio:t}}return this.$store=(0,s.createPhotoEditorStore)({data:{...this.props,artboardWidth:this.props.isRedesignEnabled?i:e,artboardHeight:this.props.isRedesignEnabled?o:t,imageContainerWidth:this.props.imageContainerWidth||this.props.artboardWidth,imageContainerHeight:this.props.imageContainerHeight||this.props.artboardHeight,context:this.props.context||"photo",renderStart:performance.now(),initialCrop:r}}),(0,l.isFunction)(this.props.storeInit)&&this.props.storeInit(this.$store),this.$store}componentWillUnmount(){(0,l.isFunction)(this.props.onDestroy)&&this.props.onDestroy()}componentDidUpdate(e){const t={};let r=!1;["langMap","isRedesignEnabled"].forEach((o=>{e[o]!==this.props[o]&&(t[o]=this.props[o],r=!0)})),null!=this.$store&&r&&this.$store.dispatch((0,a.setData)(t))}render(){const e=this.createStore();return(0,o.jsx)(n.Provider,{store:e,children:(0,o.jsx)(d.BaseEditor,{stickers:this.props.stickers,ref:e=>{(0,l.isFunction)(this.props.refCb)&&this.props.refCb(e)}})})}constructor(){super(...arguments),this.$store=null}}h.defaultProps={originalWidth:c.STORY_BASE_WIDTH,originalHeight:c.STORY_BASE_HEIGHT};const u=h},966513:(e,t,r)=>{r.d(t,{background:()=>n});var o=r(864876);const i={currentBackgroundType:"none",currentPhotoUrl:null,currentBackgroundId:null},n=(e=i,t)=>{switch(t.type){case o.SET_CURRENT_BACKGROUND_TYPE:return{...e,currentBackgroundType:t.value};case o.SET_CURRENT_PHOTO_URL:return{...e,currentPhotoUrl:t.value};case o.SET_CURRENT_BACKGROUND_ID:return{...e,currentBackgroundId:t.value};default:return e}}},48081:(e,t,r)=>{r.d(t,{data:()=>n});var o=r(864876);const i={artboardHeight:0,artboardWidth:0,imageContainerHeight:0,originalWidth:0,originalHeight:0},n=(e=i,t)=>t.type===o.SET_DATA?{...e,...t.payload}:e},631498:(e,t,r)=>{r.d(t,{drawings:()=>i});var o=r(864876);const i=(e=[],t)=>{switch(t.type){case o.ADD_DRAWING:return[...e,t.payload];case o.UPDATE_DRAWING:return t.payload;default:return e}}},218909:(e,t,r)=>{r.d(t,{reducers:()=>m});var o=r(82960),i=r(503618),n=r(266432),s=r(994167),a=r(200800),l=r(471415),c=r(631498),d=r(966513),h=r(48081),u=r(462900),p=r(864876);let g,_=!1;const m=(0,n.esModuleUnwrapDefault)(i.default)((0,o.combineReducers)({ui:s.ui,settings:a.settings,layers:l.layers,drawings:c.drawings,background:d.background,data:h.data,ml:u.ml}),{limit:100,syncFilter:!0,filter:(0,i.combineFilters)((function(e){return![p.SET_CURRENT_BACKGROUND_ID,p.SET_CURRENT_BACKGROUND_TYPE,p.ADD_LAYER_TEXT,p.ADD_LAYER_IMAGE,p.ADD_LAYER_STICKER,p.SET_CURRENT_PHOTO_URL,p.SET_LAYERS_SCALE,p.SET_LAYERS_SHIFT,p.SET_SETTING_SEGMENTATION_RESET,p.SET_SETTING_CROP].includes(e.type)||e.canUndo}),(0,i.includeAction)([p.SET_SETTING_COLOR_CORRECTION,p.SET_SETTING_BLUR_SIZE,p.SET_SETTING_BLUR_RADIUS,p.SET_SETTING_BLUR_POSITION,p.SET_SETTING_BLUR_ENABLE,p.SET_SETTING_BLUR_FORM,p.SET_SETTING_AUTO_CORRECTION,p.SET_SETTING_FILTER,p.SET_SETTING_FILTER_AMOUNT,p.ADD_LAYER_STICKER,p.ADD_LAYER_TEXT,p.DELETE_LAYER,p.ADD_DRAWING,p.SET_CURRENT_BACKGROUND_TYPE,p.SET_CURRENT_PHOTO_URL,p.SET_CURRENT_BACKGROUND_ID,p.SET_LAYER_COLOR,p.SET_LAYER_FONT_SIZE,p.SET_LAYER_FONT_STYLE,p.TOGGLE_TEXT_EDIT,p.SET_SHOW_DROP_BOX,p.START_LAYER_SCALE,p.SET_SEGMENTATION_DATA,p.RESET_SEGMENTATION_DATA,p.SET_SETTING_SEGMENTATION_INVERSE,p.SET_SETTING_SEGMENTATION_DELETE,p.SET_SETTING_SEGMENTATION_RESET,p.SET_SETTING_SEGMENTATION_BACKGROUND_COLOR,p.SET_SETTING_CROP]),(function(e){return e.type===p.TOGGLE_TEXT_EDIT?e.payload.isEdit:e.type===p.SET_SHOW_DROP_BOX?e.value:![p.SET_SETTING_COLOR_CORRECTION,p.SET_SETTING_FILTER_AMOUNT,p.SET_SETTING_BLUR_SIZE,p.SET_SETTING_BLUR_RADIUS,p.SET_SETTING_BLUR_POSITION,p.SET_LAYER_FONT_SIZE].includes(e.type)||(e.type!==g?(_=!1,g=e.type,!0):!_&&(_=!0,setTimeout((()=>{_=!1}),500),!0))}))})},471415:(e,t,r)=>{r.d(t,{layers:()=>s});var o=r(864876),i=r(906110);const n={currentIndex:null,items:[{canvas:document.createElement("canvas"),type:i.LAYER_TYPES.BACKGROUND,width:1,height:1,isBackground:!0,locked:!0,x:0,y:0,rotate:0,canDelete:!1,scale:1,avgColor:{r:128,g:128,b:128},baseScale:1}],globalScale:1,shiftX:0,shiftY:0,defaultScale:1},s=(e=n,t)=>{switch(t.type){case o.SET_CURRENT_LAYER:return{...e,currentIndex:t.index};case o.ADD_LAYER_STICKER:case o.ADD_LAYER_TEXT:case o.ADD_LAYER_IMAGE:return{...e,items:[...e.items,t.payload]};case o.SET_LAYER_POSITION:case o.SET_LAYER_SCALE:case o.SET_LAYER_COLOR:case o.SET_LAYER_FONT_SIZE:case o.SET_LAYER_FONT_STYLE:case o.SET_LAYER_TEXT:case o.TOGGLE_TEXT_EDIT:return{...e,items:e.items.map(((r,o)=>e.currentIndex===o?{...r,...t.payload}:r))};case o.SET_LAYERS_SCALE:return{...e,globalScale:t.payload.scale,shiftX:t.payload.shiftX,shiftY:t.payload.shiftY,defaultScale:t.payload.defaultScale};case o.SET_LAYERS_SHIFT:return{...e,shiftX:t.payload.shiftX,shiftY:t.payload.shiftY};case o.START_LAYER_SCALE:return{...e};case o.UPDATE_BACKGROUND_LAYER:return{...e,items:e.items.map(((e,r)=>0===r?{...e,...t.payload}:e))};case o.DELETE_LAYER:return{...e,currentIndex:null,items:e.items.filter(((e,r)=>r!==t.index))};case o.UPDATE_LAYERS_AFTER_CROP:return{...e,items:t.items};default:return e}}},462900:(e,t,r)=>{r.d(t,{ml:()=>i});var o=r(864876);const i=(e={},t)=>{switch(t.type){case o.SET_SEGMENTATION_DATA:return{...e,segmentation:{mask:t.payload.mask,clicks:[...e.segmentation?.clicks||[],t.payload.click]}};case o.RESET_SEGMENTATION_DATA:return{...e,segmentation:{mask:"",clicks:[]}};default:return e}}},200800:(e,t,r)=>{r.d(t,{settings:()=>a});var o=r(864876),i=r(906110);const n={color:i.COLORS[0],brushWidth:.5,brushOpacity:1,fontSize:.5,fontStyle:i.FONTS[0],filter:{name:i.PHOTO_FILTERS[0],value:.5},colorCorrection:{exposure:0,contrast:0,saturation:0,warmth:0,vignette:0,sharpness:0,grain:0},blur:{isEnabled:!1,form:i.BLUR_TYPES.ROUND,size:50,radius:.3,position:[.5,.5]},isAutoCorrection:!1,cropAspect:i.CROP_ASPECT_FREE,cropUseInitial:!1,isCropped:!1,flipX:!1,flipY:!1,rotation:0,segmentation:{enabled:!1,mode:"positive",inverse:!1,delete:!1,color:"#FFFFFF"},loading:{enhance:!1,segmentation:!1},enhance:{active:!1,url:"",srcUrl:""},croppedWidth:null,croppedHeight:null,croppedX:null,croppedY:null,containerWidth:null,containerHeight:null,disableCropRestrictions:!1},s=(e,t)=>{const r=void 0!==t.active,o=void 0!==t.url,i=void 0!==t.srcUrl,n={...e};return r&&(n.active=t.active),o&&(n.url=t.url),i&&(n.srcUrl=t.srcUrl),n},a=(e=n,t)=>{switch(t.type){case o.SET_SETTING_COLOR:return{...e,color:t.color};case o.SET_SETTING_BRUSH_WIDTH:return{...e,brushWidth:t.brushWidth};case o.SET_SETTING_BRUSH_OPACITY:return{...e,brushOpacity:t.brushOpacity};case o.SET_SETTING_FONT_SIZE:return{...e,fontSize:t.fontSize};case o.SET_SETTING_FONT_FAMILY:return{...e,fontStyle:t.fontStyle};case o.SET_SETTING_COLOR_CORRECTION:return{...e,colorCorrection:{...e.colorCorrection,[t.filter]:t.value}};case o.SET_SETTING_FILTER:return{...e,filter:{...e.filter,name:t.name}};case o.SET_SETTING_FILTER_AMOUNT:return{...e,filter:{...e.filter,value:t.value}};case o.SET_SETTING_BLUR_ENABLE:return{...e,blur:{...e.blur,isEnabled:t.isEnabled}};case o.SET_SETTING_BLUR_FORM:return{...e,blur:{...e.blur,form:t.form}};case o.SET_SETTING_BLUR_SIZE:return{...e,blur:{...e.blur,size:t.size}};case o.SET_SETTING_BLUR_RADIUS:return{...e,blur:{...e.blur,radius:t.radius}};case o.SET_SETTING_BLUR_POSITION:return{...e,blur:{...e.blur,position:t.position}};case o.SET_SETTING_AUTO_CORRECTION:return{...e,isAutoCorrection:t.isAutoCorrection};case o.SET_SETTING_CROP_ASPECT:return{...e,cropAspect:t.aspect,cropUseInitial:t.cropUseInitial};case o.SET_SETTING_CROPPED:return{...e,isCropped:t.isCropped};case o.SET_SETTING_FLIP_X:return{...e,flipX:t.value};case o.SET_SETTING_FLIP_Y:return{...e,flipY:t.value};case o.SET_SETTING_ROTATE:return{...e,rotation:t.value};case o.SET_SETTING_SEGMENTATION:return{...e,segmentation:t.value};case o.SET_SETTING_SEGMENTATION_INVERSE:return{...e,segmentation:{...e.segmentation,inverse:t.value}};case o.SET_SETTING_SEGMENTATION_BACKGROUND_COLOR:return{...e,segmentation:{...e.segmentation,color:t.value}};case o.SET_SETTING_SEGMENTATION_DELETE:return{...e,segmentation:{...e.segmentation,delete:t.value,enabled:!1}};case o.SET_SETTING_SEGMENTATION_RESET:return{...e,segmentation:{delete:!1,inverse:!1,mode:"positive",enabled:!1,color:"#FFFFFF"}};case o.SET_SETTING_LOADING:return{...e,loading:{...e.loading,...t.value}};case o.SET_SETTING_ENHANCE:return{...e,enhance:s(e.enhance,t.value)};case o.SET_SETTING_CROP:return null===t.value?{...e,croppedY:null,croppedX:null,croppedWidth:null,croppedHeight:null,containerWidth:null,containerHeight:null,disableCropRestrictions:!1}:{...e,...t.value};default:return e}}},994167:(e,t,r)=>{r.d(t,{ui:()=>n});var o=r(864876);const i={isDataLoaded:!1,isShowDropBox:!1,isSaveLoading:!1,currentMode:null,currentStickerPackIndex:0,stickerHeaderScrollPosition:0},n=(e=i,t)=>{switch(t.type){case o.SET_DATA_LOADED:return{...e,isDataLoaded:!0};case o.SET_SHOW_DROP_BOX:return{...e,isShowDropBox:t.value};case o.SET_SAVE_LOADING:return{...e,isSaveLoading:t.value};case o.SET_CURRENT_TAB:return{...e,currentMode:t.value};case o.SET_CURRENT_STICKER_PACK_INDEX:return{...e,currentStickerPackIndex:t.value};case o.SET_HEADER_SCROLL_POSITION:return{...e,stickerHeaderScrollPosition:t.value};default:return e}}},852485:(e,t,r)=>{r.d(t,{useArtboardSizes:()=>l,useAvgColor:()=>g,useBackgroundUrl:()=>p,useCropSettings:()=>h,useCurrentFilter:()=>S,useCurrentLayer:()=>m,useCurrentMode:()=>v,useData:()=>s,useFontsPlaceholders:()=>f,useHelpers:()=>c,useLangMap:()=>_,useNewFeaturesCheck:()=>a,useSettings:()=>d,useSnapshot:()=>n,useViewportSizes:()=>u});var o=r(506996),i=r(629484);function n(e,t){return(0,o.useSelector)((t=>e(t.present)),t)}function s(){return n((e=>e.data))}function a(){return n((e=>!0===e.data.isNewFeaturesEnabled))}function l(){return n((e=>({artboardWidth:e.data.artboardWidth,artboardHeight:e.data.artboardHeight})),o.shallowEqual)}function c(){return n((e=>e.data?.helpers??{}),o.shallowEqual)}function d(){return n((e=>e.settings))}function h(){return n((e=>({croppedWidth:e.settings.croppedWidth??e.data.artboardWidth,croppedHeight:e.settings.croppedHeight??e.data.artboardHeight,croppedX:e.settings.croppedX||0,croppedY:e.settings.croppedY||0,containerWidth:e.settings.containerWidth??e.data.artboardWidth,containerHeight:e.settings.containerHeight??e.data.artboardHeight,disableCropRestrictions:e.settings.disableCropRestrictions??!1})),o.shallowEqual)}function u(){return n((e=>{const t=e.data.artboardWidth,r=e.data.artboardHeight,o=e.settings.disableCropRestrictions?e.data.artboardWidth:e.settings.croppedWidth??e.data.artboardWidth,i=e.settings.disableCropRestrictions?e.data.artboardHeight:e.settings.croppedHeight??e.data.artboardHeight,n=e.layers.globalScale,s=e.layers.globalScale/e.layers.defaultScale,a=e.layers.shiftX,l=e.layers.shiftY,c=e.settings.disableCropRestrictions?0:(e.settings.croppedX||0)*n,d=e.settings.disableCropRestrictions?0:(e.settings.croppedY||0)*n,h=(e.settings.containerWidth??t)/(e.settings.containerHeight??r),[u,p]=h>=t/r?[t,t/h]:[r*h,r],g=o*n,_=i*n,m=g-u,f=_-p;return{scale:s,realScale:n,canvasWidth:o,canvasHeight:i,visibleRectWidth:g<=u?o:u/n,visibleRectHeight:_<=p?i:p/n,visibleRectX:(Math.abs(a)-c)/n,visibleRectY:(Math.abs(l)-d)/n,scaledBaseLayerShiftX:c,scaledBaseLayerShiftY:d,scaledMaxLayerShiftX:c+m,scaledMaxLayerShiftY:d+f}}),o.shallowEqual)}function p(){return(0,o.useSelector)(i.getCurrentImageUrl)||null}function g(){return n((e=>e.layers.items[0].avgColor))}function _(){return n((e=>e.data.langMap??null))}function m(){return n((e=>{const t=e.layers,r=t.currentIndex;return null==r?null:t.items[r]}))}function f(){return n((e=>e.data?.fontsPlaceholders))}function S(){return n((e=>e.settings.filter.name))}function v(){return n((e=>e.ui.currentMode))}},537153:(e,t,r)=>{r.d(t,{createPhotoEditorStore:()=>l});var o=r(82960),i=r(503618),n=r(216073),s=r(901265),a=r(218909);const l=e=>{const t=(0,i.newHistory)([],e,[]),r=n.composeWithDevTools((0,o.applyMiddleware)(s.default));return(0,o.createStore)(a.reducers,t,r)}},629484:(e,t,r)=>{r.d(t,{getCurrentImageUrl:()=>s,getMarginTop:()=>a});var o=r(8520),i=r(906110);const n={};function s(e){const{currentBackgroundType:t,currentPhotoUrl:r,currentBackgroundId:o}=e.present.background,{enhance:s}=e.present.settings,a=e.present.data.backgrounds;let l="";if(t===i.BACKGROUND_MODES.PHOTO)l=r||"",s?.active&&s.url&&(l=s.url);else{if(null==a)return"";const t=Object.values(a);let r=null;for(let e=0;e<t.length;e++){const i=t[e].find((e=>e.id===o));if(null!=i){r=i;break}}if(null!=r)if(r.url)l=r.url;else if(n[r.id])l=n[r.id];else{const{originalWidth:t,originalHeight:o}=e.present.data,i=document.createElement("canvas"),s=i.getContext("2d");i.width=t,i.height=o,s.fillStyle=r.background,s.fillRect(0,0,t,o),n[r.id]=i.toDataURL(),l=n[r.id]}}return l}function a(e){const{artboardHeight:t,imageContainerHeight:r,isRedesignEnabled:i}=e.present.data,{containerHeight:n}=e.present.settings;return(0,o.isNumber)(n)?i?r/2-n/2-4:r/2-n/2:(0,o.isNumber)(t)?i?r/2-t/2-4:r/2-t/2:0}},291718:(e,t,r)=>{r.d(t,{clean:()=>S,copyCanvas:()=>m,domData:()=>v,drawBlurFromImage:()=>p,flipPointHorizontally:()=>I,flipPointVertically:()=>R,getAverageRGB:()=>l,getComputedFontFamily:()=>T,getOrientation:()=>c,getPositionWithGravity:()=>u,getRelativeCoordinates:()=>x,getRelativeXY:()=>n,getScaledCoordinates:()=>b,getStickerSize:()=>w,getWidthHeightOfImageUrl:()=>d,hexToRgba:()=>s,hexToRgbaValues:()=>a,hsl2hex:()=>_,irand:()=>E,printAtWordWrap:()=>f,resetOrientation:()=>h,rgb2hsv:()=>g,rotateImageToCurrentAngleAndFlip:()=>C,rotatePoint:()=>y});var o=r(65055),i=r(801013);function n(e,t){if(!t)return{x:0,y:0,xOrigin:0,yOrigin:0,width:0,height:0};const{left:r,top:o,width:i,height:n}=t.getBoundingClientRect();return{x:e.clientX-r,y:e.clientY-o,xOrigin:r,yOrigin:o,width:i,height:n}}function s(e,t){const r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(!r)return"rgba(0, 0, 0, 1)";return`rgba(${parseInt(r[1],16)}, ${parseInt(r[2],16)}, ${parseInt(r[3],16)}, ${t})`}function a(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(!t)return{r:0,g:0,b:0};return{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}}function l(e){const t=e.getContext("2d"),r={r:0,g:0,b:0};let o;if(!t)return r;try{o=t.getImageData(0,0,t.canvas.width,t.canvas.height)}catch(e){return r}let i=-4,n=0;for(;(i+=20)<o.data.length;)++n,r.r+=o.data[i],r.g+=o.data[i+1],r.b+=o.data[i+2];return r.r=~~(r.r/n),r.g=~~(r.g/n),r.b=~~(r.b/n),r}function c(e){return new Promise((t=>{const r=new FileReader;r.onload=e=>{if(!e.target)return;const r=e.target,o=new DataView(r.result);if(65496!==o.getUint16(0,!1))return t(-2);const i=o.byteLength;let n=2;for(;n<i;){if(o.getUint16(n+2,!1)<=8)return t(-1);let e=o.getUint16(n,!1);if(n+=2,65505===e){if(1165519206!==o.getUint32(n+=2,!1))return t(-1);let e=18761===o.getUint16(n+=6,!1);n+=o.getUint32(n+4,e);let r=o.getUint16(n,e);n+=2;for(let i=0;i<r;i++)if(274===o.getUint16(n+12*i,e))return t(o.getUint16(n+12*i+8,e))}else{if(65280&~e)break;n+=o.getUint16(n,!1)}}return t(-1)},r.readAsArrayBuffer(e)}))}function d(e){return new Promise((t=>{const r=new Image;r.onload=()=>{t({width:r.width,height:r.height})},r.src=e}))}function h(e,t){return new Promise(((r,o)=>{const i=new Image;i.onload=()=>{const e=i.width,n=i.height,s=document.createElement("canvas"),a=s.getContext("2d");if(!a)return o();switch(4<t&&t<9?(s.width=n,s.height=e):(s.width=e,s.height=n),t){case 2:a.transform(-1,0,0,1,e,0);break;case 3:a.transform(-1,0,0,-1,e,n);break;case 4:a.transform(1,0,0,-1,0,n);break;case 5:a.transform(0,1,1,0,0,0);break;case 6:a.transform(0,1,-1,0,n,0);break;case 7:a.transform(0,-1,-1,0,n,e);break;case 8:a.transform(0,-1,1,0,0,e)}a.drawImage(i,0,0),r(s.toDataURL())},i.src=e}))}function u(e,t,r,o,i,n,s){let a=0,l=0;switch(e){case"left_top":a=o+n,l=i+s;break;case"left_center":a=o+n,l=r/2+s;break;case"left_bottom":a=o+n,l=r-i+s;break;case"center_top":a=t/2+n,l=i+s;break;case"center":a=t/2+n,l=r/2+s;break;case"center_bottom":a=t/2+n,l=r-i+s;break;case"right_top":a=t-o+n,l=i+s;break;case"right_center":a=t-o+n,l=r/2+s;break;case"right_bottom":a=t-o+n,l=r-i+s}return{x:Math.round(a),y:Math.round(l)}}function p(e,t,r){const o=e.getContext("2d");o&&(o.clearRect(0,0,e.width,e.height),o.fillStyle="rgb(30, 30, 30)",o.fillRect(0,0,e.width,e.height),o.save(),o.filter="blur(135px)",o.drawImage(t,0,0,e.width,e.height),o.restore(),"none"!==o.filter&&(o.fillStyle=`rgb(${r.r}, ${r.g}, ${r.b})`,o.fillRect(0,0,e.width,e.height)))}function g(e,t,r){let o=0,i=0,n=e/255,s=t/255,a=r/255,l=Math.max(n,s,a),c=l-Math.min(n,s,a);const d=e=>(l-e)/6/c+.5,h=e=>Math.round(100*e)/100;if(0!==c){i=c/l;const e=d(n),t=d(s),r=d(a);n===l?o=r-t:s===l?o=1/3+e-r:a===l&&(o=2/3+t-e),o<0?o+=1:o>1&&(o-=1)}return{h:Math.round(360*o),s:h(100*i),v:h(100*l)}}function _(e,t,r){t/=100,r/=100;let o=(1-Math.abs(2*r-1))*t,i=o*(1-Math.abs(e/60%2-1)),n=r-o/2,s=0,a=0,l=0;return 0<=e&&e<60?(s=o,a=i,l=0):60<=e&&e<120?(s=i,a=o,l=0):120<=e&&e<180?(s=0,a=o,l=i):180<=e&&e<240?(s=0,a=i,l=o):240<=e&&e<300?(s=i,a=0,l=o):300<=e&&e<360&&(s=o,a=0,l=i),s=Math.round(255*(s+n)).toString(16),a=Math.round(255*(a+n)).toString(16),l=Math.round(255*(l+n)).toString(16),1===s.length&&(s="0"+s),1===a.length&&(a="0"+a),1===l.length&&(l="0"+l),"#"+s+a+l}function m(e){const t=document.createElement("canvas"),r=t.getContext("2d");return t.width=e.width,t.height=e.height,r?.drawImage(e,0,0,e.width,e.height),t}function f(e,t,r,o,i,n){if((n=n||0)<=0)return void e.fillText(t,r,o);let s=t.replace(/(\v)/gm,"\n").split("\n"),a=0,l=1;for(;s.length>0&&l<=s.length;){const t=s.slice(0,l).join(" ");e.measureText(t).width>n?(1===l&&(l=2),e.fillText(s.slice(0,l-1).join(" "),r,o+i*a),a++,s=s.splice(l-1),l=1):l++}l>0&&e.fillText(s.join(" "),r,o+i*a)}function S(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):""}function v(e,t,r){return e?void 0!==r?(null===r?e.removeAttribute("data-"+t):e.setAttribute("data-"+t,r),r):e.getAttribute("data-"+t):null}const E=(e,t)=>Math.floor(((e,t)=>Math.random()*(t-e+1)+e)(e,t)),T=e=>{switch(e){case"typewriter":return o.default.typewriter;case"poster":return o.default.poster;case"retro":return o.default.retro;case"marker":return o.default.marker;case"italics":return o.default.italics;case"cursive":return o.default.cursive;case"classic":return o.default.classic;case"impact":return o.default.impact;case"lobster":return o.default.lobster;default:return}};function w(e,t,r){return e[r?`${t}b`:t]||e[t]}function C({url:e,angle:t,flipX:r,flipY:o}){const n=document.createElement("canvas"),s=n?.getContext("2d");return new Promise(((a,l)=>{i.imageCacheGlobal.get(e).then((e=>{let i=e.width,c=e.height;if(!t||Math.abs(t)/90!=1&&Math.abs(t)/90!=3||(i=e.height,c=e.width),n&&s)return n.width=i,n.height=c,r?(s.translate(n.width,0),s.scale(-1,1)):o&&(s.translate(0,n.height),s.scale(1,-1)),s.translate(n.width/2,n.height/2),s.rotate(t*Math.PI/180),s.drawImage(e,-e.width/2,-e.height/2),n.toBlob((e=>{if(!e)return;const t=URL.createObjectURL(e);a({url:t,width:i,height:c})}),"image/jpeg",1);l("Canvas error")})).catch((e=>{l(e)}))}))}function y(e,t,r,o,i){const n=i*Math.PI/180,s=Math.cos(n),a=Math.sin(n),l=o+a*(e-r)+s*(t-o);return[parseFloat((r+s*(e-r)-a*(t-o)).toFixed(2)),parseFloat(l.toFixed(2))]}function x(e,t,r,o){return[e-r,t-o]}function b(e,t,r){return[e*r,t*r]}function I(e,t,r){return[2*r-e,t]}function R(e,t,r){return[e,2*r-t]}},266432:(e,t,r)=>{function o(e){return function(e){return e&&"__esModule"in e&&!0===e.__esModule}(e)?e.default:e}r.d(t,{esModuleUnwrapDefault:()=>o})},651094:(e,t,r)=>{r.d(t,{browser:()=>i});const o=navigator.userAgent.toLowerCase(),i={version:(o.match(/.+(?:me|ox|on|rv|it|era|opr|ie|edge)[\/: ]([\d.]+)/)||[0,"0"])[1],opera:/opera/i.test(o)||/opr/i.test(o),vivaldi:/vivaldi/i.test(o),amigo:/amigo.*mrchrome soc/i.test(o),msie:/msie/i.test(o)&&!/opera/i.test(o)||/trident\//i.test(o)||/edge/i.test(o),msie6:/msie 6/i.test(o)&&!/opera/i.test(o),msie7:/msie 7/i.test(o)&&!/opera/i.test(o),msie8:/msie 8/i.test(o)&&!/opera/i.test(o),msie9:/msie 9/i.test(o)&&!/opera/i.test(o),msie_edge:/edge/i.test(o)&&!/opera/i.test(o),mozilla:/firefox/i.test(o),yabrowser:/yabrowser/i.test(o),whale:/whale/i.test(o),chrome:/chrome/i.test(o)&&!/edge/i.test(o),safari:!/chrome/i.test(o)&&/webkit|safari|khtml/i.test(o),iphone:/iphone/i.test(o),ipod:/ipod/i.test(o),iphone4:/iphone.*OS 4/i.test(o),ipod4:/ipod.*OS 4/i.test(o),ipad:/ipad/i.test(o),ios:/.+(ipod|ipad|iphone.*os)/i.test(o),android:/android/i.test(o),bada:/bada/i.test(o),mobile:/iphone|ipod|ipad|opera mini|opera mobi|iemobile|android/i.test(o),msie_mobile:/iemobile/i.test(o),safari_mobile:/iphone|ipod|ipad/i.test(o),opera_mobile:/opera mini|opera mobi/i.test(o),opera_mini:/opera mini/i.test(o),mac:/mac/i.test(o),windows7:/windows nt 6.1/i.test(o),windowsVista:/windows nt 6.0/i.test(o),windowsXp:/windows nt (5.2|5.1)/i.test(o),search_bot:/(yandex|google|stackrambler|aport|slurp|msnbot|bingbot|twitterbot|ia_archiver|facebookexternalhit)/i.test(o),smart_tv:/smart-tv|smarttv/i.test(o)}},624761:(e,t,r)=>{r.d(t,{stickersEmojiKeyboard:()=>o});const o=(0,r(32489).createDomain)()},243939:(e,t,r)=>{r.d(t,{$userEnv:()=>n,setUserEnv:()=>i});var o=r(624761);const i=o.stickersEmojiKeyboard.createEvent(),n=o.stickersEmojiKeyboard.createStore({}).on(i,((e,t)=>t))},332119:(e,t,r)=>{r.d(t,{drawRoundedImage:()=>i,getCoverSize:()=>s,getCroppedImage:()=>a,getZeroFrameFromGif:()=>l,roundRect:()=>n});var o=r(705744);const i=(e,t,r,o,i,n,s,a,l,c,d)=>{const h=a||o,u=l||i,p=c||n||t.naturalWidth,g=d||s||t.naturalHeight;e.beginPath(),e.arc(h+r,u+r,r,Math.PI,Math.PI+Math.PI/2),e.lineTo(h+p-r,u),e.arc(h+p-r,u+r,r,Math.PI+Math.PI/2,2*Math.PI),e.lineTo(h+p,u+g-r),e.arc(h+p-r,u+g-r,r,2*Math.PI,Math.PI/2),e.lineTo(h+r,u+g),e.arc(h+r,u+g-r,r,Math.PI/2,Math.PI),e.closePath(),e.save(),e.clip(),e.drawImage(t,o,i,n,s,a,l,c,d),e.restore()},n=(e,t,r,o,i,n)=>{let s={};if("number"==typeof n)s={tl:n,tr:n,br:n,bl:n};else{const e={tl:0,tr:0,br:0,bl:0};for(let t in e)s[t]=s[t]||e[t]}e.save(),e.beginPath(),e.moveTo(t+s.tl,r),e.lineTo(t+o-s.tr,r),e.quadraticCurveTo(t+o,r,t+o,r+s.tr),e.lineTo(t+o,r+i-s.br),e.quadraticCurveTo(t+o,r+i,t+o-s.br,r+i),e.lineTo(t+s.bl,r+i),e.quadraticCurveTo(t,r+i,t,r+i-s.bl),e.lineTo(t,r+s.tl),e.quadraticCurveTo(t,r,t+s.tl,r),e.closePath(),e.restore()},s=(e,t,r,o,i,n)=>{const s=e/t;let a,l;return s>r/o?(a=o,l=o*s):(l=r,a=r/s),{width:l,height:a,offsetLeft:(r-l)*(i=void 0===i?.5:i),offsetTop:(o-a)*(n=void 0===n?.5:n)}};function a(e,t,r,i,n,s=0){return new Promise(((a,l)=>{("string"==typeof e?(0,o.loadImage)(e):Promise.resolve(e)).then((e=>{const c=document.createElement("canvas");c.width=90===s||270===s?e.naturalHeight:e.naturalWidth,c.height=90===s||270===s?e.naturalWidth:e.naturalHeight;const d=c.getContext("2d");if(!d)return void a(e);d.fillStyle="#fff",d.fillRect(0,0,d.canvas.width,d.canvas.height),s?(d.translate(c.width/2,c.height/2),d.rotate(s*Math.PI/180),d.drawImage(e,-e.naturalWidth/2,-e.naturalHeight/2)):d.drawImage(e,0,0);const h=d.getImageData(t,r,i,n),u=document.createElement("canvas");u.width=i,u.height=n;const p=u.getContext("2d");if(p)return p.putImageData(h,0,0),(0,o.loadImage)(u.toDataURL("image/jpeg",1)).then(a).catch(l);a(e)})).catch(l)}))}const l=(e,t,r)=>new Promise((i=>{"image/gif"!==e.type&&i({file:e,image:t,imageUrl:r});let n=document.createElement("canvas"),s=n.getContext("2d");if(!s)return i({file:e,image:t,imageUrl:r});n.width=t.width,n.height=t.height,s.drawImage(t,0,0),n.toBlob((n=>{if(null===n)return void i({file:e,image:t,imageUrl:r});const s=URL.createObjectURL(n);(0,o.loadImage)(r).then((e=>{i({file:n,image:e,imageUrl:s})})).catch((o=>{console.log(o),i({file:e,image:t,imageUrl:r})}))}))}))},794353:(e,t,r)=>{r.d(t,{ALBUM_GO_UPLOADER_ACCEPT_TYPES:()=>n,GO_UPLOADER_ERROR_INCORRECT_SIZE:()=>s,GO_UPLOADER_MAX_HEIGHT_DEFAULT:()=>l,GO_UPLOADER_MAX_WIDTH_DEFAULT:()=>a,acceptFile:()=>d,logError:()=>c});var o=r(87223),i=r(944933);const n=["image/jpeg","image/png","image/gif","image/heic","image/heif","image/webp"],s=4601,a=8096,l=8096,c=(e,t="unknown",r={})=>{const i={environment:"goUploader",breadcrumb:{message:t,data:r,category:"custom"}};(0,o.logError)(e,i)},d=(e,t)=>{if(e&&t){const r=e.name||"",o=e.type?e.type.toLowerCase():(0,i.calcMimeTypeByFileName)(r),n=o.replace(/\/.*$/,"");return t.some((e=>{const t=e.trim().toLowerCase();return t.startsWith(".")?r.toLowerCase().endsWith(t):t.endsWith("/*")?n===t.replace(/\/.*$/,""):o===t}))}return!0}},944933:(e,t,r)=>{r.d(t,{calcMimeTypeByFileName:()=>s,convertFileBlobToUploadedImage:()=>n,isHeicFile:()=>a});var o=r(705744),i=r(332119);const n=e=>{const t=URL.createObjectURL(e);return(0,o.loadImage)(t).then((r=>(0,i.getZeroFrameFromGif)(e,r,t).then((({file:e,image:t,imageUrl:r})=>({file:e,image:t,imageUrl:r})))))},s=e=>{let t="";if(e){const r=(e.split(".").pop()||"").toLowerCase();"heic"===r?t="image/heic":"heif"===r&&(t="image/heif")}return t},a=e=>{let t=e.type?.toLowerCase();return!t&&e.name&&(t=s(e.name)),["image/heic","image/heif"].includes(t)}},496498:(e,t,r)=>{var o;r.d(t,{StoryStatsEvent:()=>o}),function(e){e.MarkAdvertiser="mark_advertiser",e.EditAdvertiserMark="edit_advertiser_mark",e.OpenAdvertiser="open_advertiser_information",e.CopyERID="copy_ERID",e.OpenNarrativeStories="narrative_open_stories",e.OpenNarrative="narrative_open",e.NarrativeOther="narrative_other",e.GoToAuthor="go_to_author",e.MusicAdded="music_added",e.PlayNext="play_next",e.ClickToUnlike="click_to_unlike",e.ClickToLike="click_to_like",e.GoToNextAuthor="go_to_next_author",e.GoToPreviousAuthor="go_to_previous_author",e.CloseAutoByTime="close_auto_by_time",e.GoToNextStoryAuto="go_to_next_story_auto_by_time",e.GoToSettings="go_to_settings",e.OpenEmptyFeedback="open_empty_feedback",e.OpenRepliesList="open_replies_list",e.OpenAdvancedStatistic="open_advanced_statistic",e.CommentTap="comment_tap",e.Delete="delete",e.PauseLongTap="pause_long_tap",e.ResumeRelease="resume_release",e.ClickOnClickableSticker="click_on_clickable_sticker",e.CloseSwipeDown="close_swipe_down",e.GoToPreviouseStory="go_to_previous_story",e.GoToNextStoryTap="go_to_next_story_tap",e.LinkClick="link_click",e.CommentSend="comment_send",e.MarkNotInterested="mark_not_interested",e.OpenParentStory="open_parent_story",e.HidePrivacyBlock="hide_privacy_block",e.CloseTap="close_tap",e.ClickOnBadge="click_on_badge",e.OpenViewer="open_viewer",e.QuestionReplyPublish="question_reply_publish",e.QuestionReply="question_reply",e.QuestionReplyAnonymous="question_reply_anonymous",e.QuestionDelete="question_delete",e.QuestionSendMesage="question_send_message",e.QuestionShowAll="question_show_all"}(o||(o={}))},207753:(e,t,r)=>{r.d(t,{DEFAULT_CACHE:()=>l,ORDER_ERRORS:()=>d,ORDER_ITEM_ERRORS:()=>h,SAMPLE_RECIPIENT_ID:()=>c,STICKER_ANIMATION:()=>a,STICKER_IMAGE:()=>s,STICKER_PACK_ICON:()=>i,STICKER_PACK_THUMB:()=>n});var o=r(81277);const i={square_png:{id:"square.png",width:104,height:104},square_15x_png:{id:"square_1.5x.png",width:156,height:156},square_2x_png:{id:"square_2x.png",width:208,height:208},square_3x_png:{id:"square_3x.png",width:312,height:312},square_4x_png:{id:"square_4x.png",width:416,height:416}},n={"102_png":{id:"102.png",width:102,height:102,theme:o.Theme.LIGHT},"51_png":{id:"51.png",width:51,height:51,theme:o.Theme.LIGHT},"68_png":{id:"68.png",width:68,height:68,theme:o.Theme.LIGHT},"34_png":{id:"34.png",width:34,height:34,theme:o.Theme.LIGHT},"60_png":{id:"60.png",width:60,height:60,theme:o.Theme.LIGHT},"30_png":{id:"30.png",width:30,height:30,theme:o.Theme.LIGHT},"102b_png":{id:"102b.png",width:102,height:102,theme:o.Theme.DARK},"51b_png":{id:"51b.png",width:51,height:51,theme:o.Theme.DARK},"68b_png":{id:"68b.png",width:68,height:68,theme:o.Theme.DARK},"34b_png":{id:"34b.png",width:34,height:34,theme:o.Theme.DARK},"60b_png":{id:"60b.png",width:60,height:60,theme:o.Theme.DARK},"30b_png":{id:"30b.png",width:30,height:30,theme:o.Theme.DARK},"44_png":{id:"44.png",width:44,height:44},"22_png":{id:"22.png",width:22,height:22}},s={"64_png":{id:"64.png",width:64,height:64,theme:o.Theme.LIGHT},"128_png":{id:"128.png",width:128,height:128,theme:o.Theme.LIGHT},"256_png":{id:"256.png",width:256,height:256,theme:o.Theme.LIGHT},"352_png":{id:"352.png",width:352,height:352,theme:o.Theme.LIGHT},"512_png":{id:"512.png",width:512,height:512,theme:o.Theme.LIGHT},"64b_png":{id:"64b.png",width:64,height:64,theme:o.Theme.DARK},"128b_png":{id:"128b.png",width:128,height:128,theme:o.Theme.DARK},"256b_png":{id:"256b.png",width:256,height:256,theme:o.Theme.DARK},"352b_png":{id:"352b.png",width:352,height:352,theme:o.Theme.DARK},"512b_png":{id:"512b.png",width:512,height:512,theme:o.Theme.DARK}},a={[o.Theme.LIGHT]:"animation.json",[o.Theme.DARK]:"animation.b.json"},l={products:(0,o.createProductsMap)([]),productIdsQueue:new Set,productsPromise:void 0,productPromises:new Map,stickers:new Map},c=-1;var d,h;!function(e){e.NOT_SIGNED_IN="not_signed_in",e.NO_VALID_ITEMS="no_valid_items"}(d||(d={})),function(e){e.DUPLICATE_PRODUCT="duplicate_product"}(h||(h={}))},81277:(e,t,r)=>{var o;r.d(t,{ProductsByType:()=>u,Theme:()=>o,UserProductStateKey:()=>a,createProductsMap:()=>s,imageSizeCache:()=>n,imageSizesIndex:()=>i,isBasePack:()=>l,isPackProduct:()=>d,isStyleProduct:()=>c}),function(e){e.LIGHT="light",e.DARK="dark",e.DEFAULT="light"}(o||(o={}));const i=Symbol(),n=Symbol(),s=e=>new Map(e);var a;!function(e){e.IsNew="is_new"}(a||(a={}));const l=e=>void 0!==e.sticker_ids,c=e=>void 0!==e.base_id,d=e=>l(e)&&!c(e);var h;!function(e){e.Pack="pack",e.Style="style"}(h||(h={}));class u{add(e){e&&(d(e)?this.pack.add(e):c(e)&&this.style.add(e))}getPack(){return this.pack.values().next().value}getStyles(){return Array.from(this.style.values())}getCount(){return this.pack.size+this.style.size}constructor(e=[]){this.pack=new Set,this.style=new Set,e.forEach((e=>this.add(e)))}}},957081:(e,t,r)=>{r.d(t,{STICKERS_CONFDATA_KEY:()=>o,isNewStickerPicker:()=>n,isPromoVmojiCounterEnabled:()=>a,isUGCStickersEnabled:()=>s});var o,i=r(476726);function n(){return(0,i.partConfigEnabled)("new_sticker_picker")}function s(){return(0,i.partConfigEnabled)("stickers.ugc")}function a(){return(0,i.partConfigEnabled)("vmoji.promo.avatar_suggestion.promo_counter")}!function(e){e.UGC="stickers.ugc",e.PROMO_VMOJI_COUNTER="vmoji.promo.avatar_suggestion.promo_counter",e.NEW_STICKER_PICKER="new_sticker_picker"}(o||(o={}))},755513:(e,t,r)=>{r.d(t,{getStickerAnimationUrl:()=>d,getStickerImageUrl:()=>c,getStickerPackIconUrl:()=>h,isSampleOrderItem:()=>u,logStickersError:()=>p});var o=r(81277),i=r(207753),n=r(87223);const s=(e,t,r,i=o.Theme.DEFAULT)=>{const n=window.devicePixelRatio,s=[t*=n,r*=n,i].toString();let a=e[o.imageSizeCache];if(a&&a.has(s)){const e=a.get(s);if(e)return e}a||(a=new Map,e[o.imageSizeCache]=a);const l=(e=>{let t=e[o.imageSizesIndex];return t||(t=Object.values(e).sort(((e,t)=>e.width-t.width||e.height-t.height)),e[o.imageSizesIndex]=t),t})(e).filter((e=>!e.theme||e.theme===i)),c=l.find((e=>e.width>=t&&e.height>=r))||l[l.length-1];return a.set(s,c),c},a=(e,t,r=o.Theme.DEFAULT)=>s(i.STICKER_IMAGE,e,t,r),l=(e,t)=>e.image.base_url+"/"+t.id+(e.image.version?`?${e.image.version}`:"");function c(e,t,r,i=o.Theme.DEFAULT){if(e.render?.images){const{images:o}=e.render;let n;o.sort(((e,t)=>e.width-t.width||e.height-t.height));for(const e of o)if(e.width>=t&&e.height>=r){if(e.theme===i)return e.url;n=e}if(n)return n.url}return l(e,a(t,r,i))}const d=(e,t=o.Theme.DEFAULT)=>e.animation?e.animation.base_url+"/"+i.STICKER_ANIMATION[t]+(e.animation.version?`?${e.animation.version}`:""):"",h=(e,t,r,n=o.Theme.DEFAULT)=>((e,t)=>e.icon.base_url+"/"+t.id+(e.thumb.version?`?${e.thumb.version}`:""))(e,((e,t,r=o.Theme.DEFAULT)=>s(i.STICKER_PACK_ICON,e,t,r))(t,r,n)),u=e=>e.recipient_id===i.SAMPLE_RECIPIENT_ID,p=e=>{(0,n.logError)(new Error(`Stickers: ${e}`),{environment:"stickers"})}},524258:(e,t,r)=>{r.d(t,{POPUP_STICKER_CLASS:()=>n,POPUP_STICKER_ICON_CLASS:()=>s,POPUP_STICKER_ICON_CLASS_ANIMATED:()=>a,POPUP_STICKER_ICON_CLASS_ROTATED:()=>l,POPUP_STICKER_WRAPPER_CLASS:()=>o,POPUP_STICKER_WRAPPER_CLASS_ANIMATION_IS_PLAYING:()=>i,STICKER_CLASS:()=>c,StickersSettingsApiMethods:()=>d});const o="popupStickerWrapper",i="popupStickerWrapperAnimationIsPlaying",n="popupSticker",s="popupStickerIcon",a="popupStickerIconAnimated",l="popupStickerIconRotated",c="stickerImageWrapper",d={getSettings:"stickers.getSettings",setPopupSettings:"stickers.setPopupSettings"}},675770:(e,t,r)=>{r.d(t,{fetchStickers:()=>l,getPhotoEditorData:()=>d,showStickerShop:()=>c});var o=r(624216),i=r(20025),n=r(850101),s=r(610989),a=r(240069);const l=(e,t)=>{window.ajax.post("al_photos.php",{act:"get_editor_data"},{onDone:e,onFail:t})},c=e=>{a.Emoji.showStickersStore(window.StickerPickerViewer?.optId,void 0,void 0,{onBoxDestroy:e})},d=e=>new Promise(((t,r)=>{o.ajax.post("al_photos.php",{act:"get_editor_data"},{onDone:e=>{t(e)},onFail:()=>((0,i.showFastBox)({title:s.getLang("global_error")},s.getLang("global_error"),s.getLang("global_close"),(()=>{(0,n.curBox)()?.hide(),e?.()})),r(),!0)})}))},825534:(e,t,r)=>{r.d(t,{getPhotoEditorLangMap:()=>i,loadPhotoEditorLangs:()=>n});var o=r(610989);const i=()=>({photos_pe_texts_placeholders:o.getLang("photos_pe_texts_placeholders").split("<br>"),photos_pe_fonts:o.getLang("photos_pe_fonts").split("<br>"),photos_pe_save_action:o.getLang("photos_pe_save_action"),photos_pe_publish_action:o.getLang("photos_pe_publish_action"),global_error:o.getLang("global_error"),stories_create_image_incorrect:o.getLang("stories_create_image_incorrect"),photos_pe_tool_blur:o.getLang("photos_pe_tool_blur"),photos_pe_tool_brush:o.getLang("photos_pe_tool_brush"),photos_pe_tool_collage:o.getLang("photos_pe_tool_collage"),photos_pe_tool_color_correction:o.getLang("photos_pe_tool_color_correction"),photos_pe_tool_crop:o.getLang("photos_pe_tool_crop"),photos_pe_tool_filters:o.getLang("photos_pe_tool_filters"),photos_pe_tool_object_removal:o.getLang("photos_pe_tool_object_removal"),photos_pe_tool_segmentation:o.getLang("photos_pe_tool_segmentation"),photos_pe_tool_stickers:o.getLang("photos_pe_tool_stickers"),photos_pe_tool_text:o.getLang("photos_pe_tool_text"),photos_pe_filters_disabled_text:o.getLang("photos_pe_filters_disabled_text"),photos_pe_filters_disabled_button:o.getLang("photos_pe_filters_disabled_button"),photos_pe_correction_exposure:o.getLang("photos_pe_correction_exposure"),photos_pe_correction_contrast:o.getLang("photos_pe_correction_contrast"),photos_pe_correction_saturation:o.getLang("photos_pe_correction_saturation"),photos_pe_correction_warmth:o.getLang("photos_pe_correction_warmth"),photos_pe_correction_vignette:o.getLang("photos_pe_correction_vignette"),photos_pe_correction_sharpness:o.getLang("photos_pe_correction_sharpness"),photos_pe_correction_grain:o.getLang("photos_pe_correction_grain"),photos_pe_correction_auto:o.getLang("photos_pe_correction_auto"),photos_pe_correction_auto_enabled:o.getLang("photos_pe_correction_auto_enabled"),photos_pe_correction_auto_enabled_short:o.getLang("photos_pe_correction_auto_enabled_short"),photos_pe_cancel:o.getLang("photos_pe_cancel"),photos_pe_correction_blur_type_round:o.getLang("photos_pe_correction_blur_type_round"),photos_pe_correction_blur_type_rec:o.getLang("photos_pe_correction_blur_type_rec"),photos_pe_correction_blur_radius:o.getLang("photos_pe_correction_blur_radius"),photos_pe_correction_blur:o.getLang("photos_pe_correction_blur"),photos_pe_correction_blur_enabled:o.getLang("photos_pe_correction_blur_enabled"),photos_pe_crop_cancel:o.getLang("photos_pe_crop_cancel"),photos_pe_crop_apply:o.getLang("photos_pe_crop_apply"),photos_pe_crop_aspect_title:o.getLang("photos_pe_crop_aspect_title"),photos_pe_crop_aspect_free:o.getLang("photos_pe_crop_aspect_free"),photos_pe_crop_aspect_original:o.getLang("photos_pe_crop_aspect_original"),photos_pe_crop_aspect_16_9:o.getLang("photos_pe_crop_aspect_16_9"),photos_pe_crop_aspect_4_3:o.getLang("photos_pe_crop_aspect_4_3"),photos_pe_crop_aspect_1_1:o.getLang("photos_pe_crop_aspect_1_1"),photos_pe_crop_aspect_3_4:o.getLang("photos_pe_crop_aspect_3_4"),photos_pe_crop_aspect_9_16:o.getLang("photos_pe_crop_aspect_9_16"),photos_pe_rotate_right:o.getLang("photos_pe_rotate_right"),photos_pe_rotate_left:o.getLang("photos_pe_rotate_left"),photos_pe_flip_horizontal:o.getLang("photos_pe_flip_horizontal"),photos_pe_flip_vertical:o.getLang("photos_pe_flip_vertical"),photos_pe_intensity:o.getLang("photos_pe_intensity"),photos_pe_line_width:o.getLang("photos_pe_line_width"),photos_pe_color:o.getLang("photos_pe_color"),photos_pe_attached_post:o.getLang("photos_pe_attached_post"),photos_pe_filter_regular:o.getLang("photos_pe_filter_regular"),photos_pe_filter_nox:o.getLang("photos_pe_filter_nox"),photos_pe_filter_vesper:o.getLang("photos_pe_filter_vesper"),photos_pe_filter_latona:o.getLang("photos_pe_filter_latona"),photos_pe_filter_liber:o.getLang("photos_pe_filter_liber"),photos_pe_filter_luna:o.getLang("photos_pe_filter_luna"),photos_pe_filter_minerva:o.getLang("photos_pe_filter_minerva"),photos_pe_filter_mitra:o.getLang("photos_pe_filter_mitra"),photos_pe_filter_pro:o.getLang("photos_pe_filter_pro"),photos_pe_filter_terra:o.getLang("photos_pe_filter_terra"),photos_pe_filter_veles:o.getLang("photos_pe_filter_veles"),photos_pe_filter_vesta:o.getLang("photos_pe_filter_vesta"),photos_pe_filter_zaria:o.getLang("photos_pe_filter_zaria"),photos_pe_filter_sepia:o.getLang("photos_pe_filter_sepia"),photos_pe_filter_genius:o.getLang("photos_pe_filter_genius"),photos_pe_filter_horus:o.getLang("photos_pe_filter_horus"),photos_pe_filter_fortuna:o.getLang("photos_pe_filter_fortuna"),photos_pe_filter_disabled:o.getLang("photos_pe_filter_disabled"),photos_pe_filter_enabled:o.getLang("photos_pe_filter_enabled"),photos_pe_delete_sticker:o.getLang("photos_pe_delete_sticker"),photos_pe_delete_text:o.getLang("photos_pe_delete_text"),photos_pe_save_text:o.getLang("photos_pe_save_text"),photos_filtered_restore:o.getLang("photos_filtered_restore"),photos_will_be_saved_to_pe_album:o.getLang("photos_will_be_saved_to_pe_album"),photos_pe_change_photo:o.getLang("photos_pe_change_photo"),photos_pe_add_text:o.getLang("photos_pe_add_text"),photos_pe_font:o.getLang("photos_pe_font"),photos_pe_font_size:o.getLang("photos_pe_font_size"),photos_pe_cancel_action:o.getLang("photos_pe_cancel_action"),photos_pe_restore_original:o.getLang("photos_pe_restore_original"),photos_pe_change_text:o.getLang("photos_pe_change_text"),photos_pe_apply_changes:o.getLang("photos_pe_apply_changes"),photos_pe_deny_changes:o.getLang("photos_pe_deny_changes"),photos_pe_publish_photo:o.getLang("photos_pe_publish_photo"),photos_pe_upscale:o.getLang("photos_pe_upscale"),photos_pe_upscale_short:o.getLang("photos_pe_upscale_short"),photos_pe_crop_reset:o.getLang("photos_pe_crop_reset"),photos_pe_sticker_template:o.getLang("photos_pe_sticker_template")}),n=()=>new Promise(((e,t)=>{window.ajax.post("al_photos.php",{act:"get_editor_langs"},{onDone:e,onFail:()=>(t(),!0)})}))},580129:(e,t,r)=>{r.d(t,{EVENTS:()=>c,prepareStat:()=>f,sendStat:()=>m});var o=r(77294),i=r(618913),n=r(476726),s=r(496498),a=r(906110),l=r(465094);const c={FLIP_X:"flipX",FLIP_Y:"flipY",ADD_FILTER:"add_filter",REMOVE_FILTER:"remove_filter",UNDO:"undo",REDO:"redo",ENABLE_AUTOCORRECTION:"enable_autocorrection",DISABLE_AUTOCORRECTION:"disable_autocorrection",ENABLE_BLUR:"enable_blur",DISABLE_BLUR:"disable_blur",ZOOM:"zoom",UNZOOM:"unzoom",TURN_LEFT:"turn_left",TURN_RIGHT:"turn_right",ADD_STORY:"add_story",ADD_STORY_FROM_SHARING:"add_story_from_sharing",CLICK_TO_CAMERA_ICON:"click_to_camera_icon",CLICK_TO_GRADIENT_ICON:"click_to_gradient_icon",ADD_TEXT:"add_text",EDIT_TEXT:"edit_text",DELETE_TEXT:"delete_text",ADD_STICKER:"add_sticker",DELETE_STICKER:"delete_sticker",ADD_GRAFFITI:"add_graffiti",SELECT_BACKGROUND:"select_background",MARK_ADVERTISER:s.StoryStatsEvent.MarkAdvertiser,EDIT_ADVERTISER_MARK:s.StoryStatsEvent.EditAdvertiserMark},d=[c.ADD_STORY,c.ADD_STORY_FROM_SHARING,c.CLICK_TO_CAMERA_ICON,c.CLICK_TO_GRADIENT_ICON,c.ADD_TEXT,c.EDIT_TEXT,c.DELETE_TEXT,c.ADD_STICKER,c.DELETE_STICKER,c.ADD_GRAFFITI,c.SELECT_BACKGROUND,c.MARK_ADVERTISER,c.EDIT_ADVERTISER_MARK],h=e=>e.map((e=>{if(e.type===a.LAYER_TYPES.TEXT){const t=e;return{text:t.text,font:t.fontStyle,size:Math.round(t.fontSize*a.FONT_SIZE_COEFFICIENT),color:t.color.slice(1),background:"none",align:"center"}}})).filter((e=>!!e)),u=e=>e.map((e=>{if(e.type===a.LAYER_TYPES.STICKER){const t=e,[r,o]=t.id.split("_"),i=parseInt(r)?parseInt(r):0;return{id:parseInt(o),pack_id:i,type:i?"from_pack":"individual"}}})).filter((e=>!!e)),p=e=>e.map((e=>({brush:e.opacity,size:e.width,color:e.color.slice(1)}))),g=e=>["exposure","contrast","saturation","warmth","vignette","sharpness","grain"].map((t=>{if(0!==e[t])return{type:t,value:100*e[t]}})).filter((e=>e)),_=e=>({[-1]:0,0:1,[16/9]:2,[4/3]:3,1:4,[3/4]:5,[9/16]:6}[e]);function m(e,t){const r=window.cur.photoEditorStore?.getState();if(!r)return;let s=0,a=0;if(window.cur.pvCurPhoto){const[e,t]=window.cur.pvCurPhoto.id.split("_");s=parseInt(e),a=parseInt(t)}const c={event_type:e,media_type:window.cur.storyPublishContext?"story":"photo",media_owner_id:s,media_id:a};if(window.cur.photoEditorEntryPoint&&(c.creation_entry_point=`${l.navigationStat.getModule()}_${window.cur.photoEditorEntryPoint}`),["change_crop_mode","save_crop","save"].includes(e)){const e=r.present?.settings;e&&e.cropAspect&&(c.ratio=_(e.cropAspect))}if(["save_crop","save"].includes(e)){const e=r.present?.settings,t=r.present?.data;if(e&&t&&e.containerWidth&&e.containerHeight){const r=t.originalHeight/t.artboardHeight,o=e.containerWidth*r,i=e.containerHeight*r;c.width=o,c.height=i,c.is_cropped=1}}if(["save_stickers","save"].includes(e)){const e=r.present?.layers?.items;if(e){const t=u(e);t.length>0&&(c.stickers=t),c.has_sticker=t.length>0?1:0}}if(["save_text","save"].includes(e)){const e=r.present?.layers?.items;if(e){const t=h(e);t.length>0&&(c.texts=t),c.has_text=t.length>0?1:0}}if(["save_filters","add_filter","change_filter_value","save"].includes(e)){const e=r.present?.settings?.filter;e&&"regular"!==e.name&&(c.filter=e.name,c.filter_value=100*e.value)}if(["save_brush","save"].includes(e)){const e=r.present?.drawings;e&&(c.graffities=p(e),c.has_graffity=c.graffities.length>0?1:0)}if("click_to_camera_icon"===e&&t?.img&&(c.media_aspect_ratio=`${t?.img.width}_${t?.img.height}`),"save"===e){const e=r.present?.settings;if(e){const t=e.colorCorrection,r=g(t);r.length&&(c.photo_correction=r),e.blur.isEnabled&&(c.blur_type=e.blur.form,c.blur_value=e.blur.size),e.segmentation?.delete&&(c.is_segmented=1),e.enhance?.active&&e.enhance?.url&&(c.is_upgraded=1),c.is_autocorrected=e.isAutoCorrection,c.rotation=e.rotation}const t=r.present?.layers;if(t){const e=t.defaultScale;1!==e&&(c.is_zoomed=1,c.zoom_value=Math.round(100*e))}}window.cur.storyPublishContext&&(0,n.partConfigEnabled)("story_publish_analytics_log")&&(0,i.debugLog)(c),window.cur.storyPublishContext?d.includes(e)&&(0,o.statlogsValueEvent)("story_create_product_analytics",{...c,story_type:"photo"}):(0,o.statlogsValueEvent)("media_editor_product_analytics",c)}function f(e,t,r,o){let i=0,n="photo";r===a.BACKGROUND_MODES.BACKGROUND&&(i=o||0,n=i>=300?"colors":i>=200?"advice_gradients":i>=100?"emojies":"gradients");const s={has_text:0,has_sticker:0,has_graffiti:0,background_type:n,background_id:i},l=u(e),c=h(e),d=p(t);return c.length&&(s.has_text=1,s.texts=c),l.length&&(s.has_sticker=1,s.stickers=l),d.length&&(s.has_graffiti=1,s.graffities=d),s}},391565:(e,t,r)=>{r.d(t,{POPUP_STICKER_HINT_ICON_CLASS:()=>i,POPUP_STICKER_ICON:()=>o,POPUP_TQ_CLICK_RUN_ANIMATION:()=>n,TQ_DATA_MESSAGE_ID:()=>a,TQ_DATA_OBJECT_LAYERS_KEY:()=>s,TQ_DATA_Z_INDEX_MOUNT_NODE:()=>l});const o=(0,r(556373).getIcon12Play)().icon,i="popupStickerHinticon",n="Stickers/run_popup_animation_on_click",s="stickerLayers",a="stickerMessageId",l="zIndexMountNode"},716631:(e,t,r)=>{r.d(t,{initNewStickerPicker:()=>l,isStickerPickerOpen:()=>s.isStickerPickerOpen,setUserEnvForStickerPicker:()=>c});var o=r(243939),i=r(957081),n=r(805088),s=r(6870);let a=0;const l=async()=>{if(a++,!(a>3))try{const{StickerPickerViewer:e}=await Promise.all([r.e(91498),r.e(89631),r.e(762),r.e(21529),r.e(99364),r.e(23045),r.e(69706),r.e(71247),r.e(98875),r.e(43802),r.e(59956),r.e(60648),r.e(36502)]).then(r.bind(r,432340));window.StickerPickerViewer=new e}catch{setTimeout((()=>{l()}),3e3)}},c=()=>{(0,o.setUserEnv)({[i.STICKERS_CONFDATA_KEY.UGC]:(0,i.isUGCStickersEnabled)(),[i.STICKERS_CONFDATA_KEY.PROMO_VMOJI_COUNTER]:(0,i.isPromoVmojiCounterEnabled)(),"stickers.popup":(0,n.isPopUpStickersEnabled)()})}},768932:(e,t,r)=>{r.d(t,{IS_OPEN_BODY_SELECTOR:()=>o});const o="StickerPickerIsOpen"},6870:(e,t,r)=>{r.d(t,{isStickerPickerOpen:()=>i});var o=r(768932);const i=()=>window.document.body.classList.contains(o.IS_OPEN_BODY_SELECTOR)},815019:(e,t,r)=>{r.d(t,{checkStopActionOnEventOnSticker:()=>u,checkStopActionOnEventOnStickerPopupIcon:()=>h,previewSticker:()=>a,showPackByClickOnSticker:()=>l,wrapSticker:()=>d});var o,i=r(427360),n=r(957081),s=r(524258);!function(e){e.MESSAGE="message"}(o||(o={}));const a=(e,t)=>window.Emoji.previewSticker(e,!1,{sticker_referrer:"message",randomPackAttemptId:t}),l=(e,t)=>{(0,n.isNewStickerPicker)()?window.StickerPickerViewer?.api.getPack({productId:e}).then((r=>{Boolean(r?.product?.active)?window.StickerPickerViewer?.showPack(e,t):a(e)})).catch((()=>{a(e)})):window.Emoji.getStickerPack(e).then((r=>{Boolean(r&&r[window.Emoji.PACK_FIELD_IS_ACTIVE])?window.Emoji.showPackInKeyboard(e,t):a(e)}))},c=e=>`stickerSize${e}`,d=({stickerHtml:e,stickerWrapperClass:t="",icon:r,iconClass:o,size:n,iconTqAttrs:s})=>{const a=r?`<div class="${i.STICKER_ICON_CLASS} ${o}" ${s}>${r}</div>`:"";return`\n  <div class="${[i.STICKER_ROW_CLASS,t,c(n)].join(" ")}">\n    ${e}\n    ${a}\n  </div>\n`},h=e=>{const t=e?.target;return!!t?.closest("."+s.POPUP_STICKER_ICON_CLASS)},u=e=>{const t=e?.target;return!!t?.closest("."+i.STICKER_ROW_CLASS)||(!!t?.closest("."+s.POPUP_STICKER_WRAPPER_CLASS)||!!h(e))}},427360:(e,t,r)=>{var o;r.d(t,{REGULAR_SIZES:()=>n,SIZE_512:()=>i,STICKER_ICON_CLASS:()=>a,STICKER_ROW_CLASS:()=>s,StickerSize:()=>o}),function(e){e[e.SMALL=128]="SMALL",e[e.MIDDLE=168]="MIDDLE",e[e.BIG=208]="BIG"}(o||(o={}));const i=512,n=[64,128,256,352,i],s="stickerRow",a="stickerIcon"},550072:(e,t,r)=>{r.d(t,{findClosestStickerSize:()=>S,getBoxLayerWrap:()=>u,getLangCode:()=>f,getPurchaseResult:()=>_,hideLoader:()=>g,showLoader:()=>p,updateStickersFromQueue:()=>m});var o=r(645024),i=r(610989),n=r(216147),s=r(452314),a=r(850101),l=r(81277),c=r(427360),d=r(755513);function h(){return document.querySelector("#box_loader")}function u(){return document.querySelector("#box_layer_wrap")}function p(){const e=h();(0,a.refreshBoxLoaderCoords)(),(0,s.show)(e),(0,s.show)(u())}function g(){(0,s.hide)(h())}function _(e){const t=new l.ProductsByType(e.items.filter((e=>!e.error)).map((e=>e.product))),r=t.getPack(),n=t.getStyles();if(r)return n.length?(0,o.langStr)(i.getLang("purchases_stickers_purchase_result_pack_and_styles",n.length),"pack_title",r.title,"n",n.length):(0,o.langStr)(i.getLang("purchases_stickers_purchase_result_pack"),"title",r.title);if(n.length)switch(n.length){case 1:return(0,o.langStr)(i.getLang("purchases_stickers_purchase_result_1_style"),"title",n[0].title);case 2:return(0,o.langStr)(i.getLang("purchases_stickers_purchase_result_2_styles"),"title1",n[0].title,"title2",n[1].title);case 3:return(0,o.langStr)(i.getLang("purchases_stickers_purchase_result_3_styles"),"title1",n[0].title,"title2",n[1].title,"title3",n[2].title);case 4:return(0,o.langStr)(i.getLang("purchases_stickers_purchase_result_3_styles_and_1_more"),"title1",n[0].title,"title2",n[1].title,"title3",n[2].title);default:const e=n.length-3;return(0,o.langStr)(i.getLang("purchases_stickers_purchase_result_3_styles_and_n_more",e),"title1",n[0].title,"title2",n[1].title,"title3",n[2].title,"n",e)}return null}function m(e){!function(e){const t=n.colorScheme.isDarkScheme()?"data-src-dark":"data-src-light";e.querySelectorAll(`.sticker_img[${t}]`).forEach((e=>{const r=e.getAttribute(t);r&&(e.src=r)}))}(e)}const f=()=>window.vk.lang||"ru",S=e=>e>c.SIZE_512?((0,d.logStickersError)("Нет размера стикера больше 512px"),c.SIZE_512):c.REGULAR_SIZES.find((t=>t>=e))},735778:(e,t,r)=>{r.d(t,{default:()=>n});var o,i=r(826129);e=r.hmd(e),o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r.g?r.g:e;const n=(0,i.default)(o)},826129:(e,t,r)=>{function o(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}r.d(t,{default:()=>o})},677154:(e,t,r)=>{var o=r(296540);var i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=o.useSyncExternalStore,s=o.useRef,a=o.useEffect,l=o.useMemo,c=o.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,o,d){var h=s(null);if(null===h.current){var u={hasValue:!1,value:null};h.current=u}else u=h.current;h=l((function(){function e(e){if(!a){if(a=!0,n=e,e=o(e),void 0!==d&&u.hasValue){var t=u.value;if(d(t,e))return s=t}return s=e}if(t=s,i(n,e))return t;var r=o(e);return void 0!==d&&d(t,r)?t:(n=e,s=r)}var n,s,a=!1,l=void 0===r?null:r;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]}),[t,r,o,d]);var p=n(e,h[0],h[1]);return a((function(){u.hasValue=!0,u.value=p}),[p]),c(p),p}},178418:(e,t,r)=>{e.exports=r(677154)},67443:(e,t,r)=>{e.exports=r.p+"images/894a4bad6f3936dd9445.png"},174059:(e,t,r)=>{e.exports=r.p+"images/d76c3df1076f7efabc7d.png"},403072:(e,t,r)=>{e.exports=r.p+"images/e95e343f81803403d5d3.png"},220964:(e,t,r)=>{e.exports=r.p+"images/f873a6bb7bb460dfb539.png"},115508:(e,t,r)=>{e.exports=r.p+"images/8ff21c6e9f0a2788db49.png"},857108:(e,t,r)=>{e.exports=r.p+"images/842e80feda60b4718b10.png"},434944:(e,t,r)=>{e.exports=r.p+"images/352bb0d293c648a40028.png"},711694:(e,t,r)=>{e.exports=r.p+"images/abf5e076ba1b7cd28c89.png"},190623:(e,t,r)=>{e.exports=r.p+"images/e653d1e4f9de15944019.png"},179445:(e,t,r)=>{e.exports=r.p+"images/fc49bc4f2595c3f75d43.png"},854037:(e,t,r)=>{e.exports=r.p+"images/f564d813eeba2ab2a257.png"},497098:(e,t,r)=>{e.exports=r.p+"images/b0a46866fade1ae1a0c6.png"},995788:(e,t,r)=>{e.exports=r.p+"images/7d0e0fa74fbfe517a63c.png"},536322:(e,t,r)=>{e.exports=r.p+"images/0206c1608a7a28e29ab1.png"},43991:(e,t,r)=>{e.exports=r.p+"images/0e0e54c3291044088ce8.png"},433157:(e,t,r)=>{e.exports=r.p+"images/67d056c2554b7d1ceb6a.png"},520065:(e,t,r)=>{e.exports=r.p+"images/fc79828aadf10edcc85d.png"},463130:(e,t,r)=>{e.exports=r.p+"images/73005d8850c204a4ecd7.png"},341832:(e,t,r)=>{e.exports=r.p+"images/499fb00242bf9fa034ac.png"},812376:(e,t,r)=>{e.exports=r.p+"images/6152209fae492be8fc19.png"},851994:(e,t,r)=>{e.exports=r.p+"images/5548832dd35bb85bc6b5.png"},352014:(e,t,r)=>{e.exports=r.p+"images/c54637bd9fd6fcabbd1e.png"},881990:(e,t,r)=>{e.exports=r.p+"images/f593f66eddb36ba672e2.png"}}]);try{stManager.done("dist/web/chunks/bfb56a2c.b798efd8.js")}catch(e){}