"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[16424],{426622:(_,e,t)=>{t.d(e,{IconIllustrationSoundWaveLeft36h:()=>o});var o=(0,t(844990).makeIcon)("IconIllustrationSoundWaveLeft36h","illustration_sound_wave_left_36h","0 0 72 36",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 72 36" id="illustration_sound_wave_left_36h"><path d="M59.693 5.25a1.25 1.25 0 0 0-2.5 0v25.788a1.25 1.25 0 1 0 2.5 0zm-8.595 6.446a1.25 1.25 0 0 0-2.5 0V24.59a1.25 1.25 0 0 0 2.5 0zm15.942-1.25c.69 0 1.25.56 1.25 1.25V24.59a1.25 1.25 0 0 1-2.5 0V11.696c0-.69.56-1.25 1.25-1.25M42.5 14.275a1.25 1.25 0 0 0-2.5 0v7.737a1.25 1.25 0 0 0 2.5 0zM23.693 5.25a1.25 1.25 0 0 0-2.5 0v25.788a1.25 1.25 0 1 0 2.5 0zm-8.595 6.446a1.25 1.25 0 0 0-2.5 0V24.59a1.25 1.25 0 0 0 2.5 0zm15.942-1.25c.69 0 1.25.56 1.25 1.25V24.59a1.25 1.25 0 0 1-2.5 0V11.696c0-.69.56-1.25 1.25-1.25M6.5 14.275a1.25 1.25 0 0 0-2.5 0v7.737a1.25 1.25 0 0 0 2.5 0z" /></symbol>',72,36,!1,void 0)},155581:(_,e,t)=>{t.d(e,{IconIllustrationSoundWaveRight36h:()=>o});var o=(0,t(844990).makeIcon)("IconIllustrationSoundWaveRight36h","illustration_sound_wave_right_36h","0 0 72 36",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 72 36" id="illustration_sound_wave_right_36h"><path d="M12.307 5.25a1.25 1.25 0 0 1 2.5 0v25.788a1.25 1.25 0 1 1-2.5 0zm8.595 6.446a1.25 1.25 0 0 1 2.5 0V24.59a1.25 1.25 0 0 1-2.5 0zM4.96 10.446c-.69 0-1.25.56-1.25 1.25V24.59a1.25 1.25 0 0 0 2.5 0V11.696c0-.69-.56-1.25-1.25-1.25m24.54 3.829a1.25 1.25 0 0 1 2.5 0v7.737a1.25 1.25 0 0 1-2.5 0zM48.307 5.25a1.25 1.25 0 0 1 2.5 0v25.788a1.25 1.25 0 1 1-2.5 0zm8.595 6.446a1.25 1.25 0 0 1 2.5 0V24.59a1.25 1.25 0 0 1-2.5 0zm-15.942-1.25c-.69 0-1.25.56-1.25 1.25V24.59a1.25 1.25 0 0 0 2.5 0V11.696c0-.69-.56-1.25-1.25-1.25m24.54 3.829a1.25 1.25 0 0 1 2.5 0v7.737a1.25 1.25 0 0 1-2.5 0z" /></symbol>',72,36,!1,void 0)},963328:(_,e,t)=>{t.d(e,{Icon24Headphones:()=>o});var o=(0,t(844990).makeIcon)("Icon24Headphones","headphones_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="headphones_24"><path d="M12 2.25a9 9 0 0 0-9 9V18a3 3 0 0 0 3 3h1.5A1.5 1.5 0 0 0 9 19.5v-5A1.5 1.5 0 0 0 7.5 13H5v-1.75c0-3.87 3.13-7 7-7s7 3.13 7 7V13h-2.5a1.5 1.5 0 0 0-1.5 1.5v5a1.5 1.5 0 0 0 1.5 1.5H18a3 3 0 0 0 3-3v-6.75a9 9 0 0 0-9-9" /></symbol>',24,24,!1,void 0)},573638:(_,e,t)=>{t.d(e,{Icon24Refresh:()=>o});var o=(0,t(844990).makeIcon)("Icon24Refresh","refresh_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="refresh_24"><path d="M12 9.096a.4.4 0 0 0 .67.296l4.287-3.899a.667.667 0 0 0 0-.987L12.67.609a.4.4 0 0 0-.67.295V4a8 8 0 1 0 8 8 1 1 0 1 0-2 0 6 6 0 1 1-6-6z" /></symbol>',24,24,!1,void 0)},205726:(_,e,t)=>{t.d(e,{Icon40PlayCircle:()=>o});var o=(0,t(844990).makeIcon)("Icon40PlayCircle","play_circle_40","0 0 40 40",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 40 40" id="play_circle_40"><path fill-rule="evenodd" d="M40 20c0 11.046-8.954 20-20 20S0 31.046 0 20 8.954 0 20 0s20 8.954 20 20m-14.329 1.077a1.25 1.25 0 0 0 0-2.154l-8.787-5.175A1.25 1.25 0 0 0 15 14.826v10.348a1.25 1.25 0 0 0 1.884 1.078z" clip-rule="evenodd" /></symbol>',40,40,!1,void 0)},194620:(_,e,t)=>{t.d(e,{default:()=>o});const o={background:"InfoBanner-module__background--OpAlW"}},172469:(_,e,t)=>{t.d(e,{default:()=>o});const o={wrapper:"LottiePlayer-module__wrapper--WKJe6",wrapperClickable:"LottiePlayer-module__wrapperClickable--xT2Sp"}},372434:(_,e,t)=>{t.d(e,{default:()=>o});const o={wrapper:"BackgroundLayer-module__wrapper--PKORq"}},558850:(_,e,t)=>{t.d(e,{default:()=>o});const o={wrapper:"GradientLayer-module__wrapper--uNLXZ"}},368730:(_,e,t)=>{t.d(e,{default:()=>o});const o={wrapper:"PlayBackArea-module__wrapper--SITxd",area:"PlayBackArea-module__area--oyypB"}},692841:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{WkView:()=>WkView});var _shared_lib_convert__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(387674),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(714209),_web_lib_revertLastInlineVideo__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(333976),_web_lib_market__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(174628),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(610989),_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(490712),_web_lib_input_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(691004),_icons_desktop__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(787576),_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(327527),_web_lib_feature_entries_showWiki__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(900007),_web_lib_date__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(307188),_web_lib_scroll__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(688701),_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(850101),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(879007),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(317412),_shared_lib_site__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(705744),_web_lib_ajax_cache__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(818939),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(618913),_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(452314),_web_lib_ui__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(248298),_web_lib_message_box__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(20025),_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(810903),_web_lib_accessibility__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(967886),_shared_lib_common__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(7144),_web_lib_fx__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(663878),_web_reports_reports__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(678041),_web_wall_reply_update_view__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(37645),_web_lib_element_tooltip__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(96526),_web_wkview_wkview_helpers__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(193933),_web_wkview_wkview_queue__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(51963),_shared_user_user_env__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(476726),_shared_stickers_refactor_utils_popup_destroy__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(745910),_shared_accessibility_accessibility__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(203240);const WKCONT_TOP=14,WkView={init:function(){window.wkLayer||(window.wkLayer=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ce)("div",{id:"wk_layer"}),window.wkLayer.setAttribute("role","dialog"),window.wkLayer.setAttribute("tabindex","-1"),window.wkLayer.setAttribute("aria-modal","true"),window.wkLayerWrap=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ce)("div",{id:"wk_layer_wrap",className:"scroll_fix_wrap fixed layer_wrap js-mediator-container"}),wkLayerWrap.setAttribute("data-search-top-target",!0),wkLayerWrap.appendChild(window.wkLayer),document.body.appendChild(wkLayerWrap),window.wkLayer.style.width=lastWindowWidth-(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_17__.sbWidth)()-2+"px")},showLayer:function(){layerQueue.hide(!0,!0,null,!0),layers.wrapshow(wkLayerWrap,.8),layers.fullhide=WkView.hide,WkView.onScroll(),wkcur.showT=setTimeout((function(){layers.wrapshow(wkLayerWrap,.8),layers.fullhide=WkView.hide}),0),onBodyResize()},restoreLayer:function(_){WkView.showLayer(),wkcur.root?_.myLoc&&nav.setLoc(_.myLoc):WkView.setLocation(),_.prevLoc&&(wkcur.prevLoc=_.prevLoc),WkView.updateSize()},wikiClick:function(_,e,t){if((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.checkEvent)(e))return!0;t=t||{};let o=e.target;for(;o&&"A"!==o.tagName;)o=o.parentNode;if(o&&"A"===o.tagName){let _,i,r=o.href,a=r.match(/^\/(page[^?]*)(\?.*)?$/);if(a)_=a[1],i=a[4]?(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_0__.fromQueryString)(a[4].substr(1)):{};else{const e=String.raw`https?:\/\/([a-zA-Z0-9\-_\.]+\.)?(?:${_shared_lib_site__WEBPACK_IMPORTED_MODULE_13__.VK_HOST_REGEX_GROUP_UNSAFE.source})\/([^?]*)(\?.*)?$`;if(a=r.match(new RegExp(e,"i")),!a||!a[3])return!0;_=a[3].split("/"),i=a[4]?(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_0__.fromQueryString)(a[4].substr(1)):{}}let n={};switch(_[0]){case"pages":n.oid=i.oid||i.o,n.id=i.id,n.p=i.p;break;case"ru":case"en":n.p=_[1],n.global=_[0];break;default:_[0].match(/^page-?\d+_\d+$/)?(i=_[0].substr(4).split("_"),n.oid=i[0],n.id=i[1],n=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.extend)(t,n)):_[0].match(/^note\d+_\d+$/)&&(i=_[0].substr(4).split("_"),n.w=_[0])}if(n.w||n.oid&&(n.id||n.p))return(0,_web_lib_feature_entries_showWiki__WEBPACK_IMPORTED_MODULE_7__.showWiki)(n),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.cancelEvent)(e)}},edit:function(){if(!wkcur.canEdit)return!0;let params;if("wall"===wkcur.type)return wkcur.edit?Wall.cancelEdit():Wall.editPost((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wpe_edit"+wkcur.post),wkcur.post,{from:"wkview"}),!0;let hash=wkcur.editHash||"";if(wkcur.edit)return params=wkcur.note?{w:"note"+wkcur.oid+"_"+wkcur.nid}:{oid:wkcur.oid,id:wkcur.pid,p:wkcur.p},window.wkcur=!1,(0,_web_lib_feature_entries_showWiki__WEBPACK_IMPORTED_MODULE_7__.showWiki)(params,!1,!1,{noloader:!0}),!0;wkcur.edit=!0,params={act:"edit",oid:wkcur.oid,load:1,section:"edit",hash},wkcur.note?(params.nid=wkcur.nid,params.note=1):params.id=wkcur.pid,wkcur.from&&(params.from=wkcur.from),ajax.post("wkview.php",params,{stat:[window.jsc("web/pages.js"),window.jsc("web/wk_editor.js"),"wk_editor.css"],onDone:function(content,js,info,options){wkcur.wkContent.innerHTML=content,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hide)(wkcur.wkRight),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.addClass)(wkcur.wkBox,"wk_view_no_background");try{eval(js)}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_15__.logEvalError)(_,js)}(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.addEvent)(wkLayerWrap,"scroll",WkView.onScroll),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.addEvent)(window,"resize",WkView.onResize),WkView.onScroll(),WkView.updateSize()}})},onScroll:function(_,e){switch(wkcur.lSTL&&WkView.stlOnScroll(e),e||WkView.updateSize(!0),wkcur.type){case"wall":return WkView.wallUpdateRepliesOnScroll(e);case"likes":return WkView.likesOnScroll(e);case"history":return WkView.historyOnScroll(e);case"market":if(window.Market)return Market.updateCommentsOnScroll(e);break;case"story":window.Stories&&Stories.onResize()}if((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_21__.isFunction)(WkView.customOnScroll)&&WkView.customOnScroll(e))return;let t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wke_buttons_panel"),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wke_buttons_cont");if(!t)return;let i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.getXY)(o,!0)[1];wkcur.bottomSize||(wkcur.bottomSize=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.getSize)(t));let r=wkcur.bottomSize[1],a=window.innerHeight||document.documentElement.clientHeight;if(e&&!wkcur.fixedBottom&&a-r<i+20)wkLayerWrap.scrollTop+=i+20-(a-r);else if(a-r<i){if(!wkcur.fixedBottom||e){wkcur.fixedBottom=!0;let _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.getSize)(o);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.addClass)(wkcur.wkContent,"wke_bottom_fixed"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.setStyle)(t,{width:_[0],height:_[1]}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.setStyle)(o,{paddingTop:_[1]})}}else(wkcur.fixedBottom||e)&&(wkcur.fixedBottom=!1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.removeClass)(wkcur.wkContent,"wke_bottom_fixed"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.setStyle)(t,{width:null,height:null}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.setStyle)(o,{paddingTop:0}));let n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wke_controls"),l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wke_controls_cont");if(l){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.getXY)(l,!0)[1]<0){if(!wkcur.fixedTop){wkcur.fixedTop=!0;let _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.getSize)(l);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.addClass)(wkcur.wkContent,"wke_top_fixed"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.setStyle)(n,{width:_[0],height:_[1]}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.setStyle)(l,{paddingTop:_[1]})}}else wkcur.fixedTop&&(wkcur.fixedTop=!1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.removeClass)(wkcur.wkContent,"wke_top_fixed"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.setStyle)(n,{width:null,height:null}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.setStyle)(l,{paddingTop:0}))}},saveInfo:function(autosave){let params={page:wkcur.p,hash:wkcur.hash,pageEditHash:wkcur.editHash};return params.Body=wkcur.editor.val(),!1!==params.Body&&(params=wkcur.note?(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.extend)(params,{act:"save",oid:wkcur.oid,nid:wkcur.nid,wysiwyg:1,note:wkcur.note}):(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.extend)(params,{act:"save",oid:wkcur.oid,id:wkcur.pid}),wkcur.pageTitle&&(params.title=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.val)(wkcur.pageTitle)),"page_new"===wkcur.type&&(params.page_new=1),wkcur.from&&(params.from=wkcur.from),(!autosave||!(wkcur.lockAutoSave||wkcur.note&&(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_10__.curBox)()))&&(wkcur.lockAutoSave=!0,void ajax.post(wkcur.note?"wkview.php":"al_pages.php",params,{onDone:function(text,data){let saveEl;if(wkcur.lockAutoSave=!1,wkcur.editor.changed=!1,autosave||(saveEl=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("pages_save_info_wysiwyg"),saveEl&&(saveEl.innerHTML=text,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.show)(saveEl))),"market"===wkcur.from&&data){null!==data.html&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("group_edit_market_wiki").innerHTML=data.html);try{eval(data.js)}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_15__.logEvalError)(_,data.js)}}else if(data){if(data.nid&&(wkcur.nid=data.nid),data.raw&&(wkcur.wkRaw=data.raw),data.created&&cur.chooseMedia)return nav.setLoc((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.extend)(nav.objLoc,{w:"note"+data.raw})),autosave||WkView.hide(!1,!0),cur.pbNoteAdded=data,cur.chooseMedia("note",data.raw,data),!0;{let _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("share_note_title"+data.raw);if(_&&!autosave&&(_.innerHTML=data.title),wkcur.note&&wkcur.toStatus&&!autosave)return WkView.hide(!1,!0),wkcur.reloadOnSave&&((0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_10__.boxRefreshCoords)(boxLoader),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.show)(boxLoader),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.show)(boxLayerWrap),nav.reload({onDone:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hide)(boxLoader),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hide)(boxLayerWrap)}})),!0}}if(autosave)return!0;setTimeout((function(){saveEl&&(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_22__.fadeOut)(saveEl,200)}),1500)},showProgress:function(){!autosave&&(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_17__.lockButton)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wk_layer_save"))},hideProgress:function(){!autosave&&(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_17__.unlockButton)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wk_layer_save"))},onFail:WkView.showError})))},initWkBox:function(title,html,options,script){(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_10__.curBox)()&&(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_10__.curBox)().type&&(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_10__.curBox)().type==options.type&&((0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_10__.curBox)().setOptions({onHide:!1}),(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_10__.curBox)().hide());let box=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_18__.showFastBox)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.extend)({title},options),html);if(options.wkRaw&&(box.wkRaw=options.wkRaw),options.type&&(box.type=options.type),options.commonClass&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.addClass)(box.bodyNode,options.commonClass),script)try{eval(script)}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_15__.logEvalError)(_,script)}box.setOptions({onHide(_){_||!nav.objLoc.w||options.noChangeLocation||nav.change({w:!1},void 0,{asBox:!0})},onShow(){box.wkRaw&&!options.noChangeLocation&&(nav.objLoc.w=box.wkRaw,nav.setLoc(nav.objLoc))},...options.boxOptions});let nl=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.extend)(nav.objLoc,options.noChangeLocation?{}:{w:options.wkRaw});return delete nl.z,nav.strLoc==nav.toStr(nl)||options.noChangeLocation||nav.setLoc(nl),box},evalScripts:function(_){if("SCRIPT"===_.tagName)_.parentNode.replaceChild(this.cloneNode(_),_);else{let e=0,t=_.childNodes;for(;e<t.length;)this.evalScripts(t[e++])}},cloneNode:function(_){let e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ce)(_.tagName.toLowerCase());e.text=_.innerHTML;for(let t=_.attributes.length-1;t>=0;t--)e.setAttribute(_.attributes[t].name,_.attributes[t].value);return e},show:function(title,html,options,script,ev){if(options.asBox)return this.initWkBox(title,html,options,script),!0;window.wkcur?(wkcur.shown&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.isVisible)(wkLayerWrap)&&WkView.hide(!0,!0),(0,_web_wkview_wkview_queue__WEBPACK_IMPORTED_MODULE_28__.executeWkViewHideQueue)()):this.init();let hlen=window.wkcur&&wkcur.historyLen?wkcur.historyLen:0;window.wkcur&&(wkcur.doBack||options.fromlist)||(hlen+=1);let toQueue=options.queue;if(toQueue&&(layerQueue.push(),options.queue=!1),(window.wkcur||{}).shown&&wkcur.root&&nav.setLoc(wkcur.prevLoc),window.wkcur={historyLen:hlen,_hide:[],_show:[]},(_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__.browser.iphone||_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__.browser.ipad)&&(cur.wkStartScroll=(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_9__.scrollGetY)()),options.edit&&(cur._editMode=function(){return!0},!window.WkEditor))return window.stManager.add([window.jsc("web/wk_editor.js"),"wk_editor.css"],WkView.show.pbind(title,html,options,script,ev)),!1;cur.cancelTooltip=!0,window.tooltips&&tooltips.hideAll(),options.skipBoxesHide||boxQueue.hideAll(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.isVisible)(wkLayerWrap)||((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.addEvent)(window,"resize",WkView.onResize),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.addEvent)(wkLayerWrap,"click",WkView.onClick),WkView.showLayer()),wkcur.noLocChange=0,wkcur.noHistory=options.noLocChange,wkcur.isArchived=options.isArchived,wkcur.hideTitle=options.hide_title?1:0,wkcur.hideCloseButton=options.hideCloseButton?1:0,wkcur.hideBackButton=options.hideBackButton?1:0,wkcur.shown=!0,options.editHash&&(wkcur.editHash=options.editHash),wkcur.edit&&(wkcur.edit=!1),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.extend)(wkcur,options),wkcur.root?(cur.nav.push((function(_,e,t,o){if((t=nav.toStr(t))==wkcur.prevLoc)return WkView.hide(!0),!1})),!options.noLocChange&&options.myLoc&&nav.setLoc(options.myLoc)):(WkView.setLocation(options.noLocChange,toQueue),options.prevLoc&&(wkcur.prevLoc=options.prevLoc)),ev&&ev.pageX&&ev.pageY&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.extend)(wkcur,{oldX:ev.pageX,oldY:ev.pageY,oldT:Date.now()});const postId=options.post?`post${options.post}`:"";(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.addClass)(wkLayerWrap,"wk_dark"),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.addEvent)(wkLayerWrap,"scroll",WkView.onScroll),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.domData)(wkLayerWrap,"post-id",postId),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.addClass)(layerBG,"wk_dark");let content=html,hideLeft=wkcur.historyLen>1&&!wkcur.hideBackButton?"":"display: none;",hideCloseBtn=wkcur.hideCloseButton?"display: none;":"";"wall"==options.type?((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.addEvent)(window,"resize",WkView.onResize),WkView.wallBeforeInitPost(options)):options.edit?(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.addEvent)(window,"resize",WkView.onResize):options&&(content='<div class="wk_text wk_wiki_content'+(options.className?" "+options.className:"")+'" onclick="return WkView.wikiClick(this, event);">'+content+"</div>");const{icon:closeIcon}=(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_29__.getIcon20Cancel)(),isRedesignV3Enabled=(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_26__.partConfigEnabled)("feed_redesign_2023_enabled"),wkCloseInner=isRedesignV3Enabled?`<div class="wk_close_inner">${closeIcon}</div>`:'<div class="wk_close_inner"></div>',isWkWidthRedesignEnabled=(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_26__.partConfigEnabled)("feed_redesign_wk_width_2023_enabled")&&options.post&&"wall"===options.type;if(wkcur.wkCont?wkcur.wkContent.innerHTML=content:(wkLayer.innerHTML=`<div class="wk_cont ${isWkWidthRedesignEnabled?"wk_content_redesign_v3":""}">\n  <div id="wk_box" onclick="wkcur.wkClicked = true;">\n    <div id="wk_loader"></div>\n    <a id="wk_close_link" href="javascript: return false;" class="fl_r wk_close_link" onclick="return WkView.hide(false, true, '${postId}');">\n      ${_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang("global_close")}\n    </a>\n    <div id="wk_summary" class="fl_l"><span class="summary" id="wk_layer_title">${title}</span></div>\n    <div id="wk_content">${content}</div>\n    <div class="clear"></div>\n  </div>\n  <div id="wk_dots" class="wk_dots"></div>\n  </div>\n<div id="wk_left_wrap"><div id="wk_left" style="${hideLeft}" class="wk_left no_select"></div></div>\n<div class="wk_left_nav no_select" id="wk_left_nav" style="${hideLeft}" ' + 'onmousedown="wkcur.wkClicked = true; WkView.back();" onselectstart="return cancelEvent(event);"></div>\n<div class="wk_right_nav no_select" id="wk_right_nav" aria-label="${_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang("global_close")}" tabindex="0" role="button" onmousedown="if (!wkcur.noClickHide) { wkcur.wkClicked = true; WkView.hide(false, false, '${postId}'); cancelEvent(event) }"><div id="wk_right" class="wk_close no_select ${isRedesignV3Enabled?"wk_close_redesign_v3":""}" style="${hideCloseBtn}">${wkCloseInner}</div></div>\n<div id="wk_left_arrow_bg" class="wk_arrow_bg no_select" tabindex="0" role="button" onclick="return WkView.navigate(this, event, -1);" onmouseover="WkView.preloadArrow(false)"><div class="wk_arrow_bg_inner"></div><div id="wk_left_arrow" class="wk_arrow no_select"></div></div>\n<div id="wk_right_arrow_bg" class="wk_arrow_bg no_select" tabindex="0" role="button" onclick="return WkView.navigate(this, event, 1);" onmouseover="WkView.preloadArrow(true)"><div class="wk_arrow_bg_inner"></div><div id="wk_right_arrow" class="wk_arrow no_select"></div></div>`,options.nocross&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.re)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.geByClass1)("wk_close_inner",wkLayer)),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.extend)(wkcur,{wkCont:wkLayer.firstChild,wkBox:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wk_box"),mvLoader:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wk_loader"),wkContent:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wk_content"),wkLeftNav:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wk_left_nav"),wkRightNav:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wk_right_nav"),wkLeft:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wk_left"),wkLeftWrap:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wk_left_wrap"),wkRight:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wk_right"),wkLeftArrow:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wk_left_arrow"),wkRightArrow:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wk_right_arrow"),wkLeftArrowBg:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wk_left_arrow_bg"),wkRightArrowBg:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wk_right_arrow_bg"),wkDots:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wk_dots")}),"away"===options.wkRaw.substr(0,4)&&(this.evalScripts(wkLayer),setTimeout((function(){window._mediator&&window._mediator.start({url:location.pathname+location.search})}),1500))),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.toggle)("wk_summary",title),options.withDots&&options.wkRawList.length){let _=options.wkRawList.length;for(let e=0;e<_;e++){let _=options.wkRawList[e],t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.se)('<span class="wk_dots__dot" onclick="WkView.openRaw(event, \''+_+"')\"></span>");options.wkRaw==_&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.addClass)(t,"wk_dots__dot_active"),wkcur.wkDots.appendChild(t)}}if(wkcur.commonClass?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.addClass)(wkcur.wkBox,wkcur.commonClass):wkcur.wkBox.className="",wkcur.noCloseIcon&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hide)(wkcur.wkRight),wkcur.oid&&wkcur.pid&&(WkView.initSTL(),options.edit||((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.addEvent)(wkLayerWrap,"scroll",WkView.onScroll),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.addEvent)(window,"resize",WkView.onResize))),options.overflow?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.addClass)(wkcur.wkBox,"wk_overflow_hidden"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.removeClass)(wkcur.wkBox,"wk_overflow_hidden"),script)try{eval(script)}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_15__.logEvalError)(_,script)}WkView.updateSize(),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.removeEvent)(document,"keydown",WkView.onKeyDown),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.addEvent)(document,"keydown",WkView.onKeyDown),options.onLoaded&&options.onLoaded(),(0,_web_lib_market__WEBPACK_IMPORTED_MODULE_3__.shortCurrency)(),WkView.updateArrows();const ignoreElements=wkcur.wkRightNav?[wkcur.wkRightNav]:[];if((0,_shared_accessibility_accessibility__WEBPACK_IMPORTED_MODULE_30__.setFocusIsNeed)(window.wkLayer,ignoreElements),window.wkLayer.contains(document.activeElement)||window.wkLayer.focus(),wkLayerWrap.scrollTop=0,"wall"===options.type?WkView.wallAfterInitPost({isPostCommentsDisabled:options.isPostCommentsDisabled,replyId:options.reply,isInputFocusEnabled:options.isInputFocusEnabled}):options.toScroll?(wkLayerWrap.scrollTop=options.toScroll,wkcur.toScroll=0):wkLayerWrap.scrollTop=0,options.fromlist&&WkView.preloadArrow(1==options.fromlist),(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_31__.getAudioPlayer)().updateCurrentPlaying(),(0,_web_lib_accessibility__WEBPACK_IMPORTED_MODULE_20__.updateAriaElements)(),ev&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.domClosest)("bookmarks_row_type_product",ev.target)&&options&&options.wkRaw){let _=options.wkRaw.match(/^product(-?\d+)_(\d+)/);(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_5__.statlogsValueEvent)("bookmarks_product_analytics",{item_type:"product",item_owner_id:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.intval)(_[1]),item_id:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.intval)(_[2]),time:(0,_web_lib_date__WEBPACK_IMPORTED_MODULE_8__.getServerTime)()})}if(cur.gifAutoplayScrollHandler){const _=document.getElementById("wk_layer_wrap");_&&!cur.gifAutoplayScrollHandlerOnWkLayer&&((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.addEvent)(_,"scroll",cur.gifAutoplayScrollHandler),cur.gifAutoplayScrollHandlerOnWkLayer=!0),cur.gifAutoplayScrollHandler()}return!1},hide:function(_,e,t){const{noLoc:o}="object"==typeof _?_:{noLoc:_};if(!window.wkcur||!e&&!wkcur.shown)return;(0,_web_wkview_wkview_helpers__WEBPACK_IMPORTED_MODULE_32__.sendWkViewCloseEvent)();let i=!wkcur.wkRaw.match(/^recom_apps\d+$/)&&!wkcur.wkRaw.match(/^app\d+$/);if("story"===wkcur.type&&!e&&window.Stories&&!o)return Stories.hideLayer();if(clearTimeout(wkcur.autosaveTimeout),clearTimeout(wkcur.showT),window.GroupsVKUIApps&&!wkcur.warningBeforeHiding&&window.GroupsVKUIApps.closeApps(),!e&&wkcur.edit&&wkcur.editor&&wkcur.editor.changed){if(wkcur.note&&wkcur.toStatus&&!o)return void WkView.saveInfo();{let _=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_18__.showFastBox)(wkcur.lang.pages_close_title,wkcur.lang.pages_close_text,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang("box_yes"),(function(){_.hide(),WkView.hide(o,!0)}),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang("box_no"));return}}if((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_21__.isFunction)(wkcur.onHideAttempt)&&!wkcur.onHideAttempt(o,e))return;if(!e&&wkcur.warningBeforeHiding){const _=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_18__.showFastBox)(wkcur.warningBeforeHiding.confirm_box_title,wkcur.warningBeforeHiding.confirm_box_content,wkcur.warningBeforeHiding.confirm_box_ack,(function(){_.hide(),WkView.hide(o,!0),window.GroupsVKUIApps&&window.GroupsVKUIApps.closeApps()}),wkcur.warningBeforeHiding.confirm_box_cancel);return}(0,_web_wkview_wkview_queue__WEBPACK_IMPORTED_MODULE_28__.executeWkViewHideQueue)();let r=!1;if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.isVisible)(wkLayerWrap)&&(setTimeout(layerQueue.pop,0),r=layerQueue.count()&&"wiki"==layerQueue._layers[layerQueue._layers.length-1][0]&&!layerQueue._bl,r||(layers.wraphide(wkLayerWrap),layers.fullhide=!1),wkcur.photoViewverHideCB&&layerQueue.count()&&"photo"===layerQueue._layers[layerQueue._layers.length-1][0]&&cur.pvOptions&&(cur.pvOptions.onHide=wkcur.photoViewverHideCB,wkcur.photoViewverHideCB=!1),!(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_26__.partConfigEnabled)("feed_focus_returner"))){const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)(t);_?.focus()}if(window.tooltips&&tooltips.destroy(this),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.removeEvent)(document,"keydown",WkView.onKeyDown),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.removeClass)(wkcur.wkContent,"wke_top_fixed"),wkcur.fixedTop=wkcur.fixedBottom=!1,r||((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.removeClass)(wkLayerWrap,"wk_dark"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.removeClass)(layerBG,"wk_dark"),wkcur.shown=!1,(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.removeEvent)(wkLayerWrap,"click",WkView.onClick),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.removeEvent)(wkLayerWrap,"scroll",WkView.onScroll),wkcur.wkContent.innerHTML=""),wkcur.wkClicked=!1,wkcur.hideTitle=!1,wkcur.changeCanvasSize=!1,wkcur.onHide&&(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_21__.isFunction)(wkcur.onHide)&&wkcur.onHide(),cur._editMode=!1,wkcur.root&&!0!==o?WkView.backLocation():wkcur.noLocChange||!0===o?i&&__adsUpdate():(2===o?nav.setLoc(hab.getLoc()):WkView.backLocation(),i&&__adsUpdate("lazy")),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__.browser.iphone||_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__.browser.ipad){let _=(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_9__.scrollGetY)();Math.abs(_-cur.wkStartScroll)>500&&(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_9__.scrollToY)(cur.wkStartScroll,0)}return delete wkcur.historyLen,(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_31__.getAudioPlayer)().updateCurrentPlaying(),cur.gifAutoplayScrollHandler&&cur.gifAutoplayScrollHandler(),window._mediator&&window._mediator.isActive()&&window._mediator.stop(),!1},cmp:function(_,e){let t=_.length,o=e.length;return t<o?-1:t>o?1:_<e?-1:_>e?1:0},onClick:function(_){if(wkcur.wkClicked||wkcur.noClickHide||_&&cur.__mdEvent&&_.target!=cur.__mdEvent.target)return void(wkcur.wkClicked=!1);let e=Math.abs(_.pageX-(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.intval)(wkcur.oldX)),t=Math.abs(_.pageY-(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.intval)(wkcur.oldY));(e>3||t>3)&&Date.now()-(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.intval)(wkcur.oldT)>300&&WkView.hide(!1,!1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.domData)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.domClosest)("layer_wrap",_.target),"post-id"))},onKeyDown:function(_){if(!1===(_=_||window.event).returnValue)return!1;if(!cur.pvShown&&_.keyCode===_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.KEY.ESC)return WkView.hide(),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.cancelEvent)(_);if(!(cur.pvShown||wkcur.edit||window.cur.storyLayer||_.keyCode!==_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.KEY.LEFT&&_.keyCode!==_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.KEY.RIGHT)){let e=_&&_.target||_.srcElement;return!(!e||!("TEXTAREA"===e.tagName||"INPUT"===e.tagName||"DIV"===e.tagName&&e.contentEditable&&"inherit"!=e.contentEditable))||(WkView.navigate(null,_,_.keyCode===_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.KEY.RIGHT?1:-1),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.cancelEvent)(_))}if(WkView.canEdit){if(83===_.keyCode&&(_.ctrlKey||_.metaKey&&_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__.browser.mac))return WkView.saveInfo(),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.cancelEvent)(_);if((10===_.keyCode||13===_.keyCode&&(_.ctrlKey||_.metaKey&&_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__.browser.mac))&&WkView.saveInfo(),cur.updTimeout)return;cur.updTimeout=setTimeout((function(){WkView.onResize(),cur.updTimeout=!1}),200)}},onResize:function(){let _=lastWindowWidth,e=lastWindowHeight,t=_-(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_17__.sbWidth)()-2-120-34-50,o=e-31-28-72;t>1280?t=1280:t>807&&t<907?t=807:t<604&&(t=604),o<453&&(o=453),wkcur.mvWidth=t,wkcur.mvHeight=o,wkcur.mvVeryBig=t>1280?2:t>807&&1,WkView.onScroll(!1,!0),WkView.updateHeight(),WkView.updateArrows(),setTimeout(WkView.updateArrows,0)},updateArrows:function(){let _=(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_17__.sbWidth)()+2;wkcur.wkLeft&&(wkcur.wkLeft.style.left="20px");let e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.getSize)(wkcur.wkBox),t=e[0],o=e[1],i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.getSize)(wkcur.wkLeftArrowBg)[0],r=i-10,a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.getSize)(wkcur.wkLeftArrow)[0]||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.getSize)(wkcur.wkRightArrow)[0];wkcur.wkLeftNav.style.width=Math.floor((lastWindowWidth-_-t)/2)+"px",wkcur.wkRightNav.style.left=Math.floor((lastWindowWidth-_+t)/2)+"px",wkcur.wkRightNav.style.width=Math.floor((lastWindowWidth-_-t)/2)+"px",wkcur.wkClose&&(wkcur.wkClose.style.left=lastWindowWidth-_-37+"px"),wkcur.wkRight.style.left=Math.floor((lastWindowWidth-_+t)/2)+"px";let n=WkView.getNextWkRaws(),l="intro"==wkcur.wkRaw;if(n[0]||n[1]||l){let e=_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__.browser.mobile?window.innerHeight:lastWindowHeight,s=(wkcur.wkCont.offsetHeight<e?wkcur.wkCont.offsetTop+10+o/2:e/2)-8;n[0]||l&&wkcur.introControlsCur?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.show)(wkcur.wkLeftArrow),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.show)(wkcur.wkLeftArrowBg),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.setStyle)(wkcur.wkLeftArrowBg,{left:(lastWindowWidth-_-t)/2-i}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.setStyle)(wkcur.wkLeftArrow,{left:(lastWindowWidth-_-t)/2-r+(r-a)/2,top:s})):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hide)(wkcur.wkLeftArrow,wkcur.wkLeftArrowBg),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.setStyle)(wkcur.wkRight,{paddingBottom:(s-(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.getXY)(wkcur.wkRight,!0)[1]-24)/2}),n[1]||l&&wkcur.introControls&&wkcur.introControlsCur<wkcur.introControls.length-1?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.show)(wkcur.wkRightArrow),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.show)(wkcur.wkRightArrowBg),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.setStyle)(wkcur.wkRightArrowBg,{left:(lastWindowWidth-_-t)/2+t}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.setStyle)(wkcur.wkRightArrow,{left:(lastWindowWidth-_-t)/2+t+(r-a)/2,top:s})):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hide)(wkcur.wkRightArrow,wkcur.wkRightArrowBg)}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hide)(wkcur.wkLeftArrow,wkcur.wkLeftArrowBg,wkcur.wkRightArrow,wkcur.wkRightArrowBg)},getNextWkRaws:function(){let _=!1,e=!1;if((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_21__.isArray)(wkcur.wkRawList)&&wkcur.historyLen<=1&&!wkcur.wkRawLoading){let t=wkcur.wkRawList.length,o=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.indexOf)(wkcur.wkRawList,wkcur.wkRaw);o>0&&(_=wkcur.wkRawList[o-1]),o>=0&&o<t-1&&(e=wkcur.wkRawList[o+1]),wkcur.wkRawListLoop&&t>1&&(_=_||wkcur.wkRawList[t-1],e=e||wkcur.wkRawList[0])}return[_,e]},recacheRaw:function(_){return!!(cur.wkviewNavRecache&&_&&cur.wkviewNavRecache[_])&&(delete cur.wkviewNavRecache[_],!0)},openRaw:function(_,e){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.cancelEvent)(_),(0,_web_lib_feature_entries_showWiki__WEBPACK_IMPORTED_MODULE_7__.showWiki)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.extend)({from:wkcur.from},{w:e}),!1,!1,{fromlist:1,noloader:!0,preload:{cache:wkcur.navNoCache||WkView.recacheRaw(e)?0:1}})},navigate:function(_,e,t){if("intro"===wkcur.wkRaw)return WkView.introNext(t),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.cancelEvent)(e),!1;let o=WkView.getNextWkRaws(),i={};wkcur.from&&(i.from=wkcur.from),t>0&&o[1]&&(wkcur.wkRawLoading=!0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.addClass)(wkcur.wkRightArrow,"wk_arrow_progress"),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_17__.showProgress)(wkcur.wkRightArrow),wkcur.onNavigate&&wkcur.onNavigate(o[1],t,_),(0,_web_lib_feature_entries_showWiki__WEBPACK_IMPORTED_MODULE_7__.showWiki)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.extend)(i,{w:o[1]}),!1,!1,{fromlist:1,noloader:!0,preload:{cache:wkcur.navNoCache||WkView.recacheRaw(o[1])?0:1}}),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.cancelEvent)(e)),t<0&&o[0]&&(wkcur.wkRawLoading=!0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.addClass)(wkcur.wkLeftArrow,"wk_arrow_progress"),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_17__.hideProgress)(wkcur.wkRightArrow),wkcur.onNavigate&&wkcur.onNavigate(o[0],t,_),(0,_web_lib_feature_entries_showWiki__WEBPACK_IMPORTED_MODULE_7__.showWiki)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.extend)(i,{w:o[0]}),!1,!1,{fromlist:-1,noloader:!0,preload:{cache:wkcur.navNoCache||WkView.recacheRaw(o[0])?0:1}}),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.cancelEvent)(e))},updateHeight:function(){window.updateWndVScroll&&updateWndVScroll();let _=_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__.browser.mobile?window.innerHeight:lastWindowHeight,e=Math.max(wkcur.wkCont.offsetHeight,_);wkcur.wkLeftNav.style.height=wkcur.wkRightNav.style.height=e+"px";let t=wkcur.wkBox.offsetHeight;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.setStyle)(wkcur.wkLeftArrowBg.firstChild,{height:t}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.setStyle)(wkcur.wkRightArrowBg.firstChild,{height:t})},updateSize:function(_){if(!wkcur.wkCont)return;let e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.getSize)(wkcur.wkCont),t=document.documentElement,o=window.innerHeight||t.clientHeight||document.body.clientHeight,i=Math.max((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_21__.positive)((o-e[1]-5)/2),WKCONT_TOP),r=i+10,a=wkLayer.offsetHeight-e[1]+i+90;wkcur.wkCont.style.top=i+"px",wkcur.wkRight.style.top=Math.max(r-wkLayerWrap.scrollTop,16)+"px",wkcur.wkLeftArrowBg.style.paddingTop=wkcur.wkRightArrowBg.style.paddingTop=r+"px",wkcur.wkLeftArrowBg.style.paddingBottom=wkcur.wkRightArrowBg.style.paddingBottom=a+"px",_||(onBodyResize(),WkView.onResize())},setLocation:function(_,e){wkcur.prevLoc={};for(let _ in nav.objLoc)("w"!=_||nav.objLoc[_]!=wkcur.wkRaw&&e)&&(wkcur.prevLoc[_]=nav.objLoc[_]);if(_)return;let t=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.extend)(nav.objLoc,{w:wkcur.wkRaw});delete t.order,delete t.z;(nav.objLoc[0].includes("category")||nav.objLoc[0].includes("section")||nav.objLoc[0].includes("compilation"))&&(t[0]="market"),(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_26__.partConfigEnabled)("apps_launch_query_params")&&wkcur.ref&&(t.ref=wkcur.ref),nav.strLoc!=nav.toStr(t)&&nav.setLoc(t)},backLocation:function(){let _=hab.getLoc();if(wkcur.prevLoc&&wkcur.prevLoc!=_){const _=["faves","my_items","my_items_active","my_items_inactive","my_items_sold","orders","carts","orders","products","similar_items_light"],e=window.location.href.includes("/market")&&(void 0===wkcur.prevLoc.section||"search"===wkcur.prevLoc.section||"main"===wkcur.prevLoc.section||!_.includes(wkcur.prevLoc.section));wkcur.prevLoc[0].includes("market/")&&e?(delete wkcur.prevLoc.screen,delete wkcur.prevLoc.ref_screen,delete wkcur.prevLoc.catalog_context,delete wkcur.prevLoc.section):e&&(delete wkcur.prevLoc.screen,delete wkcur.prevLoc.ref_screen),nav.setLoc(wkcur.prevLoc)}else{let e=_.split("/");e.length>1&&nav.setLoc(e[0])}layerQueue.noHistory()},showError:function(_){window.wkcur&&(delete wkcur.wkRawLoading,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.addClass)(wkcur.wkRightArrow,"wk_arrow_progress"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.addClass)(wkcur.wkLeftArrow,"wk_arrow_progress"));let e=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_18__.showFastBox)({title:_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang("global_error")},_,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang("global_close"));return setTimeout(e.hide,2e3),!0},onChange:function(){if(!wkcur.shown)return!1;clearTimeout(wkcur.autosaveTimeout),wkcur.autosaveTimeout=setTimeout((function(){wkcur.note&&wkcur.toStatus&&WkView.saveInfo(!0)}),4e3)},likeOver:function(_){let e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.getSize)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wk_like_link")),t=e?e[0]:20;(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_19__.showTooltip)(_,{url:"like.php",params:{act:"a_get_stats",object:wkcur.like_obj||wkcur.wkRaw,from:"wkview"},slide:15,shift:[0,8,9],ajaxdt:100,showdt:400,hidedt:200,typeClass:"like_tt",className:"wk_like_tt",dir:"auto",init:function(_){if(!_.container)return;let e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.geByClass1)("bottom_pointer",_.container,"div"),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.geByClass1)("top_pointer",_.container,"div");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.setStyle)(e,{marginLeft:t+2}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.setStyle)(o,{marginLeft:t+2})}})},like:function(){if(!vk.id)return;if(cur.viewAsBox)return void cur.viewAsBox();let _=!wkcur.liked;ajax.post("like.php",{act:"a_do_"+(_?"":"un")+"like",object:wkcur.like_obj||wkcur.wkRaw,hash:wkcur.likehash,from:"wkview"},{onDone:function(e,t){return WkView.likeUpdate(_,e,t)}}),WkView.likeUpdate(_,wkcur.likes+(_?1:-1))},likeShare:function(_){let e,t,o=wkcur.like_obj||wkcur.wkRaw,i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("like_share_"+o),r=(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_17__.isChecked)(i);if((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_17__.checkbox)(i),ajax.post("like.php",{act:"a_do_"+(r?"un":"")+"publish",object:o,hash:_},{onDone:WkView.likeUpdate.pbind(!0)}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wk_like_link"))e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.val)("wk_like_count"),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wk_like_icon"),"my_like");else{let _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("like_real_count_"+o);e=_?_.value:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.val)("like_count"+o),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("like_icon"+o),"my_like")}WkView.likeUpdate(!0,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.intval)(e)+(t?0:1))},likeShareCustom:function(){vk.id&&(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_18__.showBox)("like.php",{act:"publish_box",object:wkcur.like_obj||wkcur.wkRaw,list:"",from:"wkview"})},likeUpdate:function(_,e,t){e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.intval)(e);let o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wk_like_wrap"),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.domByClass)(o,"_count");if(!i)return;let r=o.tt||{},a=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.clone)(r.opts||{}),n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.domByClass)(r.container,"_value"),l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.domByClass)(r.container,"_content"),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.domByClass)(r.container,"_title");t&&s&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.val)(s,t),r&&(r.likeInvalidated=!0),n&&(n.value=e),wkcur.likes=e,(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_22__.animateCount)(i,e),wkcur.liked=_,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.toggleClass)(o,"my_like",_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.toggleClass)(o,"no_likes",!e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.toggleClass)(l,"me_hidden",!_),r.el&&(e?!1===t?r.destroy&&r.destroy():(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.isVisible)(r.container)||t||tooltips.show(r.el,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.extend)(a,{showdt:0})):r.hide())},showLikesPage:function(_,e,t){cur.likesBox.loadTabContent("like.php",{act:"a_get_members",object:_,published:e,offset:t,wall:1},e)},wallBeforeInitPost:function(_){if(window.tooltips&&tooltips.destroyAll(),(0,_web_lib_revertLastInlineVideo__WEBPACK_IMPORTED_MODULE_2__.revertLastInlineVideo)(),(0,_shared_stickers_refactor_utils_popup_destroy__WEBPACK_IMPORTED_MODULE_27__.popupDestroyByRemoveEventNative)(),wkcur.postInited)return!1;wkcur.pageReplaced=[];let e,t,o=wkcur.post;for(;e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("post"+o),!e&&cur.onepost&&o===cur.oid+"_"+cur.pid&&(e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("fw_post")),e=e||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("reply_fakebox"+o)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("reply_box"+o)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("replies"+o)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("feedback_row_wall"+o)||wkcur.hl_reply&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("post"+wkcur.hl_reply)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("feedback_row_wall_reply"+wkcur.hl_reply)),e;)t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ce)("div",{className:"wk_wall_post_placeholder",id:"wk_wall_post_placeholder_"+e.id}),(0,_web_wkview_wkview_helpers__WEBPACK_IMPORTED_MODULE_32__.preparePostElToDetaching)(e),e.parentNode.replaceChild(t,e),wkcur.pageReplaced.push([e,t]);cur.wallLayer=o,cur.wallLayerLike=wkcur.post_like,_.options.wall_tpl&&((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.extend)(window.lang,_.lang,_.options.wall_tpl.lang),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.extend)(wkcur,{wallCheckComments:_.options.check_comments,wallType:_.options.wall_type,wallTpl:_.options.wall_tpl,wallMyDeleted:{},tsDiff:_.options.wall_tpl&&_.options.wall_tpl.abs_timestamp?900*Math.round(((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_21__.vkNow)()/1e3-_.options.wall_tpl.abs_timestamp)/900):0,wallMyOpened:{},wallMyReplied:{},wallMyRepliesCnt:0,wallUploadOpts:_.options.upload}),Wall.initUpdates(wkcur.options.add_queues,!0),wkcur.timeUpdateInt=setInterval((function(){Wall.updateTimes(wkcur.wkContent)}),1e4)),(0,_web_wkview_wkview_queue__WEBPACK_IMPORTED_MODULE_28__.addWkViewHideQueue)(WkView.wallDeinitPost),wkcur.postInited=!0},wallAfterInitPost:function(_){let e=wkcur.post,t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("reply_field"+e);cur.wkSubscribed&&void 0!==cur.wkSubscribed[(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.intval)(e)]&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.toggleClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.geByClass1)("_wk_subscribe_btn",wkcur.wkBox),"secondary",cur.wkSubscribed[(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.intval)(e)]),delete cur.editing,t&&(0,_web_lib_input_utils__WEBPACK_IMPORTED_MODULE_6__.placeholderInit)(t,{editable:1}),WkView.wallUpdateReplies(),wkcur.hl_reply?setTimeout(Wall.scrollHighlightReply.pbind("post"+wkcur.hl_reply),0):setTimeout((function(){wkLayerWrap.scrollTop=wkcur.toScroll||0,wkcur.toScroll=0}),0),!_?.isPostCommentsDisabled||wkcur.hl_reply||_?.replyId||setTimeout((()=>{const e=document.querySelector("#wk_content .wl_replies_block_wrap");e?.scrollIntoView(),_.isInputFocusEnabled&&t?.focus()}),0)},wallDeinitPost:function(){if(!wkcur.postInited)return!1;cur.wallLayer=!1,cur.wallLayerLike=!1,wkcur.edit&&Wall.cancelEdit(),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.each)(wkcur.pageReplaced,(function(){let _=this[0],e=this[1];_&&e&&(e.parentNode.replaceChild(_,e),(0,_web_wkview_wkview_helpers__WEBPACK_IMPORTED_MODULE_32__.updatePostElAfterAttaching)(_))})),clearInterval(wkcur.timeUpdateInt),(0,_web_lib_revertLastInlineVideo__WEBPACK_IMPORTED_MODULE_2__.revertLastInlineVideo)(),window.tooltips&&tooltips.destroyAll(),delete cur.editing,delete wkcur.postInited},wallOnEdit:function(_,e){wkcur.edit=!0,wkcur.editor={changed:!0}},wallOnEdited:function(_){wkcur.edit=!1},wallPostShowDeletedMessage:function(_,e){let t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wl_post");if(t&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.domData)(t,"post-id")===_){cur.pgPaused=!0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hide)("wl_replies_wrap","wl_post_actions_wrap","wl_reply_form_wrap");let o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.domNS)(t);return o&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hasClass)(o,"no_rows")?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.val)(o,e):(o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ce)("div",{id:"post_del"+_,innerHTML:e,className:"no_rows"}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.domPN)(t).insertBefore(o,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.domNS)(t)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hide)(t)),cur.wkviewNavRecache||(cur.wkviewNavRecache={}),cur.wkviewNavRecache[wkcur.wkRaw]=1,wkLayerWrap.scrollTop=0,WkView.updateSize(),!0}return!1},wallPostHideDeletedMessage:function(_){let e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wl_post");if(e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.domData)(e,"post-id")===_){cur.pgPaused=!1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.show)("wl_replies_wrap","wl_post_actions_wrap","wl_reply_form_wrap");let _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.domNS)(e);return _&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hasClass)(_,"no_rows")&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.re)(_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.show)(e),cur.wkviewNavRecache||(cur.wkviewNavRecache={}),cur.wkviewNavRecache[wkcur.wkRaw]=1,wkLayerWrap.scrollTop=0,WkView.updateSize(),!0}return!1},wallPostSetArchiveState:function(_,e,t,o,i){if((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_17__.actionsMenuItemLocked)(_)||(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_17__.linkLocked)(_))return;let r=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.intval)(e.split("_")[1]),a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hasClass)(_,"ui_actions_menu_item");ajax.post("al_wall_archive.php",{act:"a_set_state",from:"wkview",hash:t,state:o?1:0,postId:r},{onDone:function(_){i?WkView.wallPostHideDeletedMessage(e):WkView.wallPostShowDeletedMessage(e,_)},showProgress:a?_web_lib_ui__WEBPACK_IMPORTED_MODULE_17__.lockActionsMenuItem.pbind(_):(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_17__.lockLink)(_),hideProgress:a?_web_lib_ui__WEBPACK_IMPORTED_MODULE_17__.unlockActionsMenuItem.pbind(_):(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_17__.unlockLink)(_)})},wallPostDelete:function(act,hash,force){let post=wkcur.post;if("spam"!==act)cur.wallMyDeleted&&(cur.wallMyDeleted[post]=1),ajax.post("al_wall.php",{act,post,hash,confirm:force?1:0,from:"wkview"},{onDone:function(msg,additional,needConfirm){if(needConfirm){let _=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_18__.showFastBox)(msg,needConfirm,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang("global_delete"),(function(){_.hide(),WkView.wallPostDelete(act,hash,1)}),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang("box_cancel"));return}let p=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wl_post");if(!p)return;cur.pgPaused=!0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hide)("wl_replies_wrap","wl_post_actions_wrap","wl_reply_form_wrap");let del=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.domNS)(p);if(del&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hasClass)(del,"no_rows")?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.val)(del,msg):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.domPN)(p).insertBefore((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ce)("div",{id:"post_del"+post,innerHTML:msg,className:"no_rows"}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.domNS)(p)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hide)(p)),wkLayerWrap.scrollTop=0,"spam"===act)try{eval(additional)}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_15__.logEvalError)(_,additional)}WkView.updateSize()},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_17__.lockButton.pbind("wpe_delete"+post),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_17__.unlockButton.pbind("wpe_delete"+post)});else{const[_,e]=post.split("_"),t=()=>{const _=document.querySelector(".wl_post .wkview_mark_as_spam");null!==_?(_.onclick=null,_.innerHTML=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang("global_report_sent")):(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_15__.debugLog)("Unable to find report button")};(0,_web_reports_reports__WEBPACK_IMPORTED_MODULE_23__.showReportForm)("wall",_,e,t)}},wallPostRestore:function(_){let e=wkcur.post;return cur.wallMyDeleted&&(cur.wallMyDeleted[e]=0),ajax.post("al_wall.php",{act:"restore",post:e,hash:_,from:"wkview"},{onDone:function(){let _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wl_post");if(!_||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.isVisible)(_))return;cur.pgPaused=!1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.show)("wl_replies_wrap","wl_post_actions_wrap","wl_reply_form_wrap");let e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.domNS)(_);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.show)(_),e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hasClass)(e,"no_rows")&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.re)(e),WkView.updateSize()}}),!1},wallUpdateRepliesOnScroll:function(_){if(!wkcur.postInited)return;let e=window.innerHeight||document.documentElement.clientHeight,t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wl_replies_more");if(!t){let _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("replies"+cur.wallLayer),e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.domLC)(_);e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hasClass)(e,"replies_next")&&(0,_web_wall_reply_update_view__WEBPACK_IMPORTED_MODULE_24__.loadRepliesLinkIsVisible)(e)&&(t=e)}if(t&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.isVisible)(t)){e+500>(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.getXY)(t,!0)[1]&&t.onclick()}let o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wl_reply_form");if(!o||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hasClass)(o,"wl_post_reply_form_forbidden"))return;let i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wl_reply_form_wrap"),r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.getXY)(i,!0)[1],a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.getSize)(o),n=a[1];if(_&&!1===wkcur.fixedBottom&&e-n<r+20)wkLayerWrap.scrollTop+=r+20-(e-n);else if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.isVisible)(i)&&e-n<r){wkcur.fixedBottom&&!_||(wkcur.fixedBottom=!0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.addClass)(o,"wl_reply_form_fixed"));let t=wkcur.fixedBottom?Math.min(0,Math.max(-wkLayerWrap.scrollLeft,document.body.clientWidth-(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.getSize)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("page_layout"))[0])):null;const i=Math.min(0,e-(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.getXY)("wl_replies_wrap",!0)[1]-n);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.setStyle)("wl_reply_form_wrap",{width:a[0],height:a[1],bottom:i,marginLeft:t}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.setStyle)(o,{bottom:i})}else(wkcur.fixedBottom||_)&&(wkcur.fixedBottom=!1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.removeClass)(o,"wl_reply_form_fixed"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.setStyle)("wl_reply_form_wrap",{width:null,height:null,marginLeft:null}))},wallShowMoreReplies:function(){if(wkcur.loadingReplies)return!1;let _=wkcur.offset+wkcur.loaded,e=wkcur.limit,t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("replies"+wkcur.post);return wkcur.count<=_||!t||(wkcur.loadingReplies=!0,Wall.moreReplies(wkcur.post,(wkcur.reverse?-1:1)*_,e,{from:"wkview",append:!0,rev:wkcur.reverse?1:0,onDone:function(_,e,t){(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.extend)(wkcur,{count:t.count,loaded:wkcur.loaded+t.num}),WkView.wallUpdateReplies(),wkcur.loadingReplies=!1},onFail:function(){wkcur.loadingReplies=!1},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_17__.lockButton.pbind("wl_replies_more"),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_17__.unlockButton.pbind("wl_replies_more")})),!1},wallShowPreviousReplies:function(_){if(wkcur.loadingReplies||wkcur.reverse)return!1;let e=Math.max(0,wkcur.offset-100),t=Math.min(100,wkcur.offset-e),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("replies"+wkcur.post);if(t<=0||!o)return!1;wkcur.loadingReplies=!0;let i=o.offsetHeight;Wall.moreReplies(wkcur.post,e,t,{from:"wkview",onDone:function(e,t,r){(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.extend)(wkcur,{count:r.count,offset:r.offset,loaded:wkcur.loaded+r.num}),_&&(wkLayerWrap.scrollTop+=o.offsetHeight-i,setTimeout(Wall.scrollHighlightReply.pbind("post"+_),0)),WkView.wallUpdateReplies(),wkcur.loadingReplies=!1},onFail:function(){wkcur.loadingReplies=!1},showProgress:_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.addClass.pbind("wl_replies_header_wrap","wl_replies_header_loading"),hideProgress:_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.removeClass.pbind("wl_replies_header_wrap","wl_replies_header_loading")}),StickersAnimation&&StickersAnimation.reloadStickers()},wallUpdateReplies:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.toggle)("wl_replies_more",wkcur.offset+wkcur.loaded<wkcur.count);let _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wl_replies_header"),e=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.langNumeric)(wkcur.count,wkcur.lang.wall_N_replies),t=!1;!wkcur.reverse&&wkcur.offset>0&&(e=wkcur.offset>100?(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.langNumeric)(100,wkcur.lang.wall_show_n_of_m_last).replace("{count}",wkcur.count):(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.langNumeric)(wkcur.count,wkcur.lang.wall_show_all_n_replies),t=!0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.val)("wl_replies_header_label",e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.toggleClass)(_,"wl_replies_header_clickable",t);let o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wl_replies_wrap"),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wl_reply_form");if(o&&(wkcur.count&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.isVisible)(o.firstChild)&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.show)(o.firstChild),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.toggleClass)(o,"wl_replies_empty",!wkcur.count)),i){let _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wl_reply_form_wrap");i.parentNode!=_&&_.appendChild(i)}WkView.wallUpdateRepliesOnScroll(),WkView.updateSize()},wallCancelEditReply:function(){let _=wkcur.post,e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("reply_field"+_),t=e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.data)(e,"composer");t?Composer.reset(t):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.val)(e,""),Wall.hideEditReply(_),WkView.wallUpdateReplies()},wallInverseReplies:function(_){if(wkcur.loadingReplies)return!1;wkcur.loadingReplies=!0,wkcur.reverse=!wkcur.reverse,wkcur.offset=0,Wall.moreReplies(wkcur.post,wkcur.offset,wkcur.limit,{from:"wkview",clear:!0,rev:wkcur.reverse?1:0,onDone:function(e,t,o){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.domFC)(_).className=wkcur.reverse?"sort_rev_icon":"sort_not_rev_icon",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.extend)(wkcur,{count:o.count,loaded:o.num}),WkView.wallUpdateReplies(),wkcur.loadingReplies=!1},onFail:function(){wkcur.reverse=!wkcur.reverse,wkcur.loadingReplies=!1},showProgress:_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.addClass.pbind("wl_replies_header_wrap","wl_replies_header_loading"),hideProgress:_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.removeClass.pbind("wl_replies_header_wrap","wl_replies_header_loading")})},likesInit:function(){if((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.extend)(wkcur,{historyLen:wkcur.historyLen||0}),WkView.initSTL(),WkView.likesTabInit(),likesTabsInvalidate(wkcur.like_obj),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.addEvent)(wkLayerWrap,"scroll",WkView.onScroll),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.addEvent)(window,"resize",WkView.onResize),onBodyResize(),cur.wallTpl=cur.wallTpl||{},cur.wallInited){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wl_post"),"deep_active")&&wkcur.wall_opts.wall_tpl.reply_form_new?(wkcur._oldReplyFormNew=cur.wallTpl.reply_form_new,cur.wallTpl.reply_form_new=wkcur.wall_opts.wall_tpl.reply_form_new):(wkcur._oldReplyForm=cur.wallTpl.reply_form,cur.wallTpl.reply_form=wkcur.wall_opts.wall_tpl.reply_form)}else Wall.initWallOptions(wkcur.wall_opts);void 0===cur.options?cur.options={reply_names:{}}:void 0===cur.options.reply_names&&(cur.options.reply_names={}),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.extend)(cur.options.reply_names,wkcur.reply_names),(0,_web_wkview_wkview_queue__WEBPACK_IMPORTED_MODULE_28__.addWkViewHideQueue)((()=>{(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.removeEvent)(wkLayerWrap,"scroll",WkView.onScroll),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.removeEvent)(window,"resize",WkView.onResize),wkcur._oldReplyForm&&(cur.wallTpl.reply_form=wkcur._oldReplyForm,wkcur._oldReplyForm=!1),wkcur._oldReplyFormNew&&(cur.wallTpl.reply_form_new=wkcur._oldReplyFormNew,wkcur._oldReplyFormNew=!1)}))},likesTabInit:function(){wkcur.preload&&ajax.preload("wkview.php",{act:"show",w:wkcur.wkRaw,offset:wkcur.offset},wkcur.preload)},likesToTop:function(){let _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("tb_tabs_wrap"),e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.getXY)(_,!0)[1];wkcur.lSTL&&wkcur.lSTL.el==(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wk_box")&&(wkcur.lSTLWas=0),e<0&&(wkLayerWrap.scrollTop+=e+1),WkView.likesOnScroll(),wkcur.lSTL&&WkView.stlOnScroll()},likesTab:function(_){let e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("likes_tab_"+_),t=e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.domFC)(e),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.gpeByClass)("ui_tabs",t);if(!t||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.geByClass1)("ui_tab_sel",o)==t)return!1;uiTabs.switchTab(t);let i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.gpeByClass)("wk_wiki_content",o);ajax.post("wkview.php",{act:"show",w:_+"/"+wkcur.like_obj,part:1},{cache:1,showProgress:_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.addClass.pbind(i,"box_loading"),hideProgress:_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.removeClass.pbind(i,"box_loading"),onDone:function(_,e){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.val)("wk_likes_content",_),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.extend)(wkcur,e),WkView.likesTabInit(),WkView.setLocation(),WkView.updateHeight(),WkView.likesToTop()}})},likesPreload:function(){ajax.post("wkview.php",{act:"show",w:wkcur.wkRaw,offset:wkcur.offset},{cache:1})},likesMore:function(){let _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wk_likes_more_link");(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_17__.isButtonLocked)(_)||ajax.post("wkview.php",{act:"show",w:wkcur.wkRaw,offset:wkcur.offset},{onDone:function(e,t,o,i,r){let a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wk_likes_rows");if(a){if(r){let _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.geByClass)("wk_likes_hidden",a);for(let e=0,t=_.length;e<t;++e)a.appendChild(_[e]),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.removeClass)(_[e],"wk_likes_hidden")}a.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.cf)(e)),wkcur.offset=t,o?WkView.likesPreload():(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hide)(_),WkView.updateHeight(),i&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.extend)(cur.options.reply_names,i)}},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_17__.lockButton.pbind(_),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_17__.unlockButton.pbind(_),cache:1})},likesOnScroll:function(_){let e=lastWindowHeight,t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wk_likes_more_link"),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("tb_tabs"),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("tb_tabs_wrap");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.getXY)(i,!0)[1]<0?wkcur.tbFixed||((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.setStyle)(i,"height",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.domFC)(o).offsetHeight),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.setStyle)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.domFC)(o),"width",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.getStyle)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.domFC)(o),"width"))),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.addClass)(o,"ui_tabs_fixed"),wkcur.tbFixed=!0):wkcur.tbFixed&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.removeClass)(o,"ui_tabs_fixed"),wkcur.tbFixed=!1),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.isVisible)(t)&&e>(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.getXY)(t,!0)[1]&&t.click()},likesBlacklistTip:function(_){(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_19__.showTooltip)(_,{text:_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang("like_block_liker"),shift:[8,5,5],black:1})},likesBlacklist:function(_,e,t){return _.tt&&_.tt.destroy&&_.tt.destroy(),(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_18__.showBox)("like.php",{act:"spam",mid:e,object:wkcur.like_obj}),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.cancelEvent)(t)},likesRecache:function(_){wkcur.offset+=_;for(let _ in ajaxCache)_.match(new RegExp("^\\/wkview.php\\#act=show",""))&&delete ajaxCache[_]},likesRemove:function(_){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.re)("fans_fan_row"+_),WkView.likesRecache(-1),WkView.onScroll(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.domFC)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wk_likes_rows"))||nav.reload()},historyInit:function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.addEvent)(wkLayerWrap,"scroll",WkView.onScroll),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.addEvent)(window,"resize",WkView.onResize),onBodyResize(),(0,_web_wkview_wkview_queue__WEBPACK_IMPORTED_MODULE_28__.addWkViewHideQueue)((()=>{(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.removeEvent)(wkLayerWrap,"scroll",WkView.onScroll),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.removeEvent)(window,"resize",WkView.onResize)}))},historyOnScroll:function(){if(wkcur.loadingHistory)return!1;let _=window.innerHeight||document.documentElement.clientHeight,e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wk_history_more_link");if(e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.isVisible)(e)){_+500>(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.getXY)(e,!0)[1]&&e.onclick()}},historyShowMore:function(){if(wkcur.loadingHistory)return!1;let _=wkcur.offset;return wkcur.loadingHistory=!0,ajax.post("wkview.php",{act:"show",w:wkcur.wkRaw,offset:_,part:1},{onDone:function(_,e){if(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wk_history_rows"))return;(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.extend)(wkcur,_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wk_history_rows").appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.cf)(e)),setTimeout(WkView.historyOnScroll,500);let t=wkcur.offset<wkcur.count&&e;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.toggle)("wk_history_more_link",t),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.toggle)("wk_history_empty",!t&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.domFC)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wk_history_rows"))),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.toggleClass)("wk_history_more","wk_history_more_loading",t&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.domFC)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wk_history_rows"))),wkcur.loadingHistory=!1},onFail:function(){wkcur.loadingHistory=!1},showProgress:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hide)("wk_history_more_link"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.show)("wk_history_more_progress")},hideProgress:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.show)("wk_history_more_link"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hide)("wk_history_more_progress")}}),!1},preloadArrow:function(_){let e=wkcur[_?"wkRightArrow":"wkLeftArrow"];if(!e.cached){e.cached=!0;let t=WkView.getNextWkRaws()[_?1:0];if(t){let _={w:t};if(t&&"/query"===t.substr(-6)){let e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.clone)(nav.objLoc);delete e[0],delete e.w,_.query=JSON.stringify(e)}wkcur.from&&(_.from=wkcur.from),ajax.post("wkview.php",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.extend)({act:"show",loc:nav.objLoc[0],is_preload:!0},_),{cache:1})}}},back:function(){if(wkcur.historyLen>1)return wkcur.doBack=1,wkcur.historyLen-=1,history.go(-1),!0;WkView.hide()},initSTL:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.re)(cur.lSTL),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.extend)(wkcur,{lSTL:wkLayerWrap.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ce)("div",{id:"layer_stl",innerHTML:'<div id="layer_stl_bg" class="fixed"></div><div id="layer_stl_cl"></div><nobr id="layer_stl_text" class="fixed">'+_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang("global_to_top")+"</nobr>",el:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wk_box"),onclick:_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.cancelEvent,onmousedown:WkView.stlDown,sc:WkView.stlOnScroll})),lSTLText:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("layer_stl_text",wkLayerWrap),lSTLShown:0,lSTLWas:0,lSTLWasSet:0}),cur.lSTL=wkcur.lSTL,(0,_web_wkview_wkview_queue__WEBPACK_IMPORTED_MODULE_28__.addWkViewHideQueue)((()=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.re)(wkcur.lSTL,cur.lSTL)}))},stlDown:function(_){if(_=_||window.event,!(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.checkEvent)(_)){if(!__afterFocus)if(wkcur.lSTLWasSet&&wkcur.lSTLWas){let _=wkcur.lSTLWas;wkcur.lSTLWas=0,wkLayerWrap.scrollTop=_}else wkcur.lSTLWas=wkLayerWrap.scrollTop,wkLayerWrap.scrollTop=0;return(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_12__.cancelEvent)(_)}},stlOnScroll:function(_){let e=wkLayerWrap.scrollTop,t=200,o=wkcur.lSTLWas||e>t,i=0;if(wkcur.lSTL.style.marginTop=e+"px",vk.staticheader){let _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.getSize)("page_header_wrap")[1];wkcur.lSTLText.style.marginTop=Math.max(-Math.min((0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_9__.scrollGetY)(),document.body.clientHeight-(window.lastWindowHeight||0)),-_)+"px"}if(o?(1!==wkcur.lSTLShown&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.show)(wkcur.lSTL),wkcur.lSTLShown=1),wkcur.lSTLWas&&e>500&&(wkcur.lSTLWas=0),e>t?(i=(e-t)/t,wkcur.lSTLWasSet&&(wkcur.lSTLWasSet=0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.val)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.domLC)(wkcur.lSTL),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang("global_to_top")),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.removeClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.domLC)(wkcur.lSTL),"down"))):(i=(t-e)/t,wkcur.lSTLWas&&(wkcur.lSTLWasSet||(wkcur.lSTLWasSet=1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.val)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.domLC)(wkcur.lSTL),""),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.addClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.domLC)(wkcur.lSTL),"down"))))):0!==wkcur.lSTLShown&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hide)(wkcur.lSTL),wkcur.lSTLShown=0),wkcur.wkLeft&&wkcur.wkLeftNav){let _=wkcur.historyLen>1&&!o;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.toggle)(wkcur.wkLeft,_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.toggle)(wkcur.wkLeftNav,_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.setStyle)(wkcur.wkLeftWrap,{opacity:1-Math.min(Math.max(e/t,0),1)}),_||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.setStyle)(wkcur.wkLeft,{opacity:.4})}(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.setStyle)(wkcur.lSTL,{opacity:Math.min(Math.max(i,0),1)})},subscribe:function(_,e){let t=_.tt&&(_.tt.shown||_.tt.showing);t?tooltips.hide(_,{fasthide:1}):_.tt&&_.ttimer&&(clearTimeout(_.ttimer),t=!0),ajax.post("/al_wall.php",{act:"toggle_subscribe",post:wkcur.post,hash:e},{onDone:function(e){WkView.setSubscribed(_,e.subscribed,t)},showProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_17__.lockButton)(_),hideProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_17__.unlockButton)(_)})},setSubscribed:function(_,e,t){_.innerHTML=wkcur.lang[e?"wall_unsubscribe_post":"wall_subscribe_post"],(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.toggleClass)(_,"wl_post_subscribed",e),t&&WkView.showSubscribeTooltip(_),cur.onWKSubscribe&&(cur.onWKSubscribe(e),delete cur.onWKSubscribe)},showSubscribeTooltip:function(_){let e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hasClass)(_,"wl_post_subscribed");(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_19__.showTooltip)(_,{dir:"left",asrtl:1,text:function(){return wkcur.lang[e?"wall_unsubscribe_post_tt":"wall_subscribe_post_tt"]},shift:[260,-15],slideX:-10,showdt:200,className:"subscr_post_tt"})},shareApp:function(_,e){if(vk.id){let t={act:"publish_box",object:wkcur.like_obj,url_hash:e,list:"",from:"wkview"},o={onDone:function(){let t=_;e&&(t+="#"+e);let o=cur.sbField&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.data)(cur.sbField,"composer");o&&o.addMedia&&o.addMedia.checkURL(t)}};(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_18__.showBox)("like.php",t,o)}},closeComments:function(_,e,t,o){Wall.closeComments(_,e,t,o,(function(_){WkView.onCloseComments(_,e,t),wkcur.pageReplaced&&wkcur.pageReplaced.length&&wkcur.pageReplaced.forEach((function(o){let i=o[0];i.id==="post"+e+"_"+t&&Wall.onCloseComments(_,i)}))}))},onCloseComments:function(_,e,t,o){let i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wl_post"),r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hasClass)(i,"Post--with_closed_comments_donut"),a=_?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.geByClass1)("wl_post_reply_form_forbidden"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wl_reply_form");if(!o&&!a&&!r)return void ajax.post("wkview.php",{act:"comment_box",owner_id:e,post_id:t},{onDone:function(o){o&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wl_reply_form_wrap").appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.se)(o)),!_&&!wkcur.isArchived&&WkView.wallAfterInitPost(),WkView.onCloseComments(_,e,t,!0))}});let n=_?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wl_reply_form"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.geByClass1)("wl_post_reply_form_forbidden");r||(wkcur.isArchived?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.toggleClass)(i,"closed_comments",!0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hide)(a),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hide)(n)):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.toggleClass)(i,"closed_comments",_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.show)(a),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hide)(n)));let l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.geByClass1)("action_closing_comments",i);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.domData)(l,"closed",_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.val)(l,_?_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang("wall_open_comments"):_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang("wall_closing_comments"))},initPostsReachTooltip,_eof:1};function initPostsReachTooltip(){const _=document.querySelector("#wk_posts_reach_tooltip_link");_&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.isVisible)(_)&&(cur.postsReachTabTooltipEl=new _web_lib_element_tooltip__WEBPACK_IMPORTED_MODULE_25__.ElementTooltip(_,{content:`\n        <div class='wk_reach_tooltip'>\n          <div class='wk_reach_tooltip_text'>\n            <div class='wk_reach_tooltip_text_header'>${_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang("stats_posts_reach_tooltip_head")}</div>\n            ${_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang("stats_posts_reach_tooltip_body")}\n          </div>\n        </div>\n      `,cls:"wk_reach_tooltip_wrapper",forceSide:"right",align:"left",appendToParent:!0,offset:[5,0]}))}function likesTabsInvalidate(_){if(!_)return;const e=_web_lib_ajax_cache__WEBPACK_IMPORTED_MODULE_14__.AjaxCacheClient.makeCacheKey("/wkview.php");_web_lib_ajax_cache__WEBPACK_IMPORTED_MODULE_14__.AjaxCacheClient.invalidateFor?.((t=>{if(!t.startsWith(e)||!t.includes(_))return!1;const o=(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_0__.fromQueryString)(t.substring(t.indexOf("#")+1));return!!o.w?.match(/(likes|shares|friendlikes|reactions_\d)/)}))}},851436:(_,e,t)=>{t.d(e,{useIsMounted:()=>i});var o=t(296540);const i=()=>{const _=(0,o.useRef)(!1);return(0,o.useEffect)((()=>(_.current=!0,()=>{_.current=!1})),[]),(0,o.useCallback)((()=>_.current),[])}},930095:(_,e,t)=>{t.d(e,{useLottie:()=>a});var o=t(851436),i=t(296540),r=t(441120);function a(_,{play:e,show:t}={}){const{animationUrl:a,animationData:n}=_,l=(0,i.useRef)(!1),s=(0,i.useRef)(null),c=(0,i.useRef)(null),[w,d]=(0,i.useState)(!1),[u,E]=(0,i.useState)(null),[p,b]=(0,i.useState)(!1),[k,P]=(0,i.useState)(!1),m=(0,o.useIsMounted)();(0,i.useEffect)((()=>{const _=c.current;_&&!p&&(void 0!==e&&(e?_.play():_.pause()),void 0!==t&&(t?_.show():_.hide()))}),[p,e,t]),(0,i.useLayoutEffect)((()=>((async()=>{const e=c.current;e?l.current=!1:(b(!0),P(!1));const t=s.current;if((a||n)&&t&&!l.current){l.current=!0,d(!1),E(null);try{const e=await r.LottieManager.loadAnimation({containers:[t],..._});e.addEventListener("enterFrame",(()=>{requestAnimationFrame((()=>{P(!0)}))}),{once:!0}),e.addEventListener("destroy",(()=>{P(!1)}),{once:!0}),b(!1),c.current=e}catch(_){d(!0),E(_)}m()&&e?.destroy()}})(),()=>{c.current?.destroy()})),[a,n]);return{lottieError:w,lottieLoading:p,lottieLoaded:!p&&!w,lottieRendered:k,lottiePlayerRef:c,lottieContainerRef:s,lottieErrorMessage:u}}},559285:(_,e,t)=>{t.d(e,{AnimationLayer:()=>n});var o=t(474848),i=t(296540),r=t(355790),a=t(767310);const n=({layer:_,animationState:e,onAnimationPlayBackAreaLoaded:t,onAnimationPlayBackAreaFinished:n,...l})=>{const s=(0,r.isMainAnimationLayout)(_),[c,w]=(0,i.useState)(!1);return c?null:(0,o.jsx)(o.Fragment,{children:s&&(0,o.jsx)(a.MainAnimationLayout,{layer:_,onFirstFrameRender:()=>{e.markStateAsPlaying()},onAnimationLoaded:()=>{t(),e.markStateAsLoaded()},onLayerLoopCompleted:()=>{c||(n(),e.markStateAsFinished(),w(!0))},...l})})}},159824:(_,e,t)=>{t.d(e,{LottiePlayer:()=>u});var o=t(474848),i=t(327813),r=t(456921),a=t(8520),n=t(930095),l=t(296540),s=t(657112),c=t(355790),w=t(704564),d=t(172469);const u=(0,r.observer)((({layer:_,style:e,onAnimationLoaded:t,onFirstFrameRender:r,onLayerLoopCompleted:u})=>{const{popupStore:E}=(0,w.usePopupStickerWithError)(),p=(0,l.useRef)(0),b=(0,l.useRef)(!1),{isPlaying:k,onAnimationClick:P,lottiePlayer:{options:m}}=E,{onLottiePlayerError:D}=E.errorHandlers,{lottieContainerRef:h,lottiePlayerRef:O,lottieLoaded:M,lottieRendered:L,lottieErrorMessage:C}=(0,n.useLottie)({group:s.POPUP_LOTTIE_GROUP,animationUrl:_.url,...m},{play:k}),R=()=>{b.current||(u(),b.current=!0)};return(0,l.useEffect)((()=>{const _=O.current;_&&_.setOptions(m)}),[m]),(0,l.useEffect)((()=>{C&&(_=>{D?.(_),R()})(C)}),[C,D]),(0,l.useEffect)((()=>{const _=O.current;if(_)return t&&_.addEventListener("ready",t,{once:!0}),r&&_.addEventListener("firstFrame",r,{once:!0}),()=>{r&&_.removeEventListener("firstFrame",r),t&&_.removeEventListener("ready",t)}}),[M]),(0,l.useEffect)((()=>{const _=O.current;if(_)return _.addEventListener("destroy",R,{once:!0}),()=>{b.current&&_.removeEventListener("destroy",R)}}),[L]),(0,l.useEffect)((()=>{const e=O.current;if(!e)return;const t=(0,c.getAnimationLayerLoopsLimit)(_),o=()=>{if(p.current+=1,p.current===t)return R(),void e.removeEventListener("loopComplete",o)};return e.addEventListener("loopComplete",o),()=>{e.removeEventListener("loopComplete",o)}}),[M]),(0,o.jsx)("div",{onClick:_=>{P?.(_)},className:(0,a.classNames)(d.default.wrapper,{[d.default.wrapperClickable]:Boolean(P)&&m.speed!==s.SPEED_ON_DESTROY}),style:(0,i.toJS)(e),ref:h})}))},767310:(_,e,t)=>{t.d(e,{MainAnimationLayout:()=>r});var o=t(474848),i=t(159824);const r=({layer:_,popUpLayerStyle:e,onAnimationLoaded:t,onFirstFrameRender:r,onLayerLoopCompleted:a})=>(0,o.jsx)(i.LottiePlayer,{layer:_,style:e,onAnimationLoaded:t,onFirstFrameRender:r,onLayerLoopCompleted:a})},720509:(_,e,t)=>{t.d(e,{NonAnimationLayer:()=>l});var o=t(474848),i=t(296540),r=t(355790),a=t(696701),n=t(630517);const l=({layer:_,parentState:e,popUpLayerStyle:t})=>{const l=(0,r.isGradientLayer)(_),s=(0,r.isBackgroundLayer)(_),[c,w]=(0,i.useState)(!e);return(0,i.useEffect)((()=>{if(!e)return;const _=()=>{w(!1)},t=()=>{w(!0)};return e.listenable.once("onPlaying",t),e.listenable.once("onFinished",_),()=>{e.listenable.off("onPlaying",t),e.listenable.off("onFinished",_)}}),[]),c?(0,o.jsxs)(o.Fragment,{children:[l&&(0,o.jsx)(a.GradientLayer,{popUpLayerStyle:t}),s&&(0,o.jsx)(n.BackgroundLayer,{popUpLayerStyle:t})]}):null}},630517:(_,e,t)=>{t.d(e,{BackgroundLayer:()=>r});var o=t(474848),i=t(372434);const r=({popUpLayerStyle:_})=>(0,o.jsx)("div",{className:i.default.wrapper,style:_})},696701:(_,e,t)=>{t.d(e,{GradientLayer:()=>r});var o=t(474848),i=t(558850);const r=({popUpLayerStyle:_})=>(0,o.jsx)("div",{style:_,className:i.default.wrapper})},862739:(_,e,t)=>{t.d(e,{PlayBackArea:()=>s});var o=t(474848),i=t(327813),r=t(559285),a=t(720509),n=t(355790),l=t(368730);const s=({layer:_,popUpLayerStyle:e,animationState:t,onAnimationPlayBackAreaFinished:s,onAnimationPlayBackAreaLoaded:c,style:w,...d})=>{const u=(0,n.isAnimationLayer)(_);return(0,o.jsx)("div",{className:l.default.wrapper,style:(0,i.toJS)(w),...d,children:(0,o.jsxs)("div",{className:l.default.area,children:[u&&t&&(0,o.jsx)(r.AnimationLayer,{layer:_,animationState:t,popUpLayerStyle:e,onAnimationPlayBackAreaLoaded:c,onAnimationPlayBackAreaFinished:s}),!u&&(0,o.jsx)(a.NonAnimationLayer,{layer:_,parentState:t,popUpLayerStyle:e})]})})}},136949:(_,e,t)=>{t.d(e,{PopUpPortal:()=>w});var o=t(474848),i=t(327813),r=t(440961),a=t(296540),n=t(456921),l=t(862739),s=t(704564),c=t(355790);const w=(0,n.observer)((({portalElement:_=document.body})=>{const e=(0,a.useRef)(0),t=(0,a.useRef)(0),{popupStore:n}=(0,s.usePopupStickerWithError)(),w=n.playBackAreasProps.filter((({layer:_})=>(0,c.isAnimationLayer)(_))).length,d=()=>{e.current++,e.current===w&&(e.current=0,t.current=0,n.onEndPlay?.())},u=()=>{t.current++,t.current===w&&n.startPlay()};if(!n.playBackAreasProps.length)return null;const E=(0,i.toJS)(n.playBackAreasProps).map((({style:_,popUpLayerStyle:e,...t},r)=>(0,o.jsx)(l.PlayBackArea,{onAnimationPlayBackAreaLoaded:u,onAnimationPlayBackAreaFinished:d,style:(0,i.toJS)(_),popUpLayerStyle:(0,i.toJS)(e),...t},r)));return(0,r.createPortal)(E,_||document.body)}))},697033:(_,e,t)=>{t.d(e,{PopupProvider:()=>n});var o=t(474848),i=t(296540),r=t(704564),a=t(920641);const n=({popupStore:_,children:e})=>{const t=(0,i.useRef)(_??new a.PopupStickerService);return(0,o.jsx)(r.PopupContext.Provider,{value:{popupStore:t.current},children:e})}},704564:(_,e,t)=>{t.d(e,{PopupContext:()=>i,usePopupSticker:()=>a,usePopupStickerWithError:()=>r});var o=t(296540);const i=(0,o.createContext)(null);function r(){const _=(0,o.useContext)(i);if(null===_)throw new Error("You have forgotten to wrap your root component with PopupProvider");return _}function a(){const _=(0,o.useContext)(i);return null===_?{popupStore:void 0}:_}},657112:(_,e,t)=>{t.d(e,{CONTAINER_ID_DATASET_PROPERTY:()=>l,CONTAINER_ID_DATA_DEFAULT_VALUE:()=>r,CONTAINER_ID_DATA_PROPERTY:()=>n,ConflictActionsTypes:()=>f,CustomPopUpLayerTypes:()=>D,DEDUCTIBLE_DATA_PROPERTY:()=>w,DEDUCTIBLE_FULL_SCREEN_DATA_PROPERTY:()=>d,DEFAULT_LOOP_LIMIT:()=>O,DEFAULT_PLAYER_OPTIONS:()=>k,DEFAULT_POPUP_CONTAINER_DATA_PROPERTY:()=>u,DEFAULT_POSITION_X:()=>L,DEFAULT_POSITION_Y:()=>C,DEFAULT_SCALE_RATIO:()=>M,FULL_SCREEN_CONTAINER_DATA_PROPERTY:()=>c,FULL_SCREEN_DATA_DEFAULT_VALUE:()=>a,MIN_SIZE_FOR_PLAY:()=>T,MIN_SIZE_FOR_SCALE:()=>R,POPUP_LOTTIE_GROUP:()=>g,POPUP_POSITION_DEFAULT_VALUE:()=>p,POPUP_POSITION_PROPERTY:()=>E,POPUP_STICKER_IM_CONTAINER:()=>s,PopUpLayerTypes:()=>m,PopUpPositionTypes:()=>h,SCREEN_MODIFICATOR:()=>b,SPEED_ON_DESTROY:()=>P});var o=t(995385),i=t(179739);const r="common_container",a="body",n="data-popup-sticker-container-id",l=(0,i.dataAttrKeyToDatasetKey)(n),s="popup-sticker-im-container",c="data-popup-sticker-full-screen-container",w="data-popup-sticker-deductible",d="data-popup-sticker-deductible-full-screen",u="data-popup-sticker-use-common",E="data-popup-sticker-position",p="fixed",b="screen",k={speed:1,loop:!0,autoplay:!1,cache:!0,lazyLoading:!0,direction:o.LottiePlayerDirection.FORWARD,strictCache:!0},P=3,m={Gradient:"gradient",FullScreen:"animation_fullscreen",Fixed:"animation_fixed"},D={Background:"background"},h={FullScreen:"fullscreen",Fixed:"fixed",TopFullScreen:"topFullScreen"},O=1,M=1,L="center",C="middle",R=384,T=64,g="Popup",f={ChangeModificator:"changeModificator",DontShow:"dontShow"}},128584:(_,e,t)=>{t.d(e,{AnimationState:()=>w});var o=t(434518),i=t(763812),r=t(919225);const a="preparing",n="loaded",l="playing",s="finished";var c=(0,i._)("_status");class w extends r.Emitter{get status(){return(0,o._)(this,c)[c]}constructor(){super(),Object.defineProperty(this,c,{writable:!0,value:void 0}),(0,o._)(this,c)[c]=a,this.markStateAsLoaded=()=>{(0,o._)(this,c)[c]=n,this.emit("onLoaded")},this.markStateAsPlaying=()=>{(0,o._)(this,c)[c]=l,this.emit("onPlaying")},this.markStateAsFinished=()=>{(0,o._)(this,c)[c]=s,this.emit("onFinished")}}}},387714:(_,e,t)=>{t.d(e,{checkPositionConflict:()=>a});var o=t(355790),i=t(845610),r=t(657112);const a=(_,{bottom:e,right:t,top:a,left:n},l)=>{const s={...l};for(const c of _){if(c.popUpPositions&&!c.popUpPositions.includes((0,i.getPopUpPositionType)(l)))continue;const _=document.querySelector(c.blockSelector);if(!_)continue;const w=_.getBoundingClientRect();if(n<=w.right&&t>=w.left&&a<=w.bottom&&e>=w.top)return c.action===r.ConflictActionsTypes.DontShow?null:(0,o.changeLayerPosition)(s)}return s}},522932:(_,e,t)=>{t.d(e,{createDestroyListeners:()=>o,setDestroyListeners:()=>i});const o=_=>{const e=_=>{document.removeEventListener("wheel",_),document.removeEventListener("touchmove",_),window.removeEventListener("resize",_)},t=()=>{e(t),_()};return{addDestroyListener:()=>{document.addEventListener("wheel",t,{once:!0}),document.addEventListener("touchmove",t,{once:!0}),window.addEventListener("resize",t,{once:!0})},removeDestroyListener:e.bind(void 0,t),handleDestroy:t}},i=(_,e)=>({..._,onEndPlay:()=>{e.removeDestroyListener(),_.onEndPlay?.()},onEndPrepare:t=>{t&&e.addDestroyListener(),_.onEndPrepare?.(t)},onAnimationClick:t=>{e.handleDestroy(),_.onAnimationClick?.(t)}})},810263:(_,e,t)=>{t.d(e,{getAnimationAreaStyle:()=>r});var o=t(657112),i=t(355790);const r=({width:_,height:e},t,r)=>{const a={...r},{position_y:n,position_x:l}=(0,i.getAnimationLayerPosition)(t),s=l.replace(o.SCREEN_MODIFICATOR,"").trim(),c=n.replace(o.SCREEN_MODIFICATOR,"").trim();return a.position="absolute","center"===s?(a.left=.5*_,a.transform="translateX(-50%)"):a.left="left"===s?0:_-parseInt(a.width),"middle"===c?(a.top=.5*e,a.transform="translateY(-50%)"):a.top="top"===c?0:e-parseInt(a.height),"middle"===c&&"center"===s&&(a.transform="translate(-50%, -50%)"),a}},504846:(_,e,t)=>{t.d(e,{getBasePropsForPlaybackAreas:()=>w});var o=t(128584),i=t(845610),r=t(44306),a=t(410673),n=t(810263),l=t(387714),s=t(355790);function c(_,e,t,w){if((0,s.isGradientLayer)(_)){if(!w)return null;const e={...w.popUpLayerStyle,top:"unset",left:"unset",transform:"unset"};return{layer:_,style:w.style,animationState:w.animationState,popUpLayerStyle:(0,a.getGradientAreaStyle)(_,e)}}const d=(0,i.getPopUpPositionType)(_),{playBackAreaStyle:u,topByViewport:E}=(0,r.getPlayBackAreaStyle)(d,e);if((0,s.isBackgroundLayer)(_))return{layer:_,style:u,popUpLayerStyle:_.style};const p=new o.AnimationState;if((0,s.isBackgroundAnimationLayout)(_))return null;const b=parseInt(u.width),k=parseInt(u.height);let P=Math.min(b,k);const m=(0,s.getAnimationLayerScaleRatio)(_);if((0,s.isCanScale)(P)&&(P*=m),(0,s.isFullScreenLayer)(_)){const _=.5*Math.min(document.documentElement.clientHeight,document.documentElement.clientWidth);P>_&&(P=_)}if(!(0,s.isCanPlay)(P))return null;const D={height:P,width:P},h=(0,n.getAnimationAreaStyle)({width:b,height:k},_,D),O=E+parseInt(h.top),M=E+parseInt(h.left),L=O+P,C=M+P,R=(0,l.checkPositionConflict)(t,{top:O,left:M,bottom:L,right:C},_);return R?(0,s.checkPositionIsEqual)(_,R)?{animationState:p,layer:_,popUpLayerStyle:h,style:u}:c(R,e,[],null):null}const w=({layers:_,popUpElements:e,conflictBlocks:t})=>{const o=[..._].reverse(),i=[];let r=null;for(const _ of o){const o=c(_,e,t,r);(0,s.isMainAnimationLayout)(_)&&(r=o),(0,s.isGradientLayer)(_)&&(r=null),o&&i.push(o)}return i.reverse(),i}},302091:(_,e,t)=>{t.d(e,{findFixedElement:()=>n,getDataAttrs:()=>i,getDeductibleDataAttrs:()=>a,getPopupElementsFromFixedElement:()=>s,getStringDataAttrs:()=>r});var o=t(657112);const i=_=>{const{popupStickerUseCommon:e="false",popupStickerContainerId:t,popupStickerFullScreenContainer:i,popupStickerPosition:r=o.POPUP_POSITION_DEFAULT_VALUE}=_,a={[o.DEFAULT_POPUP_CONTAINER_DATA_PROPERTY]:e,[o.POPUP_POSITION_PROPERTY]:r,[o.CONTAINER_ID_DATA_PROPERTY]:t};return i&&(a[o.FULL_SCREEN_CONTAINER_DATA_PROPERTY]=i),a},r=_=>{let e="";const t=i(_);return Object.entries(t).forEach((([_,t])=>{e+=`${_}='${t}' `})),e.trim()},a=_=>{const{popupStickerDeductible:e,popupStickerDeductibleFullScreen:t}=_,i={};return e&&(i[o.DEDUCTIBLE_DATA_PROPERTY]=e),t&&(i[o.DEDUCTIBLE_FULL_SCREEN_DATA_PROPERTY]=t),i},n=_=>_.closest(`[${o.CONTAINER_ID_DATA_PROPERTY}]`)||document.body;function l(_,e,t,i,r,a=null){let n=[...document.querySelectorAll(`[${e}=${i}]`)];switch(r&&(n=[...n,...document.querySelectorAll(`[${e}=${o.CONTAINER_ID_DATA_DEFAULT_VALUE}]`)]),n.push(t),_){case"lower":case"parent":n=n.sort(((_,e)=>_.getBoundingClientRect().top-e.getBoundingClientRect().top));break;case"upper":n=n.sort(((_,e)=>_.getBoundingClientRect().bottom-e.getBoundingClientRect().bottom))}const l=n.findIndex((_=>_===t));let s;switch(_){case"upper":case"parent":s=n[l-1]||null;break;case"lower":s=n[l+1]||null;break;default:s=n[0]||null}return s||a}const s=(_,e)=>{const{popupStickerContainerId:t,popupStickerPosition:i,popupStickerUseCommon:r}=(_=>{const{popupStickerUseCommon:e="false",popupStickerPosition:t=o.POPUP_POSITION_DEFAULT_VALUE,popupStickerContainerId:i=o.CONTAINER_ID_DATA_DEFAULT_VALUE}=_.dataset;return{popupStickerContainerId:i,popupStickerUseCommon:e,popupStickerPosition:t}})(_);let a="true"===r;return{fixedElement:_,headerElement:l("upper",o.DEDUCTIBLE_DATA_PROPERTY,e,t,a),footerElement:l("lower",o.DEDUCTIBLE_DATA_PROPERTY,e,t,a),fullScreenElement:l("parent",o.FULL_SCREEN_CONTAINER_DATA_PROPERTY,e,t,a,document.body),fullScreenHeaderElement:l("upper",o.DEDUCTIBLE_FULL_SCREEN_DATA_PROPERTY,e,t,a),fullScreenFooterElement:l("lower",o.DEDUCTIBLE_FULL_SCREEN_DATA_PROPERTY,e,t,a),position:i}}},410673:(_,e,t)=>{t.d(e,{getGradientAreaStyle:()=>n});var o=t(657112);const i={bottom:"0deg",left:"90deg",top:"180deg",right:"270deg"},r="255, 255, 255",a=`radial-gradient(50.13% 50.13% at 50.13% 50.13%, rgba(${r}, 0.4) 0%, rgba(${r}, 0) 100%)`,n=({position:_},e)=>{const t={position:"absolute"},r=_.replace(`${o.SCREEN_MODIFICATOR} `,"");return"middle"===r?(t.top="50%",t.left="50%",t.transform="translate(-50%, -50%)",t.background=a,{...e,...t}):(["top","bottom"].includes(r)?t.width="100%":t.height="100%",t[r]=0,t["--gradient-deg"]=i[r]||i.top,{...e,...t})}},44306:(_,e,t)=>{t.d(e,{getPlayBackAreaStyle:()=>i});var o=t(657112);function i(_,{fullScreenHeaderElement:e,fullScreenFooterElement:t,fullScreenElement:i,fixedElement:r,footerElement:a,headerElement:n,position:l}){const s=_===o.PopUpPositionTypes.FullScreen,{top:c,left:w,bottom:d}=i.getBoundingClientRect(),u=s?i:r,{top:E,bottom:p,left:b,width:k}=u.getBoundingClientRect(),{bottom:P}=n?.getBoundingClientRect()||{bottom:-1/0},{bottom:m}=e?.getBoundingClientRect()||{bottom:-1/0},D=Math.max(P,E)<0,h=_===o.PopUpPositionTypes.TopFullScreen||D,O=!s&&!h,M=O?P:m,L=s?t:a,C=L?.getClientRects().length,{top:R}=L&&C?L.getBoundingClientRect():{top:1/0};let T=0;"absolute"===l&&(T=-c);const g=[];M>0&&g.push(T+M),O&&E>=0&&g.push(T+E),c<0&&g.push(T);const f=Math.max(...g,0),A=i===document.body?document.documentElement.clientHeight:function(_){return Math.min(_,document.documentElement.clientHeight)}(d),W=[T+A,u===document.body?document.documentElement.clientHeight:T+p,T+R],y=Math.min(...W)-f,I=function(_){return Math.min(_,document.documentElement.clientWidth)}(k),v=b-w,B={position:l};B.top=`${f}px`,B.left=`${v}px`,B.width=`${I}px`,B.height=`${y}px`;return{playBackAreaStyle:B,topByViewport:f-T}}},845610:(_,e,t)=>{t.d(e,{getPopUpPositionType:()=>r});var o=t(355790),i=t(657112);function r(_){return(0,o.isFullScreenLayer)(_)?i.PopUpPositionTypes.FullScreen:(0,o.isTopFullScreenLayer)(_)?i.PopUpPositionTypes.TopFullScreen:i.PopUpPositionTypes.Fixed}},355790:(_,e,t)=>{t.d(e,{changeLayerPosition:()=>p,checkPositionIsEqual:()=>b,getAnimationLayerLoopsLimit:()=>r,getAnimationLayerPosition:()=>i,getAnimationLayerScaleRatio:()=>a,isAnimationLayer:()=>w,isBackgroundAnimationLayout:()=>s,isBackgroundLayer:()=>l,isCanPlay:()=>P,isCanScale:()=>k,isFullOrPartiallyFullScreenLayer:()=>E,isFullScreenLayer:()=>u,isGradientLayer:()=>n,isMainAnimationLayout:()=>c,isTopFullScreenLayer:()=>d});var o=t(657112);const i=_=>{const{position_x:e,position_y:t}=_;return{position_x:e||o.DEFAULT_POSITION_X,position_y:t||o.DEFAULT_POSITION_Y}},r=_=>{const{loops_limit:e=o.DEFAULT_LOOP_LIMIT}=_;return e},a=_=>{const{scale_ratio:e=o.DEFAULT_SCALE_RATIO}=_;return e},n=_=>_.type===o.PopUpLayerTypes.Gradient,l=_=>_.type===o.CustomPopUpLayerTypes.Background,s=_=>_.type===o.PopUpLayerTypes.FullScreen,c=_=>_.type===o.PopUpLayerTypes.Fixed,w=_=>s(_)||c(_),d=_=>{if(!c(_))return!1;const{position_x:e,position_y:t}=i(_);return!e.includes(o.SCREEN_MODIFICATOR)&&t===`${o.SCREEN_MODIFICATOR} top`},u=_=>{if(l(_)||s(_))return!0;if(n(_))return _.position.includes(o.SCREEN_MODIFICATOR);if(c(_)){const{position_x:e,position_y:t}=i(_);return e.includes(o.SCREEN_MODIFICATOR)&&t.includes(o.SCREEN_MODIFICATOR)}return!1},E=_=>u(_)||d(_),p=_=>{const{position_x:e,position_y:t}=i(_);return E(_)?{..._,position_x:e.replace(`${o.SCREEN_MODIFICATOR} `,""),position_y:t.replace(`${o.SCREEN_MODIFICATOR} `,"")}:{..._,position_x:`${o.SCREEN_MODIFICATOR} ${e}`,position_y:`${o.SCREEN_MODIFICATOR} ${t}`}},b=(_,e)=>w(_)&&w(e)?e.position_y===_.position_y&&_.position_x===e.position_x:!(!n(_)||!n(e))&&e.position===_.position,k=_=>_>=o.MIN_SIZE_FOR_SCALE,P=_=>_>=o.MIN_SIZE_FOR_PLAY},792045:(_,e,t)=>{t.d(e,{addConflictBlocksNative:()=>d,destroyByRemoveEventNative:()=>E,destroyBySpeedIncrementEventNative:()=>u,handlePlayPopUpNative:()=>w});var o=t(474848),i=t(205338),r=t(942451),a=t(136949),n=t(697033),l=t(920641),s=t(657112);const c=(0,r.makeSharedState)("sticker-popup",(()=>new l.PopupStickerService),{version:2})();function w({stickerElement:_,layers:e,onEndPlay:t,containersIdsToMountIn:r,zIndexMountNode:l,...w}){const d=document.createElement("div");let u;c.prepare({stickerElement:_,layers:e,mountNode:()=>{const e=_.closest(`[${s.CONTAINER_ID_DATA_PROPERTY}]`),t=e??document.body,{popupFullScreenSelector:w=s.FULL_SCREEN_DATA_DEFAULT_VALUE}=t.dataset,E=e?.dataset[s.CONTAINER_ID_DATASET_PROPERTY]&&r?.[e.dataset[s.CONTAINER_ID_DATASET_PROPERTY]],p=E?e:document.querySelector(w)??document.body;E&&(d.style.zIndex=String(l??2),d.style.position="relative"),p.prepend(d),u=(0,i.createRoot)(d),u.render((0,o.jsx)(n.PopupProvider,{popupStore:c,children:(0,o.jsx)(a.PopUpPortal,{portalElement:d})}))},onEndPlay:()=>{t?.(),u?.unmount(),d.remove()},...w})}function d(_){c.conflictBlocks.addConflictBlock(_)}function u(){c.destroyBySpeedIncrement()}function E(){c.destroyByRemove()}},435268:(_,e,t)=>{t.d(e,{LottiePlayer:()=>r});var o=t(327813),i=t(657112);class r{constructor(){this.options={...i.DEFAULT_PLAYER_OPTIONS},this.setOptions=_=>{this.options=_},this.setOption=({key:_,value:e})=>{typeof this.options[_]==typeof e&&(this.options={...this.options,[_]:e})},this.reset=()=>{this.options={...i.DEFAULT_PLAYER_OPTIONS}},(0,o.makeAutoObservable)(this)}}},920641:(_,e,t)=>{t.d(e,{PopupStickerService:()=>w});var o=t(327813),i=t(435268),r=t(970250),a=t(522932),n=t(504846),l=t(302091),s=t(657112),c=t(377803);class w{constructor(){this.isPlaying=!1,this.isPreparing=!1,this.playBackAreasProps=[],this.onAnimationClick=null,this.onEndPlay=null,this.onEndPrepare=null,this.errorHandlers={},this.conflictBlocks=new r.PositionConflict,this.lottiePlayer=new i.LottiePlayer,this.setLottiePlayerOptions=_=>{this.isPlaying&&this.lottiePlayer.setOptions(_)},this.setLottiePlayerOption=_=>{this.isPlaying&&this.lottiePlayer.setOption(_)},this.preparePreview=_=>{const e=_.layers.slice();e.unshift({type:s.CustomPopUpLayerTypes.Background,style:{opacity:"0.9",background:c.default.colorBackgroundModal.normal.value}}),this.prepare({..._,layers:e})},this.prepareWithDestroyEvent=_=>{const e=(0,a.createDestroyListeners)(this.destroyBySpeedIncrement.bind(this));this.prepare((0,a.setDestroyListeners)(_,e))},this.prepare=({layers:_,stickerElement:e,onEndPrepare:t=null,onEndPlay:o=null,onAnimationClick:i=null,errorHandlers:r,mountNode:a})=>{if(this.isPlaying||this.isPreparing)throw t?.(!1),new Error("Pop-up stickers are already playing");this.isPreparing=!0;const s=(0,l.findFixedElement)(e),c=(0,l.getPopupElementsFromFixedElement)(s,e),w=(0,n.getBasePropsForPlaybackAreas)({layers:_,popUpElements:c,conflictBlocks:this.conflictBlocks.blocks}),d=Boolean(w.length),u=()=>{this.reset(),o?.()};this.onEndPrepare=t,this.onEndPlay=u,this.onAnimationClick=i,d&&a?.(),this.playBackAreasProps=w,r&&(this.errorHandlers=r),d||(t?.(!1),u())},this.destroyBySpeedIncrement=()=>{this.setLottiePlayerOption({key:"speed",value:s.SPEED_ON_DESTROY})},this.destroyByRemove=()=>{this.onEndPlay?this.onEndPlay():this.reset()},this.startPlay=()=>{this.isPlaying=!0,this.isPreparing=!1,this.onEndPrepare?.(!0)},this.reset=()=>{this.isPlaying=!1,this.isPreparing=!1,this.playBackAreasProps=[],this.onEndPlay=null,this.onAnimationClick=null,this.onEndPrepare=null,this.errorHandlers={},this.lottiePlayer.reset()},(0,o.makeAutoObservable)(this)}}},970250:(_,e,t)=>{t.d(e,{PositionConflict:()=>i});var o=t(327813);class i{constructor(){this.blocks=[],this.addConflictBlock=_=>{this.blocks.push(_)},this.removeConflictBlockBySelector=_=>{this.blocks.filter((e=>e.blockSelector===_))},(0,o.makeAutoObservable)(this)}}},179739:(_,e,t)=>{t.d(e,{dataAttrKeyToDatasetKey:()=>o});const o=_=>_.slice(5).split("-").map(((_,e)=>0!==e?_.charAt(0).toUpperCase()+_.slice(1):_)).join("")},749613:(_,e,t)=>{t.d(e,{CaptchaType:()=>o,createCaptchaPopupService:()=>s});var o,i=t(32489),r=t(293721),a=t(418562),n=t(311606),l=t(884415);!function(_){_[_.IMAGE=0]="IMAGE",_[_.AUDIO=1]="AUDIO"}(o||(o={}));const s=()=>{const _=(0,r.createGate)(),e=(0,i.createEvent)(),t=(0,i.createEvent)(),o=(0,i.createEvent)(),s=(0,i.createEvent)(),c=(0,i.createEvent)(),w=(0,i.createEvent)(),d=(0,i.createEvent)(),u=(0,i.createEvent)(),E=(0,i.createEvent)(),p=(0,i.createEvent)(),b=(0,i.createEvent)();(0,i.forward)({from:_.close,to:b});const k=(0,i.createStore)("");k.on(_.open,((_,{captchaImage:e})=>e));const P=(0,i.createStore)("");P.on(_.open,((_,{captchaTrack:e})=>e));const m=(0,i.createStore)("");m.on(_.open,((_,{deviceId:e})=>e));const D=(0,i.createStore)(null);D.on(_.open,(()=>"CAPTCHA_MODAL_ACTIVE")),D.on(p,(()=>null));const h=(0,i.createStore)(null);h.on(_.open,((_,e)=>e.platform));const O=(0,i.createStore)("");O.reset(_.close),O.on(_.open,((_,{sid:e})=>e));const M=(0,i.createStore)("");M.reset(_.close),M.on([d,u],(()=>(0,a.default)()));const L=(0,i.createStore)(0);L.on(w,(_=>_+1)),L.reset(_.close);const C=(0,i.createStore)("");C.reset(_.close),C.on(e,((_,e)=>e));const R=(0,i.createStore)(!0);R.reset([_.close,w,d]),R.on(s,(()=>!0)),R.on(d,(()=>!0)),R.on(c,(()=>!1)),R.on(E,(()=>!1));const T=(0,i.createStore)(0);T.on(w,(_=>0===_?1:0));const g=(0,i.createStore)(!1);g.reset(_.close),g.on(t,(()=>!0)),g.on(o,(()=>!1));const f=(0,i.createStore)(!1);f.reset([_.close,w,d,u]),f.on(E,(()=>!0));const A=(0,i.createStore)("");A.reset([_.close,d]);const W=(0,i.createStore)(0);W.reset([_.close,b]),W.on([d,w],(()=>5));const{tick:y,isRunning:I}=(0,n.interval)({timeout:1e3,start:(0,i.merge)([d,w]),stop:b});W.on(y,(_=>_-1));const v=(0,i.createStore)(!1);v.reset(_.close);const B=(0,i.createStore)(!1);B.reset(_.close);const U=(0,i.createStore)(!0);U.reset(_.close),U.on(e,((_,e)=>""===e.trim()));const K=(0,i.createStore)(!0);return K.reset(_.close),K.on(w,(()=>!1)),(0,i.sample)({source:W,filter:_=>0===_,target:b}),(0,i.sample)({source:{isAudioPlaying:g,refreshCountdownRunning:I},fn:({isAudioPlaying:_,refreshCountdownRunning:e})=>_||e,target:[v,B]}),(0,i.sample)({clock:[_.open,u,w],source:{sid:O,hash:M,type:T,swapCount:L,platform:h,captchaImage:k,captchaTrack:P,deviceId:m,isFirst:K},fn:_=>(0,l.getCaptchaLink)(_),target:A}),(0,i.sample)({clock:d,source:{sid:O,hash:M,type:T,swapCount:L,platform:h,captchaImage:k,captchaTrack:P,deviceId:m},fn:_=>(0,l.getCaptchaLink)({..._,isRefresh:!0}),target:A}),{Gate:_,answerChanged:e,audioPlaying:t,audioPaused:o,captchaLoadingStarts:s,captchaLoadingEnds:c,captchaTypeToggled:w,captchaRefreshed:d,captchaReloaded:u,captchaLoadingErrorSet:E,closeCaptcha:p,$answer:C,$captchaLoading:R,$captchaType:T,$isAudioPlaying:g,$hasLoadCaptchaError:f,$captchaSrc:A,$refreshCountdown:W,$isRefreshButtonDisabled:v,$isCaptchaTypeToggleDisabled:B,$isSubmitButtonDisabled:U,$isCaptchaModalActive:D}}},161882:(_,e,t)=>{t.d(e,{CaptchaType:()=>o.CaptchaType,Platform:()=>i.Platform,createCaptchaPopupService:()=>o.createCaptchaPopupService});var o=t(749613),i=t(884415)},884415:(_,e,t)=>{t.d(e,{Platform:()=>o,getCaptchaLink:()=>a});var o,i=t(749613),r=t(105352);!function(_){_[_.VK_WEB=0]="VK_WEB",_[_.VK_M_WEB=1]="VK_M_WEB"}(o||(o={}));const a=({sid:_,hash:e,type:t,isRefresh:o,swapCount:a,platform:n,isFirst:l,captchaImage:s,captchaTrack:c,deviceId:w})=>{const d=e?`&v=${e}`:"",u=o?"&refresh=1":"",E=!o&&a>0?"&swap_type=1":"",p=l?"&first=1":"";let b;switch(n){case 0:default:b=r.VK_WEB_APP_ID;break;case 1:b=r.VK_MVK_APP_ID}switch(t){case i.CaptchaType.IMAGE:{let e="";if(s){const _=new URLSearchParams(s);e=_.has("device_id")?_.has("device_id")&&_.get("device_id")?`${s}&s=1&width=400&resized=1`:`${s.replace("device_id=",`device_id=${w}`)}&s=1&width=400&resized=1`:`${s}&resized=1&width=400&app_id=${b}&device_id=${w}`}else e=`/captcha.php?sid=${_}&s=1&resized=1&width=400&app_id=${b}&device_id=${w}`;return`${e}${d}${u}${E}${p}`}case i.CaptchaType.AUDIO:{let e="";if(c){const _=new URLSearchParams(c);e=_.has("device_id")?_.has("device_id")&&_.get("device_id")?`${c}`:`${c.replace("device_id=",`device_id=${w}`)}`:`${c}&app_id=${b}&device_id=${w}`}else e=`/sound_captcha.php?act=get&captcha_sid=${_}&app_id=${b}&device_id=${w}`;return`${e}${d}${u}${E}${p}`}default:return""}}},745910:(_,e,t)=>{t.d(e,{popupDestroyByRemoveEventNative:()=>r});var o=t(792045),i=t(805088);const r=()=>{(0,i.isPopUpStickersEnabled)()&&(0,o.destroyByRemoveEventNative)()}},186301:(_,e,t)=>{t.d(e,{handleCaptcha:()=>a});var o=t(20025),i=t(476726),r=t(816475);const a=_=>new Promise((e=>{if((0,i.partConfigEnabled)("vkcom_audio_captcha_enabled"))(0,r.showCaptchaPopup)({sid:_.captcha_sid,isRefreshEnabled:_.is_refresh_enabled,isSoundCaptchaAvailable:_.is_sound_captcha_available,isUiuxChangesEnabled:_.uiux_changes,captcha_track:_.captcha_track,captcha_img:_.captcha_img,onSubmit:(t,o)=>{e({captcha_sid:_.captcha_sid,captcha_key:t,is_sound_captcha:o})}});else{let t=null;const r=(0,i.partConfigEnabled)("vkcom_captcha_resized")?`${_.captcha_img}&resized=1&width=400`:_.captcha_img,a=_?.is_refresh_enabled||!1,n={imgSrc:r,onSubmit:(_,o)=>{e({captcha_sid:_,captcha_key:o,is_sound_captcha:0}),t&&t.hide()}};t=(0,o.showCaptchaBox)(_.captcha_sid,!1,null,n,a)}}))},816475:(_,e,t)=>{t.d(e,{showCaptchaPopup:()=>o.showCaptchaPopup});var o=t(766338)},506537:(_,e,t)=>{t.d(e,{CaptchaType:()=>o.CaptchaType,Platform:()=>o.Platform,captchaPopupService:()=>i});var o=t(161882);const i=(0,o.createCaptchaPopupService)()},766338:(_,e,t)=>{t.d(e,{showCaptchaPopup:()=>a});var o=t(474848),i=t(272259),r=t(121939);function a(_){(0,i.showMessageBoxModal)((e=>(0,o.jsx)(r.CaptchaPopup,{...e,..._,onClose:()=>{_.onClose&&_.onClose(),e.onClose()},onSubmit:(t,o)=>{_.onSubmit&&(_.onSubmit(t,o),e.onClose())}})),{width:300})}},705333:(_,e,t)=>{t.d(e,{CaptchaAnswerField:()=>c});var o=t(474848),i=t(296540),r=t(529558),a=t(753457),n=t(506537),l=t(610989),s=t(293721);const c=(0,i.forwardRef)((({disabled:_,captchaType:e,isUiuxChangesEnabled:t},c)=>{const w=(0,i.useRef)(null),d=(0,i.useRef)(null),u=(0,s.useStore)(n.captchaPopupService.$answer),E=(0,s.useEvent)(n.captchaPopupService.answerChanged),p=!!t&&e===n.CaptchaType.AUDIO,b=e===n.CaptchaType.IMAGE?l.getLang("vkconnect_auth_label_captcha"):t?l.getLang("vkconnect_auth_label_captcha_audio_new_ux"):l.getLang("vkconnect_auth_label_captcha_audio");return(0,i.useImperativeHandle)(c,(()=>({inputFieldRef:w,inputLabelRef:d}))),(0,o.jsx)(r.FormItem,{mode:"vertical",noPadding:!0,top:p?(0,o.jsx)("div",{tabIndex:0,ref:d,children:l.getLang("vkconnect_auth_audio_captcha_title")}):"",children:(0,o.jsx)(a.Input,{getRef:w,tabIndex:0,value:u,placeholder:b,disabled:_,onChange:_=>E(_.target.value)})})}))},473735:(_,e,t)=>{t.d(e,{CaptchaAnswerField:()=>o.CaptchaAnswerField});var o=t(705333)},90205:(_,e,t)=>{t.d(e,{CaptchaError:()=>s});var o=t(474848),i=t(753457),r=t(610989),a=t(293721),n=t(506537),l=t(765668);const s=(0,t(296540).forwardRef)((({captchaType:_},e)=>{const t=(0,a.useEvent)(n.captchaPopupService.captchaReloaded);return(0,o.jsxs)(i.Footer,{children:[(0,o.jsx)(o.Fragment,{children:_===n.CaptchaType.IMAGE?r.getLang("vkconnect_auth_captcha_loading_error_caption"):r.getLang("vkconnect_auth_audio_captcha_loading_error_caption")}),(0,o.jsx)(l.Link,{onClick:t,getRootRef:e,role:"button","aria-label":_===n.CaptchaType.IMAGE?r.getLang("vkconnect_auth_captcha_image_loading_error_retry_aria_label"):r.getLang("vkconnect_auth_captcha_sound_loading_error_retry_aria_label"),children:r.getLang("vkconnect_auth_captcha_loading_error_refresh_text")})]})}))},272247:(_,e,t)=>{t.d(e,{CaptchaError:()=>o.CaptchaError});var o=t(90205)},959179:(_,e,t)=>{t.d(e,{CaptchaInfoButton:()=>s});var o=t(474848),i=t(296540),r=t(580539),a=t(533048),n=t(234337),l=t(610989);const s=(0,i.forwardRef)((({onClick:_},e)=>(0,o.jsx)(a.Button,{getRootRef:e,tabIndex:0,appearance:"neutral",mode:"tertiary",size:"m",before:(0,o.jsx)(r.Icon24InfoCircleOutline,{className:(0,n.getColorClass)("color_icon_secondary")}),"aria-label":l.getLang("vkconnect_auth_audio_captcha_info_text"),onClick:_})))},991031:(_,e,t)=>{t.d(e,{CaptchaInfoButton:()=>o.CaptchaInfoButton});var o=t(959179)},901885:(_,e,t)=>{t.d(e,{CaptchaPopup:()=>R});var o=t(474848),i=t(296540),r=t(293721),a=t(209642),n=t(416124),l=t(785118),s=t(624338),c=t(828902),w=t(428918),d=t(757550),u=t(533048),E=t(753457),p=t(610989),b=t(476726),k=t(493192),P=t(272247),m=t(698035),D=t(707695),h=t(473735),O=t(934905),M=t(991031),L=t(725405),C=t(506537);const R=({sid:_,isRefreshEnabled:e,isSoundCaptchaAvailable:t,isUiuxChangesEnabled:R,captcha_track:T,captcha_img:g,onSubmit:f,onClose:A})=>{(0,r.useGate)(C.captchaPopupService.Gate,{sid:_,platform:C.Platform.VK_WEB,captchaTrack:T,captchaImage:g,deviceId:(0,O.getDeviceId)(C.Platform.VK_WEB)});const W=(0,b.partConfigEnabled)("vkcom_captcha_new_ux"),y=(0,r.useEvent)(C.captchaPopupService.captchaLoadingEnds),I=(0,r.useStore)(C.captchaPopupService.$hasLoadCaptchaError),v=(0,r.useStore)(C.captchaPopupService.$captchaLoading),B=(0,r.useEvent)(C.captchaPopupService.captchaLoadingErrorSet),U=(0,r.useStore)(C.captchaPopupService.$captchaType),K=(0,r.useStore)(C.captchaPopupService.$answer),S=(0,r.useStore)(C.captchaPopupService.$captchaSrc),x=(0,r.useStore)(C.captchaPopupService.$isSubmitButtonDisabled),V=(0,r.useStore)(C.captchaPopupService.$isCaptchaTypeToggleDisabled),N=(0,r.useEvent)(C.captchaPopupService.captchaTypeToggled),F=(0,r.useStore)(C.captchaPopupService.$isRefreshButtonDisabled),j=(0,r.useEvent)(C.captchaPopupService.captchaRefreshed),H=(0,r.useStore)(C.captchaPopupService.$refreshCountdown),$=(0,i.useRef)(null),z=(0,i.useRef)(null),q=(0,i.useRef)(null),Y=(0,i.useRef)(null),G=(0,i.useRef)(null),Q=(0,i.useRef)(null),X=(0,i.useRef)(null),J=(0,i.useRef)(null),Z=!!R&&U===C.CaptchaType.AUDIO,[__,e_]=(0,i.useState)(!1),t_=(0,r.useStore)(C.captchaPopupService.$isAudioPlaying),o_=(0,i.useRef)(!1),i_=_=>{_.preventDefault(),f&&f(K,Number(U===C.CaptchaType.AUDIO))},r_=(0,i.useCallback)((_=>{const e=J.current||X.current||z.current,o=q.current,i=Y.current,r=G.current,a=$?.current?.inputFieldRef.current,n=$?.current?.inputLabelRef.current,l=Q.current,{activeElement:s}=document,c=[e,o,i,r,a,n,l].includes(s)?s:e;if("Space"===_.code&&[o,i,r,l,e].some((_=>c===_))){_.preventDefault();c.click()}function w(){Z&&!i?.disabled?i?.focus():d()}function d(){r?.disabled?u():r?.focus()}function u(){Z&&n?n?.focus():E()}function E(){a?.disabled?p():a?.focus()}function p(){W||!l?.disabled?l?.focus():b()}function b(){e?.focus()}if(t&&"Tab"===_.key&&!_.shiftKey&&c)switch(_.preventDefault(),c){case e:W||!o?.disabled?o?.focus():w();break;case o:w();break;case i:d();break;case r:u();break;case n:E();break;case a:p();break;case l:b()}function k(){a?.disabled?P():a?.focus()}function P(){Z?n?.focus():m()}function m(){r?.disabled?D():r?.focus()}function D(){Z?i?.focus():h()}function h(){W||!o?.disabled?o?.focus():O()}function O(){e?.focus()}if(t&&"Tab"===_.key&&_.shiftKey&&c)switch(_.preventDefault(),c){case e:W||!l?.disabled?l?.focus():k();break;case l:k();break;case a:P();break;case n:m();break;case r:D();break;case i:h();break;case o:O()}}),[t,W,Z]);(0,i.useEffect)((()=>(document.removeEventListener("keydown",r_),document.addEventListener("keydown",r_),()=>{document.removeEventListener("keydown",r_)})),[r_]),(0,i.useEffect)((()=>{if(Z){const _=_=>{_.ctrlKey&&!t_&&J?.current?.click()};return document.addEventListener("keydown",_),()=>{document.removeEventListener("keydown",_)}}}),[Z,t_]),(0,i.useEffect)((()=>{const _=z.current;!v&&U===C.CaptchaType.IMAGE&&_&&(_.tabIndex=0,_.ariaLabel=p.getLang("vkconnect_auth_captcha_image_aria_label"),_.focus()),v||U!==C.CaptchaType.AUDIO||J.current?.focus()}),[v,U]),(0,i.useEffect)((()=>{const _=X.current;I&&_&&_.focus()}),[I]),(0,i.useEffect)((()=>{U!==C.CaptchaType.AUDIO||R||(o_.current=!0)}),[U,R]);return(0,o.jsxs)(a.ModalBox,{children:[(0,o.jsx)(E.ModalDismissButton,{onClick:A}),(0,o.jsx)(n.ModalBody,{insetLevel:1,children:(0,o.jsxs)(l.Div,{mode:"vertical",spacing:4,paddingTop:8,paddingBottom:8,children:[(0,o.jsxs)(s.Image,{getRef:z,alt:p.getLang("vkconnect_auth_captcha_image_aria_label"),src:U===C.CaptchaType.IMAGE?S:"",onLoad:y,onError:B,width:268,height:102,children:[v&&(0,o.jsx)(c.Spinner,{}),!v&&I&&(0,o.jsx)(P.CaptchaError,{ref:X,captchaType:U}),!I&&U===C.CaptchaType.AUDIO&&(0,o.jsx)(k.SoundCaptcha,{ref:J,src:S,disabled:!W&&t_,shouldAutoPlayRef:o_,captchaType:U,isUiuxChangesEnabled:R,onAudioPlay:()=>{R||$?.current?.inputFieldRef.current?.focus()}})]}),(0,o.jsx)(w.Spacing,{size:6}),(0,o.jsxs)(d.ButtonGroup,{mode:"horizontal",stretched:!0,gap:"s",style:{justifyContent:"space-between"},children:[e&&(0,o.jsx)(m.CaptchaRefreshButton,{ref:q,newCaptchaUX:W,disabled:!W&&(F||Z&&(v||I)),countdownValue:H,captchaType:U,isUiuxChangesEnabled:R,onRefresh:()=>{U!==C.CaptchaType.AUDIO||R||(o_.current=!0),j(),W&&$?.current?.inputFieldRef.current?.focus()}}),(Z||t)&&(0,o.jsxs)(d.ButtonGroup,{mode:"horizontal",gap:"s",children:[Z&&(0,o.jsx)(M.CaptchaInfoButton,{ref:Y,onClick:()=>{e_((_=>!_))}}),t&&(0,o.jsx)(D.CaptchaTypeButton,{ref:G,disabled:!W&&V,captchaType:U,onToggle:()=>{N(),W&&$?.current?.inputFieldRef.current?.focus()}})]})]}),Z&&__&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w.Spacing,{size:8}),(0,o.jsx)(L.InfoBanner,{})]}),(0,o.jsx)(w.Spacing,{size:16}),(0,o.jsxs)("form",{onSubmit:i_,children:[(0,o.jsx)(h.CaptchaAnswerField,{ref:$,disabled:Z&&(v||I),captchaType:U,isUiuxChangesEnabled:R}),(0,o.jsx)(w.Spacing,{size:12}),(0,o.jsx)(d.ButtonGroup,{mode:"vertical",align:"center",stretched:!0,children:(0,o.jsx)(u.Button,{getRootRef:Q,size:"l",stretched:!0,disabled:!W&&(x||Z&&(v||I)),onClick:i_,tabIndex:0,children:p.getLang("vkconnect_auth_captcha_submit_button")})})]})]})})]})}},121939:(_,e,t)=>{t.d(e,{CaptchaPopup:()=>o.CaptchaPopup});var o=t(901885)},698035:(_,e,t)=>{t.d(e,{CaptchaRefreshButton:()=>c});var o=t(474848),i=t(296540),r=t(573638),a=t(533048),n=t(234337),l=t(506537),s=t(610989);const c=(0,i.forwardRef)((({newCaptchaUX:_,disabled:e,countdownValue:t,captchaType:i,isUiuxChangesEnabled:c,onRefresh:w},d)=>(0,o.jsx)(a.Button,{getRootRef:d,disabled:e,size:"m",appearance:"neutral",mode:"tertiary",before:(0,o.jsx)(r.Icon24Refresh,{className:(0,n.getColorClass)("color_icon_secondary")}),"aria-label":i===l.CaptchaType.IMAGE?s.getLang("vkconnect_auth_captcha_refresh_button_aria_label"):i===l.CaptchaType.AUDIO?c?s.getLang("vkconnect_auth_captcha_refresh_audio_button_aria_label_new_ux"):s.getLang("vkconnect_auth_captcha_refresh_audio_button_aria_label"):void 0,tabIndex:0,onClick:w,children:_||!t?s.getLang("vkconnect_refresh_captcha"):(0,s.langReplace)(s.getLang("vkconnect_refresh_captcha_via"),{time:String(t)})})))},153391:(_,e,t)=>{t.d(e,{CaptchaTypeButton:()=>w});var o=t(474848),i=t(296540),r=t(506537),a=t(963328),n=t(16547),l=t(533048),s=t(234337),c=t(610989);const w=(0,i.forwardRef)((({disabled:_,captchaType:e,onToggle:t},i)=>(0,o.jsx)(l.Button,{getRootRef:i,disabled:_,size:"m",appearance:"neutral",mode:"tertiary",before:e===r.CaptchaType.IMAGE?(0,o.jsx)(a.Icon24Headphones,{className:(0,s.getColorClass)("color_icon_secondary")}):(0,o.jsx)(n.Icon24TextOutline,{className:(0,s.getColorClass)("color_icon_secondary")}),onClick:t,"aria-label":e===r.CaptchaType.IMAGE?c.getLang("vkconnect_auth_captcha_enable_audio_aria_label"):c.getLang("vkconnect_auth_captcha_enable_image_aria_label"),tabIndex:0})))},707695:(_,e,t)=>{t.d(e,{CaptchaTypeButton:()=>o.CaptchaTypeButton});var o=t(153391)},40041:(_,e,t)=>{t.d(e,{InfoBanner:()=>n});var o=t(474848),i=t(618168),r=t(610989),a=t(194620);const n=()=>(0,o.jsx)(i.Banner,{noPadding:!0,size:"s",subheader:r.getLang("vkconnect_auth_audio_captcha_info_text"),mode:"image",imageTheme:"light",background:(0,o.jsx)("div",{className:a.default.background})})},725405:(_,e,t)=>{t.d(e,{InfoBanner:()=>o.InfoBanner});var o=t(40041)},647283:(_,e,t)=>{t.d(e,{SoundCaptcha:()=>u});var o=t(474848),i=t(296540),r=t(426622),a=t(155581),n=t(234337),l=t(595154),s=t(610989),c=t(205726),w=t(293721),d=t(506537);const u=(0,i.forwardRef)((({src:_,disabled:e,shouldAutoPlayRef:t,captchaType:u,isUiuxChangesEnabled:E,onAudioPlay:p},b)=>{const k=(0,i.useRef)(null),P=(0,w.useEvent)(d.captchaPopupService.audioPlaying),m=(0,w.useEvent)(d.captchaPopupService.audioPaused),D=(0,w.useEvent)(d.captchaPopupService.captchaLoadingErrorSet),h=(0,w.useEvent)(d.captchaPopupService.captchaLoadingStarts),O=(0,w.useEvent)(d.captchaPopupService.captchaLoadingEnds),M=(0,w.useStore)(d.captchaPopupService.$isAudioPlaying),L=(0,w.useStore)(d.captchaPopupService.$captchaLoading),C=()=>{const _=k.current;_?.readyState||_?.load(),t.current=!1,_?.play().then((()=>{p&&p()})).catch((()=>{D()}))};(0,i.useEffect)((()=>{const e=k.current;_&&e&&e.load()}),[_]);return(0,o.jsxs)(o.Fragment,{children:[_&&(0,o.jsx)("audio",{ref:k,preload:"none",src:_,onLoadStart:h,onCanPlay:()=>{O(),u===d.CaptchaType.AUDIO&&!M&&t.current&&C()},onPlay:P,onPause:m,onError:D}),!L&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.IconIllustrationSoundWaveLeft36h,{className:(0,n.getColorClass)(M?"color_icon_accent_themed":"color_icon_tertiary")}),(0,o.jsx)(l.IconButton,{getRootRef:b,size:52,disabled:e,"aria-label":E?s.getLang("vkconnect_auth_captcha_play_audio_button_aria_label_new_ux"):s.getLang("vkconnect_auth_captcha_play_audio_button_aria_label"),className:(0,n.getColorClass)("color_text_accent_themed"),tabIndex:0,onClick:C,children:(0,o.jsx)(c.Icon40PlayCircle,{})}),(0,o.jsx)(a.IconIllustrationSoundWaveRight36h,{className:(0,n.getColorClass)(M?"color_icon_accent_themed":"color_icon_tertiary")})]})]})}))},493192:(_,e,t)=>{t.d(e,{SoundCaptcha:()=>o.SoundCaptcha});var o=t(647283)},934905:(_,e,t)=>{t.d(e,{getDeviceId:()=>n});var o=t(623702),i=t(418562),r=t(506537);const a="vk_web_captcha_device_id",n=_=>{let e;switch(_){case r.Platform.VK_WEB:e=a;break;case r.Platform.VK_M_WEB:e="vk_m_web_captcha_device_id";break;default:e=a}let t=o.vkLocalStorage.getItem(e);return t||(t=(0,i.default)(),o.vkLocalStorage.setItem(e,t)),t}},678041:(_,e,t)=>{t.d(e,{ReportReasonIds:()=>d,afterCommentReportSubmit:()=>E,showReportForm:()=>u});var o=t(474848),i=t(618913),r=t(610989),a=t(921004),n=t(811042),l=t(186301),s=t(507607),c=t(272259);(0,a.initApi)();const w=window.vk;var d;function u(_,e,i,r,a,n,l,w){const d=(0,s.asyncComponent)((()=>Promise.all([t.e(91498),t.e(89631),t.e(99595)]).then(t.bind(t,930887))),(({ReportForm:_})=>_));(0,c.showMessageBoxModalSuspense)((t=>(0,o.jsx)(d,{...t,reportSource:_,reportSourceOwnerId:e,reportSourceId:i,onSubmit:r,messengerAdditionalData:n,from:l,adData:w})),{onDestroy:a})}function E(_,e,t){const o=function(_,e,t){switch(_){case"photo":return`#post${e}photo_${t}`;case"video":return`#post${e}video_${t}mv`;case"market":return`#post${e}market_${t}`}}(_,e,t);if("photo"===_){const _=document.querySelector(`${o} .dld`);null!==_&&(_.outerHTML="")}const a=document.querySelector(`${o} .reply_wrap`);null!==a?(a.style.display="none",a.outerHTML+=`<div class="dld">${r.getLang("global_report_sent")}</div>`):(0,i.debugLog)(`Unable to hide report button for ${_} comment`)}(0,n.setLoginConfig)({onCaptcha:l.handleCaptcha,domain:w?.apiConfigDomains?.loginDomain}),(0,n.setApiConfig)({onCaptcha:l.handleCaptcha,domain:w?.apiConfigDomains?.apiDomain}),function(_){_[_.NotOriginalContent=28]="NotOriginalContent"}(d||(d={}))},37645:(_,e,t)=>{t.d(e,{floatingButtonCollapseAllRepliesHide:()=>r,floatingButtonCollapseAllRepliesShow:()=>a,highlightUpdatedReply:()=>s,highlightUpdatedReplyContent:()=>c,loadRepliesLinkIsVisible:()=>l,loadRepliesLinkShow:()=>n});var o=t(226095),i=t(452314);const r=_=>{_ instanceof HTMLElement&&_.classList.contains("replies_side")&&_.classList.add("replies_side_hidden")},a=_=>{_ instanceof HTMLElement&&_.classList.contains("replies_side")&&_.classList.remove("replies_side_hidden")},n=_=>{_ instanceof HTMLElement&&_.classList.contains("replies_next")&&_.classList.add("replies_next_shown")},l=_=>!!(_ instanceof HTMLElement&&_.classList.contains("replies_next"))&&(_.classList.contains("replies_next_shown")||(0,i.isVisible)(_)),s=_=>{(0,o.triggerAnimationClass)(_,"reply_highlight_updated",3e3)},c=_=>{(0,o.triggerAnimationClass)(_,"reply_highlight_updated_content",3e3)}}}]);try{stManager.done("dist/web/chunks/3a8d7576.07cf416e.js")}catch(_){}