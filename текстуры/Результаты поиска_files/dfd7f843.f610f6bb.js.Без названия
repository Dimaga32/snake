"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[82887],{426622:(e,t,o)=>{o.d(t,{IconIllustrationSoundWaveLeft36h:()=>i});var i=(0,o(844990).makeIcon)("IconIllustrationSoundWaveLeft36h","illustration_sound_wave_left_36h","0 0 72 36",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 72 36" id="illustration_sound_wave_left_36h"><path d="M59.693 5.25a1.25 1.25 0 0 0-2.5 0v25.788a1.25 1.25 0 1 0 2.5 0zm-8.595 6.446a1.25 1.25 0 0 0-2.5 0V24.59a1.25 1.25 0 0 0 2.5 0zm15.942-1.25c.69 0 1.25.56 1.25 1.25V24.59a1.25 1.25 0 0 1-2.5 0V11.696c0-.69.56-1.25 1.25-1.25M42.5 14.275a1.25 1.25 0 0 0-2.5 0v7.737a1.25 1.25 0 0 0 2.5 0zM23.693 5.25a1.25 1.25 0 0 0-2.5 0v25.788a1.25 1.25 0 1 0 2.5 0zm-8.595 6.446a1.25 1.25 0 0 0-2.5 0V24.59a1.25 1.25 0 0 0 2.5 0zm15.942-1.25c.69 0 1.25.56 1.25 1.25V24.59a1.25 1.25 0 0 1-2.5 0V11.696c0-.69.56-1.25 1.25-1.25M6.5 14.275a1.25 1.25 0 0 0-2.5 0v7.737a1.25 1.25 0 0 0 2.5 0z" /></symbol>',72,36,!1,void 0)},155581:(e,t,o)=>{o.d(t,{IconIllustrationSoundWaveRight36h:()=>i});var i=(0,o(844990).makeIcon)("IconIllustrationSoundWaveRight36h","illustration_sound_wave_right_36h","0 0 72 36",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 72 36" id="illustration_sound_wave_right_36h"><path d="M12.307 5.25a1.25 1.25 0 0 1 2.5 0v25.788a1.25 1.25 0 1 1-2.5 0zm8.595 6.446a1.25 1.25 0 0 1 2.5 0V24.59a1.25 1.25 0 0 1-2.5 0zM4.96 10.446c-.69 0-1.25.56-1.25 1.25V24.59a1.25 1.25 0 0 0 2.5 0V11.696c0-.69-.56-1.25-1.25-1.25m24.54 3.829a1.25 1.25 0 0 1 2.5 0v7.737a1.25 1.25 0 0 1-2.5 0zM48.307 5.25a1.25 1.25 0 0 1 2.5 0v25.788a1.25 1.25 0 1 1-2.5 0zm8.595 6.446a1.25 1.25 0 0 1 2.5 0V24.59a1.25 1.25 0 0 1-2.5 0zm-15.942-1.25c-.69 0-1.25.56-1.25 1.25V24.59a1.25 1.25 0 0 0 2.5 0V11.696c0-.69-.56-1.25-1.25-1.25m24.54 3.829a1.25 1.25 0 0 1 2.5 0v7.737a1.25 1.25 0 0 1-2.5 0z" /></symbol>',72,36,!1,void 0)},999284:(e,t,o)=>{o.d(t,{Icon16ArchiveOutline:()=>i});var i=(0,o(844990).makeIcon)("Icon16ArchiveOutline","archive_outline_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="archive_outline_16"><path fill="currentColor" fill-rule="evenodd" d="M6 8.75A.75.75 0 0 1 6.75 8h2.5a.75.75 0 1 1 0 1.5h-2.5A.75.75 0 0 1 6 8.75" clip-rule="evenodd" /><path fill="currentColor" fill-rule="evenodd" d="M11.25 14.5A2.75 2.75 0 0 0 14 11.75V6.383a1.6 1.6 0 0 0 .826-.757 1.6 1.6 0 0 0 .168-.598A2 2 0 0 0 15 4.84v-.28c0-.245 0-.51-.019-.739a2.5 2.5 0 0 0-.253-.956 2.5 2.5 0 0 0-1.093-1.093 2.5 2.5 0 0 0-.956-.253 10 10 0 0 0-.739-.019H4.06c-.244 0-.509 0-.738.019-.26.02-.602.073-.956.253a2.5 2.5 0 0 0-1.092 1.092c-.18.353-.233.696-.254.955-.02.23-.02.494-.02.738v.283a2 2 0 0 0 .006.186c.01.11.037.342.168.6A1.6 1.6 0 0 0 2 6.382v5.367a2.75 2.75 0 0 0 2.75 2.75zM2.75 5h10.59c.118 0 .16-.033.16-.16V4.6c0-.56 0-.84-.109-1.054a1 1 0 0 0-.437-.437C12.74 3 12.46 3 11.9 3H4.1c-.56 0-.84 0-1.053.109a1 1 0 0 0-.437.437c-.109.213-.11.493-.11 1.053v.24c0 .12.033.161.16.161zm.75 1.5v5.25c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V6.5z" clip-rule="evenodd" /><path fill="currentColor" fill-rule="evenodd" d="M6.75 8a.75.75 0 0 0 0 1.5h2.5a.75.75 0 1 0 0-1.5z" clip-rule="evenodd" /></symbol>',16,16,!1,void 0)},865757:(e,t,o)=>{o.d(t,{Icon16StarCircleFillBlue:()=>i});var i=(0,o(844990).makeIcon)("Icon16StarCircleFillBlue","star_circle_fill_blue_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="star_circle_fill_blue_16"><linearGradient id="star_circle_fill_blue_16_a" x1="-8" x2="8" y1="8" y2="24" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#70b2ff" /><stop offset="1" stop-color="#5c9ce6" /></linearGradient><path fill="url(#star_circle_fill_blue_16_a)" fill-rule="evenodd" d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16" clip-rule="evenodd" /><path fill="#fff" d="m9.624 5.76 2.151.21c.748.074.978.822.4 1.314l-1.684 1.431.625 2.333c.206.766-.431 1.23-1.07.768l-2.045-1.478-2.046 1.479c-.635.459-1.275-.003-1.07-.77l.626-2.332-1.684-1.432c-.58-.493-.352-1.239.4-1.312l2.15-.211.947-2.235c.297-.7 1.057-.7 1.353 0z" /></symbol>',16,16,!1,void 0)},394062:(e,t,o)=>{o.d(t,{Icon20Attach:()=>i});var i=(0,o(844990).makeIcon)("Icon20Attach","attach_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="attach_20"><path fill="currentColor" fill-rule="evenodd" d="M14.95 3.801a2.72 2.72 0 0 0-3.857 0L5.56 9.35a4.49 4.49 0 0 0 0 6.338 4.46 4.46 0 0 0 6.317 0l.002-.002 2.88-2.86a.75.75 0 0 1 1.057 1.064l-2.877 2.857-.002.002a5.96 5.96 0 0 1-8.439-.001 5.99 5.99 0 0 1 0-8.458l5.534-5.548a4.22 4.22 0 0 1 5.981 0 4.244 4.244 0 0 1 0 5.991l-5.534 5.548a2.486 2.486 0 0 1-3.521 0 2.497 2.497 0 0 1 0-3.525l.002-.002 3.102-3.083a.75.75 0 0 1 1.058 1.064l-3.1 3.08-.001.002a.997.997 0 0 0 0 1.405.986.986 0 0 0 1.398 0l5.534-5.548a2.744 2.744 0 0 0 0-3.873" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},59907:(e,t,o)=>{o.d(t,{Icon20LogoClipsOutline:()=>i});var i=(0,o(844990).makeIcon)("Icon20LogoClipsOutline","logo_clips_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="logo_clips_outline_20"><path fill="currentColor" fill-rule="evenodd" d="M7.194 1.502a.85.85 0 0 1 .904.792l.25 3.8a.85.85 0 0 1-1.697.112l-.25-3.8a.85.85 0 0 1 .793-.904m5.893.181a.85.85 0 0 1 .58 1.053l-1.35 4.651a.85.85 0 0 1-1.633-.474l1.35-4.65a.85.85 0 0 1 1.053-.58m.589 7.08a.75.75 0 0 1 1.057-.082c1.48 1.268 1.767 2.88 1.767 4.07 0 2.678-2.309 5.75-6.5 5.75-3.118 0-6.504-2.219-6.504-5.75 0-.677.218-1.588.776-2.349C4.854 9.61 5.796 9 7.142 9c.387 0 1.892.13 2.784 1.915a.75.75 0 1 1-1.341.67C8.048 10.513 7.232 10.5 7.143 10.5c-.833 0-1.34.352-1.662.79a2.62 2.62 0 0 0-.485 1.462c0 2.425 2.407 4.25 5.004 4.25 3.36 0 5-2.4 5-4.25 0-.953-.223-2.058-1.243-2.932a.75.75 0 0 1-.081-1.058" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},666112:(e,t,o)=>{o.d(t,{Icon20SmileOutline:()=>i});var i=(0,o(844990).makeIcon)("Icon20SmileOutline","smile_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="smile_outline_20"><path d="M10 1.5a8.5 8.5 0 1 1 0 17 8.5 8.5 0 0 1 0-17M10 3a7 7 0 1 0 0 14 7 7 0 0 0 0-14m3.067 9.056c.3.286.312.76.027 1.06a4 4 0 0 1-.855.654A4.36 4.36 0 0 1 10 14.4a4.36 4.36 0 0 1-2.239-.63 4 4 0 0 1-.854-.653.75.75 0 0 1 1.004-1.109l.197.18c.098.083.239.186.417.292.446.263.942.42 1.475.42s1.029-.157 1.475-.42c.178-.106.32-.21.417-.292l.115-.105a.75.75 0 0 1 1.06-.027M7.625 7.25a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25m4.75 0a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25" /></symbol>',20,20,!1,void 0)},814487:(e,t,o)=>{o.d(t,{Icon20StatisticsOutline:()=>i});var i=(0,o(844990).makeIcon)("Icon20StatisticsOutline","statistics_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="statistics_outline_20"><path fill="currentColor" fill-rule="evenodd" d="M17 3.75a.75.75 0 0 0-.75-.75h-3.5a.75.75 0 0 0 0 1.5h1.69L10.5 8.44 9.03 6.97a.75.75 0 0 0-1.06 0l-4.75 4.75a.75.75 0 1 0 1.06 1.06L8.5 8.56l1.47 1.47a.75.75 0 0 0 1.06 0l4.47-4.47v1.69a.75.75 0 0 0 1.5 0zM2 16.25a.75.75 0 0 1 .75-.75h14.5a.75.75 0 0 1 0 1.5H2.75a.75.75 0 0 1-.75-.75" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},376155:(e,t,o)=>{o.d(t,{Icon24GearOutline:()=>i});var i=(0,o(844990).makeIcon)("Icon24GearOutline","gear_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="gear_outline_24"><path fill="currentColor" d="M12.723 2.213c1.207.037 1.993.702 2.407 1.954l.065.215.051.191q.029.111.069.235l.057.159.034.017.069-.023.134-.051.156-.068c1.413-.658 2.5-.536 3.387.437l.125.145.82 1.017c.73.962.709 1.99-.004 3.1l-.125.187-.118.16a3 3 0 0 0-.142.205l-.07.115-.034.057.004.02.092.06.126.077.154.083c1.389.71 1.962 1.641 1.74 2.936l-.036.188-.244 1.058c-.158.685-.283 1.01-.771 1.454-.475.432-1.016.61-1.732.67l-.22.014-.198.006q-.116.002-.246.015l-.181.021.013.142.013.096.033.179c.323 1.526-.04 2.558-1.188 3.202l-.17.09-1.174.57c-1.102.495-2.1.242-3.021-.702l-.153-.164-.13-.15a3 3 0 0 0-.17-.186l-.096-.096-.05-.046-.092.087-.105.108-.117.133c-.953 1.134-1.958 1.54-3.177 1.067l-.175-.074-1.052-.51-.312-.16c-.476-.26-.743-.51-1.004-1.061-.275-.58-.293-1.15-.16-1.883l.044-.225q.024-.113.042-.243l.018-.171-.004-.004-.104-.014-.146-.013-.174-.008c-1.56-.028-2.483-.614-2.853-1.877l-.049-.185-.291-1.274c-.235-1.185.235-2.1 1.363-2.785l.194-.112.175-.093q.105-.053.216-.12l.155-.102.004-.019-.063-.108-.08-.125-.102-.143c-.938-1.246-1.045-2.335-.277-3.404l.116-.153.823-1.013c.79-.915 1.8-1.107 3.035-.64l.208.083.18.081q.104.048.222.093l.136.048.036-.017.034-.089.045-.138.046-.166c.359-1.436 1.084-2.242 2.39-2.35l.19-.011zm-.057 1.799h-1.332l-.14.01c-.286.037-.473.191-.653.832l-.041.156-.056.206a6.3 6.3 0 0 1-.468 1.134 6 6 0 0 0-1.148.558 6.5 6.5 0 0 1-1.16-.35l-.35-.154c-.248-.107-.435-.161-.582-.175l-.084-.003a.55.55 0 0 0-.409.193l-.068.074-.789.973-.094.125c-.184.264-.211.5.194 1.075l.229.316c.212.31.424.692.598 1.102q-.196.577-.27 1.201c-.334.29-.69.537-1.014.72l-.342.184c-.617.34-.696.563-.647.881l.013.075.28 1.22.041.152c.096.308.264.474.968.509l.387.014c.37.024.798.09 1.223.204q.338.526.776.968a6.3 6.3 0 0 1-.118 1.445c-.201.95-.014 1.102.384 1.3l1.126.547a.8.8 0 0 0 .336.089l.068-.006c.18-.028.381-.162.67-.485l.258-.295c.256-.278.584-.574.948-.837l.298.023L12 18l.302-.008.298-.022c.364.263.692.559.948.837l.258.295c.325.364.538.488.737.49l.067-.003a.8.8 0 0 0 .177-.046l.093-.039 1.126-.547.14-.074c.298-.175.42-.395.244-1.226a6.2 6.2 0 0 1-.117-1.445q.436-.442.775-.97a6.5 6.5 0 0 1 1.223-.201l.387-.015c.812-.04.912-.256 1.008-.66l.264-1.142c.09-.406.095-.643-.616-1.035l-.343-.183a6.4 6.4 0 0 1-1.013-.722 6 6 0 0 0-.271-1.201c.174-.41.386-.791.598-1.1l.228-.317c.406-.575.379-.81.195-1.075l-.044-.062-.787-.974c-.141-.171-.26-.294-.452-.322l-.077-.007c-.16-.003-.368.05-.667.178l-.35.155a6.4 6.4 0 0 1-1.158.348 6 6 0 0 0-1.15-.556 6.5 6.5 0 0 1-.454-1.093l-.113-.414c-.192-.678-.392-.805-.713-.828zM12 8.2a3.8 3.8 0 1 1 0 7.6 3.8 3.8 0 0 1 0-7.6m0 1.8a2 2 0 1 0 0 4 2 2 0 0 0 0-4" /></symbol>',24,24,!1,void 0)},963328:(e,t,o)=>{o.d(t,{Icon24Headphones:()=>i});var i=(0,o(844990).makeIcon)("Icon24Headphones","headphones_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="headphones_24"><path d="M12 2.25a9 9 0 0 0-9 9V18a3 3 0 0 0 3 3h1.5A1.5 1.5 0 0 0 9 19.5v-5A1.5 1.5 0 0 0 7.5 13H5v-1.75c0-3.87 3.13-7 7-7s7 3.13 7 7V13h-2.5a1.5 1.5 0 0 0-1.5 1.5v5a1.5 1.5 0 0 0 1.5 1.5H18a3 3 0 0 0 3-3v-6.75a9 9 0 0 0-9-9" /></symbol>',24,24,!1,void 0)},128303:(e,t,o)=>{o.d(t,{Icon24LikeOutline:()=>i});var i=(0,o(844990).makeIcon)("Icon24LikeOutline","like_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="like_outline_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path fill="currentColor" fill-rule="nonzero" d="M15.992 4.006c-1.451.064-2.753.637-3.881 1.694l-.117.113-.122-.118C10.662 4.576 9.275 4 7.734 4 4.577 4 2 6.56 2 9.717c0 3.088 1.127 4.552 6.182 8.546l2.688 2.098a1.84 1.84 0 0 0 2.26 0l2.364-1.843.933-.74C20.965 14.144 22 12.676 22 9.718 22 6.56 19.423 4 16.266 4zm.274 1.794c2.165 0 3.934 1.757 3.934 3.917l-.005.294c-.076 2.156-1.062 3.341-5.509 6.852l-2.663 2.078a.04.04 0 0 1-.046 0l-2.364-1.843-.874-.691c-4.142-3.31-4.939-4.44-4.939-6.69C3.8 7.557 5.569 5.8 7.734 5.8c1.333 0 2.507.618 3.57 1.915a.9.9 0 0 0 1.398-.007C13.739 6.416 14.909 5.8 16.266 5.8" /></g></symbol>',24,24,!1,void 0)},573638:(e,t,o)=>{o.d(t,{Icon24Refresh:()=>i});var i=(0,o(844990).makeIcon)("Icon24Refresh","refresh_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="refresh_24"><path d="M12 9.096a.4.4 0 0 0 .67.296l4.287-3.899a.667.667 0 0 0 0-.987L12.67.609a.4.4 0 0 0-.67.295V4a8 8 0 1 0 8 8 1 1 0 1 0-2 0 6 6 0 1 1-6-6z" /></symbol>',24,24,!1,void 0)},39856:(e,t,o)=>{o.d(t,{Icon24ReportOutline:()=>i});var i=(0,o(844990).makeIcon)("Icon24ReportOutline","report_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="report_outline_24"><path fill-rule="evenodd" d="M8.863 2.1h6.274c.674-.002 1.2.211 1.683.697l4.383 4.383c.478.476.699.998.697 1.683v6.274c.002.685-.22 1.207-.697 1.683l-4.383 4.383c-.476.478-.998.699-1.683.697H8.863c-.685.002-1.207-.22-1.683-.697L2.797 16.82c-.478-.476-.699-.998-.697-1.683V8.863c-.002-.685.22-1.207.697-1.683L7.18 2.797c.484-.486 1.009-.699 1.683-.697m-.445 2.005L4.105 8.418c-.18.18-.205.242-.205.495v6.174c0 .25.025.316.205.495l4.313 4.313c.179.179.24.205.495.205h6.174c.253 0 .316-.026.495-.205l4.313-4.313c.18-.18.205-.245.205-.495V8.913c0-.254-.026-.316-.205-.495l-4.313-4.313c-.18-.18-.242-.205-.495-.205H8.913c-.254 0-.319.029-.495.205M13 16a1 1 0 1 1-2 0 1 1 0 0 1 2 0m-.1-8.1a.9.9 0 1 0-1.8 0v5.2a.9.9 0 1 0 1.8 0z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},489313:(e,t,o)=>{o.d(t,{Icon28CheckCircleOutline:()=>i});var i=(0,o(844990).makeIcon)("Icon28CheckCircleOutline","check_circle_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="check_circle_outline_28"><g fill="none" fill-rule="nonzero"><path d="M0 0h28v28H0z" /><path fill="currentColor" d="M14 2c6.627 0 12 5.373 12 12s-5.373 12-12 12S2 20.627 2 14 7.373 2 14 2m0 2C8.477 4 4 8.477 4 14s4.477 10 10 10 10-4.477 10-10S19.523 4 14 4m4.29 6.29c.39-.39 1.03-.39 1.42 0s.39 1.03 0 1.42l-7.003 6.997a1 1 0 0 1-1.414 0l-3.5-3.5a1 1 0 0 1 1.414-1.414L12 16.586Z" /></g></symbol>',28,28,!1,void 0)},852319:(e,t,o)=>{o.d(t,{Icon28ErrorCircleOutline:()=>i});var i=(0,o(844990).makeIcon)("Icon28ErrorCircleOutline","error_circle_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="error_circle_outline_28"><path fill="currentColor" d="M14 2c6.627 0 12 5.373 12 12s-5.373 12-12 12S2 20.627 2 14 7.373 2 14 2m0 2C8.477 4 4 8.477 4 14s4.477 10 10 10 10-4.477 10-10S19.523 4 14 4m0 13.6a1.4 1.4 0 1 1 0 2.8 1.4 1.4 0 0 1 0-2.8m.074-9.6c.237 0 .386.037.517.107q.196.106.302.302c.07.13.107.28.107.517v6.148c0 .237-.037.386-.107.517a.73.73 0 0 1-.302.302c-.13.07-.28.107-.517.107h-.148c-.237 0-.386-.037-.517-.107a.73.73 0 0 1-.302-.302c-.07-.13-.107-.28-.107-.517V8.926c0-.237.037-.386.107-.517a.73.73 0 0 1 .302-.302c.13-.07.28-.107.517-.107z" /></symbol>',28,28,!1,void 0)},356337:(e,t,o)=>{o.d(t,{Icon28LikeCircleFillRed:()=>i});var i=(0,o(844990).makeIcon)("Icon28LikeCircleFillRed","like_circle_fill_red_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="like_circle_fill_red_28"><linearGradient id="like_circle_fill_red_28_a" x1="-14" x2="14" y1="14" y2="42" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#ff5263" /><stop offset="1" stop-color="#ff3347" /></linearGradient><path fill="url(#like_circle_fill_red_28_a)" d="M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14" /><path fill="#fff" d="M16.859 9c2.01 0 3.641 1.612 3.641 3.6 0 2.007-.814 3.013-4.265 5.667l-1.57 1.207c-.391.301-.939.301-1.33 0l-1.57-1.207C8.314 15.614 7.5 14.607 7.5 12.599 7.5 10.611 9.13 9 11.141 9c1.077 0 2.035.501 2.859 1.472C14.824 9.502 15.782 9 16.859 9" /></symbol>',28,28,!1,void 0)},225853:(e,t,o)=>{o.d(t,{Icon28MoreHorizontal:()=>i});var i=(0,o(844990).makeIcon)("Icon28MoreHorizontal","more_horizontal_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 28 28" id="more_horizontal_28"><path d="M8.5 14a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0m8 0a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0m5.5 2.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5" /></symbol>',28,28,!1,void 0)},858583:(e,t,o)=>{o.d(t,{Icon28UnfavoriteOutline:()=>i});var i=(0,o(844990).makeIcon)("Icon28UnfavoriteOutline","unfavorite_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="unfavorite_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path fill="currentColor" fill-rule="nonzero" d="M8.58 8.993 5.292 5.707a1 1 0 0 1 1.414-1.414l18 18a1 1 0 0 1-1.414 1.414l-1.619-1.619a2 2 0 0 1-2.94 2L14 21.517l-4.735 2.57a2 2 0 0 1-2.92-2.123l.98-5.296-3.906-3.71a2 2 0 0 1 1.115-3.433zm1.781 1.783-5.565.733 4.3 4.083a1 1 0 0 1 .295.907l-1.08 5.83 5.212-2.828a1 1 0 0 1 .954 0l5.212 2.829-.506-2.733zm7.764-1.954 5.34.704a2 2 0 0 1 1.116 3.434l-2.637 2.504a1 1 0 0 1-1.377-1.45l2.637-2.505-5.879-.775a1 1 0 0 1-.771-.56L14 4.822l-.77 1.614a1 1 0 1 1-1.805-.861l.77-1.614a2 2 0 0 1 3.61 0z" /></g></symbol>',28,28,!1,void 0)},205726:(e,t,o)=>{o.d(t,{Icon40PlayCircle:()=>i});var i=(0,o(844990).makeIcon)("Icon40PlayCircle","play_circle_40","0 0 40 40",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 40 40" id="play_circle_40"><path fill-rule="evenodd" d="M40 20c0 11.046-8.954 20-20 20S0 31.046 0 20 8.954 0 20 0s20 8.954 20 20m-14.329 1.077a1.25 1.25 0 0 0 0-2.154l-8.787-5.175A1.25 1.25 0 0 0 15 14.826v10.348a1.25 1.25 0 0 0 1.884 1.078z" clip-rule="evenodd" /></symbol>',40,40,!1,void 0)},151862:(e,t,o)=>{o.d(t,{default:()=>i});const i={ownerName:"Owner-module__ownerName--Qe3xf",subscriptionButton:"Owner-module__subscriptionButton--CasU2",featured:"Owner-module__featured--iuUdW"}},97874:(e,t,o)=>{o.d(t,{default:()=>i});const i={container:"VideoModalInfoActions-module__container--IzANo"}},353518:(e,t,o)=>{o.d(t,{default:()=>i});const i={textWrapper:"VideoModalInfoDescription-module__textWrapper--bhGXl"}},967742:(e,t,o)=>{o.d(t,{default:()=>i});const i={container:"VideoModalInfoTitle-module__container--Igc6Q",info:"VideoModalInfoTitle-module__info--fJmkB",wrapper:"VideoModalInfoTitle-module__wrapper--oPlBO",icon:"VideoModalInfoTitle-module__icon--qs_B8",archive:"VideoModalInfoTitle-module__archive--b_hx9",subTitle:"VideoModalInfoTitle-module__subTitle--g_QQD",explicitTitle:"VideoModalInfoTitle-module__explicitTitle--t_Hea"}},597260:(e,t,o)=>{o.d(t,{default:()=>i});const i={container:"Episodes-module__container--dtQRf"}},917248:(e,t,o)=>{o.d(t,{default:()=>i});const i={root:"PlaylistVideosList-module__root--qGJe1",list:"PlaylistVideosList-module__list--DlWIm"}},567142:(e,t,o)=>{o.d(t,{default:()=>i});const i={recommendationsContainer:"Recommendations-module__recommendationsContainer--N58kG"}},381359:(e,t,o)=>{o.d(t,{default:()=>i});const i={content:"HorizontalAuthorsScroll-module__content--AZNPJ"}},545855:(e,t,o)=>{o.d(t,{default:()=>i});const i={skeleton:"VideoCardGridSkeleton-module__skeleton--X4fMx"}},194620:(e,t,o)=>{o.d(t,{default:()=>i});const i={background:"InfoBanner-module__background--OpAlW"}},493875:(e,t,o)=>{o.d(t,{VideoCommentCreationService:()=>m});var i=o(331635),n=o(327813),r=o(127126),a=o(968788),d=o(795624),s=o(643010),c=o(938507),l=o(825614);let m=class{async createComment(e){if(!this.authService.userId)return;const t={video_id:e.videoId,owner_id:e.ownerId,message:e.message},o=await this.videoApi.createComment(t),i={...l.USER_OWN_COMMENT_TEMPLATE,id:o,text:e.message,from_id:this.authService.userId,date:Date.now()/1e3};return this.commentsProvider.createFromApi(i),(0,s.getIdentityRawId)({id:o,ownerId:this.authService.userId})}constructor(e,t,o){this.videoApi=e,this.commentsProvider=t,this.authService=o,(0,n.makeAutoObservable)(this)}};m=(0,i.__decorate)([r.scope.container(),(0,i.__metadata)("design:paramtypes",[a.VideoApi,c.VideoCommentsProvider,d.AuthService])],m)},5403:(e,t,o)=>{o.d(t,{VideoCommentsDeletingProvider:()=>s});var i=o(331635),n=o(327813),r=o(127126),a=o(968788),d=o(757459);let s=class{async delete(e,t){const{commentId:o,ownerId:i}=e,r={owner_id:i,comment_id:(0,d.splitRawId)(o).itemId};this.videoCommentsDeletedMap.set(o,!0);try{const e=await this.videoApi.deleteComment(r,t);(0,n.runInAction)((()=>{this.videoCommentsDeletedMap.set(o,Boolean(e))}))}catch(e){throw(0,n.runInAction)((()=>{this.videoCommentsDeletedMap.set(o,!1)})),e}}async restore(e,t){const{commentId:o,ownerId:i}=e,r={owner_id:i,comment_id:(0,d.splitRawId)(o).itemId};this.videoCommentsDeletedMap.set(o,!1);try{const e=await this.videoApi.restoreComment(r,t);(0,n.runInAction)((()=>{this.videoCommentsDeletedMap.set(o,!Boolean(e))}))}catch(e){throw(0,n.runInAction)((()=>{this.videoCommentsDeletedMap.set(o,!0)})),e}}isDeleted(e){return this.videoCommentsDeletedMap.get(e)}constructor(e){this.videoApi=e,this.videoCommentsDeletedMap=new Map,(0,n.makeAutoObservable)(this)}};s=(0,i.__decorate)([r.scope.container(),(0,i.__metadata)("design:paramtypes",[a.VideoApi])],s)},142943:(e,t,o)=>{o.d(t,{VideoCommentsListProvider:()=>s});var i=o(331635),n=o(327813),r=o(127126),a=o(938507),d=o(709670);let s=class{createList(){return new d.VideoCommentsList(this.commentsProvider)}constructor(e){this.commentsProvider=e,(0,n.makeAutoObservable)(this)}};s=(0,i.__decorate)([r.scope.container(),(0,i.__metadata)("design:paramtypes",[a.VideoCommentsProvider])],s)},938507:(e,t,o)=>{o.d(t,{VideoCommentsProvider:()=>m});var i=o(331635),n=o(327813),r=o(127126),a=o(968788),d=o(238727),s=o(5281),c=o(900357),l=o(284871);let m=class{setFields(e){this.fields=e}createFromApi(e){const t=e=>{const t=new d.VideoComment(e,this.ownerProvider,this.likesService,this.videoApi);return this.commentsMap.set(t.rawId,t),t};return Array.isArray(e)?e.map(t):t(e)}getComment(e){return this.commentsMap.get(e)}async fetch(e,t){const o={video_id:e.videoId,owner_id:e.ownerId,count:e.count,offset:e.offset,need_likes:(0,c.convertToBooleanParam)(!0),extended:(0,c.convertToBooleanParam)(!0)};this.fields.length>0&&(o.fields=this.fields.join(","));const i=await this.videoApi.getComments(o,t),{count:n,groups:r,profiles:a,items:d}=i;this.ownerProvider.createGroupsFromApi(r),this.ownerProvider.createUsersFromApi(a);return{count:n,items:this.createFromApi(d)}}constructor(e,t,o){this.ownerProvider=e,this.likesService=t,this.videoApi=o,this.commentsMap=new Map,this.fields=[],(0,n.makeAutoObservable)(this)}};m=(0,i.__decorate)([r.scope.container(),(0,i.__metadata)("design:paramtypes",[s.VideoOwnerProvider,l.VideoLikesService,a.VideoApi])],m)},206681:(e,t,o)=>{o.d(t,{VideoCommentsReportService:()=>c});var i,n=o(331635),r=o(327813),a=o(127126),d=o(968788),s=o(757459);let c=i=class{static isVideoReportCommentParamsReason(e){return void 0===e||"number"==typeof e&&[0,1,2,4,5,6,8,9,10,11,12,13,15,27,41,42,43,101].includes(e)}async report(e){const{commentId:t,ownerId:o,reason:i,ref:n}=e,r={owner_id:o,comment_id:(0,s.splitRawId)(t).itemId,reason:this.changeReasonType(i),ref:n};try{await this.videoApi.reportComment(r)}catch(e){throw e}}changeReasonType(e){return i.isVideoReportCommentParamsReason(e)?e:void 0}constructor(e){this.videoApi=e,(0,r.makeAutoObservable)(this)}};c=i=(0,n.__decorate)([a.scope.container(),(0,n.__metadata)("design:paramtypes",[d.VideoApi])],c)},238727:(e,t,o)=>{o.d(t,{VideoComment:()=>a});var i=o(327813),n=o(643010),r=o(195295);class a{static createRawId(e){return(0,n.getIdentityRawId)(e)}get rawId(){const{id:e,from_id:t}=this.data;return a.createRawId({id:e,ownerId:t})}get data(){return this._data}get owner(){return this.ownerProvider.getOwner(this._data.from_id)}get parentOwner(){return this.ownerProvider.getOwner(this._data.reply_to_user??0)}async edit(e,t){const o={owner_id:e.ownerId,comment_id:this.data.id,message:e.text};await this.videoApi.editComment(o,t),this._data.text=e.text}constructor(e,t,o,n){this._data=e,this.ownerProvider=t,this.likesService=o,this.videoApi=n,this.likes=new r.VideoCommentLikes(this,this.likesService),(0,i.makeAutoObservable)(this)}}},195295:(e,t,o)=>{o.d(t,{VideoCommentLikes:()=>r});var i=o(327813),n=o(229840);class r{async toggleLike(e){const{optimistic:t,ownerId:o}=e,i={type:"video_comment",itemId:this.data.id,ownerId:o};this.controller?.abort(),this.controller=new AbortController,this.hasUserLikes?this.removeLike(i,t):this.addLike(i,t)}optimisticAddLike(e){this.data.likes&&(this.data.likes.count=e??this.data.likes.count+1,this.data.likes.user_likes=1)}optimisticRemoveLike(e){this.data.likes&&(this.data.likes.count=e??Math.max(this.data.likes.count-1,0),this.data.likes.user_likes=0)}async addLike(e,t){try{t&&this.optimisticAddLike();const o=await this.likesService.add(e,{signal:this.controller?.signal});(0,i.runInAction)((()=>{this.controller=null,this.optimisticAddLike(o.likes)}))}catch(e){!(0,n.isAbortError)(e)&&t&&this.optimisticRemoveLike()}}async removeLike(e,t){try{t&&this.optimisticRemoveLike();const o=await this.likesService.remove(e,{signal:this.controller?.signal});(0,i.runInAction)((()=>{this.controller=null,this.optimisticRemoveLike(o.likes)}))}catch(e){!(0,n.isAbortError)(e)&&t&&this.optimisticAddLike()}}get hasUserLikes(){return this.data.likes?.user_likes??0}get data(){return this.comment.data}constructor(e,t){this.comment=e,this.likesService=t,this.controller=null,(0,i.makeAutoObservable)(this)}}},709670:(e,t,o)=>{o.d(t,{VideoCommentsList:()=>n});var i=o(327813);class n{get count(){return this._count}get ids(){return this._ids}get isLoading(){return this._isLoading}get isLoadedFully(){return this._isLoadedFully}get isLoaded(){return Boolean(this.prevRequestParams)}dispose(){this.controller?.abort()}done(e,t){const{count:o=0,offset:i=0}=e,n=t.items.map((({rawId:e})=>e));return this._isLoadedFully=t.count<=i+o,this._count=t.count,this._ids=i?[...this._ids,...n]:n,this._isLoading=!1,this.controller=null,this.prevRequestParams=e,n}async addComment(e){this._ids.unshift(e)}async fetch(e,t=new AbortController){this.reset(),this.controller=t,this._isLoading=!0;const o=await this.request(e,t);return this.done(e,o)}async fetchMore(e=new AbortController){if(!this.prevRequestParams||this._isLoading||this._isLoadedFully)return;this.controller=e,this._isLoading=!0;const{count:t=0,offset:o=0}=this.prevRequestParams??{},i=o+t,n={...this.prevRequestParams,offset:i},r=await this.request(n,e);return this.done(n,r)}request(e,t){return this.commentsProvider.fetch(e,{signal:t.signal})}reset(){this.controller?.abort(),this.resetData()}resetData(){this._count=0,this._isLoading=!1,this._isLoadedFully=!1,this._ids=[],this.prevRequestParams=null,this.controller=null}constructor(e){this.commentsProvider=e,this._ids=[],this.prevRequestParams=null,this.controller=null,this._count=0,this._isLoading=!1,this._isLoadedFully=!1,(0,i.makeAutoObservable)(this)}}},825614:(e,t,o)=>{o.d(t,{USER_OWN_COMMENT_TEMPLATE:()=>i});const i={can_delete:1,can_edit:1,likes:{can_like:1,count:0,user_likes:0}}},284871:(e,t,o)=>{o.d(t,{VideoLikesService:()=>d});var i=o(331635),n=o(127126),r=o(262201),a=o(327813);let d=class{async add(e,t){const o={type:e.type,owner_id:e.ownerId,item_id:e.itemId};return await this.likesApi.add(o,t)}async remove(e,t){const o={type:e.type,owner_id:e.ownerId,item_id:e.itemId};return await this.likesApi.delete(o,t)}constructor(e){this.likesApi=e,(0,a.makeAutoObservable)(this)}};d=(0,i.__decorate)([n.scope.container(),(0,i.__metadata)("design:paramtypes",[r.LikesApi])],d)},422846:(e,t,o)=>{o.d(t,{isAbortApiError:()=>r});var i=o(614117),n=o(336451);const r=e=>(0,i.isNetworkError)(e)&&(0,n.isRequestAbortError)(e.error)},229840:(e,t,o)=>{o.d(t,{isAbortError:()=>r});var i=o(631354),n=o(422846);const r=e=>(0,i.isApiNetworkError)(e)&&(0,n.isAbortApiError)(e)},631354:(e,t,o)=>{o.d(t,{isApiNetworkError:()=>i});const i=e=>!!e&&"object"==typeof e&&"type"in e&&"network_error"===e.type},336451:(e,t,o)=>{o.d(t,{isRequestAbortError:()=>i});const i=e=>e instanceof DOMException&&(20===e.code||"AbortError"===e.name)},262201:(e,t,o)=>{o.d(t,{LikesApi:()=>a});var i=o(331635),n=o(127126),r=o(609897);let a=class extends r.ApiNamespace{get namespace(){return"likes"}constructor(){super(...arguments),this.add=this.makeMethod("add"),this.delete=this.makeMethod("delete")}};a=(0,i.__decorate)([n.scope.global()],a)},360800:(e,t,o)=>{o.d(t,{createLikesAddFx:()=>n,createLikesDeleteFx:()=>r});var i=o(66044);const n=e=>(0,i.createApiEffect)("likes.add",e),r=e=>(0,i.createApiEffect)("likes.delete",e)},222241:(e,t,o)=>{o.d(t,{useEntitiesStoreMap:()=>n});var i=o(293721);const n=(e,t)=>(0,i.useStoreMap)({store:e,keys:t,fn:(e,t)=>t.reduce(((t,o)=>(e[o]&&t.push(e[o]),t)),[])})},474021:(e,t,o)=>{o.d(t,{createEntitiesFriendsSubscribeService:()=>r});var i=o(489617),n=o(41489);const r=({domain:e})=>{const t=(0,i.createFriendsAddFx)({domain:e}),o=(0,i.createFriendsDeleteFx)({domain:e}),r=e.createStore({});return(0,n.sampleEntityUpdater)({store:r,fx:t,key:e=>String(e.params.query.user_id),fn:(e,t)=>Boolean(t.result)}),(0,n.sampleEntityUpdater)({store:r,fx:o,key:e=>String(e.params.query.user_id),fn:(e,t)=>Boolean(t.result)}),{$entitiesFriendsSubscribe:r,friendsAddFx:t,friendsDeleteFx:o}}},986489:(e,t,o)=>{o.d(t,{createEntitiesGroupsSubscribeService:()=>r});var i=o(455234),n=o(41489);const r=({domain:e})=>{const t=(0,i.createGroupsJoinFx)({domain:e}),o=(0,i.createGroupsLeaveFx)({domain:e}),r=e.createStore({});return(0,n.sampleEntityUpdater)({store:r,fx:t,key:e=>String(e.params.query.group_id),fn:(e,t)=>Boolean(t.result)}),(0,n.sampleEntityUpdater)({store:r,fx:o,key:e=>String(e.params.query.group_id),fn:(e,t)=>Boolean(t.result)}),{$entitiesGroupsSubscribe:r,groupsJoinFx:t,groupsLeaveFx:o}}},858243:(e,t,o)=>{o.d(t,{createEntitiesLikesService:()=>a});var i=o(41489),n=o(360800);const r=e=>[e.type,e.item_id].join("_"),a=({domain:e})=>{const t=(0,n.createLikesAddFx)({domain:e}),o=(0,n.createLikesDeleteFx)({domain:e}),a=e.createStore({}),d=e.createEvent();return a.on(d,((e,t)=>({...e,[t.key]:t.value}))),(0,i.sampleEntityUpdater)({store:a,fx:t,key:e=>r(e.params.query),fn:(e,t)=>({isLiked:!0,numberOfLikes:t.result.likes})}),(0,i.sampleEntityUpdater)({store:a,fx:o,key:e=>r(e.params.query),fn:(e,t)=>({isLiked:!1,numberOfLikes:t.result.likes})}),{$entitiesLikes:a,likesAddFx:t,likesDeleteFx:o,setLikeEvent:d}}},102114:(e,t,o)=>{o.d(t,{createListsVideosRecommendationsService:()=>a});var i=o(112268),n=o(301173);const r=({id:e,owner_id:t})=>void 0===e||void 0===t?"":(0,i.joinRawId)({itemId:e,ownerId:t}),a=({domain:e,entitiesVideoService:t})=>{const o=e.createEffect(t.videoGetVideoDiscoverFx),i=e.createEffect(o),a=(0,n.createFactoryLists)({$entitiesItems:t.$entitiesVideo,domain:e,fetchFx:i,getItemKey:r,getList:({items:e})=>e,getListCount:({count:e})=>e,getListKey:({entityKey:e})=>e,getEntityKey:r});return{resetVideosRecommendationsEvent:a.resetEvent,fetchMoreVideosRecommendationsEvent:a.fetchMoreEvent,fetchVideosRecommendationsFx:a.fetchFx,$videosRecommendationsFullyLoaded:a.$entitiesFullyLoaded,$videosRecommendationsLoading:a.$entitiesLoading,$videosRecommendationsIds:a.$entitiesListIds,$videosRecommendationsCount:a.$entitiesCount,$videosRecommendationsError:a.$entitiesError,selectStores:a.selectStores}}},932209:(e,t,o)=>{o.d(t,{isVideoVideoFullWithIds:()=>i});const i=e=>void 0!==e.id&&void 0!==e.owner_id},676762:(e,t,o)=>{o.d(t,{LazyStickerRich:()=>s});var i=o(474848),n=o(296540),r=o(753457),a=o(8520);const d=(0,n.lazy)((()=>(0,a.asyncImportLoader)((async()=>{const{StickerRich:e}=await Promise.all([o.e(89631),o.e(69706),o.e(50756)]).then(o.bind(o,492924));return{default:e}}))));function s(e){const{size:t}=e.baseStickerProps;return(0,i.jsx)(n.Suspense,{fallback:(0,i.jsx)("div",{style:{width:t,height:t},children:(0,i.jsx)(r.Spinner,{})}),children:(0,i.jsx)(d,{...e})})}},749613:(e,t,o)=>{o.d(t,{CaptchaType:()=>i,createCaptchaPopupService:()=>c});var i,n=o(32489),r=o(293721),a=o(418562),d=o(311606),s=o(884415);!function(e){e[e.IMAGE=0]="IMAGE",e[e.AUDIO=1]="AUDIO"}(i||(i={}));const c=()=>{const e=(0,r.createGate)(),t=(0,n.createEvent)(),o=(0,n.createEvent)(),i=(0,n.createEvent)(),c=(0,n.createEvent)(),l=(0,n.createEvent)(),m=(0,n.createEvent)(),u=(0,n.createEvent)(),h=(0,n.createEvent)(),v=(0,n.createEvent)(),p=(0,n.createEvent)(),_=(0,n.createEvent)();(0,n.forward)({from:e.close,to:_});const g=(0,n.createStore)("");g.on(e.open,((e,{captchaImage:t})=>t));const w=(0,n.createStore)("");w.on(e.open,((e,{captchaTrack:t})=>t));const f=(0,n.createStore)("");f.on(e.open,((e,{deviceId:t})=>t));const C=(0,n.createStore)(null);C.on(e.open,(()=>"CAPTCHA_MODAL_ACTIVE")),C.on(p,(()=>null));const S=(0,n.createStore)(null);S.on(e.open,((e,t)=>t.platform));const I=(0,n.createStore)("");I.reset(e.close),I.on(e.open,((e,{sid:t})=>t));const b=(0,n.createStore)("");b.reset(e.close),b.on([u,h],(()=>(0,a.default)()));const k=(0,n.createStore)(0);k.on(m,(e=>e+1)),k.reset(e.close);const x=(0,n.createStore)("");x.reset(e.close),x.on(t,((e,t)=>t));const E=(0,n.createStore)(!0);E.reset([e.close,m,u]),E.on(c,(()=>!0)),E.on(u,(()=>!0)),E.on(l,(()=>!1)),E.on(v,(()=>!1));const y=(0,n.createStore)(0);y.on(m,(e=>0===e?1:0));const A=(0,n.createStore)(!1);A.reset(e.close),A.on(o,(()=>!0)),A.on(i,(()=>!1));const M=(0,n.createStore)(!1);M.reset([e.close,m,u,h]),M.on(v,(()=>!0));const V=(0,n.createStore)("");V.reset([e.close,u]);const L=(0,n.createStore)(0);L.reset([e.close,_]),L.on([u,m],(()=>5));const{tick:j,isRunning:T}=(0,d.interval)({timeout:1e3,start:(0,n.merge)([u,m]),stop:_});L.on(j,(e=>e-1));const O=(0,n.createStore)(!1);O.reset(e.close);const R=(0,n.createStore)(!1);R.reset(e.close);const P=(0,n.createStore)(!0);P.reset(e.close),P.on(t,((e,t)=>""===t.trim()));const D=(0,n.createStore)(!0);return D.reset(e.close),D.on(m,(()=>!1)),(0,n.sample)({source:L,filter:e=>0===e,target:_}),(0,n.sample)({source:{isAudioPlaying:A,refreshCountdownRunning:T},fn:({isAudioPlaying:e,refreshCountdownRunning:t})=>e||t,target:[O,R]}),(0,n.sample)({clock:[e.open,h,m],source:{sid:I,hash:b,type:y,swapCount:k,platform:S,captchaImage:g,captchaTrack:w,deviceId:f,isFirst:D},fn:e=>(0,s.getCaptchaLink)(e),target:V}),(0,n.sample)({clock:u,source:{sid:I,hash:b,type:y,swapCount:k,platform:S,captchaImage:g,captchaTrack:w,deviceId:f},fn:e=>(0,s.getCaptchaLink)({...e,isRefresh:!0}),target:V}),{Gate:e,answerChanged:t,audioPlaying:o,audioPaused:i,captchaLoadingStarts:c,captchaLoadingEnds:l,captchaTypeToggled:m,captchaRefreshed:u,captchaReloaded:h,captchaLoadingErrorSet:v,closeCaptcha:p,$answer:x,$captchaLoading:E,$captchaType:y,$isAudioPlaying:A,$hasLoadCaptchaError:M,$captchaSrc:V,$refreshCountdown:L,$isRefreshButtonDisabled:O,$isCaptchaTypeToggleDisabled:R,$isSubmitButtonDisabled:P,$isCaptchaModalActive:C}}},161882:(e,t,o)=>{o.d(t,{CaptchaType:()=>i.CaptchaType,Platform:()=>n.Platform,createCaptchaPopupService:()=>i.createCaptchaPopupService});var i=o(749613),n=o(884415)},884415:(e,t,o)=>{o.d(t,{Platform:()=>i,getCaptchaLink:()=>a});var i,n=o(749613),r=o(105352);!function(e){e[e.VK_WEB=0]="VK_WEB",e[e.VK_M_WEB=1]="VK_M_WEB"}(i||(i={}));const a=({sid:e,hash:t,type:o,isRefresh:i,swapCount:a,platform:d,isFirst:s,captchaImage:c,captchaTrack:l,deviceId:m})=>{const u=t?`&v=${t}`:"",h=i?"&refresh=1":"",v=!i&&a>0?"&swap_type=1":"",p=s?"&first=1":"";let _;switch(d){case 0:default:_=r.VK_WEB_APP_ID;break;case 1:_=r.VK_MVK_APP_ID}switch(o){case n.CaptchaType.IMAGE:{let t="";if(c){const e=new URLSearchParams(c);t=e.has("device_id")?e.has("device_id")&&e.get("device_id")?`${c}&s=1&width=400&resized=1`:`${c.replace("device_id=",`device_id=${m}`)}&s=1&width=400&resized=1`:`${c}&resized=1&width=400&app_id=${_}&device_id=${m}`}else t=`/captcha.php?sid=${e}&s=1&resized=1&width=400&app_id=${_}&device_id=${m}`;return`${t}${u}${h}${v}${p}`}case n.CaptchaType.AUDIO:{let t="";if(l){const e=new URLSearchParams(l);t=e.has("device_id")?e.has("device_id")&&e.get("device_id")?`${l}`:`${l.replace("device_id=",`device_id=${m}`)}`:`${l}&app_id=${_}&device_id=${m}`}else t=`/sound_captcha.php?act=get&captcha_sid=${e}&app_id=${_}&device_id=${m}`;return`${t}${u}${h}${v}${p}`}default:return""}}},769661:(e,t,o)=>{o.d(t,{HASHTAG_ENTITIES_ALL:()=>s,HASHTAG_ENTITIES_NEW:()=>c,RE_HASHTAG_EXTRACTION_PATTERN:()=>d,RE_HASHTAG_EXTRACTION_PATTERN_NEW:()=>m});var i=o(889393);const n="a-zA-Zа-яА-ЯёіјєїґўЁІЈЄЇҐЎ’",r="(?:&#(?:19[2-9]|(?:[2-9]|1[0-3])[0-9][0-9]);?)",a=`(?:[${n}_\\d]|${r})`,d=`(^|[s.,:'";>)(]?)(${`(#${a}{0,100}${`(?:[${n}]|${r})`}${a}{0,100})`})(@${i.RE_DOMAIN_PATTERN})?(?=$|[s.,:'"&;?<)(]?)`,s="&#(\\d{3,5});",c="(?:&#\\d{3,5};)",l=`(?:[${n}_\\d]|${c})`,m=`(^|[s.,:'";>)(]?)(${`(#${l}{0,100}${`(?:[${n}]|${c})`}${l}{0,100})`})(@${i.RE_DOMAIN_PATTERN})?(?=$|[s.,:'"&;?<)(]?)`},369873:(e,t,o)=>{o.d(t,{useEmoji:()=>a});var i=o(296540),n=o(37555),r=o(7144);const a=({inputValue:e,inputRef:t,onChangeInput:o,emojiOpts:a})=>{(0,i.useLayoutEffect)((()=>{t.current&&window.Emoji&&e!==window.Emoji.val(t.current)&&(window.Emoji.val(t.current,window.Emoji.emojiToHTML((0,r.clean)(e))),(0,n.setEndOfContentEditable)(t.current))}),[e]),(0,i.useEffect)((()=>{let e=null;return window.stManager.add([window.jsc("web/emoji.js")],(function(){t?.current?e=window.Emoji.init(t.current,a):console.error("Не удалось инициализировать эмодзи из-за отсутствия ref")})),()=>{e&&window.Emoji&&window.Emoji.destroy(e)}}),[]);return{handleInput:e=>{e.preventDefault();const t=e.target;t instanceof HTMLElement&&window.Emoji&&o(window.Emoji.val(t))}}}},337962:(e,t,o)=>{o.d(t,{formatCommentText:()=>d});var i=o(846210),n=o(399290),r=o(7144),a=o(503803);const d=(e,t=!1)=>{let o=(0,r.clean)(e);return o=(0,n.replaceHyperLinks)(o,n.linksReplacer),o=(0,i.replaceMentions)(o),t&&(o=(0,a.emojiToHTML)(o,!0)),o}},565141:(e,t,o)=>{o.d(t,{formatFileSize:()=>c});var i=o(610989),n=o(8520);const r=1024,a=Math.pow(r,2),d=Math.pow(r,3),s=Math.pow(r,4);function c(e){let t=0,o="";return e>s?(t=Math.round(e/s*1e3)/1e3,o=i.getLang("global_tb")):e>d?(t=Math.round(e/d*100)/100,o=i.getLang("global_gb")):e>a?(t=Math.round(e/a*10)/10,o=i.getLang("global_mb")):(t=Math.round(e/r),o=i.getLang("global_kb")),`${(0,n.formatNumber)(t)} ${o}`}},547172:(e,t,o)=>{o.d(t,{getValidateLengthMessage:()=>i});const i=({value:e,maxLength:t,getExceededLengthLabel:o,getRemainingLengthLabel:i})=>{const n=e.length||0,r=n>t-100,a=n>t,d=Math.abs(n-t),s=t-n;return a?o(d):r?i(s):null}},566456:(e,t,o)=>{o.d(t,{replaceHashtags:()=>s});var i=o(769661),n=o(476726);let r;const a=[[192,1399],[12352,12543],[19968,40959],[44032,55215]];function d(e){const t=e.match(i.HASHTAG_ENTITIES_ALL)?.[1];if(!t)return!1;const o=parseInt(t);for(const e of a)if(o>=e[0]&&o<=e[1])return!0;return!1}function s(e,t){return e.replace((r||(r=(0,n.partConfigEnabled)("new_hashtags_parser")?new RegExp(i.RE_HASHTAG_EXTRACTION_PATTERN_NEW,"ig"):new RegExp(i.RE_HASHTAG_EXTRACTION_PATTERN,"ig")),r),((e,o,r,a,s)=>{let c="";if((0,n.partConfigEnabled)("new_hashtags_parser")){const e=r.matchAll(new RegExp(i.HASHTAG_ENTITIES_NEW,"ig"));for(const t of e){const[e]=t;if(!d(e)){c=r.slice(t.index),r=r.slice(0,t.index);break}}}return"#"===r?(o||"")+r+(s||"")+c:(o||"")+t(r+(s||""),r)+c}))}},37555:(e,t,o)=>{o.d(t,{setEndOfContentEditable:()=>n});var i=o(87223);const n=e=>{const t=window.getSelection();t?(t.selectAllChildren(e),t.collapseToEnd()):(0,i.logError)(new Error("setEndOfContentEditable: 'selection' must not be null or undefined"))}},484147:(e,t,o)=>{o.d(t,{replaceTimeTags:()=>a});var i=o(517347),n=o(33281);const r=/(?:(\d+):)?([0-5]?\d):([0-5]?\d)(?![:\d])/g,a=({getDescriptionTimeTagWrap:e,text:t,video:o})=>{if(!o||(0,i.isVideoExternal)(o)||!o.owner_id||!o.id||Boolean(o.interactive_info))return t;const a=(0,n.getVideoUrl)(o),d=o.duration??0;return t.replaceAll(r,((t,o,i,n)=>{const r=Number(o??0),s=Number(i??0),c=Number(n??0),l=c+60*s+60*r*60;if(l>=0&&l<d){return e(t,l,`${a}?t=${`${r}h${s}m${c}s`}`)}return t}))}},19611:(e,t,o)=>{o.d(t,{parseCommentProps:()=>d});var i=o(610989),n=o(112268),r=o(476726);const a=e=>{if(e)return e.reduce(((e,t)=>{const{type:o}=t;let a;switch(o){case"photo":a=(e=>{const t=e.photo;if(!t)return;const o=(0,n.joinRawId)({ownerId:t.owner_id,itemId:t.id}),i=`/photo${o}?list=${t.web_view_token??(0,n.joinRawId)({ownerId:t.owner_id,itemId:t.album_id})}&from=comments`;if(!t.sizes)return;return{type:"photo",photo:{...t,photo_id:o,photo_url:i}}})(t);break;case"video":a=(e=>{const t=e.video;if(!t)return;if(!t.owner_id)return;if(!t.id)return;const o=(0,n.joinRawId)({ownerId:t.owner_id,itemId:t.id}),a=t.access_key||(0,n.joinRawId)({ownerId:t.owner_id,itemId:t.album_id}),d=`/${"short_video"===t.type?"clip":"video"}${o}?list=${a}&from=access_hash`;let s;return(0,r.partConfigEnabled)("interactive_video_redesign_badge_mvk")&&"interactive"===t.type&&(s=i.getLang("video_interactive_label")),{type:"video",video:{...t,video_id:o,video_url:d,label:s}}})(t);break;case"doc":a=(e=>{const t=e.doc;if(t)return{type:"doc",doc:{...t,doc_id:(0,n.joinRawId)({ownerId:t.owner_id,itemId:t.id})}}})(t);break;case"sticker":a=(e=>{const t=e.sticker;if(t)return{type:"sticker",sticker:t}})(t);break;default:a={type:"custom",original_type:o,custom:t[o]}}return a&&e.push(a),e}),[])},d=e=>{const{attachments:t,...o}=e;return{...o,attachments:a(t)}}},750741:(e,t,o)=>{o.d(t,{VideoModalClaimedBlock:()=>u});var i=o(474848),n=o(610989),r=o(753457),a=o(785118),d=o(428918),s=o(500774),c=o(625134),l=o(102846),m=o(765668);const u=({claimedBlock:e,moderationInfo:t})=>(0,i.jsxs)(a.Div,{children:[(0,i.jsx)(d.Spacing,{size:8}),(0,i.jsxs)(s.Group,{children:[(0,i.jsx)(c.Header,{size:"medium",children:n.getLang("video_modal_claimed_block_header")}),(0,i.jsxs)(a.Div,{mode:"horizontal",children:[e&&(0,i.jsx)(r.Paragraph,{Component:"p",weight:"3",children:(0,i.jsx)(l.InnerHTML,{children:e})}),t?.claim_id&&!t?.moderator_id&&(0,i.jsxs)(r.Paragraph,{Component:"p",weight:"3",children:["Жалоба"," ",(0,i.jsxs)(m.Link,{href:`/claims?act=viewclaim&cid=${t.claim_id}`,target:"_blank",children:["#",t.claim_id]})]}),t&&(0,i.jsxs)(i.Fragment,{children:[t.originalVideoId&&(0,i.jsxs)(r.Paragraph,{Component:"p",weight:"3",children:["Заблокировано по md5 на основе видео"," ",(0,i.jsxs)(m.Link,{href:`/video${t.originalVideoId}`,target:"_blank",children:["/video",t.originalVideoId]})]}),t.hasClaimRestriction&&(0,i.jsx)(r.Paragraph,{Component:"p",weight:"3",children:n.getLang("video_is_licensed_cannot_claim")}),t.moderator_id&&(0,i.jsxs)(r.Paragraph,{Component:"p",weight:"3",children:[n.getLang("video_not_licensed_short")," ",(0,i.jsx)(m.Link,{href:`id${t.moderator_id}`,children:t.moderator_name})," ",t.claim_date]})]})]})]})]})},930789:(e,t,o)=>{o.d(t,{VideoModalClaimedBlock:()=>i.VideoModalClaimedBlock});var i=o(750741)},946792:(e,t,o)=>{o.d(t,{VideoModalInfo:()=>g});var i=o(474848),n=o(293721),r=o(296540),a=o(505954),d=o(488618),s=o(428918),c=o(86220),l=o(177723),m=o(478706),u=o(58659),h=o(958134),v=o(930789),p=o(209631),_=o(476726);const g=({canSubscribeToAuthor:e,canAddToGroups:t,canDeleteVideo:o,canReport:g,canEditVideo:w,canAddToFavorite:f,canViewStatistic:C,canDownloadVideo:S,isShortVideo:I,isActiveLive:b,claimedBlock:k,moderationVideoInfo:x,unauthLikesBox:E,statisticLink:y,...A})=>{const M=(0,r.useRef)(null),V=(0,n.useEvent)(c.videoModalService.setIsLikedEvent),L=(0,n.useEvent)(c.videoModalService.setNumberOfLikesEvent),j=(0,n.useStore)(c.videoModalService.$title),T=(0,n.useEvent)(c.videoModalService.setTitleEvent),O=(0,n.useStore)(c.videoModalService.$description),R=(0,n.useEvent)(c.videoModalService.setDescriptionEvent),P=(0,n.useEvent)(c.videoModalSubscribeService.setCanSubscribeEvent),D=(0,n.useEvent)(c.videoModalService.setCanAddToGroupsEvent),F=(0,n.useEvent)(c.videoModalService.setCanReportEvent),B=(0,n.useEvent)(c.videoModalService.setCanEditVideoEvent),$=(0,n.useEvent)(c.videoModalService.setCanDeleteVideoEvent),N=(0,n.useEvent)(c.videoModalFaveService.setCanAddToFavorite),H=(0,n.useEvent)(c.videoModalService.setCanViewStatisticEvent),U=(0,n.useEvent)(c.videoModalService.setCanDownloadVideo),G=(0,n.useEvent)(c.videoModalFaveService.setIsFavoriteEvent),z=(0,n.useEvent)(c.videoModalService.setIsShortVideoEvent),W=(0,n.useEvent)(c.videoModalService.setIsActiveLiveEvent),q=(0,n.useEvent)(c.videoModalAlbumsService.resetVideosAlbumsEvent),K=(0,n.useEvent)(c.videoModalSubscribeService.setIsSubscribeEvent);return(0,r.useEffect)((()=>(P(e),D(t),F(g),B(w),$(o),N(f),H(C),U(S),W(b),z(I),(0,_.partConfigEnabled)("video_fix_actions")||(0,p.initPlayerEventListeners)(),()=>{q(window.vk.id),(0,_.partConfigEnabled)("video_fix_actions")||(0,p.removePlayerEventListeners)()})),[]),(0,r.useEffect)((()=>{V(A.isLiked)}),[A.isLiked]),(0,r.useEffect)((()=>{L(A.likes)}),[A.likes]),(0,r.useEffect)((()=>{T(A.title)}),[A.title]),(0,r.useEffect)((()=>{R(A.description)}),[A.description]),(0,r.useEffect)((()=>{G(A.isFavorite)}),[A.isFavorite]),(0,r.useEffect)((()=>{K(A.isSubscribeToAuthor)}),[A.isSubscribeToAuthor]),(0,i.jsx)(a.AppRootProvider,{portalRoot:M,children:(0,i.jsxs)("div",{ref:M,children:[(k||A.moderActions?.moderationInfo&&Object.values(A.moderActions.moderationInfo).some(Boolean))&&(0,i.jsx)(v.VideoModalClaimedBlock,{claimedBlock:k,moderationInfo:A.moderActions?.moderationInfo}),(0,i.jsx)(d.HeaderLayout,{aside:(x||A.withUMA)&&(0,i.jsx)(h.VideoModalInfoHeaderAside,{moderationVideoInfo:x,withUMA:A.withUMA,videoId:A.id,ownerId:A.mainOwnerId}),children:(0,i.jsx)(l.VideoModalInfoTitle,{...A,title:j||""})}),(0,i.jsx)(m.VideoModalInfoActions,{video:A,unauthLikesBox:E,statisticLink:y}),(0,i.jsx)(u.VideoModalInfoDescriptionWrapper,{video:A,description:O}),(0,i.jsx)(s.Spacing,{size:16})]})})}},68443:(e,t,o)=>{o.d(t,{Actions:()=>V});var i=o(474848),n=o(356337),r=o(128303),a=o(48269),d=o(303913),s=o(694430),c=o(377803),l=o(234337),m=o(626006),u=o(610989),h=o(27995),v=o(100193),p=o(206714),_=o(917237),g=o(86220),w=o(293721),f=o(422495),C=o(98185),S=o(296540),I=o(213266),b=o(209631),k=o(347370),x=o(581903),E=o(695290);const y=["options","moderationInfo"],A=([e,t])=>!y.includes(e)&&Boolean(t),M=e=>e?{icon:(0,i.jsx)(n.Icon28LikeCircleFillRed,{width:24,height:24}),foregroundColor:{light:c.default.colorAccentRed.normal.value,dark:c.default.colorAccentRed.normal.value},backgroundColor:{light:c.default.colorBackgroundNegativeTint.normal.value,dark:c.default.colorBackgroundNegativeTint.normal.value}}:{icon:(0,i.jsx)(r.Icon24LikeOutline,{className:(0,l.getColorClass)("color_icon_secondary")}),foregroundColor:{light:c.default.colorTextSecondary.normal.value,dark:c.default.colorTextSecondary.normal.value},backgroundColor:void 0},V=(0,S.memo)((({video:e,unauthLikesBox:t,statisticLink:o})=>{const n=(0,w.useStore)(g.videoModalService.$isLiked),r=(0,w.useStore)(g.videoModalService.$numberOfLikes),y=r?(0,f.getFormattedBigLikesToShortCase)(r):"",{onToggleLike:V}=(0,I.useMenuItemsHandlers)({videoId:e.id,ownerId:e.mainOwnerId,trackCode:e.trackCode}),L=(0,h.isVKUserAnonymous)(),j=(0,S.useMemo)((()=>!L&&e?.moderActions&&Object.entries(e.moderActions).some(A)),[L,e?.moderActions]),T=(0,w.useStore)(g.videoModalAlbumsService.$videoAdded);return(0,i.jsxs)(m.PostFooter,{children:[e.canLike&&(0,i.jsx)(m.PostFooter.Action,{...M(n),onClick:()=>{L&&t?v.UnauthActionBox.show(t):V()},"data-testid":"video_modal_like_button",children:y}),e.canShare&&(0,i.jsx)(m.PostFooter.Action,{mode:"secondary",icon:(0,i.jsx)(a.Icon24ShareOutline,{className:(0,l.getColorClass)("color_icon_secondary")}),onClick:()=>{(0,C.shareVideoExtended)(e.mainOwnerId,e.id),e.trackCode&&x.searchStatsCollector.logEvent({track_code:e.trackCode,type:E.EventItemType.VIDEO,action:E.SearchClickActionMap.SHARE_OUT})},foregroundColor:{light:c.default.colorTextSecondary.normal.value,dark:c.default.colorTextSecondary.normal.value},"data-testid":"video_modal_share_button",children:u.getLang("video_share")}),e.canAddToPlaylist&&(0,i.jsx)(_.PlaylistPopoverWrapper,{video:e,ownerId:window.vk.id,...b.fixVideoPlayerScrollPopover,children:(0,i.jsx)(m.PostFooter.Action,{mode:"secondary",icon:T?(0,i.jsx)(d.Icon24Done,{className:(0,l.getColorClass)("color_icon_secondary")}):(0,i.jsx)(s.Icon24Add,{className:(0,l.getColorClass)("color_icon_secondary")}),foregroundColor:{light:c.default.colorTextSecondary.normal.value,dark:c.default.colorTextSecondary.normal.value},"data-testid":"video_modal_add_to_my_playlist",children:T?u.getLang("video_card_added_button_label"):u.getLang("video_card_add_button_label")})}),!L&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(p.MoreActionsMenu,{videoId:e?.id,ownerId:e.mainOwnerId,ordInfo:e.ordInfo,statisticLink:o,isFromMessage:e.isFromMessage,isScheduled:e.isScheduled,trackCode:e.trackCode}),j&&(0,i.jsx)(k.ModerActionsMenu,{actions:e.moderActions,ownerId:e.mainOwnerId,videoId:e.id})]})]})}))},270935:(e,t,o)=>{o.d(t,{ModerActionsMenu:()=>_});var i=o(474848),n=o(349826),r=o(626006),a=o(234337),d=o(377803),s=o(376155),c=o(293721),l=o(86220),m=o(209631),u=o(753457),h=o(296540),v=o(623702),p=o(700023);const _=({actions:e,videoId:t,ownerId:o})=>{const _=(0,c.useEvent)(l.videoModalModerService.changeSoundRestriction),g=(0,c.useEvent)(l.videoModalModerService.changeEmbedRestriction),w=(0,c.useEvent)(l.videoModalModerService.changeAd),f=(0,c.useEvent)(l.videoModalModerService.changeAdCopy),C=(0,c.useEvent)(l.videoModalModerService.changeAccessByIP),S=(0,c.useEvent)(l.videoModalModerService.changeClaim),I=(0,c.useEvent)(l.videoModalModerService.changeLicense),b=(0,c.useEvent)(l.videoModalModerService.changePin),k=(0,c.useStore)(l.videoModalModerService.$isPinned),{restore:x,claim:E,options:y,copy:A,deduplication:M,clickhouse:V,moderLog:L,canMark:j,replace:T,license:O,original:R,ads:P,restrictions:D,canBlockGeo:F,mute:B,edit:$,forbidden:N,deleteWithReason:H}=e;return(0,h.useEffect)((()=>{B&&_(B.isRestricted),D&&g(D.isEmbedRestricted),P&&(w(P.hasNoAds),f(P.hasNoCopyAds)),T&&C(T.accessByIp),E&&S(E.isClaimed),O&&I(O.isClaimedUploaded),b(Boolean(v.vkLocalStorage.getItem("video_moder_actions_pinned")))}),[]),(0,i.jsx)(n.DropdownActionSheet,{maxHeight:600,shown:k||void 0,width:243,...m.fixVideoPlayerScrollPopover,content:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(p.ForbiddenBlock,{ownerId:o,videoId:t,forbidden:N}),(0,i.jsx)(p.EditBlock,{ownerId:o,videoId:t,edit:$}),(N||$)&&(0,i.jsx)(n.DropdownActionSheet.Separator,{}),(0,i.jsx)(p.MuteBlock,{mute:B}),(0,i.jsx)(p.RestrictionBlock,{restrictions:D}),(0,i.jsx)(p.AdsBlock,{ads:P}),(P||D)&&(0,i.jsx)(n.DropdownActionSheet.Separator,{}),(0,i.jsx)(p.ReplaceBlock,{replace:T,ownerId:o,videoId:t}),j&&(0,i.jsx)(p.MarkBlock,{ownerId:o,videoId:t}),(0,i.jsx)(p.ModerLogBlock,{moderLog:L}),(j||L)&&(0,i.jsx)(n.DropdownActionSheet.Separator,{}),(0,i.jsx)(p.ClickhouseBlock,{clickhouse:V}),(0,i.jsx)(p.RestoreBlock,{restore:x}),(0,i.jsx)(p.ClaimBlock,{claim:E,hasLegalOwner:y?.hasLegalOwner}),(0,i.jsx)(p.CopyBlock,{copy:A}),(0,i.jsx)(p.DeduplicationBlock,{deduplication:M}),(0,i.jsx)(p.LicensedBlock,{license:O,hasLegalOwner:y?.hasLegalOwner}),(0,i.jsx)(p.OriginalBlock,{original:R,videoId:t,ownerId:o}),(0,i.jsx)(p.DeleteWithReason,{videoId:t,ownerId:o,deleteWithReason:H,claimId:E?.id}),F&&(0,i.jsx)(p.GeoBlock,{ownerId:o,videoId:t}),(x||E||M||O||R||F)&&(0,i.jsx)(n.DropdownActionSheet.Separator,{}),(0,i.jsx)(n.DropdownActionSheet.Item,{keepOpen:!0,after:(0,i.jsx)(u.Switch,{checked:k,onChange:e=>{k?v.vkLocalStorage.clear("video_moder_actions_pinned"):v.vkLocalStorage.setItem("video_moder_actions_pinned",1),b(e.target.checked)}}),children:k?"Unpin":"Pin"})]}),children:(0,i.jsx)(r.PostFooter.Action,{mode:"secondary",icon:(0,i.jsx)(s.Icon24GearOutline,{className:(0,a.getColorClass)("color_icon_secondary")}),foregroundColor:{light:d.default.colorTextSecondary.normal.value,dark:d.default.colorTextSecondary.normal.value}})})}},202804:(e,t,o)=>{o.d(t,{AdsBlock:()=>d});var i=o(474848),n=o(349826),r=o(293721),a=o(86220);const d=({ads:e})=>{const t=(0,r.useEvent)(a.videoModalModerService.changeAd),o=(0,r.useEvent)(a.videoModalModerService.changeAdCopy),d=(0,r.useStore)(a.videoModalModerService.$hasNoAd),s=(0,r.useStore)(a.videoModalModerService.$hasNoAdCopy);return e?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"partner_ads_settings",e.adsSettingsHash),children:"Рекламные параметры"}),d?(0,i.jsx)(n.DropdownActionSheet.Item,{children:"Реклама убрана"}):(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"remove_ad",e.removeAdHash,{copies:0},(()=>t(!1))),children:"Убрать рекламу"}),e.canRemoveAdFromCopy&&(s?(0,i.jsx)(n.DropdownActionSheet.Item,{children:"Реклама убрана с копий"}):(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"remove_ad",e.removeAdHash,{copies:1},(()=>o(!0))),children:"Убрать рекламу с копий"}))]}):null}},285862:(e,t,o)=>{o.d(t,{ClaimBlock:()=>s});var i=o(474848),n=o(349826),r=o(20025),a=o(293721),d=o(86220);const s=({claim:e,hasLegalOwner:t})=>{const{$isClaimed:o,changeClaim:s}=(0,a.useUnit)(d.videoModalModerService);return e?(0,i.jsxs)(i.Fragment,{children:[o&&(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.claimed(e.id,"unclaim",e.statusVideo,null,(()=>s(!1))),children:"Вернуть"}),!o&&t&&(e.isPartner?(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>(0,r.showFastBox)("Ошибка","Изъять это видео нельзя, так как владелец видео является партнером."),children:"Изъять (нельзя)"}):(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.claimed(e.id,"claim",e.statusVideo,null,(()=>s(!0))),children:"Изъять"}))]}):null}},652490:(e,t,o)=>{o.d(t,{ClickhouseBlock:()=>r});var i=o(474848),n=o(349826);const r=({clickhouse:e})=>e?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.DropdownActionSheet.Item,{href:e.logsUrl,target:"_blank",children:"Видео логи в clickhouse"}),e.flushPlaybackLinksHash&&(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"flush_playback_links_cache",e.flushPlaybackLinksHash),children:"Очистить кэш ссылок"}),e.refreshYoutubeDataHash&&(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"refresh_youtube_data",e.refreshYoutubeDataHash),children:"Обновить данные из YT"}),(0,i.jsx)(n.DropdownActionSheet.Separator,{})]}):null},654211:(e,t,o)=>{o.d(t,{CopyBlock:()=>r});var i=o(474848),n=o(349826);const r=({copy:e})=>e?(0,i.jsx)(n.DropdownActionSheet.Item,{href:e.sourceUrl,target:"_blank",children:"Оригинал (копия)"}):null},204071:(e,t,o)=>{o.d(t,{DeduplicationBlock:()=>r});var i=o(474848),n=o(349826);const r=({deduplication:e})=>e?(0,i.jsx)(n.DropdownActionSheet.Item,{href:e.url,target:"_blank",children:"Оригинал (дедупликация)"}):null},952412:(e,t,o)=>{o.d(t,{DeleteWithReason:()=>a});var i=o(474848),n=o(349826),r=o(214303);const a=({deleteWithReason:e,videoId:t,ownerId:o,claimId:a=0})=>e?(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>(0,r.handleDeleteVideoWithReason)({ownerId:o,videoId:t,claimId:a,deleteWithReason:e}),children:"Удалить с причиной"}):null},584566:(e,t,o)=>{o.d(t,{EditBlock:()=>r});var i=o(474848),n=o(349826);const r=({edit:e,videoId:t,ownerId:o})=>e?(0,i.jsxs)(i.Fragment,{children:[e.isGroupOwner&&(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"make_from_owner",e.groupOwnerHash),children:"Сделать от группы"}),e.isVideoInPlaylists&&(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"hide_from_owner_albums",e.hideFromOwnerHash),children:"Скрыть из альбомов автора"}),(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.Videoview.deleteVideo(t,o,e.deleteHash,!1,"videoviewer"),children:"Удалить"})]}):null},186335:(e,t,o)=>{o.d(t,{ForbiddenBlock:()=>d});var i=o(474848),n=o(214303),r=o(610989),a=o(349826);const d=({ownerId:e,videoId:t,forbidden:o})=>o?(0,i.jsx)(a.DropdownActionSheet.Item,{onClick:()=>(0,n.handleForbidVideo)(e,t,o.objectTypeId),children:r.getLang("video_add_to_forbidden_registry")}):null},888375:(e,t,o)=>{o.d(t,{GeoBlock:()=>d});var i=o(474848),n=o(214303),r=o(610989),a=o(349826);const d=({ownerId:e,videoId:t})=>(0,i.jsx)(a.DropdownActionSheet.Item,{onClick:()=>(0,n.handleGeoBlockContent)(e,t),children:r.getLang("reports_gb")})},907695:(e,t,o)=>{o.d(t,{LicensedBlock:()=>s});var i=o(474848),n=o(349826),r=o(610989),a=o(293721),d=o(86220);const s=({hasLegalOwner:e,license:t})=>{const{$isLicensed:o,changeLicense:s}=(0,a.useUnit)(d.videoModalModerService);return t?(0,i.jsxs)(i.Fragment,{children:[o&&(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.licensed(null,t.hash,(()=>s(!1))),children:r.getLang("video_add_to_public")}),!o&&e&&(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.licensed(null,t.hash,(()=>s(!0))),children:r.getLang("video_delete_from_public")})]}):null}},635215:(e,t,o)=>{o.d(t,{MarkBlock:()=>a});var i=o(474848),n=o(214303),r=o(349826);const a=({ownerId:e,videoId:t})=>(0,i.jsx)(r.DropdownActionSheet.Item,{onClick:()=>(0,n.handleBlurContent)(e,t),children:"Разметка категорий"})},780969:(e,t,o)=>{o.d(t,{ModerLogBlock:()=>r});var i=o(474848),n=o(349826);const r=({moderLog:e})=>e?(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"moder_log",e.hash),children:"Лог модерации"}):null},197703:(e,t,o)=>{o.d(t,{MuteBlock:()=>d});var i=o(474848),n=o(349826),r=o(293721),a=o(86220);const d=({mute:e})=>{const t=(0,r.useStore)(a.videoModalModerService.$isSoundRestricted),o=(0,r.useEvent)(a.videoModalModerService.changeSoundRestriction);return e?(0,i.jsxs)(i.Fragment,{children:[e.isMatched&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.DropdownActionSheet.Item,{href:e.matchedVideoUrl,target:"_blank",children:"Аудио матчинг"}),(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"add_audio_to_ignore",e.matchedHash),children:"Добавить аудио в игнор-лист"})]}),t?(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"restriction_audio",e.restrictedHash,null,(()=>o(!1))),children:"Разрешить у видео звук"}):(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"restriction_audio",e.restrictedHash,{enable:1},(()=>o(!0))),children:"Запретить у видео звук"}),(0,i.jsx)(n.DropdownActionSheet.Separator,{})]}):null}},91493:(e,t,o)=>{o.d(t,{OriginalBlock:()=>r});var i=o(474848),n=o(349826);const r=({original:e,videoId:t,ownerId:o})=>e?e.isShow?(0,i.jsx)(n.DropdownActionSheet.Item,{href:e.url,target:"_blank",children:"Показать оригинал"}):(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.restoreOriginal(o,t,e.hash),children:"Вернуть оригинал"}):null},574230:(e,t,o)=>{o.d(t,{ReplaceBlock:()=>d});var i=o(474848),n=o(349826),r=o(293721),a=o(86220);const d=({replace:e,videoId:t,ownerId:o})=>{const d=(0,r.useStore)(a.videoModalModerService.$hasAccessByIP),s=(0,r.useStore)(a.videoModalService.$isShortVideo),c=(0,r.useEvent)(a.videoModalModerService.changeAccessByIP);return e?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.replaceLegal(o,t,e.replaceHash),children:"Заменить на другое видео"}),!s&&(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"request_video_status",e.migrateHash),children:"Мигрировать (обновить) видео"}),d?(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"restrict_access_by_ip",e.accessByIpHash,{enable:0},(()=>c(!1))),children:"Снять ограничения доступа по IP"}):(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"restrict_access_by_ip",e.accessByIpHash,{enable:1},(()=>c(!0))),children:"Доступ по IP для VKGROUP"}),(0,i.jsx)(n.DropdownActionSheet.Separator,{})]}):null}},395024:(e,t,o)=>{o.d(t,{RestoreBlock:()=>r});var i=o(474848),n=o(349826);const r=({restore:e})=>e?(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"restore_deleted",e.hash),children:"Восстановить"}):null},295100:(e,t,o)=>{o.d(t,{RestrictionBlock:()=>d});var i=o(474848),n=o(349826),r=o(293721),a=o(86220);const d=({restrictions:e})=>{const t=(0,r.useStore)(a.videoModalModerService.$isEmbedRestricted),o=(0,r.useEvent)(a.videoModalModerService.changeEmbedRestriction);return e?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"region_mask",e.regionMaskHash),children:"Ограничение гео"}),t?(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"restrict_embed",e.restrictEmbedHash,{restrict:0},(()=>o(!1))),children:"Разрешить эмбед"}):(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"restrict_embed",e.restrictEmbedHash,{restrict:1},(()=>o(!0))),children:"Запретить эмбед"})]}):null}},700023:(e,t,o)=>{o.d(t,{AdsBlock:()=>d.AdsBlock,ClaimBlock:()=>l.ClaimBlock,ClickhouseBlock:()=>c.ClickhouseBlock,CopyBlock:()=>p.CopyBlock,DeduplicationBlock:()=>_.DeduplicationBlock,DeleteWithReason:()=>f.DeleteWithReason,EditBlock:()=>i.EditBlock,ForbiddenBlock:()=>n.ForbiddenBlock,GeoBlock:()=>w.GeoBlock,LicensedBlock:()=>m.LicensedBlock,MarkBlock:()=>u.MarkBlock,ModerLogBlock:()=>h.ModerLogBlock,MuteBlock:()=>r.MuteBlock,OriginalBlock:()=>g.OriginalBlock,ReplaceBlock:()=>s.ReplaceBlock,RestoreBlock:()=>v.RestoreBlock,RestrictionBlock:()=>a.RestrictionBlock});var i=o(584566),n=o(186335),r=o(197703),a=o(295100),d=o(202804),s=o(574230),c=o(652490),l=o(285862),m=o(907695),u=o(635215),h=o(780969),v=o(395024),p=o(654211),_=o(204071),g=o(91493),w=o(888375),f=o(952412)},347370:(e,t,o)=>{o.d(t,{ModerActionsMenu:()=>i.ModerActionsMenu});var i=o(270935)},449207:(e,t,o)=>{o.d(t,{MoreActionsMenu:()=>I});var i=o(474848),n=o(296540),r=o(426222),a=o(225853),d=o(320830),s=o(349826),c=o(753457),l=o(626006),m=o(234337),u=o(377803),h=o(610989),v=o(213266),p=o(209631),_=o(875062),g=o(476726),w=o(932709),f=o(165753),C=o(741531),S=o(531698);const I=({ownerId:e,videoId:t,ordInfo:o,statisticLink:I,isFromMessage:b,isScheduled:k,trackCode:x})=>{const E=(0,g.partConfigEnabled)("video_bookmarks_renaming_to_watch_later"),y=(0,w.useHelpHint)(f.AvailableHelpHints.ACCOUNT_HINT_VIDEO_WATCH_LATER_ACTION),{isWatchLaterTooltipViewed:A,handleWatchLaterTooltipClose:M}=(0,S.useWatchLaterTooltipViewed)(),V=(0,n.useCallback)((()=>E&&y&&!A?(0,i.jsx)(d.TextTooltip,{header:y.title,text:y.description,onClose:()=>{(0,C.ensureAccountHelpHintsService)().hideHelpHint({hintId:f.AvailableHelpHints.ACCOUNT_HINT_VIDEO_WATCH_LATER_ACTION,isOptimistic:!0}),M()},placement:"top-start",maxWidth:262,children:(0,i.jsx)(r.Icon20ClockOutline,{})}):(0,i.jsx)(r.Icon20ClockOutline,{})),[E,y,A]),{menuItems:L,onShownChanged:j}=(0,v.useMoreMenuActions)({statisticLink:I,ownerId:e,videoId:t,isFromMessage:b,watchLaterItem:V(),isScheduled:k,trackCode:x});return(0,i.jsx)(s.DropdownActionSheet,{onShownChanged:j,trigger:"hover",...p.fixVideoPlayerScrollPopover,content:(0,i.jsxs)(c.OnboardingTooltipContainer,{children:[L?.map((({testId:e,...t},o)=>(0,i.jsx)(s.DropdownActionSheet.Item,{"data-testid":e,...t},o))),(0,i.jsx)(_.OrdTokenActionsMenu,{ordInfo:o})]}),children:(0,i.jsx)(l.PostFooter.Action,{mode:"secondary",icon:(0,i.jsx)(a.Icon28MoreHorizontal,{className:(0,m.getColorClass)("color_icon_secondary"),width:24,height:24}),foregroundColor:{light:u.default.colorTextSecondary.normal.value,dark:u.default.colorTextSecondary.normal.value},"data-testid":"video_modal_more_button",children:h.getLang("video_more_button_in_video_modal")})})}},875062:(e,t,o)=>{o.d(t,{OrdTokenActionsMenu:()=>c});var i=o(474848),n=o(343339),r=o(485749),a=o(349826),d=o(610989),s=o(237407);const c=({ordInfo:e})=>e?.ordUrl&&0!==e.ordUrl.length?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.DropdownActionSheet.Item,{target:"_blank",href:e.ordUrl,before:(0,i.jsx)(n.Icon20InfoCircleOutline,{}),children:d.getLang("video_clip_ord_advertiser_info")}),(0,i.jsx)(a.DropdownActionSheet.Item,{onClick:()=>(0,s.handleCopyToClipboardErId)(e.erId),before:(0,i.jsx)(r.Icon20CopyOutline,{}),children:`ERID: ${e.erId}`})]}):null},206714:(e,t,o)=>{o.d(t,{MoreActionsMenu:()=>i.MoreActionsMenu});var i=o(449207)},225006:(e,t,o)=>{o.d(t,{Actions:()=>i.Actions});var i=o(68443)},173731:(e,t,o)=>{o.d(t,{Owner:()=>b});var i=o(474848),n=o(296540),r=o(610989),a=o(303913),d=o(476726),s=o(293721),c=o(86220),l=o(480958),m=o(380118),u=o(765668),h=o(445248),v=o(280234),p=o(533048),_=o(8520),g=o(213266),w=o(978271),f=o(151862),C=o(847891),S=o(581903),I=o(695290);const b=({owner:e,secondaryOwner:t,featuredArtists:o,otherArtists:b,mainOwnerId:k,statisticLink:x,trackCode:E})=>{const{onSubscribeVideoAuthor:y,onViewVideoStatisticClick:A}=(0,g.useMenuItemsHandlers)({ownerId:k,trackCode:E}),M=(0,s.useStore)(c.videoModalService.$canViewStatistic),V=t||e,L=(0,s.useStore)(c.videoModalSubscribeService.$canSubscribe),j=(0,s.useStore)(c.videoModalSubscribeService.$isSubscribe),T=(0,d.partConfigEnabled)("video_modal_statistic_button")&&C.Ranges.isGroupId(e.id),O=T&&M||L,R=()=>{E&&S.searchStatsCollector.logEvent({track_code:E,type:I.EventItemType.VIDEO,action:I.SearchClickActionMap.OPEN_OWNER_OUT}),window.Videoview.preventHiddingOnBackLocation()},P=(0,i.jsxs)(l.TextClamp,{TypographyComponent:m.Headline,weight:"3",lines:1,children:[(0,i.jsx)(u.Link,{href:V.href||void 0,className:(0,_.classNames)(!o.length&&f.default.ownerName),Component:V.href?"a":void 0,onClick:R,children:(0,_.decodeHTMLEntities)(V.name)}),b.map((({id:e,name:t,href:o})=>(0,i.jsxs)(n.Fragment,{children:[", ",(0,i.jsx)(u.Link,{href:o,onClick:R,children:t})]},e))),o.length>0&&r.getLang("video_feature_relation_text"),o.map((({id:e,name:t,href:o},r)=>(0,i.jsxs)(n.Fragment,{children:[!!r&&", ",(0,i.jsx)(u.Link,{href:o,className:f.default.featured,onClick:R,children:t})]},e)))]});return(0,i.jsx)(h.SimpleCell,{hasActive:!1,hasHover:!1,before:(0,i.jsx)(v.RichAvatar,{size:48,src:V.photo_50,href:V.href||void 0,target:"_blank",nft:V.is_nft,onClick:R}),after:O&&(0,i.jsx)(p.Button,{className:f.default.subscriptionButton,"data-testid":L?"video_modal_subscribe_button":"",size:"m",...(()=>{if(T&&M){const e={mode:"primary",children:r.getLang("video_statistics"),"data-testid":"video_modal_statistic_lk"};return x?(e.href=x,e.target="_blank"):e.onClick=A,e}return L?j?{mode:"secondary",before:(0,i.jsx)(a.Icon24Done,{}),onClick:y,children:r.getLang("video_view_subscribed_msg")}:{mode:"primary",onClick:y,children:r.getLang("video_view_subscribe_to_author")}:{}})()}),subtitle:V.formattedSubscribersText,children:V.verified||V.ownerVerifiedByServices?(0,i.jsx)(w.VerifiedBadgeWidget,{ownerId:V.id,verificationType:V.ownerVerifiedByServices?"esia":"default",children:P}):P})}},418654:(e,t,o)=>{o.d(t,{Owner:()=>i.Owner});var i=o(173731)},483199:(e,t,o)=>{o.d(t,{VideoModalInfoActions:()=>d});var i=o(474848),n=o(225006),r=o(418654),a=o(97874);const d=({video:e,unauthLikesBox:t,statisticLink:o})=>(0,i.jsxs)("div",{className:a.default.container,children:[(0,i.jsx)(r.Owner,{owner:e.owner,secondaryOwner:e.secondaryOwner,featuredArtists:e.featuredArtists,otherArtists:e.otherArtists,mainOwnerId:e.mainOwnerId,statisticLink:o,trackCode:e.trackCode}),(0,i.jsx)(n.Actions,{video:e,unauthLikesBox:t,statisticLink:o})]})},478706:(e,t,o)=>{o.d(t,{VideoModalInfoActions:()=>i.VideoModalInfoActions});var i=o(483199)},26123:(e,t,o)=>{o.d(t,{VideoModalInfoDescription:()=>v});var i=o(474848),n=o(753457),r=o(785118),a=o(428918),d=o(480958),s=o(380118),c=o(765668),l=o(296540),m=o(610989),u=o(158904),h=o(353518);const v=({video:e,description:t})=>{const o=(0,l.useRef)(null),{onMoreButtonClick:v,onDescriptionClick:p,descriptionWrapper:_,isOverflowed:g,isExpanded:w}=(0,u.useDescriptionExpanded)({video:e,description:t,wrapperClassName:h.default.textWrapper,descRef:o}),f=g&&!w;return(0,i.jsxs)(r.Div,{mode:"horizontal",spacing:0,children:[(0,i.jsx)(a.Spacing,{size:12}),(0,i.jsx)(n.Card,{mode:"tint",children:(0,i.jsx)(n.Tappable,{onClick:p,hasActive:f,hasHover:f,children:(0,i.jsxs)(r.Div,{children:[(0,i.jsx)(d.TextClamp,{TypographyComponent:s.Footnote,weight:"3",lines:w?0:3,getRootRef:o,children:_}),g&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.Spacing,{size:8}),(0,i.jsx)(c.Link,{onClick:v,"data-testid":"video_modal_show_description_button",children:w?m.getLang("video_collapse_extended_description"):m.getLang("video_show_full_video_description")})]})]})})})]})}},559934:(e,t,o)=>{o.d(t,{VideoModalInfoDescriptionWrapper:()=>r});var i=o(474848),n=o(26123);const r=({video:e,description:t})=>t?(0,i.jsx)(n.VideoModalInfoDescription,{video:e,description:t}):null},158904:(e,t,o)=>{o.d(t,{useDescriptionExpanded:()=>i.useDescriptionExpanded});var i=o(969860)},969860:(e,t,o)=>{o.d(t,{useDescriptionExpanded:()=>m});var i=o(474848),n=o(296540),r=o(8520),a=o(102846),d=o(484147),s=o(566456),c=o(125830);const l=(e,t,o)=>`<a href="${o}" onclick="Videoview.timeTagClick(${t}, 'description', event);">${e}</a>`,m=({video:e,description:t,wrapperClassName:o,descRef:m})=>{const[u,h]=(0,n.useState)(!1),[v,p]=(0,n.useState)(!0),_={...e,owner_id:e.owner.id},g=(0,d.replaceTimeTags)({video:_,getDescriptionTimeTagWrap:l,text:(0,s.replaceHashtags)((0,c.formatTextWithLinks)(t),(e=>`<a href="/feed?section=search&q=${encodeURIComponent(e)}">${e}</a>`))}),w=(0,n.useMemo)((()=>(0,i.jsx)(a.InnerHTML,{className:o,children:(0,r.decodeHTMLEntities)(g)})),[g]);return(0,n.useEffect)((()=>{if(m.current){const{scrollWidth:e,scrollHeight:t,offsetWidth:o,offsetHeight:i}=m.current;p(e>o||t>i)}}),[g]),{onMoreButtonClick:e=>{e.stopPropagation(),h((e=>!e))},onDescriptionClick:()=>{v&&!u&&h(!0)},descriptionWrapper:w,isOverflowed:v,isExpanded:u}}},58659:(e,t,o)=>{o.d(t,{VideoModalInfoDescriptionWrapper:()=>i.VideoModalInfoDescriptionWrapper});var i=o(559934)},346751:(e,t,o)=>{o.d(t,{VideoModalInfoHeaderAside:()=>s});var i=o(474848),n=o(785118),r=o(175712),a=o(554280),d=o(500381);const s=({moderationVideoInfo:e,withUMA:t,ownerId:o,videoId:s})=>{const c=[];return t&&c.push((0,i.jsx)(n.Div,{mode:"horizontal",spacing:4,children:(0,i.jsx)(d.VideoModalInfoHeaderUMA,{videoId:s,ownerId:o})},"VideoModalInfoHeaderUMA")),e&&c.push((0,i.jsx)(a.VideoModalModerationInfo,{moderationVideoInfo:e},"VideoModalModerationInfo")),(0,i.jsx)(r.Join,{separator:(0,i.jsx)(i.Fragment,{}),children:c})}},500381:(e,t,o)=>{o.d(t,{VideoModalInfoHeaderUMA:()=>d});var i=o(474848),n=o(753457),r=o(234337),a=o(214303);const d=({videoId:e,ownerId:t})=>(0,i.jsx)(n.Tappable,{className:(0,r.getColorClass)("color_icon_medium"),onClick:()=>{(0,a.handleShowUMA)(t,e)},title:"UMA",children:"/UMA/"})},554280:(e,t,o)=>{o.d(t,{VideoModalModerationInfo:()=>v});var i=o(474848),n=o(629775),r=o(485749),a=o(580539),d=o(320830),s=o(785118),c=o(102846),l=o(533048),m=o(8520),u=o(659179),h=o(610989);const v=({moderationVideoInfo:e})=>{const[t]=e;return(0,i.jsx)(d.TextTooltip,{enableInteractive:!0,placement:"left",text:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.Div,{mode:"vertical",children:(0,i.jsx)(c.InnerHTML,{children:t.join("<br />")})}),(0,i.jsx)(l.Button,{before:(0,i.jsx)(r.Icon20CopyOutline,{}),onClick:()=>{(0,m.copyTextToClipboard)(t.join("\r\n")),(0,u.showSnackbar)({text:h.getLang("video_moderation_snackbar_copied"),before:{content:(0,i.jsx)(n.Icon20CheckAlt,{})}})},children:h.getLang("video_moderation_info_copy")})]}),children:(0,i.jsx)(a.Icon24InfoCircleOutline,{})})}},958134:(e,t,o)=>{o.d(t,{VideoModalInfoHeaderAside:()=>i.VideoModalInfoHeaderAside});var i=o(346751);o(554280)},646203:(e,t,o)=>{o.d(t,{VideoModalInfoTitle:()=>C});var i=o(474848),n=o(296540),r=o(15181),a=o(999284),d=o(8520),s=o(175712),c=o(320830),l=o(765668),m=o(785118),u=o(625134),h=o(480958),v=o(380118),p=o(234337),_=o(569658),g=o(610989),w=o(967742),f=o(978271);const C=({title:e,subTitle:t,isExplicit:o,views:C,date:S,formattedViewsText:I,releaseDate:b,genre:k,formattedDateText:x,trendsPosition:E,trendsLink:y,isArchivalContent:A,secondaryOwner:M,owner:V,ordInfo:L,isFromMessage:j,isScheduled:T,publishDate:O})=>{const R=(0,n.useRef)(null),P=t?.length?(0,i.jsxs)(s.Join,{separator:" ",children:[(0,d.decodeHTMLEntities)(e),(0,i.jsxs)("span",{className:w.default.subTitle,children:[(0,d.decodeHTMLEntities)(t),o&&(0,i.jsx)(c.TextTooltip,{placement:"top",text:g.getLang("video_modal_explicit_tooltip"),appearance:"inversion",children:(0,i.jsx)(r.Icon24Explicit,{className:w.default.explicitTitle})})]})]}):(0,d.decodeHTMLEntities)(e),D=(0,i.jsxs)(l.Link,{href:V.href||void 0,Component:V.href?void 0:"span",children:[g.getLang("global_by"),(0,d.decodeHTMLEntities)(V.ownerFullNameGenitive)]});return(0,i.jsxs)(m.Div,{mode:"vertical",getRootRef:R,children:[(0,i.jsx)(u.Header,{size:"large",multiline:!0,children:(0,i.jsx)(h.TextClamp,{lines:2,"data-testid":"video_modal_title",children:P})}),T&&(0,i.jsx)(m.Div,{mode:"horizontal",spacing:0,paddingTop:4,children:(0,i.jsxs)(v.Subhead,{className:(0,p.getColorClass)("color_text_subhead"),children:[g.getLang("video_postponed_publication"),": ",O]})}),!j&&!T&&(0,i.jsx)(m.Div,{mode:"horizontal",spacing:0,paddingTop:4,children:(0,i.jsxs)("div",{className:w.default.container,children:[(0,i.jsx)(c.TextTooltip,{placement:"top",text:(0,i.jsxs)(i.Fragment,{children:[C,(0,i.jsx)(_.InterpunctSeparator,{}),b||S]}),appearance:"inversion",children:(0,i.jsx)("div",{"data-testid":"video_modal_additional_info",children:(0,i.jsxs)(v.Subhead,{className:w.default.info,children:[I,(0,i.jsx)(_.InterpunctSeparator,{}),b||x,k&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(_.InterpunctSeparator,{}),(0,d.decodeHTMLEntities)(k)]})]})})}),M&&V&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(_.InterpunctSeparator,{}),V.verified||V.ownerVerifiedByServices?(0,i.jsx)(f.VerifiedBadgeWidget,{ownerId:V.id,verificationType:V.verified?"default":"esia",children:D}):D]}),A&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(_.InterpunctSeparator,{}),(0,i.jsx)(c.TextTooltip,{placement:"top",text:g.getLang("video_layer_archival_content_hint"),appearance:"inversion",children:(0,i.jsxs)("div",{className:w.default.wrapper,children:[(0,i.jsx)(a.Icon16ArchiveOutline,{className:w.default.icon}),(0,i.jsx)(v.Subhead,{className:w.default.archive,children:g.getLang("video_layer_archival_content")})]})})]}),E>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(_.InterpunctSeparator,{}),(0,i.jsx)(l.Link,{href:y,onClick:()=>{y===window.location.pathname&&window.Videoview.hide()},children:(0,i.jsx)(v.Subhead,{children:g.getLang("video_N_position_in_trends_tab",E)})})]}),L?.hasOrdLabel&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(_.InterpunctSeparator,{}),(0,i.jsx)(c.TextTooltip,{maxWidth:175,placement:"top",text:g.getLang("video_layer_ord_hint"),appearance:"inversion",children:(0,i.jsx)("div",{children:(0,i.jsx)(v.Subhead,{children:g.getLang("video_ord_title")})})})]})]})})]})}},177723:(e,t,o)=>{o.d(t,{VideoModalInfoTitle:()=>i.VideoModalInfoTitle});var i=o(646203)},110470:(e,t,o)=>{o.d(t,{VideoModalInfo:()=>i.VideoModalInfo,initVideoModalInfo:()=>n.initVideoModalInfo,unmountVideoModalInfo:()=>n.unmountVideoModalInfo});var i=o(946792),n=o(143602)},143602:(e,t,o)=>{o.d(t,{initVideoModalInfo:()=>s,unmountVideoModalInfo:()=>d});var i=o(474848),n=o(440961),r=o(171444),a=o(946792);const d=e=>{e&&n.unmountComponentAtNode(e)},s=(e,t)=>{e&&(n.render((0,i.jsx)(a.VideoModalInfo,{...t}),e),(0,r.pushNavDestroy)((()=>{d(e)})))}},114822:(e,t,o)=>{o.d(t,{CommentItemWrapper:()=>d});var i=o(474848),n=o(456921),r=o(944676),a=o(648875);const d=(0,n.observer)((({id:e})=>{const t=(0,r.useCommentsViewModel)(),o=t.getComment(e);return o?(0,i.jsx)(a.CommentItem,{comment:o,videoOwnerId:t.videoOwnerId,isHighlightedTemporarily:t.lastAddedItemId===e}):null}))},245583:(e,t,o)=>{o.d(t,{CommentItemWrapper:()=>i.CommentItemWrapper});var i=o(114822)},655745:(e,t,o)=>{o.d(t,{Comments:()=>d,CommentsWidget:()=>s});var i=o(474848),n=o(127126),r=o(944676),a=o(881619);const d=()=>(0,i.jsx)(a.VideoComments,{}),s=(0,n.createWidget)(r.CommentsViewModelProvider,d)},893784:(e,t,o)=>{o.d(t,{CommentsList:()=>c});var i=o(474848),n=o(456921),r=o(272650),a=o(39170),d=o(944676),s=o(245583);const c=(0,n.observer)((function(){const e=(0,d.useCommentsViewModel)();return e.ids.length?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.CommentLayout,{children:e.ids.map((e=>(0,i.jsx)(s.CommentItemWrapper,{id:e},e)))}),!e.isCommentsLoadedFully&&(0,i.jsx)(a.DynamicPagination,{isLoading:e.isCommentsLoading,fetchData:e.fetchMore,nextFrom:e.ids.length})]}):null}))},151352:(e,t,o)=>{o.d(t,{CommentsList:()=>i.CommentsList});var i=o(893784)},769592:(e,t,o)=>{o.d(t,{CommentActionMenu:()=>_});var i=o(474848),n=o(456921),r=o(808369),a=o(850767),d=o(48269),s=o(39856),c=o(79479),l=o(8520),m=o(770125),u=o(349826),h=o(595154),v=o(209631),p=o(435421);const _=(0,n.observer)((function({userRole:e}){const t=(0,p.useCommentItemModel)(),o=(0,m.useLangs)(),n="owner"===e;return(0,i.jsx)(u.DropdownActionSheet,{trigger:"hover",content:(0,i.jsxs)(i.Fragment,{children:[t.commentEdit.canEdit&&(0,i.jsx)(u.DropdownActionSheet.Item,{before:(0,i.jsx)(r.Icon24PenOutline,{}),onClick:t.commentEdit.setIsEditing,children:o.getLang("video_comment_edit")}),t.commentDelete.canDelete&&(0,i.jsx)(u.DropdownActionSheet.Item,{before:(0,i.jsx)(a.Icon24DeleteOutline,{}),onClick:t.commentDelete.delete,children:o.getLang("video_comment_delete")}),(0,i.jsx)(u.DropdownActionSheet.Item,{before:(0,i.jsx)(d.Icon24ShareOutline,{}),children:o.getLang("video_comment_share")}),!n&&(0,i.jsx)(u.DropdownActionSheet.Item,{before:(0,i.jsx)(s.Icon24ReportOutline,{}),onClick:t.reportComment,children:o.getLang("video_comment_complain")})]}),...v.fixVideoPlayerScrollPopover,children:(0,i.jsx)(h.IconButton,{"aria-label":o.getLang("video_context_menu_aria_label"),hoverMode:"opacity",activeMode:"opacity",noPadding:!0,onMouseEnter:l.noop,onMouseOut:l.noop,children:(0,i.jsx)(c.Icon16MoreHorizontal,{})})})}))},828064:(e,t,o)=>{o.d(t,{CommentActionMenu:()=>i.CommentActionMenu});var i=o(769592)},653844:(e,t,o)=>{o.d(t,{CommentsSorting:()=>p});var i=o(474848),n=o(629775),r=o(106962),a=o(296540),d=o(380118),s=o(175712),c=o(569658),l=o(349826),m=o(765668),u=o(770125),h=o(8520),v=o(276943);const p=({commentsCounter:e,activeSortingType:t,onChange:o})=>{const p=(0,u.useLangs)(),_=(0,a.useMemo)((()=>v.SORTING_TYPES.find((({id:e})=>e===t))?.label||""),[t]);return(0,i.jsx)(d.Caption,{level:"1",weight:"3",children:(0,i.jsxs)(s.Join,{separator:(0,i.jsx)(c.InterpunctSeparator,{}),children:[p.numeric(e,p.getLang("video_comments_summary",!0)),(0,i.jsx)(l.DropdownActionSheet,{trigger:"click",content:v.SORTING_TYPES.map((({id:e,label:r})=>(0,i.jsx)(l.DropdownActionSheet.Item,{after:e===t?(0,i.jsx)(n.Icon20CheckAlt,{}):null,onClick:()=>o(e),children:r},e))),children:(0,i.jsxs)(m.Link,{noUnderline:!0,onClick:h.noop,children:[_,(0,i.jsx)(r.Icon12Dropdown,{})]})})]})})}},215342:(e,t,o)=>{o.d(t,{CommentsSorting:()=>i.CommentsSorting});var i=o(653844)},481938:(e,t,o)=>{o.d(t,{VideoComments:()=>u});var i=o(474848),n=o(456921),r=o(296540),a=o(785118),d=o(215342),s=o(276943),c=o(944676),l=o(151352),m=o(648875);const u=(0,n.observer)((function(){const e=(0,c.useCommentsViewModel)(),[t,o]=(0,r.useState)(s.SORTING_TYPES[0].id);return e.isLoading?(0,i.jsx)("div",{children:"Скелетоны"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.Div,{paddingBottom:8,children:(0,i.jsx)(d.CommentsSorting,{commentsCounter:s.VIDEO_COMMENTS_MOCK.commentsCounter,activeSortingType:t,onChange:o})}),!e.isAnonymousUser&&(0,i.jsx)(m.CommentInput,{onCreateComment:e.addComment,videoOwnerId:e.videoOwnerId,videoId:e.videoId}),(0,i.jsx)(l.CommentsList,{})]})}))},881619:(e,t,o)=>{o.d(t,{VideoComments:()=>i.VideoComments});var i=o(481938)},276943:(e,t,o)=>{o.d(t,{SORTING_TYPES:()=>n,VIDEO_COMMENTS_MOCK:()=>r});var i=o(610989);const n=[{id:"interesting",label:i.getLang("me_comments_order_interesting")},{id:"old",label:i.getLang("me_comments_order_old")},{id:"new",label:i.getLang("me_comments_order_new")}],r={firstComment:{id:1,from_id:426179910,date:1668080005,text:'Просто комментарий с некоторым количеством лайков. У автора бейдж на аватаре. В ответах есть ответ от автора. Набор пунктов меню в "ещё" как в своём комментарии (owner)',likes:{can_like:1,count:12,user_likes:0}},secondComment:{id:1,from_id:426179910,date:1668080005,text:'Комментарий который лайкнул пользователь. Комментарий выбран (проп isSelected = true). Набор пунктов меню в "ещё" как для админа в чужом комментарии (admin)',likes:{can_like:1,count:3,user_likes:1}},firstReply:{id:1,from_id:426179910,date:1668080005,text:"Ответ к комментарию. Набор пунктов меню в ещё как для чужого комментария (reader)",likes:{can_like:1,count:0,user_likes:0}},attachmentsMock:[{type:"photo",photo:{id:457243242,sizes:[{height:1080,type:"z",width:721,url:"https://sun9-38.userapi.com/c240331/u161728042/d49/-3/x_79c41cbd73.jpg"}],text:"",photo_id:"161728042_457243242"}},{type:"doc",doc:{id:650621733,title:"Структура работы и требования к оформлению.docx",size:23238,ext:"docx",date:1667908713,url:""}}],commentOwner:{kind:"user",id:4343325452235,first_name:"Иван",first_name_dat:"Ивану",last_name:"Иванов",href:"https://vk.com/blablabla2423",photo_100:"https://sun9-29.userapi.com/QKvtU1KHcIAp0rdWET20HofmhQOH92_cjrb27Q/9oox86E1F_w.jpg"},commentOwnerWithLongName:{kind:"user",id:426179910,first_name:"Александр Владимирович",first_name_dat:"Александру Владимировичу",last_name:"Безграничноудлиненковский",href:"https://vk.com/egormorozovv",photo_100:"https://sun9-29.userapi.com/QKvtU1KHcIAp0rdWET20HofmhQOH92_cjrb27Q/9oox86E1F_w.jpg"},commentsCounter:78,fileSize:2434534,commentWithAttachmentId:123,dateTime:1717155633730,progress:75,firstAvatarUrl:"https://sun9-60.userapi.com/c855032/v855032963/15d4f9/XOQY9NSlP5A.jpg?ava=1",secondAvatarUrl:"https://sun9-44.userapi.com/c858128/v858128761/67fe1/nAnraWnpHK8.jpg?ava=1",attachedFileName:"Структура работы и требования к оформлению.docx",commentId:242,repliesNumber:120,fewRepliesNumber:8,loadMoreRepliesNumber:110}},714421:(e,t,o)=>{o.d(t,{Comments:()=>i.Comments,CommentsWidget:()=>i.CommentsWidget,initComments:()=>n.initComments,unmountComments:()=>n.unmountComments});var i=o(655745),n=o(494351)},494351:(e,t,o)=>{o.d(t,{initComments:()=>l,unmountComments:()=>c});var i=o(474848),n=o(440961),r=o(171444),a=o(655745),d=o(689938),s=o(505954);const c=e=>{e&&n.unmountComponentAtNode(e)},l=(e,t)=>{e&&(n.render((0,i.jsx)(d.DIRootWebProvider,{children:(0,i.jsx)(s.AppRootProvider,{children:(0,i.jsx)(a.CommentsWidget,{...t})})}),e),(0,r.pushNavDestroy)((()=>{c(e)})))}},176888:(e,t,o)=>{o.d(t,{CommentsViewModel:()=>c});var i=o(331635),n=o(327813),r=o(127126),a=o(795624),d=o(142943),s=o(938507);class c{get ids(){return this.commentsList.ids}get lastAddedItemId(){return this._lastAddedItemId}get videoOwnerId(){return this._videoOwnerId}get videoId(){return this._videoId}get isAnonymousUser(){return 0===this.authService.userId}get isLoading(){return this._isLoading}get isCommentsLoading(){return this.commentsList.isLoading}get isCommentsLoadedFully(){return this.commentsList.isLoadedFully}getComment(e){return this.commentsProvider.getComment(e)}async[r.init]({videoId:e,ownerId:t}){this._isLoading=!0,this._videoOwnerId=t,this._videoId=e;try{await this.commentsList.fetch({videoId:e,ownerId:t,count:this._chunkSize})}catch(e){(0,n.runInAction)((()=>{this.error=e}))}finally{(0,n.runInAction)((()=>{this._isLoading=!1}))}}constructor(e,t,o){this.commentsListProvider=e,this.commentsProvider=t,this.authService=o,this.error=null,this._chunkSize=20,this._isLoading=!1,this._lastAddedItemId=null,this.addComment=e=>{this.authService.userId&&(this.commentsList.addComment(e),this._lastAddedItemId=e)},this.fetchMore=async()=>{this.error=null;try{return this.commentsList.fetchMore()}catch(e){(0,n.runInAction)((()=>{this.error=e}))}},this.commentsList=e.createList(),this.commentsProvider.setFields(["photo_50"]),(0,n.makeAutoObservable)(this)}}c=(0,i.__decorate)([r.scope.transient(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===d.VideoCommentsListProvider?Object:d.VideoCommentsListProvider,void 0===s.VideoCommentsProvider?Object:s.VideoCommentsProvider,void 0===a.AuthService?Object:a.AuthService])],c)},944676:(e,t,o)=>{o.d(t,{CommentsViewModelProvider:()=>r,useCommentsViewModel:()=>a});var i=o(127126),n=o(176888);const{Provider:r,useModel:a}=(0,i.createProvider)(n.CommentsViewModel)},489195:(e,t,o)=>{o.d(t,{mapUserOrGroupToCommentOwner:()=>i.mapUserOrGroupToCommentOwner,showFailSnackbar:()=>n.showFailSnackbar});var i=o(938401),n=o(785567)},938401:(e,t,o)=>{o.d(t,{mapUserOrGroupToCommentOwner:()=>a});var i=o(847891),n=o(214716),r=o(417517);const a=e=>{if(e)return{kind:i.Ranges.isGroupId(e.id)?"group":"user",is_nft:(0,n.checkOwnerIsNFT)(e),href:(0,r.getOwnerUrl)(e,"/video/@"),...e}}},785567:(e,t,o)=>{o.d(t,{showFailSnackbar:()=>d});var i=o(474848),n=o(659179),r=o(234337),a=o(852319);const d=e=>{(0,n.showSnackbar)({text:e,before:{content:(0,i.jsx)(a.Icon28ErrorCircleOutline,{className:(0,r.getColorClass)("color_icon_contrast")})}})}},990668:(e,t,o)=>{o.d(t,{CommentInput:()=>I});var i=o(474848),n=o(296540),r=o(456921),a=o(127126),d=o(8520),s=o(394062),c=o(461571),l=o(666112),m=o(349430),u=o(320830),h=o(380118),v=o(825084),p=o(770125),_=o(276943),g=o(565141),w=o(422495),f=o(379606),C=o(369873);const S=(0,r.observer)((function(){const e=(0,f.useCommentInputModel)(),t=(0,p.useLangs)(),o=(0,n.useRef)(null),r=async()=>{if(e.isSendingNotAllowed)return;await e.createComment()&&o.current&&(o.current.innerHTML="")},{handleInput:a}=(0,C.useEmoji)({inputValue:e.content,inputRef:o,onChangeInput:e.handleChange,emojiOpts:{onSend:r,onUGCStickerSend:d.noop,emojiLoadMore:d.noop,ref:"video_comment",global:!1,pickerBottomMargin:12,onStickerSend:d.noop}});return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(m.CommentInput,{getRef:o,before:(0,i.jsx)(m.CommentInput.Avatar,{href:"#",src:e?.user?.data?.photo_100}),inlineAfter:[(0,i.jsx)(m.CommentInput.IconButton,{children:(0,i.jsx)(s.Icon20Attach,{})},"attach"),(0,i.jsx)(u.TextTooltip,{text:t.getLang("video_comment_photo_attach_tooltip"),children:(0,i.jsx)(m.CommentInput.IconButton,{children:(0,i.jsx)(c.Icon20CameraOutline,{})})},"camera"),(0,i.jsx)(m.CommentInput.IconButton,{children:(0,i.jsx)(l.Icon20SmileOutline,{})},"smile")],bottom:(0,i.jsxs)(i.Fragment,{children:[e.contentLengthNotification&&(0,i.jsx)(h.Text,{children:e.contentLengthNotification}),(0,i.jsx)(v.CommentAttachments,{commentId:_.VIDEO_COMMENTS_MOCK.commentId,gap:"xl",formatSize:g.formatFileSize,formatDateTime:w.getFormattedUpdatedTime,deleteAriaLabel:t.getLang("me_attachment_dont_attach"),onDeletePhotoClick:d.noop,onDeleteDocClick:d.noop,onDeleteVideoClick:d.noop,attachments:_.VIDEO_COMMENTS_MOCK.attachmentsMock})]}),uploadingAttachments:(0,i.jsx)(m.CommentInput.UploadingAttachmentProgress,{index:1,name:_.VIDEO_COMMENTS_MOCK.attachedFileName,progress:_.VIDEO_COMMENTS_MOCK.progress}),placeholder:t.getLang("video_comment_input_placeholder"),sendDisabled:e.isSendingNotAllowed,onInput:a,onSendClick:r})})})),I=(0,a.createWidget)(f.CommentInputProvider,S)},361271:(e,t,o)=>{o.d(t,{CommentInput:()=>i.CommentInput});var i=o(990668)},849794:(e,t,o)=>{o.d(t,{CommentInputModel:()=>p});var i=o(331635),n=o(327813),r=o(8520),a=o(127126),d=o(795624),s=o(594020),c=o(493875),l=o(26823),m=o(896845),u=o(547172),h=o(785567);const v=["photo_100"];class p{[a.init](e){this._videoOwnerId=e.videoOwnerId,this._videoId=e.videoId,this._onCreateComment=e.onCreateComment,this.authService.userId&&this.usersFetchProvider.fetch({fields:v,userIds:[this.authService.userId]})}get user(){if(this.authService.userId)return this.videoUsersStore?.getById(this.authService.userId)}get contentLengthNotification(){return(0,u.getValidateLengthMessage)({value:this._content.trim(),maxLength:this.MAX_COMMENT_LENGTH,getExceededLengthLabel:e=>this.langs.numeric(e,this.langs.getLang("video_comment_recommended_exceeded",!0)),getRemainingLengthLabel:e=>this.langs.numeric(e,this.langs.getLang("video_comment_recommended_remained",!0))})}get isPending(){return this._isPending}get isSendingNotAllowed(){return this._isPending||0===this._content.trim().length||this._content.trim().length>this.MAX_COMMENT_LENGTH}get content(){return this._content}constructor(e,t,o,i,a){this.authService=e,this.videoCommentCreationService=t,this.usersStoreFactory=o,this.usersFetchProvider=i,this.langs=a,this.handleChange=e=>{this._content=e},this.createComment=async()=>{this._isPending=!0;try{const e=await this.videoCommentCreationService.createComment({videoId:this._videoId,ownerId:this._videoOwnerId,message:this.content.trim()});return e&&(this._content="",this._onCreateComment(e,this.content)),!0}catch(e){console.error(e),(0,h.showFailSnackbar)(this.langs.getLang("video_comment_publishing_fail_message"))}finally{(0,n.runInAction)((()=>{this._isPending=!1}))}},this._content="",this._isPending=!1,this.MAX_COMMENT_LENGTH=1e4,this.videoUsersStore=void 0,this._onCreateComment=r.noop,this.videoUsersStore=o.ensureByFields(v),(0,n.makeAutoObservable)(this)}}p=(0,i.__decorate)([a.scope.transient(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===d.AuthService?Object:d.AuthService,void 0===c.VideoCommentCreationService?Object:c.VideoCommentCreationService,void 0===l.VideoUsersStoreFactory?Object:l.VideoUsersStoreFactory,void 0===m.VideoUsersFetchProvider?Object:m.VideoUsersFetchProvider,void 0===s.Langs?Object:s.Langs])],p)},379606:(e,t,o)=>{o.d(t,{CommentInputProvider:()=>r,useCommentInputModel:()=>a});var i=o(127126),n=o(849794);const{Provider:r,useModel:a}=(0,i.createProvider)(n.CommentInputModel)},522280:(e,t,o)=>{o.d(t,{CommentItem:()=>S});var i=o(474848),n=o(456921),r=o(296540),a=o(127126),d=o(825084),s=o(272650),c=o(342330),l=o(8520),m=o(770125),u=o(422495),h=o(565141),v=o(828064),p=o(276943),_=o(435421),g=o(428386),w=o(203079);const f=e=>e?.length?(0,i.jsx)(d.CommentAttachments,{attachments:e,commentId:p.VIDEO_COMMENTS_MOCK.commentWithAttachmentId,formatSize:h.formatFileSize,formatDateTime:u.getFormattedUpdatedTime}):(0,i.jsx)(r.Fragment,{}),C=(0,n.observer)((function(){const e=(0,m.useLangs)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g.MainComment,{}),(0,i.jsxs)(s.CommentLayout,{children:[(0,i.jsx)(s.CommentLayout.Action,{src:p.VIDEO_COMMENTS_MOCK.secondAvatarUrl,expandable:!0,children:e.numeric(p.VIDEO_COMMENTS_MOCK.repliesNumber,e.getLang("video_replies_amount",!0))}),(0,i.jsx)(c.Comment,{replyActionLabel:e.getLang("me_message_action_reply"),onReplyClick:l.noop,onMoreClick:l.noop,onLikeClick:l.noop,actions:(0,i.jsx)(v.CommentActionMenu,{userRole:"reader"}),formatDateTime:w.formatDateTime,isCurrentUserOwner:!0,expandActionLabel:e.getLang("me_fc_expand_panel"),owner:p.VIDEO_COMMENTS_MOCK.commentOwner,comment:p.VIDEO_COMMENTS_MOCK.firstReply,renderAttachments:f}),(0,i.jsxs)(s.CommentLayout.Action,{children:[e.getLang("me_comments_load_more")," (",p.VIDEO_COMMENTS_MOCK.loadMoreRepliesNumber,")"]})]})]})})),S=(0,a.createWidget)(_.CommentItemProvider,C)},203079:(e,t,o)=>{o.d(t,{formatDateTime:()=>n});var i=o(422495);const n=e=>(0,i.getFormattedUpdatedTime)(e,!0)},69400:(e,t,o)=>{o.d(t,{CommentEdit:()=>u});var i=o(474848),n=o(456921),r=o(296540),a=o(342330),d=o(380118),s=o(349430),c=o(770125),l=o(489195),m=o(435421);const u=(0,n.observer)((function(){const e=(0,m.useCommentItemModel)(),{commentEdit:t,commentDelete:o}=e,n=(0,c.useLangs)();return(0,r.useEffect)((()=>{t.setDefaultText()}),[]),(0,i.jsx)(a.Comment.Edit,{owner:(0,l.mapUserOrGroupToCommentOwner)(e.owner),afterOwnerName:n.getLang("video_comment_edit_label"),sendActionLabel:n.getLang("global_save"),cancelActionLabel:n.getLang("global_cancel"),deleteActionLabel:n.getLang("global_delete"),onSendClick:t.save,sendDisabled:t.isSendDisabled,onDeleteClick:o.delete,onCancelClick:t.cancelEdit,bottom:t.lengthWarning&&(0,i.jsx)(d.Text,{children:t.lengthWarning}),field:(0,i.jsx)(s.CommentInput.ContentEditable,{getRef:t.inputRef,onInput:t.changeInput})})}))},214965:(e,t,o)=>{o.d(t,{CommentEdit:()=>i.CommentEdit});var i=o(69400)},997716:(e,t,o)=>{o.d(t,{MainComment:()=>f});var i=o(474848),n=o(456921),r=o(327813),a=o(296540),d=o(8520),s=o(770125),c=o(732408),l=o(342330),m=o(865757),u=o(19611),h=o(337962),v=o(435421),p=o(489195),_=o(828064),g=o(214965),w=o(203079);const f=(0,n.observer)((function(){const e=(0,v.useCommentItemModel)(),{commentEdit:t,commentDelete:o}=e,n=(0,s.useLangs)();return t.isEditing?(0,i.jsx)(g.CommentEdit,{}):o.isDeleted?(0,i.jsx)(c.CommentDeleted,{onRestoreClick:o.restore,restoreActionLabel:n.getLang("video_restorecomm"),children:n.getLang("video_comm_deleted")}):(0,i.jsx)(l.Comment,{comment:(0,u.parseCommentProps)((0,r.toJS)(e.comment)),replyActionLabel:n.getLang("me_message_action_reply"),onReplyClick:d.noop,onMoreClick:d.noop,onLikeClick:e.toggleLike,formatText:h.formatCommentText,actions:(0,i.jsx)(_.CommentActionMenu,{userRole:"owner"}),formatDateTime:w.formatDateTime,owner:(0,p.mapUserOrGroupToCommentOwner)(e.owner),parentOwner:(0,p.mapUserOrGroupToCommentOwner)(e.parentOwner),renderAttachments:()=>(0,i.jsx)(a.Fragment,{}),isSelected:e.isHighlighted,isCurrentUserOwner:e.isCurrentUserCommentOwner,expandActionLabel:n.getLang("me_fc_expand_panel"),avatarBadge:e.isCommentOwnerVideoOwner?(0,i.jsx)(m.Icon16StarCircleFillBlue,{}):void 0})}))},428386:(e,t,o)=>{o.d(t,{MainComment:()=>i.MainComment});var i=o(997716)},948718:(e,t,o)=>{o.d(t,{CommentItem:()=>i.CommentItem});var i=o(522280)},621870:(e,t,o)=>{o.d(t,{CommentDeleteModel:()=>a});var i=o(327813),n=o(229840),r=o(489195);class a{get canDelete(){return Boolean(this.commentData.can_delete)}get isDeleted(){return this.commentData.deleted||this.commentsDeletingProvider.isDeleted(this.commentRawId)}get commentData(){return this.props.current.comment.data}get commentRawId(){return this.props.current.comment.rawId}get videoOwnerId(){return this.props.current.videoOwnerId}constructor(e,t,o,a){this.props=e,this.commentEdit=t,this.commentsDeletingProvider=o,this.langs=a,this.delete=async()=>{this.abortController?.abort(),this.abortController=new AbortController;const e={commentId:this.commentRawId,ownerId:this.videoOwnerId};this.commentEdit.cancelEdit();try{await this.commentsDeletingProvider.delete(e,{signal:this.abortController.signal}),(0,i.runInAction)((()=>{this.abortController=null}))}catch(e){(0,n.isAbortError)(e)||(0,r.showFailSnackbar)(this.langs.getLang("video_comment_delete_fail_message"))}},this.restore=async()=>{this.abortController?.abort(),this.abortController=new AbortController;const e={commentId:this.commentRawId,ownerId:this.videoOwnerId};try{await this.commentsDeletingProvider.restore(e,{signal:this.abortController.signal}),(0,i.runInAction)((()=>{this.abortController=null}))}catch(e){(0,n.isAbortError)(e)||(0,r.showFailSnackbar)(this.langs.getLang("video_comment_restore_fail_message"))}},this.abortController=null,(0,i.makeAutoObservable)(this)}}},994415:(e,t,o)=>{o.d(t,{CommentEditModel:()=>l});var i=o(327813),n=o(296540),r=o(229840),a=o(127126),d=o(37555),s=o(547172),c=o(489195);class l{get inputRef(){return this._inputRef}get canEdit(){return Boolean(this.commentData.can_edit)}get inputValue(){return this._inputValue}get isEditing(){return this._isEditing}get isCommentSaved(){return this._isCommentSaved}get isSendDisabled(){return this.isLoading||this.isEmptyValue||this.isNoChanges||this.isLimitExceeded}get lengthWarning(){return(0,s.getValidateLengthMessage)({value:this._inputValue,maxLength:this.MAX_INPUT_LENGTH,getExceededLengthLabel:e=>this.langs.numeric(e,this.langs.getLang("video_comment_recommended_exceeded",!0)),getRemainingLengthLabel:e=>this.langs.numeric(e,this.langs.getLang("video_comment_recommended_remained",!0))})}resetSavingAfter(e){this._timer=setTimeout((0,i.action)((()=>{this._isCommentSaved=!1})),e)}setDefaultText(){this._inputRef?.current&&(this._inputRef.current.innerText=this.commentData.text,(0,d.setEndOfContentEditable)(this._inputRef.current))}[a.destroy](){clearTimeout(this._timer)}get isEmptyValue(){return 0===this._inputValue.trim().length}get isNoChanges(){return this._inputValue===this.commentData.text}get isLimitExceeded(){return this._inputValue.length>this.MAX_INPUT_LENGTH}get commentData(){return this.props.current.comment.data}constructor(e,t){this.props=e,this.langs=t,this.setIsEditing=()=>{this._isEditing=!0,this.setInputValue(this.commentData.text)},this.save=async()=>{this.abortController?.abort(),this.abortController=new AbortController;const e={ownerId:this.props.current.videoOwnerId,text:this._inputValue};try{this.isLoading=!0,await this.props.current.comment.edit(e,{signal:this.abortController.signal}),(0,i.runInAction)((()=>{this._isCommentSaved=!0,this._isEditing=!1,this.resetSavingAfter(2e3),this.abortController=null}))}catch{r.isAbortError||(0,c.showFailSnackbar)(this.langs.getLang("video_comment_edit_fail_message"))}finally{(0,i.runInAction)((()=>{this.isLoading=!1}))}},this.cancelEdit=()=>{this._isEditing=!1,this.setInputValue(this.commentData.text)},this.setInputValue=e=>{this._inputValue=e},this.changeInput=({target:e})=>{e instanceof HTMLElement&&null!==e.innerText&&this.setInputValue(e.innerText)},this._inputRef=(0,n.createRef)(),this._isCommentSaved=!1,this.isLoading=!1,this._inputValue="",this._timer=void 0,this.abortController=null,this.MAX_INPUT_LENGTH=1e4,this._isEditing=!1,(0,i.makeAutoObservable)(this)}}},638565:(e,t,o)=>{o.d(t,{CommentItemViewModel:()=>v});var i=o(331635),n=o(327813),r=o(127126),a=o(5403),d=o(206681),s=o(795624),c=o(594020),l=o(994415),m=o(621870),u=o(334761),h=o(678041);class v{[r.init](e){e.isHighlightedTemporarily&&(this._isHighlighted=!0,this.resetSelectionAfter(2e3))}[r.destroy](){clearTimeout(this._timer)}resetSelectionAfter(e){this._timer=setTimeout((0,n.action)((()=>{this._isHighlighted=!1})),e)}get comment(){return this.props.current.comment.data}get owner(){return this.props.current.comment.owner?.data}get isHighlighted(){return this._isHighlighted}get parentOwner(){return this.props.current.comment.parentOwner?.data}get videoOwnerId(){return this.props.current.videoOwnerId}get isCurrentUserCommentOwner(){return this.currentUserId===this.owner?.id}get isCommentOwnerVideoOwner(){return this.videoOwnerId===this.owner?.id}get currentUserId(){return this.authService.userId??0}constructor(e,t,o,i,r){this.props=e,this.authService=t,this.commentsDeletingProvider=o,this.commentsReportService=i,this.langs=r,this.toggleLike=()=>{this.props.current.comment.likes.toggleLike({ownerId:this.videoOwnerId,optimistic:!0})},this.reportComment=()=>{(0,h.showReportForm)("video_comment",this.videoOwnerId,this.comment.id,this.commentReport.report)},this._isHighlighted=!1,this._timer=void 0,this.commentEdit=new l.CommentEditModel(this.props,this.langs),this.commentDelete=new m.CommentDeleteModel(this.props,this.commentEdit,this.commentsDeletingProvider,this.langs),this.commentReport=new u.CommentReportModel(this.props,this.commentsReportService),(0,n.makeAutoObservable)(this)}}v=(0,i.__decorate)([r.scope.transient(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===r.Props?Object:r.Props,void 0===s.AuthService?Object:s.AuthService,void 0===a.VideoCommentsDeletingProvider?Object:a.VideoCommentsDeletingProvider,void 0===d.VideoCommentsReportService?Object:d.VideoCommentsReportService,void 0===c.Langs?Object:c.Langs])],v)},334761:(e,t,o)=>{o.d(t,{CommentReportModel:()=>n});var i=o(327813);class n{constructor(e,t){this.props=e,this.commentsReportProvider=t,this.report=async e=>{const t={commentId:this.props.current.comment.rawId,ownerId:this.props.current.videoOwnerId,reason:e};try{await this.commentsReportProvider.report(t)}catch(e){throw e}},(0,i.makeAutoObservable)(this)}}},435421:(e,t,o)=>{o.d(t,{CommentItemProvider:()=>r,useCommentItemModel:()=>a});var i=o(127126),n=o(638565);const{Provider:r,useModel:a}=(0,i.createProvider)(n.CommentItemViewModel)},648875:(e,t,o)=>{o.d(t,{CommentInput:()=>i.CommentInput,CommentItem:()=>n.CommentItem});var i=o(361271),n=o(948718)},968745:(e,t,o)=>{o.d(t,{Episodes:()=>S});var i=o(474848),n=o(296540),r=o(293721),a=o(8520),d=o(505954),s=o(753457),c=o(785118),l=o(625134),m=o(533048),u=o(380118),h=o(234337),v=o(439220),p=o(890936),_=o(178487),g=o(610989),w=o(214303),f=o(571721),C=o(597260);const S=({timeCodes:e})=>{const t=(0,n.useRef)([]),{$activeEpisode:o,$scrollHeight:S}=(0,r.useUnit)(f.videoModalEpisodeService);return(0,n.useEffect)((()=>{null!==o&&t?.current?.[o]?.scrollIntoView({behavior:"smooth",block:"center"})}),[o]),(0,i.jsx)(d.AppRootProvider,{children:(0,i.jsx)(s.AppearanceProvider,{value:"dark",children:(0,i.jsxs)("div",{className:C.default.container,children:[(0,i.jsx)(c.Div,{mode:"horizontal",spacing:0,children:(0,i.jsx)(l.Header,{mode:"primary",aside:(0,i.jsx)(m.Button,{mode:"link",onClick:w.handleCloseEpisodeList,children:(0,i.jsx)(u.Subhead,{className:(0,h.getColorClass)("color_text_subhead"),weight:"3",children:g.getLang("video_close_time_code_list")})}),children:g.getLang("video_n_time_codes",e.length,!0)})}),(0,i.jsx)(v.ModalScrollView,{height:S?S-52:"100%",autoHideScrollbar:!0,children:(0,i.jsx)(c.Div,{mode:"vertical",spacing:0,paddingBottom:4,paddingTop:0,children:e.map((({time:e,text:n},r)=>{const{imgSrc:d,imgWidth:s,imgHeight:c,imgOffsetX:l,imgOffsetY:m}=window.Videoview.getThumbFromTime(e,128);return(0,i.jsx)(p.VideoEpisodeCard,{getRootRef:e=>t.current[r]=e,timeCode:(0,_.formatTime)(e),text:(0,a.decodeHTMLEntities)(n),thumbSrc:d,onShareClick:()=>(0,w.handleShare)(e),onClick:t=>(0,w.handleShowTimeTag)(t,e,r),previewWidth:s,previewHeight:c,previewOffsetX:l,previewOffsetY:m,isActive:r===o,shareAriaLabel:g.getLang("video_share"),activeEffectDelay:2e3},e)}))})})]})})})}},769793:(e,t,o)=>{o.d(t,{Episodes:()=>n.Episodes,initVideoModalEpisodes:()=>i.initVideoModalEpisodes,unmountVideoModalEpisodes:()=>i.unmountVideoModalEpisodes});var i=o(144235),n=o(968745)},144235:(e,t,o)=>{o.d(t,{initVideoModalEpisodes:()=>s,unmountVideoModalEpisodes:()=>d});var i=o(474848),n=o(968745),r=o(440961),a=o(171444);const d=e=>{e&&r.unmountComponentAtNode(e)},s=(e,t)=>{e&&(r.render((0,i.jsx)(n.Episodes,{...t}),e),(0,a.pushNavDestroy)((()=>{d(e)})))}},519619:(e,t,o)=>{o.d(t,{PlayerSidebar:()=>d});var i=o(474848),n=o(505954),r=o(213266),a=o(145913);const d=({videoId:e,playlistId:t})=>{const o=(0,r.usePlayerStoreType)();return(0,i.jsx)(n.AppRootProvider,{children:o===r.PlaylistStoreType&&(0,i.jsx)(a.PlaylistVideosList,{videoId:e,playlistId:t})})}},797688:(e,t,o)=>{o.d(t,{PlaylistVideo:()=>m});var i=o(474848),n=o(954394),r=o(33281),a=o(898780),d=o(297215),s=o(86220),c=o(209631);const l=e=>e.stopPropagation(),m=({video:e,onVideoOpen:t,isHighlighted:o})=>{const m=(0,d.useOwner)(e,s.entitiesGroupsService,s.entitiesUsersService),u=(0,a.mapVideoFullToVideoCardItem)({...e,date:void 0},m);u.owner.badge=void 0;const h={video:u,videoContainerWidth:128,onAuthorClick:l,isHighlighted:o,direction:"horizontal",size:"s",noRounded:!0};return e.content_restricted||(h.video.href=(0,r.getVideoUrl)(e),h.onVideoOpen=t,h.onThumbClick=c.handleOnlyCtrlClickOnLink,h.onTitleClick=c.handleOnlyCtrlClickOnLink),(0,i.jsx)(n.VideoCard,{...h})}},98401:(e,t,o)=>{o.d(t,{PlaylistVideosList:()=>C});var i=o(474848),n=o(293721),r=o(296540),a=o(222241),d=o(112268),s=o(757459),c=o(932209),l=o(753457),m=o(500774),u=o(625134),h=o(428918),v=o(116638),p=o(610989),_=o(571721),g=o(744025),w=o(797688),f=o(917248);const C=({videoId:e,playlistId:t})=>{const[o,C]=(0,r.useState)(e),S=(0,n.useStore)(_.videoModalContextService.$playlistData),I=(0,n.useStore)(_.videoModalContextService.$videosIds),b=(0,a.useEntitiesStoreMap)(_.videoModalContextService.$videoEntities,I??[]),k=(0,n.useEvent)(_.videoModalContextService.processPlaylistEvent),x=e=>o=>{const i=(0,d.joinRawId)({itemId:e.id,ownerId:e.owner_id});(0,g.showVideo)(i,"",{playlistId:t,autoplay:1,addParams:{force_no_repeat:1,track_code:e.track_code}},o),C(i)};return(0,r.useEffect)((()=>{if(t){const{itemId:e,ownerId:o}=(0,s.splitRawId)(t);k({ownerId:o,playlistId:e})}}),[t]),S?(0,i.jsx)(l.AppearanceProvider,{value:"dark",children:(0,i.jsxs)(m.Group,{className:f.default.root,noTopRounded:!0,noBottomRounded:!0,children:[(0,i.jsx)(u.Header,{subtitle:S.count&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.Spacing,{size:4}),p.getLang("video_count_in_playlist",S.count)]}),children:S.title}),(0,i.jsx)(h.Spacing,{size:2}),(0,i.jsx)(m.Group.ExpandedContent,{className:f.default.list,children:(0,i.jsx)(v.CustomScrollView,{autoHideScrollbar:!0,children:b.map((e=>{if(!(0,c.isVideoVideoFullWithIds)(e))return null;const t=(0,d.joinRawId)({itemId:e.id,ownerId:e.owner_id});return(0,i.jsx)(w.PlaylistVideo,{video:e,isHighlighted:t===o,onVideoOpen:x(e)},t)}))})})]})}):null}},145913:(e,t,o)=>{o.d(t,{PlaylistVideosList:()=>i.PlaylistVideosList});var i=o(98401)},51438:(e,t,o)=>{o.d(t,{PlayerSidebar:()=>i.PlayerSidebar,initVideoModalPlayerSidebar:()=>n.initVideoModalPlayerSidebar,unmountVideoModalPlayerSidebar:()=>n.unmountVideoModalPlayerSidebar});var i=o(519619),n=o(820261)},820261:(e,t,o)=>{o.d(t,{initVideoModalPlayerSidebar:()=>s,unmountVideoModalPlayerSidebar:()=>d});var i=o(474848),n=o(519619),r=o(440961),a=o(171444);const d=e=>{e&&r.unmountComponentAtNode(e)},s=(e,t)=>{e&&(r.render((0,i.jsx)(n.PlayerSidebar,{...t}),e),(0,a.pushNavDestroy)((()=>{d(e)})))}},917237:(e,t,o)=>{o.d(t,{PlaylistPopoverWrapper:()=>h});var i=o(474848),n=o(860310),r=o(964929),a=o(86220),d=o(293721),s=o(296540),c=o(400281),l=o(422495),m=o(476726),u=o(297215);const h=({video:e,children:t,ownerId:o,onShownChange:h,...v})=>{const[p,_]=(0,s.useState)(!1),{$needsRefetch:g,setNeedsRefetch:w,$addedToMy:f,$videoAlbumsLoading:C,fetchPlaylistsEvent:S,fetchMorePlaylistsEvent:I,setUpstreamPlaylists:b,setOwnerIdEvent:k,setVideoId:x,setVideoOwnerIdEvent:E,setAddedToMyEvent:y,togglePlaylistAddedEvent:A,createPlaylistEvent:M,resetVideosAlbumsEvent:V,setAddedEvent:L}=(0,d.useUnit)(a.videoModalAlbumsService),j=(0,u.usePlaylists)(a.videoModalAlbumsService.$playlistEntityStore),T=e=>{h?.(e),_(e)};return(0,s.useEffect)((()=>{k(o),x(e.id),y(e.addedToMy),E(e.mainOwnerId),g||b(e.playlists)}),[]),(0,s.useEffect)((()=>{p&&g&&(S(),w(!1))}),[p,g]),(0,s.useEffect)((()=>{if((0,m.partConfigEnabled)("video_playlist_redesign_popup"))return;const e=e=>{window.VideoShowcase?(V(o),w(!0),L(!0)):M(e.detail)};return window.addEventListener(c.PlaylistFormEvents.CREATE,e),()=>{window.removeEventListener(c.PlaylistFormEvents.CREATE,e)}}),[]),(0,i.jsx)(n.PlaylistPopover,{playlists:j,addedToMy:f??!1,videoId:e.id,videoOwnerId:e.mainOwnerId,onToggleVideoAdded:(e,t)=>{A({album_id:t,isAdded:e})},onCreateNewPlaylist:t=>{T(!1),(0,m.partConfigEnabled)("video_playlist_redesign_popup")?(0,r.showPlaylistModal)({ownerId:o,onCreate:M,hasOnCreateSnackbar:!1}):(0,c.createPlaylistPopup)(t,o,e.id,e.mainOwnerId,c.CreatePlaylistRequestOrigin.VIDEO_PLAYLISTS_MODAL).catch()},fetchMorePlaylistEvent:I,playlistsLoading:C??!1,onShownChange:T,width:l.PLAYLIST_POPOVER_WIDTH,maxWidth:l.PLAYLIST_POPOVER_WIDTH,...v,children:t})}},127672:(e,t,o)=>{o.d(t,{VideoModalRecommendationsClient:()=>v});var i=o(474848),n=o(296540),r=o(293721),a=o(86220),d=o(8520),s=o(567142),c=o(505954),l=o(625134),m=o(480958),u=o(200954),h=o(610989);const v=({ownerId:e,videoId:t,trackCode:o})=>{const v=(0,n.useRef)(null),p=(0,r.useEvent)(a.videoModalRecommendationsService.getRecommendationsEvent),_=(0,r.useEvent)(a.videoModalRecommendationsService.abortRequestEvent);return(0,n.useEffect)((()=>(p({ownerId:e,videoId:t,trackCode:o}),()=>{_()})),[e,t]),(0,i.jsx)(c.AppRootProvider,{children:(0,i.jsxs)("div",{className:(0,d.classNames)("js-video-modal-recommendations",s.default.recommendationsContainer),ref:v,children:[(0,i.jsx)(l.Header,{children:(0,i.jsx)(m.TextClamp,{lines:0,children:h.getLang("video_modal_recommendations")})}),(0,i.jsx)(u.RecommendationsVideos,{})]})})}},137808:(e,t,o)=>{o.d(t,{hydrateVideoModalRecommendations:()=>c,unmountVideoModalRecommendations:()=>s});var i=o(823875),n=o(185198),r=o(171444),a=o(440961),d=o(127672);const s=e=>{e&&a.unmountComponentAtNode(e)},c=()=>{(0,i.tq)().setStartupHandler("VideoModalRecommendations/init",(e=>{(0,n.hydrateComponent)({descriptor:e,component:d.VideoModalRecommendationsClient});const{target:t}=e.payload;(0,r.pushNavDestroy)((()=>{s(t)}))}))}},509513:(e,t,o)=>{o.d(t,{RecommendationsVideo:()=>p});var i=o(474848),n=o(293721),r=o(296540),a=o(954394),d=o(33281),s=o(898780),c=o(297215),l=o(944255),m=o(86220),u=o(209631),h=o(273283);const v=e=>e.stopPropagation(),p=(0,r.memo)((({video:e})=>{const t=(0,c.useOwner)(e,m.entitiesGroupsService,m.entitiesUsersService),o=(0,d.getVideoUrl)(e),r={...(0,s.mapVideoFullToVideoCardItem)(e,t),href:o},p=(0,n.useEvent)(m.videoModalRecommendationsService.toggleFaveEvent),{menuItems:_,onMenuPopoverShownChanged:g}=(0,c.useVideoMenuItems)({video:e,handlers:{onToggleFave:()=>p({id:e.id,ownerId:e.owner_id,ref:e.track_code})}}),w=e.content_restricted?{video:r}:{onVideoOpen:t=>(0,l.openVideoExtended)(t,e),onThumbClick:u.handleOnlyCtrlClickOnLink,onTitleClick:u.handleOnlyCtrlClickOnLink,video:{...r,href:o}},{onShownChange:f,restoreFocus:C}=u.fixVideoPlayerScrollPopover;return(0,i.jsx)(a.VideoCard,{...w,direction:"horizontal",isAvatarHidden:!0,size:"s",videoContainerWidth:h.VIDEO_RECOMMENDATIONS_VIDEO_CARD_WIDTH,menuItems:_,onAuthorClick:v,onMenuPopoverShownChanged:g,onMenuPopoverShownChange:f,restoreMenuPopoverFocus:C})}))},176118:(e,t,o)=>{o.d(t,{RecommendationsVideos:()=>s});var i=o(474848),n=o(293721),r=o(86220),a=o(817326),d=o(431360);const s=()=>null===(0,n.useStore)(r.videoModalRecommendationsService.$videosIds)?(0,i.jsx)(d.RecommendationsVideosInitial,{}):(0,i.jsx)(a.RecommendationsVideosList,{})},431360:(e,t,o)=>{o.d(t,{RecommendationsVideosInitial:()=>s});var i=o(474848),n=o(293721),r=o(520837),a=o(86220),d=o(273283);const s=()=>(0,n.useStore)(a.videoModalRecommendationsService.$videosLoading)?(0,i.jsx)(r.HorizontalMiniVideoCardListSkeleton,{count:5,cardWidth:d.VIDEO_RECOMMENDATIONS_VIDEO_CARD_WIDTH}):null},817326:(e,t,o)=>{o.d(t,{RecommendationsVideosList:()=>h});var i=o(474848),n=o(296540),r=o(222241),a=o(932209),d=o(112268),s=o(39170),c=o(86220),l=o(293721),m=o(509513),u=o(209631);const h=()=>{const e=(0,l.useStore)(c.videoModalRecommendationsService.$videosIds),t=(0,l.useStore)(c.videoModalRecommendationsService.$videosFullyLoaded),o=(0,l.useStore)(c.videoModalRecommendationsService.$videosLoading),h=(0,l.useEvent)(c.videoModalRecommendationsService.fetchMoreRecommendationsVideosEvent),v=(0,r.useEntitiesStoreMap)(c.videoModalRecommendationsService.$recommendationsEntities,e??[]);return(0,i.jsxs)(i.Fragment,{children:[v.map((e=>(0,a.isVideoVideoFullWithIds)(e)&&(0,n.createElement)(m.RecommendationsVideo,{...u.fixVideoPlayerScrollPopover,key:(0,d.joinRawId)({itemId:e.id,ownerId:e.owner_id}),video:e}))),!t&&(0,i.jsx)(s.DynamicPagination,{isLoading:Boolean(o),fetchData:h,nextFrom:v.length})]})}},273283:(e,t,o)=>{o.d(t,{VIDEO_RECOMMENDATIONS_VIDEO_CARD_WIDTH:()=>i});const i=128},200954:(e,t,o)=>{o.d(t,{RecommendationsVideos:()=>i.RecommendationsVideos});var i=o(176118)},783045:(e,t,o)=>{o.d(t,{unmountVideoModalRecommendations:()=>i.unmountVideoModalRecommendations});var i=o(137808)},287870:(e,t,o)=>{o.d(t,{handleAddToCommunity:()=>i});const i=async(e,t)=>{window.Videoview||await window.stManager.add([window.jsc("web/videoview.js")]),window.Videoview._onAddToCommunity(e,t)}},253916:(e,t,o)=>{o.d(t,{handleCloseEpisodeList:()=>i});const i=()=>{window.Videoview.closeTimeCodesList()}},237407:(e,t,o)=>{o.d(t,{handleCopyToClipboardErId:()=>s});var i=o(474848),n=o(610989),r=o(659179),a=o(8520),d=o(629775);const s=e=>{e&&0!==e.length&&((0,a.copyTextToClipboard)(e),(0,r.showSnackbar)({text:n.getLang("video_moderation_snackbar_copied"),before:{content:(0,i.jsx)(d.Icon20CheckAlt,{})}}))}},125968:(e,t,o)=>{o.d(t,{handleCopyToClipboardVideoLink:()=>m});var i=o(474848),n=o(8520),r=o(705744),a=o(659179),d=o(610989),s=o(112268),c=o(76449),l=o(102846);const m=(e,t)=>{(0,n.copyTextToClipboard)(`https://${(0,r.getHostName)()}/video${(0,s.joinRawId)({ownerId:e,itemId:t})}`),(0,a.showSnackbar)({text:(0,i.jsx)(l.InnerHTML,{className:"VideoNotification__title",children:d.getLang("video_copied_to_clipboard")}),before:{content:(0,i.jsx)(c.Icon24CheckCircleOutline,{})}})}},28499:(e,t,o)=>{o.d(t,{handleDeleteVideo:()=>i});const i=async()=>{window.Videoview||await window.stManager.add([window.jsc("web/videoview.js")]),window.Videoview._onDelete()}},401954:(e,t,o)=>{o.d(t,{handleEditVideo:()=>i});const i=async(e,t)=>{window.Videoview||await window.stManager.add([window.jsc("web/videoview.js")]),window.Videoview._onEdit(e,t)}},81272:(e,t,o)=>{o.d(t,{handleExportVideo:()=>i});const i=async e=>{window.Videoview||await window.stManager.add([window.jsc("web/videoview.js")]),window.Videoview._onExport(e)}},124049:(e,t,o)=>{o.d(t,{handleExternalPlayerAddVideo:()=>i});const i=async e=>{window.Videoview||await window.stManager.add([window.jsc("web/videoview.js")]);const t=window.Videoview.getPlayerObject();t?.onExternalAdded(e)}},731710:(e,t,o)=>{o.d(t,{handleShare:()=>i});const i=e=>{window.Videoview?.sendVideo(!1,e)}},955933:(e,t,o)=>{o.d(t,{handleShowTimeTag:()=>n});var i=o(571721);const n=(e,t,o)=>{i.videoModalEpisodeService.changeActiveEpisode(o),window.Videoview.timeTagClick(t,"list",e)}},412251:(e,t,o)=>{o.d(t,{handleShowUMA:()=>i});const i=async(e,t)=>{window.Video||await window.stManager.add([window.jsc("web/video.js")]),window.Video.onVideoUMA(void 0,void 0,e,t)}},798713:(e,t,o)=>{o.d(t,{handleSubscribeVideoAuthor:()=>n});var i=o(86220);const n=e=>{i.videoModalSubscribeService.toggleSubscribeEvent({authorId:e})}},380997:(e,t,o)=>{o.d(t,{handleToggleFavorite:()=>n});var i=o(571721);const n=async e=>{window.Videoview||await window.stManager.add([window.jsc("web/videoview.js")]);const t=window.Videoview.getPlayerObject();if(t?.onBookmarked)return void t.onBookmarked(e);const o=window.Videoview.getMvData();if(!o)return;const{oid:n,vid:r,track_code:a,itemAccessHash:d}=o;i.videoModalFaveService.toggleFaveEvent({ownerId:n,id:r,ref:a,source:e,accessKey:d})}},762402:(e,t,o)=>{o.d(t,{handleToggleLike:()=>i});const i=async()=>{window.Videoview||await window.stManager.add([window.jsc("web/videoview.js")]),window.Videoview.like(null,!1)}},864799:(e,t,o)=>{o.d(t,{handleViewVideoStatistic:()=>i});const i=async()=>{window.Videoview||await window.stManager.add([window.jsc("web/videoview.js")]),window.Videoview._onViewStats()}},214303:(e,t,o)=>{o.d(t,{handleAddToCommunity:()=>i.handleAddToCommunity,handleBlurContent:()=>h.handleBlurContent,handleCloseEpisodeList:()=>g.handleCloseEpisodeList,handleCopyToClipboardVideoLink:()=>d.handleCopyToClipboardVideoLink,handleDeleteVideo:()=>n.handleDeleteVideo,handleDeleteVideoWithReason:()=>h.handleDeleteVideoWithReason,handleEditVideo:()=>r.handleEditVideo,handleExportVideo:()=>a.handleExportVideo,handleExternalPlayerAddVideo:()=>u.handleExternalPlayerAddVideo,handleForbidVideo:()=>h.handleForbidVideo,handleGeoBlockContent:()=>h.handleGeoBlockContent,handleShare:()=>p.handleShare,handleShowTimeTag:()=>_.handleShowTimeTag,handleShowUMA:()=>v.handleShowUMA,handleSubscribeVideoAuthor:()=>l.handleSubscribeVideoAuthor,handleToggleFavorite:()=>s.handleToggleFavorite,handleToggleLike:()=>c.handleToggleLike,handleViewVideoStatistic:()=>m.handleViewVideoStatistic});var i=o(287870),n=o(28499),r=o(401954),a=o(81272),d=o(125968),s=o(380997),c=o(762402),l=o(798713),m=o(864799),u=o(124049),h=o(397466),v=o(412251),p=o(731710),_=o(955933),g=o(253916)},819358:(e,t,o)=>{o.d(t,{handleBlurContent:()=>i});const i=async(e,t)=>{window.scblf||await window.stManager.add([window.jsc("internal/ShowContentBlockForms.js")]),window.scblf&&window.scblf("video",e,t)}},271886:(e,t,o)=>{o.d(t,{handleDeleteVideoWithReason:()=>i});const i=async({ownerId:e,videoId:t,deleteWithReason:o,claimId:i=0})=>{if(window.ssfof||await window.stManager.add([window.jsc("internal/ShowStrikeForbidObjectForm.js")]),o&&window.ssfof){const{forbiddenObjectTypeId:n,dmcaTitle:r}=o;window.ssfof(e,t,n,i,r)}}},924201:(e,t,o)=>{o.d(t,{handleForbidVideo:()=>i});const i=async(e,t,o)=>{window.sfof||await window.stManager.add([window.jsc("internal/ShowForbidObjectForm.js")]),window.sfof&&window.sfof(e,t,o)}},506051:(e,t,o)=>{o.d(t,{handleGeoBlockContent:()=>i});const i=async(e,t)=>{window.scgbf||await window.stManager.add([window.jsc("internal/ShowContentBlockForms.js")]),window.scgbf&&window.scgbf("video",e,t)}},397466:(e,t,o)=>{o.d(t,{handleBlurContent:()=>n.handleBlurContent,handleDeleteVideoWithReason:()=>a.handleDeleteVideoWithReason,handleForbidVideo:()=>i.handleForbidVideo,handleGeoBlockContent:()=>r.handleGeoBlockContent});var i=o(924201),n=o(819358),r=o(506051),a=o(271886)},213266:(e,t,o)=>{o.d(t,{PlaylistStoreType:()=>n.PlaylistStoreType,useMenuItemsHandlers:()=>i.useMenuItemsHandlers,useMoreMenuActions:()=>r.useMoreMenuActions,usePlayerStoreType:()=>n.usePlayerStoreType});var i=o(727827),n=o(312411),r=o(925064)},727827:(e,t,o)=>{o.d(t,{useMenuItemsHandlers:()=>h});var i=o(86220),n=o(293721),r=o(214303),a=o(90931),d=o(181480),s=o(189776),c=o(60553),l=o(928898),m=o(581903),u=o(695290);const h=({ownerId:e,videoId:t,trackCode:o})=>{const h=(0,n.useStore)(i.videoModalService.$isShortVideo),v=(0,n.useStore)(i.videoModalService.$isActiveLive),p=(0,n.useStore)(i.videoModalService.$title),_=(0,n.useStore)(i.videoModalService.$isLiked),g=(0,n.useStore)(i.videoModalSubscribeService.$isSubscribe),w=(0,n.useStore)(i.videoModalFaveService.$isFavorite),f=void 0!==t;return{onAddToGroupClick:()=>{f&&(0,r.handleAddToCommunity)(e,t)},onDeleteVideoClick:()=>{f&&((0,r.handleDeleteVideo)(),w&&(0,r.handleToggleFavorite)(s.FAVORITE_SOURCES.VIDEO_PLAYER_MODAL))},onEditVideoClick:()=>{f&&(0,r.handleEditVideo)(h,v)},onExportVideoClick:()=>{f&&(0,r.handleExportVideo)(h)},onCopyToClipboardVideoLink:()=>{f&&(o&&m.searchStatsCollector.logEvent({track_code:o,type:u.EventItemType.VIDEO,action:u.SearchClickActionMap.COPY_LINK_OUT}),(0,r.handleCopyToClipboardVideoLink)(e,t))},onToggleFavorite:()=>{t&&(o&&m.searchStatsCollector.logEvent({track_code:o,type:u.EventItemType.VIDEO,action:w?u.SearchClickActionMap.UNFAVE_OUT:u.SearchClickActionMap.FAVE_OUT}),(0,r.handleToggleFavorite)(s.FAVORITE_SOURCES.VIDEO_PLAYER_MODAL))},onSubscribeVideoAuthor:()=>{o&&m.searchStatsCollector.logEvent({track_code:o,type:u.EventItemType.VIDEO,action:g?u.SearchClickActionMap.UNSUBSCRIBE_OUT:u.SearchClickActionMap.SUBSCRIBE_OUT}),(0,r.handleSubscribeVideoAuthor)(e)},onSendReport:o=>{f&&(0,a.sendReportExtended)(o,{id:t,owner_id:e},{withoutCardFeedback:!0})},onToggleLike:()=>{f&&(o&&m.searchStatsCollector.logEvent({track_code:o,type:u.EventItemType.VIDEO,action:_?u.SearchClickActionMap.UNLIKE_OUT:u.SearchClickActionMap.LIKE_OUT}),(0,r.handleToggleLike)())},onDownloadVideoClick:()=>{if(!f||!p)return;!o||h||v||m.searchStatsCollector.logEvent({track_code:o,type:u.EventItemType.VIDEO,action:u.SearchClickActionMap.DOWNLOAD_OUT});const i=h?"clip":v?"postlive":"video";(0,d.downloadVideo)({oid:String(e),vid:String(t),title:p,type:i})},onViewVideoStatisticClick:r.handleViewVideoStatistic,onCreateClipClick:async()=>{f&&(window.VideoUpload||await(0,c.getVideoUploadModule)(),window.VideoUpload.showVideoToClip(null,l.EEntryPointName.VideoToClip,{ownerId:e,videoId:t}))}}}},925064:(e,t,o)=>{o.d(t,{useMoreMenuActions:()=>C});var i=o(474848),n=o(293721),r=o(296540),a=o(571721),d=o(610989),s=o(814487),c=o(829713),l=o(59907),m=o(3110),u=o(289150),h=o(549318),v=o(485749),p=o(490639),_=o(405816),g=o(476726),w=o(727827),f=o(847891);const C=({ownerId:e,videoId:t,isFromMessage:o,watchLaterItem:C,isScheduled:S,statisticLink:I,trackCode:b})=>{const{onAddToGroupClick:k,onDeleteVideoClick:x,onEditVideoClick:E,onExportVideoClick:y,onCopyToClipboardVideoLink:A,onToggleFavorite:M,onSendReport:V,onViewVideoStatisticClick:L,onDownloadVideoClick:j,onCreateClipClick:T}=(0,w.useMenuItemsHandlers)({ownerId:e,videoId:t,trackCode:b}),O=(0,n.useStore)(a.videoModalService.$canViewStatistic),R=(0,n.useStore)(a.videoModalService.$canEditVideo),P=(0,n.useStore)(a.videoModalFaveService.$canAddToFavorite),D=(0,n.useStore)(a.videoModalFaveService.$isFavorite),F=(0,n.useStore)(a.videoModalService.$canReport),B=(0,n.useStore)(a.videoModalService.$canAddToGroups),$=(0,n.useStore)(a.videoModalService.$canDeleteVideo),N=(0,n.useStore)(a.videoModalService.$canDownloadVideo),[H,U]=(0,r.useState)(!1),G=(0,g.partConfigEnabled)("video_modal_statistic_button"),z=(0,g.partConfigEnabled)("video_bookmarks_renaming_to_watch_later");return{menuItems:(0,r.useMemo)((()=>{const t=[];if(O&&(!G||f.Ranges.isUserId(e))){const e={children:d.getLang("video_statistics"),before:(0,i.jsx)(s.Icon20StatisticsOutline,{})};I?.length?(e.target="_blank",e.href=I,e.testId="video_modal_statistic_lk"):(e.onClick=L,e.testId="video_modal_statistic_modal"),t.push(e)}return R&&t.push({onClick:E,before:(0,i.jsx)(c.Icon20WriteOutline,{}),children:d.getLang("video_edit"),testId:"video_modal_edit_button"}),(0,g.partConfigEnabled)("video_to_clip")&&R&&t.push({onClick:T,before:(0,i.jsx)(l.Icon20LogoClipsOutline,{}),children:d.getLang("video_create_clip")}),P&&!o&&(z?t.push({onClick:M,before:C,testId:"video_modal_bookmarks_button",children:D?d.getLang("video_remove_from_watch_later"):d.getLang("video_catalog_showcase_section_my_watch_later_title")}):t.push({onClick:M,before:(0,i.jsx)(m.Icon20BookmarkOutline,{}),children:D?d.getLang("global_remove_from_bookmarks"):d.getLang("global_add_to_bookmarks"),testId:"video_modal_bookmarks_button"})),N&&!o&&t.push({onClick:j,before:(0,i.jsx)(u.Icon20DownloadOutline,{}),children:d.getLang("video_download_video_from_modal"),testId:"video_modal_download_button"}),B&&!o&&t.push({onClick:k,before:(0,i.jsx)(h.Icon20Add,{}),testId:"video_modal_add_to_community_button",children:d.getLang("video_add_to_group")}),S||o||(t.push({onClick:A,before:(0,i.jsx)(v.Icon20CopyOutline,{}),testId:"video_modal_copy_link_button",children:d.getLang("video_copy_video_link")}),t.push({onClick:y,before:(0,i.jsx)(u.Icon20DownloadOutline,{}),testId:"video_modal_export_button",children:d.getLang("video_export_action")})),$&&t.push({onClick:x,before:(0,i.jsx)(p.Icon20DeleteOutline,{}),children:d.getLang("video_delete_button"),testId:"video_modal_delete_button"}),F&&t.push({onClick:V,before:(0,i.jsx)(_.Icon20ReportOutline,{}),testId:"video_modal_report_button",children:d.getLang("global_report_spam")}),t}),[H]),onShownChanged:e=>{U(e)}}}},312411:(e,t,o)=>{o.d(t,{PlaylistStoreType:()=>c,usePlayerStoreType:()=>l});var i=o(20191),n=o(296540);const r=/pl_(-?\d+_-?\d+)/,a=/pl_cat_trends/,d=/pl_cat_my_communities/,s=/pl_cat_my_history/,c="playlist",l=()=>{const[e,t]=(0,n.useState)(null);return(0,n.useEffect)((()=>{const e=e=>{return t((o=e).match(r)?c:o.match(a)?"showcase":o.match(d)?"my_communities":o.match(s)?"my_history":null);var o};e(window.nav.strLoc),(0,i.subscribeNavLocationChange)((t=>{e(t)}))}),[]),e}},571721:(e,t,o)=>{o.r(t),o.d(t,{Comments:()=>s.Comments,CommentsWidget:()=>s.CommentsWidget,Episodes:()=>d.Episodes,PlayerSidebar:()=>n.PlayerSidebar,VideoModalInfo:()=>i.VideoModalInfo,entitiesGroupsService:()=>a.entitiesGroupsService,entitiesUsersService:()=>a.entitiesUsersService,initComments:()=>s.initComments,initVideoModalEpisodes:()=>d.initVideoModalEpisodes,initVideoModalInfo:()=>i.initVideoModalInfo,initVideoModalPlayerSidebar:()=>n.initVideoModalPlayerSidebar,unmountComments:()=>s.unmountComments,unmountVideoModalEpisodes:()=>d.unmountVideoModalEpisodes,unmountVideoModalInfo:()=>i.unmountVideoModalInfo,unmountVideoModalPlayerSidebar:()=>n.unmountVideoModalPlayerSidebar,unmountVideoModalRecommendations:()=>r.unmountVideoModalRecommendations,videoModalAlbumsService:()=>a.videoModalAlbumsService,videoModalContextService:()=>a.videoModalContextService,videoModalEpisodeService:()=>a.videoModalEpisodeService,videoModalFaveService:()=>a.videoModalFaveService,videoModalModerService:()=>a.videoModalModerService,videoModalRecommendationsService:()=>a.videoModalRecommendationsService,videoModalService:()=>a.videoModalService,videoModalSubscribeService:()=>a.videoModalSubscribeService});var i=o(110470),n=o(51438),r=o(783045),a=o(86220),d=o(769793),s=o(714421)},614673:(e,t,o)=>{o.d(t,{createRecommendationsService:()=>s});var i=o(32489),n=o(169135),r=o(102114),a=o(728926),d=o(794432);const s=({domain:e,entitiesGroupsService:t,entitiesUsersService:o,onAddFave:s,onRemoveFave:c})=>{const l=(0,n.createEntitiesVideoService)({domain:e,entitiesGroupsService:t,entitiesUsersService:o}),m=(0,d.createFaveService)({domain:e,entitiesVideoService:l,onAddFave:s,onRemoveFave:c}),u=(0,r.createListsVideosRecommendationsService)({domain:e,entitiesVideoService:l}),[h,v]=(0,a.createAbortControllerField)(e),p=e.createStore(""),_=e.createEvent(),g=e.createEvent();(0,i.sample)({clock:_,fn:()=>{},target:u.resetVideosRecommendationsEvent}),(0,i.sample)({clock:_,fn:({ownerId:e})=>String(e),target:p}),(0,i.sample)({clock:_,source:h,fn:(e,{ownerId:t,videoId:o,trackCode:i})=>({controller:e,entityKey:t,query:{video_id:o,owner_id:t,track_code:i,count:10}}),target:u.fetchVideosRecommendationsFx}),(0,i.sample)({clock:g,source:p,fn:e=>({entityKey:e}),target:u.fetchMoreVideosRecommendationsEvent});const w=u.selectStores(p);return{$ownerId:p,$recommendationsEntities:l.$entitiesVideo,$videosCount:w.$count,$videosError:w.$error,$videosFullyLoaded:w.$fullyLoaded,$videosIds:w.$listIds,$videosLoading:w.$loading,abortRequestEvent:v,getRecommendationsEvent:_,fetchMoreRecommendationsVideosEvent:g,toggleFaveEvent:m.toggleFaveVideoEvent}}},629847:(e,t,o)=>{o.d(t,{createVideoModalAlbumsService:()=>u});var i=o(32489),n=o(377850),r=o(887815),a=o(143735),d=o(637774),s=o(398837),c=o(422495),l=o(214303),m=o(291903);const u=({domain:e})=>{const t=(0,r.createVideoGetAlbumsByVideoFx)({domain:e}),o=e.createEffect((e=>(0,l.handleExternalPlayerAddVideo)(e))),u=(0,r.createVideoAddToAlbumFx)({domain:e}),h=(0,r.createVideoRemoveFromAlbumFx)({domain:e}),v=e.createStore({}),p=e.createEffect((({controller:e,isAdded:t,query:o})=>{const i={controller:e,query:o};return t?h(i):u(i)})),_=e.createEvent(),g=(0,i.restore)(_,{}),w=e.createEvent(),f=e.createEvent(),C=e.createEvent(),S=e.createEvent(),I=e.createEvent(),b=(0,a.createEntitiesVideoAlbumService)({domain:e}),k=(0,d.createListsVideosAlbumsService)({domain:e,entitiesVideoAlbumService:b}),{$entitiesVideoAlbums:x}=b,{resetVideosAlbumsEvent:E}=k;x.reset(E);const y=e.createEvent(),A=(0,i.restore)(y,null),M=e.createEvent(),V=(0,i.restore)(M,null),L=e.createStore([]),j=e.createEvent(),T=(0,i.restore)(j,null),O=e.createEvent(),R=(0,i.restore)(O,!1),P=e.createEvent(),D=(0,i.restore)(P,null),F=e.createEvent(),B=e.createEvent(),$=(0,i.restore)(B,!1);(0,i.sample)({clock:[D,g],source:{$playlistEntityStore:g,$addedToMy:D},fn:({$playlistEntityStore:e,$addedToMy:t})=>t||Object.values(e).some((e=>e&&e.containsVideo)),target:$}),(0,i.sample)({clock:p,filter:({query:{album_id:e}})=>(0,m.isMyVideoAlbum)(e),fn:({isAdded:e})=>!e,target:P}),(0,i.sample)({clock:[p.done,p.fail],filter:e=>(0,m.isMyVideoAlbum)(e?.params.query.album_id)&&("error"in e||!e.result),fn:({params:{isAdded:e}})=>e,target:P});const N=(0,n.combineEvents)({events:{albumsByVideo:t.done,albums:k.fetchVideosAlbumsFx.done},reset:E});(0,i.sample)({clock:F,source:{ownerId:T},fn:({ownerId:e},t)=>Object.values(t).reduce(((t,o)=>{if((0,m.isServiceAlbumId)(o.id))return t;return t[(0,m.getFullAlbumId)({ownerId:e,albumId:o.id})]={id:o.id,title:o.title,containsVideo:o.added,isPrivate:1===o.private},t}),{}),target:_}),(0,i.sample)({clock:F,fn:e=>{const t=Object.values(e),o=t.findIndex((e=>(0,m.isMyVideoAlbum)(e.id)));return-1!==o&&t[o].added},target:P}),(0,i.sample)({clock:N,source:{videoEntities:x,ownerId:T},fn:({videoEntities:e,ownerId:t},{albumsByVideo:o})=>(0,m.mapAlbumsWithInclusionsToPlaylists)({albumsByVideo:o.result,albums:e,ownerId:t||0}),target:_});const{$listIds:H,$loading:U}=k.selectStores(T);return(0,i.sample)({clock:w,source:T,filter:e=>Boolean(e),fn:e=>({query:{owner_id:e||0,extended:1},controller:new AbortController,entityKey:e||0}),target:k.fetchVideosAlbumsFx}),(0,i.sample)({clock:f,source:T,filter:e=>Boolean(e),fn:e=>({entityKey:e,count:50}),target:k.fetchMoreVideosAlbumsEvent}),(0,i.sample)({clock:k.fetchVideosAlbumsFx.done,source:{ownerId:T,videoEntities:x,albumsByVideo:L,playlistEntityStore:g},filter:(e,{params:t})=>Boolean(t.query.offset),fn:({ownerId:e,albumsByVideo:t,playlistEntityStore:o},{result:i})=>{const n=(0,s.mapToEntity)({},i.items,(({id:t})=>(0,m.getFullAlbumId)({albumId:t,ownerId:e})));return{...o,...(0,m.mapAlbumsWithInclusionsToPlaylists)({albumsByVideo:t,albums:n,ownerId:e||0})}},target:_}),(0,i.sample)({clock:w,source:[A,V,T],filter:e=>e.every(Boolean),fn:([e,t,o])=>({query:{video_id:e||0,owner_id:t||0,target_id:o||0},controller:new AbortController}),target:t}),(0,i.sample)({clock:t.doneData,target:L}),(0,i.sample)({clock:E,fn:()=>({}),target:g}),(0,i.sample)({clock:C,source:[T,V,A],fn:([e,t,o],{album_id:i,isAdded:n})=>{const r=(0,m.getFullAlbumId)({albumId:i,ownerId:e});return{controller:new AbortController,fullId:r,query:{target_id:e||0,album_id:i,video_id:o||0,owner_id:t||0},isAdded:n}},target:p}),(0,i.sample)({clock:S,source:[T,V,A],fn:([e,t,o],{id:i})=>{const n=(0,m.getFullAlbumId)({albumId:i,ownerId:e});return{controller:new AbortController,fullId:n,query:{target_id:e||0,album_id:i,video_id:o||0,owner_id:t||0},isAdded:!1}},target:p}),(0,i.sample)({clock:p,source:g,filter:(e,t)=>!(0,m.isMyVideoAlbum)(t.query.album_id),fn:(e,{query:t,isAdded:o})=>{const i={...e},n=(0,m.getFullAlbumId)({albumId:t.album_id,ownerId:t.target_id}),r=e[n];return r&&(i[n]={...r,containsVideo:!o}),i},target:_}),(0,i.sample)({clock:p,source:v,fn:(e,{controller:t,fullId:o})=>(e[o]?.abort(),{...e,[o]:t}),target:v}),(0,i.sample)({clock:[p.done,p.fail],source:g,filter:(e,t)=>("error"in t||!t.result)&&!(0,m.isMyVideoAlbum)(t.params.query.album_id),fn:(e,{params:{query:t,isAdded:o}})=>{const i={...e},n=(0,m.getFullAlbumId)({albumId:t.album_id,ownerId:t.owner_id}),r=e[n];return r&&(i[n]={...r,containsVideo:o}),i},target:_}),(0,i.sample)({clock:C,source:{playlists:g,ownerId:T},fn:({playlists:e,ownerId:t},{isAdded:o,album_id:i,albumTitle:n})=>{const r=(0,m.getFullAlbumId)({albumId:i,ownerId:t});(0,m.showPlaylistActionSnackbar)({ownerId:t||0,playlistId:i,playlistTitle:n||e[r]?.title,added:!o})}}),(0,i.sample)({clock:S,source:{ownerId:T,albumsByVideo:L,playlistEntityStore:g},fn:({ownerId:e,albumsByVideo:t,playlistEntityStore:o},i)=>({...(0,m.mapAlbumsWithInclusionsToPlaylists)({albumsByVideo:[...t,i.id],albums:{[(0,m.getFullAlbumId)({albumId:i.id,ownerId:e})]:i},ownerId:e||0}),...o}),target:_}),(0,i.sample)({clock:S,fn:()=>!0,target:$}),(0,i.sample)({clock:S,source:T,fn:(e,{id:t,title:o})=>{(0,m.showPlaylistActionSnackbar)({ownerId:e||0,playlistId:t,playlistTitle:o,added:!0})}}),(0,i.sample)({source:$,target:o}),(0,i.sample)({clock:I,filter:({isAdded:e})=>!Boolean(e),fn:()=>!0,target:P}),(0,i.sample)({clock:I,filter:({isAdded:e})=>!Boolean(e),fn:({isAdded:e})=>({isAdded:!!e,album_id:c.MY_VIDEO_ALBUM_ID}),target:C}),(0,i.sample)({clock:I,filter:({isAdded:e})=>Boolean(e),fn:()=>!1,target:P}),(0,i.sample)({clock:I,source:{ownerId:T,videoOwnerId:V,playlists:g,videoId:A},filter:(e,{isAdded:t})=>Boolean(t),fn:({ownerId:e,videoOwnerId:t,playlists:o,videoId:i})=>{const n=Object.values(o).map((e=>e?.id)).filter((e=>e));return n.push(c.MY_VIDEO_ALBUM_ID),{query:{target_id:e||0,owner_id:t||0,video_id:i||0,album_ids:n.join(",")},controller:new AbortController}},target:h}),(0,i.sample)({clock:I,source:{playlists:g},filter:(e,{isAdded:t})=>Boolean(t),fn:({playlists:e})=>{const t={...e};return Object.keys(t).forEach((e=>{const o=t[e];o&&(t[e]={...o,containsVideo:!1})})),t},target:_}),{setVideoId:y,setOwnerIdEvent:j,setVideoOwnerIdEvent:M,setAddedToMyEvent:P,setNeedsRefetch:O,setUpstreamPlaylists:F,togglePlaylistAddedEvent:C,createPlaylistEvent:S,playerAddEvent:I,fetchPlaylistsEvent:w,fetchMorePlaylistsEvent:f,resetVideosAlbumsEvent:E,$needsRefetch:R,$addedToMy:D,$playlistEntityStore:g,$videoAlbumsListIds:H,$videoAlbumsLoading:U,$videoAdded:$,setAddedEvent:B}}},971736:(e,t,o)=>{o.d(t,{createVideoModalContextService:()=>s});var i=o(169135),n=o(143735),r=o(265498),a=o(506119),d=o(992013);const s=({domain:e,entitiesGroupsService:t,entitiesUsersService:o})=>{const s=(0,i.createEntitiesVideoService)({domain:e,entitiesGroupsService:t,entitiesUsersService:o}),c=(0,n.createEntitiesVideoAlbumService)({domain:e}),l=(0,r.createListsVideosService)({domain:e,entitiesVideoService:s}),m=(0,d.createOwnerService)({domain:e,entitiesGroupsService:t,entitiesUsersService:o}),u=(0,a.createPlaylistService)({domain:e,entitiesVideoAlbumsService:c,listsVideosService:l,ownerService:m});return{$videosIds:u.$videosIds,$videoEntities:s.$entitiesVideo,$playlistData:u.$playlistData,$count:u.$videosCount,$error:u.$videosError,$loading:u.$videosLoading,$fullyLoaded:u.$videosFullyLoaded,processPlaylistEvent:u.processPlaylistEvent,resetStore:u.resetPlaylistEvent}}},550374:(e,t,o)=>{o.d(t,{createVideoModalEpisodeService:()=>n});var i=o(32489);const n=({domain:e})=>{const t=e.createEvent(),o=(0,i.restore)(t,null),n=e.createEvent();return{changeActiveEpisode:t,updateScrollHeight:n,$activeEpisode:o,$scrollHeight:(0,i.restore)(n,null)}}},921327:(e,t,o)=>{o.d(t,{createVideoModalFaveService:()=>a});var i=o(32489),n=o(927588),r=o(214303);const a=({onAddFave:e,onRemoveFave:t,domain:o})=>{const a=o.createEvent(),d=(0,i.restore)(a,null),s=o.createEvent(),c=(0,i.restore)(s,null),l=o.createEvent(),{faveAddVideoFx:m,faveRemoveVideoFx:u}=(0,n.createEntitiesFaveVideoService)({domain:o}),h=o.createStore({}),v=o.createEffect((({controller:e,currentFave:t,query:o})=>{const i={controller:e,query:o};return t?u(i):m(i)}));return(0,i.sample)({clock:l,source:d,fn:(e,{ownerId:t,id:o,ref:i,source:n,accessKey:r})=>({controller:new AbortController,currentFave:!!e,query:{owner_id:t,id:o,ref:i,source:n,access_key:r}}),target:v}),h.on(v,((e,{controller:t,query:o})=>{const i=o.id;return e[i]?.abort(),{...e,[i]:t}})),(0,i.sample)({clock:v,source:d,fn:e=>!e,target:a}),(0,i.sample)({clock:[v.done,v.fail],source:{isFavorite:d,abortController:h},filter:(e,t)=>("error"in t||!t.result)&&!t.params?.controller?.signal?.aborted,fn:({isFavorite:e})=>!e,target:a}),(0,i.sample)({clock:m.done,target:e}),(0,i.sample)({clock:u.done,fn:()=>({rollbackCallback:e=>{(0,r.handleToggleFavorite)(e)}}),target:t}),h.on([v.done,v.fail],((e,{params:t})=>{if(t?.controller?.signal?.aborted)return e;const o=t.query.id,i={...e};return delete i[o],i})),{$isFavorite:d,$canAddToFavorite:c,setIsFavoriteEvent:a,setCanAddToFavorite:s,toggleFaveEvent:l}}},809192:(e,t,o)=>{o.d(t,{createVideoModalModerService:()=>n});var i=o(32489);const n=({domain:e})=>{const t=e.createEvent(),o=(0,i.restore)(t,!1),n=e.createEvent(),r=(0,i.restore)(n,!1),a=e.createEvent(),d=(0,i.restore)(a,!1),s=e.createEvent(),c=(0,i.restore)(s,!1),l=e.createEvent(),m=(0,i.restore)(l,!1),u=e.createEvent(),h=(0,i.restore)(u,!1),v=e.createEvent(),p=(0,i.restore)(v,!1),_=e.createEvent();return{changeSoundRestriction:t,changeEmbedRestriction:n,changeAd:a,changeAdCopy:s,changeAccessByIP:l,changeClaim:u,changeLicense:v,changePin:_,$isSoundRestricted:o,$isEmbedRestricted:r,$hasNoAd:d,$hasNoAdCopy:c,$hasAccessByIP:m,$isClaimed:h,$isLicensed:p,$isPinned:(0,i.restore)(_,!1)}}},260127:(e,t,o)=>{o.d(t,{createVideoModalService:()=>r});var i=o(32489),n=o(858243);const r=({domain:e})=>{const t=t=>{const o=e.createEvent(),n=e.createStore(t);return(0,i.sample)({clock:o,target:n}),[n,o]},[o,r]=t(!1),[a,d]=t(null),s=e.createEvent(),{likesAddFx:c,likesDeleteFx:l}=(0,n.createEntitiesLikesService)({domain:e}),m=e.createStore({}),u=e.createEffect((({controller:e,currentIsLiked:t,query:o})=>{const i={controller:e,query:o};return t?l(i):c(i)})),h=e.createEvent(),[v,p]=t(null),[_,g]=t(""),[w,f]=t(null),[C,S]=t(null),[I,b]=t(null),[k,x]=t(null),[E,y]=t(null),[A,M]=t(null),[V,L]=t(null),[j,T]=t(null);(0,i.sample)({clock:h,fn:({isLiked:e})=>e,target:r}),(0,i.sample)({clock:h,fn:({numberOfLikes:e})=>e,target:d}),(0,i.sample)({clock:s,source:o,fn:(e,{params:t})=>({controller:new AbortController,currentIsLiked:!!e,query:t}),target:u}),m.on(u,((e,{controller:t,query:o})=>{const i=o.item_id;return e[i]?.abort(),{...e,[i]:t}}));const O=(e,t)=>{const o=t??0;return Math.max(e?o-1:o+1,0)};return(0,i.sample)({clock:s,source:{isLiked:o,numberOfLikes:a},fn:({isLiked:e,numberOfLikes:t})=>({isLiked:!e,numberOfLikes:O(e,t)}),target:h}),(0,i.sample)({clock:[u.done,u.fail],source:{isLiked:o,numberOfLikes:a},filter:(e,t)=>("error"in t||!t.result)&&!t.params?.controller?.signal?.aborted,fn:({isLiked:e,numberOfLikes:t})=>({isLiked:!e,numberOfLikes:O(e,t)}),target:h}),m.on([u.done,u.fail],((e,{params:t})=>{if(t?.controller?.signal?.aborted)return e;const o=t.query.item_id,i={...e};return delete i[o],i})),{$isLiked:o,$numberOfLikes:a,$title:v,$description:_,$canAddToGroups:w,$canViewStatistic:C,$canReport:I,$canEditVideo:k,$canDeleteVideo:E,$canDownloadVideo:A,$isShortVideo:V,$isActiveLive:j,setIsLikedEvent:r,setLikesEvent:h,toggleLikesEvent:s,setNumberOfLikesEvent:d,setTitleEvent:p,setDescriptionEvent:g,setCanAddToGroupsEvent:f,setCanViewStatisticEvent:S,setCanReportEvent:b,setCanEditVideoEvent:x,setCanDeleteVideoEvent:y,setCanDownloadVideo:M,setIsShortVideoEvent:L,setIsActiveLiveEvent:T}}},506701:(e,t,o)=>{o.d(t,{createVideoModalSubscribeService:()=>d});var i=o(32489),n=o(986489),r=o(474021),a=o(847891);const d=({onAddSubscribe:e,onDeleteSubscribe:t,domain:o})=>{const d=o.createEvent(),s=(0,i.restore)(d,!1),c=o.createEvent(),l=(0,i.restore)(c,!1),m=o.createEvent(),{groupsJoinFx:u,groupsLeaveFx:h}=(0,n.createEntitiesGroupsSubscribeService)({domain:o}),{friendsDeleteFx:v,friendsAddFx:p}=(0,r.createEntitiesFriendsSubscribeService)({domain:o}),_=o.createStore({}),g=o.createEffect((({controller:e,currentSubscribe:t,query:o})=>{if("group_id"in o){const i={controller:e,query:o};return t?h(i):u(i)}const i={controller:e,query:o};return t?v(i):p(i)}));return(0,i.sample)({clock:m,source:s,fn:(e,{authorId:t})=>{const o={controller:new AbortController,currentSubscribe:!!e};return a.Ranges.isGroupId(t)?{...o,query:{group_id:a.Ranges.convertGroupIdToOwnerId(t)}}:{...o,query:{user_id:t}}},target:g}),_.on(g,((e,{controller:t,query:o})=>{const i="group_id"in o?o.group_id:o.user_id;return e[i]?.abort(),{...e,[i]:t}})),(0,i.sample)({clock:g,source:s,fn:e=>!e,target:d}),(0,i.sample)({clock:[g.done,g.fail],source:{isSubscribe:s,abortController:_},filter:(e,t)=>("error"in t||!t.result)&&!t.params?.controller?.signal?.aborted,fn:({isSubscribe:e})=>!e,target:d}),(0,i.sample)({clock:[u.done,p.done],target:e}),(0,i.sample)({clock:[h.done,v.done],target:t}),_.on([g.done,g.fail],((e,{params:t})=>{if(t?.controller?.signal?.aborted)return e;const o="group_id"in t.query?t.query.group_id:t.query.user_id,i={...e};return delete i[o],i})),{$isSubscribe:s,$canSubscribe:l,setIsSubscribeEvent:d,setCanSubscribeEvent:c,toggleSubscribeEvent:m}}},86220:(e,t,o)=>{o.d(t,{entitiesGroupsService:()=>g,entitiesUsersService:()=>w,videoModalAlbumsService:()=>S,videoModalContextService:()=>k,videoModalEpisodeService:()=>E,videoModalFaveService:()=>f,videoModalModerService:()=>x,videoModalRecommendationsService:()=>b,videoModalService:()=>C,videoModalSubscribeService:()=>I});var i=o(32489),n=o(872587),r=o(946927),a=o(175241),d=o(260127),s=o(629847),c=o(921327),l=o(506701),m=o(614673),u=o(971736),h=o(809192),v=o(550374),p=o(292354);const _=(0,i.createDomain)("videoModal"),g=(0,n.createEntitiesGroupsService)({domain:_}),w=(0,r.createEntitiesUsersService)({domain:_}),f=(0,c.createVideoModalFaveService)({domain:_,onAddFave:p.showFaveSnackbarFx,onRemoveFave:p.showUnfaveSnackbarFx}),C=(0,d.createVideoModalService)({domain:_}),S=(0,s.createVideoModalAlbumsService)({domain:_}),I=(0,l.createVideoModalSubscribeService)({onAddSubscribe:p.showSubscribeSnackbarFx,onDeleteSubscribe:p.showUnsubscribeSnackbarFx,domain:_}),b=(0,m.createRecommendationsService)({domain:_,entitiesGroupsService:g,entitiesUsersService:w,onAddFave:p.showFaveSnackbarFx,onRemoveFave:p.showUnfaveSnackbarFx}),k=(0,u.createVideoModalContextService)({domain:_,entitiesGroupsService:g,entitiesUsersService:w}),x=(0,h.createVideoModalModerService)({domain:_}),E=(0,v.createVideoModalEpisodeService)({domain:_});(0,a.connectTrackTmrGroupsJoin)(g.groupsJoinFx)},292354:(e,t,o)=>{o.d(t,{showFaveSnackbarFx:()=>n.showFaveSnackbarFx,showSubscribeSnackbarFx:()=>a.showSubscribeSnackbarFx,showUnfaveSnackbarFx:()=>i.showUnfaveSnackbarFx,showUnsubscribeSnackbarFx:()=>r.showUnsubscribeSnackbarFx});var i=o(65767),n=o(597506),r=o(989733),a=o(529730)},597506:(e,t,o)=>{o.d(t,{showFaveSnackbarFx:()=>u});var i=o(474848),n=o(610989),r=o(659179),a=o(476726),d=o(32489),s=o(133646),c=o(489313),l=o(102846),m=o(422495);const u=(0,d.createEffect)((()=>{const e=(0,a.partConfigEnabled)("video_bookmarks_renaming_to_watch_later"),t=(0,n.langLink)(m.BOOKMARKS_URL,n.getLang("fave_video_added")),o=e?{text:n.getLang("video_added_to_watch_later"),before:{content:(0,i.jsx)(s.Icon28ClockOutline,{})},action:"my_bookmarks"!==window.cur?.section_id?{label:n.getLang("global_open_section"),onClick:()=>window.location.href=m.BOOKMARKS_URL}:void 0}:{text:(0,i.jsx)(l.InnerHTML,{children:t}),before:{content:(0,i.jsx)(c.Icon28CheckCircleOutline,{})}};(0,r.showSnackbar)(o)}))},529730:(e,t,o)=>{o.d(t,{showSubscribeSnackbarFx:()=>s});var i=o(474848),n=o(610989),r=o(659179),a=o(32489),d=o(76449);const s=(0,a.createEffect)((()=>{(0,r.showSnackbar)({text:n.getLang("video_modal_subscribe_to_author_snackbar"),before:{content:(0,i.jsx)(d.Icon24CheckCircleOutline,{})}})}))},65767:(e,t,o)=>{o.d(t,{showUnfaveSnackbarFx:()=>m});var i=o(474848),n=o(610989),r=o(659179),a=o(476726),d=o(32489),s=o(133646),c=o(858583),l=o(189776);const m=(0,d.createEffect)((e=>{const t=(0,a.partConfigEnabled)("video_bookmarks_renaming_to_watch_later")?{text:n.getLang("video_deleted_from_my_watch_later"),before:{content:(0,i.jsx)(s.Icon28ClockOutline,{})},action:e.rollbackCallback?{label:n.getLang("global_cancel"),onClick:(t,o)=>{e.rollbackCallback&&e.rollbackCallback(l.FAVORITE_SOURCES.SNACKBAR),(0,r.hideSnackbar)(o)}}:void 0}:{text:n.getLang("video_deleted_from_my_bookmarks"),before:{content:(0,i.jsx)(c.Icon28UnfavoriteOutline,{})}};(0,r.showSnackbar)(t)}))},989733:(e,t,o)=>{o.d(t,{showUnsubscribeSnackbarFx:()=>s});var i=o(474848),n=o(610989),r=o(659179),a=o(32489),d=o(76449);const s=(0,a.createEffect)((()=>{(0,r.showSnackbar)({text:n.getLang("video_modal_unsubscribe_to_author_snackbar"),before:{content:(0,i.jsx)(d.Icon24CheckCircleOutline,{})}})}))},721444:(e,t,o)=>{o.d(t,{fixVideoPlayerScrollPopover:()=>i});const i={onShownChange:e=>{if(e){const e=window.Videoview?.getPlayerObject();e?.el&&(e.el.scrollTop=0)}},restoreFocus:!1}},349629:(e,t,o)=>{o.d(t,{handleOnlyCtrlClickOnLink:()=>i});const i=e=>{e.ctrlKey||e.metaKey||e.preventDefault()}},209631:(e,t,o)=>{o.d(t,{fixVideoPlayerScrollPopover:()=>i.fixVideoPlayerScrollPopover,handleOnlyCtrlClickOnLink:()=>n.handleOnlyCtrlClickOnLink,initPlayerEventListeners:()=>r.initPlayerEventListeners,removePlayerEventListeners:()=>r.removePlayerEventListeners});var i=o(721444),n=o(349629),r=o(35011)},35011:(e,t,o)=>{o.d(t,{initPlayerEventListeners:()=>d,removePlayerEventListeners:()=>s});var i=o(518538),n=o(86220);function r(e){n.videoModalFaveService.toggleFaveEvent(e.detail)}function a(e){n.videoModalAlbumsService.playerAddEvent(e.detail)}function d(){window.addEventListener(i.VideoPlayerSyncEvents.TOGGLE_FAVORITE,r),window.addEventListener(i.VideoPlayerSyncEvents.TOGGLE_ADDING_TO_MY_VIDEOS,a)}function s(){window.removeEventListener(i.VideoPlayerSyncEvents.TOGGLE_FAVORITE,r),window.removeEventListener(i.VideoPlayerSyncEvents.TOGGLE_ADDING_TO_MY_VIDEOS,a)}},996803:(e,t,o)=>{o.d(t,{CircleIconSkeleton:()=>r});var i=o(474848),n=o(515073);const r=({size:e=24})=>(0,i.jsx)(n.Skeleton,{borderRadius:e/2,height:e,width:e})},981256:(e,t,o)=>{o.d(t,{CircleIconSkeleton:()=>i.CircleIconSkeleton});var i=o(996803)},440712:(e,t,o)=>{o.d(t,{HeaderSkeleton:()=>d});var i=o(474848),n=o(625134),r=o(126960),a=o(515073);const d=({count:e=2})=>(0,i.jsx)(n.Header,{children:(0,i.jsx)(r.Grid,{spacing:12,columns:e,children:new Array(e).fill(null).map(((e,t)=>(0,i.jsx)(r.Grid.Item,{children:(0,i.jsx)(a.Skeleton,{borderRadius:4,height:20,width:122})},t)))})})},686232:(e,t,o)=>{o.d(t,{HeaderSkeleton:()=>i.HeaderSkeleton});var i=o(440712)},887354:(e,t,o)=>{o.d(t,{HorizontalAuthorsScroll:()=>c});var i=o(474848),n=o(8520),r=o(753457),a=o(347112),d=o(515073),s=o(381359);const c=({count:e=24})=>(0,i.jsx)(r.HorizontalScroll,{children:(0,i.jsx)("div",{className:s.default.content,children:(0,n.createArray)(e).map((e=>(0,i.jsx)(a.HorizontalCell,{size:"m",header:(0,i.jsx)(d.Skeleton,{width:80,height:13}),children:(0,i.jsx)(d.Skeleton,{width:72,height:72,circle:!0})},e)))})})},883711:(e,t,o)=>{o.d(t,{HorizontalAuthorsScroll:()=>i.HorizontalAuthorsScroll});var i=o(887354)},587958:(e,t,o)=>{o.d(t,{HorizontalBlockVideoCardsSkeleton:()=>s});var i=o(474848),n=o(785118),r=o(126960),a=o(540818),d=o(686232);const s=({headerItemsCount:e,withAvatar:t=!1,count:o=8})=>(0,i.jsxs)(i.Fragment,{children:[void 0!==e&&(0,i.jsx)(d.HeaderSkeleton,{count:e}),(0,i.jsx)(n.Div,{children:(0,i.jsx)(r.Grid,{spacing:12,columns:o,children:new Array(o).fill(null).map(((e,o)=>(0,i.jsx)(r.Grid.Item,{children:(0,i.jsx)(a.VideoCardSkeleton,{withAvatar:t})},o)))})})]})},789330:(e,t,o)=>{o.d(t,{HorizontalBlockVideoCardsSkeleton:()=>i.HorizontalBlockVideoCardsSkeleton});var i=o(587958)},356194:(e,t,o)=>{o.d(t,{HorizontalMiniVideoCardListSkeleton:()=>r});var i=o(474848),n=o(755061);const r=({count:e=10,...t})=>(0,i.jsx)(i.Fragment,{children:new Array(e).fill(null).map(((e,o)=>(0,i.jsx)(n.HorizontalMiniVideoCardSkeleton,{...t},o)))})},296762:(e,t,o)=>{o.d(t,{HorizontalMiniVideoCardListSkeleton:()=>i.HorizontalMiniVideoCardListSkeleton});var i=o(356194)},326738:(e,t,o)=>{o.d(t,{HorizontalMiniVideoCardSkeleton:()=>d});var i=o(474848),n=o(785118),r=o(445248),a=o(515073);const d=({cardWidth:e,cardHeight:t=72,titleWidth:o=140,ownerNameWidth:d=120,additionalInfoWidth:s=140})=>(0,i.jsx)(n.Div,{mode:"vertical",paddingBottom:8,paddingTop:8,children:(0,i.jsx)(r.SimpleCell,{before:(0,i.jsx)(a.Skeleton,{borderRadius:10,height:t,width:e}),subtitle:(0,i.jsx)(n.Div,{mode:"horizontal",children:(0,i.jsx)(a.Skeleton,{borderRadius:4,height:12,width:s})}),extraSubtitle:(0,i.jsx)(n.Div,{mode:"horizontal",children:(0,i.jsx)(a.Skeleton,{borderRadius:4,height:12,width:d})}),disabled:!0,children:(0,i.jsx)(n.Div,{mode:"horizontal",children:(0,i.jsx)(a.Skeleton,{borderRadius:4,height:15,width:o})})})})},755061:(e,t,o)=>{o.d(t,{HorizontalMiniVideoCardSkeleton:()=>i.HorizontalMiniVideoCardSkeleton});var i=o(326738)},471488:(e,t,o)=>{o.d(t,{ShortVideoCardGridSkeleton:()=>c});var i=o(474848),n=o(785118),r=o(126960),a=o(398333),d=o(8520),s=o(395799);const c=({count:e=30})=>{const t=(0,a.useListAdaptivityShortVideoColumns)();return(0,i.jsx)(n.Div,{children:(0,i.jsx)(r.Grid,{columns:t,rowSpacing:12,columnSpacing:12,children:(0,d.createArray)(e||1).map(((e,t)=>(0,i.jsx)(r.Grid.Item,{children:(0,i.jsx)(s.ShortVideoCardSkeleton,{})},t)))})})}},994106:(e,t,o)=>{o.d(t,{ShortVideoCardGridSkeleton:()=>i.ShortVideoCardGridSkeleton});var i=o(471488)},157330:(e,t,o)=>{o.d(t,{TabsSkeleton:()=>d});var i=o(474848),n=o(625134),r=o(126960),a=o(515073);const d=({count:e=6})=>(0,i.jsx)(n.Header,{children:(0,i.jsx)(r.Grid,{spacing:6,columns:e,children:new Array(e).fill(null).map(((e,t)=>(0,i.jsx)(r.Grid.Item,{children:(0,i.jsx)(a.Skeleton,{borderRadius:8,height:24,width:84})},t)))})})},872673:(e,t,o)=>{o.d(t,{TabsSkeleton:()=>i.TabsSkeleton});var i=o(157330)},773842:(e,t,o)=>{o.d(t,{VideoCardGridSkeleton:()=>s});var i=o(474848),n=o(126960),r=o(540818),a=o(156248),d=o(545855);const s=({count:e=16,withAvatar:t=!1,singleLineTitle:o=!1})=>{const s=(0,a.useListAdaptivityColumns)();return(0,i.jsx)(n.Grid,{className:d.default.skeleton,columns:s,rowSpacing:24,columnSpacing:12,children:new Array(e).fill(null).map(((e,a)=>(0,i.jsx)(n.Grid.Item,{children:(0,i.jsx)(r.VideoCardSkeleton,{withAvatar:t,singleLineTitle:o})},a)))})}},728660:(e,t,o)=>{o.d(t,{VideoCardGridSkeleton:()=>i.VideoCardGridSkeleton});var i=o(773842)},520837:(e,t,o)=>{o.d(t,{CircleIconSkeleton:()=>i.CircleIconSkeleton,HorizontalAuthorsScroll:()=>n.HorizontalAuthorsScroll,HorizontalBlockVideoCardsSkeleton:()=>r.HorizontalBlockVideoCardsSkeleton,HorizontalMiniVideoCardListSkeleton:()=>a.HorizontalMiniVideoCardListSkeleton,ShortVideoCardGridSkeleton:()=>c.ShortVideoCardGridSkeleton,TabsSkeleton:()=>d.TabsSkeleton,VideoCardGridSkeleton:()=>s.VideoCardGridSkeleton});var i=o(981256),n=(o(686232),o(883711)),r=o(789330),a=o(296762),d=(o(755061),o(872673)),s=o(728660),c=o(994106)},540818:(e,t,o)=>{o.d(t,{VideoCardSkeleton:()=>r});var i=o(474848),n=o(671194);const r=({withAvatar:e=!1,singleLineTitle:t=!1})=>(0,i.jsxs)("div",{className:"VideoCardSkeleton__container",children:[(0,i.jsx)(n.Skeleton,{className:"VideoCardSkeleton__thumbnail",borderRadius:8}),(0,i.jsxs)("div",{className:"VideoCardSkeleton__info",children:[e&&(0,i.jsx)(n.Skeleton,{className:"VideoCardSkeleton__avatar",width:36,height:36,circle:!0}),(0,i.jsxs)("div",{className:"VideoCardSkeleton__innerWrapper",children:[(0,i.jsx)(n.Skeleton,{className:"VideoCardSkeleton__title",fontSize:14}),!t&&(0,i.jsx)(n.Skeleton,{className:"VideoCardSkeleton__title VideoCardSkeleton__title--secondLine",fontSize:14}),(0,i.jsx)(n.Skeleton,{className:"VideoCardSkeleton__author",fontSize:13}),(0,i.jsx)(n.Skeleton,{className:"VideoCardSkeleton__meta",fontSize:13})]})]})]})},186301:(e,t,o)=>{o.d(t,{handleCaptcha:()=>a});var i=o(20025),n=o(476726),r=o(816475);const a=e=>new Promise((t=>{if((0,n.partConfigEnabled)("vkcom_audio_captcha_enabled"))(0,r.showCaptchaPopup)({sid:e.captcha_sid,isRefreshEnabled:e.is_refresh_enabled,isSoundCaptchaAvailable:e.is_sound_captcha_available,isUiuxChangesEnabled:e.uiux_changes,captcha_track:e.captcha_track,captcha_img:e.captcha_img,onSubmit:(o,i)=>{t({captcha_sid:e.captcha_sid,captcha_key:o,is_sound_captcha:i})}});else{let o=null;const r=(0,n.partConfigEnabled)("vkcom_captcha_resized")?`${e.captcha_img}&resized=1&width=400`:e.captcha_img,a=e?.is_refresh_enabled||!1,d={imgSrc:r,onSubmit:(e,i)=>{t({captcha_sid:e,captcha_key:i,is_sound_captcha:0}),o&&o.hide()}};o=(0,i.showCaptchaBox)(e.captcha_sid,!1,null,d,a)}}))},816475:(e,t,o)=>{o.d(t,{showCaptchaPopup:()=>i.showCaptchaPopup});var i=o(766338)},506537:(e,t,o)=>{o.d(t,{CaptchaType:()=>i.CaptchaType,Platform:()=>i.Platform,captchaPopupService:()=>n});var i=o(161882);const n=(0,i.createCaptchaPopupService)()},766338:(e,t,o)=>{o.d(t,{showCaptchaPopup:()=>a});var i=o(474848),n=o(272259),r=o(121939);function a(e){(0,n.showMessageBoxModal)((t=>(0,i.jsx)(r.CaptchaPopup,{...t,...e,onClose:()=>{e.onClose&&e.onClose(),t.onClose()},onSubmit:(o,i)=>{e.onSubmit&&(e.onSubmit(o,i),t.onClose())}})),{width:300})}},705333:(e,t,o)=>{o.d(t,{CaptchaAnswerField:()=>l});var i=o(474848),n=o(296540),r=o(529558),a=o(753457),d=o(506537),s=o(610989),c=o(293721);const l=(0,n.forwardRef)((({disabled:e,captchaType:t,isUiuxChangesEnabled:o},l)=>{const m=(0,n.useRef)(null),u=(0,n.useRef)(null),h=(0,c.useStore)(d.captchaPopupService.$answer),v=(0,c.useEvent)(d.captchaPopupService.answerChanged),p=!!o&&t===d.CaptchaType.AUDIO,_=t===d.CaptchaType.IMAGE?s.getLang("vkconnect_auth_label_captcha"):o?s.getLang("vkconnect_auth_label_captcha_audio_new_ux"):s.getLang("vkconnect_auth_label_captcha_audio");return(0,n.useImperativeHandle)(l,(()=>({inputFieldRef:m,inputLabelRef:u}))),(0,i.jsx)(r.FormItem,{mode:"vertical",noPadding:!0,top:p?(0,i.jsx)("div",{tabIndex:0,ref:u,children:s.getLang("vkconnect_auth_audio_captcha_title")}):"",children:(0,i.jsx)(a.Input,{getRef:m,tabIndex:0,value:h,placeholder:_,disabled:e,onChange:e=>v(e.target.value)})})}))},473735:(e,t,o)=>{o.d(t,{CaptchaAnswerField:()=>i.CaptchaAnswerField});var i=o(705333)},90205:(e,t,o)=>{o.d(t,{CaptchaError:()=>c});var i=o(474848),n=o(753457),r=o(610989),a=o(293721),d=o(506537),s=o(765668);const c=(0,o(296540).forwardRef)((({captchaType:e},t)=>{const o=(0,a.useEvent)(d.captchaPopupService.captchaReloaded);return(0,i.jsxs)(n.Footer,{children:[(0,i.jsx)(i.Fragment,{children:e===d.CaptchaType.IMAGE?r.getLang("vkconnect_auth_captcha_loading_error_caption"):r.getLang("vkconnect_auth_audio_captcha_loading_error_caption")}),(0,i.jsx)(s.Link,{onClick:o,getRootRef:t,role:"button","aria-label":e===d.CaptchaType.IMAGE?r.getLang("vkconnect_auth_captcha_image_loading_error_retry_aria_label"):r.getLang("vkconnect_auth_captcha_sound_loading_error_retry_aria_label"),children:r.getLang("vkconnect_auth_captcha_loading_error_refresh_text")})]})}))},272247:(e,t,o)=>{o.d(t,{CaptchaError:()=>i.CaptchaError});var i=o(90205)},959179:(e,t,o)=>{o.d(t,{CaptchaInfoButton:()=>c});var i=o(474848),n=o(296540),r=o(580539),a=o(533048),d=o(234337),s=o(610989);const c=(0,n.forwardRef)((({onClick:e},t)=>(0,i.jsx)(a.Button,{getRootRef:t,tabIndex:0,appearance:"neutral",mode:"tertiary",size:"m",before:(0,i.jsx)(r.Icon24InfoCircleOutline,{className:(0,d.getColorClass)("color_icon_secondary")}),"aria-label":s.getLang("vkconnect_auth_audio_captcha_info_text"),onClick:e})))},991031:(e,t,o)=>{o.d(t,{CaptchaInfoButton:()=>i.CaptchaInfoButton});var i=o(959179)},901885:(e,t,o)=>{o.d(t,{CaptchaPopup:()=>E});var i=o(474848),n=o(296540),r=o(293721),a=o(209642),d=o(416124),s=o(785118),c=o(624338),l=o(828902),m=o(428918),u=o(757550),h=o(533048),v=o(753457),p=o(610989),_=o(476726),g=o(493192),w=o(272247),f=o(698035),C=o(707695),S=o(473735),I=o(934905),b=o(991031),k=o(725405),x=o(506537);const E=({sid:e,isRefreshEnabled:t,isSoundCaptchaAvailable:o,isUiuxChangesEnabled:E,captcha_track:y,captcha_img:A,onSubmit:M,onClose:V})=>{(0,r.useGate)(x.captchaPopupService.Gate,{sid:e,platform:x.Platform.VK_WEB,captchaTrack:y,captchaImage:A,deviceId:(0,I.getDeviceId)(x.Platform.VK_WEB)});const L=(0,_.partConfigEnabled)("vkcom_captcha_new_ux"),j=(0,r.useEvent)(x.captchaPopupService.captchaLoadingEnds),T=(0,r.useStore)(x.captchaPopupService.$hasLoadCaptchaError),O=(0,r.useStore)(x.captchaPopupService.$captchaLoading),R=(0,r.useEvent)(x.captchaPopupService.captchaLoadingErrorSet),P=(0,r.useStore)(x.captchaPopupService.$captchaType),D=(0,r.useStore)(x.captchaPopupService.$answer),F=(0,r.useStore)(x.captchaPopupService.$captchaSrc),B=(0,r.useStore)(x.captchaPopupService.$isSubmitButtonDisabled),$=(0,r.useStore)(x.captchaPopupService.$isCaptchaTypeToggleDisabled),N=(0,r.useEvent)(x.captchaPopupService.captchaTypeToggled),H=(0,r.useStore)(x.captchaPopupService.$isRefreshButtonDisabled),U=(0,r.useEvent)(x.captchaPopupService.captchaRefreshed),G=(0,r.useStore)(x.captchaPopupService.$refreshCountdown),z=(0,n.useRef)(null),W=(0,n.useRef)(null),q=(0,n.useRef)(null),K=(0,n.useRef)(null),Y=(0,n.useRef)(null),X=(0,n.useRef)(null),J=(0,n.useRef)(null),Q=(0,n.useRef)(null),Z=!!E&&P===x.CaptchaType.AUDIO,[ee,te]=(0,n.useState)(!1),oe=(0,r.useStore)(x.captchaPopupService.$isAudioPlaying),ie=(0,n.useRef)(!1),ne=e=>{e.preventDefault(),M&&M(D,Number(P===x.CaptchaType.AUDIO))},re=(0,n.useCallback)((e=>{const t=Q.current||J.current||W.current,i=q.current,n=K.current,r=Y.current,a=z?.current?.inputFieldRef.current,d=z?.current?.inputLabelRef.current,s=X.current,{activeElement:c}=document,l=[t,i,n,r,a,d,s].includes(c)?c:t;if("Space"===e.code&&[i,n,r,s,t].some((e=>l===e))){e.preventDefault();l.click()}function m(){Z&&!n?.disabled?n?.focus():u()}function u(){r?.disabled?h():r?.focus()}function h(){Z&&d?d?.focus():v()}function v(){a?.disabled?p():a?.focus()}function p(){L||!s?.disabled?s?.focus():_()}function _(){t?.focus()}if(o&&"Tab"===e.key&&!e.shiftKey&&l)switch(e.preventDefault(),l){case t:L||!i?.disabled?i?.focus():m();break;case i:m();break;case n:u();break;case r:h();break;case d:v();break;case a:p();break;case s:_()}function g(){a?.disabled?w():a?.focus()}function w(){Z?d?.focus():f()}function f(){r?.disabled?C():r?.focus()}function C(){Z?n?.focus():S()}function S(){L||!i?.disabled?i?.focus():I()}function I(){t?.focus()}if(o&&"Tab"===e.key&&e.shiftKey&&l)switch(e.preventDefault(),l){case t:L||!s?.disabled?s?.focus():g();break;case s:g();break;case a:w();break;case d:f();break;case r:C();break;case n:S();break;case i:I()}}),[o,L,Z]);(0,n.useEffect)((()=>(document.removeEventListener("keydown",re),document.addEventListener("keydown",re),()=>{document.removeEventListener("keydown",re)})),[re]),(0,n.useEffect)((()=>{if(Z){const e=e=>{e.ctrlKey&&!oe&&Q?.current?.click()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}}),[Z,oe]),(0,n.useEffect)((()=>{const e=W.current;!O&&P===x.CaptchaType.IMAGE&&e&&(e.tabIndex=0,e.ariaLabel=p.getLang("vkconnect_auth_captcha_image_aria_label"),e.focus()),O||P!==x.CaptchaType.AUDIO||Q.current?.focus()}),[O,P]),(0,n.useEffect)((()=>{const e=J.current;T&&e&&e.focus()}),[T]),(0,n.useEffect)((()=>{P!==x.CaptchaType.AUDIO||E||(ie.current=!0)}),[P,E]);return(0,i.jsxs)(a.ModalBox,{children:[(0,i.jsx)(v.ModalDismissButton,{onClick:V}),(0,i.jsx)(d.ModalBody,{insetLevel:1,children:(0,i.jsxs)(s.Div,{mode:"vertical",spacing:4,paddingTop:8,paddingBottom:8,children:[(0,i.jsxs)(c.Image,{getRef:W,alt:p.getLang("vkconnect_auth_captcha_image_aria_label"),src:P===x.CaptchaType.IMAGE?F:"",onLoad:j,onError:R,width:268,height:102,children:[O&&(0,i.jsx)(l.Spinner,{}),!O&&T&&(0,i.jsx)(w.CaptchaError,{ref:J,captchaType:P}),!T&&P===x.CaptchaType.AUDIO&&(0,i.jsx)(g.SoundCaptcha,{ref:Q,src:F,disabled:!L&&oe,shouldAutoPlayRef:ie,captchaType:P,isUiuxChangesEnabled:E,onAudioPlay:()=>{E||z?.current?.inputFieldRef.current?.focus()}})]}),(0,i.jsx)(m.Spacing,{size:6}),(0,i.jsxs)(u.ButtonGroup,{mode:"horizontal",stretched:!0,gap:"s",style:{justifyContent:"space-between"},children:[t&&(0,i.jsx)(f.CaptchaRefreshButton,{ref:q,newCaptchaUX:L,disabled:!L&&(H||Z&&(O||T)),countdownValue:G,captchaType:P,isUiuxChangesEnabled:E,onRefresh:()=>{P!==x.CaptchaType.AUDIO||E||(ie.current=!0),U(),L&&z?.current?.inputFieldRef.current?.focus()}}),(Z||o)&&(0,i.jsxs)(u.ButtonGroup,{mode:"horizontal",gap:"s",children:[Z&&(0,i.jsx)(b.CaptchaInfoButton,{ref:K,onClick:()=>{te((e=>!e))}}),o&&(0,i.jsx)(C.CaptchaTypeButton,{ref:Y,disabled:!L&&$,captchaType:P,onToggle:()=>{N(),L&&z?.current?.inputFieldRef.current?.focus()}})]})]}),Z&&ee&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.Spacing,{size:8}),(0,i.jsx)(k.InfoBanner,{})]}),(0,i.jsx)(m.Spacing,{size:16}),(0,i.jsxs)("form",{onSubmit:ne,children:[(0,i.jsx)(S.CaptchaAnswerField,{ref:z,disabled:Z&&(O||T),captchaType:P,isUiuxChangesEnabled:E}),(0,i.jsx)(m.Spacing,{size:12}),(0,i.jsx)(u.ButtonGroup,{mode:"vertical",align:"center",stretched:!0,children:(0,i.jsx)(h.Button,{getRootRef:X,size:"l",stretched:!0,disabled:!L&&(B||Z&&(O||T)),onClick:ne,tabIndex:0,children:p.getLang("vkconnect_auth_captcha_submit_button")})})]})]})})]})}},121939:(e,t,o)=>{o.d(t,{CaptchaPopup:()=>i.CaptchaPopup});var i=o(901885)},698035:(e,t,o)=>{o.d(t,{CaptchaRefreshButton:()=>l});var i=o(474848),n=o(296540),r=o(573638),a=o(533048),d=o(234337),s=o(506537),c=o(610989);const l=(0,n.forwardRef)((({newCaptchaUX:e,disabled:t,countdownValue:o,captchaType:n,isUiuxChangesEnabled:l,onRefresh:m},u)=>(0,i.jsx)(a.Button,{getRootRef:u,disabled:t,size:"m",appearance:"neutral",mode:"tertiary",before:(0,i.jsx)(r.Icon24Refresh,{className:(0,d.getColorClass)("color_icon_secondary")}),"aria-label":n===s.CaptchaType.IMAGE?c.getLang("vkconnect_auth_captcha_refresh_button_aria_label"):n===s.CaptchaType.AUDIO?l?c.getLang("vkconnect_auth_captcha_refresh_audio_button_aria_label_new_ux"):c.getLang("vkconnect_auth_captcha_refresh_audio_button_aria_label"):void 0,tabIndex:0,onClick:m,children:e||!o?c.getLang("vkconnect_refresh_captcha"):(0,c.langReplace)(c.getLang("vkconnect_refresh_captcha_via"),{time:String(o)})})))},153391:(e,t,o)=>{o.d(t,{CaptchaTypeButton:()=>m});var i=o(474848),n=o(296540),r=o(506537),a=o(963328),d=o(16547),s=o(533048),c=o(234337),l=o(610989);const m=(0,n.forwardRef)((({disabled:e,captchaType:t,onToggle:o},n)=>(0,i.jsx)(s.Button,{getRootRef:n,disabled:e,size:"m",appearance:"neutral",mode:"tertiary",before:t===r.CaptchaType.IMAGE?(0,i.jsx)(a.Icon24Headphones,{className:(0,c.getColorClass)("color_icon_secondary")}):(0,i.jsx)(d.Icon24TextOutline,{className:(0,c.getColorClass)("color_icon_secondary")}),onClick:o,"aria-label":t===r.CaptchaType.IMAGE?l.getLang("vkconnect_auth_captcha_enable_audio_aria_label"):l.getLang("vkconnect_auth_captcha_enable_image_aria_label"),tabIndex:0})))},707695:(e,t,o)=>{o.d(t,{CaptchaTypeButton:()=>i.CaptchaTypeButton});var i=o(153391)},40041:(e,t,o)=>{o.d(t,{InfoBanner:()=>d});var i=o(474848),n=o(618168),r=o(610989),a=o(194620);const d=()=>(0,i.jsx)(n.Banner,{noPadding:!0,size:"s",subheader:r.getLang("vkconnect_auth_audio_captcha_info_text"),mode:"image",imageTheme:"light",background:(0,i.jsx)("div",{className:a.default.background})})},725405:(e,t,o)=>{o.d(t,{InfoBanner:()=>i.InfoBanner});var i=o(40041)},647283:(e,t,o)=>{o.d(t,{SoundCaptcha:()=>h});var i=o(474848),n=o(296540),r=o(426622),a=o(155581),d=o(234337),s=o(595154),c=o(610989),l=o(205726),m=o(293721),u=o(506537);const h=(0,n.forwardRef)((({src:e,disabled:t,shouldAutoPlayRef:o,captchaType:h,isUiuxChangesEnabled:v,onAudioPlay:p},_)=>{const g=(0,n.useRef)(null),w=(0,m.useEvent)(u.captchaPopupService.audioPlaying),f=(0,m.useEvent)(u.captchaPopupService.audioPaused),C=(0,m.useEvent)(u.captchaPopupService.captchaLoadingErrorSet),S=(0,m.useEvent)(u.captchaPopupService.captchaLoadingStarts),I=(0,m.useEvent)(u.captchaPopupService.captchaLoadingEnds),b=(0,m.useStore)(u.captchaPopupService.$isAudioPlaying),k=(0,m.useStore)(u.captchaPopupService.$captchaLoading),x=()=>{const e=g.current;e?.readyState||e?.load(),o.current=!1,e?.play().then((()=>{p&&p()})).catch((()=>{C()}))};(0,n.useEffect)((()=>{const t=g.current;e&&t&&t.load()}),[e]);return(0,i.jsxs)(i.Fragment,{children:[e&&(0,i.jsx)("audio",{ref:g,preload:"none",src:e,onLoadStart:S,onCanPlay:()=>{I(),h===u.CaptchaType.AUDIO&&!b&&o.current&&x()},onPlay:w,onPause:f,onError:C}),!k&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.IconIllustrationSoundWaveLeft36h,{className:(0,d.getColorClass)(b?"color_icon_accent_themed":"color_icon_tertiary")}),(0,i.jsx)(s.IconButton,{getRootRef:_,size:52,disabled:t,"aria-label":v?c.getLang("vkconnect_auth_captcha_play_audio_button_aria_label_new_ux"):c.getLang("vkconnect_auth_captcha_play_audio_button_aria_label"),className:(0,d.getColorClass)("color_text_accent_themed"),tabIndex:0,onClick:x,children:(0,i.jsx)(l.Icon40PlayCircle,{})}),(0,i.jsx)(a.IconIllustrationSoundWaveRight36h,{className:(0,d.getColorClass)(b?"color_icon_accent_themed":"color_icon_tertiary")})]})]})}))},493192:(e,t,o)=>{o.d(t,{SoundCaptcha:()=>i.SoundCaptcha});var i=o(647283)},934905:(e,t,o)=>{o.d(t,{getDeviceId:()=>d});var i=o(623702),n=o(418562),r=o(506537);const a="vk_web_captcha_device_id",d=e=>{let t;switch(e){case r.Platform.VK_WEB:t=a;break;case r.Platform.VK_M_WEB:t="vk_m_web_captcha_device_id";break;default:t=a}let o=i.vkLocalStorage.getItem(t);return o||(o=(0,n.default)(),i.vkLocalStorage.setItem(t,o)),o}},678041:(e,t,o)=>{o.d(t,{ReportReasonIds:()=>u,afterCommentReportSubmit:()=>v,showReportForm:()=>h});var i=o(474848),n=o(618913),r=o(610989),a=o(921004),d=o(811042),s=o(186301),c=o(507607),l=o(272259);(0,a.initApi)();const m=window.vk;var u;function h(e,t,n,r,a,d,s,m){const u=(0,c.asyncComponent)((()=>Promise.all([o.e(91498),o.e(89631),o.e(99595)]).then(o.bind(o,930887))),(({ReportForm:e})=>e));(0,l.showMessageBoxModalSuspense)((o=>(0,i.jsx)(u,{...o,reportSource:e,reportSourceOwnerId:t,reportSourceId:n,onSubmit:r,messengerAdditionalData:d,from:s,adData:m})),{onDestroy:a})}function v(e,t,o){const i=function(e,t,o){switch(e){case"photo":return`#post${t}photo_${o}`;case"video":return`#post${t}video_${o}mv`;case"market":return`#post${t}market_${o}`}}(e,t,o);if("photo"===e){const e=document.querySelector(`${i} .dld`);null!==e&&(e.outerHTML="")}const a=document.querySelector(`${i} .reply_wrap`);null!==a?(a.style.display="none",a.outerHTML+=`<div class="dld">${r.getLang("global_report_sent")}</div>`):(0,n.debugLog)(`Unable to hide report button for ${e} comment`)}(0,d.setLoginConfig)({onCaptcha:s.handleCaptcha,domain:m?.apiConfigDomains?.loginDomain}),(0,d.setApiConfig)({onCaptcha:s.handleCaptcha,domain:m?.apiConfigDomains?.apiDomain}),function(e){e[e.NotOriginalContent=28]="NotOriginalContent"}(u||(u={}))},898780:(e,t,o)=>{o.d(t,{mapVideoFullToVideoCardItem:()=>p});var i=o(8520),n=o(952881),r=o(417517),a=o(205504),d=o(125830),s=o(400281),c=o(214716),l=o(924156),m=o(823213);const u=e=>{const{image:t=[]}=e;let o=t.filter((e=>!e.with_padding));return o.length||(o=t),(0,i.getPhotoSize)(o,(0,a.getImageMinWidth)(240))?.url},h=e=>{const t=e.title||"",o=e.subtitle||"";return"music_video"===e.type?`${t} ${o}`:t},v=(e,t)=>{if("music_video"===e.type&&e?.main_artists){const t=e.main_artists[0];return{name:t.name||"",href:(0,r.getOwnerUrl)(t),...(0,d.getArtistPhotos)(t)}}return t?{...t,name:(0,n.getOwnerName)(t),href:(0,r.getOwnerUrl)(t,"/video/@"),verified:!!t.verified&&1===t.verified,is_nft:(0,c.checkOwnerIsNFT)(t)}:{name:"",href:""}},p=(e,t)=>({title:h(e),owner:{...v(e,t),badge:(0,l.getVerifiedBadge)(t)},isPrivacyLocked:(0,m.isPrivacyLocked)(e.privacy_view),isLive:(0,d.isLiveVideo)(e),duration:e.duration,viewedDuration:e.viewed_duration,badgeText:e.platform,trailerSrc:e.trailer?.mp4_360,thumbSrc:u(e),restriction:(0,m.mapRestrictions)(e.restriction),additionalInfo:(0,s.getAdditionalInfo)(e),description:e.description,isInteractive:Boolean(e.interactive_info)})},928898:(e,t,o)=>{o.d(t,{CANVAS_THUMBNAILS_ID:()=>c,DEFAULT_PREVIEW_SELECTED_FRAGMENT:()=>I,EEntryPointName:()=>f,EditorMode:()=>k,FRAGMENT_BORDER_RADIUS:()=>p,FRAGMENT_BORDER_WIDTH:()=>v,FRAGMENT_DURATION_MIN:()=>w,FRAGMENT_EPSILON:()=>g,FRAGMENT_SPLIT_INC:()=>_,FRAGMENT_WIDTH_MIN:()=>h,FragmentDraggingType:()=>x,MAX_PREVIEW_SELECTED_FRAGMENT:()=>S,MIN_PREVIEW_SELECTED_FRAGMENT:()=>C,SCROLL_MINIMAL_WIDTH:()=>m,SEGMENTS_TIMELINE_COUNT:()=>u,SNACKBAR_TIMEOUT:()=>b,TIMELINE_CANVAS_PADDING:()=>r,TIMELINE_CANVAS_WIDTH:()=>n,TIMELINE_MAX_ZOOM_LEVEL:()=>d,TIMELINE_MIN_ZOOM_LEVEL:()=>a,TIMELINE_SCROLL_USER_INTERACTION_TIMEOUT:()=>s,TIME_MARKER_POINTS_COUNT:()=>l});var i=o(292188);const n=window.innerWidth,r=12,a=1,d=5,s=10*i.SECOND,c="canvasThumbnails",l=4,m=50,u=5,h=40,v=2,p=8,_=1e-8,g=1e-4,w=.1-_;var f;!function(e){e.VideoUpload="video_upload",e.VideoEdit="video_edit",e.VideoToClip="video_to_clip"}(f||(f={}));const C=1,S=180,I=60,b=1e4;var k,x;!function(e){e.Preview="preview",e.Edit="edit"}(k||(k={})),function(e){e.Right="right",e.Left="left",e.Middle="middle"}(x||(x={}))}}]);try{stManager.done("dist/web/chunks/dfd7f843.f610f6bb.js")}catch(e){}