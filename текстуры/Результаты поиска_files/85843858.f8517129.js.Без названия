"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[57656],{70915:(e,t,o)=>{o.d(t,{BrowserEnvProvider:()=>fe,ChannelsProvider:()=>H,ConvosProvider:()=>L,ConvosSearchIndexProvider:()=>Ce,DeviceIdProvider:()=>Fe,DispatchProvider:()=>C,FeatureFlagsProvider:()=>ie,HelpHintsProvider:()=>x,InsertIntoCacheProvider:()=>ye,LastSeenProvider:()=>y,OrganisersProvider:()=>G,OwnerProvider:()=>ae,PeersProvider:()=>D,SpaceCallsProvider:()=>Z,ThemeStylesContextProvider:()=>xe,TribunesProvider:()=>J,TypingsProvider:()=>U,VideoConvosProvider:()=>te,VideoMessageShapesProvider:()=>me,ViewerProvider:()=>ue,isDepsShallowEqual:()=>g,matchAddEventListener:()=>T,useActualEffectCleanup:()=>m,useAppropriatePhotoSize:()=>Re,useBrowserEnv:()=>_e,useCallbackWithCustomCompare:()=>f,useChannels:()=>W,useCombinedRefs:()=>be,useConvos:()=>q,useConvosSearchIndex:()=>Ae,useDebounced:()=>h,useDeviceId:()=>Me,useDidUpdate:()=>l,useDispatch:()=>I,useFeatureFlags:()=>oe,useHelpHints:()=>A,useInsertIntoCache:()=>Ie,useLastSeen:()=>b,useLayoutDidUpdate:()=>p,useMemoWithCustomCompare:()=>v,useOnChange:()=>_,useOrganisers:()=>K,useOwner:()=>re,usePeers:()=>N,usePixelDensity:()=>E,usePreferReducedMotion:()=>F,usePrevious:()=>u,useSpaceCalls:()=>Y,useThemeStyles:()=>Pe,useTribunes:()=>z,useTypings:()=>P,useUrlFromBaseUrl:()=>Ue,useVideoConvos:()=>X,useVideoMessageShapes:()=>le,useViewer:()=>de,useViewport:()=>ve});var n=o(296540),i=o(175953),r=o(769609),s=o(726478),a=o(401193),d=o(777211),c=o(519267);function u(e){const t=(0,n.useRef)();return(0,n.useEffect)((()=>{t.current=e}),[e]),t.current}function l(e,t){const o=(0,n.useRef)(!1);(0,n.useEffect)((()=>{if(o.current)return e()}),t),(0,n.useEffect)((()=>{o.current=!0}),[])}function p(e,t){const o=(0,n.useRef)(!1);(0,n.useLayoutEffect)((()=>{if(o.current)return e()}),t),(0,n.useLayoutEffect)((()=>{o.current=!0}),[])}function m(e,t){const o=(0,n.useRef)(t);o.current=t,(0,n.useEffect)((()=>()=>{t.some(((e,t)=>e!==o.current[t]))&&e()}),[...t,e]);const i=(0,n.useRef)(e);i.current=e,(0,n.useEffect)((()=>()=>{i.current()}),[])}function _(e,t,o=!0){const[i,r]=(0,n.useState)(o?void 0:t);(void 0===i||t.some(((e,t)=>i[t]!==e)))&&(r(t),e())}function h(e,t){const[o,i]=(0,n.useState)({debounced:e,debouncedUpdatesCount:0});return(0,n.useLayoutEffect)((()=>{if(0===t)return void i((t=>({...t,debounced:e})));const o=setTimeout((()=>{i((({debouncedUpdatesCount:t})=>({debounced:e,debouncedUpdatesCount:t+1})))}),t);return()=>{clearTimeout(o)}}),[e,t]),o}function f(e,t,o){const i=(0,n.useRef)(e),r=(0,n.useRef)(t);return o(r.current,t)||(i.current=e,r.current=t),i.current}function v(e,t,o){const i=(0,n.useRef)();return i.current&&o(i.current.deps,t)||(i.current={value:e(),deps:t}),i.current.value}function g(e,t){return t.every(((t,o)=>(0,a.isShallowEqual)(t,e[o])))}function b(e){const t=(0,n.useContext)(k);if(i.isUserPeerId(e))return t.get(e)}const k=n.createContext(new Map),y=k.Provider;function I(){const e=(0,n.useContext)(w);if(!e)throw new Error("DispatchProvider не добавлен в дерево Реакта!");return e}const w=n.createContext(null),C=w.Provider;function A(){const e=(0,n.useContext)(S);if(void 0===e)throw new Error("HelpHintsProvider не добавлен в дерево Реакта!");return e}const S=n.createContext(new Set),x=S.Provider;function P(e,t="full",o=3){const r=(0,n.useContext)(M),s=N(),{lang:a}=_e(),c=r.get(e);if(!c)return;const u=e=>"full"===t?i.name(e):i.shortName(e),l=[],p=new Set;for(const e of d.TypingVariants){const t=c[e];t&&(l.push(e),t.peerIds.forEach((e=>p.add(e))))}const m=l.length>1?"text":l[0]||"text";if(0===o)return{text:a.use(`me_typing_${m}`),type:m};const _=[];for(const e of p){const t=s.get(e);if(t&&(_.push(t),_.length===o))break}let h;const f=p.size-_.length;switch(!0){case 0===_.length&&f>0:h=a.use("me_typing_people",{num:f});break;case f>0:h=_.map(u).join(", "),h=a.use("me_typing_names_lots",{num:f,values:{names:h}});break;case _.length>1:{const e=_.length>o-1?_.slice(0,o-1).map(u).join(", "):_[0]?u(_[0]):"",t=_[_.length-1],n=t?u(t):"";h=a.use("me_typing_names_couple",{values:{before:e,after:n}});break}case 1===_.length:h=_[0]?i.name(_[0]):"";break;default:h=""}return{text:"compact"===t?h:a.use(`me_typing_${m}_named`,{num:_.length+f,values:{names:h}}),type:m}}const M=n.createContext(new Map),U=M.Provider,R=()=>window.devicePixelRatio>=1.25;function E(){const[e,t]=(0,n.useState)(R);return(0,n.useEffect)((()=>T(window.matchMedia("(resolution: 1.25dppx)"),(()=>{t(R)}))),[]),e}function F(){const[e,t]=(0,n.useState)(),o=de(),i=I(),{storage:r}=_e();return(0,n.useEffect)((()=>{const e=window.matchMedia("(prefers-reduced-motion: reduce)");return t(e.matches),T(e,(e=>{t(e.matches)}))}),[]),(0,n.useEffect)((()=>{const t=r.get("prev-reduced-motion-settings");if(void 0===e||!!t===e)return;let n;r.set("prev-reduced-motion-settings",e?{messageReactionAnimation:o.settings.messageReactionAnimation,isStickersAnimationEnabled:o.settings.isStickersAnimationEnabled,videoMessageAutoplay:o.settings.videoMessageAutoplay}:null),n=e?{messageReactionAnimation:!1,isStickersAnimationEnabled:!1,videoMessageAutoplay:!1}:t??{messageReactionAnimation:!0,isStickersAnimationEnabled:!0,videoMessageAutoplay:!0},Object.entries(n).forEach((e=>{const[t,n]=e;o.settings[t]!==n&&i("isStickersAnimationEnabled"!==t?{type:"UserChangedSetting",setting:t,value:n,entrypoint:"reduced_motion"}:{type:"ChangeStickersSettings",setting:"isStickersAnimationEnabled",value:n})}))}),[e]),e}function T(e,t){try{return e.addEventListener("change",t),()=>{e.removeEventListener("change",t)}}catch{return e.addListener(t),()=>{e.removeListener(t)}}}function N(){return(0,n.useContext)(B)}const B=n.createContext(new Map),D=B.Provider;function q(){return(0,n.useContext)(j)}const j=n.createContext(new Map),L=j.Provider;function K(){return(0,n.useContext)(O)}const O=n.createContext(s.empty()),G=O.Provider;function W(){return(0,n.useContext)(V)}const V=n.createContext(new Map),H=V.Provider;function z(){return(0,n.useContext)($)}const $=n.createContext(new Map),J=$.Provider;function Y(){return(0,n.useContext)(Q)}const Q=n.createContext(new Map),Z=Q.Provider;function X(){return(0,n.useContext)(ee)}const ee=n.createContext(new Map),te=ee.Provider;function oe(){const e=(0,n.useContext)(ne);if(!e)throw new Error("FeatureFlagsProvider не добавлен в дерево Реакта!");return e}const ne=n.createContext(null),ie=ne.Provider;function re(){const e=(0,n.useContext)(se);if(!e)throw new Error("OwnerProvider не добавлен в дерево Реакта!");return e}const se=n.createContext(null),ae=se.Provider;function de(){const e=(0,n.useContext)(ce);if(!e)throw new Error("ViewerProvider не добавлен в дерево Реакта!");return e}const ce=n.createContext(null),ue=ce.Provider;function le(){return(0,n.useContext)(pe)}const pe=n.createContext(new Map),me=pe.Provider;function _e(){const e=(0,n.useContext)(he);if(!e)throw new Error("BrowserEnvProvider не добавлен в дерево Реакта!");return e}const he=n.createContext(null),fe=he.Provider;function ve({debounced:e=!1}){const[t,o]=(0,n.useState)(ge),i=(0,n.useRef)((0,a.debounce)(o,300,!1));return(0,n.useLayoutEffect)((()=>{const t=i.current,n=()=>{e?t(ge()):o(ge())};return window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n),e&&t.cancel()}}),[e]),t}function ge(){return"undefined"==typeof window?[0,0]:[document.documentElement.clientWidth,document.documentElement.clientHeight]}function be(...e){return t=>{e.forEach((e=>{e&&("function"==typeof e?e(t):e.current=t)}))}}const ke=n.createContext(null),ye=ke.Provider;function Ie(){const e=(0,n.useContext)(ke);if(!e)throw new Error("InsertIntoCacheProvider не добавлен в дерево Реакта!");return e}const we=n.createContext(r.create()),Ce=we.Provider;function Ae(){return(0,n.useContext)(we)}const Se=n.createContext(null),xe=Se.Provider;function Pe(){const e=(0,n.useContext)(Se);if(!e)throw new Error("ThemeStylesContextProvider не добавлен в дерево Реакта!");return e}function Me(){const e=(0,n.useContext)(Ee);if(!e)throw new Error("DeviceIdProvider не добавлен в дерево Реакта!");return e}function Ue(e,t,o){const i=function(){const[e,t]=(0,n.useState)((()=>window.devicePixelRatio));return(0,n.useEffect)((()=>{const e=()=>{t(window.devicePixelRatio)};return T(window.matchMedia("(resolution: 1.25dppx)"),e)}),[]),e}(),r=Re(e,Math.max(o,t)),s=Math.ceil(o*i),a=Math.ceil(t*i);if(!e)return;if(!e.baseUrl)return r;return`${(0,c.getClearBaseUrl)(e.baseUrl)}&cs=${s}x${a}`}function Re(e,t){const o=E();if(!e)return;o&&(t*=2);const n=[{size:50,url:e.photo50},{size:100,url:e.photo100||e.photo50},{size:200,url:e.photo200||e.photo100||e.photo50},{size:400,url:e.photo400||e.photo200||e.photo100||e.photo50}];return n.find((e=>t<=e.size&&Boolean(e.url)))?.url}const Ee=n.createContext(null),Fe=Ee.Provider},305217:(e,t,o)=>{function n(e){return e}o.d(t,{resolveEventId:()=>n})},241503:(e,t,o)=>{o.d(t,{empty:()=>i,getLockId:()=>a,isLoaded:()=>d,push:()=>c,refresh:()=>u,snakeCaseId:()=>s,sorter:()=>p,updateCounters:()=>l});var n=o(103026);function i(){const e={channelIds:new Set,hasMore:!0,unreadCount:0,unreadUnmutedCount:0,totalCount:0,boundary:{channelId:n.resolveId(0),majorSortId:1/0,minorSortId:1/0}};return{all:{kind:"all",...e},unread:{kind:"unread",...e},archive:{kind:"archive",isHidden:!1,...e}}}const r={all:"all",unread:"unread",archive:"archived"};function s(e){return r[e]}function a(e){return`filter_${e}`}function d(e){return e.boundary.minorSortId!==1/0&&e.boundary.majorSortId!==1/0}function c(e,t,o,i){for(const n of o)m(e,t,n),u(e,n);e[t].hasMore=i,e[t].hasMore||(e[t].boundary={majorSortId:0,minorSortId:0,channelId:n.resolveId(0)})}function u(e,t){e.all.channelIds.delete(t.id),e.unread.channelIds.delete(t.id),e.archive.channelIds.delete(t.id),t.isMember&&(t.isArchived?_(e.archive,t)&&e.archive.channelIds.add(t.id):(_(e.all,t)&&e.all.channelIds.add(t.id),n.isUnread(t)&&_(e.unread,t)&&e.unread.channelIds.add(t.id)))}function l(e,{unread:t,archiveTotal:o,unreadUnmuted:n}){void 0!==t&&(e.all.unreadCount=t,e.unread.unreadCount=t),void 0!==n&&(e.all.unreadUnmutedCount=n,e.unread.unreadUnmutedCount=n),void 0!==o&&(e.archive.totalCount=o)}function p(e,t){if(e.majorSortId!==t.majorSortId)return t.majorSortId-e.majorSortId;const o=n.lastPost({channel:e,withPending:!0}),i=n.lastPost({channel:t,withPending:!0});return"Pending"===o?.kind||"Pending"===i?.kind?(i?.sentAt??0)-(o?.sentAt??0):t.minorSortId!==e.minorSortId?t.minorSortId-e.minorSortId:e.id-t.id}function m(e,t,o){n.isHidden(o)||(o.majorSortId<e[t].boundary.majorSortId?e[t].boundary={channelId:o.id,majorSortId:o.majorSortId,minorSortId:o.minorSortId}:o.majorSortId===e[t].boundary.majorSortId&&o.minorSortId<e[t].boundary.minorSortId?(e[t].boundary.channelId=o.id,e[t].boundary.minorSortId=o.minorSortId):o.majorSortId===e[t].boundary.majorSortId&&o.minorSortId===e[t].boundary.minorSortId&&(e[t].boundary.channelId=o.id),"all"===t&&m(e,"unread",o))}function _(e,t){return!n.isHidden(t)&&(!(t.majorSortId<e.boundary.majorSortId)&&(t.majorSortId>e.boundary.majorSortId||!(t.minorSortId<e.boundary.minorSortId)&&(t.minorSortId>e.boundary.minorSortId||!(t.id>e.boundary.channelId))))}},211274:(e,t,o)=>{o.d(t,{empty:()=>s,getLockId:()=>u,isLoaded:()=>c,isVisible:()=>l,push:()=>p,refresh:()=>m,snakeCaseId:()=>d,sorter:()=>h,toggleBusinessNotifyVisibility:()=>f,updateCounters:()=>_});var n=o(856562),i=o(84113),r=o(401193);function s(){const e={peerIds:new Set,hasMore:!0,unreadCount:0,unreadUnmutedCount:0,totalCount:0,boundary:{majorSortId:1/0,minorSortId:1/0}};return{all:{kind:"all",...e},unread:{kind:"unread",headerNotMutedUnread:0,...e},chats:{kind:"chats",...e},archive:{kind:"archive",hasMentions:!1,...e},messageRequest:{kind:"messageRequest",...e},businessNotify:{kind:"businessNotify",isHidden:!1,...e}}}const a={all:"all",unread:"unread",chats:"chats",messageRequest:"message_request",businessNotify:"business_notify",archive:"archive"};function d(e){return a[e]}function c(e){return e.boundary.majorSortId!==1/0&&e.boundary.minorSortId!==1/0}function u(e){return`filter_${e}`}function l(e){switch(e.kind){case"all":case"unread":case"chats":case"archive":return!0;case"messageRequest":return e.peerIds.size>0||e.hasMore;case"businessNotify":return!e.isHidden&&(e.totalCount>0||e.unreadCount>0);default:(0,r.exhaustivenessCheck)(e)}}function p(e,t,o,n){for(const n of o)v(e,t,n),m(e,n);e[t].hasMore=n,e[t].hasMore||(e[t].boundary={majorSortId:0,minorSortId:1})}function m(e,t){if(!t.spaceId)switch(t.kind){case"ChatConvo":case"GroupConvo":case"UserConvo":case"ContactConvo":case"MessageRequestUserConvo":case"MessageRequestChatConvo":case"BusinessNotify":if(e.all.peerIds.delete(t.peerId),e.unread.peerIds.delete(t.peerId),e.archive.peerIds.delete(t.peerId),e.messageRequest.peerIds.delete(t.peerId),e.businessNotify.peerIds.delete(t.peerId),n.isDeleted(t))return;return n.isBusinessNotify(t)?void(g(e.businessNotify,t)&&e.businessNotify.peerIds.add(t.peerId)):n.isMR(t)?void(n.isPendingMR(t)&&g(e.messageRequest,t)&&e.messageRequest.peerIds.add(t.peerId)):n.hasPeerFlag(t,n.PEER_FLAGS.isArchived)?void(g(e.archive,t)&&e.archive.peerIds.add(t.peerId)):(g(e.all,t)&&e.all.peerIds.add(t.peerId),n.isUnread(t)&&g(e.unread,t)&&e.unread.peerIds.add(t.peerId),void("ChatConvo"===t.kind&&g(e.chats,t)&&e.chats.peerIds.add(t.peerId)));default:return(0,r.exhaustivenessCheck)(t)}}function _(e,{unread:t,unreadUnmuted:o,headerNotMutedUnread:n,archive:i,archiveTotal:r,archiveMentions:s,messageRequests:a,businessNotify:d,businessNotifyTotal:c}){void 0!==t&&(e.all.unreadCount=t,e.unread.unreadCount=t),void 0!==o&&(e.all.unreadUnmutedCount=o,e.unread.unreadUnmutedCount=o),void 0!==n&&(e.unread.headerNotMutedUnread=n),void 0!==i&&(e.archive.unreadCount=i),void 0!==s&&(e.archive.hasMentions=!!s),void 0!==r&&(e.archive.totalCount=r),void 0!==a&&(e.messageRequest.totalCount=a),void 0!==d&&(e.businessNotify.unreadCount=d),void 0!==c&&(e.businessNotify.totalCount=c)}function h(e,t){if(e.majorSortId!==t.majorSortId)return t.majorSortId-e.majorSortId;if(e.isDrafted!==t.isDrafted)return Number(t.isDrafted)-Number(e.isDrafted);const o=i.lastNode({history:e.history,withDeleted:!1,withPending:!0,withFailed:!1})?.item,n=i.lastNode({history:t.history,withDeleted:!1,withPending:!0,withFailed:!1})?.item;return"Queued"===o?.kind||"Queued"===n?.kind?(n?.sentAt??0)-(o?.sentAt??0):t.minorSortId!==e.minorSortId?t.minorSortId-e.minorSortId:t.peerId-e.peerId}function f(e,t){e.businessNotify.isHidden=!t}function v(e,t,o){n.isHidden(o)||(o.majorSortId<e[t].boundary.majorSortId?e[t].boundary={majorSortId:o.majorSortId,minorSortId:o.minorSortId}:o.majorSortId===e[t].boundary.majorSortId&&o.minorSortId<e[t].boundary.minorSortId&&(e[t].boundary.minorSortId=o.minorSortId),"all"===t&&(v(e,"unread",o),v(e,"chats",o)))}function g(e,t){return!!t.isDrafted||!n.isHidden(t)&&(t.majorSortId>e.boundary.majorSortId||t.majorSortId===e.boundary.majorSortId&&t.minorSortId>=e.boundary.minorSortId)}},507846:(e,t,o)=>{function n(){return[]}o.d(t,{empty:()=>n})},726478:(e,t,o)=>{o.d(t,{canHavePinnedConvos:()=>m,empty:()=>l,filterToTab:()=>h,getId:()=>_,isEqual:()=>p,refresh:()=>c,refreshChannels:()=>u,tabToChannelFilter:()=>v,tabToFilter:()=>f});var n=o(401193),i=o(211274),r=o(911203),s=o(241503),a=o(728921),d=o(507846);function c(e,t,o){o.vkm_new_convo_folder_logic||a.refresh(e.folders,t),r.refresh(e.sublists,t),i.refresh(e.filters,t)}function u(e,t){s.refresh(e.channelFilters,t)}function l(){return{filters:i.empty(),folders:a.empty(),sublists:r.empty(),recommendedFolders:d.empty(),channelFilters:s.empty()}}function p(e,t){if(e.kind!==t.kind)return!1;switch(e.kind){case"filters":return e.filter===t.filter;case"folders":return e.id===t.id;default:(0,n.exhaustivenessCheck)(e)}}function m(e){return"filters"===e.kind}function _(e){return"filters"===e.kind?`${e.kind}__${e.filter}`:`${e.kind}__${e.id}__${e.filter}`}function h(e){switch(e){case"archive":case"unread":case"businessNotify":case"messageRequest":return e;default:return}}function f(e){switch(e){case"archive":case"unread":case"businessNotify":case"messageRequest":return e;default:return"all"}}function v(e){switch(e){case"archive":case"unread":return e;default:return"all"}}},519267:(e,t,o)=>{function n(e){if(!e)return;const t=new URL(e);return t.searchParams.delete("cs"),decodeURIComponent(t.toString())}o.d(t,{getClearBaseUrl:()=>n})},157570:(e,t,o)=>{o.d(t,{MAX_MESSAGE_REACTIONS_COUNT:()=>n,resolveId:()=>i});const n=16;function i(e){return!Number.isNaN(e)&&e||(e=0),e}},856061:(e,t,o)=>{function n(e){return!Number.isNaN(e)&&e||(e=0),e}o.d(t,{resolveId:()=>n})},157274:(e,t,o)=>{function n(e){return Number.isNaN(e)&&(e=0),e}function i(e){return Boolean(e.item.popup)}o.d(t,{isPopupSticker:()=>i,resolveStickerId:()=>n})},911203:(e,t,o)=>{function n(){return[]}function i(e,t){return!(t.peerFlags&e.filter.and^e.filter.xor)}function r(e,t){for(const o of e)o.peerIds.delete(t.peerId),i(o,t)&&o.peerIds.add(t.peerId)}o.d(t,{empty:()=>n,refresh:()=>r})},776983:(e,t,o)=>{o.d(t,{MABLE_STYLE_ID:()=>i,SYSTEM_STYLE_ID:()=>n,gradientToStyle:()=>d,resolveAppearanceId:()=>s,resolveBackgroundId:()=>a,resolveStyleId:()=>r});const n="system",i="mable";function r(e){return e}function s(e){return e}function a(e){return e}function d(e){return[`${e.angle}deg`,...e.colors].join(",")}},482519:(e,t,o)=>{o.d(t,{dictionaryLatinConvert:()=>a,toLocalCase:()=>c,toTranslit:()=>d});const n={u1072:"a",u1073:"b",u1074:"v",u1075:"g",u1076:"d",u1077:"e",u1105:"yo",u1078:"zh",u1079:"z",u1080:"i",u1081:"y",u1082:"k",u1083:"l",u1084:"m",u1085:"n",u1086:"o",u1087:"p",u1088:"r",u1089:"s",u1090:"t",u1091:"u",u1092:"f",u1093:"kh",u1094:"ts",u1095:"ch",u1096:"sh",u1097:"shch",u1098:"'",u1099:"y",u1100:"'",u1101:"e",u1102:"yu",u1103:"ya"},i={...n,u1093:"h",u1097:"sh",u1098:"",u1100:"",u1105:"e"},r={u102:"а",u44:"б",u100:"в",u117:"г",u108:"д",u116:"е",u92:"ё",u59:"ж",u112:"з",u98:"и",u113:"й",u114:"к",u107:"л",u118:"м",u121:"н",u106:"о",u103:"п",u104:"р",u99:"с",u110:"т",u101:"у",u97:"ф",u91:"х",u119:"ц",u120:"ч",u105:"ш",u111:"щ",u93:"ъ",u109:"ь",u115:"ы",u39:"э",u46:"ю",u122:"я",u60:"б",u126:"ё",u58:"ж",u123:"х",u125:"ъ",u34:"э",u62:"ю",u64:'"',u35:"№",u36:";",u37:"%",u94:":",u38:"?",u63:",",u47:"."},s={yo:"ё",YO:"Ё",zh:"ж",ZH:"Ж",kh:"х",KH:"Х",ts:"ц",TS:"Ц",ch:"ч",CH:"Ч",sch:"щ",SCH:"Щ",shch:"щ",SHCH:"Щ",sh:"ш",SH:"Ш",eh:"э",EH:"Э",yu:"ю",YU:"Ю",ya:"я",YA:"Я","'":"ь",a:"а",A:"А",b:"б",B:"Б",v:"В",g:"г",G:"Г",d:"д",D:"Д",e:"е",E:"Е",z:"з",Z:"З",i:"и",I:"И",j:"й",J:"Й",k:"к",K:"К",l:"л",L:"Л",m:"м",M:"М",n:"н",N:"Н",o:"о",O:"О",p:"п",P:"Р",r:"р",R:"Р",s:"с",S:"С",t:"т",T:"Т",u:"у",U:"У",f:"ф",F:"Ф",h:"х",H:"Х",c:"ц",C:"Ц",y:"ы",Y:"Ы"};function a({value:e}){return function({dictionary:e,value:t}){return Object.entries(e).reduce(((e,[t,o])=>e.replace(new RegExp(t,"g"),o)),t)}({value:e,dictionary:s})}function d(e,t){e=e.toLowerCase().trim();const o=[n,i];return t&&o.push(r),o.reduce(((t,o)=>{const n=u(e,o);return n===e||t.includes(n)||t.push(n),t}),[])}function c(e){return u(e=e.toLowerCase().trim(),r)}function u(e,t){let o="";for(const n of e){const e=t["u"+n.codePointAt(0)];o+=void 0!==e?e:n}return o}},769609:(e,t,o)=>{o.d(t,{add:()=>a,byWords:()=>p,create:()=>s,peerWords:()=>l,search:()=>d});var n=o(482519),i=o(401193),r=o(394790);function s(){return{items:new Set,branches:{}}}function a(e,t,o){if(Array.isArray(t))t.forEach((t=>a(e,t,o)));else{const{id:n,strings:i}=o(t);(0,r.getWordsVariants)(i).forEach((t=>{let o=e;o.items.add(n),Array.from(t.trim().toLowerCase()).forEach((e=>{let t=o.branches[e];t||(t=o.branches[e]=s()),t.items.add(n),o=t}))}))}return e}function d(e,t,o={direct:!0,localCased:!0,translit:!0}){const i=o.direct&&c(e,p(t)),r=o.localCased&&c(e,p(n.toLocalCase(t))),s=o.translit&&c(e,n.toTranslit(t));return new Set([...i||[],...r||[],...s||[]])}function c(e,t){let o=null;for(const n of t){const t=u(e,n);if(o)for(const e of o)t.has(e)||o.delete(e);else o=new Set([...t])}return o||new Set}function u(e,t){let o=e;const n=t.trim().toLowerCase();for(const e of n){const t=o.branches[e];if(!t)return new Set;o=t}return o.items}function l(e){const t=[];switch(e.kind){case"Chat":t.push(...p(e.title));break;case"Group":e.screenName&&t.push(e.screenName),t.push(...p(e.name));break;case"User":e.screenName&&t.push(e.screenName),t.push(...p(e.firstName)),t.push(...p(e.lastName));break;case"Contact":t.push(...p(e.name));break;default:(0,i.exhaustivenessCheck)(e)}return t}function p(e){return e.trim().toLowerCase().split(/\s+/g)}},394790:(e,t,o)=>{o.d(t,{getWordsVariants:()=>i});var n=o(482519);function i(e){const t=[];for(const o of e){const e=o.replace(/ё/g,"е").replace(/Ё/g,"Е");e!==o&&t.push(e),n.toTranslit(o,!0).forEach((e=>{e!==o&&t.push(e)})),t.push(o)}return t}},872060:(e,t,o)=>{o.d(t,{UNKNOWN_SHAPE_ID:()=>h,apiAttachWallOwnerId:()=>Y,emptyPreview:()=>_,fromApiAttach:()=>f,fromApiAudio:()=>E,fromApiConvoAttach:()=>v,fromApiDoc:()=>w,fromApiPhoto:()=>A,fromApiPoll:()=>z,fromApiPollBackgroundGradient:()=>$,fromApiVideo:()=>S,fromApiVoice:()=>F,fromApiWallAttach:()=>g,fromApiWallReplyAttach:()=>b});var n=o(203080),i=o(520828),r=o(175953),s=o(649166),a=o(596917),d=o(401193),c=o(700462),u=o(841093),l=o(462700),p=o(703837);const m=200,_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAA1JREFUGFdjYGBg+A8AAQQBAHAgZQsAAAAASUVORK5CYII=",h=-1;function f({apiAttaches:e,messageAccessKey:t,attachPositionOffset:o}){if(0===e.length)return{};const n={},i=e=>{n.unknown=[...n.unknown||[],{data:e,kind:"Unknown"}]};let s=o;for(const o of e)switch(void 0!==s&&s++,o.type){case"photo":{if(!o.photo){i(o);break}const e=A({apiPhoto:o.photo,messageAccessKey:t,position:s});if(!e){i(o);break}n.photos=[...n.photos||[],e];break}case"audio":{if(!o.audio){i(o);break}const e=E(o.audio);n.audios=[...n.audios||[],e];break}case"video":if(!o.video){i(o);break}const e=S({apiVideo:o.video,messageAccessKey:t,position:s});if(!e){i(o);break}n.videos=[...n.videos||[],e];break;case"doc":{if(!o.doc){i(o);break}const e=w(o.doc);if(!e){i(o);break}n.docs=[...n.docs||[],e];break}case"link":{if(!o.link){i(o);break}const e=k(o.link);if(!e){i(o);break}const t=e=>e.image&&{...e,image:e.image,kind:"InviteLink"};if((0,l.getChatJoinHash)(e.url)&&e.image){n.inviteLink=t(e);break}n.link=e;break}case"market":if(!o.market){i(o);break}n.market={kind:"Market",id:(f=o.market).id,ownerId:f.owner_id,isService:!!f.is_price_list_service,title:f.title,price:f.price.text,priceOld:f.price.old_amount_text,photo:f.thumb_photo};break;case"market_album":if(!o.market_album){i(o);break}n.marketAlbum=I(o.market_album);break;case"gift":if(!o.gift){i(o);break}const v=R(o.gift);if(!v){i(o);break}n.gift=v;break;case"event":if(!o.event){i(o);break}const C=(h=o.event,{kind:"Event",id:r.resolveRealId("Group",h.id),text:h.text,time:h.time&&1e3*h.time,address:h.address,isFavorite:h.is_favorite});n.event=C;break;case"ugc_sticker":{if(!o.ugc_sticker){i(o);break}const e=(0,c.fromApiUgcSticker)(o.ugc_sticker);if(!e){i(o);break}n.ugcSticker=e;break}case"sticker_pack_preview":{if(!o.sticker_pack_preview){i(o);break}const e=y(o.sticker_pack_preview);if(!e){i(o);break}n.stickerPack=e;break}case"sticker":{if(!o.sticker){i(o);break}const e=(0,c.fromApiSticker)(o.sticker);if(!e){i(o);break}n.sticker=e;break}case"wall":{if(!o.wall||!o.wall.from_id||!o.wall.id){i(o);break}o.wall.geo&&(o.wall.attachments=[...o.wall.attachments||[],{type:"geo",geo:o.wall.geo}]);const e=Y(o.wall);if(!e){i(o);break}let t="all";1===o.wall.friends_only&&(t="friends"),1===o.wall.best_friends_only&&(t="best_friends"),n.wall={kind:"Wall",authorId:r.resolveId(o.wall.from_id),ownerId:r.resolveId(e),id:o.wall.id,date:1e3*(o.wall.date||0),chunks:a.fromServerText(o.wall.text||""),attaches:g(o.wall),isAds:"post_ads"===o.wall.post_type,views:o?.wall?.views?.count||0,isDeleted:o.wall.is_deleted||!1,donut:{isDonut:o?.wall?.donut?.is_donut,placeholder:o?.wall?.donut?.placeholder?{text:o?.wall?.donut.placeholder?.text,button:o?.wall?.donut.placeholder?.button}:void 0,duration:(0,u.fromApiDonutDuration)(o?.wall?.donut?.paid_duration)},isVisibleFor:t,trackCode:o.wall.track_code};break}case"wall_reply":{if(!(o.wall_reply&&o.wall_reply.from_id&&o.wall_reply.id&&o.wall_reply.post_id)){i(o);break}const e=Y(o.wall_reply);if(!e){i(o);break}n.wallReply={kind:"WallReply",id:o.wall_reply.id,postId:o.wall_reply.post_id,authorId:r.resolveId(o.wall_reply.from_id),ownerId:r.resolveId(e),parentsStack:o.wall_reply.parents_stack,date:1e3*(o.wall_reply.date||0),chunks:a.fromServerText(o.wall_reply.text||""),attaches:b(o.wall_reply.attachments||[])};break}case"article":if(!o.article){i(o);break}n.article=M(o.article);break;case"poll":if(!o.poll){i(o);break}n.poll=z(o.poll);break;case"graffiti":if(!o.graffiti){i(o);break}n.graffiti={kind:"Graffiti",imageUrl:o.graffiti.url,width:o.graffiti.width,height:o.graffiti.height};break;case"audio_message":if(!o.audio_message){i(o);break}n.voice=F(o.audio_message);break;case"audio_playlist":{if(!o.audio_playlist){i(o);break}const e={kind:"AudioPlaylist",id:(_=o.audio_playlist).id,ownerId:_.owner_id,type:N[_.type],title:_.title,count:_.count,accessKey:_.access_key,plays:_.plays,year:_.year,photo:_.photo,thumbs:_.thumbs,mainArtists:_.main_artists?.map((e=>B(e))),featuredArtists:_.featured_artists?.map((e=>B(e))),audios:_.audios?.map((e=>E(e)))};n.audioPlaylists=[...n.audioPlaylists||[],e];break}case"artist":{if(!o.artist){i(o);break}const e=o.audios;n.artist=B(o.artist,e);break}case"podcast":if(!o.podcast){i(o);break}n.podcast=D(o.podcast);break;case"money_transfer":if(!o.money_transfer){i(o);break}n.moneyTransfer=q(o.money_transfer);break;case"money_request":if(!o.money_request){i(o);break}n.moneyRequest=j(o.money_request);break;case"story":if(!o.story){i(o);break}n.story={kind:"Story",id:(m=o.story).id,ownerId:m.owner_id,date:void 0!==m.date?1e3*m.date:void 0,restricted:!!m.is_restricted,expired:!!m.is_expired,expiresAt:void 0!==m.expires_at?1e3*m.expires_at:void 0,available:!!m.can_see,narrativesCount:m.narratives_count,photo:m.photo&&A({apiPhoto:m.photo}),video:m.video&&S({apiVideo:m.video})};break;case"geo":if(!o.geo||!o.geo.coordinates){i(o);break}n.geo={kind:"Geo",coordinates:o.geo.coordinates,place:o.geo.place};break;case"call":{if(!o.call){i(o);break}const e=O(o.call);if(!e){i(o);break}n.finishedCall=e;break}case"group_call_in_progress":if(!o.group_call_in_progress){i(o);break}n.activeCall={kind:"ActiveCall",initiatorId:(p=o.group_call_in_progress).initiator_id,joinLink:p.join_link,vkJoinLink:p.vk_join_link,participants:{list:p.participants.list?.map(r.resolveId),count:p.participants.count||0,coverList:K(p)}};break;case"mini_app":if(!o.mini_app){i(o);break}const x=G(o.mini_app);if(!x){i(o);break}n.miniApps=[...n.miniApps||[],x];break;case"app_action":if(!o.app_action){i(o);break}const P=V(o.app_action);if(!P){i(o);break}n.miniAppWidgets=[...n.miniAppWidgets||[],P];break;case"donut_link":if(!o.donut_link){i(o);break}const U=H(o.donut_link);if(!U){i(o);break}n.donutLink=U;break;case"video_message":if(!o.video_message){i(o);break}n.videoMessage=Q(o.video_message);break;case"widget":if(!o.widget){i(o);break}n.widget=X(o.widget);break;case"narrative":if(!o.narrative){i(o);break}const T=ee(o.narrative);if(!T){i(o);break}n.narratives=[...n.narratives||[],T];break;case"question":if(!o.question){i(o);break}n.question={kind:"Question",id:(d=o.question).id,question:d.question,url:d.url||"#",ownerId:r.resolveId(d.owner_id)};break;case"album":if(!o.album){i(o);break}n.album=te(o.album);break;case"curator":{const e=o.curator,t=e?.url,r=e?.id;if(e&&t&&r){const o=oe({...e,url:t,id:r});n.curator=[...n.curator||[],o];break}i(o);break}case"group":case"link_curator":case"video_playlist":case"vkpay":i(o);break;default:o.type;i(o);break}var d,p,m,_,h,f;return n}function v(e){const t={};for(const o of e)switch(o.attachment.type){case"photo":{if(!o.attachment.photo)break;const e=A({apiPhoto:o.attachment.photo,messageAccessKey:o.attachment.photo.access_key,position:o.position});if(!e)break;const n={attach:e,cmid:s.resolveCmid(o.cmid),authorId:r.resolveId(o.from_id),date:o.date};t.photos=(t.photos||[]).concat(n);break}case"audio":{if(!o.attachment.audio)break;const e={attach:E(o.attachment.audio),cmid:s.resolveCmid(o.cmid),authorId:r.resolveId(o.from_id),date:o.date};t.audios=(t.audios||[]).concat(e);break}case"video":{if(!o.attachment.video)break;const e=S({apiVideo:o.attachment.video,messageAccessKey:o.attachment.video.access_key,position:o.position});if(!e)break;const n={attach:e,cmid:s.resolveCmid(o.cmid),authorId:r.resolveId(o.from_id),date:o.date};t.videos=(t.videos||[]).concat(n);break}case"doc":{if(!o.attachment.doc)break;const e=w(o.attachment.doc);if(!e)break;const n={attach:e,cmid:s.resolveCmid(o.cmid),authorId:r.resolveId(o.from_id),date:o.date};t.docs=(t.docs||[]).concat(n);break}case"link":{if(!o.attachment.link)break;const e=k(o.attachment.link);if(!e)break;const n={attach:e,cmid:s.resolveCmid(o.cmid),authorId:r.resolveId(o.from_id),date:o.date};t.links=(t.links||[]).concat(n);break}case"mini_app":{if(!o.attachment.mini_app)break;const e=G(o.attachment.mini_app);if(!e)break;const n={attach:e,cmid:s.resolveCmid(o.cmid),authorId:r.resolveId(o.from_id),date:o.date};t.links=(t.links||[]).concat(n);break}case"app_action":{if(!o.attachment.app_action)break;const e=V(o.attachment.app_action);if(!e)break;const n={attach:e,cmid:s.resolveCmid(o.cmid),authorId:r.resolveId(o.from_id),date:o.date};t.miniAppWidgets=(t.miniAppWidgets||[]).concat(n);break}case"audio_message":case"video_message":case"video_playlist":case"graffiti":case"market":case"wall":break;default:o.attachment.type}return t}function g(e){const{geo:t,attachments:o,copy_history:n,access_key:i}=e,s=[];t&&o?.push({type:"geo",geo:t});for(const e of o||[])switch(e.type){case"photo":case"audio":case"video":case"doc":case"link":case"mini_app":case"sticker":case"market":case"curator":case"article":case"poll":case"audio_playlist":case"album":case"artist":case"podcast":case"narrative":case"event":case"market_album":case"donut_link":case"graffiti":s.push({type:e.type,[e.type]:e[e.type]});break;case"geo":{if(!e.geo)break;const t=e.geo.coordinates?.split(" ").map((e=>parseFloat(e)));s.push({type:"geo",geo:{...e.geo,place:{title:e.geo.place?.title,address:e.geo.place?.address},coordinates:t&&t[0]&&t[1]?{latitude:t[0],longitude:t[1]}:void 0}});break}case"textlive":case"textpost":case"textpost_publish":case"posted_photo":case"note":case"app":case"page":case"situational_theme":case"group":case"photos_list":case"pretty_cards":case"video_playlist":case"clip":case"room":case"online_booking":case"market_link":case"message_to_bc":break;default:e.type}const d=f({apiAttaches:s,messageAccessKey:i});if(n?.[0]&&0!==n?.[0].from_id){const e=Y(n[0]);d.wallHistory={kind:"WallHistory",id:n[0].id||0,authorId:r.resolveId(n[0].from_id),ownerId:r.resolveId(e),date:1e3*(n[0].date||0),text:n[0].text||"",attaches:b(n[0].attachments||[]),chunks:a.fromServerText(n[0].text||"")}}return d}function b(e){const t=[];for(const o of e)switch(o.type){case"photo":case"audio":case"audio_playlist":case"artist":case"video":case"doc":case"curator":case"link":case"album":case"event":case"narrative":case"mini_app":case"sticker":case"market":case"graffiti":case"market_album":case"geo":t.push({type:o.type,[o.type]:o[o.type]});break;case"note":case"page":case"app":case"article":case"donut_link":case"group":case"photos_list":case"poll":case"posted_photo":case"pretty_cards":case"video_playlist":case"situational_theme":case"textlive":case"textpost":case"textpost_publish":case"podcast":case"room":case"clip":case"online_booking":case"market_link":case"message_to_bc":break;default:o.type}return f({apiAttaches:t})}function k(e){let t=e.url;const o=/^https:\/\/m\.vk\.com(.+)/;if(o.test(e.url)){const n=e.url.match(o);t=n&&n[1]?n[1]:t}let n;return(e.seller_product?.owner_name||e.rating?.stars||e.rating?.reviews_count||e.seller_product?.favicon_link)&&(n={ownerName:e.seller_product?.owner_name,rating:e.rating?.stars,reviews:e.rating?.reviews_count,favicon:e.seller_product?.favicon_link}),{kind:"Link",url:t,meta:n,title:e.title??"",subtitle:e.caption||t,image:e.photo?L(e.photo.sizes||[]):void 0}}function y(e){if(!e.url)return null;const t=e.icon?.base_url,o=t?`${t}/square.png`:void 0;return{kind:"StickerPack",packId:e.id,url:e.url,title:e.title,subtitle:e.description||"",iconUrl:o}}function I(e){const t=e.photo?.sizes?L(e.photo.sizes):void 0;return{kind:"MarketAlbum",id:e.id,ownerId:e.owner_id,title:e.title,count:e.count,image:t,isMain:e.is_main,isHidden:e.is_hidden}}function w(e){if(!e.url)return;const t=!!e.preview?.photo?.sizes?.length&&L(e.preview.photo.sizes.map((e=>({...e,url:e.src}))));return{kind:"Doc",id:e.id,ownerId:e.owner_id,accessKey:e.access_key,title:e.title,size:e.size,ext:e.ext,type:C(e.ext,e.type),date:e.date,url:e.url,isUnsafe:Boolean(e.is_unsafe),...t&&{image:t}}}const C=(e,t)=>{switch(e){case"csv":case"dat":case"ecsv":case"ods":case"tsv":case"xar":case"xl":case"xlr":case"xls":case"xlsb":case"xlsm":case"xlsx":case"xlt":case"xltm":case"xltx":case"xlw":return"spreadsheet";case"ppt":case"ppta":case"pptm":case"pptx":return"default";default:switch(t){case 1:return"text";case 2:return"archive";case 3:return"gif";case 4:return"image";case 5:return"audio";case 6:return"video";case 7:return"ebook";default:return"default"}}};function A({apiPhoto:e,messageAccessKey:t,position:o}){if(e.sizes)return{kind:"Photo",accessKey:e.access_key,albumId:e.album_id,id:e.id,ownerId:e.owner_id,hasTags:e.has_tags,thumbhashUrl:e.thumb_hash&&(0,n.thumbHashToDataURL)(Uint8Array.from(atob(e.thumb_hash),(e=>e.charCodeAt(0)))),sizes:L(e.sizes),photo:(0,p.fromApiPicture)({baseUrl:e.orig_photo?.url,thumbhashUrl:e.thumb_hash}),originalImage:e.orig_photo?.url,messageAccessKey:t,uploadDate:1e3*e.date,vkcomWebViewToken:e.web_view_token,...o&&{position:o}}}function S({apiVideo:e,messageAccessKey:t,position:o,useFirstFrame:n}){if(!e.id||!e.owner_id)return;const i=function(e){const t=e.sort(((e,t)=>e.width-t.width)).map((e=>({width:e.width,height:e.height,url:e.url}))),[o,...n]=t;if(!o)return;return[o,...n]}(("short_video"===e.type||n?e.first_frame:e.image)||[{url:_,height:1,width:1}]);return i?{kind:"Video",accessKey:e.access_key,id:e.id,ownerId:e.owner_id,duration:e.duration,width:e.width,height:e.height,image:i,title:e.title,views:e.views||0,restriction:e.restriction&&{title:e.restriction?.title||"",alwaysShown:!!e.restriction?.always_shown,button:e.restriction?.button,canPlay:!!e.restriction?.can_play,canPreview:!!e.restriction?.can_preview,cardIcon:e.restriction?.card_icon,disclaimerType:e.restriction?.disclaimer_type,isBlur:!!e.restriction?.blur,listIcon:e.restriction?.list_icon,text:e.restriction?.text},files:"files"in e?e.files:void 0,type:e.type,messageAccessKey:t,player:e.player,platform:e.platform,canDownload:e.can_download,canComment:e.can_comment,uploadDate:e.date&&1e3*e.date,addingDate:e.adding_date&&1e3*e.adding_date,isFromMessage:Boolean(e.is_from_message)||!1,mainArtists:e.main_artists?.map((e=>B(e))),timelineThumbs:"timeline_thumbs"in e?P(e.timeline_thumbs):void 0,videoEpisode:"episodes"in e?x(e.episodes):void 0,oneVideoId:e.ov_id||"",trackCode:e.track_code||"",videoIdFull:`${e.owner_id}_${e.id}`,liveStartTime:e.live_start_time,liveStatus:e.live_status,...o&&{position:o}}:void 0}function x(e){if(e)return e.map((e=>({time:e.time||0,text:e.text||""})))}function P(e){if(e)return{countPerImage:e.count_per_image||0,countPerRow:e.count_per_row||0,countTotal:e.count_total||0,frameHeight:e.frame_height||0,frameWidth:e.frame_width||0,frequency:e.frequency||0,isUV:e.is_uv||!1,links:e.links||[]}}function M(e){let t,o;switch(e.state){case"available":case"banned":case"deleted":case"paid":case"protected":t=e.state;break;case void 0:t="unknown";break;default:e.state;t="unknown"}return e.photo?o=L(e.photo.sizes||[]):e.owner_photo&&(o=L([{type:"o",width:0,height:0,url:e.owner_photo}])),{kind:"Article",id:e.id||0,ownerId:e.owner_id||0,state:t,url:e.url||"",title:e.title||"",author:e.owner_name||"",meta:e.subtitle||"",image:o,accessKey:e.access_key||""}}const U={thumb:[48,96,256,512],photo:[34,68,135,270,300,600,1200],unknown:[]};function R(e){const t=function(e,t){if(!e)return;const[o,...n]=U[t].reduce(((o,n)=>{const i=e[`${t}_${n}`];return i?(o.push({url:i,width:n,height:n}),o):o}),[]);return o?[o,...n]:void 0}(e,"thumb");if(t)return{kind:"Gift",id:e.id,isStickerStyle:!!e.is_stickers_style,image:t,randomStickerPackAttemptId:e.random_sticker_pack_attempt_id}}function E(e){return{kind:"Audio",id:e.id,ownerId:e.owner_id,artist:e.artist,title:e.title,subtitle:e.subtitle,url:e.url,duration:e.duration,albumId:e.album_id,trackCode:e.track_code,contentRestricted:e.content_restricted,albumPartNumber:e.album_part_number,thumb:e.album?.thumb,isExplicit:e?.is_explicit,accessKey:e.access_key}}function F(e){return{kind:"Voice",duration:e.duration,id:e.id,linkMp3:e.link_mp3,linkOgg:e.link_ogg,ownerId:e.owner_id,waveform:e.waveform,isTranscriptPossible:e.duration/60/60<1,transcription:T(e)}}function T(e){switch(e.transcript_state){case"done":return{state:"done",text:e.transcript?.trim(),updatedAt:e.transcript_update_time?1e3*e.transcript_update_time:void 0};case"error":case"in_progress":return{state:e.transcript_state};case void 0:return;default:e.transcript_state;return}}const N={0:"playlist",1:"album",2:"album",3:"album",4:"album",5:"playlist"};function B(e,t){return{kind:"Artist",id:e.id,blockId:e.popular_audios_block_id,name:e.name,photo:e.photo,domain:e.domain,audios:t?.map((e=>E(e)))}}function D(e){const t=e.podcast_info?.cover?.sizes,o=t&&L(t).values(),n=o&&(0,d.toNonEmpty)([...o])||void 0;return{kind:"Podcast",id:e.id,ownerId:e.owner_id,title:e.title,image:n}}function q(e){if(e.amount)return{kind:"MoneyTransfer",id:e.id,toId:r.resolveId(e.to_id),fromId:r.resolveId(e.from_id),amount:+e.amount.amount/100,currencySign:e.amount.currency.title}}function j(e){const t=e=>e&&!isNaN(Number(e))?+e/100:void 0,o=new URLSearchParams(e.init_url);return{kind:"MoneyRequest",id:e.id,toId:r.resolveId(e.to_id),fromId:r.resolveId(e.from_id),isUserOwner:Boolean(e.user_is_owner),amount:+e.amount.amount/100,totalAmount:t(e.total_amount?.amount),transferredAmount:t(e.transferred_amount?.amount),userCount:e.users_count,currencyCode:e.amount.currency.name,currencySign:e.amount.currency.title,hash:o.get("hash")||void 0}}function L(e){return e.sort(((e,t)=>e.width-t.width)).reduce(((e,{type:t,src:o,url:n,...i})=>(void 0===n||"s"!==t&&"m"!==t&&"x"!==t&&"o"!==t&&"p"!==t&&"q"!==t&&"r"!==t&&"y"!==t&&"z"!==t&&"w"!==t||(i.width&&i.height?e.set(t,{url:n,...i}):e.set(t,{...i,url:n,width:m,height:m})),e)),new Map)}function K(e){const t=e.participants?.list;if(!t)return[];return t.reduce(((e,t)=>{const o=r.resolveAnyId(t);return(r.isUserPeerId(o)||r.isGroupPeerId(o))&&e.push(o),e}),[]).slice(0,3)}function O(e){const t=function(e){switch(e.state){case"reached":return"reached";case"canceled_by_initiator":return"canceledByInitiator";case"canceled_by_receiver":return"canceledByReceiver";default:return}}(e);if(t)return{kind:"FinishedCall",initiatorId:e.initiator_id,duration:e.duration,state:t,participants:{list:e.participants?.list?.map(r.resolveId),count:e.participants?.count||0,coverList:K(e)}}}function G(e){if(!e.app||!e.app.share_url||!e.app.webview_url)return;const t=(0,d.toNonEmpty)(e.images.map((({url:e,height:t,width:o})=>({width:o,height:t,url:e}))));if(!t)return;t.sort(((e,t)=>e.width-t.width));const o=e.app.share_url.replace(/https:\/\/[a-z0-9_\-.]+\//,""),n=o.split("#").slice(1).join("#");return{kind:"MiniApp",title:e.title,appLink:o,images:t,id:i.resolveMiniAppId(e.app.id),url:e.app.webview_url,shareUrl:e.app.share_url,hash:n,type:e.app.type,status:i.resolveMiniAppStatus(e.app.app_status),description:e.description,buttonText:e.button_text}}function W(e){const t=[];return e.forEach((e=>{const o=function(e){const{object_id:t,items:o}=e;if(t&&o&&0!==o.length)return{id:t,icon50:o[0]?.url||""}}(e);o&&t.push(o)})),t}function V(e){const{type:t,title:o,icons:n,description:r,footer:a,button_text:d,application:c}=e;if(!c||!c.webview_url||0===n.length)return;const u={...n.reduce(((e,{width:t,url:o})=>({...e,[`icon${t}`]:o||""})),{icon75:n[0]?.url||""}),id:i.resolveMiniAppId(c.id),title:c.title,webviewUrl:c.webview_url},l=a?{description:a.description,items:a.items?W(a.items):[]}:null,p=new URL(u.webviewUrl),m=p.hash??"";let _=`app${u.id}?`,h=0;return["vk_chat_id","vk_message_id","vk_ref"].forEach((e=>{const t=p.searchParams.get(e);"vk_message_id"===e&&(h=Number(t||0)),t&&(_=`${_}${e}=${t}`)})),{kind:"MiniAppWidget",type:t,title:o,description:r,buttonText:d,app:u,appLink:_,hash:m,cmid:s.resolveCmid(h),footer:l||void 0}}function H(e){const t=r.resolveId(e.owner_id);if(r.isGroupPeerId(t)&&e.action?.url&&e.button.action?.url&&e.button.title)return{kind:"DonutLink",ownerId:t,button:{action:{target:"internal",type:"open_url",url:e.button.action.url},title:e.button.title},donorsCount:e.donors.count,text:e.text,action:{target:"internal",type:"open_url",url:e.action.url}}}function z(e){return{kind:"Poll",id:e.id,ownerId:r.resolveId(e.owner_id),authorId:void 0!==e.author_id?r.resolveId(e.author_id):r.resolveId(e.owner_id),title:e.question,anonymous:!!e.anonymous,endDate:1e3*e.end_date,answers:e.answers.map((t=>({id:t.id,text:t.text,votes:t.votes,rate:t.rate,selected:!!e.answer_ids?.includes(t.id)}))),voted:!!e.answer_ids?.length,canVote:e.can_vote,canChangeVote:!e.disable_unvote,canEdit:e.can_edit,multiple:e.multiple,votes:e.votes,friends:e.friends?.map((e=>r.resolveId(e.id)))||[],backgroundGradient:$(e.background),backgroundPhoto:J(e.photo)}}function $(e){if(!e||"gradient"!==e.type)return;const{points:t,angle:o}=e;return void 0!==t&&void 0!==o?{id:e.id||0,points:t.map((e=>"#"+e.color)),angle:o}:void 0}function J(e){if(!e||!e.color||!e.images)return;const t=(0,d.toNonEmpty)(e.images.map((e=>({url:e.url,width:e.width,height:e.height}))));return t?{kind:"PollBackgroundPhoto",image:t,color:"#"+e.color}:void 0}function Y({owner_id:e,source_id:t,to_id:o}){return e??t??o}function Q(e){if(!e.id||!e.owner_id)return;const t=function(e){const t=e.filter((e=>!e.with_padding)).sort(((e,t)=>e.width-t.width)).map((e=>({width:e.width,height:e.height,url:e.url}))),[o,...n]=t;if(o)return[o,...n]}(e.image||[{url:"",height:0,width:0}]);return t?{kind:"VideoMessage",id:e.id,ownerId:e.owner_id,duration:e.duration,shapeId:e.shape_id||h,image:t,files:e.files,transcription:Z(e)}:void 0}function Z(e){switch(e.transcript_state){case"done":return{state:"done",text:e.transcript?.trim(),updatedAt:e.transcript_update_time?1e3*e.transcript_update_time:void 0};case"error":case"in_progress":case"uninitialized":return{state:e.transcript_state};case void 0:return;default:(0,d.exhaustivenessCheck)(e.transcript_state)}}function X(e){if(e.item.widget_id)return{kind:"Widget",id:e.item.widget_id,data:e}}function ee(e){const t=e.cover?.cropped_sizes&&(0,d.toNonEmpty)(e.cover.cropped_sizes.map((e=>({url:e.url,width:e.width,height:e.height}))))||void 0;return{kind:"Narrative",id:e.id,title:e.title,ownerId:r.resolveId(e.owner_id),isDeleted:e.is_delete,isFavorite:e.is_favorite,canSee:e.can_see,storyIds:e.story_ids,image:t}}function te(e){const t=e.thumb?.sizes?L(e.thumb.sizes):void 0;return{kind:"Album",id:e.id,ownerId:r.resolveId(e.owner_id),created:e.created,description:e.description,size:e.size,image:t,title:e.title,updated:e.updated}}function oe(e){return{kind:"Curator",id:e.id,url:e.url,title:e.name,subtitle:e.description,image:e.photo}}},755607:(e,t,o)=>{o.d(t,{convertButtons:()=>l,fromApiKeyboard:()=>d,fromApiMessageEvent:()=>p,fromEngineKeyboard:()=>c});var n=o(869859),i=o(520828),r=o(305217),s=o(175953),a=o(73514);function d(e,t){const o=u(e.buttons,e.inline),n=s.resolveId(e.author_id||t);return e.inline?{kind:"InlineKeyboard",authorId:n,buttons:o}:{kind:"InputKeyboard",authorId:n,buttons:o,oneTime:e.one_time}}function c(e,t){if(e.inline)return e.buttons?{kind:"InlineKeyboard",buttons:u(e.buttons,e.inline),authorId:s.resolveId(e.author_id||t)}:void 0;if(!e.buttons?.length)return{kind:"InputKeyboardDeleteEvent"};return{kind:"InputKeyboardUpsertEvent",keyboard:{kind:"InputKeyboard",buttons:u(e.buttons,e.inline),authorId:s.resolveId(e.author_id||t),oneTime:e.one_time}}}function u(e,t){return e.map((e=>l(e,t)))}function l(e,t){return e.map((e=>function(e,t){const o="positive"===(r=e.color)?{mode:"primary",appearance:"positive"}:"negative"===r?{mode:"primary",appearance:"negative"}:"primary"===r?{mode:"primary"}:{mode:"secondary"};var r;switch(e.action.type){case"text":case"callback":return{type:e.action.type,label:(0,n.unescape)(e.action.label||""),payload:e.action.payload||"",...o};case"open_link":case"open_modal_view":return{type:e.action.type,link:e.action.link,label:(0,n.unescape)(e.action.label||""),payload:e.action.payload||"",...o};case"location":return{type:e.action.type,payload:e.action.payload||"",...o};case"vkpay":return{type:e.action.type,payload:e.action.payload||"",appId:(0,i.resolveMiniAppId)(a.VK_PAY_APP_ID),hash:e.action.hash||""};case"open_app":return{type:e.action.type,payload:e.action.payload||"",label:(0,n.unescape)(e.action.label||""),hash:e.action.hash||"",appId:(0,i.resolveMiniAppId)(e.action.app_id),ownerId:e.action.owner_id?s.resolveId(e.action.owner_id):void 0,...o};case"open_photo":return;default:return void e.action}}(e))).filter((e=>void 0!==e))}const p=(e,t,o)=>{const{event_id:n,action:a,owner_id:d}=o,c=r.resolveEventId(n),u=s.resolveId(d);if(a)switch(a.type){case"show_snackbar":return{type:a.type,id:c,ownerId:u,text:a.text,title:s.name(e),photo:t.photo?.photo50,peerId:e.id};case"open_link":case"open_modal_view":return{type:a.type,id:c,ownerId:u,link:a.link,title:s.name(e),peerId:e.id};case"open_app":return{type:a.type,id:c,ownerId:u,appId:(0,i.resolveMiniAppId)(a.app_id),hash:a.hash,peerId:e.id};default:}return{type:"null",id:c,ownerId:u,peerId:e.id}}},922826:(e,t,o)=>{o.d(t,{fromApiTemplate:()=>r});var n=o(755607),i=o(872060);function r(e,t){return{kind:"Carousel",elements:e.elements?.map((e=>function({buttons:e,photo:t,action:o,...r},s){const a=t?(0,i.fromApiPhoto)({apiPhoto:t,messageAccessKey:s}):null,d={buttons:e?(0,n.convertButtons)(e,!0):[],...a&&{photo:a},...r},c={...d,kind:"Simple"};if(!o)return c;switch(o.type){case"open_photo":return a?{...d,kind:"Photo",photo:a}:c;case"open_link":case"open_modal_view":return{...d,kind:"Link",link:o.link};default:return c}}(e,t)))||[]}}},350946:(e,t,o)=>{o.d(t,{fromApiChannel:()=>d});var n=o(103026),i=o(302551),r=o(596917),s=o(841093),a=o(703837);const d=(e,t)=>{const{channel:o,last_message:d}=e,c=d&&(0,s.fromApiPost)(d).post,u={confirmed:[],pending:[]};c&&(u.confirmed=c.cmid>1?[{kind:"GapNode",fromCmid:i.resolveCmid(1),toCmid:i.resolveCmid(c.cmid-1)},{kind:"Node",item:c}]:[{kind:"Node",item:c}]);const l=!o.user_data.notification_settings.is_enabled||(o.user_data.notification_settings.disable_duration||0)>0,p=i.resolveCmid(o.user_data?.read_state?.read_up_to_cmid||0),m=t.menu?.items?.length?t.menu?.items?.map((e=>({id:e.id,title:e.title,url:e.url,cover:e.cover,counter:e.counter}))):void 0;return{kind:"Channel",id:n.resolveId(o.channel_id),unreadCount:o.user_data.read_state?.unread_count||0,isArchived:!!o.user_data?.is_archived,isMuted:l,notificationsDisabledUntil:o.user_data.notification_settings.disable_duration||0,inReadCmid:p,majorSortId:o.sort_id.major_id,minorSortId:o.sort_id.minor_id,membersCount:t.members_count||0,isMember:o.user_data.is_member,adminLevel:t.admin_level||0,photo:(0,a.fromApiPicture)({baseUrl:t.photo_base,photo50:t.photo_50,photo100:t.photo_100}),name:t.name||"",description:r.fromServerText(t.description||""),activity:t.activity||"",isVerified:!!t.verified,screenName:t.screen_name,history:u,postponed:{history:{segments:[]},hasMore:!1,loaded:!1},rights:{canSendDonut:!!t.can_post_donut,canPost:!!t.can_post},pending:{},isRepostsDisabled:Boolean(t.reposts_disabled),actionButton:{isEnabled:Boolean(t.action_button?.is_enabled),title:t.action_button?.title,type:t.action_button?.action_type,target:{appId:t.action_button?.target?.app_id,email:t.action_button?.target?.email,googleStoreURL:t.action_button?.target?.google_store_url,isInternal:t.action_button?.target?.is_internal,itunesURL:t.action_button?.target?.itunes_url,phone:t.action_button?.target?.phone,url:t.action_button?.target?.url,userId:t.action_button?.target?.user_id}},menu:m,isClosed:Boolean(t.is_closed),mediaViewerCache:{items:[],hasPrev:!0,hasNext:!0},canMessage:Boolean(t.can_message)}}},335913:(e,t,o)=>{o.d(t,{fromApiIncognitoMember:()=>r});var n=o(175953),i=o(358096);function r(e){const t=i.resolveIncognitoMemberId(e.id),o=n.resolveId(e.invited_by),r=n.resolveId(e.member_id);return{id:t,name:e.name||"",inviteDate:1e3*e.join_date,inviterId:o,...(n.isUserPeerId(r)||n.isContactPeerId(r))&&{memberId:r}}}},419204:(e,t,o)=>{o.d(t,{fromApiConvoBanner:()=>i});var n=o(596917);function i(e){return{icon:e.icon??"",name:e.name,title:e.title??"",chunks:n.fromServerText(e.text),canHide:e.can_hide??!0,buttons:(e.buttons||[]).map((e=>({callbackData:e?.callback_data??"",mode:e.layout,appearance:r(e.style),link:e?.link??"",text:e.text,hideOnAction:!!e.hide_on_action,type:e.type}))),cardInfo:e.card_info,text:e.text??""}}function r(e){return"destructive"===e?"negative":"regular"===e?"accent":e}},262084:(e,t,o)=>{o.d(t,{fromApiConvoCard:()=>r});var n=o(401193);function i(e){switch(e.type){case"accept_message_request":case"reject_message_request":case"send_message_request":return{layout:e.layout||"primary",style:e.style||"regular",text:e.text??"",type:e.type};case"open_miniapp":return{layout:e.layout||"primary",style:e.style||"regular",text:e.text??"",type:e.type,appId:e.miniapp_id??0};default:(0,n.exhaustivenessCheck)(e.type)}}function r(e){switch(e.type){case"profile":return{type:"profile",content:e.content??"",buttons:(e.buttons??[]).map(i)};case"custom":return{type:"custom",title:e.title??"",subtitle:e.subtitle,content:e.content??"",image:e.image??"",buttons:(e.buttons??[]).map(i)};default:(0,n.exhaustivenessCheck)(e.type)}}},872466:(e,t,o)=>{o.d(t,{fromApiConvo:()=>f,fromLongpollPushSettings:()=>v});var n=o(175953),i=o(856562),r=o(254335),s=o(728921),a=o(649166),d=o(776983),c=o(946990),u=o(755607),l=o(419204),p=o(726356),m=o(703837),_=o(262084);const h={18:"peer_deleted",203:"disabled_by_peer",900:"peer_blacklisted_by_me",901:"peer_blacklisted",902:"peer_blacklisted",915:"disabled_by_community",916:"disabled_by_peer",917:"kicked",918:"no_access",922:"no_access",925:"no_access",932:"no_access",945:"chat_disabled",946:"chat_unsupported",983:"restricted_to_write_in_chat",984:"spam_restriction",985:"announcements",986:"need_edu_role",987:"need_message_request",988:"pending_message_request",1012:"forbid_writing_for_all"};function f(e,t){const o=t&&(0,c.fromApiMessage)(t).message,h={confirmed:[],pending:[]};o?h.confirmed=o.cmid>1?[{kind:"GapNode",fromCmid:a.resolveCmid(1),toCmid:a.resolveCmid(o.cmid-1)},{kind:"Node",item:o}]:[{kind:"Node",item:o}]:void 0!==e.last_conversation_message_id&&e.last_conversation_message_id>0?h.confirmed=[{kind:"GapNode",fromCmid:1,toCmid:e.last_conversation_message_id}]:0===e.last_conversation_message_id&&"group"===e.peer.type&&(h.confirmed=[{kind:"GapNode",fromCmid:1,toCmid:1}]);const f=e.current_keyboard&&(0,u.fromApiKeyboard)(e.current_keyboard);if("InlineKeyboard"===f?.kind)throw new Error("Не может прийти инлайн клавиатура для сообщения");const v=e.peer_flags||0,y=n.resolveId(e.peer.id),I={majorSortId:e.sort_id?.major_id||0,minorSortId:e.sort_id?.minor_id||0,isDrafted:!1,unreadCount:e.unread_count||0,inReadBy:a.resolveCmid(e.in_read_cmid),outReadBy:a.resolveCmid(e.out_read_cmid),spaceId:e.space_id?r.resolveId(e.space_id):void 0,isNew:!!e.is_new,peerFlags:v,folderIds:new Set(e.folder_ids?.map(s.resolveId)||[]),canWrite:b(e),currentKeyboard:f,push:g(e.push_settings),history:h,unreadExpireables:new Set((e.expire_cmids||[]).map(a.resolveCmid)),unreadReactions:new Map((e.unread_reactions||[]).map((e=>[a.resolveCmid(e),void 0]))),convoBanner:e.conversation_bar&&(0,l.fromApiConvoBanner)(e.conversation_bar),convoCard:e.conversation_card?(0,_.fromApiConvoCard)(e.conversation_card):void 0,mediaViewerCache:{items:[],hasPrev:!0,hasNext:!0},styleId:d.resolveStyleId(e.style||"system"),isStickersPopupAutoplayDisabledByAdmin:Boolean(e.chat_settings?.is_stickers_popup_autoplay_disabled),isStickersPopupAutoplayDisabledByUser:(0,p.isPeerDisabledByUserForPopupAutoplay)(y)};switch(e.peer.type){case"user":if(!n.isUserPeerId(y))return null;if(void 0!==e.message_request_data){const{status:t}=e.message_request_data;return"pending"===t||"cancelled"===t||"rejected"===t?{convo:{...I,kind:"MessageRequestUserConvo",peerId:y,MRStatus:t}}:null}return{convo:{...I,kind:"UserConvo",peerId:y}};case"chat":{if(!n.isChatPeerId(y))return null;if(!e.chat_settings)throw new Error("TODO chat convo has to has chat settings");const t=e.chat_settings.owner_id&&0!==e.chat_settings.owner_id?n.resolveId(e.chat_settings.owner_id):void 0,o=t&&(n.isUserPeerId(t)||n.isGroupPeerId(t))?t:void 0,r=new Set([t,...e.chat_settings.admin_ids||[]].map(n.resolveId)),s={count:e.chat_settings.members_count||0,members:new Map,adminIds:r,memberIds:new Set,invitedIds:new Set,incognitoMembers:new Map},d={...I,peerId:y,ownerId:o,unreadMentions:new Set((e.mention_cmids||[]).map(a.resolveCmid)),state:e.chat_settings.state,isCasper:!!e.chat_settings.is_disappearing,isCommunityChat:!!t&&n.isGroupPeerId(t),isDonut:!!e.chat_settings.is_donut,isGroupChannel:!!e.chat_settings.is_group_channel,activeCall:k(e.call_in_progress),pinnedMessage:e.chat_settings.pinned_message?(0,c.fromApiPinnedMessage)(e.chat_settings.pinned_message):void 0,acl:(A=e.chat_settings.acl,{canChangeInfo:A.can_change_info,canChangeInviteLink:A.can_change_invite_link,canChangePin:A.can_change_pin,canInvite:A.can_invite,canPromoteUsers:A.can_promote_users,canSeeInviteLink:A.can_see_invite_link,canModerate:A.can_moderate,canCopyChat:A.can_copy_chat,canCall:A.can_call,canUseMassMentions:A.can_use_mass_mentions,canChangeServiceType:Boolean(A.can_change_service_type),canChangeStickersPopupAutoplay:Boolean(A.can_change_stickers_popup_autoplay),canChangeStyle:Boolean(A.can_change_style),canSendReactions:!0}),permissions:e.chat_settings.permissions?(C=e.chat_settings.permissions,{...i.DEFAULT_CHAT_PERMISSIONS,...C}):void 0,description:e.chat_settings.description,isService:Boolean(e.chat_settings.is_service),members:s,adminIds:r,shouldShortPollReactions:Boolean(e.chat_settings.short_poll_reactions),isIncognito:e.chat_settings.is_incognito,forbidedWritingForAll:e.chat_settings.writing_disabled?(w=e.chat_settings.writing_disabled,{value:w.value,until:w.until_ts?1e3*w.until_ts:void 0}):void 0,isDeleted:Boolean(e.chat_settings.is_deleted_for_all)},u={kind:"Chat",id:y,title:e.chat_settings?.title||"",photo:(0,m.fromApiPicture)({baseUrl:e.chat_settings.photo?.photo_base,photo50:e.chat_settings.photo?.photo_50,photo100:e.chat_settings.photo?.photo_100,photo200:e.chat_settings.photo?.photo_200}),hasDefaultPhoto:e.chat_settings.photo?.is_default_photo||e.chat_settings.photo?.is_default_call_photo,canCall:e.chat_settings.acl.can_call};if(void 0!==e.message_request_data){const{status:t,inviter_id:o}=e.message_request_data;return"pending"!==t&&"rejected"!==t&&"cancelled"!==t||void 0===o?null:{convo:{...d,kind:"MessageRequestChatConvo",inviterPeerId:n.resolveId(o),MRStatus:t},peer:u}}return e.peer_flags&&e.peer_flags&1<<i.PEER_FLAGS.isBusinessNotify?{convo:{...d,kind:"BusinessNotify"},peer:u}:{convo:{...d,kind:"ChatConvo"},peer:u}}case"group":return n.isGroupPeerId(y)?{convo:{...I,isPromo:!!e.is_promo,peerId:y,kind:"GroupConvo"}}:null;case"email":return null;case"contact":return n.isContactPeerId(y)?{convo:{...I,peerId:y,kind:"ContactConvo"}}:null;default:e.peer.type;return null}var w,C,A}function v(e){const t=Number(e[1].disabled_until);switch(t){case 0:return{mode:"everything",disabledUntil:0};case-1:return{mode:"every-mention",disabledUntil:1/0};default:return{mode:"every-mention",disabledUntil:1e3*t}}}function g(e){let t={mode:"everything",disabledUntil:0};return e?(e.disabled_forever?t={mode:"every-mention",disabledUntil:1/0}:e.disabled_until&&(t={mode:"every-mention",disabledUntil:1e3*e.disabled_until}),"everything"!==t.mode&&(e.disabled_mass_mentions&&(t={...t,mode:"direct-mention"}),e.disabled_mentions&&(t={...t,mode:"nothing"})),t):t}function b(e){return"chat"===e.peer.type&&"rejected"===e.message_request_data?.status?{allowed:!1,reason:"mr_rejected"}:e.can_write?.allowed?{allowed:!0}:{allowed:!1,reason:e.can_write?.reason&&h[e.can_write.reason]||"unknown",until:e.can_write?.until?1e3*e.can_write.until:void 0}}function k(e){if(!e)return;return{participants:{list:(e.participants.list||[]).reduce(((e,t)=>{const o=n.resolveAnyId(t);return(n.isUserPeerId(o)||n.isGroupPeerId(o))&&e.push(o),e}),[]),count:e.participants.count||0},joinLink:e.join_link,vkJoinLink:e.vk_join_link,canFinishCall:Boolean(e.can_finish_call),hasLink:Boolean(e.has_link),id:e.call_id}}},512871:(e,t,o)=>{o.d(t,{fromApiFolder:()=>r,fromApiFolderRecommended:()=>a,fromEngineFolder:()=>s});var n=o(175953),i=o(728921);function r(e){const t=e.included_peer_ids?.map(n.resolveId);return{...d(t,e.included_lists),...i.convertFlags(e.flags),id:i.resolveId(e.id),name:e.name}}function s(e){const[,t,o,n]=e;return{...d(),...i.convertFlags(n),id:i.resolveId(t),name:o}}function a(e){return{name:e.name,type:e.type,description:e.description,isHidden:!!e.is_hidden}}function d(e,t){return{unreadCount:0,unreadUnmutedCount:0,peerIds:new Set(e),sublists:new Set(t||[]),all:{peerIds:new Set,boundaryMinorId:1/0,hasMore:!0},unread:{peerIds:new Set,boundaryMinorId:1/0,hasMore:!0}}}},946990:(e,t,o)=>{o.d(t,{fromApiMessage:()=>f,fromApiPinnedMessage:()=>I,fromEngineMessage:()=>v});var n=o(869859),i=o(503485),r=o(872060),s=o(649166),a=o(175953),d=o(520828),c=o(596917),u=o(157570),l=o(776983),p=o(401193),m=o(755607),_=o(922826),h=o(112727);function f(e){if(e.action)return{message:{kind:"Service",action:k({apiAction:e.action,apiAttaches:e.attachments,messageAccessKey:`mail${e.peer_id}-${e.conversation_message_id}`}),peerId:a.resolveId(e.peer_id),cmid:s.resolveCmid(e.conversation_message_id),authorId:a.resolveId(e.from_id),sentAt:1e3*e.date,isOut:1===e.out,isSilent:e.is_silent,deleteTTL:void 0!==e.ttl?1e3*e.ttl:void 0},mentions:{hasDirect:!1,hasMass:!1}};const t=a.resolveId(e.peer_id);if(e.is_expired)return{message:{kind:"Expired",cmid:s.resolveCmid(e.conversation_message_id),peerId:a.resolveId(e.peer_id),authorId:a.resolveId(e.from_id),isOut:1===e.out,isSilent:e.is_silent,sentAt:1e3*e.date},mentions:{hasDirect:!1,hasMass:!1}};const o=e.keyboard&&(0,m.fromApiKeyboard)(e.keyboard);if("InputKeyboard"===o?.kind)throw new Error("Кажется из апи пришла не инлайн клавиатура для сообщения");const n=s.resolveCmid(e.conversation_message_id),i=(0,r.fromApiAttach)({apiAttaches:y(e),messageAccessKey:`mail${e.peer_id}-${e.conversation_message_id}`,attachPositionOffset:0}),l=d.count(i);return{message:{kind:"Normal",randomId:s.resolveRandomId(e.random_id),cmid:n,peerId:t,authorId:a.resolveId(e.from_id),chunks:c.fromServerText(e.text),isOut:1===e.out,isSilent:e.is_silent,isImportant:!!e.important,isUnavailable:!!e.is_unavailable,isPlayed:!!e.was_played,sentAt:1e3*e.date,updatedAt:e.update_time&&1e3*e.update_time,attaches:i,keyboard:o,forceAutoPlayMedia:e.force_autoplay_media,replyMessage:e.reply_message?g(e.reply_message,t,n,l):void 0,forwardedMessages:b(e.fwd_messages,t,n,l),expireTTL:e.expire_ttl?1e3*e.expire_ttl:void 0,deleteTTL:void 0!==e.ttl?1e3*e.ttl:void 0,isPinned:Boolean(e.is_pinned),template:e.template?(0,_.fromApiTemplate)(e.template,`mail${e.peer_id}-${e.conversation_message_id}`):void 0,reactions:e.reactions?(0,h.fromApiMessageReactions)(e.reactions):new Map,reactionId:e.reaction_id?u.resolveId(e.reaction_id):void 0},mentions:{hasDirect:e.is_mentioned_user,hasMass:!1}}}function v(e,t,o){let u,l,_,h,f,v,g,b,y,I;switch(e[0]){case 10004:[,I,l,,_,h,f,v,g,b,u]=e;break;case 10005:case 10018:[,I,l,_,h,f,v,g,b,u,y]=e;break;default:(0,p.exhaustivenessCheck)(e)}const w=a.resolveId(_),{isOut:C,isImportant:A,noPush:S,isPlayed:x}=s.convertFlags(l),P=C||a.isFavorites(w,t),M="1"===v.is_silent;let U;if(U=void 0!==v.from?a.resolveId(Number(v.from)):P?t:w,v.source_act)return{message:{kind:"Service",cmid:s.resolveCmid(I),peerId:w,authorId:U,action:k({messageAccessKey:`mail${w}-${s.resolveCmid(I)}`,apiAction:{conversation_message_id:v.source_chat_local_id?Number(v.source_chat_local_id):void 0,message:v.source_message,type:v.source_act,member_id:v.source_mid?Number(v.source_mid):void 0,text:v.source_text,old_text:v.source_old_text,style:v.source_style}}),deleteTTL:void 0!==v.ttl?1e3*Number(v.ttl):void 0,sentAt:1e3*h,isOut:P,isSilent:M},mentions:{hasDirect:!1,hasMass:!1},noPush:S};if("1"===v.is_expired)return{message:{kind:"Expired",cmid:s.resolveCmid(I),isOut:P,isSilent:M,peerId:w,authorId:U,sentAt:1e3*h},mentions:{hasDirect:!1,hasMass:!1},noPush:!0};const R={hasDirect:!1,hasMass:!1};for(const e of v.marked_users||[])if(e[0]===i.IEngine.MarkedType.Mention)switch(e[1]){case"all":R.hasMass=R.hasMass||U!==t;break;case"online":R.hasMass=R.hasMass||e[2].includes(t);break;default:R.hasDirect=e[1].includes(t)}let E,F={};if(g.attachments&&g.attach1_type&&!g.attach2_type)try{const e=JSON.parse(g.attachments);Array.isArray(e)&&(F=(0,r.fromApiAttach)({apiAttaches:e,messageAccessKey:`mail${w}-${I}`}))}catch{}if(!d.kindsCount(F)&&g.attach1_type&&(F={unknown:[{data:g,kind:"Unknown"}]}),void 0!==g.reply){const e=JSON.parse(g.reply),t=o(s.resolveCmid(e.conversation_message_id));t&&(E=s.toForeign({message:t,rootPeerId:w,rootCmid:s.resolveCmid(I)}))}const T=v.keyboard?(0,m.fromEngineKeyboard)(v.keyboard,U):void 0;let N,B;return"InlineKeyboard"===T?.kind?N=T:B=T,{message:{kind:"Normal",cmid:s.resolveCmid(I),randomId:s.resolveRandomId(b),peerId:w,authorId:U,chunks:c.fromServerText((0,n.unescape)(f)),isOut:P,isSilent:M,isImportant:A,isPlayed:x,isUnavailable:!1,sentAt:1e3*h,updatedAt:y?1e3*y:void 0,isPinned:Boolean(v.pinned_at),expireTTL:v.expire_ttl?1e3*Number(v.expire_ttl):void 0,deleteTTL:void 0!==v.ttl?1e3*Number(v.ttl):void 0,attaches:F,replyMessage:E,keyboard:N,reactions:new Map},mentions:R,noPush:S,keyboardEvent:B}}function g(e,t,o,n){let i;if(e.peer_id&&(i=a.resolveId(e.peer_id)),e.is_expired)return{kind:"ForeignExpired",peerId:i,rootPeerId:t,rootCmid:o,isUnavailable:!!e.is_unavailable,cmid:s.resolveCmid(e.conversation_message_id),authorId:a.resolveId(e.from_id),sentAt:1e3*e.date};const u=(0,r.fromApiAttach)({apiAttaches:y(e),messageAccessKey:e.peer_id?`mail${e.peer_id}-${e.conversation_message_id}`:void 0,attachPositionOffset:n}),l=n+d.count(u);return{kind:"Foreign",peerId:i,rootPeerId:t,rootCmid:o,isUnavailable:!!e.is_unavailable,cmid:s.resolveCmid(e.conversation_message_id),authorId:a.resolveId(e.from_id),chunks:c.fromServerText(e.text),sentAt:1e3*e.date,updatedAt:e.update_time&&1e3*e.update_time,attaches:u,replyMessage:e.reply_message?g(e.reply_message,t,o,l):void 0,forwardedMessages:b(e.fwd_messages,t,o,l)}}function b(e,t,o,n){if(!e||0===e.length)return;let i,r=n;for(const n of e){const e=g(n,t,o,r);if("ForeignExpired"!==e.kind&&(r+=s.getMessageAttachmentsCount(e)),"ForeignExpired"!==e.kind)i?i.push(e):i=[e];else if(p.isDev)throw new Error("Исчезающих сообщений не может быть в пересланных.")}return i}function k({apiAction:e,apiAttaches:t,messageAccessKey:o}){const i={type:"unknown"};switch(e.type){case"chat_create":return e.text?{type:e.type,title:e.text}:i;case"chat_title_update":return e.text&&e.old_text?{type:e.type,title:e.text,oldTitle:e.old_text}:i;case"chat_photo_remove":case"chat_screenshot":case"chat_group_call_started":case"chat_invite_user_by_link":case"chat_invite_user_by_call_join_link":case"chat_kick_don":case"call_transcription_failed":case"rejected_message_request":return{type:e.type};case"chat_pin_message":case"chat_unpin_message":return{type:e.type,cmid:s.resolveCmid(e.conversation_message_id),chunks:e.message?c.fromServerText((0,n.unescape)(e.message)):[]};case"chat_photo_update":const d=t?.find((e=>"photo"===e.type)),u=d?.photo;let p;return u&&(p=(0,r.fromApiPhoto)({apiPhoto:u,messageAccessKey:o})),{type:e.type,photo:p};case"chat_invite_user":case"chat_kick_user":case"accepted_message_request":{if(!e.member_id)return i;const t=a.resolveId(e.member_id);return a.isUserPeerId(t)||a.isGroupPeerId(t)?{type:e.type,peerId:t}:i}case"chat_invite_user_by_message_request":case"chat_invite_user_by_call":case"chat_kick_user_call_block":{if(!e.member_id)return i;const t=a.resolveId(e.member_id);return a.isUserPeerId(t)?{type:e.type,peerId:t}:i}case"conversation_style_update":case"conversation_style_update_action":return{type:e.type,styleId:e.style?l.resolveStyleId(e.style):void 0};case"custom":return e.message?{type:e.type,chunks:c.fromServerText((0,n.unescape)(e.message))}:i;case"sent_message_request":return{type:e.type,from:a.resolveId(e.member_id)};default:e.type;return i}}function y({attachments:e=[],geo:t}){return t?[...e,{type:"geo",geo:t}]:e}function I(e){const t=a.resolveId(e.peer_id),o=s.resolveCmid(e.conversation_message_id);return{kind:"Pinned",cmid:o,peerId:t,authorId:a.resolveId(e.from_id),isUnavailable:!!e.is_unavailable,chunks:c.fromServerText(e.text),sentAt:1e3*e.date,forwardedMessages:e.fwd_messages?b(e.fwd_messages,t,o,0):void 0,replyMessage:e.reply_message?g(e.reply_message,t,o,0):void 0,attaches:(0,r.fromApiAttach)({apiAttaches:y(e)||[]})}}},112727:(e,t,o)=>{o.d(t,{fromApiMessageReactions:()=>r});var n=o(157570),i=o(175953);function r(e){return e.sort(((e,t)=>t.count-e.count)).reduce(((e,t)=>(e.set(n.resolveId(t.reaction_id),{reactionId:n.resolveId(t.reaction_id),count:t.count,peerIds:new Set(t.user_ids.map(i.resolveId).sort(((e,t)=>e-t)))}),e)),new Map)}},468831:(e,t,o)=>{o.d(t,{convertPlatform:()=>p,fromApiAnonym:()=>l,fromApiContact:()=>u,fromApiGroup:()=>c,fromApiUser:()=>d});var n=o(175953),i=o(519267),r=o(703837);const s=[6482950,6481715,6146827],a={1:"mobile",2:"mobile",3:"mobile",4:"mobile",5:"mobile",6:"other",7:"other"};function d(e){const t={0:"unfamiliar",1:"outgoingRequest",2:"incomingRequest",3:"friends"};let o="other";e.online_info?.is_mobile&&(o="mobile"),s.includes(e.online_info?.app_id||0)&&(o="vkme");const i={isOnline:!!e.online_info?.is_online,at:e.online_info?.status?e.online_info?.status:e.online_info?.last_seen?1e3*e.online_info.last_seen:"not_show",platform:o},a=n.resolveRealId("User",e.id),d=Boolean(e.blacklisted),[,c]=e.photo_id?e.photo_id.split("_"):[],u=c?parseInt(c):null;return{user:{kind:"User",id:a,firstName:e.first_name,firstNameGen:e.first_name_gen||e.first_name,firstNameAcc:e.first_name_acc||e.first_name,lastName:e.last_name,lastNameGen:e.last_name_gen||e.last_name,lastNameAcc:e.last_name_acc||e.last_name,screenName:e.screen_name,sex:void 0!==e.sex?{0:"unknown",1:"female",2:"male"}[e.sex]:"unknown",photoId:u&&!isNaN(u)?u:void 0,photo:(0,r.fromApiPicture)({baseUrl:e.photo_base,photo50:e.photo_50,photo100:e.photo_100,photo200:e.photo_200}),isVerified:Boolean(e.verified),isBlacklisted:d,isBlacklistedByMe:Boolean(e.blacklisted_by_me),isProfileClosed:Boolean(e.is_closed)&&!e.can_access_closed,isDeactivated:Boolean(e.deactivated),deactivationReason:e.deactivated,canCall:Boolean(e.can_call),canChangeFriendship:1===e.can_send_friend_request,canInviteToChats:!!e.can_invite_to_chats,canMessage:1===e.can_write_private_message,hasDefaultPhoto:1!==e.has_photo,followersCount:e.followers_count||0,friendship:void 0!==e.friend_status?t[e.friend_status]:t[0],mutualFriends:d?{hint:[],count:0}:void 0,contactName:e.contact_name,occupation:e.occupation,bdate:e.bdate,city:e.city,phone:e.mobile_phone,employeeMark:e.employee_mark,employeeWorkingState:e.employee_working_state&&{state:e.employee_working_state.state,ts_to:1e3*e.employee_working_state.ts_to,ts_from:1e3*e.employee_working_state.ts_from},isService:e.is_service_account||e.is_service,imageStatus:e.image_status?(p=e.image_status,{name:p.name,images:p.images.map((e=>({url:e.url,width:e.width,height:e.height})))}):void 0,eduRoles:e.educational_profile?.edu_roles?(l=e.educational_profile.edu_roles,{mainRole:l.main_roles,organizations:l.organizations?.map((e=>({id:e.organization_id,name:e.organization_name,roles:e.roles.map((e=>({code:e.role_code,name:e.details})))})))||[]}):void 0},lastSeen:i};var l,p}function c(e){const t=n.resolveRealId("Group",e.id);if(!e.type)throw new Error(`fromApiGroup содержит некорректный тип ${e.type}`);const o={0:"notMember",1:"member",2:"unsure",3:"declined",4:"outgoingRequest",5:"incomingRequest"}[e.member_status||0];return{kind:"Group",id:t,type:e.type,name:e.name,screenName:e.screen_name,photo:(0,r.fromApiPicture)({baseUrl:e.photo_base,photo50:e.photo_50,photo100:e.photo_100,photo200:e.photo_200}),activity:e.activity,memberCount:e.members_count||0,membership:o,isDeactivated:Boolean(e.deactivated),isVerified:1===e.verified,isClosed:Boolean(e.is_closed),canMessage:1===e.can_message,canChangeMembership:0!==e.ban_info?.end_date&&(0===e.is_closed||"member"===o||"incomingRequest"===o),mutualFriends:2===e.is_closed&&"member"!==o?{hint:[],count:0}:void 0,isBlacklistedByMe:1===e.is_messages_blocked,site:e.site,adminLevel:e.admin_level||0}}function u(e){const t=n.resolveRealId("Contact",e.id),o=n.resolveId(e.user_id);return{kind:"Contact",id:t,name:e.name,userId:o,phone:e.phone,canWrite:e.can_write,photo:(0,r.fromApiPicture)({baseUrl:i.getClearBaseUrl(e.photo_50),photo50:e.photo_50}),lastSeen:e.last_seen_status}}function l(e){const t=n.resolveAnyId(e.id);if(n.isAnonymPeerId(t))return{id:t,kind:"Anonym",name:e.name,photo:(0,r.fromApiPicture)({baseUrl:e.photo_base,photo50:e.photo_50,photo100:e.photo_100,photo200:e.photo_200,photo400:e.photo_400})}}function p(e,t){let o=a[e]||"other";return s.includes(t)&&(o="vkme"),o}},703837:(e,t,o)=>{o.d(t,{fromApiPicture:()=>i});var n=o(203080);function i(e){if(!Object.values(e).every((e=>void 0===e)))return e.thumbhashUrl&&(e.thumbhashUrl=(0,n.thumbHashToDataURL)(Uint8Array.from(atob(e.thumbhashUrl),(e=>e.charCodeAt(0))))),e}},841093:(e,t,o)=>{o.d(t,{fromApiDonutDuration:()=>m,fromApiPost:()=>p,fromApiPostonedPost:()=>f,fromApiSearchPost:()=>h});var n=o(302551),i=o(596917),r=o(175953),s=o(103026),a=o(157570),d=o(856061),c=o(872060),u=o(183130);const l={id:"reactions",items:[{id:0,title:"Нравится",asset:{animation_url:"https://vk.com/reaction/3-reactions-0?c_uniq_tag=83b2081a8e4adfc36ee536f5f1b4ad470174c89678369a4b9dc5547614a3955e",images:[{url:"https://vk.com/reaction/1-reactions-0-48?c_uniq_tag=e6bee176471af6e4f7ca0f57ac099847d57b8101bf07944e47b42b097a6d8455",width:48,height:48},{url:"https://vk.com/reaction/1-reactions-0-72?c_uniq_tag=d6f55fe94c0add8f817b447cbd804768752eb996c06ef222b39eb3fd35834780",width:72,height:72}],title:{color:{foreground:{light:"FF3347",dark:"FF5C5C"},background:{light:"FFEDED",dark:"3E2526"}}},title_color:{light:"FF3347",dark:"FF5C5C"}}},{id:1,title:"Смешно",asset:{animation_url:"https://vk.com/reaction/3-reactions-1?c_uniq_tag=a47193579880c0f53dd597a15d3bd57d4827820687c73d6128df2720647b42b9",images:[{url:"https://vk.com/reaction/1-reactions-1-48?c_uniq_tag=8f5eb3a1d6a6ec81aceff211782af3c9e9a5d1c837f0bfade6965a6844786f8b",width:48,height:48},{url:"https://vk.com/reaction/1-reactions-1-72?c_uniq_tag=c852fcad6e67059878dcf1905e3e416fd89fbc61222ead100935a6fcc1dab4c9",width:72,height:72}],title:{color:{foreground:{light:"FF8000",dark:"FFC233"},background:{light:"FFF2D6",dark:"352E23"}}},title_color:{light:"FF8000",dark:"FFC233"}}},{id:2,title:"Ого!",asset:{animation_url:"https://vk.com/reaction/3-reactions-2?c_uniq_tag=b946fcbe262642bc920331746b6eccd9f175bb17d8ef37e54d232fa35ca2c750",images:[{url:"https://vk.com/reaction/1-reactions-2-48?c_uniq_tag=2a6544dce8827d216db7ea91eafc726cd3a823f5d465ba00216901a6de2801ad",width:48,height:48},{url:"https://vk.com/reaction/1-reactions-2-72?c_uniq_tag=5a0663f3d38dd6fbcf3e4973610d50641420631c9df30b6cf80eee0dd5c5efee",width:72,height:72}],title:{color:{foreground:{light:"FF8000",dark:"FFC233"},background:{light:"FFF2D6",dark:"352E23"}}},title_color:{light:"FF8000",dark:"FFC233"}}},{id:3,title:"Восторг",asset:{animation_url:"https://vk.com/reaction/3-reactions-3?c_uniq_tag=c6ed3add99e841dccda5479c8e21779954e61e0fba15f94a2ae16706df492123",images:[{url:"https://vk.com/reaction/1-reactions-3-48?c_uniq_tag=eda1a2c18d733b356babdeed5f52cdcc64dd59f1f69776a133fc34a5627eecee",width:48,height:48},{url:"https://vk.com/reaction/1-reactions-3-72?c_uniq_tag=be09c5080773a9ba78984406588c7371e48073e80b842eb7c9a817f7b435379b",width:72,height:72}],title:{color:{foreground:{light:"FF8000",dark:"FFC233"},background:{light:"FFF2D6",dark:"352E23"}}},title_color:{light:"FF8000",dark:"FFC233"}}},{id:5,title:"Печаль",asset:{animation_url:"https://vk.com/reaction/3-reactions-5?c_uniq_tag=c61122c8c334154cb10ccf0e0687057bf1f0f40c2817198b2e1150df534c22c4",images:[{url:"https://vk.com/reaction/1-reactions-5-48?c_uniq_tag=31bcb230babad96120a62589c52af22811aaba54d4ed73a36cfd499d9d94102f",width:48,height:48},{url:"https://vk.com/reaction/1-reactions-5-72?c_uniq_tag=a840d0eb581c133d97638ff5bf34f4b33f3fb8557b932cfe3516925b88e2f151",width:72,height:72}],title:{color:{foreground:{light:"4986CC",dark:"71AAEB"},background:{light:"EDF3FA",dark:"27303C"}}},title_color:{light:"4986CC",dark:"71AAEB"}}},{id:4,title:"&$#%!",asset:{animation_url:"https://vk.com/reaction/3-reactions-4?c_uniq_tag=063e6b2dd888bb5a9716cf6153f03bf9c0c9707713b857eed8fe1e4e09aea2b3",images:[{url:"https://vk.com/reaction/1-reactions-4-48?c_uniq_tag=c80e3224c299a73384c057ff065c9458dcd533d57a1458875eb98883c3a96783",width:48,height:48},{url:"https://vk.com/reaction/1-reactions-4-72?c_uniq_tag=a0eddba1ec31f96adbb9afa2c6c14bec055b95f8d9f113bdf759fb5a9c9054f0",width:72,height:72}],title:{color:{foreground:{light:"EF5203",dark:"FA5300"},background:{light:"FDEBE8",dark:"3C2421"}}},title_color:{light:"EF5203",dark:"FA5300"}}}]};function p(e){const t={...e?.attachments?.[0]?.wall,attachments:_(e),inner_type:"wall_wallpost"},o=t?.copy_history?.[0];let p={};if(o&&0!==o.from_id){const e=(0,c.apiAttachWallOwnerId)(o),n="reply"===o.post_type;let s="all";1===o.friends_only&&(s="friends"),1===o.best_friends_only&&(s="best_friends"),p={...p,...n?{wallReply:{kind:"WallReply",id:o.id||0,postId:o.reply_post_id||0,authorId:r.resolveId(o.from_id),ownerId:r.resolveId(e),parentsStack:o.parents_stack,date:1e3*(o.date||0),chunks:i.fromServerText(o.text||""),attaches:(0,c.fromApiWallAttach)(o)}}:{wall:{kind:"Wall",isAds:"post_ads"===o.post_type,id:o.id||0,authorId:r.resolveId(o.from_id),ownerId:r.resolveId(e),date:1e3*(o.date||0),chunks:i.fromServerText(o.text||""),attaches:(0,c.fromApiWallAttach)(o),isDeleted:o.is_deleted||!1,isVisibleFor:s}}},t.copy_history=void 0}t?.attachments&&(p={...p,...(0,c.fromApiWallAttach)(t)});const h=[],f=[];return l.items.forEach((e=>{const t=(0,u.fromApiPostReaction)(e);t&&(h.push(t),f.push(t.id))})),{post:{kind:"Normal",cmid:n.resolveCmid(e.cmid),chunks:t?.text?i.fromServerText(t.text):[],views:t?.views?.count||0,sentAt:1e3*e.time,updatedAt:e.update_time&&1e3*e.update_time,channelId:s.resolveId(e.author_id),likes:{count:t?.likes?.count||0,reactionId:Boolean(t?.likes?.user_likes)?d.resolveId(t?.reactions?.user_reaction):void 0,availableReactionIds:f,peerIds:new Set},reposts:{count:t?.reposts?.count||0,isReposted:Boolean(t?.reposts?.user_reposted)},comments:{count:t?.comments?.count||0,oneLevelCount:0,canView:Boolean(t?.comments?.can_view),canPost:Boolean(t?.comments?.can_post),history:[],order:"interesting"},attaches:p,donut:{isDonut:t.donut?.is_donut,placeholder:t.donut?.placeholder?{text:t.donut.placeholder?.text,button:t.donut.placeholder?.button}:void 0,duration:m(t.donut?.paid_duration)},signerId:t.signer_id?r.resolveId(t.signer_id):void 0,reactionId:Boolean(t?.likes?.user_likes)?a.resolveId(t?.reactions?.user_reaction):void 0,reactions:t.reactions?(v=t.reactions.items,v.sort(((e,t)=>t.count-e.count)).reduce(((e,t)=>(e.set(a.resolveId(t.id),{reactionId:a.resolveId(t.id),count:t.count}),e)),new Map)):new Map,ads:{markedAsAds:Boolean(t.marked_as_ads),erid:t.author_ad?.ad_marker,eridUrl:t.author_ad?.advertiser_info_url},canEdit:Boolean(t.can_edit),trackCode:t.track_code},reactions:h};var v}function m(e){return-1===e||void 0===e?-1:e/60/60/24}function _(e){const t=e?.attachments?.[0]?.wall,o=t?.geo,n=t?.attachments||[];return o?[...n,{type:"geo",geo:o}]:n}function h(e){if("ads"===e.type||"donut_wall_donate_block"===e.type)return;if(!function(e){return void 0===e.title}(e))return;const t=e.copy_history?.[0];let o={};if(t){const n=(0,c.apiAttachWallOwnerId)(t),s="reply"===t.post_type;let a="all";1===t.friends_only&&(a="friends"),1===t.best_friends_only&&(a="best_friends"),o={...o,...s?{wallReply:{kind:"WallReply",id:t.id||0,postId:t.reply_post_id||0,authorId:r.resolveId(t.from_id),ownerId:r.resolveId(n),parentsStack:t.parents_stack,date:1e3*(t.date||0),chunks:i.fromServerText(t.text||""),attaches:(0,c.fromApiWallAttach)(t)}}:{wall:{kind:"Wall",isAds:"post_ads"===t.post_type,id:t.id||0,authorId:r.resolveId(t.from_id),ownerId:r.resolveId(n),date:1e3*(t.date||0),chunks:i.fromServerText(t.text||""),attaches:(0,c.fromApiWallAttach)(t),isDeleted:t.is_deleted||!1,isVisibleFor:a,views:t.views?.count,donut:{isDonut:t.donut?.is_donut,placeholder:t.donut?.placeholder?{text:t.donut.placeholder?.text,button:t.donut.placeholder?.button}:void 0,duration:m(t.donut?.paid_duration)}}}},e.copy_history=void 0}return e?.attachments&&(o={...o,...(0,c.fromApiWallAttach)(e)}),{kind:"Normal",cmid:n.resolveCmid(e.id||0),chunks:e?.text?i.fromServerText(e.text):[],views:e?.views?.count||0,sentAt:1e3*(e.date||0),updatedAt:e.edited&&1e3*e.edited,channelId:s.resolveId(e.owner_id||0),likes:{count:e?.likes?.count||0,reactionId:void 0,availableReactionIds:[],peerIds:new Set},reactions:new Map,reposts:{count:e?.reposts?.count||0,isReposted:Boolean(e?.reposts?.user_reposted)},comments:{count:e?.comments?.count||0,oneLevelCount:0,canView:Boolean(e?.comments?.can_view),canPost:Boolean(e?.comments?.can_post),history:[],order:"old"},attaches:o,donut:{isDonut:e.donut?.is_donut,placeholder:e.donut?.placeholder?{text:e.donut.placeholder?.text,button:e.donut.placeholder?.button}:void 0,duration:m(e.donut?.paid_duration)},signerId:e.signer_id?r.resolveId(e.signer_id):void 0,ads:{markedAsAds:Boolean(e.marked_as_ads),erid:e.author_ad?.ad_marker,eridUrl:e.author_ad?.advertiser_info_url},canEdit:Boolean(e.can_edit)}}function f(e){const t={...e?.attachments?.[0]?.wall,attachments:_(e),inner_type:"wall_wallpost"},o=t?.copy_history?.[0];let a={};if(o&&0!==o.from_id){const e=(0,c.apiAttachWallOwnerId)(o),n="reply"===o.post_type;let s="all";1===o.friends_only&&(s="friends"),1===o.best_friends_only&&(s="best_friends"),a={...a,...n?{wallReply:{kind:"WallReply",id:o.id||0,postId:o.reply_post_id||0,authorId:r.resolveId(o.from_id),ownerId:r.resolveId(e),parentsStack:o.parents_stack,date:1e3*(o.date||0),chunks:i.fromServerText(o.text||""),attaches:(0,c.fromApiWallAttach)(o)}}:{wall:{kind:"Wall",isAds:"post_ads"===o.post_type,id:o.id||0,authorId:r.resolveId(o.from_id),ownerId:r.resolveId(e),date:1e3*(o.date||0),chunks:i.fromServerText(o.text||""),attaches:(0,c.fromApiWallAttach)(o),isDeleted:o.is_deleted||!1,isVisibleFor:s}}},t.copy_history=void 0}return t?.attachments&&(a={...a,...(0,c.fromApiWallAttach)(t)}),{post:{kind:"Postponed",cmid:n.resolveCmid(e.cmid),chunks:t?.text?i.fromServerText(t.text):[],sentAt:1e3*(t.date||0),channelId:s.resolveId(e.author_id),attaches:a,donut:{isDonut:t.donut?.is_donut,placeholder:t.donut?.placeholder?{text:t.donut.placeholder?.text,button:t.donut.placeholder?.button}:void 0,duration:m(t.donut?.paid_duration)},signerId:t.signer_id?r.resolveId(t.signer_id):void 0,ads:{markedAsAds:Boolean(t.marked_as_ads),erid:t.author_ad?.ad_marker,eridUrl:t.author_ad?.advertiser_info_url},canEdit:Boolean(t.can_edit),comments:{canView:Boolean(t?.comments?.can_view),canPost:Boolean(t?.comments?.can_post)}}}}},183130:(e,t,o)=>{o.d(t,{fromApiPostReaction:()=>r,fromApiReaction:()=>s});var n=o(856061),i=o(157570);function r(e){if(!e.asset.animation_url||!e.asset.title_color?.dark||!e.asset.title_color?.light)return;const t=e.asset.images.find((e=>48===e.height))?.url,o=e.asset.images.find((e=>72===e.height))?.url;return t&&o?{id:n.resolveId(e.id),animation:e.asset.animation_url,title:e.title,image48:t,image72:o,color:{light:e.asset.title_color?.light,dark:e.asset.title_color?.dark}}:void 0}function s(e){return{id:i.resolveId(e.reaction_id),image:e.links.static,animationSmall:e.links.small_animation,animationBig:e.links.big_animation,name:""}}},314177:(e,t,o)=>{o.d(t,{fromApiNotificationSettings:()=>m,fromApiRoom:()=>l,fromApiSection:()=>p,fromApiSpace:()=>d,fromApiSpaceCall:()=>c,fromApiSpaceTribune:()=>u});var n=o(254335),i=o(175953),r=o(596917),s=o(401193),a=o(703837);function d(e){const t={kind:"Incomplete",id:n.resolveId(e.id),version:e.entity_version,name:e.name,description:r.fromServerText(e.description||""),shortName:e.short_name||"",position:e.position,unreadCount:e.viewer_data.notifications_for_user?.unread_count||0,isPrivate:e.is_private??!1,avatar:(0,a.fromApiPicture)({baseUrl:e.photo_base,thumbhashUrl:e.thumb_hash}),cover:(0,a.fromApiPicture)({baseUrl:e.cover,thumbhashUrl:e.cover_thumb_hash}),membersCount:e.members_count,viewerData:{isChangingMembership:!1,isMember:Boolean(e.viewer_data.is_member),isBanned:Boolean(e.viewer_data.is_banned),isOwner:Boolean(e.viewer_data.is_owner),roleIds:e.viewer_data.role_ids,notificationSettings:m(e.viewer_data.notification_settings),notificationsForUser:e.viewer_data.notifications_for_user&&{roomIds:e.viewer_data.notifications_for_user?.room_ids.map(n.resolveRoomId)}}};return"sections"in e?{...t,kind:"Space",defaultRoomId:e.default_room_id?n.resolveRoomId(e.default_room_id):void 0,sections:new Map(e.sections.map((e=>{const t=p(e);return[t.id,t]}))),rooms:new Map(e.rooms.map((e=>{const t=l(e);return[t.id,t]}))),roles:[]}:t}function c(e){return{id:n.resolveCallId(e.call_id),vkJoinLink:e.join_link,okJoinLink:e.ok_join_link,participantsList:e.participants.list?.map(i.resolveId)||[],participantsCount:e.participants.count||0}}function u(e){if(!e.room_id)throw new Error("Не удалось получить данные голосовой трибуны");const t=e.status??"closed",o={id:n.resolveTribuneId(e.room_id),participantsCount:e.participants_count||0,ownerId:i.resolveId(e.owner_id),guestSpeakers:e.guest_speakers_owners?.map(i.resolveId)||[],speakersInRoom:e.speakers_in_room.map(i.resolveId)};if("closed"===t)return{...o,status:t};const r=e.join_link,s=e.ok_join_link;if(!r||!s)throw new Error("Не удалось получить данные голосовой трибуны");return{...o,status:t,vkJoinLink:r,okJoinLink:s}}function l(e){let t;switch(e.related_entity.type){case"conversation":{const o=i.resolveId(e.related_entity.peer_id);if(!i.isChatPeerId(o))throw new Error("TODO");t={kind:"RoomChat",peerId:o};break}case"channel":t={kind:"RoomChannel",peerId:i.resolveId(e.related_entity.peer_id)};break;case"call":{const o=i.resolveId(e.related_entity.peer_id);if(!i.isChatPeerId(o))throw new Error("TODO");t={kind:"RoomCall",peerId:o,callId:n.resolveCallId(e.related_entity.call_id)};break}case"tribune":{const o=i.resolveId(e.related_entity.peer_id);if(!i.isChatPeerId(o))throw new Error("TODO");t={kind:"RoomTribune",peerId:o,callId:n.resolveCallId(e.related_entity.call_id),tribuneId:n.resolveTribuneId(e.related_entity.tribune_id)};break}default:(0,s.exhaustivenessCheck)(e.related_entity)}const o=void 0===e.section_id?e.section_id:n.resolveSectionId(e.section_id);return{id:n.resolveRoomId(e.id),version:e.entity_version,sectionId:o,position:e.position,isPrivate:Boolean(e.is_private),isMember:Boolean(e.is_member),permissions:e.permissions||[],relatedEntity:t}}function p(e){return{id:n.resolveSectionId(e.id),version:e.entity_version,name:e.name,isService:Boolean(e.is_service),position:e.position}}function m(e){return e?{muteTill:1e3*e.mute_till,useSound:Boolean(e.use_sound)}:{muteTill:0,useSound:!0}}},700462:(e,t,o)=>{o.d(t,{fromApiSticker:()=>i,fromApiStickersKeywords:()=>r,fromApiUgcSticker:()=>s,fromContextSticker:()=>a});var n=o(157274);function i(e){return{id:n.resolveStickerId(e.sticker_id),kind:"Sticker",item:e,isPopupAutoplayed:!0}}function r(e){return e.reduce(((e,t)=>{const o=(t.stickers||[]).map((e=>i({...e,inner_type:"base_sticker_new"}).id));for(const n of t.words)e.set(n,o);return e}),new Map)}const s=e=>({kind:"UgcSticker",id:e.id,item:e}),a=e=>e.isUGC?s(e.rawData):i(e.rawData)},503485:(e,t,o)=>{var n;o.d(t,{IEngine:()=>n}),function(e){let t,o,n;!function(e){e[e.Mention=1]="Mention",e[e.ExpiringMessage=2]="ExpiringMessage"}(t=e.MarkedType||(e.MarkedType={})),function(e){e[e.CopyFlagChanged=0]="CopyFlagChanged",e[e.TitleChanged=1]="TitleChanged",e[e.AvatarChanged=2]="AvatarChanged",e[e.AdminGrated=3]="AdminGrated",e[e.FlagsChanged=4]="FlagsChanged",e[e.Pinned=5]="Pinned",e[e.UserJoined=6]="UserJoined",e[e.UserLeft=7]="UserLeft",e[e.UserKicked=8]="UserKicked",e[e.AdminKicked=9]="AdminKicked",e[e.BannerChanged=10]="BannerChanged",e[e.KeyboardChanged=11]="KeyboardChanged",e[e.MessageRequestChanged=12]="MessageRequestChanged",e[e.ContactConverted=13]="ContactConverted",e[e.BusinessNotifyDataChanged=14]="BusinessNotifyDataChanged",e[e.MessageRequestCanceled=15]="MessageRequestCanceled",e[e.MessageRequestRejected=16]="MessageRequestRejected",e[e.MessageRequestAccepted=17]="MessageRequestAccepted",e[e.ContactJoined=18]="ContactJoined",e[e.CallInProgressChanged=19]="CallInProgressChanged",e[e.DonSubscribed=20]="DonSubscribed",e[e.DonUnsubscribed=21]="DonUnsubscribed",e[e.IsNewChange=22]="IsNewChange",e[e.StyleChanged=23]="StyleChanged",e[e.DescriptionChanged=24]="DescriptionChanged",e[e.ShortPollReactionsChanged=25]="ShortPollReactionsChanged",e[e.IncognitoJoined=26]="IncognitoJoined",e[e.ConvertIncognito=27]="ConvertIncognito",e[e.IncognitoLeft=28]="IncognitoLeft"}(o=e.ChatUpdateType||(e.ChatUpdateType={})),function(e){e[e.Deleted=0]="Deleted",e[e.Accepted=1]="Accepted",e[e.Rejected=2]="Rejected",e[e.New=3]="New"}(n=e.MRStatus||(e.MRStatus={})),e.isIncompleteUpdate=function(e){switch(e[0]){case 10004:{const t=12;return e.length<t}case 10005:{const t=11;return e.length<t}case 10018:{const t=11;return e.length<t}default:return!1}}}(n||(n={}))},777211:(e,t,o)=>{o.d(t,{TypingVariants:()=>g,addConvosToFolder:()=>F,getConvosByIds:()=>T,getOwnerGroupId:()=>R,insertChannels:()=>S,insertChatMembers:()=>N,insertContactItems:()=>y,insertContacts:()=>I,insertConvos:()=>b,insertFolders:()=>w,insertIncognitoMembers:()=>U,insertPeers:()=>k,insertRecommendedFolders:()=>A,insertSpaceCalls:()=>P,insertSpaceTribunes:()=>M,insertSpaces:()=>x,insertSublists:()=>C,removeConvosFromFolder:()=>E});var n=o(726478),i=o(856562),r=o(175953),s=o(769609),a=o(103026),d=o(728921),c=o(358096),u=o(872466),l=o(468831),p=o(512871),m=o(350946),_=o(841093),h=o(335913),f=o(314177),v=o(401193);const g=["text","voice","photo","video","file","videomessage"];function b(e,t,o,{dangerouslyMerge:a,shouldUpdateSortId:d,invalidateHistory:c}={}){const l=[];for(const s of t){const t="conversation"in s?(0,u.fromApiConvo)(s.conversation,s.last_message):(0,u.fromApiConvo)(s);if(!t)continue;const{convo:p,peer:m}=t,_=e.convos.get(p.peerId);if(_&&!a){l.push(_);continue}if(!_){const t="conversation"in s?r.resolveId(s.conversation.peer.id):r.resolveId(s.peer.id);(e.convosFailedMessages[t]||[]).forEach((e=>i.appendQueuedMessage(p,e)))}const h=p.majorSortId;if(i.merge(p,_,{invalidateHistory:c}),d&&i.updateSortId(p,{majorSortId:h}),e.convos.set(p.peerId,p),m&&e.peers.set(m.id,m),o.vkm_up_drafted_convos_in_list){const t=e.composerDrafts[p.peerId];t&&t[t.length-1]&&i.updateIsDrafted(p,p.canWrite.allowed)}n.refresh(e.organisers,p,o),l.push(p),"ChatConvo"===p.kind&&e.hiddenPinnedMessages.get(p.peerId)!==p.pinnedMessage?.cmid&&e.hiddenPinnedMessages.delete(p.peerId)}const p=l.filter((e=>!i.isMR(e)&&!i.isBusinessNotify(e)));return s.add(e.convosSearchIndex,p,(t=>{const o=e.peers.get(t.peerId);return{id:t.peerId,strings:o?s.peerWords(o):[]}})),l}function k(e,{apiUsers:t,apiGroups:o,apiContacts:n},{dangerouslyOverwrite:i}={}){const r=[];for(const o of t){const{user:t,lastSeen:n}=(0,l.fromApiUser)(o);e.lastSeens.set(t.id,n);const s=e.peers.get(t.id);"User"!==s?.kind||i?(e.peers.set(t.id,t),r.push(t)):r.push(s)}const s=[];for(const t of o){const o=(0,l.fromApiGroup)(t),n=e.peers.get(o.id);!n||"Group"!==n.kind||i?(e.peers.set(o.id,o),s.push(o)):s.push(n)}const a=[];for(const t of n){const o=(0,l.fromApiContact)(t),n=e.peers.get(o.id);!n||"Contact"!==n.kind||i?(e.peers.set(o.id,o),a.push(o)):a.push(n)}return{insertedUsers:r,insertedGroups:s,insertedContacts:a}}function y(e,t,o){const n=[];return k(e,{apiUsers:o,apiGroups:[],apiContacts:[]},{dangerouslyOverwrite:!0}),t.forEach((t=>{const o=r.resolveId(t);if(r.isUserPeerId(o)){const t=e.peers.get(o);if("User"!==t?.kind)return;e.contacts.items.set(o,t),n.push(o)}})),n}function I(e,t){const o=[];t.sort(((e,t)=>e.name.localeCompare(t.name)));for(const n of t){const t=(0,l.fromApiContact)(n),i=t.userId?t.userId:t.id;e.contacts.contacts.set(i,t),o.push(t)}return o}function w(e,t,{dangerouslyOverwrite:o}={}){const n=t.filter((e=>"managed_groups"!==e.type));if(o)return e.organisers.folders=n,n;const i=[];for(const t of n){e.organisers.folders.find((e=>e.id===t.id))?i.push(t):(e.organisers.folders.push(t),i.push(t))}return i}function C(e,t){const o=[];if(!t||0===t.length)return o;for(const n of t){e.organisers.sublists.find((e=>e.type===n.type))?o.push(n):(e.organisers.sublists.push(n),o.push(n))}return o}function A(e,t){const o=[];for(const n of t){const t=(0,p.fromApiFolderRecommended)(n);e.organisers.recommendedFolders.find((e=>e.type===t.type))?o.push(t):(e.organisers.recommendedFolders.push(t),o.push(t))}return o}function S(e,{apiChannels:t,apiGroups:o,dangerouslyMerge:n}){const i=[];for(const r of t){const t=o.find((e=>-e.id===r.channel.channel_id));if(!t)throw new Error("С бэка не приходит нужная группа для канала");const s=(0,m.fromApiChannel)(r,t);(r.last_message&&(0,_.fromApiPost)(r.last_message).reactions||[]).forEach((t=>{e.reactionsOld.set(t.id,t)}));let d=e.channels.get(s.id);if("ChannelRestricted"===d?.kind&&(d=void 0),d&&!n){i.push(d);continue}const c=d?a.merge(d,s):s;e.channels.set(c.id,c),i.push(c)}return i}function x(e,t,{apiConvos:o,apiUsers:n,apiGroups:i,apiSpaceCalls:r,apiSpaceTribunes:s},a){const d=[];for(const o of t){const t=(0,f.fromApiSpace)(o),n=e.spaces.get(t.id);if(!n){e.spaces.set(t.id,t),d.push(t);continue}const i=`${n.kind}_${t.kind}`;switch(i){case"Incomplete_Incomplete":case"Space_Space":n.version<t.version&&(e.spaces.set(t.id,t),d.push(t));break;case"Incomplete_Space":n.version<=t.version&&(e.spaces.set(t.id,t),d.push(t));break;case"Space_Incomplete":d.push(n);break;default:(0,v.exhaustivenessCheck)(i)}}return b(e,o,a,{dangerouslyMerge:!0}),k(e,{apiUsers:n,apiGroups:i,apiContacts:[]}),P(e,r),M(e,s),d}function P(e,t){const o=[];for(const n of t){const t=(0,f.fromApiSpaceCall)(n);e.spacesCalls.set(t.id,t),o.push(t)}return o}function M(e,t){const o=[];for(const n of t){const t=(0,f.fromApiSpaceTribune)(n);e.spacesTribunes.set(t.id,t),o.push(t)}return o}function U(e,t){for(const o of t){const t=(0,h.fromApiIncognitoMember)(o);if(!t)continue;const n=r.resolveId(o.peer_id),i=e.convos.get(n);"ChatConvo"===i?.kind&&c.addIncognitoMembers(i.members,[t])}}function R(e){return r.isGroupPeerId(e)?r.toRealId(e):0}function E(e,t,o,n){const r=e.organisers.folders.find((e=>e.id===t));if(!r)return;let s=r.unreadCount??0,a=r.unreadUnmutedCount??0;for(const c of o)n.vkm_new_convo_folder_logic?r.peerIds.has(c.peerId)&&(r.peerIds.delete(c.peerId),c.unreadCount&&(i.isMuted(c)?s--:a--)):i.isInFolder(c,t)&&(i.removeFolder(c,t),d.refresh(e.organisers.folders,c),c.unreadCount&&(i.isMuted(c)?s--:a--));d.setUnreadCounters(e.organisers.folders,t,s,a)}function F(e,t,o,n){const r=[],s=e.organisers.folders.find((e=>e.id===t));if(!s)return;let a=s.unreadCount??0,c=s.unreadUnmutedCount??0;for(const e of o)n.vkm_new_convo_folder_logic?s.peerIds.has(e.peerId)||(s.peerIds.add(e.peerId),e.unreadCount&&(i.isMuted(e)?a++:c++)):i.isInFolder(e,t)||(i.addFolder(e,t),r.push(e),e.unreadCount&&(i.isMuted(e)?a++:c++));n.vkm_new_convo_folder_logic||(d.push(e.organisers.folders,t,"all",r,s.all.hasMore,n),d.push(e.organisers.folders,t,"unread",r.filter((e=>i.isUnread(e))),s.unread.hasMore,n)),d.setUnreadCounters(e.organisers.folders,t,a,c)}function T(e,t){return t.reduce(((t,o)=>{const n=e.convos.get(r.resolveId(o));return n&&t.push(n),t}),[])}function N(e,t,o=[]){const n=o.reduce(((e,{id:t,name:o=""})=>e.set(t,{name:o})),new Map);for(const o of t){const t=o.invited_by?r.resolveId(o.invited_by):void 0,i=t&&!r.isChatPeerId(t)?t:void 0;if(o.incognito_id){const t=n.get(o.incognito_id);if(!t)continue;const s=c.resolveIncognitoMemberId(o.incognito_id),a={...t,id:s,inviterId:i,...o.join_date&&{inviteDate:1e3*o.join_date}};if(0!==o.member_id){const e=r.resolveId(o.member_id);(r.isUserPeerId(e)||r.isContactPeerId(e))&&(a.memberId=e)}e.incognitoMembers?.set(s,a)}const s=r.resolveId(o.member_id);if(!r.isUserPeerId(s)&&!r.isGroupPeerId(s)&&!r.isContactPeerId(s))continue;const a={canKick:Boolean(o.can_kick),isMessageRequest:Boolean(o.is_message_request),isRestrictedToWrite:Boolean(o.is_restricted_to_write),inviterId:i,peerId:s};o.is_message_request&&o.request_date&&(a.requestDate=1e3*o.request_date),o.join_date&&(a.joinDate=1e3*o.join_date),e.members.set(s,a),e.memberIds.add(s),a.isMessageRequest&&e.invitedIds?.add(s),r.isContactPeerId(s)||(o.is_admin?e.adminIds.add(s):e.adminIds.delete(s))}}},203080:(e,t,o)=>{function n(e){let t=function(e){let{PI:t,min:o,max:n,cos:i,round:r}=Math,s=e[0]|e[1]<<8|e[2]<<16,a=e[3]|e[4]<<8,d=(63&s)/63,c=(s>>6&63)/31.5-1,u=(s>>12&63)/31.5-1,l=(s>>18&31)/31,p=s>>23,m=(a>>3&63)/63,_=(a>>9&63)/63,h=a>>15,f=n(3,h?p?5:7:7&a),v=n(3,h?7&a:p?5:7),g=p?(15&e[5])/15:1,b=(e[5]>>4)/15,k=p?6:5,y=0,I=(t,o,n)=>{let i=[];for(let r=0;r<o;r++)for(let s=r?0:1;s*o<t*(o-r);s++)i.push(((e[k+(y>>1)]>>((1&y++)<<2)&15)/7.5-1)*n);return i},w=I(f,v,l),C=I(3,3,1.25*m),A=I(3,3,1.25*_),S=p&&I(5,5,b),x=function(e){let t=e[3],o=128&e[2],n=128&e[4];return(n?o?5:7:7&t)/(n?7&t:o?5:7)}(e),P=r(x>1?32:32*x),M=r(x>1?32/x:32),U=new Uint8Array(P*M*4),R=[],E=[];for(let e=0,r=0;e<M;e++)for(let s=0;s<P;s++,r+=4){let a=d,l=c,m=u,_=g;for(let e=0,o=n(f,p?5:3);e<o;e++)R[e]=i(t/P*(s+.5)*e);for(let o=0,r=n(v,p?5:3);o<r;o++)E[o]=i(t/M*(e+.5)*o);for(let e=0,t=0;e<v;e++)for(let o=e?0:1,n=2*E[e];o*v<f*(v-e);o++,t++)a+=w[t]*R[o]*n;for(let e=0,t=0;e<3;e++)for(let o=e?0:1,n=2*E[e];o<3-e;o++,t++){let e=R[o]*n;l+=C[t]*e,m+=A[t]*e}if(p)for(let e=0,t=0;e<5;e++)for(let o=e?0:1,n=2*E[e];o<5-e;o++,t++)_+=S[t]*R[o]*n;let h=a-2/3*l,b=(3*a-h+m)/2,k=b-m;U[r]=n(0,255*o(1,b)),U[r+1]=n(0,255*o(1,k)),U[r+2]=n(0,255*o(1,h)),U[r+3]=n(0,255*o(1,_))}return{w:P,h:M,rgba:U}}(e);return function(e,t,o){let n=4*e+1,i=6+t*(5+n),r=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,0,0,e>>8,255&e,0,0,t>>8,255&t,8,6,0,0,0,0,0,0,0,i>>>24,i>>16&255,i>>8&255,255&i,73,68,65,84,120,1],s=[0,498536548,997073096,651767980,1994146192,1802195444,1303535960,1342533948,-306674912,-267414716,-690576408,-882789492,-1687895376,-2032938284,-1609899400,-1111625188],a=1,d=0;for(let e=0,i=0,s=n-1;e<t;e++,s+=n-1)for(r.push(e+1<t?0:1,255&n,n>>8,255&~n,n>>8^255,0),d=(d+a)%65521;i<s;i++){let e=255&o[i];r.push(e),a=(a+e)%65521,d=(d+a)%65521}r.push(d>>8,255&d,a>>8,255&a,0,0,0,0,0,0,0,0,73,69,78,68,174,66,96,130);for(let[e,t]of[[12,29],[37,41+i]]){let o=-1;for(let n=e;n<t;n++)o^=r[n],o=o>>>4^s[15&o],o=o>>>4^s[15&o];o=~o,r[t++]=o>>>24,r[t++]=o>>16&255,r[t++]=o>>8&255,r[t++]=255&o}return"data:image/png;base64,"+btoa(String.fromCharCode(...r))}(t.w,t.h,t.rgba)}o.d(t,{thumbHashToDataURL:()=>n})}}]);try{stManager.done("dist/web/chunks/85843858.f8517129.js")}catch(e){}