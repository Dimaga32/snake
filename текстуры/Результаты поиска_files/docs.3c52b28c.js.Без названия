(()=>{"use strict";var __webpack_modules__={20412:(_,e,t)=>{function o(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M9 9v4a1 1 0 1 1-2 0V9H3a1 1 0 1 1 0-2h4V3a1 1 0 1 1 2 0v4h4a1 1 0 1 1 0 2H9Z"/></svg>',name:"add_16"}}t.d(e,{getIcon16Add:()=>o})},420211:(_,e,t)=>{function o(){return{icon:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.74 3.76c.35.34.35.9 0 1.23l-7.31 7.25a.88.88 0 0 1-1.25 0L2.26 9.36a.87.87 0 0 1 0-1.23.88.88 0 0 1 1.24 0l2.3 2.26 6.7-6.63a.88.88 0 0 1 1.24 0Z" fill="currentColor"/></svg>',name:"done_16"}}t.d(e,{getIcon16Done:()=>o})},946076:(_,e,t)=>{t.r(e),t.d(e,{UIGallery:()=>u,UI_GALLERY_CLASSNAME:()=>n.UI_GALLERY_CLASSNAME,UI_GALLERY_CONTENT_CLASSNAME:()=>n.UI_GALLERY_CONTENT_CLASSNAME,UI_GALLERY_INNER_CLASSNAME:()=>n.UI_GALLERY_INNER_CLASSNAME,uiGetGallery:()=>d});var o=t(942451),i=t(7144),s=t(663878),r=t(317412),l=t(879007),a=t(452314),n=t(374036);const c=(0,o.makeSharedState)("ui-gallery",(()=>({galleries:{},incIndex:0})),{version:0});function d(_){const e=(0,a.domData)((0,a.ge)(_),"gallery-id");return e&&c().galleries[e]}class u{_checkSizesAndUpdate(){return 0!==this._width&&0!==this._itemWidth||(this._width=Math.round((0,a.getSize)(this._el)[0]),this._itemWidth=(0,a.getSize)(this._items[0])[0],this._itemFullWidth=this._itemWidth+this._itemOffset),!(0===this._width||0===this._itemWidth)}_initScroll(){(this._opts.scrollX||this._opts.scrollY)&&(this._opts.isModernTransitionsEnabled||(0,r.addEvent)(this._innerCont,"DOMMouseScroll wheel",this._onWheelScroll.bind(this)))}_initArrows(){this._opts.noArrows?(0,a.addClass)(this._el,"ui_gallery_no_arrows"):(this._leftArrow=(0,a.geByClass1)("ui_gallery__arrow_left",this._el),this._rightArrow=(0,a.geByClass1)("ui_gallery__arrow_right",this._el),this._arrowWidth=(0,a.getSize)(this._leftArrow)[0],this._opts.isModernTransitionsEnabled?((0,r.addEvent)(this._leftArrow,"click",this._slide.bind(this,-1,void 0,{eventName:"arrow"})),(0,r.addEvent)(this._rightArrow,"click",this._slide.bind(this,1,void 0,{eventName:"arrow"}))):((0,r.addEvent)(this._leftArrow,"click",this._legacySlide.bind(this,-1,void 0,{eventName:"arrow"})),(0,r.addEvent)(this._rightArrow,"click",this._legacySlide.bind(this,1,void 0,{eventName:"arrow"}))),(0,r.addEvent)(this._leftArrow,"mouseover",this._onArrowMouseOver.bind(this,"left")),(0,r.addEvent)(this._leftArrow,"mouseout",this._onArrowMouseOut.bind(this)),(0,r.addEvent)(this._rightArrow,"mouseover",this._onArrowMouseOver.bind(this,"right")),(0,r.addEvent)(this._rightArrow,"mouseout",this._onArrowMouseOut.bind(this)))}_onWheelScroll(_){let e;if("wheel"==_.type)if(Math.abs(_.deltaY)>Math.abs(_.deltaX)){if(!this._opts.scrollY)return;e=-_.deltaY}else{if(!this._opts.scrollX)return;e=-_.deltaX}else if(void 0!==_.wheelDeltaY){if(!this._opts.scrollY)return;e=_.wheelDeltaY}else if(void 0!==_.wheelDelta)e=_.wheelDelta;else{if(!_.detail||1!==_.axis)return;e=-_.detail}e=this._scroll.rtlSame?-e:e,Math.abs(e)>=120&&(e=74*Math.max(-1,Math.min(1,e))),this._innerCont.scrollLeft-=e,this._checkItemsAfterScroll(this._innerCont.scrollLeft),(0,r.cancelEvent)(_)}_getScrollParams(){this._opts.shouldCheckGalleryViewed&&this._checkSizesAndUpdate();const _=this._width-2*this._arrowWidth,e=this._itemFullWidth>_;return{isItemBiggerThanWidth:e,scrollDistance:e?this._itemFullWidth:_}}_legacySlide(_,e,t){const{scrollDistance:o,isItemBiggerThanWidth:i}=this._getScrollParams();let l=this._innerCont.scrollLeft+(this._scroll.rtlSame?-_:_)*o;const n=this._innerCont.scrollWidth-this._width;this._scroll.negative?(l=Math.min(l,0),l=Math.abs(l)):l=Math.max(0,l),l=Math.min(n,l);const c=this._scroll.negative||this._scroll.rtlSame?-_:_;if(c>0&&l<n){l=Math.floor(l/this._itemFullWidth)*this._itemFullWidth}else if(c<0&&l>0){l=(i?Math.ceil(l/this._itemFullWidth):Math.floor(l/this._itemFullWidth))*this._itemFullWidth}if(this._opts.isFullSizeSlide&&(l=(this._visible.left+_)*this._itemFullWidth),0===l||l===n){const e=this._innerCont.scrollWidth;(0,a.addClass)(this._inner,"ui_gallery__inner_shift_instant"),this._onArrowMouseOut(),l&&(l+=_*(this._innerCont.scrollWidth-e))}this._scroll.negative&&(l=-l),(0,s.animate)(this._innerCont,{scrollLeft:l},{duration:Math.abs(this._innerCont.scrollLeft-l)+50,transition:s.Fx.Transitions.easeOutCubic}),this._checkItemsAfterScroll(l),setTimeout((()=>(0,a.removeClass)(this._inner,"ui_gallery__inner_shift_instant")),0),this._opts?.onSlide?.(_,{eventName:t?.eventName}),e&&(0,r.cancelEvent)(e)}_updateShift(_){let e=this._shift+_;const t=this._inner.scrollWidth-this._inner.clientWidth;e>t&&(e=t),e<0&&(e=0),this._shift=e}_slide(_,e,t){const{scrollDistance:o}=this._getScrollParams();this._updateShift(_*o),this._inner.style.transform=`translate3d(${-1*this._shift}px, 0, 0)`,this._checkItemsAfterScroll(this._shift),this._opts?.onSlide?.(_,{eventName:t?.eventName}),e&&(0,r.cancelEvent)(e)}_checkItemsAfterScroll(_,e){if(this._scroll.negative&&(_=Math.abs(_)),(!this._opts.shouldCheckGalleryViewed||this._visible.isGalleryViewed)&&(!this._opts.shouldCheckGalleryViewed||this._checkSizesAndUpdate())){if(this._opts.markOutside||this._opts.onViewItem){const t=this._itemWidth/3,o=(this._scroll.backward?this._inner.scrollWidth-this._width-_:_)-this._scrollOffset,i=_&&Math.floor(o/this._itemFullWidth),s=i*this._itemFullWidth+2*t;let r;r=this._scroll.backward?_+this._width<this._inner.scrollWidth-s:_>s;const n=Math.min(this._items.length-1,Math.floor((o+this._width)/this._itemFullWidth)),c=n*this._itemFullWidth+2*t;let d;if(d=this._scroll.backward?_>this._inner.scrollWidth-c:_+this._width<c,this._opts.onViewItem){const _=r?Math.min(this._items.length-1,i+1):i,t=d?Math.max(0,n-1):n;if(e||_!==this._visible.left||t!==this._visible.right){for(let o=_;o<=t;o++)(this._visible.left<0||e&&!(0,l.inArray)(this._items[o],this._visible.items)||o<this._visible.left||o>this._visible.right)&&this._opts.onViewItem(this._items[o],o);this._visible.left=_,this._visible.right=t,this._visible.items=this._items.slice(_,t+1)}}this._opts.markOutside&&(e?((0,a.geByClass)("ui_gallery_item_outside",this._inner).forEach((_=>{(0,a.removeClass)(_,"ui_gallery_item_outside")})),this._outside.left=-1,this._outside.right=-1):((i!==this._outside.left||!r)&&this._outside.left>=0&&((0,a.removeClass)(this._items[this._outside.left],"ui_gallery_item_outside"),this._outside.left=-1),(n!==this._outside.right||!d)&&this._outside.right>=0&&((0,a.removeClass)(this._items[this._outside.right],"ui_gallery_item_outside"),this._outside.right=-1)),r&&i!==this._outside.left&&((0,a.addClass)(this._items[i],"ui_gallery_item_outside"),this._outside.left=i),d&&n!==this._outside.right&&((0,a.addClass)(this._items[n],"ui_gallery_item_outside"),this._outside.right=n))}if(!this._opts.noArrows){const e=_>0,t=_+this._width<this._inner.scrollWidth;(0,a.toggleClass)(this._leftArrow,"ui_gallery__arrow_visible",this._scroll.rtl&&!this._scroll.backward?t:e),(0,a.toggleClass)(this._rightArrow,"ui_gallery__arrow_visible",this._scroll.rtl&&!this._scroll.backward?e:t)}(!this._scroll.backward&&this._inner.scrollWidth-_-this._width<1e3||this._scroll.backward&&_<1e3)&&this._onLoadMore()}}_onArrowMouseOver(_){this._inner.classList.add(`ui_gallery__inner_shift_${_}`)}_onArrowMouseOut(){this._inner.classList.remove("ui_gallery__inner_shift_left"),this._inner.classList.remove("ui_gallery__inner_shift_right")}_onLoadMore(){!this._opts.onLoadMore||this._loadingMore||this._finised||(this._loadingMore=!0,this._opts.onLoadMore(this._items.length))}addMore(_,e){_=_||[],this.addItems(_),this._finised=!!e||!_.length,this._loadingMore=!1}addItems(_,e){if((_=_||[]).length){const t=e>=0&&e<this._items.length?this._items[e]:null;_.forEach((_=>{t?(0,a.domInsertBefore)(_,t):this._inner.appendChild(_)})),this.refresh()}}destroy(){(0,r.removeEvent)(this._innerCont),(0,r.removeEvent)(this._leftArrow),(0,r.removeEvent)(this._rightArrow),(0,a.domData)(this._el,"gallery-id",null),delete c().galleries[this._id],this._opts.onDestroy&&this._opts.onDestroy(),(0,a.re)(this._el)}removeItem(_){return(0,i.isNumeric)(_)&&(_=this._items[_]),!(!_||!(0,l.inArray)(_,this._items))&&((0,a.re)(_),this.refresh(),this._items.length||this.destroy(),!0)}refresh(){this._width=Math.round((0,a.getSize)(this._el)[0]),this._items=(0,a.geByClass)("ui_gallery_item",this._el),this._checkItemsAfterScroll(this._innerCont.scrollLeft,!0)}scrollToDirection(_){this._opts.isModernTransitionsEnabled?this._slide(_,void 0,{eventName:"bullet"}):this._legacySlide(_,void 0,{eventName:"bullet"})}getItems(){return this._items}getVisibleItems(){return this._visible.items.map(((_,e)=>[_,this._visible.left+e]))}setGalleryViewed(){this._visible.isGalleryViewed=!0,this._checkItemsAfterScroll(this._innerCont.scrollLeft)}constructor(_,e){if(!_)throw new Error("No element was provided for UIGallery");if(!(_=(0,a.ge)(_)).classList.contains(n.UI_GALLERY_CLASSNAME))throw new Error("Provided incorrect element for UIGallery");const t=d(_);if(t)return t;this._opts=(0,l.extend)({markOutside:!1,scrollY:!0,scrollX:!0,noArrows:!1,isFullSizeSlide:!1,isModernTransitionsEnabled:!1},e),this._id=c().incIndex,c().incIndex+=1,this._el=_,this._width=Math.round((0,a.getSize)(this._el)[0]),this._items=(0,a.geByClass)("ui_gallery_item",this._el),this._itemWidth=(0,a.getSize)(this._items[0])[0],this._itemOffset=(0,l.intval)((0,a.getStyle)(this._items[0],vk.rtl?"marginLeft":"marginRight")),this._scrollOffset=(0,l.intval)((0,a.getStyle)(this._items[0],"marginLeft")),this._itemFullWidth=this._itemWidth+this._itemOffset,this._innerCont=(0,a.geByClass1)(n.UI_GALLERY_CONTENT_CLASSNAME,this._el),this._inner=(0,a.geByClass1)(n.UI_GALLERY_INNER_CLASSNAME,this._el),this._opts.isModernTransitionsEnabled&&(this._shift=0,this._inner.classList.add("ui_gallery__inner--withTransitions")),this._scroll=function(){const _={rtl:!1,backward:!1,delta:1,negative:!1,rtlSame:!1};if(!vk.rtl)return _;if(!cur._scrollInfo){const e=(0,a.se)('<div style="position: fixed; left: -1000px; width: 0; overflow: scroll">x</div>'),t=document.querySelector("#content");t?.appendChild(e);const o=e.scrollLeft;_.rtl=vk.rtl,_.backward=o>0,e.scrollLeft=1e3,_.delta=e.scrollLeft===o?-1:1,_.negative=!_.backward&&_.delta<0,_.rtlSame=_.rtl&&!_.backward&&!_.negative,(0,a.re)(e),cur._scrollInfo=_}return cur._scrollInfo}(),this._loadingMore=!1,this._finised=!1,this._visible={left:-1,right:-1,items:[],isGalleryViewed:!1},this._outside={left:-1,right:-1,timer:null},this._initScroll(),this._initArrows(),(0,a.domData)(this._el,"gallery-id",this._id),c().galleries[this._id]=this,this._checkItemsAfterScroll(this._innerCont.scrollLeft,!0)}}},150773:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Docs:()=>Docs});var _web_lib_dom__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(452314),_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(490712),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(317412),_web_lib_scroll__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(688701),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(879007),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(610989),_web_lib_message_box__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(20025),_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(850101),_shared_lib_convert__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(387674),_shared_lib_common__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(7144),_web_indexer_indexer__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(211981),_web_lib_stats__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(756758),_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(357889),_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(810903),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(714209),_web_lib_nav_utils__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(240515),_shared_counters_updateCounters__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(577271),_web_legacy_ui_ui_search__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(331048),_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(134020),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(618913),_web_lib_ui__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(248298),_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(258643),_icons_desktop__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(20412),_icons_desktop__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(420211),_web_docs_cloud_cloud_preview__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(796654),_web_docs_cloud_listeners_message__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(454549),_web_docs_cloud_listeners_visibility__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(989100),_shared_ranges__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(388078),_shared_counters_tmr__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(141229);const Docs={init:function(){(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)(cur,{module:"docs",rmenu:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("#docs_rmenu"),menuTypesList:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("#ui_rmenu_all_list"),menuTagsList:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("#ui_rmenu_tag_list"),menuTagsToggle:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("#ui_rmenu_tag_toggle"),searchInput:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("#docs_search"),searchReset:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("#docs_reset"),listCont:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("#docs_list"),summary:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("#docs_summary"),titleEl:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("#docs_title"),listMore:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("#docs_more"),searchCont:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("#docs_search_list"),searchSummary:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("#docs_search_summary"),searchMore:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("#docs_search_more"),searchBlock:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("#docs_search_list_block")}),Docs.indexDocs(),setTimeout((()=>(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.elfocus)(cur.searchInput)),0),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)(cur,{list:{all:cur.docs},cache:{}}),cur.nav.push((function(_,e,t,o){if(e[0]==t[0]&&(t.section!=e.section&&!_.id||t.type!=e.type))return Docs.changed(t.section,t.type),window.nav.setLoc(t),!1})),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.addEvent)(window,"scroll",Docs.scrollResize)},saveDoc:function(_){let e=cur.docUrl;e+=e.match(/\?/)?"&dl=1":"?dl=1";const t=document.createElement("a");return t.href=e,t.download=cur.docTitle,(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_1__.statlogsValueEvent)("docs_preview",0,"download",cur.docExt),(0,_shared_counters_tmr__WEBPACK_IMPORTED_MODULE_26__.tmrTrackCustomGoal)("vk_file_viewer_download",{ext:window.cur.docExt,size:window.cur.docSize,country:window.cur?.userCountry,city:window.cur?.userCity,agent:window.cur.userAgent,platform:"web",timestamp:Date.now()}),t.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1})),_&&setTimeout((function(){window.close()}),2e3),!1},saveLitresDoc:function(){const _=document.createElement("a");_.href=cur.docUrl,_.target="_blank",_.download="book.pdf",(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_1__.statlogsValueEvent)("docs_preview",0,"litres_download",cur.docExt),_.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1}))},litresBuy:function(){return cur.docBuyLink&&((0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_1__.statlogsValueEvent)("docs_preview",0,"litres_buy",cur.docExt),window.location=cur.docBuyLink),!1},imgZoom:function(_){"can_zoom"==_.className?_.className="can_zoom_out":(_.className="can_zoom",window.scroll(0,0))},saveToDocs:function(_,e){if(!vk.id)return!1;const t=document.querySelector(".SaveToDocsButton");if(!t||_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_21__.FlatButton.isLocked(t))return!1;_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_21__.FlatButton.lock(t);const o="SaveToDocsButton--saved",i=t.classList.contains(o),s=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("docs_save_to_docs"),r=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("docs_saved_to_docs");i?ajax.post("docs.php",{act:"a_delete",oid:vk.id,did:cur.savedId,hash:cur.savedHash},{onDone:function(){_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_21__.FlatButton.unlock(t),cur.savedId=0,cur.savedHash="",_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_21__.FlatButton.setLabel(t,s),_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_21__.FlatButton.setBefore(t,(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_27__.getIcon16Add)().icon),t.classList.remove(o),(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_1__.statlogsValueEvent)("docs_preview",0,"remove_from_docs",cur.docExt)},onFail:()=>{_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_21__.FlatButton.unlock(t)}}):ajax.post("docs.php",{act:"a_add",doc:`${cur.docOwnerId}_${cur.docId}`,hash:_,add_hash:e},{onDone:function(_,e,i,s){_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_21__.FlatButton.unlock(t),cur.savedId=i[0],cur.savedHash=s,_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_21__.FlatButton.setLabel(t,r),_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_21__.FlatButton.setBefore(t,(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_28__.getIcon16Done)().icon),t.classList.add(o),(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_1__.statlogsValueEvent)("docs_preview",0,"save_to_docs",cur.docExt)},onFail:()=>{_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_21__.FlatButton.unlock(t)}})},initDoc:function(_){if((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)(cur,_),window.opener=null,(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_1__.statlogsValueEvent)("docs_preview",0,"open-js",_.docExt),document.body.onkeydown=_=>{"KeyS"===_.code&&(_.ctrlKey||_.metaKey)&&(_.preventDefault(),Docs.saveDoc())},_.hasCloudPreview){const e={error:()=>Docs.saveDoc(!0)},t=new _web_docs_cloud_listeners_message__WEBPACK_IMPORTED_MODULE_23__.CloudMessagesListener({actions:e,options:_}),o=(0,_web_docs_cloud_listeners_visibility__WEBPACK_IMPORTED_MODULE_24__.handleCloudPreviewVisibilityChange)(_);(0,_web_docs_cloud_cloud_preview__WEBPACK_IMPORTED_MODULE_22__.startCloudPreview)({docUrl:_.docUrl,docExt:_.docExt,docTitle:_.docTitle,docSize:_.docSize,uid:window.vk.id,reqId:_.requestId,listeners:{onInit:o,onLoad:({timer:_})=>{t.setTimer(_),window.addEventListener("message",t,!1),document.addEventListener("visibilitychange",o,!1)},onError:_=>this.handlePreviewError(_),onReady:()=>this.hidePreviewLoader()}}),cur.destroy.push((function(){window.removeEventListener("message",t,!1),document.removeEventListener("visibilitychange",o,!1)}))}(0,_shared_counters_updateCounters__WEBPACK_IMPORTED_MODULE_16__.updateCounters)(location.href,document.referrer)},changed:function(_,e){cur.section=_||"all",cur.type=e||"",Docs.getList(),cur.searchInput.setValue(""),_web_legacy_ui_ui_search__WEBPACK_IMPORTED_MODULE_17__.default.onChanged(cur.searchInput,!0),Docs.updateList("",{force:!0}),cur.searchShown=0},scrollResize:function(){if(_shared_lib_browser__WEBPACK_IMPORTED_MODULE_14__.browser.mobile)return;let _=cur.listMore,e=cur.searchMore;if(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.isVisible)(_)&&(_=e,!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.isVisible)(_)))return;let t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.clientHeight)(),o=(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_3__.scrollGetY)(),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getXY)(_)[1];(o+t>i||cur.searchOffset&&o+2*t>i)&&Docs.showMore()},getList:function(_){let e;if(_=_||cur.section,cur.searchStr?(e=_+"_"+cur.type+"_"+cur.searchStr,cur.selection={re:new RegExp("("+cur.searchStr.replace(cur.index.delimiter,"|").replace(/[\/\\\(\)\[\]\{\}\*,]/g,"").replace(/^\||\|$/g,"")+")","gi"),val:'<span class="highlight">$1</span>'}):e=cur.type?_+"_"+cur.type:_,cur.list[e])return cur.found=cur.list[e].length,cur.list[e];let t=cur.searchStr?cur.index.search(cur.searchStr):cur.docs;return cur.list[e]=Docs.filterList(t),cur.found=cur.list[e].length,cur.list[e]},filterList:function(_){let e=[],t=_.length;for(let o=0;o<t;o++){let t=_[o];("all"===cur.section&&(!cur.type||cur.type==t[9])||"sent"===cur.section&&1==t[5])&&e.push(t)}return e},indexDocs:function(){cur.docs&&(cur.index=new _web_indexer_indexer__WEBPACK_IMPORTED_MODULE_10__.vkIndexer(cur.docs,(function(_){return _[2]+" "+_[6]})))},updateTypes:function(){cur.docs&&cur.typesChanged&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$$)("._ui_rmenu_subitem",cur.menuTypesList).forEach((_=>_.classList.add("ui_rmenu_item_hidden"))),cur.docs.forEach((_=>{const e=_[9];(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)(`._docs_type_${e}`,cur.menuTypesList).classList.remove("ui_rmenu_item_hidden")})),delete cur.typesChanged)},updateTags:function(_){cur.tags&&_&&_.split(",").forEach((_=>{_=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_4__.trim)(_),cur.tags[_]||(cur.tags[_]=!0,cur.menuTagsList.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.se)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.rs)(cur.tpl.tagItem,{label:_}))),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(cur.menuTagsToggle,"ui_rmenu_item_hidden"))}))},addDocBox:function(){(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_6__.showBox)("/docs.php",{act:"add_box",oid:cur.oid})},addDoc:function(_){cur.docs&&((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_20__.lockButton)("docs_add_doc"),_._order=(cur.docs[0]&&cur.docs[0]._order||0)-1,cur.docs.unshift(_),Docs.showList(cur.docs.slice(0,cur.perPage)),(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_3__.scrollToTop)(200),cur.index.add(_),Docs.updateTags(_[6]),cur.count+=1,cur.found+=1,cur.menuProgress=cur.typesChanged=!0,window.nav.go(window.nav.objLoc[0]))},drawList:function(_,e){e=e||cur.listCont;const t=document.createDocumentFragment();_.forEach((_=>{t.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.se)(Docs.getDocHTML(_)))})),e.appendChild(t),(0,_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_18__.checkPageBlocks)()},getDocHTML:function(_){let e,t=_[0],o=_[1],i=_[2],s=i,r=_[3],l=_[4],a=_[6],n=_[7],c=_[9]||0,d=_[10]?_[10]:"",u="/doc"+l+"_"+t,E=l==window.vk.id||n==window.vk.id||l==cur.oid&&_shared_ranges__WEBPACK_IMPORTED_MODULE_25__.Ranges.isGroupId(l)&&cur.groupAdmin,h=_[8];cur.selection&&(s=s.replace(cur.selection.re,cur.selection.val)),a&&(a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.rs)(cur.tpl.tags,{tags:a.split(",").map((_=>(cur.selection&&(_=_.replace(cur.selection.re,cur.selection.val)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.rs)(cur.tpl.tag,{title:_})))).join(", ")}));let b=" docs_icon_type"+c;e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.rs)(E?cur.tpl.edit:cur.tpl.add,{oid:l,item_id:t}),h=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.rs)(h?cur.tpl.thumb:cur.tpl.icon,{oid:l,item_id:t,ext:o,url:u,thumb:h,title:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_4__.clean)(s),icon_class:b});let m=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.rs)(cur.tpl.itemAdditionalInfo,{date:r,actions:d,tags:a});return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.rs)(cur.tpl.item,{oid:l,item_id:t,thumb:h,actions:e,title:s,title_clean:i,url:u,additional_info:m})},showList:function(_){if(cur.shown=_.length,cur.shown){if(!cur.listCont)return;cur.listCont.innerHTML="",Docs.drawList(_)}cur.searchShown=0},showMore:function(){let _=Docs.getList();if(_.length&&cur.shown<_.length){let e=_.slice(cur.shown,cur.shown+cur.perPage);cur.shown+=e.length,Docs.drawList(e),cur.shown>=cur.found&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)(cur.listMore,"unshown")}else cur.searchStr&&Docs.globalSearch(!!cur.searchShown)},globalSearch:function(more){if(clearTimeout(cur.searchTimeout),!cur.searchStr||cur.loadingDocs)return!1;!more&&cur.found&&(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_11__.saveSearchAttemptStats)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_11__.serviceDocs,0,cur.found,cur.searchStr);let searchStr=cur.searchStr;if(!more&&cur.cache[cur.searchStr]){let _=cur.cache[cur.searchStr];return cur.found||(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_11__.saveSearchAttemptStats)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_11__.serviceDocs,0,_[2],cur.searchStr),Docs.processGlobalSearch(searchStr,!0,_[0],_[1],_[2])}return cur.searchTimeout=setTimeout((function(){if(searchStr!=cur.searchStr)return;const requestStartedAt=+new Date;window.ajax.post("/docs.php",{act:"search_docs",q:cur.searchStr,offset:more&&cur.searchShown||0,oid:cur.oid},{onDone:function(evalString,shown,count){let list;try{list=eval("("+evalString+")")}catch(_){return(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_19__.logEvalError)(_,evalString),!1}if(!more&&!cur.found){const _=+new Date-requestStartedAt;(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_11__.saveSearchAttemptStats)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_11__.serviceDocs,0,count,cur.searchStr,0,0,_)}return Docs.processGlobalSearch(searchStr,!more,list,shown,count)},showProgress:function(){cur.loadingDocs=!0,more?(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_20__.lockButton)(cur.searchMore):_web_legacy_ui_ui_search__WEBPACK_IMPORTED_MODULE_17__.default.showProgress(cur.searchInput)},hideProgress:function(){cur.loadingDocs=!1,more?(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_20__.unlockButton)(cur.searchMore):_web_legacy_ui_ui_search__WEBPACK_IMPORTED_MODULE_17__.default.hideProgress(cur.searchInput)}})}),more?10:300),!0},processGlobalSearch:function(_,e,t,o,i){return _===cur.searchStr&&(cur.searchCount=i,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggle)(cur.searchBlock,!e||o&&t),o&&t&&(e&&(cur.searchCont.innerHTML="",cur.searchShown=0),Docs.drawList(t,cur.searchCont),cur.searchShown=cur.searchShown+o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(cur.searchMore,"unshown",cur.searchShown>=i||cur.searchShown>=1e3||!o||!t),Docs.drawSummary(!0),cur.cache[cur.searchStr]=[t,o,i],!0)},drawSummary:function(_){let e=Docs.getList().length,t=cur.type?"type"+cur.type:cur.section;if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(cur.summary,e?(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.langNumeric)(e,"%s",!0):""),cur.sectionLabels[t]&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(cur.titleEl,cur.sectionLabels[t]),_){let _=cur.searchShown&&cur.searchCount;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(cur.searchSummary,_?(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.langNumeric)(_,"%s",!0):"")}},updateList:function(_,e){if(e=e||{},_==cur.searchStr&&!e.force)return Docs.hideLoadProgress(),!1;if(cur.menuProgress&&"menu"!==e.from){let _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)(`._docs_section_${cur.section}`,cur.rmenu);window.uiRightMenu.switchMenu(_),window.uiRightMenu.showProgress(_),delete cur.menuProgress}Docs.updateTypes(),cur.searchStr=_,cur.selection=!1;let t=Docs.getList(),o=t.length;if(Docs.hideLoadProgress(),cur.searchStr||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)(cur.searchBlock),cur.searchStr||(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_11__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_11__.serviceDocs),!o){cur.shown=0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)(cur.listMore,"unshown");let _=cur.searchStr?_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("docs_empty_search").replace("%s","<b>"+(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_4__.clean)(cur.searchStr)+"</b>"):cur.oid<0?_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("docs_no_group_docs"):_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("docs_no_user_docs");cur.listCont.innerHTML=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.rs)(cur.tpl.empty,{text:_})}return(cur.searchStr||o)&&(Docs.showList(t.slice(0,cur.perPage)),o&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(cur.listMore,"unshown",cur.found<=cur.shown),o<cur.perPage)?(cur.searchStr&&Docs.globalSearch(),Docs.drawSummary(),!0):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)(cur.searchBlock),Docs.drawSummary(),!0)},hideLoadProgress:function(){window.uiRightMenu&&window.uiRightMenu.hideProgress((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domFC)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("#narrow_column")))},editItem:function(_,e,t){return!(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_6__.showBox)("/docs.php",{act:"edit_box",oid:e,did:t})},downloadItem:function(_,e,t,o,i){if((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.checkEvent)(i))return!0;const s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domClosest)("_docs_item",_);if(!s)return!((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domClosest)("_feed_notification",_)&&cur&&"notifications"===cur.section);let r=((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)(".docs_item_icon",s)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)(".docs_item_thumb",s)).href;return o&&(r+=(r.match(/\?/)?"&":"?")+"fragment=1"),window.open(r),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.cancelEvent)(i)},addItem:function(_,e,t,o){cur._addedDocsInfo=cur._addedDocsInfo||{};let i=e+"_"+t,s=cur._addedDocsInfo[i],r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domClosest)("_docs_item",_);if(s){const _={act:"a_delete",hash:o,did:s[0],oid:s[4]};window.ajax.post("/docs.php",_,{onDone:function(){if(delete cur._addedDocsInfo[i],_.to_id==cur.oid){let _=cur.docs.length;for(;_--;){cur.docs[_][0]==s[0]&&(cur["item_restore"+s[0]]=[cur.docs.splice(_,1)[0],_],cur.index.remove(cur["item_restore"+s[0]][0]),cur.typesChanged=!0)}cur.count-=1,cur.found-=1,cur.list={}}}})}else{const _={act:"a_add",doc:i,hash:o,to_id:cur.groupAdmin?cur.oid:window.vk.id};window.ajax.post("/docs.php",_,{onDone:function(e,t,o){(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.showDoneBox)(e),cur._addedDocsInfo[i]=o,_.to_id==cur.oid&&(o._order=(cur.docs[0]&&cur.docs[0]._order||0)-1,cur.docs.unshift(o),cur.index.add(o),Docs.updateTags(o[6]),cur.typesChanged=!0,window._tbLink&&window._tbLink.loc&&(cur.__phinputs=cur.__phinputs||[],(0,_web_lib_nav_utils__WEBPACK_IMPORTED_MODULE_15__.globalHistoryDestroy)(window._tbLink.loc)))}})}const l=!s;if(r){r.classList.toggle("doc_added",l);const _=r.querySelector(".docs_action_icon");_&&(_.innerHTML=l?(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_28__.getIcon16Done)().icon:(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_27__.getIcon16Add)().icon)}return Docs.rowActive(_,"add"),!1},deleteItem:function(_,e,t,o,i,s){let r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domClosest)("_docs_item",_);if(r)return _&&window.tooltips&&window.tooltips.destroy(_),window.ajax.post("/docs.php",{act:"a_delete",hash:o,did:t,oid:e,sure:i,comment:s},{onDone:function(i){if(!i)return void window.createConfirmBox(Docs.deleteItem.bind(null,_,e,t,o,1),"документ");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)(r,"docs_item_deleted");let s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)(`#docs_restore_row${e}_${t}`);s&&(s.innerHTML=i);let l=cur.docs.length;for(;l--;){cur.docs[l][0]==t&&(cur["item_restore"+t]=[cur.docs.splice(l,1)[0],l],cur.index.remove(cur["item_restore"+t][0]),cur.typesChanged=!0)}cur.count-=1,cur.found-=1,cur.list={}},showProgress:()=>(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)(r,"docs_item_loading"),hideProgress:()=>(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(r,"docs_item_loading")}),!1},restoreItem:function(_,e,t,o){let i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domClosest)("_docs_item",_);if(i)return window.ajax.post("/docs.php",{act:"a_restore",hash:o,did:t,oid:e},{onDone:function(_){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(i,"docs_item_deleted");let e=cur["item_restore"+t];e&&(cur.docs.splice(e[1],0,e[0]),cur.index.add(e[0]),cur.typesChanged=!0,cur.count+=1,cur.found+=1)},showProgress:()=>(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)(i,"docs_item_loading"),hideProgress:()=>(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(i,"docs_item_loading")}),!1},tagSearch:function(_,e){let t=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_4__.trim)(_.innerText||_.textContent);return cur.searchInput.setValue(t),_web_legacy_ui_ui_search__WEBPACK_IMPORTED_MODULE_17__.default.onChanged(cur.searchInput,!0),Docs.updateList(t,e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.elfocus)(cur.searchInput),(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_3__.scrollToTop)(100),!1},selectTag:function(_){return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)(".ui_rmenu_item_sel",cur.rmenu)!==_&&(window.uiRightMenu.switchMenu(_),window.uiRightMenu.showProgress(_),cur.menuProgress=!0,cur.section="all",cur.type="",Docs.tagSearch(_,{from:"menu"}))},addTag:function(_,e){let t=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_4__.trim)(_.innerText||_.textContent);return e.selectItem([t,t])},rowActive:function(_,e){let t,o=[12,5,5],i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domClosest)("_docs_item",_);t="delete"===e||i&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)(i,"doc_added")&&"add"===e?_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("docs_remove_tt"):"edit"===e?_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("docs_edit_tt"):cur.groupAdmin?_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("docs_add_to_group_tt"):_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("docs_add_tt"),t&&(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_13__.showTooltip)(_,{text:function(){return t},showdt:500,black:1,shift:o})},filterMP3:function(_,e){let t=[];return(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_9__.each)(e,(function(){if("mp3"!==this.name.substr(-3).toLowerCase())t.push(this);else{let _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("#docs_upload_error");_?(_.innerHTML=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("docs_upload_mp3_fail"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.show)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domPN)(_))):setTimeout((0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_6__.showFastBox)({title:_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("global_error")},_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("docs_upload_mp3_fail")).hide,4e3)}})),t},showFileTT:function(_,e,t){if(clearTimeout(cur.fileTT),!_||!e||!t)return!1;"gif"===e&&(cur.fileTT=setTimeout((function(){let e=t+"?wnd=1";cur.fileTTImage=new Image,cur.fileTTImage.src=e,cur.fileTTImage.onload=function(){cur.fileTTImage&&cur.fileTTImage.getAttribute("src")===e&&(cur.prevTT&&cur.prevTT!=_&&cur.prevTT.tt&&cur.prevTT.tt.hide(),clearTimeout(_.hidetimer),_.hidetimer=!1,cur.prevTT=_,(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_13__.showTooltip)(_,{content:'<img class="docs_tt_image" src="'+e+'" align="center"/>',shift:[14,7,7],slide:15,className:"docs_tt",dir:"auto",hasover:!1,nohideover:!0,showdt:0}))},window.stManager.add([window.jsc("web/tooltips.js"),"tooltips.css"])}),500))},hideFileTT:function(){clearTimeout(cur.fileTT),delete cur.fileTTImage},chooseSwitchTT:function(_){return(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_13__.showTooltip)(_,{text:function(){return _.getAttribute("data-tt")},black:1,showdt:500,shift:[3,0,0]})},chooseSwitch:function(_){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)((0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)().titleWrap,"box_loading"))return!1;cur.docsChooseInput.setValue(""),_web_legacy_ui_ui_search__WEBPACK_IMPORTED_MODULE_17__.default.onChanged(cur.docsChooseInput,!0),cur.docsTab="user_docs"===cur.docsTab?"group_docs":"user_docs";let e=cur.docsCurFilter;const t={act:"a_choose_doc_box",offset:0,to_id:cur.docsToId,tab:cur.docsTab,switch_tab:1,ext_filter:e||""};Object.assign(t,{from:cur.docsChooseFrom,imhash:cur.docsChooseImHash}),window.ajax.post("/docs.php",t,{onDone:function(e,t,o,i,s){cur.docsChooseRows.innerHTML=e,_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_21__.FlatButton.setLabel(cur.docsChooseMore,i),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggle)(cur.docsChooseMore,!o),cur.docsOffset=t,_.innerHTML=s},showProgress:(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)().showCloseProgress,hideProgress:(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)().hideCloseProgress})},chooseUpdateList:function(_,e){e!=cur.chooseDocsQuery&&(clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout((()=>Docs.chooseDocsSearch(_)),e?300:0))},chooseDocsSearch:function(_){let e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_4__.trim)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(_));e!=cur.docsSearchStr&&(cur.docsSearchStr=e,e?(cur.docsOffset=0,Docs.chooseMore()):(cur.docsOffset=cur.docsStartOffset,cur.docsChooseRows.innerHTML=cur.docsStartHTML,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggle)(cur.docsChooseMore,cur.docsStartMore)))},chooseMore:function(){if(cur.docsChooseLoading)return!1;const _={act:"a_choose_doc_box",offset:cur.docsOffset,to_id:cur.docsToId,tab:cur.docsTab,q:cur.docsSearchStr,more:1,ext_filter:cur.docsCurFilter};Object.assign(_,{from:cur.docsChooseFrom,imhash:cur.docsChooseImHash}),window.ajax.post("/docs.php",_,{onDone:function(_,e,t){0==cur.docsOffset?cur.docsChooseRows.innerHTML=_:cur.docsChooseRows.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.cf)(_)),cur.docsOffset=e,t&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)(cur.docsChooseMore)},showProgress:function(){cur.docsChooseLoading=!0,cur.docsOffset?_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_21__.FlatButton.lock(cur.docsChooseMore):_web_legacy_ui_ui_search__WEBPACK_IMPORTED_MODULE_17__.default.showProgress(cur.docsChooseInput)},hideProgress:function(){cur.docsChooseLoading=!1,cur.docsOffset?_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_21__.FlatButton.unlock(cur.docsChooseMore):_web_legacy_ui_ui_search__WEBPACK_IMPORTED_MODULE_17__.default.hideProgress(cur.docsChooseInput)}})},chooseScroll:function(){let _=window.lastWindowHeight;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.isVisible)(cur.docsChooseMore)&&_>(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getXY)(cur.docsChooseMore,!0)[1]-(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_3__.scrollGetY)()-_&&cur.docsChooseMore.click()},chooseDoc:function(_,e,t,o){if("A"===o.target.tagName||"A"===o.target.parentNode.tagName)return!0;let i=_&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("._docs_choose_attach",_);if(void 0!==_.selected)cur.lastAddMedia&&(cur.lastAddMedia.unchooseMedia(_.selected),_.selected=void 0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(_,"docs_item_selected"),i&&(i.innerHTML=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("global_add_media")));else{let s=cur.attachCount&&cur.attachCount()||0;window.event=window.event||o,cur.chooseMedia("doc",e,t),window.event=void 0,(!cur.attachCount||cur.attachCount()>s)&&cur.lastAddMedia&&(_.selected=cur.lastAddMedia.chosenMedias.length-1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)(_,"docs_item_selected"),i&&(i.innerHTML=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("global_cancel")))}return(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.cancelEvent)(o)},upload:function(_,e){return!(void 0!==cur.uplId&&window.Upload&&window.Upload.checkFileApi()&&window.Upload.checked&&window.Upload.checked[cur.uplId])||(cur.docsChooseUpload.click(),!1)},chooseUploaded:function(_,e){let t=void 0!==_.ind?_.ind:_,o=(_.fileName||_.filename).replace(/[&<>"']/g,""),i=o?t+"_"+o:_;const s=document.getElementById(`upload${i}_progress_wrap`);s&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)(".progress_x",s)),window.ajax.post("/docs.php",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)({act:"a_save_doc",from:"choose",from_place:cur.docsChooseFrom,imhash:cur.docsChooseImHash,blockPersonal:cur.docsChooseBlockPersonal,mail_add:cur.docsChooseMailAdd},e),{onDone:function(_,e,t){cur.chooseMedia("doc",_+"_"+e,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)(t,{upload_ind:i}))},onFail:(_,e)=>Docs.chooseUploadFailed(_,e),progress:"form"===window.Upload.types[t]?window.box.progress:null})},chooseUploadFailed:function(_,e){let t=void 0!==_.ind?_.ind:_,o=(_.fileName?_.fileName:_.filename||_).replace(/[&<>"']/g,"");if("fileApi"===window.Upload.types[t]&&!window.Upload.options[t].wiki_editor){let i,s,r=(_.fileName||_.filename).replace(/[&<>"']/g,""),l=r?t+"_"+r:_;cur.imMedia||cur.imwMedia?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.re)("upload"+l+"_progress_wrap"),i=(-3==cur.peer?cur.imwMedia:cur.imMedia).lnkId,cur.addMedia[i].unchooseMedia(!1)):cur.addMedia&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.re)("upload"+l+"_progress_wrap"),i=(cur.attachMediaIndexes||{})[o],i&&cur.addMedia[i].unchooseMedia(!1));let a=!0;e&&"string"==typeof e.error&&e.error.match(/ERR_UPLOAD_TERMINATED/)&&(a=!1),s=e&&"wrong_arch_file"===e.error?_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("docs_upload_arch_fail"):e&&"wrong_mp3_file"===e.error?_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("docs_upload_mp3_fail"):e&&"wrong_music_file"===e.error?_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("docs_upload_music_fail"):e&&"wrong_arch_mp3_file"===e.error?_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("docs_upload_arch_mp3_fail"):_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("docs_upload_fail"),a&&setTimeout((0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_6__.showFastBox)({title:_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("global_error")},s).hide,4e3)}(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)()&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)((0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)().progress),(0,_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_12__.topError)("Upload failed",{dt:-1,type:102,url:((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("#file_uploader_form"+t)||{}).action}),window.Upload.embed(t),cur.onMediaUploadFail&&cur.onMediaUploadFail(_)},chooseUploadStart:function(_,e){let t=void 0!==_.ind?_.ind:_,o=window.Upload.options[t],i=window.Upload.types[t];cur.docsChooseFiles[t]=e||_,"form"===i&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.show)((0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)().progress),(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)().changed=!0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)(".file",cur.docsChooseUpload).disabled=!0),"flash"===i&&(window.boxLayerWrap.visibilityHide=!0,cur.docsChooseIsFlash=!0),o.wiki_editor||(cur.notStarted&&(window.boxQueue.hideLast(),delete cur.notStarted),Docs.chooseUploadProgress(_,0,0)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(window.boxLayerWrap,"dropbox_over"),cur.onMediaUploadStarted&&cur.onMediaUploadStarted(_)},chooseUploadProgress:function(_,e,t){let o=void 0!==_.ind?_.ind:_;if(void 0===_.ind&&(_=cur.docsChooseFiles[o]),window.Upload.options[o].wiki_editor)cur.docsChooseUploadArea.innerHTML='<img src="/images/upload.gif"/>';else{let i=(cur.attachMediaIndexes||{})[o];if(void 0===i||i&&cur.addMedia[i].chosenMedia||cur.imMedia){let i={loaded:e,total:t};(_.fileName||_.filename)&&(i.fileName=(_.fileName||_.filename).replace(/[&<>"']/g,"")),cur.showMediaProgress("photo",o,i)}}},chooseUploadComplete:function(info,res){let params,i=void 0!==info.ind?info.ind:info;if(!res)return;try{params=eval("("+res+")")}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_19__.logEvalError)(_,res),params=(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_8__.fromQueryString)(res)}if(!params.file)return void window.Upload.onUploadError(info,params);let options=window.Upload.options[i];options&&options.bugcomments_editor&&(params.bugcomments_editor=options.bugcomments_editor),options&&options.blog_editor_hash&&(params.blog_editor_hash=options.blog_editor_hash),Docs.chooseUploaded(info,params)},chooseHideFlashUploader:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)(window.boxLayerWrap,"box_layer_hidden")&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(window.boxLayerWrap,"box_layer_hidden"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)(window.boxLayerWrap)),window.boxLayerWrap.visibilityHide=!1},onChooseDragEnter:function(_){window.boxLayerWrap.scrollTop=0;let e=(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)(),t=e.bodyNode;if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.isVisible)(cur.docsChooseRows))e.bodyH=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)(t)[1];else if(void 0!==e.bodyH){let _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getXY)(t,!0)[1],o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)(cur.docsChooseDropbox)[1],i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domPN)(cur.docsChooseDropbox))[1]-o;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(cur.docsChooseDropbox,"height",Math.min(window.lastWindowHeight-_-i,e.bodyH-i))}return(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.cancelEvent)(_)},onDragEnter:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)(cur.docsChooseWrap,"dropbox_over"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)("box_layer_wrap","box_layer_wrap--docs_upload")},onDragOut:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(cur.docsChooseWrap,"dropbox_over"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)("box_layer_wrap","box_layer_wrap--docs_upload")},hidePreviewLoader:function(){const _=document.querySelector(".docs_loader");return!!_&&(_.classList.add("hidden"),!0)},handlePreviewError:function(_){return(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_1__.statlogsValueEvent)("docs_preview",0,`cloud_view_doc_error_${_}`,window.cur.docExt),(0,_shared_counters_tmr__WEBPACK_IMPORTED_MODULE_26__.tmrTrackCustomGoal)("vk_file_viewer_error",{errorType:_,ext:window.cur.docExt,size:window.cur.docSize,country:window.cur?.userCountry,city:window.cur?.userCity,agent:window.cur.userAgent,timestamp:Date.now()}),this.saveDoc(!0)},claimHint:function(_){(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_13__.showTooltip)(_,{text:_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("docs_claimed_doc_hint"),shift:[24,3],black:1,className:"claim_hint_tooltip",dir:"bottom"})},_eof:1}},331048:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _web_lib_dom__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(452314),_web_lib_input_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(691004),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(879007),_web_lib_element_tooltip__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(96526),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(317412),_web_legacy_ui_ui_tabs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(743288),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(714209),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(618913),_web_lib_scroll__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(688701);const SEARCH_FOCUSED_CLASS="search_focused",uiSearch={destroy:function(_){const e=uiSearch.getFieldEl(_);uiSearch.stopEvents(e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeData)(e)},getWrapEl:function(_){return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domClosest)("_wrap",_)},getFieldEl:function(_){return _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)(_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)("_field",_)?_:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domByClass)(uiSearch.getWrapEl(_),"_field")},stopEvents:function(_){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(_,"eventHandlers")||[];(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.each)(e,(function(_,e){e.stop()}))},startEvents:function(_){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(_,"eventHandlers")||[];(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.each)(e,(function(_,e){e.stop(),e.start()}))},init:function(el,options){if(!el)return;if(el=uiSearch.getFieldEl(el),!el)return;const wrapEl=uiSearch.getWrapEl(el),delayedInitOptions=!options&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domData)(wrapEl,"init-options");if(delayedInitOptions){const evalScript="(function() { return "+delayedInitOptions+" })()";try{const initOptions=eval(evalScript);initOptions?.suggester?.useCatalogSuggest?setTimeout((()=>(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domData)(wrapEl,"init-options",null)),0):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domData)(wrapEl,"init-options",null),uiSearch.init(el,initOptions)}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_7__.logEvalError)(_,evalScript)}return}if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(el,"inited"))return;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(el,"inited",1);const onKeyDown=uiSearch.onKeyDown.pbind(el),onBuffer=function(_){if("input"===_.type&&_shared_lib_browser__WEBPACK_IMPORTED_MODULE_6__.browser.msie){const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(el);if(_===((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domData)(el,"prev-value")||""))return;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domData)(el,"prev-value",_)}setTimeout(uiSearch.onChanged.pbind(el,!1,_),0)};(0,_web_lib_input_utils__WEBPACK_IMPORTED_MODULE_1__.placeholderInit)(el),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(el,"opts",options);const onFocus=_=>{if(options.focusedModifierTargetSelector){const _=document.querySelector(options.focusedModifierTargetSelector);_?.classList.add(SEARCH_FOCUSED_CLASS)}options.onFocus?.(_)},onBlur=_=>{if(options.focusedModifierTargetSelector){const _=document.querySelector(options.focusedModifierTargetSelector);_?.classList.remove(SEARCH_FOCUSED_CLASS)}options.onBlur?.(_)};let mainHandler;if(options.suggester)options.suggester.useCatalogSuggest=!!options?.suggester?.useCatalogSuggest,options.suggester.useCatalogSuggest||(options.suggester.instance=new Suggester(el,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.extend)(options.suggester,{type:options.suggester.type,historyItems:!!options.suggester.history&&options.suggester.historyItems,onSearch:function(_,e,t,o,i){_||(options.allowFiltersForEmpty||uiSearch.removeAllFilters(el),uiSearch.hideProgress(el)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(wrapEl,"ui_search_field_empty",!_),uiSearch.handleAriaAttributes(wrapEl,_),options.onChange&&options.onChange.call(el,_,e,t,o,i)}}))),mainHandler={start:function(){onBlur&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(el,"blur",onBlur),onFocus&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(el,"focus",onFocus)},stop:function(){onBlur&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent)(el,"blur",onBlur),onFocus&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent)(el,"focus",onFocus)}};else{const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("_ui_search_button_search",wrapEl),e=function(_){uiSearch.onEnter(el,_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.elfocus)(el)};mainHandler={start:function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(el,"keydown",onKeyDown),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(el,"paste cut input",onBuffer),onBlur&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(el,"blur",onBlur),onFocus&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(el,"focus",onFocus),_&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(_,"click",e)},stop:function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent)(el,"keydown",onKeyDown),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent)(el,"paste cut input",onBuffer),onBlur&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent)(el,"blur",onBlur),onFocus&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent)(el,"focus",onFocus),_&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent)(_,"click",e)}}}if(mainHandler.start(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(el,"eventHandlers",[mainHandler]),options.params){const content=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.se)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.trim)(options.params.html)),newOptions=options?.suggester?.useCatalogSuggest?{forceSide:"bottom",setPos:()=>({left:"auto",top:"52px"})}:{};options.paramsTooltip=new _web_lib_element_tooltip__WEBPACK_IMPORTED_MODULE_3__.ElementTooltip((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("_ui_search_params_button",wrapEl),{appendTo:wrapEl,content,autoShow:!1,customShow:!0,shift:options.params.shift?options.params.shift:0,offset:[0,-2],...newOptions}),options.paramsTooltip.build(),options?.suggester?.useCatalogSuggest&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(options.paramsTooltip._ttel,{right:0}),setTimeout((function(){(function initScript(){try{eval(options.params.script)}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_7__.logEvalError)(_,options.params.script)}}).call(el)}))}options.fixed&&uiSearch.setFixed(el),options.noAutoDestroy||cur.destroy.push(uiSearch.stopEvents.pbind(el)),uiSearch.initFilters(el,options),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.isFunction)(options.onInit)&&options.onInit(el,options)},getOptions:function(_){let e;if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)(_,"_field"))e=_;else{const t=uiSearch.getWrapEl(_);e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("_field",t)}return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(e,"opts")||{}},toggleParameters:function(_){const e=uiSearch.getOptions(_);e.paramsTooltip&&e.paramsTooltip.toggle()},hideParameters:function(_){const e=uiSearch.getOptions(_);e&&e.paramsTooltip&&e.paramsTooltip.hide()},saveHistorySearch:function(_,e,t,o,i,s){e||(e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(_));const r=uiSearch.getOptions(_);r.suggester&&r.suggester.instance&&r.suggester.instance.saveHistoryItem(e,t,o,i,s)},onEnter:function(_,e){_=uiSearch.getFieldEl(_);const t=uiSearch.getOptions(_),o=_.getValue?_.getValue():_.value;return t.onEnter&&t.onEnter(_,o,e),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.cancelEvent)(e)},onKeyDown:function(_,e){if(cur.preventInputActions&&-1!=[_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.KEY.RETURN,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.KEY.ESC,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.KEY.DOWN,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.KEY.UP].indexOf(e.keyCode))return(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.cancelEvent)(e);if(e.keyCode==_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.KEY.RETURN)return uiSearch.onEnter(_,e);if(e.keyCode==_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.KEY.ESC){const t=!!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(_);return uiSearch.reset(_,!1,e),!t||(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.cancelEvent)(e)}setTimeout.pbind(uiSearch.onChanged.pbind(_,!1,e),0)},onChanged:function(_,e,t){_=uiSearch.getFieldEl(_);const o=uiSearch.getOptions(_),i=uiSearch.getWrapEl(_),s=_.getValue?_.getValue():_.value;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(i,"ui_search_field_empty",!(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.trim)(s)),uiSearch.handleAriaAttributes(i,s),s||o.allowFiltersForEmpty||uiSearch.removeAllFilters(_),e||o.onChange&&o.onChange.call(_,s,t)},focus:function(_){_=uiSearch.getFieldEl(_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.elfocus)(_)},reset:function(_,e,t){_=uiSearch.getFieldEl(_);const o=uiSearch.getOptions(_),i=uiSearch.getWrapEl(_);(_.getValue?_.getValue():_.value)?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(_,""),uiSearch.onChanged(_,e,t),e||o.onEnter&&o.onEnter(_,""),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.elfocus)(_)):o.in_tabs&&_web_legacy_ui_ui_tabs__WEBPACK_IMPORTED_MODULE_5__.default.hideSearch(i),window.tooltips&&tooltips.destroyAll()},showProgress:function(_){_=uiSearch.getFieldEl(_);const e=uiSearch.getWrapEl(_);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)(e,"ui_search_loading");const t=_.getValue?(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.trim)(_.getValue()):_.value;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(e,"ui_search_field_empty",!t),uiSearch.handleAriaAttributes(e,t)},hideProgress:function(_){_=uiSearch.getFieldEl(_);const e=uiSearch.getWrapEl(_);if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(e,"ui_search_loading"),_){const t=_.getValue?(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.trim)(_.getValue()):_.value;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(e,"ui_search_field_empty",!t),uiSearch.handleAriaAttributes(e,t)}},handleAriaAttributes:function(_,e){const t=_.querySelector(".ui_search_controls"),o=!(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.trim)(e);t?.setAttribute("aria-hidden",o)},scrollResize:function(_){if(_shared_lib_browser__WEBPACK_IMPORTED_MODULE_6__.browser.mobile)return;_=uiSearch.getFieldEl(_);const e=uiSearch.getWrapEl(_),t=e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domPN)(e),o=e&&e.classList.contains("ui_search_fixed"),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)(cur.uiSearchPageBlock)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.gpeByClass)("page_block",_),s=vk.staticheader?Math.max(0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("page_header"))[1]-scrollNode.scrollTop):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("page_header"))[1];let r;const l=e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.isAncestor)(e,boxLayerWrap);if(!e||!t||!l&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.gpeByClass)("scroll_fix",e)||_.ignoreFixed&&!o||!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.isVisible)(t))return;if(l?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getXY)(t,!0)[1]<0:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getXY)(t,!0)[1]<s){const l=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getStyle)(e.classList.contains("ui_search_new")?e:_,"width"));!o&&l&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(t,"height",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)(e)[1]),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(e,"width",l),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)(e,"ui_search_fixed"));const a=Math.min(0,Math.max(-document.body.scrollLeft,document.body.clientWidth-(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("page_layout"))[0]));if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(e,{marginLeft:a}),i){const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getXY)(i)[1]+(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)(i)[1]-(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_8__.scrollGetY)()-_.offsetHeight;r=Math.min(s,Math.max(-_.offsetHeight,t)),r!==cur.lastUISearchPos&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(e,"top",r),cur.lastUISearchPos=r)}}else o&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(t,"height",""),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(e,{top:"",marginLeft:""}),cur.lastUISearchPos=!1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(e,"ui_search_fixed"))},setStatic:function(_){_.ignoreFixed=!0;const e=uiSearch.getWrapEl(_),t=e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domPN)(e);e&&t&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(t,"height",""),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(e,{top:"",marginLeft:""}),cur.lastUISearchPos=!1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(e,"ui_search_fixed"))},setFixed:function(_){if(_.ignoreFixed=!1,!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(_,"resizeEventHandler")){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.isAncestor)(_,boxLayerWrap)?boxLayerWrap:window,t=uiSearch.scrollResize.pbind(_),o={stop:_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent.pbind(e,"scroll",t),start:_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent.pbind(e,"scroll",t)};(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(_,"eventHandlers",((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(_,"eventHandlers")||[]).concat([o])),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(_,"resizeEventHandler",!0),o.start()}uiSearch.scrollResize(_)},initFilters:function(_,e){if(!_)return;const t=uiSearch.getWrapEl(_),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("ui_search_fltr_control",t),i={start:function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(o,"click",(function(_){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)(o,"shown")&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)(_.target,"ui_search_fltr_control")||s(o)})),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(o,"mouseover",(function(){if(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)(o,"shown"))return;const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(o,"hidetimer");_&&(clearTimeout(_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(o,"hidetimer",0)),s(o,!0)})),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(o,"mouseout",(function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(o,"hidetimer")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(o,"hidetimer",setTimeout((function(){s(o,!1),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(o,"hidetimer",0)}),200))}))},stop:_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent.pbind(o,"click mouseover mouseout")};function s(_,e){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(_,"shown",e)}(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(_,"eventHandlers",((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(_,"eventHandlers")||[]).concat([i])),i.start();const r=uiSearch._getFiltersPane(_);(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(r,"click",(function(e){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)(e.target,"token_title")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)(e.target,"token_del")){const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.gpeByClass)("token",e.target),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domData)(t,"id");uiSearch.removeFilter(_,o)}}))},removeAllFilters:function(_){const e=uiSearch._getFiltersPane(_),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(e,"cur_filters");(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.each)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.extend)({},t),(function(e){uiSearch.removeFilter(_,e,!0)}))},toggleFilter:function(_,e,t,o){o?uiSearch.addFilter(_,e,t):uiSearch.removeFilter(_,e)},addFilter:function(_,e,t){if(!e||!t)return;const o=uiSearch._getFiltersPane(_),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(o,"cur_filters")||{};i[e]=t,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(o,"cur_filters",i);const s=uiSearch.getOptions(_);s.onFiltersChanged&&s.onFiltersChanged(i),uiSearch._renderFilters(_)},removeFilter:function(_,e,t){const o=uiSearch._getFiltersPane(_),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(o,"cur_filters")||{};if(i[e]){delete i[e],(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(o,"cur_filters",i);const s=uiSearch.getOptions(_);s.onFilterRemoved&&s.onFilterRemoved(e,_,t),s.onFiltersChanged&&s.onFiltersChanged(i),uiSearch._renderFilters(_)}},_getFiltersPane:function(_){const e=uiSearch.getWrapEl(_)||_;return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("ui_search_filters_pane",e)},_renderFilters:function(_){clearTimeout((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(_,"renderFiltersTO")),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(_,"renderFiltersTO",setTimeout(uiSearch._doRenderFilters.pbind(_)))},_doRenderFilters:function(_){const e=uiSearch._getFiltersPane(_),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(e,"cur_filters")||{},o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("ui_search_filters",e);if(o)if((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.isEmpty)(t))(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(e,"expanded"),setTimeout((function(){o.innerHTML="",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)(e)}),200);else{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.show)(e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClassDelayed)(e,"expanded");const _=[],i={};let s=0;(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.each)(t,(function(e,t){let o=!1,r=!1,l=e.match(/(.*?)_([^_]+)$/);const a=l&&l[2]||!1;l=l&&l[1]||!1,l&&(void 0!==i[l]&&"from"===a?r=i[l]:void 0!==i[l]&&(o=i[l]+1),i[l]=s);const n=`<div class="token" id="token${e}" data-id="${e}">\n                         <div class="token_title">${(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.replaceEntities)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.clean)(t))}</div>\n                         <div class="token_del"></div>\n                       </div>`;!1!==r?_.splice(r,0,n):!1!==o?_.splice(o,0,n):_.push(n),s++})),o.innerHTML=_.join("")}}},__WEBPACK_DEFAULT_EXPORT__=uiSearch},743288:(_,e,t)=>{t.d(e,{default:()=>d});var o=t(452314),i=t(879007),s=t(714209),r=t(317412),l=t(248782),a=t(946076),n=t(171444);const c={initTabs:function(_,e,t=!0){if(s.browser.msie&&(0,i.intval)(s.browser.version)<10)return;if(s.browser.opera&&(0,i.intval)(s.browser.version)<15)return;if((0,o.hasClass)(_,"ui_tabs_sliding"))return;const r=(0,o.getSize)(e)[0],l=e.offsetLeft,a=(0,o.geByClass1)("_ui_tabs_slider",_);if(a&&!(0,o.domData)(_,"inited")){const _={width:r+"px",marginLeft:l};(0,o.setStyle)(a,_)}t&&c.tryInitTabsScroll(_)},tryInitTabsScroll:function(_){const e=_.querySelector(".js-tabs-scroll:not(.js-tabs-scroll-inited)");if(!e)return;e.classList.add("js-tabs-scroll-inited");const t=new a.UIGallery(e,{scrollY:!1}),o=(0,l.debounce)((()=>{t.refresh()}),200);window.addEventListener("resize",o),(0,n.pushNavDestroy)((()=>{t.destroy(),window.removeEventListener("resize",o)}))},tryInit:function(_,e=!0){if((0,o.domData)(_,"inited"))return;const t=(0,o.geByClass1)("ui_tab_group_sel",_)||(0,o.geByClass1)("ui_tab_sel",_);t&&c.initTabs(_,t,e),(0,o.domData)(_,"inited",1)},goTab:function(_,e,t,i=!1){if((0,r.checkEvent)(e))return!0;const s=(0,o.gpeByClass)("ui_tabs",_);return!(!t&&(0,o.geByClass1)("ui_tab_sel",s)==_)&&(c.switchTab(_),c.showProgress(s),nav.go(_,e,{tab:_,noframe:i}))},switchTab:function(_,e){let t=(0,o.gpeByClass)("ui_tabs",_);const s=(0,o.geByClass1)("ui_tab_sel",t);let r=null,l=null;const a=(0,o.hasClass)(s,"ui_tab_group_item")?l=(0,o.gpeByClass)("ui_tab_group",s):s,n=(0,o.hasClass)(_,"ui_tab_group_item")?r=(0,o.gpeByClass)("ui_tab_group",_):_;if(_!=s){if(_!=n&&(c.toggleGroup(n,!1),c.resetLabel(n,_)),a){c.initTabs(t,a),e=e||{};const _=(0,o.geByClass1)("_ui_tabs_slider",t);if(_){e.noAnim||n===a||((0,o.addClass)(t,"ui_tabs_sliding"),clearTimeout(cur.tabSlidingTO),cur.tabSlidingTO=setTimeout(o.removeClass.pbind(t,"ui_tabs_sliding"),300));const s=(0,i.intval)(_.style.marginLeft),r={width:(0,o.getSize)(n)[0]+"px"};r[cssTransformProp]="translateX("+(n.offsetLeft-s)+"px)",(0,o.setStyle)(_,r)}s!=a&&n!=a&&c.resetLabel(a),a!=s&&(0,o.removeClass)(a,"ui_tab_group_sel"),(0,o.removeClass)(s,"ui_tab_sel"),"tab"===(0,o.attr)(s,"role")&&(0,o.attr)(s,"aria-selected","false")}if(n!=_&&(0,o.addClass)(n,"ui_tab_group_sel"),(0,o.addClass)(_,"ui_tab_sel"),l&&(0,o.removeClass)(l,"ui_tab_hide_separator"),"tab"===(0,o.attr)(_,"role")&&(0,o.attr)(_,"aria-selected","true"),r){t=(0,o.geByClass1)("ui_tab_group_items",r,"div").children;let _=null;(0,i.each)(t,(function(e,t){"SPAN"===t.tagName?_=t:(0,o.hasClass)((0,o.domFC)(t),"ui_tab_sel")||(0,o.hasClass)(t,"unshown")||(_=null)})),_&&(0,o.addClass)(r,"ui_tab_hide_separator")}}return!1},resetLabel:function(_,e){const t=(0,o.geByClass1)("ui_tab_group_label",_,"span");t&&(t.innerHTML=(e||t).getAttribute("data-default-label"))},toggleGroup:function(_,e){const t=(0,o.data)(_,"visibletimer");t&&clearTimeout(t),(0,o.data)(_,"visibletimer",setTimeout(o.toggleClass.pbind(_,"visible",e),e?0:100)),(0,o.toggleClass)(_,"shown",e)},showGroup:function(_){const e=(0,o.data)(_,"hidetimer");e&&(clearTimeout(e),(0,o.data)(_,"hidetimer",0)),c.toggleGroup(_,!0)},hideGroup:function(_){(0,o.data)(_,"hidetimer")||(0,o.data)(_,"hidetimer",setTimeout((function(){c.toggleGroup(_,!1),(0,o.data)(_,"hidetimer",0)}),200))},showProgress:function(_){(0,o.hasClass)(_,"ui_tabs")||(_=(0,o.gpeByClass)("ui_tabs",_)),(0,o.addClass)(_,"ui_tabs_loading")},hideProgress:function(_){(0,o.hasClass)(_,"ui_tabs")||(_=(0,o.gpeByClass)("ui_tabs",_)),(0,o.removeClass)(_,"ui_tabs_loading")},showSearch:function(_,e){if(cur.viewAsBox)return cur.viewAsBox();if((0,r.checkEvent)(e))return!0;const t=(0,o.gpeByClass)("ui_tabs",_),i=(0,o.domByClass)(t,"_field");return(0,o.addClass)(t,"ui_tabs_search_opened"),uiSearch.focus(i),!1},hideSearch:function(_,e){if((0,r.checkEvent)(e))return!0;const t=(0,o.gpeByClass)("ui_tabs",_);return(0,o.removeClass)(t,"ui_tabs_search_opened"),!1},scrollToActiveTab(_){const e=document.querySelector(`#${_}`);if(!e)return;const t=e.querySelector(".ui_tab_sel, .ui_tab_group_sel"),o=e.querySelector(`.${a.UI_GALLERY_CONTENT_CLASSNAME}`);if(!t||!o)return;const i=t.offsetLeft,s=i+t.offsetWidth,r=o.scrollLeft,l=o.clientWidth,n=r+l,c=i-20,d=s+20;c<r?o.scrollTo({left:c}):d>n&&o.scrollTo({left:d-l})},showSort(){const _=document.querySelector(".js-ui_tab_sort_wrap");_&&_.classList.remove("ui_tab_search_wrap_hidden")},hideSort(){const _=document.querySelector(".js-ui_tab_sort_wrap");_&&_.classList.add("ui_tab_search_wrap_hidden")}},d=c},692649:(_,e,t)=>{t.d(e,{initAndLoadCloud:()=>r});var o=t(666323),i=t(490712),s=t(447147);const r=({container:_,docParams:e,listeners:t})=>{if(!_)return!1;const r=(0,o.createIframe)({url:"",id:s.CLOUD_FRAME_ID,className:"iframe",container:_}),l={...t,onReady:()=>{t.onReady(),r.style.opacity="1"}};return e?.url&&e?.docExt&&e?.docSize&&e?.docTitle?(({container:_,iframe:e,iframeId:t,listeners:{onInit:r,onLoad:l,onError:a,onReady:n},docParams:c})=>{"function"==typeof r&&r();const{docUrl:d,docExt:u,docTitle:E,docSize:h,uid:b,reqId:m,postContentType:M,url:D}=c,w={url:d,ext:u,name:E,size:h,external_uid:b,external_req_id:m},P=(0,o.createForm)({container:_,action:D,inputs:w,target:t,postContentType:M});let O=!1;e?.addEventListener("load",(()=>{O=!0,e.style.opacity="1",n(),(0,i.statlogsValueEvent)("docs_preview",0,"cloud_iframe_load",u)}));const p=window.setTimeout((()=>{s.CLOUD_FALLBACK_CONFIG.enableTimeoutFallback&&!O&&a("timeout_fallback")}),1e3*s.CLOUD_TIMEOUT_FALLBACK_TIME_SEC);P.submit(),l({timer:p})})({container:_,iframe:r,iframeId:s.CLOUD_FRAME_ID,listeners:l,docParams:e}):l.onError("doc_data_not_ok")}},909826:(_,e,t)=>{function o({errorType:_,timespent:e,uid:t,requestId:o,docExt:i="",docSize:s=0,userAgent:r="",userCity:l="",userCountry:a=""}){return{agent:r,city:l,country:a,ext:i,reqId:o,size:s,platform:"web",timestamp:Date.now(),...void 0!==_?{errorType:_}:{},...void 0!==e?{timespent:e}:{},...void 0!==t?{uid:t}:{uid:window.vk.id}}}t.d(e,{getCloudPreviewAnalyticsParams:()=>o})},447147:(_,e,t)=>{t.d(e,{CLOUD_FALLBACK_CONFIG:()=>l,CLOUD_FRAME_ID:()=>o,CLOUD_ORIGIN:()=>i,CLOUD_TIMEOUT_FALLBACK_TIME_SEC:()=>r,CLOUD_URL:()=>s});const o="iframe",i="https://cloud.mail.ru",s=i+"/embedded",r=60,l={enableTimeoutFallback:!0}},666323:(_,e,t)=>{t.d(e,{createForm:()=>o,createIframe:()=>i});const o=({container:_=null,method:e="post",action:t,inputs:o,target:i,postContentType:s=""})=>{const r=document.createElement("form");return r.action=t,r.method=e,r.target=i,r.enctype=s,Object.keys(o).forEach((function(_){r.appendChild((({type:_="hidden",name:e,value:t})=>{const o=document.createElement("input");return o.name=e,o.type=_,o.value=t,o})({name:_,value:o[_]}))})),_||(_=document.body),_.appendChild(r),r},i=({url:_,id:e,className:t,container:o,extraData:i})=>{const s=document.createElement("iframe");return _&&(s.src=_),s.className=t,s.name=e,s.id=e,s.allowFullscreen=!0,s.width="100%",s.height="100%",i&&Object.entries(i).forEach((([_,e])=>{s.setAttribute(`data-${_}`,e)})),s.setAttribute("allowfullscreen",""),s.setAttribute("onmousewheel",""),s.setAttribute("allow","autoplay"),s.style.opacity="0",o?.appendChild(s),s}},796654:(_,e,t)=>{t.d(e,{startCloudPreview:()=>s});var o=t(447147),i=t(692649);function s(_){const{docUrl:e,docExt:t,docTitle:s,docSize:r,uid:l,reqId:a,listeners:n}=_,c=document.querySelector(".docs_iframe_container");(0,i.initAndLoadCloud)({container:c,listeners:n,docParams:{docTitle:s,docSize:r,docExt:t,docUrl:e,uid:l,reqId:a,url:o.CLOUD_URL,postContentType:"application/x-www-form-urlencoded"}})}},454549:(_,e,t)=>{t.d(e,{CloudMessagesListener:()=>l});var o=t(490712),i=t(141229),s=t(447147),r=t(909826);class l{handleEvent(_){if(_.origin!==s.CLOUD_ORIGIN)return;const{type:e}=_.data||{};void 0!==typeof e&&("app-ready"===e&&this.clearTimer(),this.logEvent(e),this.applyAction(e))}applyAction(_){this.actions[_]&&"function"==typeof this.actions[_]&&this.actions[_]()}clearTimer(){this._timer&&(clearTimeout(this._timer),this.setTimer(void 0))}logEvent(_){const e=this.selectLogger(_),t="error"===_?{...this.options,errorType:"cloud"}:this.options;e(_,(0,r.getCloudPreviewAnalyticsParams)(t))}selectLogger(_){return"app-ready"===_?(_,e,t="docs_preview",i=0)=>(0,o.statlogsValueEvent)(t,i,_,e?.ext):(_,e)=>(0,i.tmrTrackCustomGoal)(`vk_file_viewer_${_}`,e)}setTimer(_){this._timer=_}constructor({actions:_,options:e}){this.actions=_,this.options=e}}},989100:(_,e,t)=>{t.d(e,{handleCloudPreviewVisibilityChange:()=>s});var o=t(141229),i=t(909826);function s(_){let e=0;return function(){switch(document.visibilityState){case"visible":e=Date.now(),(0,o.tmrTrackCustomGoal)("vk_file_viewer_open",(0,i.getCloudPreviewAnalyticsParams)(_));break;case"hidden":const t=0===e?void 0:Math.floor((Date.now()-e)/1e3);(0,o.tmrTrackCustomGoal)("vk_file_viewer_close",(0,i.getCloudPreviewAnalyticsParams)({..._,timespent:t})),e=0;break;default:return}}}},906416:(_,e,t)=>{var o=t(490712),i=t(150773);window.vk?.pe?.static_manager_dynamic_imports&&window.vk?.stDomain&&(t.p=window.vk.stDomain+"/dist/"),window.Docs=i.Docs;try{window.stManager.done(window.jsc("web/docs.js"))}catch(_){}requestIdleCallback((()=>{try{(0,o.statlogsValueEvent)("entries_requests",1,"docs","web")}catch{}}),{timeout:5e3})}},__webpack_module_cache__={},deferred,leafPrototypes,getProto,inProgress;function __webpack_require__(_){var e=__webpack_module_cache__[_];if(void 0!==e)return e.exports;var t=__webpack_module_cache__[_]={exports:{}};return __webpack_modules__[_].call(t.exports,t,t.exports,__webpack_require__),t.exports}__webpack_require__.m=__webpack_modules__,deferred=[],__webpack_require__.O=(_,e,t,o)=>{if(!e){var i=1/0;for(a=0;a<deferred.length;a++){for(var[e,t,o]=deferred[a],s=!0,r=0;r<e.length;r++)(!1&o||i>=o)&&Object.keys(__webpack_require__.O).every((_=>__webpack_require__.O[_](e[r])))?e.splice(r--,1):(s=!1,o<i&&(i=o));if(s){deferred.splice(a--,1);var l=t();void 0!==l&&(_=l)}}return _}o=o||0;for(var a=deferred.length;a>0&&deferred[a-1][2]>o;a--)deferred[a]=deferred[a-1];deferred[a]=[e,t,o]},__webpack_require__.n=_=>{var e=_&&_.__esModule?()=>_.default:()=>_;return __webpack_require__.d(e,{a:e}),e},getProto=Object.getPrototypeOf?_=>Object.getPrototypeOf(_):_=>_.__proto__,__webpack_require__.t=function(_,e){if(1&e&&(_=this(_)),8&e)return _;if("object"==typeof _&&_){if(4&e&&_.__esModule)return _;if(16&e&&"function"==typeof _.then)return _}var t=Object.create(null);__webpack_require__.r(t);var o={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var i=2&e&&_;"object"==typeof i&&!~leafPrototypes.indexOf(i);i=getProto(i))Object.getOwnPropertyNames(i).forEach((e=>o[e]=()=>_[e]));return o.default=()=>_,__webpack_require__.d(t,o),t},__webpack_require__.d=(_,e)=>{for(var t in e)__webpack_require__.o(e,t)&&!__webpack_require__.o(_,t)&&Object.defineProperty(_,t,{enumerable:!0,get:e[t]})},__webpack_require__.f={},__webpack_require__.e=_=>Promise.all(Object.keys(__webpack_require__.f).reduce(((e,t)=>(__webpack_require__.f[t](_,e),e)),[])),__webpack_require__.u=_=>19072===_?"web/chunks/left_menu_store.b41d694b.js":"web/chunks/state-management.a46c500d.js",__webpack_require__.miniCssF=_=>{},__webpack_require__.o=(_,e)=>Object.prototype.hasOwnProperty.call(_,e),inProgress={},__webpack_require__.l=(_,e,t,o)=>{if(inProgress[_])inProgress[_].push(e);else{var i,s;if(void 0!==t)for(var r=document.getElementsByTagName("script"),l=0;l<r.length;l++){var a=r[l];if(a.getAttribute("src")==_||a.getAttribute("data-webpack")=="vk:"+t){i=a;break}}i||(s=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,__webpack_require__.nc&&i.setAttribute("nonce",__webpack_require__.nc),i.setAttribute("data-webpack","vk:"+t),i.src=_),inProgress[_]=[e];var n=(e,t)=>{i.onerror=i.onload=null,clearTimeout(c);var o=inProgress[_];if(delete inProgress[_],i.parentNode&&i.parentNode.removeChild(i),o&&o.forEach((_=>_(t))),e)return e(t)},c=setTimeout(n.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=n.bind(null,i.onerror),i.onload=n.bind(null,i.onload),s&&document.head.appendChild(i)}},__webpack_require__.r=_=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_,"__esModule",{value:!0})},__webpack_require__.p="/dist/",(()=>{var _={19487:0};__webpack_require__.f.j=(e,t)=>{var o=__webpack_require__.o(_,e)?_[e]:void 0;if(0!==o)if(o)t.push(o[2]);else{var i=new Promise(((t,i)=>o=_[e]=[t,i]));t.push(o[2]=i);var s=__webpack_require__.p+__webpack_require__.u(e),r=new Error;__webpack_require__.l(s,(t=>{if(__webpack_require__.o(_,e)&&(0!==(o=_[e])&&(_[e]=void 0),o)){var i=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;r.message="Loading chunk "+e+" failed.\n("+i+": "+s+")",r.name="ChunkLoadError",r.type=i,r.request=s,o[1](r)}}),"chunk-"+e,e)}},__webpack_require__.O.j=e=>0===_[e];var e=(e,t)=>{var o,i,[s,r,l]=t,a=0;if(s.some((e=>0!==_[e]))){for(o in r)__webpack_require__.o(r,o)&&(__webpack_require__.m[o]=r[o]);if(l)var n=l(__webpack_require__)}for(e&&e(t);a<s.length;a++)i=s[a],__webpack_require__.o(_,i)&&_[i]&&_[i][0](),_[i]=0;return __webpack_require__.O(n)},t=self.webpackChunkvkweb=self.webpackChunkvkweb||[];t.forEach(e.bind(null,0)),t.push=e.bind(null,t.push.bind(t))})();var __webpack_exports__=__webpack_require__.O(void 0,[50560,35623,81765,23592],(()=>__webpack_require__(906416)));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();