"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[77137],{340257:(e,t,r)=>{r.d(t,{API_VERSION:()=>i,BRIDGE_STAT_CALL_ARGUMENTS_MAX_LENGTH:()=>A,CLOSE_STATUS:()=>p,ERROR_CODES:()=>n,ERROR_REASONS:()=>c,ERROR_TYPES:()=>d,GROUP_STATUS:()=>_,MAX_COUNT_OF_APP_INIT:()=>I,NFT_APP_ID:()=>m,ONE_TIME_DONUT_APP_ID:()=>g,ORD_APP_ID:()=>S,OZON_APP_ID:()=>k,PERMISSION_TYPES:()=>l,PLATFORM:()=>o,PMC_PART_CONFIG_KEY_LONG_ID:()=>y,SITPOSTING_APP_ID:()=>v,TEXTLIVE_APPS:()=>f,THROTTLE_SCROLL_TIME:()=>a,VKPAY_APPS:()=>u,VKPAY_TRANSACTION_EVENT:()=>s,VK_CONNECT_EVENTS:()=>h,VK_CONNECT_SUPERAPPKIT_EVENT_TYPE:()=>T,VMOJI_CONSTRUCTOR_APP_ID:()=>E});const i="5.95",a=200,s="VKWebAppActionDone",o={WEB:"web",MOBILE_WEB:"mobile-web"},n={UNKNOWN:1,MISSING_PARAM:2,OLD_MISSING_PARAM:100,CONNECTION_LOST:3,USER_DENIED:4,INVALID_PARAMS:5,UNSUPPORTED_PLATFORM:6,REQUESTS_LIMIT_REACHED:10,ACCESS_DENIED:11,CUSTOM:13,NO_ADS:20},c={ACCESS_DENIED:"Access denied",UNSUPPORTED_PLATFORM:"Unsupported platform",UNSUPPORTED_ACTION:"Unsupported action",NATIVE_APP_IS_NOT_INSTALLED:"VK client is not installed on device",USER_NOT_A_PRIVATE_GROUP_MEMBER:"User is not a member of the given private group",UNKNOWN_ERROR:"Unknown error",CONNECTION_LOST:"Connection lost",NETWORK_ERROR:"Network error",USER_DENIED:"User denied",INVALID_PARAMS:"Invalid params",NO_ADS:"No ads",ADS_ALREADY_PLAYED:"Ads already played",VK_PAY_DISABLED:"This app can't use VK Pay",SCROLL_SUBSCRIBER_ALREADY_EXIST:"Scroll subscriber already exist",SUBSCRIPTION_IS_ALREADY_CANCELLED:"Subscription is in invalid status: subscription is already cancelled",SURVEY_INIT_IN_PROGRESS:"Survey init in progress",SURVEY_ALREADY_INIT:"Survey already init",SURVEY_NO_MATCH:"Survey no match",SURVEY_USER_CANCEL:"Survey user cancel",ALREADY_IN_PROGRESS:"Already in progress",USER_IS_NOT_GROUP_ADMIN:"Only group admins have access to group tokens",DEVICE_CANT_GET_GEODATA:"Device can't get geodata",USER_DIDNT_ALLOWED_ACTION:"User didn't allowed"},d={CLIENT:"client_error",API:"api_error",AUTH:"auth_error"},l={DENIED:"denied",PROMPT:"prompt",GRANTED:"granted"},p=["success","failed"],_={OPEN:0,CLOSED:1,PRIVATE:2},u=[6217559,7131443],f=[7512376],S=51707812,m=51459963,v=7644481,E=7929683,g=51528700,k=51903384,h={VKWebAppAddToCommunity:"add_to_community",VKWebAppAddToCommunityPreload:"get_groups_list",VKWebAppAddToFavorites:"add_to_favorites",VKWebAppAddToFavoritesPreload:"already_added_to_favorites",VKWebAppAddToMenu:"add_to_menu",VKWebAppAddToMenuPreload:"is_in_left_menu",VKWebAppGetCommunityToken:"get_community_token",VKWebAppGetCommunityTokenPreload:"get_community_preload_settings",VKWebAppGetAuthToken:"get_auth_token",VKWebAppGetAuthTokenPreload:"get_auth_token_info",VKWebAppGetPhoneNumber:"get_phone_number",VKWebAppGetPhoneNumberPreload:"already_get_phone_number",VKWebAppGetEmail:"get_email",VKWebAppGetEmailPreload:"already_get_email",VKWebAppGetFriends:"get_friends",VKWebAppAllowNotificationsPreload:"are_notifications_allowed",VKWebAppAllowNotifications:"allow_notifications",VKWebAppDenyNotifications:"deny_notifications",VKWebAppAllowMessagesFromGroup:"allow_messages_from_group",VKWebAppAllowMessagesFromGroupPreload:"can_send_messages_from_group",VKWebAppJoinGroup:"join_group",VKWebAppJoinGroupPreload:"is_group_member",VKWebAppLeaveGroup:"leave_group",VKWebAppLeaveGroupPreload:"is_group_member",VKWebAppOpenApp:"open_app",VKWebAppSendPayload:"send_payload",VKWebAppSendToClient:"send_to_client",VKWebAppSendToClientPreload:"get_open_in_native_permission",VKWebAppShowOrderBox:"order",VKWebAppShowSubscriptionBox:"subscription",VKWebAppShowLeaderBoardBox:"show_leader_board",VKWebAppShowLinkCardBox:"show_link_card",VKWebAppShowNftPaymentBox:"show_nft_pay_box",VKWebAppShowInviteBox:"invite_friends",VKWebAppShowStoryBox:"story_box",VKWebAppShowRequestBox:"send_request",VKWebAppShowRequestBoxPreload:"request_box_preload",VKWebAppStorageGetKeys:"storage_get_keys",VKWebAppStorageSet:"storage_set",VKWebAppStorageGet:"storage_get",VKWebAppOpenArticleEditor:"open_article_edit",VKWebAppSubscribeStoryApp:"subscribe_story_app",VKWebAppClose:"close",VKWebAppGetSilentToken:"get_silent_token",VKWebAppCheckAllowedScopes:"check_allowed_scopes",VKWebAppOpenPayForm:"open_pay_form",VKWebAppCheckSurvey:"check_survey",VKWebAppShowSurvey:"show_survey",VKWebAppAddToChat:"add_to_chat",VKWebAppTrackEvent:"track_event",VKWebAppCallStart:"call_start",VKWebAppCallJoin:"call_join",VKWebAppCallLeft:"call_left",VKWebAppCallFinished:"call_finished",VKWebAppCallGetStatus:"call_get_status",VKWebAppCallStartSharing:"call_start_sharing",VKWebAppCallStopSharing:"call_stop_sharing"},T="vk-sak-sdk",y="mini_apps_long_id",A=256,I=1},57092:(e,t,r)=>{r.d(t,{saveNavigationStatEvent:()=>o});r(8520);var i=r(181938),a=r(856996);let s=[];function o({storyRawId:e,source:t,action:r}){let o=0,n=0;e&&([o,n]=(0,a.splitStoryRawId)(e)),"reply"===t&&(t="replies_list");const c={e:i.STATS_EVENT_TYPE_STORIES_VIEWER_NAVIGATION,owner_id:o,story_id:n,source:t,action:r};s.push(c)}},489617:(e,t,r)=>{r.d(t,{createFriendsAddFx:()=>c,createFriendsAddListFx:()=>u,createFriendsDeleteBulkFx:()=>l,createFriendsDeleteFx:()=>d,createFriendsDeleteListFx:()=>f,createFriendsDeleteSubscriberFx:()=>v,createFriendsEditListFx:()=>S,createFriendsGetCountersFx:()=>k,createFriendsGetFollowersFx:()=>E,createFriendsGetFriendsDeletionSuggestionsFx:()=>o,createFriendsGetFx:()=>s,createFriendsGetListsFx:()=>a,createFriendsGetMutualFx:()=>T,createFriendsGetOnlineFx:()=>_,createFriendsGetRecentFx:()=>h,createFriendsGetRecommendationsFx:()=>n,createFriendsGetRequestsFx:()=>p,createFriendsRequestsToSubscribersFx:()=>g,createFriendsSearchFx:()=>m});var i=r(66044);const a=e=>(0,i.createApiEffect)("friends.getLists",e),s=e=>(0,i.createApiEffect)("friends.get",e),o=e=>(0,i.createApiEffect)("friends.getFriendsDeletionSuggestions",e),n=e=>(0,i.createApiEffect)("friends.getRecommendations",e),c=e=>(0,i.createApiEffect)("friends.add",e),d=e=>(0,i.createApiEffect)("friends.delete",e),l=e=>(0,i.createApiEffect)("friends.deleteBulk",e),p=e=>(0,i.createApiEffect)("friends.getRequests",e),_=e=>(0,i.createApiEffect)("friends.getOnline",e),u=e=>(0,i.createApiEffect)("friends.addList",e),f=e=>(0,i.createApiEffect)("friends.deleteList",e),S=e=>(0,i.createApiEffect)("friends.editList",e),m=e=>(0,i.createApiEffect)("friends.search",e),v=e=>(0,i.createApiEffect)("friends.deleteSubscriber",e),E=e=>(0,i.createApiEffect)("friends.getFollowers",e),g=e=>(0,i.createApiEffect)("friends.requestsToSubscribers",e),k=e=>(0,i.createApiEffect)("friends.getCounters",e),h=e=>(0,i.createApiEffect)("friends.getRecent",e),T=e=>(0,i.createApiEffect)("friends.getMutual",e)},455234:(e,t,r)=>{r.d(t,{createGroupsEditFx:()=>n,createGroupsGetByIdFx:()=>a,createGroupsGetMembersFx:()=>p,createGroupsInviteFx:()=>d,createGroupsIsMemberFx:()=>c,createGroupsJoinFx:()=>s,createGroupsLeaveFx:()=>o,createGroupsRecallInvitationFx:()=>l});var i=r(66044);const a=e=>(0,i.createApiEffect)("groups.getById",e),s=e=>(0,i.createApiEffect)("groups.join",e),o=e=>(0,i.createApiEffect)("groups.leave",e),n=e=>(0,i.createApiEffect)("groups.edit",e),c=e=>(0,i.createApiEffect)("groups.isMember",e),d=e=>(0,i.createApiEffect)("groups.invite",e),l=e=>(0,i.createApiEffect)("groups.recallInvitation",e),p=e=>(0,i.createApiEffect)("groups.getMembers",e)},171988:(e,t,r)=>{r.d(t,{FriendsFriendStatusStatusEnumNames:()=>i});const i={NOT_A_FRIEND:0,OUTCOMING_REQUEST:1,INCOMING_REQUEST:2,IS_FRIEND:3}},787654:(e,t,r)=>{r.d(t,{apiAudioToAudioTuple:()=>c});var i=r(7144),a=r(8520),s=r(496936),o=r(205504);const n=new WeakMap,c=(e,{useCache:t=!1}={})=>{if(!e)return null;if(t){const t=n.get(e);if(t)return t}const r=[e.id,e.owner_id,e.url||"",(0,i.clean)(e.title),(0,i.clean)(e.artist||e.performer||""),e.duration,e.album_id||0,0,"",e.lyrics_id||0,0,"",d(e),(0,s.getAudioHashesString)({addHash:e.access_key,editHash:e.access_key,actionHash:e.access_key,deleteHash:e.access_key,replaceHash:e.access_key,urlHash:e.access_key,restoreHash:e.access_key}),l(e),e.ads||{},(0,i.clean)(e.subtitle||""),e.main_artists||"",e.featured_artists||"",!!e.album&&[e.album?.owner_id,e.album?.id,e.album?.access_key],e.track_code||"",e.content_restricted||0,e.album_part_number||0,!0,e.access_key||"",e.audio_chart_info||!1,e.release_audio_id||""];return t&&n.set(e,r),r};function d(e){const{podcast_info:t}=e,r=Boolean(t);return{podcast:r,dislike:e.dislike,fave:r&&Boolean(t?.is_favorite)}}function l(e){const{podcast_info:t,album:r}=e;if(t){const e=t.cover;return e?.sizes&&(0,a.getPhotoSize)(e.sizes||[],(0,o.getImageMinWidth)(40))?.url||""}const i=r?.thumb;return i?i.sizes?(0,a.getPhotoSize)(i.sizes||[],(0,o.getImageMinWidth)(200))?.url||"":`${i.photo_300},${i.photo_135}`||"":""}},913246:(e,t,r)=>{r.d(t,{AUDIO_PLAYER_ADAPTER_HASHES_SEPARATOR:()=>i});const i="/"},496936:(e,t,r)=>{r.d(t,{getAudioHashesString:()=>a});var i=r(913246);const a=({addHash:e,editHash:t,actionHash:r,deleteHash:a,replaceHash:s,urlHash:o,restoreHash:n})=>[e||"",t||"",r||"",a||"",s||"",o||"",n||""].join(i.AUDIO_PLAYER_ADAPTER_HASHES_SEPARATOR)},498084:(e,t,r)=>{r.d(t,{connectTrackTmrGroupsJoin:()=>d,groupsJoinAction:()=>l,trackTmrGroupsJoin:()=>n});var i=r(141229),a=r(933052),s=r(32489),o=r(476726);const n=()=>{(0,o.partConfigEnabled)("group_join_track_event_count")&&(0,i.tmrSendTimespentEvent)(i.MY_TRACKER_COUNT_EVENT_IDS.COMMUNITY_SUBSCRIBE)},c=(0,s.createEffect)({name:"fx/track_group_join",handler:n}),d=e=>(0,s.sample)({clock:e.done,target:c}),l=(e,t,r)=>(0,a.api)("groups.join",e,t,r).then((e=>(n(),e)))},175241:(e,t,r)=>{r.d(t,{connectTrackTmrGroupsJoin:()=>i.connectTrackTmrGroupsJoin,groupsJoinAction:()=>i.groupsJoinAction,trackTmrGroupsJoin:()=>i.trackTmrGroupsJoin});var i=r(498084)},503050:(e,t,r)=>{r.d(t,{createCacheService:()=>a});var i=r(94359);const a=e=>{const t=(0,i.getEffectorServiceDomain)(e),r=Object.create(null),a=t.createStore(Object.create(null)),s=t.createEvent("add"),o=t.createEvent("delete");return a.on(s,((e,{key:t,data:r})=>(e[t]=r,e))).on(o,((e,t)=>(delete e[t],e))),{$cache:a,add:s,delete:o,get:e=>a.getState()[e]||null,isWaited:e=>void 0!==r[e],getWaited:e=>r[e],setWaited:(e,t)=>{r[e]=t},deleteWaited:e=>{delete r[e]}}}},399017:(e,t,r)=>{r.d(t,{createOwnerService:()=>a.createOwnerService,createUserService:()=>i.createUserService});var i=r(667020),a=r(249986)},249986:(e,t,r)=>{r.d(t,{createOwnerService:()=>l});var i=r(32489),a=r(793656),s=r(388078),o=r(503050),n=r(94359),c=r(901219);const d=(0,o.createCacheService)(),l=e=>{const t=e.fields||[],r=(0,n.getEffectorServiceDomain)(e),o=r.createStore({id:0}),l=r.createEvent("initialize"),p=r.createEvent("reload"),_=r.createEffect({name:"initializeFx"}),u=_.pending,f=_.doneData;return _.use((({ownerId:e,useCache:r})=>{if(r){const r=d.get(e);if(r){if(t.every((e=>r.hasOwnProperty(e))))return Promise.resolve(r)}}if(d.isWaited(e)){const r=d.getWaited(e).find((e=>t.every((t=>Boolean(e.fields[t])))));if(r)return r.promise.finally((()=>{d.deleteWaited(e)})),r.promise}let i=s.Ranges.isGroupId(e)?(0,a.apiWithPrefetch)("groups.getById",{group_ids:String(e),fields:t.join(",")}).then((t=>t.groups?.[0]||{id:e})):(0,a.apiWithPrefetch)("users.get",{user_ids:String(e),fields:t.join(",")}).then((e=>e[0]));const o={fields:t.reduce(((e,t)=>(e[t]=!0,e)),{}),promise:i},n=d.isWaited(e)?[...d.getWaited(e),o]:[o];return d.setWaited(e,n),i})),(0,i.sample)({clock:l,source:o,filter:(e,t)=>e.id!==t,fn:(t,r)=>({ownerId:r,useCache:Boolean(e?.useCache)}),target:_}),(0,i.sample)({clock:p,source:o,fn:e=>({ownerId:e.id}),target:_}),(0,i.sample)({clock:_.doneData,target:o}),(0,i.sample)({clock:_.doneData,filter:()=>Boolean(e?.useCache),fn:e=>{const t=d.get(e.id);if(t){if((0,c.isOwnerUser)(t)&&(0,c.isOwnerUser)(e))return{key:e.id,data:{...t,...e}};if((0,c.isOwnerGroup)(t)&&(0,c.isOwnerGroup)(e))return{key:e.id,data:{...t,...e}}}return{key:e.id,data:e}},target:d.add}),{$isInitializing:u,$owner:o,initialize:l,onInitialized:f,reload:p}}},667020:(e,t,r)=>{r.d(t,{createUserService:()=>o});var i=r(32489),a=r(933052),s=r(793656);const o=({domain:e})=>{const t=(e,t)=>!(!e||e.id!==t.userId),r=e.createStore(null),o=e.createEffect((({params:e})=>(0,s.apiWithPrefetch)("users.get",e))),n=e.createEffect((async e=>({userId:e.params.owner_id,response:await(0,a.api)("wall.subscribe",e.params)}))),c=e.createEffect((async e=>({userId:e.params.owner_id,response:await(0,a.api)("wall.unsubscribe",e.params)}))),d=e.createEffect((async e=>({userId:e.params.owner_id,response:await(0,a.api)("video.liveSubscribe",e.params)}))),l=e.createEffect((async e=>({userId:e.params.owner_id,response:await(0,a.api)("video.liveUnsubscribe",e.params)}))),p=e.createEffect((async e=>({userId:e.params.user_id,response:await(0,a.api)("fave.addUser",e.params)}))),_=e.createEffect((async e=>({userId:e.params.user_id,response:await(0,a.api)("fave.removeUser",e.params)}))),u=e.createEffect((async e=>({userId:e.params.owner_id,response:await(0,a.api)("account.ban",e.params)}))),f=e.createEffect((async e=>({userId:e.params.owner_id,response:await(0,a.api)("account.unban",e.params)}))),S=e.createEffect((async e=>({userId:e.params.user_id,response:await(0,a.api)("bestFriends.add",e.params)}))),m=e.createEffect((async e=>({userId:e.params.user_id,response:await(0,a.api)("bestFriends.delete",e.params)})));return(0,i.sample)({clock:o.doneData,fn:e=>e[0]||null,target:r}),(0,i.sample)({clock:n.doneData,source:r,filter:t,fn:e=>({...e,is_subscribed:1}),target:r}),(0,i.sample)({clock:c.doneData,source:r,filter:t,fn:e=>({...e,is_subscribed:0}),target:r}),(0,i.sample)({clock:d.doneData,source:r,filter:t,fn:e=>({...e,video_live:e.video_live?{...e.video_live,is_notifications_blocked:0}:void 0}),target:r}),(0,i.sample)({clock:l.doneData,source:r,filter:t,fn:e=>({...e,video_live:e.video_live?{...e.video_live,is_notifications_blocked:1}:void 0}),target:r}),(0,i.sample)({clock:p.doneData,source:r,filter:t,fn:e=>({...e,is_favorite:1}),target:r}),(0,i.sample)({clock:_.doneData,source:r,filter:t,fn:e=>({...e,is_favorite:0}),target:r}),(0,i.sample)({clock:u.doneData,source:r,filter:t,fn:e=>({...e,blacklisted_by_me:1}),target:r}),(0,i.sample)({clock:f.doneData,source:r,filter:t,fn:e=>({...e,blacklisted_by_me:0}),target:r}),(0,i.sample)({clock:S.doneData,source:r,filter:t,fn:e=>({...e,is_best_friend:!0}),target:r}),(0,i.sample)({clock:m.doneData,source:r,filter:t,fn:e=>({...e,is_best_friend:!1}),target:r}),{fetchUserFx:o,subscribeToPostsFx:n,unsubscribeFromPostsFx:c,subscribeToVideoLiveFx:d,unsubscribeFromVideoLiveFx:l,faveAddUserFx:p,faveRemoveUserFx:_,accountBanFx:u,accountUnbanFx:f,bestFriendAddFx:S,bestFriendDeleteFx:m,$user:r,domain:e}}},347636:(e,t,r)=>{r.d(t,{apiFaveAddNarrative:()=>a,apiFaveRemoveNarrative:()=>s});var i=r(933052);function a(e){return(0,i.api)("fave.addNarrative",e)}function s(e){return(0,i.api)("fave.removeNarrative",e)}},898675:(e,t,r)=>{r.d(t,{createFaveService:()=>s});var i=r(32489),a=r(347636);const s=({domain:e})=>{const t=e.createEvent("fire/faveAddNarrative"),r=e.createEvent("fire/faveRemoveNarrative"),s=e.createEffect("fx/faveAddNarrative"),o=e.createEffect("fx/faveRemoveNarrative");return s.use(a.apiFaveAddNarrative),o.use(a.apiFaveRemoveNarrative),(0,i.sample)({clock:t,target:s}),(0,i.sample)({clock:r,target:o}),{fireAddNarrative:t,fireRemoveNarrative:r,addNarrativeFx:s,removeNarrativeFx:o}}},51308:(e,t,r)=>{r.d(t,{findOwnerById:()=>s,isGroup:()=>a});var i=r(847891);function a(e){return i.Ranges.isGroupId(e.id)}const s=(e=0,t=[],r=[])=>{if(e)return i.Ranges.isUserId(e)?t.find((t=>t?.id===e)):r.find((t=>t?.id===Math.abs(e)))}},303568:(e,t,r)=>{var i,a,s,o,n;r.d(t,{DynamicStickersTypes:()=>d,StickerTypes:()=>c,StoryBlockType:()=>o,StoryEntryPoint:()=>a,StoryListName:()=>n,StoryPollBackgroundType:()=>u,StorySource:()=>s,StoryStickerSubtype:()=>l,StoryType:()=>i,dynamicStickerIds:()=>p,staticStickerIds:()=>_}),function(e){e.PHOTO="photo",e.VIDEO="video",e.LIVE="live"}(i||(i={})),function(e){e.SWIPE="swipe",e.NAVIGATION_BUTTON="navigation_button",e.SIT_POSTING="sit_posting",e.LINK="link",e.STORY_REPLY="story_reply",e.STORY_REPOST="story_repost",e.CATALOG_ADD="catalog_add",e.DIALOG="dialog",e.STORY_LIVE_FINISHED="story_live_finished",e.DIALOG_VKME="dialog_vkme",e.STORY_VIEWER_FINISHED="story_viewer_finished",e.PUSH_TRY_MASK="push_try_mask",e.STORY_VIEWER_TRY_MASK="story_viewer_try_mask",e.LINK_MASK="link_mask",e.POSTING="posting",e.NEW_STORY_AVATAR="new_story_avatar",e.STORY_REPLIES_LIST="story_replies_list",e.STORIES_FEED="stories_feed",e.STORIES_SEARCH_NEWS="stories_search_news",e.QUESTION_STICKER="question_sticker",e.LIST_MIDDLE="list_middle",e.ARCHIVE_EMPTY_BUTTON="archive_empty_button",e.ARCHIVE_MENU_BUTTON="archive_menu_button",e.IM="im",e.PROFILE_BUTTON="profile_button",e.SHARE="share",e.MINI_APP="mini_app",e.SYSTEM_SHARING="system_sharing",e.SHORTCUT="shortcut",e.ARCHIVE_SHARING="archive_sharing",e.STORY_VIEWER_CAMERA_BUTTON="story_viewer_camera_button",e.STORY_VIEWER_MUSIC="story_viewer_music",e.STORY_VIEWER_MUSIC_SHEET="story_viewer_music_sheet",e.REPOST_TO_STORY_ACTIVITY="repost_to_story_activity",e.CHANGE_AVATAR="change_avatar"}(a||(a={})),function(e){e.FEED="feed",e.FEED_MIDDLE="feed_middle",e.LINK="link",e.PROFILE="profile",e.IM_DIALOGS="im_dialogs",e.IM_DIALOG_HEADER="im_dialog_header",e.SNIPPET="snippet",e.REPLY="reply",e.REPLIES_LIST="replies_list",e.REPLY_STORY="reply_story",e.DISCOVER="discover",e.STORIES_MANAGE="stories_manage",e.USER_PERSONAL_CARD="user_personal_card",e.GROUP_PERSONAL_CARD="group_personal_card",e.NARRATIVE_SNIPPET="narrative_snippet",e.NARRATIVE_STORY="narrative_story",e.NARRATIVE_LINK="narrative_link",e.NARRATIVE_RECOMMENDATIONS="narrative_recommendations",e.NARRATIVE_SECTION="narrative_section",e.FAVE="fave",e.SPAMFEED="sf",e.ADS_PREVIEW="ads_preview",e.LIST_MIDDLE="list_middle",e.PLACE_STORY_LIST="place_story_list",e.SEARCH_STORY_LIST="search_story_list",e.STORY_ARCHIVE="story_archive",e.IM_MSG_LIST="im_msg_list",e.NOSPAM="nospam",e.PROFILE_SNACKBAR="profile_snackbar",e.MY_QUESTIONS="question_story"}(s||(s={})),function(e){e.stories="stories",e.appGroupedStories="app_grouped_stories",e.promoStories="promo_stories",e.discover="discover",e.liveActive="live_active",e.liveFinished="live_finished"}(o||(o={})),function(e){e.feed="feed",e.apps="apps",e.discover="discover"}(n||(n={}));const c={hashtag:1,mention:2,question:3,place:4,music:5,storyReply:6,owner:7,link:8,marketItem:9,post:10,poll:11,sticker:12,app:13,situationalTheme:14,playlist:15,videoButton:16,situationalTemplate:17,spoiler:18},d={situationalTemplate:c.situationalTemplate};var l;!function(e){e.aliexpress="aliexpress_product",e.market="market_item"}(l||(l={}));const p=Object.values(d),_=Object.values(c).filter((e=>!p.includes(e)));var u;!function(e){e.photo="photo",e.gradient="gradient",e.default="default"}(u||(u={}))},253800:(e,t,r)=>{r.d(t,{apiLikesAdd:()=>a,apiLikesDelete:()=>s});var i=r(933052);function a(e){return(0,i.api)("likes.add",e)}function s(e){return(0,i.api)("likes.delete",e)}},417501:(e,t,r)=>{var i;!function(e){e.Story="story"}(i||(i={}))},230752:(e,t,r)=>{r.d(t,{createLikesService:()=>i.createLikesService});var i=r(720207);r(417501)},720207:(e,t,r)=>{r.d(t,{createLikesService:()=>s});var i=r(32489),a=r(253800);const s=({domain:e})=>{const t=e.createEvent("fire/likesAdd"),r=e.createEvent("fire/likesDelete"),s=e.createEffect("fx/likesAdd"),o=e.createEffect("fx/likesDelete");return s.use(a.apiLikesAdd),o.use(a.apiLikesDelete),(0,i.sample)({clock:t,target:s}),(0,i.sample)({clock:r,target:o}),{fireAdd:t,fireDelete:r,addFx:s,deleteFx:o}}},571144:(e,t,r)=>{r.d(t,{apiMessagesSend:()=>a});var i=r(933052);function a(e){return(0,i.api)("messages.send",e)}},845167:(e,t,r)=>{r.d(t,{createMessagesService:()=>s});var i=r(32489),a=r(571144);const s=({domain:e})=>{const t=e.createEvent("fire/messageSend"),r=e.createEffect("fx/messageSend");return r.use(a.apiMessagesSend),(0,i.sample)({clock:t,target:r}),{fireMessagesSend:t,sendFx:r}}},904919:(e,t,r)=>{r.d(t,{apiNarrativesBatchEdit:()=>o,apiNarrativesCreate:()=>a,apiNarrativesDelete:()=>n,apiNarrativesEdit:()=>s,apiNarrativesGetById:()=>c,apiNarrativesGetFeedBlock:()=>d,apiNarrativesGetFromOwner:()=>l,apiNarrativesReorder:()=>_,apiNarrativesSaveCustomCover:()=>p});var i=r(933052);function a(e){return(0,i.api)("narratives.create",e)}function s(e){return(0,i.api)("narratives.edit",e)}function o(e){return(0,i.api)("narratives.batchEdit",e)}function n(e){return(0,i.api)("narratives.delete",e)}function c(e){return(0,i.api)("narratives.getById",e)}function d(e={}){return(0,i.api)("narratives.getFeedBlock",e)}function l(e){return(0,i.api)("narratives.getFromOwner",e)}function p(e){return(0,i.api)("narratives.saveCustomCover",e)}function _(e){return(0,i.api)("narratives.reorder",e)}},404440:(e,t,r)=>{r.d(t,{createNarrativesService:()=>s});var i=r(32489),a=r(904919);const s=({domain:e})=>{const t=e.createEvent("fire/narrativesGetById"),r=e.createEvent("fire/narrativesGetFromOwner"),s=e.createEvent("fire/narrativesGetFeedBlock"),o=e.createEvent("fire/narrativesCreate"),n=e.createEvent("fire/narrativesEdit"),c=e.createEvent("fire/narrativesBatchEdit"),d=e.createEvent("fire/narrativesDelete"),l=e.createEvent("fire/narrativesSaveCustomCover"),p=e.createEvent("fire/narrativesReorder"),_=e.createEffect("fx/narrativesGetById"),u=e.createEffect("fx/narrativesGetFromOwner"),f=e.createEffect("fx/narrativesGetFeedBlock"),S=e.createEffect("fx/narrativesCreate"),m=e.createEffect("fx/narrativesEdit"),v=e.createEffect("fx/narrativesBatchEdit"),E=e.createEffect("fx/narrativesDelete"),g=e.createEffect("fx/narrativesSaveCustomCover"),k=e.createEffect("fx/narrativesReorder");return _.use(a.apiNarrativesGetById),u.use(a.apiNarrativesGetFromOwner),f.use(a.apiNarrativesGetFeedBlock),S.use(a.apiNarrativesCreate),m.use(a.apiNarrativesEdit),v.use(a.apiNarrativesBatchEdit),E.use(a.apiNarrativesDelete),g.use(a.apiNarrativesSaveCustomCover),k.use(a.apiNarrativesReorder),(0,i.sample)({clock:t,target:_}),(0,i.sample)({clock:r,target:u}),(0,i.sample)({clock:s,target:f}),(0,i.sample)({clock:o,target:S}),(0,i.sample)({clock:n,target:m}),(0,i.sample)({clock:c,target:v}),(0,i.sample)({clock:d,target:E}),(0,i.sample)({clock:l,target:g}),(0,i.sample)({clock:p,target:k}),{fireGetById:t,fireGetFromOwner:r,fireGetFeedBlock:s,fireCreate:o,fireEdit:n,fireBatchEdit:c,fireDelete:d,fireSaveCustomCover:l,fireReorder:p,getByIdFx:_,getFromOwnerFx:u,getFeedBlockFx:f,createFx:S,editFx:m,batchEditFx:v,deleteFx:E,saveCustomCoverFx:g,reorderFx:k}}},923110:(e,t,r)=>{r.d(t,{PHOTO_ALBUM_COVER_MIN_WIDTH:()=>i,getPhotoSize:()=>a});const i=200;function a(e,t){if(!e?.sizes?.length)return"";const r=[...e.sizes].sort(((e,t)=>e.width-t.width));let i=r.find((e=>e.width>=t));return i?.url?i.url:(i=r.reverse().find((e=>e.width<t)),i?.url?i.url:"")}},627086:(e,t,r)=>{r.d(t,{apiPollsCreate:()=>s,apiPollsGetById:()=>a});var i=r(933052);function a(e){return(0,i.api)("polls.getById",e)}function s(e){return(0,i.api)("polls.create",e)}},952597:(e,t,r)=>{r.d(t,{createPollsService:()=>s});var i=r(32489),a=r(627086);const s=({domain:e})=>{const t=e.createEvent("fire/pollsGetById"),r=e.createEvent("fire/pollsCreate"),s=e.createEffect("fx/pollsGetById"),o=e.createEffect("fx/pollsCreate");return s.use(a.apiPollsGetById),o.use(a.apiPollsCreate),(0,i.sample)({clock:t,target:s}),(0,i.sample)({clock:r,target:o}),{fireGetById:t,fireCreate:r,getByIdFx:s,createFx:o}}},298737:(e,t,r)=>{r.d(t,{HIDE_TOOLTIP_TIMEOUT:()=>i,OPENED_REACTED_USERS_DEFAULT_REACTION_ID:()=>l,REACTION_ID_DEFAULT:()=>s,REACTION_ID_MAX:()=>o,REACTION_ID_MIN:()=>n,REACTION_ID_UNSET:()=>c,REACTION_SET_ITEMS_MIN_COUNT:()=>d,SHOW_TOOLTIP_TIMEOUT:()=>a});const i=600,a=140,s=0,o=7,n=0,c=void 0,d=2,l=s},109971:(e,t,r)=>{r.d(t,{reactionCountsBrandUnwrap:()=>a,reactionCountsBrandWrap:()=>s});var i=r(93092);const a=e=>(0,i.unwrap)(e),s=e=>(0,i.wrap)(e)},198882:(e,t,r)=>{r.d(t,{areCountersEqual:()=>I,calcCounters:()=>k,calcCountersSum:()=>h,calcCountersWeightedSum:()=>T,counterForReactionId:()=>A,getDefaultReaction:()=>d,getDefaultReactionTitle:()=>l,getReaction:()=>c,hasReactionsForCounts:()=>y,isReactionIdSet:()=>u,isReactionIdUnset:()=>f,isUnknownObject:()=>n,isValidReactionId:()=>S,parseReactionId:()=>m,parseReactionIdOrUnset:()=>v,parseReactionMenuConfig:()=>g,prepareReactionMenuSet:()=>_,validateReactionSetPayloaditems:()=>E});var i=r(298737),a=r(109971),s=r(8520);const o=Number.isInteger||(e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e),n=e=>null!==e&&"object"==typeof e,c=(e,t)=>e.itemsById[t],d=e=>c(e,i.REACTION_ID_DEFAULT),l=e=>d(e)?.title,p=(e,t)=>0===e.length?"":((e,t,r=!0)=>e.reduce(((e,i)=>{const a=t(i),s=t(e);return s===a?r?e:i:s<a?e:i})))(e,(e=>(t.width-e.width)**2+(t.height-e.height)**2),!1).url,_=(e,t,r)=>{const i=t.map((({asset:e,color_sets:t,id:i,score:a,title:s})=>({animationURL:e.animation_url||void 0,backgroundColor:t?.background,id:i,imageMenuURL:p(e.images,r.imageMenuSize),imagePreviewURL:"imagePreviewSize"in r?p(e.images,r.imagePreviewSize):void 0,imageStoryPanelURL:"imageStoryPanelSize"in r?p(e.images,r.imageStoryPanelSize):void 0,imageStoryPreviewURL:"imageStoryPreviewSize"in r?p(e.images,r.imageStoryPreviewSize):void 0,score:a,title:s,titleColor:t?.foreground}))),a={};return i.forEach((e=>{a[e.id]=e})),{id:e,items:i,itemsById:a}},u=e=>e!==i.REACTION_ID_UNSET,f=e=>e===i.REACTION_ID_UNSET,S=e=>o(e)&&e>=i.REACTION_ID_MIN&&e<=i.REACTION_ID_MAX,m=e=>{const t=parseInt(e,10);return S(t)?{isValid:!0,value:t}:{isValid:!1}},v=e=>{const t=m(e);return t.isValid?t.value:i.REACTION_ID_UNSET},E=(e,t)=>{if(e.length<i.REACTION_SET_ITEMS_MIN_COUNT)return{error:new Error(`Invalid reactions items count in set '${t}': ${e.length}`)}},g=e=>{if(!n(e))return;const t={},{animationShowStaticAfterEnd:r,menuShowDelay:a,openedDefaultReactionId:s,reportJsErrors:o}=e;return"number"!=typeof a&&void 0!==a||(t.menuShowDelay=a),"boolean"==typeof r&&(t.animationShowStaticAfterEnd=r),"boolean"==typeof o&&(t.reportJsErrors=o),"number"==typeof s||null===s?null===s?t.openedDefaultReactionId=void 0:S(s)&&(t.openedDefaultReactionId=s):t.openedDefaultReactionId=i.OPENED_REACTED_USERS_DEFAULT_REACTION_ID,t},k=(e,t)=>{const r=(0,a.reactionCountsBrandWrap)({});return Object.entries((0,a.reactionCountsBrandUnwrap)(e)).forEach((([e,i])=>{const a=e,s=t?.itemsById?.[a]?.score??1;r[a]=s*(i||0)})),r},h=e=>Object.values((0,a.reactionCountsBrandUnwrap)(e)).reduce(((e,t)=>e+(t||0)),0),T=e=>h((0,a.reactionCountsBrandWrap)(e)),y=e=>h(e)>0,A=(e,t)=>e[t]??void 0,I=(e,t)=>e&&t?(0,s.isEqual)(e,t):e===t},93092:(e,t,r)=>{r.d(t,{unwrap:()=>i,wrap:()=>a});const i=e=>e,a=e=>e},482567:(e,t,r)=>{r.d(t,{apiStatsTrackEvents:()=>a});var i=r(933052);function a(e){return(0,i.api)("stats.trackEvents",e)}},181938:(e,t,r)=>{r.d(t,{STATS_EVENT_TYPE_STORIES_VIEWER_NAVIGATION:()=>i,STATS_EVENT_TYPE_STORIES_VIEWING_START_TIME:()=>a,STATS_EVENT_TYPE_STORY_LINK_VIEW:()=>s,STATS_EVENT_TYPE_VIDEO_ONBOARDING:()=>o});const i="stories_viewer_navigation",a="stories_viewing_start_time",s="story_link_view",o="video_onboarding"},258504:(e,t,r)=>{r.d(t,{createStatsService:()=>s});var i=r(32489),a=r(482567);const s=({domain:e})=>{const t=e.createEvent("fire/statsTrackEvents"),r=e.createEffect("fx/statsTrackEvents");return r.use(a.apiStatsTrackEvents),(0,i.sample)({clock:t,target:r}),{fireTrackEvents:t,trackEventsFx:r}}},124401:(e,t,r)=>{r.d(t,{apiStoriesAskQuestion:()=>h,apiStoriesBanOwner:()=>N,apiStoriesBanQuestionAuthor:()=>y,apiStoriesDelete:()=>k,apiStoriesDeleteQuestion:()=>T,apiStoriesGet:()=>s,apiStoriesGetArchive:()=>d,apiStoriesGetById:()=>n,apiStoriesGetDetailedStats:()=>f,apiStoriesGetDiscover:()=>c,apiStoriesGetPhotoUploadServer:()=>w,apiStoriesGetQuestions:()=>_,apiStoriesGetReplies:()=>p,apiStoriesGetStats:()=>u,apiStoriesGetVideoUploadServer:()=>R,apiStoriesGetViewers:()=>l,apiStoriesGetWithPrefetch:()=>o,apiStoriesHideAllReplies:()=>D,apiStoriesHidePrivacyBlock:()=>g,apiStoriesHideReply:()=>P,apiStoriesMarkAppNotificationsSeen:()=>I,apiStoriesMarkNotInterested:()=>m,apiStoriesMarkSeen:()=>E,apiStoriesMarkSkipped:()=>S,apiStoriesSave:()=>O,apiStoriesSearch:()=>v,apiStoriesSetDiscoverVisible:()=>x,apiStoriesSubscribeUserToApp:()=>b,apiStoriesUnbanOwner:()=>F,apiStoriesUnbanQuestionAuthor:()=>A});var i=r(933052),a=r(793656);function s(e){return(0,i.api)("stories.get",e)}function o(e){return(0,a.apiWithPrefetch)("stories.get",e)}function n(e){return(0,i.api)("stories.getById",e)}function c(e){return(0,i.api)("stories.getDiscover",e)}function d(e){return(0,i.api)("stories.getArchive",e)}function l(e){return(0,i.api)("stories.getViewers",e)}function p(e){return(0,i.api)("stories.getReplies",e)}function _(e){return(0,i.api)("stories.getQuestions",e)}function u(e){return(0,i.api)("stories.getStats",e)}function f(e){return(0,i.api)("stories.getDetailedStats",e)}function S(e){return(0,i.api)("stories.markSkipped",e)}function m(e){return(0,i.api)("stories.markNotInterested",e)}function v(e){return(0,i.api)("stories.search",e)}function E(e){return(0,i.api)("stories.markSeen",e)}function g(e){return(0,i.api)("stories.hidePrivacyBlock",e)}function k(e){return(0,i.api)("stories.delete",e)}function h(e){return(0,i.api)("stories.askQuestion",e)}function T(e){return(0,i.api)("stories.deleteQuestion",e)}function y(e){return(0,i.api)("stories.banQuestionAuthor",e)}function A(e){return(0,i.api)("stories.unbanQuestionAuthor",e)}function I(e){return(0,i.api)("stories.markAppNotificationsSeen",e)}function b(e){return(0,i.api)("stories.subscribeUserToApp",e)}function w(e){return(0,i.api)("stories.getPhotoUploadServer",e)}function R(e){return(0,i.api)("stories.getVideoUploadServer",e)}function O(e){return(0,i.api)("stories.save",e)}function N(e){return(0,i.api)("stories.banOwner",e)}function F(e){return(0,i.api)("stories.unbanOwner",e)}function x(e){return(0,i.api)("stories.setDiscoverVisible",e)}function P(e){return(0,i.api)("stories.hideReply",e)}function D(e){return(0,i.api)("stories.hideAllReplies",e)}},371164:(e,t,r)=>{r.d(t,{STORIES_ARCHIVE_START_TIME:()=>s,STORIES_EDITOR_FONTS:()=>o,STORIES_MAX_COUNT_REPLIES:()=>a});var i=r(610989);const a=250,s=1559032200,o=[{label:i.getLang("stories_creator_text_label_modern"),fontFamily:"TT Firs Neue"},{label:i.getLang("stories_creator_text_label_playful"),fontFamily:"TT Knickerbockers Script"},{label:i.getLang("stories_creator_text_label_aesthetic"),fontFamily:"TT Knickerbockers Grotesk"},{label:i.getLang("stories_creator_text_label_dynamic"),fontFamily:"TT Commons",fontStyle:"italic"},{label:i.getLang("stories_creator_text_label_classic"),fontFamily:"TT Barrels Trl"},{label:i.getLang("stories_creator_text_label_elegant"),fontFamily:"TT Barrels Trl",fontStyle:"italic"},{label:i.getLang("stories_creator_text_label_rounded"),fontFamily:"TT Rounds Neue",textTransform:"uppercase"},{label:i.getLang("stories_creator_text_label_standard"),fontFamily:"TT Commons"},{label:i.getLang("stories_creator_text_label_handwritten"),fontFamily:"TT Lovelies Script"},{label:i.getLang("stories_creator_text_label_bookish"),fontFamily:"TT Phobos"}]},592238:(e,t,r)=>{r.d(t,{StoryFeedbackLoadMethods:()=>i,fetchFeedbackFx:()=>n,getStoryFeedbackLoadParams:()=>o});var i,a=r(666376),s=r(483534);!function(e){e[e.getViewers=0]="getViewers",e[e.getReplies=1]="getReplies",e[e.getQuestions=2]="getQuestions",e[e.getDetailedStats=3]="getDetailedStats"}(i||(i={}));const o=(e,t)=>({0:{owner_id:e,story_id:t,extended:1,count:100,fields:(0,s.makeOwnerFields)(["photo_100","photo_50"])},1:{owner_id:e,story_id:t,extended:1,fields:(0,s.getStoryOwnerFields)()},2:{owner_id:e,story_id:t,extended:1,fields:(0,s.makeOwnerFields)(["domain","first_name_dat","first_name_ins","last_name_ins","last_name_dat","first_name_gen","last_name_gen"]),count:100},3:{owner_id:e,story_id:t}}),n=a.storiesDomain.createEffect({name:"fire/storiesGetFeedback",handler:({ownerId:e,storyId:t,pollId:r})=>{const i=o(e,t);return Promise.allSettled([a.storiesService.getViewersFx(i[0]),a.storiesService.getRepliesFx(i[1]),a.storiesService.getQuestionsFx(i[2]),r?a.pollsService.getByIdFx({owner_id:e,poll_id:r}):Promise.resolve(null),a.storiesService.getDetailedStatsFx(i[3])]).then((e=>e.map((e=>"fulfilled"===e.status?e?.value:null))))}})},535277:(e,t,r)=>{r.d(t,{STORIES_ARCHIVE_START_TIME:()=>n.STORIES_ARCHIVE_START_TIME,STORIES_EDITOR_FONTS:()=>n.STORIES_EDITOR_FONTS,STORIES_MAX_COUNT_REPLIES:()=>n.STORIES_MAX_COUNT_REPLIES,StoryFeedbackLoadMethods:()=>d.StoryFeedbackLoadMethods,apiStoriesGet:()=>o.apiStoriesGet,apiStoriesGetArchive:()=>o.apiStoriesGetArchive,apiStoriesGetById:()=>o.apiStoriesGetById,apiStoriesGetDiscover:()=>o.apiStoriesGetDiscover,apiStoriesGetReplies:()=>o.apiStoriesGetReplies,apiStoriesGetWithPrefetch:()=>o.apiStoriesGetWithPrefetch,apiStoriesSearch:()=>o.apiStoriesSearch,createStoriesService:()=>i.createStoriesService,decodeBase64:()=>a.decodeBase64,faveService:()=>c.faveService,fetchFeedbackFx:()=>d.fetchFeedbackFx,getStoryFeedbackLoadParams:()=>d.getStoryFeedbackLoadParams,narrativesService:()=>c.narrativesService,saveNavigationStatEvent:()=>s.saveNavigationStatEvent,splitStoryRawId:()=>a.splitStoryRawId,statsService:()=>c.statsService,storiesService:()=>c.storiesService,userService:()=>c.userService});var i=r(179258),a=r(856996),s=r(57092),o=r(124401),n=r(371164),c=r(666376),d=r(592238)},256716:(e,t,r)=>{r.d(t,{FEED_STORIES_BLOCK_OWNER_FIELDS:()=>a,FEED_STORIES_BLOCK_OWNER_MINIMIZED_FIELDS:()=>i});const i=["photo_100"],a=["first_name","last_name","first_name_gen","last_name_gen","first_name_ins","last_name_ins","screen_name","name","is_member","is_closed","photo_50","photo_100","photo_200","friend_status","verified","sex"]},483534:(e,t,r)=>{r.d(t,{getStoryOwnerFields:()=>a,makeOwnerFields:()=>s});var i=r(256716);function a(e=!1){return s(e?i.FEED_STORIES_BLOCK_OWNER_MINIMIZED_FIELDS:i.FEED_STORIES_BLOCK_OWNER_FIELDS)}function s(e){return e.join(",")}},800841:(e,t,r)=>{r.d(t,{transformClickableStickers:()=>v});var i=r(8520),a=r(901219),s=r(476726),o=r(340257),n=r(787654),c=r(610989),d=r(923110),l=r(51308),p=r(408063),_=r(303568);const u={hashtag:_.StickerTypes.hashtag,mention:_.StickerTypes.mention,question:_.StickerTypes.question,place:_.StickerTypes.place,music:_.StickerTypes.music,story_reply:_.StickerTypes.storyReply,owner:_.StickerTypes.owner,link:_.StickerTypes.link,market_item:_.StickerTypes.marketItem,post:_.StickerTypes.post,poll:_.StickerTypes.poll,sticker:_.StickerTypes.sticker,app:_.StickerTypes.app,situational_theme:_.StickerTypes.situationalTheme,playlist:_.StickerTypes.playlist,clip:_.StickerTypes.videoButton,situational_template:_.StickerTypes.situationalTemplate,spoiler:_.StickerTypes.spoiler},f={transparent:1,blue_gradient:2,red_gradient:3,underline:4,blue:5,green:6,white:7,question_reply:8,light:9,impressive:10,dark:11,accent_background:12,accent_text:13,dark_unique:14,light_unique:15,light_text:18,dark_text:19,black:20,dark_without_bg:21,light_without_bg:22,rectangle:23,circle:24,poop:25,heart:26,star:27,album:28,horizontal:29,equalizer:30,header_meta:31},S=(e,t=6)=>isNaN(e)?NaN:Number(e.toFixed(t)),m=/^\[(id|club)(\d+)\|(.*)]$/;function v(e,t=[],r=[],v){const E=e?.clickable_stickers;if(!(E&&Object.values(E).length&&E.original_width&&E.original_height))return{original_width:0,original_height:0,stickers:[]};let g=E.original_width,k=E.original_height;Number((k/g).toFixed(2))>1.78&&(k=1.78*g);const h=(E.original_height-k)/2,T=g/100,y=k/100;return{original_width:g,original_height:k,stickers:E?.clickable_stickers?.length?E.clickable_stickers.reduce(((E,g)=>{if(!g)return E;if(v&&"situational_template"===g.type&&!(0,s.partConfigEnabled)("stories_mvk_sticker_template"))return E;if(!v&&"situational_template"===g.type&&!(0,s.partConfigEnabled)("stories_sticker_template"))return E;const{clickable_area:k=[]}=g;if(k.length<4)return E;const A=Math.sqrt(Math.pow(k[1].x-k[0].x,2)+Math.pow(k[1].y-k[0].y,2)),I=Math.sqrt(Math.pow(k[1].x-k[2].x,2)+Math.pow(k[1].y-k[2].y,2));if(!A||!I)return E;const b=k[1].x-k[0].x;let w=180*Math.acos(b/A)/Math.PI;isNaN(w)&&(w=0),k[1].y<k[0].y&&(w=-w);const R=u[g.type],O={id:g.id,type:R,top:S((k[0].y-h)/y/100),left:S(k[0].x/T/100),width:S(A/T/100),height:S(I/y/100),rotate:S(w)};g.style&&(O.style=f[g.style]);let N=!1;switch(R){case _.StickerTypes.hashtag:g.hashtag?O.hashtag=g.hashtag:N=!0;break;case _.StickerTypes.mention:{const e=g.mention?.match(m),i=e?.[1],s=Number(e?.[2]);if(!s||isNaN(s)){N=!0;break}const o="id"===i&&t.find((({id:e})=>e===s)),n=!o&&"club"===i&&r.find((({id:e})=>e===s));o?(O.mentionedPhotoUrl=o.photo_100||o.photo_50||"",O.mentionedOwnerHref=(0,a.getOwnerHref)(o),O.mentionedText=(0,a.getOwnerFullName)(o)):n?(O.mentionedText=n.name||"",O.mentionedPhotoUrl=n.photo_100||n.photo_50||"",O.mentionedOwnerHref=(0,a.getOwnerHref)(n)):N=!0;break}case _.StickerTypes.question:O.question=g.question||"";break;case _.StickerTypes.place:g.place_id?O.placeId=g.place_id:N=!0;break;case _.StickerTypes.music:if(!g.audio){N=!0;break}O.audioId=`${g.audio.owner_id}_${g.audio.id}`,O.audioData=JSON.stringify((0,n.apiAudioToAudioTuple)(g.audio)),g.audio_restrictions&&(O.audioRestriction={code:g.audio_restrictions.id,title:g.audio_restrictions.title,buttonText:g.audio_restrictions.button?.title||"",buttonUrl:g.audio_restrictions.button?.action?.url||""});break;case _.StickerTypes.playlist:if(!g.playlist){N=!0;break}O.playlistOwnerId=g.playlist.owner_id,O.playlistId=g.playlist.id,O.playlistFollowed=Boolean(g.playlist.followed);break;case _.StickerTypes.storyReply:g.owner_id&&(O.ownerId=g.owner_id),O.link=(0,a.getOwnerHref)((0,l.findOwnerById)(g.owner_id,t,r)),g.story_id?O.storyId=g.story_id:O.isExpired=!0;break;case _.StickerTypes.owner:g.owner_id&&(O.ownerId=g.owner_id),O.link=(0,a.getOwnerHref)((0,l.findOwnerById)(g.owner_id,t,r));break;case _.StickerTypes.link:g.link_object?(O.link=g.link_object.url?(0,p.wrapAwayIfExternal)(g.link_object.url):"",O.tooltipText=g.tooltip_text||""):N=!0;break;case _.StickerTypes.marketItem:if(g.subtype===_.StoryStickerSubtype.aliexpress)O.link=g.link_object?.url?(0,p.wrapAwayIfExternal)(g.link_object.url):"",O.photoUrl=g.link_object&&(0,d.getPhotoSize)(g.link_object.photo,50*devicePixelRatio)||"";else if(g.subtype===_.StoryStickerSubtype.market&&g.market_item)if(O.photoUrl=g.market_item.thumb&&(0,i.getPhotoSize)(g.market_item.thumb,50*devicePixelRatio)?.url||"",O.isRestricted=!1,v)O.link=`/product${g.market_item.owner_id}_${g.market_item.id}`;else{const e=(0,a.getOwnerHref)((0,l.findOwnerById)(g.market_item.owner_id,t,r));O.link=`${e}?w=product${g.market_item.owner_id}_${g.market_item.id}`,O.seoSlug=g.market_item.seo_slug}else N=!0;break;case _.StickerTypes.post:g.post_owner_id&&(O.postOwnerId=g.post_owner_id),g.post_id?O.postId=g.post_id:N=!0;break;case _.StickerTypes.poll:g.poll?(O.pollId=g.poll.id,O.pollOwnerId=g.poll.owner_id):N=!0;break;case _.StickerTypes.app:if(!(0,s.partConfigEnabled)("remove_stories_sticker_app")&&g.app){O.appId=g.app.id,O.hasNewInteractions=Boolean(g.has_new_interactions);const t=[e.owner_id,e.id,"story",g.id];g.app_context&&t.push(btoa(g.app_context)),O.appRef=`story${t.join("_")}`}else N=!0;break;case _.StickerTypes.sticker:g.sticker_pack_id?(O.stickerPackId=g.sticker_pack_id,g.sticker_id&&(O.stickerId=g.sticker_id),O.tooltipText=c.getLang("stories_view_sticker_pack")):N=!0;break;case _.StickerTypes.situationalTheme:g.situational_theme_id?(O.situationalAppId=o.SITPOSTING_APP_ID,O.situationalThemeId=g.situational_theme_id):N=!0;break;case _.StickerTypes.videoButton:g.clip_id?(g.owner_id&&(O.videoOwnerId=g.owner_id),O.videoId=g.clip_id,O.videoType=g.type,O.tooltipText=c.getLang("stories_link_attach_clip")):N=!0;break;case _.StickerTypes.situationalTemplate:g.situational_theme_id?(O.situationalAppId=o.SITPOSTING_APP_ID,O.situationalThemeId=g.situational_theme_id,g.situational_replied_users&&(O.situationalRepliedUsers=g.situational_replied_users,O.situationalRepliedAvatars=g.situational_replied_users?.items?.map((e=>{const{photo_100:i}=t.find((t=>t.id===e))||{},{photo_100:a}=r.find((t=>t.id===e))||{},s=i||a;if(s)return{photo_100:s}})).filter((e=>Boolean(e)))||[])):N=!0;break;default:N=!0}return N||E.push(O),E}),[]):[]}}},286776:(e,t,r)=>{r.d(t,{transformDetailedStatsData:()=>p,transformPoll:()=>l,transformStoryQuestions:()=>d});var i=r(610989),a=r(8520),s=r(901219),o=r(303568);const n=(e="",t="")=>e&&t?`${e} ${t}`:e||t,c=(e,t=32)=>(0,a.getPhotoSize)(e??[],t*window.devicePixelRatio),d=(e,t,r=0,i=0)=>(0,a.isArray)(e)&&(0,a.isArray)(t)?e.map((({id:e,is_anonymous:a,question:o,is_owner_blocked:c,is_published:d,owner_id:l})=>{const p=!a&&window.vk.id!=l,_=!a&&window.vk.id!=l,u=t?.find((e=>e?.id===l));return{author:u?{link:(0,s.getOwnerHref)(u),name:(0,s.getOwnerFullName)(u),nameDat:n(u?.first_name_dat,u?.last_name_dat),nameGen:n(u?.first_name_gen,u?.last_name_gen),nameIns:n(u?.first_name_ins,u?.last_name_ins)}:{},canAnswer:p,canBlocked:_,id:e,isAnonymous:a,isOwnerBlocked:c,isPublished:d,ownerId:l,storyId:i,storyOwnerId:r,text:o}})):[],l=e=>{if(!e)return null;const{votes:t,id:r,owner_id:a,question:s,photo:n,background:d,can_vote:l}=e;return{ownerId:a,pollId:r,question:s,votersCountText:t?i.getLang("voting_N_voted",t):i.getLang("voting_nobody_voted"),background:n?{type:o.StoryPollBackgroundType.photo,photoUrl:c(n?.images)?.url||"",backgroundColor:n?.color||""}:"gradient"===d?.type?{type:o.StoryPollBackgroundType.gradient,angle:d.angle||0,color:d.color||"",points:d.points||[]}:{type:o.StoryPollBackgroundType.default},needShowResults:!l}},p=e=>e?{preview:e.preview||"",achievement:e.achievement||"",achievementSubtitle:e.achievement_subtitle||"",categories:e.categories?.map((e=>({title:e.header,lines:e.lines.map((e=>({name:e.name||"",counter:e.is_unavailable?i.getLang("stories_stat_off"):String(e.counter??""),unavailable:e.is_unavailable})))})))||[]}:null},72034:(e,t,r)=>{r.d(t,{transformDetailedStatsData:()=>s.transformDetailedStatsData,transformNarrativeGetApiResponseToLegacyFormat:()=>a.transformNarrativeGetApiResponseToLegacyFormat,transformPoll:()=>s.transformPoll,transformStoriesToLegacy:()=>a.transformStoriesToLegacy,transformStoryArchiveResponse:()=>i.transformStoryArchiveResponse,transformStoryGetApiResponseToLegacyFormat:()=>a.transformStoryGetApiResponseToLegacyFormat,transformStoryQuestions:()=>s.transformStoryQuestions});r(800841),r(122940);var i=r(407598),a=r(256633),s=r(286776)},256633:(e,t,r)=>{r.d(t,{getVideoSize:()=>R,transformNarrativeGetApiResponseToLegacyFormat:()=>m,transformStoriesToLegacy:()=>k,transformStoryGetApiResponseToLegacyFormat:()=>S});var i=r(171988),a=r(418562),s=r(901219),o=r(542701),n=r(303568),c=r(610989),d=r(8520),l=r(7144),p=r(51308),_=r(800841),u=r(122940),f=r(198882);function S(e,t,r){const{items:i,profiles:s=[],groups:o=[],reaction_sets:c}=e,d=i.map((e=>{const i=e.owner_id||e.stories?.[0]?.owner_id||0,d=(0,p.findOwnerById)(i,s,o)||{id:i},l=e.stories?.filter(Boolean)||[],_=t===n.StoryListName.feed||t===n.StoryListName.discover||t===n.StoryListName.apps,u={id:e.id||(0,a.default)(),author:E(d,s,l[0]?.also_subscribed),has_unseen:e.has_unseen,items:l.map((e=>g(e,d,s,o,r,t))),track_code:e.track_code,can_blacklist:_,app:e.app&&v(e.app),type:e.type,send_mask_hash:"",remove_from_blacklist_hash:"",is_narrative:!1,is_apps:e.type===n.StoryBlockType.appGroupedStories,next_from:""};if(e.grouped?.length&&(u.grouped=S({items:e.grouped,profiles:s,groups:o},t,r)),c&&(u.reaction_set=h(c)),r){const i=function(e,t,r,i,a,s){const o=e.stories?.[0],n=e.app;if("app_grouped_stories"!==e.type||!o)return;const c=g(o,t,r,i,a,s);c.raw_id=c.raw_id+"&meta",c.is_apps_meta_story=!0,n&&(c.app=v(n));return c}(e,d,s,o,r,t);i&&u.items.push(i)}return u}));return d}function m(e,t,r){const{items:i,profiles:s=[],groups:o=[]}=e;return i.map((e=>{const i=e.owner_id||e.stories?.[0]?.owner_id||0,c=(0,p.findOwnerById)(i,s,o)||{id:i},d=e.stories?.filter(Boolean)||[];return{id:(0,a.default)(),author:E(c,s,d[0]?.also_subscribed),items:d.map((e=>g(e,c,s,o,r,t))),can_blacklist:!1,type:n.StoryBlockType.stories,send_mask_hash:"",remove_from_blacklist_hash:"",is_apps:!1,next_from:"",is_narrative:!0,narrative:(0,u.transformNarrative)(e,c)}}))}function v(e){return{url:`/app${e.id}`,name:e.title,photoUrl:e.icon_139||e.icon_150||e.icon_75||""}}function E(e,t=[],r){const i=e.verified?'<div class="page_verified"></div>':"",a=function(e,t=[]){if(!e)return;const r=[],i=e.user_ids||[];return i.forEach((e=>{const i=t.find((t=>t.id===e));i&&r.push({photo_url:i.photo_50||i.photo_100||"",href:(0,s.getOwnerHref)(i),name:i.first_name||"",sex:i.sex||0})})),{total_count:e.count||0,owners:r}}(r,t);if((0,s.isOwnerUser)(e)){const t=e.id,r=e.first_name||"",o=e.last_name||"",n=e.first_name_gen||"",c=e.last_name_gen||"",l=e.first_name_ins||"",p=(0,s.getOwnerFullName)(e),_=o?`${n} ${c}`:n;return{id:t,name:(0,d.escape)(p),name_get:(0,d.escape)(_),firstName:(0,d.escape)(r),first_name_gen:(0,d.escape)(n),first_name_ins:(0,d.escape)(l),photo:e.photo_100||e.photo_50||"",href:(0,s.getOwnerHref)(e),verify:i,gender:e.sex||0,can_follow:y(e),also_subscribed:a}}const o=-e.id,n=(0,d.escape)(e.name||"");return{id:o,name:n,name_get:n,firstName:n,first_name_gen:n,first_name_ins:n,photo:e.photo_100||e.photo_50||"",href:(0,s.getOwnerHref)(e),verify:i,gender:0,can_follow:y(e),also_subscribed:a}}function g(e,t,r,i,a,u){let f,S;if(e.mask?.owner_id){const t=(0,p.findOwnerById)(e.mask?.owner_id,r,i);t&&(f=t.screen_name,(0,s.isOwnerUser)(t)&&(S=t.sex))}const m=A(t,e),v=!m&&(u===n.StoryListName.feed||u===n.StoryListName.apps||u===n.StoryListName.discover);return{owner_id:e.owner_id,raw_id:`${e.owner_id}_${e.id}`,date:(0,c.getSmDate)(e.date||0),time:e.date||0,type:O(e),unread:!e.seen,canLike:Boolean(e.can_like),can_comment:I(e),can_share:Boolean(e.can_share),can_remove:b(e,t),can_delete_with_reason:Boolean(e.can_delete_with_reason),can_manage:m,can_ask:Boolean(e.can_ask),can_ask_anonymous:Boolean(e.can_ask_anonymous),canAddToNarrative:e.can_use_in_narrative,stats:{follow:{event_type:"subscribe",rhash:""},url_view:{event_type:"url_view",rhash:""}},isLiked:Boolean(e.is_liked),likesCount:e.likes_count||0,likeHash:"",reaction_set_id:e.reaction_set_id||"",user_reaction_id:e.user_reaction_id||0,preview_url:"",needMute:Boolean(e.need_mute),muteReply:Boolean(e.mute_reply),isPromo:Boolean(e.is_promo),isProfileQuestion:Boolean(e.is_profile_question),promoCaption:e.is_promo&&e.caption||"",track_code:e.track_code||"",video:{owner_id:e.owner_id,video_id:e.video?.id||0,duration:e.video?.duration||0},link:e.link?{text:e.link.text||"",url:e.link.url||""}:void 0,isPartOfNarrative:Boolean(e.narratives_count),report_hash:"",maskOwnerDomain:f,maskOwnerSex:S,can_hide_reply:w(e,r,i),noSound:Boolean(e.no_sound),isNewQuestions:m&&Boolean(e.questions?.new),views:Boolean(e.views)?(0,o.formatCount)(e.views||0):"",needShowEmptyStats:Boolean(e.need_show_empty_stats),is_expired:Boolean(e.is_expired),is_deleted:Boolean(e.is_deleted),is_private:!Boolean(e.can_see),isAds:Boolean(e.is_ads),isOneTime:Boolean(e.is_one_time),isOneTimeSeen:Boolean(e.is_one_time)&&!Boolean(e.can_see),seenProgress:0,replies:e.replies?.count?(0,o.formatCount)(e.replies.count):"",replies_new_counter:e.replies?.new||0,clickable_stickers:(0,_.transformClickableStickers)(e,r,i,a),askQuestionHash:"",canMarkNotInterested:v,photo_url:e.photo?.sizes&&(0,d.getPhotoSize)(e.photo.sizes,(0,l.isRetina)()?1200:600)?.url||"",small_preview:T(e,a),video_url:e.video?.files?R(e.video.files):"",first_frame:e.video?.first_frame&&(0,d.getPhotoSize)(e.video?.first_frame,800)?.url||"",is_apps_meta_story:!1,repliesCountText:"",authorId:0,isMusicCover:!1,is_authors_ads:e.is_authors_ads,advertiser_info_url:e.advertiser_info_url,ad_marker:e.ad_marker,caption:e.caption,is_best_friends_privacy:e.is_best_friends_privacy}}function k(e,t,r){const{items:i,profiles:s,groups:o,reaction_sets:c}=e,d=i[0]?.owner_id||0,l=(0,p.findOwnerById)(d,s,o)||{id:d},_=t===n.StoryListName.feed||t===n.StoryListName.discover||t===n.StoryListName.apps,u=i.some((e=>!e.seen)),f={id:(0,a.default)(),author:E(l,s,i[0]?.also_subscribed),has_unseen:u,items:i.map((e=>g(e,l,s,o,r,t))),track_code:"",can_blacklist:_,type:n.StoryBlockType.stories,send_mask_hash:"",remove_from_blacklist_hash:"",is_narrative:!1,is_apps:!1,next_from:""};return c&&(f.reaction_set=h(c)),[f]}function h(e){return e.map((({id:e,items:t})=>(0,f.prepareReactionMenuSet)(e,t.map((e=>({...e,id:e.id}))),{imageMenuSize:{width:96,height:96},imagePreviewSize:{width:32,height:32},imageStoryPanelSize:{width:128,height:128},imageStoryPreviewSize:{width:40,height:40}})))}function T(e,t=!1){const r=e.photo?.sizes;if(r)return(0,d.getPhotoSize)(r,t?10:(0,l.isRetina)()?600:300)?.url||"";const i=e.video?.first_frame;return i&&(0,d.getPhotoSize)(i,t?10:320)?.url||""}function y(e){return(0,s.isOwnerUser)(e)?window.vk.id!==e.id&&(e.friend_status===i.FriendsFriendStatusStatusEnumNames.NOT_A_FRIEND||e.friend_status===i.FriendsFriendStatusStatusEnumNames.INCOMING_REQUEST):!e.is_member&&!e.is_closed}function A(e,t){return(0,s.isOwnerUser)(e)?t.owner_id===e.id&&window.vk.id===e.id:t.owner_id===-e.id&&(t.is_ads?Boolean(e.is_advertiser):Boolean(e.is_admin))}function I(e){return e.can_comment?Boolean(e.can_comment):"live_active"===e.type&&Boolean(e.video?.can_comment)}function b(e,t){return!e.is_deleted&&(!e.can_delete_with_reason&&(!!e.can_delete||A(t,e)&&("photo"===e.type||"video"===e.type)))}function w(e,t,r){if(!e.parent_story_owner_id||!e.parent_story_id)return!1;const i=window.vk.id,a=e.parent_story_owner_id;if(a===i)return!0;const o=(0,p.findOwnerById)(a,t,r);return!!(o&&(0,s.isOwnerGroup)(o)&&o.is_admin)}function R(e){const t=["mp4_2160","mp4_1440","mp4_1080","mp4_720","mp4_480","mp4_360","mp4_240","mp4_144"].find((t=>Boolean(e[t])));return t&&e[t]?String(e[t]):""}function O(e){return"photo"===e.type?n.StoryType.PHOTO:"video"===e.type?n.StoryType.VIDEO:"live_active"===e.type||"live_finished"===e.type?n.StoryType.LIVE:n.StoryType.PHOTO}},122940:(e,t,r)=>{r.d(t,{transformNarrative:()=>o});var i=r(8520),a=r(901219),s=(r(51308),r(407598));function o(e,t){const r=`${e.owner_id}_${e.id}`,o=(0,a.isOwnerGroup)(t),n=o&&Boolean(t.is_closed),c={id:e.id,rawId:r,ownerId:e.owner_id,ownerName:(0,i.escape)((o?t.name:(0,a.getOwnerFullName)(t))||""),ownerShortName:(0,i.escape)((o?t.name:(0,a.getOwnerShortName)(t))||""),ownerUrl:(0,a.getOwnerHref)(t),ownerPath:`${o?"club":"id"}${e.owner_id}`,ownerAvatarUrl:t.photo_100||t.photo_50||"",title:(0,i.escape)(e.title),isBookmarked:e.is_favorite,bookmarkHash:"",reportHash:"",canEdit:Boolean(e.can_delete),editHash:"",canView:e.can_see,storiesCount:e.story_ids?.length||0,isOwnerClosedGroup:n,isGroupEditor:n&&Boolean(t.is_admin),url:`${window.location.origin}/narrative${r}`,stories:e.stories?.map(s.transformStoryArchive)||[],isDeleted:e.is_delete,date:"",coverUrl:""};if(e.cover){Object.assign(c,{coverUrl:e.cover.cropped_sizes&&(0,i.getPhotoSize)(e.cover.cropped_sizes,300)?.url||"",coverCrop:{x:e.cover.crop_x||0,y:e.cover.crop_y||0,width:e.cover.crop_width||0,height:e.cover.crop_height||0}}),e.cover.custom_photo&&(c.customCover=function(e,t=[]){if(!e)return;return{photoId:e.id,originalPhotoUrl:e.orig_photo?.url||e.sizes&&(0,i.getPhotoSize)(e.sizes,600)?.url||"",previewUrl:t&&(0,i.getPhotoSize)(t,300)?.url||e.sizes&&(0,i.getPhotoSize)(e.sizes,300)?.url||""}}(e.cover.custom_photo,e.cover.cropped_sizes));const t=e.cover.cover_story_id;if(t){Object.assign(c,{coverStoryId:t,coverStoryRawId:`${e.owner_id}_${t}`});const r=e.stories?.find((e=>e?.id===t));r&&(c.coverStory=(0,s.transformStoryArchive)(r))}}return c}},407598:(e,t,r)=>{r.d(t,{transformStoryArchive:()=>n,transformStoryArchiveResponse:()=>c});var i=r(8520),a=r(535277),s=r(256633),o=r(408063);function n(e){const t=Math.max(e.date?Math.ceil(new Date(1e3*e.date).setUTCHours(0,0,0,0)/1e3):0,a.STORIES_ARCHIVE_START_TIME),r=e.photo?.sizes||e.video?.image,n={id:e.id,rawId:`${e.owner_id}_${e.id}`,listId:`archive${e.owner_id}_${t}`,time:Number(e.date),preview:r&&(0,i.getPhotoSize)(r,350)?.url||"",originalPreviewUrl:r&&(0,i.getPhotoSize)(r,600)?.url||""};return"video"===e.type&&e.video&&Object.assign(n,{videoUrl:e.video.files&&(0,s.getVideoSize)(e.video.files)||"",duration:e.video.duration}),e.link&&Object.assign(n,{linkUrl:(0,o.wrapAwayIfExternal)(e.link.url)||"",linkText:e.link.text||"",linkType:""}),n}function c(e){const{items:t=[]}=e;return t.filter(Boolean).map(n)}},179258:(e,t,r)=>{r.d(t,{createStoriesService:()=>c});var i=r(32489),a=r(124401),s=r(489617),o=r(455234),n=r(175241);const c=({domain:e})=>{const t=e.createEvent("fire/storiesGet"),r=e.createEvent("fire/storiesGetById"),c=e.createEvent("fire/storiesGetArchive"),d=e.createEvent("fire/storiesGetViewers"),l=e.createEvent("fire/storiesGetReplies"),p=e.createEvent("fire/storiesGetQuestions"),_=e.createEvent("fire/storiesGetStats"),u=e.createEvent("fire/storiesGetDetailedStats"),f=e.createEvent("fire/storiesMarkSkipped"),S=e.createEvent("fire/storiesMarkNotInterested"),m=e.createEvent("fire/storiesMarkSeen"),v=e.createEvent("fire/storiesHidePrivacyBlock"),E=e.createEvent("fire/storiesDelete"),g=e.createEvent("fire/storiesAskQuestion"),k=e.createEvent("fire/storiesDeleteQuestion"),h=e.createEvent("fire/storiesBanQuestionAuthor"),T=e.createEvent("fire/storiesUnbanQuestionAuthor"),y=e.createEvent("fire/storiesMarkAppNotificationsSeen"),A=e.createEvent("fire/storiesSubscribeUserToApp"),I=e.createEvent("fire/storiesGetPhotoUploadServer"),b=e.createEvent("fire/storiesGetVideoUploadServer"),w=e.createEvent("fire/storiesSave"),R=e.createEvent("fire/storiesSearch"),O=e.createEvent("fire/storiesUnbanOwner"),N=e.createEvent("fire/storiesBanOwner"),F=e.createEvent("fire/storiesSetDiscoverVisible"),x=e.createEvent("fire/storiesHideReply"),P=e.createEvent("fire/storieHideAllReplies"),D=e.createEffect("fx/storiesGet"),G=e.createEffect("fx/storiesGetById"),C=e.createEffect("fx/storiesGetArchive"),L=e.createEffect("fx/storiesGetViewers"),B=e.createEffect("fx/storiesGetReplies"),U=e.createEffect("fx/storiesGetQuestions"),V=e.createEffect("fx/storiesGetStats"),M=e.createEffect("fx/storiesGetDetailedStats"),W=e.createEffect("fx/storiesMarkSkipped"),K=e.createEffect("fx/storiesMarkNotInterested"),H=e.createEffect("fx/storiesMarkSeen"),z=e.createEffect("fx/storiesHidePrivacyBlock"),Y=e.createEffect("fx/storiesDelete"),Q=e.createEffect("fx/storiesAskQuestion"),$=e.createEffect("fx/storiesDeleteQuestion"),j=e.createEffect("fx/storiesBanQuestionAuthor"),q=e.createEffect("fx/storiesUnbanQuestionAuthor"),J=e.createEffect("fx/storiesMarkAppNotificationsSeen"),X=e.createEffect("fx/storiesSubscribeUserToApp"),Z=e.createEffect("fx/storiesGetPhotoUploadServer"),ee=e.createEffect("fx/storiesGetVideoUploadServer"),te=e.createEffect("fx/storiesSave"),re=e.createEffect("fx/storiesSearch"),ie=e.createEffect("fx/storiesUnbanOwner"),ae=e.createEffect("fx/storiesBanOwner"),se=e.createEffect("fx/storiesSetDiscoverVisible"),oe=e.createEffect("fx/storiesHideReply"),ne=e.createEffect("fx/storiesHideAllReplies"),ce=(0,s.createFriendsAddFx)({domain:e}),de=(0,s.createFriendsDeleteFx)({domain:e}),le=(0,o.createGroupsJoinFx)({domain:e}),pe=(0,o.createGroupsLeaveFx)({domain:e});return D.use(a.apiStoriesGet),G.use(a.apiStoriesGetById),C.use(a.apiStoriesGetArchive),L.use(a.apiStoriesGetViewers),B.use(a.apiStoriesGetReplies),U.use(a.apiStoriesGetQuestions),V.use(a.apiStoriesGetStats),M.use(a.apiStoriesGetDetailedStats),W.use(a.apiStoriesMarkSkipped),K.use(a.apiStoriesMarkNotInterested),H.use(a.apiStoriesMarkSeen),z.use(a.apiStoriesHidePrivacyBlock),Y.use(a.apiStoriesDelete),Q.use(a.apiStoriesAskQuestion),$.use(a.apiStoriesDeleteQuestion),j.use(a.apiStoriesBanQuestionAuthor),q.use(a.apiStoriesUnbanQuestionAuthor),J.use(a.apiStoriesMarkAppNotificationsSeen),X.use(a.apiStoriesSubscribeUserToApp),Z.use(a.apiStoriesGetPhotoUploadServer),ee.use(a.apiStoriesGetVideoUploadServer),te.use(a.apiStoriesSave),re.use(a.apiStoriesSearch),ae.use(a.apiStoriesBanOwner),ie.use(a.apiStoriesUnbanOwner),se.use(a.apiStoriesSetDiscoverVisible),oe.use(a.apiStoriesHideReply),ne.use(a.apiStoriesHideAllReplies),(0,n.connectTrackTmrGroupsJoin)(le),(0,i.sample)({clock:t,target:D}),(0,i.sample)({clock:r,target:G}),(0,i.sample)({clock:c,target:C}),(0,i.sample)({clock:d,target:L}),(0,i.sample)({clock:l,target:B}),(0,i.sample)({clock:p,target:U}),(0,i.sample)({clock:_,target:V}),(0,i.sample)({clock:u,target:M}),(0,i.sample)({clock:f,target:W}),(0,i.sample)({clock:S,target:K}),(0,i.sample)({clock:m,target:H}),(0,i.sample)({clock:v,target:z}),(0,i.sample)({clock:E,target:Y}),(0,i.sample)({clock:g,target:Q}),(0,i.sample)({clock:k,target:$}),(0,i.sample)({clock:h,target:j}),(0,i.sample)({clock:T,target:q}),(0,i.sample)({clock:y,target:J}),(0,i.sample)({clock:A,target:X}),(0,i.sample)({clock:I,target:Z}),(0,i.sample)({clock:b,target:ee}),(0,i.sample)({clock:w,target:te}),(0,i.sample)({clock:R,target:re}),(0,i.sample)({clock:O,target:ie}),(0,i.sample)({clock:N,target:ae}),(0,i.sample)({clock:F,target:se}),(0,i.sample)({clock:x,target:oe}),(0,i.sample)({clock:P,target:ne}),{fireGet:t,fireGetById:r,fireGetArchive:c,fireGetViewers:d,fireGetReplies:l,fireGetQuestions:p,fireGetStats:_,fireGetDetailedStats:u,fireMarkSkipped:f,fireMarkNotInterested:S,fireMarkSeen:m,fireHidePrivacyBlock:v,fireDelete:E,fireAskQuestion:g,fireDeleteQuestion:k,fireBanQuestionAuthor:h,fireUnbanQuestionAuthor:T,fireMarkAppNotificationsSeen:y,fireSubscribeUserToApp:A,fireGetPhotoUploadServer:I,fireGetVideoUploadServer:b,fireSave:w,fireSearch:R,fireUnbanOwner:O,fireBanOwner:N,fireSetDiscoverVisible:F,fireHideReply:x,fireHideAllReplies:P,getFx:D,getByIdFx:G,getArchiveFx:C,getViewersFx:L,getRepliesFx:B,getQuestionsFx:U,getStatsFx:V,getDetailedStatsFx:M,markSkippedFx:W,markNotInterestedFx:K,markSeenFx:H,hidePrivacyBlockFx:z,deleteFx:Y,askQuestionFx:Q,deleteQuestionFx:$,banQuestionAuthorFx:j,unbanQuestionAuthorFx:q,markAppNotificationsSeenFx:J,subscribeUserToAppFx:X,getPhotoUploadServerFx:Z,getVideoUploadServerFx:ee,saveFx:te,searchFx:re,unbanOwnerFx:ie,banOwnerFx:ae,setDiscoverVisibleFx:se,hideReplyFx:oe,hideAllRepliesFx:ne,friendsAddFx:ce,friendsDeleteFx:de,groupsJoinFx:le,groupsLeaveFx:pe}}},666376:(e,t,r)=>{r.d(t,{faveService:()=>m,narrativesService:()=>S,pollsService:()=>v,statsService:()=>f,storiesDomain:()=>_,storiesService:()=>u,userService:()=>E});var i=r(32489),a=r(535277),s=r(258504),o=r(404440),n=r(230752),c=r(845167),d=r(898675),l=r(952597),p=r(399017);const _=(0,i.createDomain)("stories"),u=(0,a.createStoriesService)({domain:_}),f=(0,s.createStatsService)({domain:_}),S=(0,o.createNarrativesService)({domain:_}),m=((0,n.createLikesService)({domain:_}),(0,c.createMessagesService)({domain:_}),(0,d.createFaveService)({domain:_})),v=(0,l.createPollsService)({domain:_}),E=(0,p.createUserService)({domain:_})},856996:(e,t,r)=>{function i(e){return(e?.split("_")??[]).map(Number)}function a(e,t="windows-1251"){return new TextDecoder(t).decode(function(e){const t=atob(e);return Uint8Array.from(t,(e=>e.codePointAt(0)||0))}(e))}r.d(t,{decodeBase64:()=>a,splitStoryRawId:()=>i})},582351:(e,t,r)=>{r.d(t,{getStoryList:()=>s,removeStoryList:()=>o,setApiStoryList:()=>n,setStoryList:()=>a,transformApiStoryList:()=>c});var i=r(72034);function a(e,t){window.cur[`stories_list_${e}`]=t}function s(e){return window.cur[`stories_list_${e}`]}function o(e){delete window.cur[`stories_list_${e}`]}function n(e,t){a(e,c(e,t))}function c(e,t){return(0,i.transformStoryGetApiResponseToLegacyFormat)(t,e,!1)}}}]);try{stManager.done("dist/web/chunks/aee1802d.e430c9e8.js")}catch(e){}