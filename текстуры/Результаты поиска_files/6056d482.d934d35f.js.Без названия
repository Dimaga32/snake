(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[79882],{581204:(e,t,r)=>{"use strict";r.d(t,{ALLOWED_APP_SETTINGS_KEYS:()=>u,CONNECT_DOMAIN:()=>s,DEFAULT_DOMAIN:()=>d,DOMAIN_FILE_URL:()=>c,LANGUAGES:()=>l,LOGIN_DOMAIN:()=>o,MODAL_IFRAME_Z_INDEX:()=>h,OAUTH_DOMAIN:()=>a,VERSION:()=>n});const n="0.1.3",i="vk.com",o=`login.${i}`,a=`oauth.${i}`,s=`id.${i}`,d="vk.com",c="https://vk.ru/domain.txt",u=["agreements","promo","vkc_behavior","vkc_auth_action","vkc_brand","vkc_display_mode","service_groups","external_device_id"],l={RUS:0,UKR:1,ENG:3,SPA:4,GERMAN:6,POL:15,FRA:16,TURKEY:82},h=999999},867122:(e,t,r)=>{"use strict";var n;r.d(t,{CommonErrorReasons:()=>i,ERROR_CODES:()=>n}),function(e){e[e.UNKNOWN=1]="UNKNOWN",e[e.MISSING_PARAM=2]="MISSING_PARAM",e[e.CONNECTION_LOST=3]="CONNECTION_LOST",e[e.USER_DENIED=4]="USER_DENIED",e[e.INVALID_PARAMS=5]="INVALID_PARAMS",e[e.CUSTOM=6]="CUSTOM",e[e.LOADING_ERROR=7]="LOADING_ERROR",e[e.CONNECT_WINDOW_CLOSED=7]="CONNECT_WINDOW_CLOSED",e[e.CONNECT_WINDOW_NOT_OPENED=8]="CONNECT_WINDOW_NOT_OPENED",e[e.CONNECT_DOMAIN_NOT_ALLOWED=9]="CONNECT_DOMAIN_NOT_ALLOWED",e[e.CONNECT_UNKNOWN_SDK_MESSAGE=10]="CONNECT_UNKNOWN_SDK_MESSAGE",e[e.CONNECT_CLIENT_SDK_ERROR=11]="CONNECT_CLIENT_SDK_ERROR",e[e.VALIDATE_ERROR=12]="VALIDATE_ERROR",e[e.CAPTCHA_ERROR=14]="CAPTCHA_ERROR",e[e.OLD_MISSING_PARAM=100]="OLD_MISSING_PARAM"}(n||(n={}));const i={wrongParam:(e,t)=>`Wrong "${e}" param. ${t||""}`,connectWindowNotOpened:()=>"Connect window was not opened.",loadingTimeout:()=>"Loading timeout",validationIsNumber:e=>"The "+e+" parameter must be a number",validationIsString:e=>"The "+e+" parameter must be a string",validationIsRequired:e=>"The "+e+" is required parameter",validationIsNumberOrString:e=>"The "+e+" parameter must be a number or a string",validationIsFunction:e=>"The "+e+" parameter must be а function"}},772902:(e,t,r)=>{"use strict";r.d(t,{Config:()=>h});var n=r(411423),i=r(28995),o=r(581204),a=r(148607),s=r(311933),d=r(735903);let c,u={appId:0,superAppToken:"",superAppTokenV2:"",state:"",redirectUrl:"",mode:r(919507).ConfigAuthMode.InNewTab,loginDomain:o.LOGIN_DOMAIN,oauthDomain:o.OAUTH_DOMAIN,connectDomain:o.CONNECT_DOMAIN,_debug:!1,_localhost:!1},l={};class h{static events=(0,i.default)();constructor(){}static init(e){if(!e.appId)throw new Error("appId required");const t=d.appIdValidator.validate({appId:e.appId});!t.isValid()&&console.error(t.error()),u.appId=e.appId,u.superAppToken=e.superAppToken||"",u.superAppTokenV2=e.superAppTokenV2||"",u.loginDomain=e.loginDomain||o.LOGIN_DOMAIN,u.oauthDomain=e.oauthDomain||o.OAUTH_DOMAIN,u.connectDomain=e.connectDomain||o.CONNECT_DOMAIN,u.redirectUrl=e.redirectUrl||"",u.state=e?.state,u.mode=e?.mode,u.appSettings=e.appSettings,u._debug=!!e._debug,u._localhost=!!e._localhost,n.Config.set({app:u.appId,redirectUrl:u.redirectUrl,state:u.state,mode:u.mode,__vkidDomain:u.connectDomain,__loginDomain:u.loginDomain,__oauthDomain:u.oauthDomain,__debug:u._debug,__localhost:u._debug})}static get(){return u}static setSuperAppToken(e,t={}){const r=a.tokenValidator.validate({token:e});!r.isValid()&&console.error(r.error()),2===t.version?(u.superAppTokenV2=e,h.events.emit(s.ConfigInternalEvents.SUPERAPP_TOKEN_CHANGE_V2,e)):(u.superAppToken=e,h.events.emit(s.ConfigInternalEvents.SUPERAPP_TOKEN_CHANGE,e))}static onRequestSuperAppToken(e){const t=d.requestSuperAppTokenHandlerValidator.validate({handler:e});!t.isValid()&&console.error(t.error()),l.requestSuperAppToken=e}static _requestSuperAppToken(e,t={}){let r;l.requestSuperAppToken&&(r=l.requestSuperAppToken(e,t)),r&&r.then((e=>h.setSuperAppToken(e,t))).catch(console.error)}static onAuth(e){const t=d.authHandlerValidator.validate({handler:e});!t.isValid()&&console.error(t.error()),l.auth=e}static _auth(e={}){let t;l.auth&&(t=l.auth()),t&&t.then((t=>{h.setSuperAppToken(t,e)})).catch(console.error)}static onOpenApp(e){l.openApp=e}static _openApp(e){l.openApp&&l.openApp(e.app)}static onLogout(e){const t=d.logoutHandlerValidator.validate({handler:e});!t.isValid()&&console.error(t.error()),l.logout=e}static _logout(){l.logout&&l.logout()}static fetchDomain(){return Boolean(c)||(c=new Promise((e=>{fetch(o.DOMAIN_FILE_URL).then((e=>e.text())).then((e=>e.trim())).then((e=>{u.loginDomain=u.loginDomain.replace(o.DEFAULT_DOMAIN,e),u.oauthDomain=u.oauthDomain.replace(o.DEFAULT_DOMAIN,e),u.connectDomain=u.connectDomain.replace(o.DEFAULT_DOMAIN,e)})).then(e).catch((t=>{e(),console.warn(t)}))}))),c}}},311933:(e,t,r)=>{"use strict";var n,i;r.d(t,{ConfigInternalEvents:()=>i}),function(e){e.SUPERAPP_TOKEN="VKSDKGeneralSuperAppToken",e.AUTH_NEEDED="VKSDKGeneralAuthNeeded",e.OPEN_APP="VKSDKGeneralOpenApp"}(n||(n={})),function(e){e.SUPERAPP_TOKEN_CHANGE_V2="superAppTokenV2",e.SUPERAPP_TOKEN_CHANGE="superAppToken"}(i||(i={}))},735903:(e,t,r)=>{"use strict";r.d(t,{appIdValidator:()=>c,authHandlerValidator:()=>s,logoutHandlerValidator:()=>d,requestSuperAppTokenHandlerValidator:()=>a});var n=r(867122),i=r(481060),o=r(782272);const a=new o.Validator({handler:[{rule:i.isRequiredHandler,errorText:n.CommonErrorReasons.validationIsRequired("handler")},{rule:i.isFunctionHandler,errorText:n.CommonErrorReasons.validationIsFunction("handler")}]}),s=new o.Validator({handler:[{rule:i.isRequiredHandler,errorText:n.CommonErrorReasons.validationIsRequired("handler")},{rule:i.isFunctionHandler,errorText:n.CommonErrorReasons.validationIsFunction("handler")}]}),d=new o.Validator({handler:[{rule:i.isRequiredHandler,errorText:n.CommonErrorReasons.validationIsRequired("handler")},{rule:i.isFunctionHandler,errorText:n.CommonErrorReasons.validationIsFunction("handler")}]}),c=new o.Validator({appId:[{rule:i.isNumberHandler,errorText:n.CommonErrorReasons.validationIsNumber("appId")}]})},211176:(e,t,r)=>{"use strict";r.d(t,{makeError:()=>i,makeLegacyError:()=>a,makeValidateError:()=>o});var n=r(867122);function i(e,t,r,n){return{type:e,code:t,message:r,params:n}}function o(e,t){return{type:n.ERROR_CODES[n.ERROR_CODES.VALIDATE_ERROR],code:n.ERROR_CODES.VALIDATE_ERROR,message:e,params:t}}function a(e){return e.message?{code:e.code,reason:e.message,data:e.params}:{code:e.code,data:e.params}}},211050:(e,t,r)=>{"use strict";r.d(t,{Auth:()=>c});var n=r(625615),i=r(919507),o=r(290201),a=r(556544),s=r(491550),d=r(685839);class c{static __config;uuid;dataService;opener;interval;close=()=>{this.opener&&this.opener.close()};handleMessage=({origin:e,source:t,data:r})=>{t===this.opener&&this.opener&&(0,o.isDomainAllowed)(e)&&(this.unsubscribe(),r.payload.error?this.dataService.sendAuthorizationFailed(r.payload.error):r.action!==d.AUTH_VK_CONNECT_RESPONSE+this.uuid?this.dataService.sendEventNotSupported():this.dataService.sendSuccessData(r.payload))};handleInterval=()=>{this.opener?.closed&&(this.unsubscribe(),this.dataService.sendNewTabHasBeenClosed())};subscribe=()=>{this.interval=window.setInterval(this.handleInterval,1e3),window.addEventListener("message",this.handleMessage),this.dataService.removeCallback()};unsubscribe=()=>{window.removeEventListener("message",this.handleMessage),clearInterval(this.interval),this.dataService.setCallback(this.close)};loginInNewTab=e=>{this.dataService=new n.AuthDataService,this.opener=window.open(e,"_blank"),this.opener?this.subscribe():this.dataService.sendCannotCreateNewTab(),this.dataService.value.then((e=>{this.redirectWithPayload(e)})).catch(console.error)};loginByRedirect=e=>{location.assign(e)};login=e=>{const t=c.__config.get();this.uuid=(0,s.uuid)();const r={uuid:this.uuid,lang_id:e?.lang,scheme:e?.scheme,screen:e?.screen,response_type:d.AUTH_RESPONSE_TOKEN,action:e?.action?btoa(JSON.stringify(e.action)):void 0,initial_stats_info:e?.entry},n=()=>(0,a.getVKIDUrl)("auth",r,t);t.mode===i.ConfigAuthMode.InNewTab?(r.origin=location.protocol+"//"+location.hostname,this.loginInNewTab(n())):this.loginByRedirect(n())};redirectWithPayload(e){location.assign((0,a.getRedirectWithPayloadUrl)(e,c.__config))}}},625615:(e,t,r)=>{"use strict";r.d(t,{AuthDataService:()=>a});var n=r(591312),i=r(685839),o=r(793427);class a extends n.DataService{sendSuccessData=e=>{this.sendSuccess({type:e.type,token:e.token,ttl:e.ttl})};sendNewTabHasBeenClosed=()=>{this.sendError({code:o.AuthErrorCode.NewTabHasBeenClosed,text:i.AUTH_ERROR_TEXT[o.AuthErrorCode.NewTabHasBeenClosed]})};sendAuthorizationFailed=e=>{this.sendError({code:o.AuthErrorCode.AuthorizationFailed,text:i.AUTH_ERROR_TEXT[o.AuthErrorCode.AuthorizationFailed],details:e})};sendEventNotSupported=()=>{this.sendError({code:o.AuthErrorCode.EventNotSupported,text:i.AUTH_ERROR_TEXT[o.AuthErrorCode.EventNotSupported]})};sendCannotCreateNewTab=()=>{this.sendError({code:o.AuthErrorCode.CannotCreateNewTab,text:i.AUTH_ERROR_TEXT[o.AuthErrorCode.CannotCreateNewTab]})}}},685839:(e,t,r)=>{"use strict";r.d(t,{AUTH_ERROR_TEXT:()=>o,AUTH_RESPONSE_TOKEN:()=>i,AUTH_VK_CONNECT_RESPONSE:()=>a});var n=r(793427);const i="silent_token",o={[n.AuthErrorCode.EventNotSupported]:"Event is not supported",[n.AuthErrorCode.CannotCreateNewTab]:"Cannot create new tab. Try checking your browser settings",[n.AuthErrorCode.NewTabHasBeenClosed]:"New tab has been closed",[n.AuthErrorCode.AuthorizationFailed]:"Authorization failed with an error"},a="vk_connect_response"},793427:(e,t,r)=>{"use strict";var n;r.d(t,{AuthErrorCode:()=>n}),function(e){e[e.EventNotSupported=100]="EventNotSupported",e[e.CannotCreateNewTab=101]="CannotCreateNewTab",e[e.NewTabHasBeenClosed=102]="NewTabHasBeenClosed",e[e.AuthorizationFailed=103]="AuthorizationFailed"}(n||(n={}))},417762:(e,t,r)=>{"use strict";r.d(t,{LOGIN_DOMAIN:()=>o,OAUTH_DOMAIN:()=>a,VERSION:()=>n,VKID_DOMAIN:()=>s});const n="1.1.0",i="vk.com",o=`login.${i}`,a=`oauth.${i}`,s=`id.${i}`},916944:(e,t,r)=>{"use strict";r.d(t,{Bridge:()=>a});var n=r(134376),i=r(769168);const o="vk-sak-sdk";class a extends n.Dispatcher{config;constructor(e){super(),this.config=e,this.handleMessage=this.handleMessage.bind(this),window.addEventListener("message",this.handleMessage)}destroy(){delete this.config,window.removeEventListener("message",this.handleMessage)}sendMessage(e){this.config.iframe.contentWindow?.postMessage({type:o,...e},this.config.origin)}handleMessage(e){this.config.origin&&e.origin===this.config.origin&&e.source===this.config.iframe.contentWindow&&e.data?.type===o?this.events.emit(i.BridgeEvents.MESSAGE,e.data):this.events.emit(i.BridgeEvents.UNSUPPORTED_MESSAGE,e.data)}}},769168:(e,t,r)=>{"use strict";var n;r.d(t,{BridgeEvents:()=>n}),function(e){e.MESSAGE="message",e.UNSUPPORTED_MESSAGE="unsupported_message"}(n||(n={}))},242374:(e,t,r)=>{"use strict";r.d(t,{Config:()=>o});var n=r(417762),i=r(919507);class o{store={app:0,redirectUrl:"",mode:i.ConfigAuthMode.Redirect,__loginDomain:n.LOGIN_DOMAIN,__oauthDomain:n.OAUTH_DOMAIN,__vkidDomain:n.VKID_DOMAIN};set(e){return this.store={...this.store,...e},this}get(){return this.store}}},919507:(e,t,r)=>{"use strict";var n;r.d(t,{ConfigAuthMode:()=>n}),function(e){e.Redirect="redirect",e.InNewTab="new_tab"}(n||(n={}))},591312:(e,t,r)=>{"use strict";r.d(t,{DataService:()=>n});class n{promise;callback;resolve;reject;constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}setCallback=e=>{this.callback=e};removeCallback=()=>{this.callback=null};sendSuccess=e=>{this.resolve(e),this.callback&&this.callback()};sendError=e=>{this.reject(e),this.callback&&this.callback()};get value(){return this.promise}}},134376:(e,t,r)=>{"use strict";r.d(t,{Dispatcher:()=>i});var n=r(306915);class i{events=(0,n.default)();on(e,t){return this.events.on(e,t),this}off(e,t){return this.events.off(e,t),this}}},881113:(e,t,r)=>{"use strict";r.d(t,{isRequired:()=>n});const n=e=>{let t=!0;return("string"==typeof e&&""===e.trim()||void 0===e||null==e)&&(t=!1),{result:t,makeError:e=>`${e} is required parameter`}}},762784:(e,t,r)=>{"use strict";r.d(t,{validator:()=>n});const n=e=>(t,r,n)=>{const i=n.value;n.value=function(t){const r=Object.keys(e);for(let n of r){const r=e[n];r?.forEach((e=>{const{result:r,makeError:i}=e(t[n]);if(!r)throw new Error(i(n))}))}return i?.apply(this,arguments)}}},597725:(e,t,r)=>{"use strict";r.d(t,{WIDGET_ERROR_TEXT:()=>i});var n=r(836621);const i={[n.WidgetErrorCode.TimeoutExceeded]:"timeout",[n.WidgetErrorCode.InternalError]:"internal error"}},885323:(e,t,r)=>{"use strict";var n;r.d(t,{WidgetEvents:()=>n}),function(e){e.START_LOAD="common: start load",e.LOAD="common: load",e.SHOW="common: show",e.HIDE="common: hide",e.CLOSE="common: close",e.ERROR="common: error",e.RESIZE="common: resize"}(n||(n={}))},654968:(e,t,r)=>{"use strict";r.d(t,{getWidgetTemplate:()=>n});const n=e=>`\n<div id="${e}" data-test-id="widget">\n  <style>\n    #${e} {\n      width: 100%;\n      height: 100%;\n      max-width: 100%;\n      max-height: 100%;\n    }\n\n    #${e} iframe {\n      border: none;\n      color-scheme: auto;\n    }\n\n    #${e} .loader,\n    #${e} .error {\n      display: none;\n      width: 100%;\n      height: 100%;\n      text-align: center;\n    }\n  </style>\n  <div class="loader"></div>\n  <div class="error"></div>\n  <iframe width="100%" height="100%"></iframe>\n</div>\n  `},836621:(e,t,r)=>{"use strict";var n,i;r.d(t,{WidgetErrorCode:()=>i,WidgetState:()=>n}),function(e){e.LOADING="loading",e.LOADED="loaded",e.NOT_LOADED="not_loaded"}(n||(n={})),function(e){e[e.TimeoutExceeded=0]="TimeoutExceeded",e[e.InternalError=1]="InternalError"}(i||(i={}))},684422:(e,t,r)=>{"use strict";r.d(t,{Widget:()=>m});var n=r(916944),i=r(769168),o=r(134376),a=r(762784),s=r(881113),d=r(820994),c=r(556544),u=r(491550),l=r(597725),h=r(885323),p=r(654968),f=r(836621);class m extends o.Dispatcher{static __config;static __auth;id=(0,u.uuid)();lang;scheme;vkidAppName="";config;timeoutTimer;bridge;container;templateRenderer=p.getWidgetTemplate;elements;constructor(){super(),this.config=m.__config}render(e){const{container:t,...r}=e;return this.container=t,this.renderTemplate(),this.registerElements(),this.loadWidgetFrame(r),this}close(){clearTimeout(this.timeoutTimer),this.elements?.root?.remove(),this.bridge?.destroy(),this.events.emit(h.WidgetEvents.CLOSE)}show(){return this.elements.root&&(this.elements.root.style.display="block",this.events.emit(h.WidgetEvents.SHOW)),this}hide(){return this.elements.root&&(this.elements.root.style.display="none",this.events.emit(h.WidgetEvents.HIDE)),this}onStartLoadHandler(){this.setState(f.WidgetState.LOADING),this.timeoutTimer=setTimeout((()=>{this.onErrorHandler({code:f.WidgetErrorCode.TimeoutExceeded,text:l.WIDGET_ERROR_TEXT[f.WidgetErrorCode.TimeoutExceeded]})}),5e3),this.events.emit(h.WidgetEvents.START_LOAD)}onLoadHandler(){clearTimeout(this.timeoutTimer),setTimeout((()=>{this.setState(f.WidgetState.LOADED)}),300),this.events.emit(h.WidgetEvents.LOAD)}onErrorHandler(e){clearTimeout(this.timeoutTimer),this.setState(f.WidgetState.NOT_LOADED),this.events.emit(h.WidgetEvents.ERROR,e),this.elements?.iframe?.remove()}onBridgeMessageHandler(e){switch(e.handler){case h.WidgetEvents.LOAD:this.onLoadHandler();break;case h.WidgetEvents.CLOSE:this.close();break;case h.WidgetEvents.ERROR:this.onErrorHandler({code:f.WidgetErrorCode.InternalError,text:l.WIDGET_ERROR_TEXT[f.WidgetErrorCode.InternalError],details:e.params});break;case h.WidgetEvents.RESIZE:this.elements.root.style.height=`${e.params.height}px`}}renderTemplate(){this.container.insertAdjacentHTML("beforeend",this.templateRenderer(this.id))}loadWidgetFrame(e){this.onStartLoadHandler(),this.bridge=new n.Bridge({iframe:this.elements.iframe,origin:`https://${this.config.get().__vkidDomain}`}),this.bridge.on(i.BridgeEvents.MESSAGE,(e=>this.onBridgeMessageHandler(e))),this.elements.iframe.src=this.getWidgetFrameSrc(this.config.get(),e)}getWidgetFrameSrc(e,t){const r={...t,code_challenge:(0,d.generateCodeChallenge)(),code_challenge_method:"s256",origin:location.protocol+"//"+location.host};return(0,c.getVKIDUrl)(this.vkidAppName,r,e)}setState(e){this.elements.root.setAttribute("data-state",e)}registerElements(){const e=document.getElementById(this.id);this.elements={root:e,iframe:e.querySelector("iframe")}}redirectWithPayload(e){location.assign((0,c.getRedirectWithPayloadUrl)(e,m.__config))}}!function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);o>3&&a&&Object.defineProperty(t,r,a)}([(0,a.validator)({container:[s.isRequired]})],m.prototype,"render",null)},411423:(e,t,r)=>{"use strict";r.d(t,{Auth:()=>s,Config:()=>a});var n=r(211050),i=r(242374),o=r(684422);const a=new i.Config;n.Auth.__config=a;const s=new n.Auth;o.Widget.__config=a,o.Widget.__auth=s},52991:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var n=r(864166);function i(e,t,r){return(t=(0,n.default)(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},401771:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var n=r(586395);function i(e,t){if("object"!==(0,n.default)(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==(0,n.default)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}},864166:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var n=r(586395),i=r(401771);function o(e){var t=(0,i.default)(e,"string");return"symbol"===(0,n.default)(t)?t:String(t)}},586395:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r.d(t,{default:()=>n})},679814:(e,t,r)=>{"use strict";r.d(t,{querystring:()=>a});var n=r(52991),i=r(586395);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var a={parse:function(e){if("string"!=typeof e)return{};if(!(e=e.trim().replace(/^[?#&]/,"")))return{};var t=/\?(.+)$/gi.exec(e);return(t?t[1]:e).split("&").reduce((function(e,t){var r=t.split("=");return r[1]&&(e[r[0]]=decodeURIComponent(r[1])),e}),{})},stringify:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==(0,i.default)(e)||null===e)return"";t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,n.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({encode:!0},t);var r=function(e){return t.encode?encodeURIComponent(e):String(e)};return Object.keys(e).reduce((function(n,i){var o=e[i];return void 0===o?n:null===o?(t.skipNull||n.push([r(i),""].join("=")),n):Array.isArray(o)?(o.map((function(e){n.push("".concat(r(i),"[]=").concat(r(e)))})).join(),n):(n.push([r(i),r(o)].join("=")),n)}),[]).join("&")}}},306915:(e,t,r)=>{"use strict";function n(e){return e=e||Object.create(null),{on:function(t,r){(e[t]||(e[t]=[])).push(r)},off:function(t,r){e[t]&&e[t].splice(e[t].indexOf(r)>>>0,1)},emit:function(t,r){(e[t]||[]).slice().map((function(e){e(r)})),(e["*"]||[]).slice().map((function(e){e(t,r)}))}}}r.d(t,{default:()=>n})},581907:(e,t,r)=>{"use strict";r.d(t,{customAlphabet:()=>n,nanoid:()=>i});let n=(e,t=21)=>(r=t)=>{let n="",i=r;for(;i--;)n+=e[Math.random()*e.length|0];return n},i=(e=21)=>{let t="",r=e;for(;r--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t}},290201:(e,t,r)=>{"use strict";r.d(t,{isDomainAllowed:()=>i});const n=["vk.com","vk.ru"],i=e=>!!n.find((t=>e.endsWith(t)))},820994:(e,t,r)=>{"use strict";r.d(t,{generateCodeChallenge:()=>d});var n=r(780754),i=r.n(n),o=r(463009),a=r.n(o),s=r(581907);const d=()=>{const e=(0,s.nanoid)(),t=a()(e);return i().stringify(t).replace(/=*$/g,"").replace(/\+/g,"-").replace(/\//g,"_")}},556544:(e,t,r)=>{"use strict";r.d(t,{getRedirectWithPayloadUrl:()=>s,getVKIDUrl:()=>a});var n=r(679814),i=r(417762),o=r(491550);const a=(e,t,r)=>{const a={...t,uuid:t.uuid||(0,o.uuid)(),v:i.VERSION,sdk_type:"vkid",app_id:r.app,redirect_uri:r.redirectUrl,redirect_state:r.state,debug:r.__debug?1:null,localhost:r.__localhost?1:null},s=n.querystring.stringify(a,{skipNull:!0});return`https://${r.__vkidDomain}/${e}?${s}`},s=(e,t)=>{let r=`${t.get().redirectUrl}?payload=${encodeURIComponent(JSON.stringify(e))}`;return t.get().state&&(r+=`&state=${t.get().state}`),r}},491550:(e,t,r)=>{"use strict";r.d(t,{uuid:()=>n});const n=(0,r(581907).customAlphabet)("qazwsxedcrfvtgbyhnujmikol",6)},28995:(e,t,r)=>{"use strict";function n(e){return e=e||Object.create(null),{on:function(t,r){(e[t]||(e[t]=[])).push(r)},off:function(t,r){e[t]&&e[t].splice(e[t].indexOf(r)>>>0,1)},emit:function(t,r){(e[t]||[]).slice().map((function(e){e(r)})),(e["*"]||[]).slice().map((function(e){e(t,r)}))}}}r.d(t,{default:()=>n})},481060:(e,t,r)=>{"use strict";function n(e){return"number"==typeof e}function i(e){return"string"==typeof e}function o(e){return void 0!==e&&""!==e&&null!==e}function a(e){return n(e)||i(e)}function s(e){return"function"==typeof e}r.d(t,{isFunctionHandler:()=>s,isNumberHandler:()=>n,isNumberOrStringHandler:()=>a,isRequiredHandler:()=>o,isStringHandler:()=>i})},782272:(e,t,r)=>{"use strict";r.d(t,{Validator:()=>o});var n=r(211176);class i{errorText;params;valid;constructor(e="Parameter validation error",t,r){this.errorText=e,this.params=t,this.valid=r}isValid(){return Boolean(this.valid)}error(e){return this.isValid()?null:e?(0,n.makeLegacyError)((0,n.makeValidateError)(this.errorText,this.params)):(0,n.makeValidateError)(this.errorText,this.params)}}class o{rules;constructor(e){this.rules=e}validate(e){for(let t in this.rules)if(this.rules.hasOwnProperty(t))for(let r=0;r<this.rules[t].length;r++){const n=this.rules[t][r];if(!n.rule(e[t]))return new i(n.errorText,e,!1)}return new i("",e,!0)}}},148607:(e,t,r)=>{"use strict";r.d(t,{messageRequirementValidator:()=>d,onOffValidator:()=>s,tokenValidator:()=>a});var n=r(867122),i=r(481060),o=r(782272);const a=new o.Validator({token:[{rule:i.isStringHandler,errorText:n.CommonErrorReasons.validationIsString("token")}]}),s=new o.Validator({event:[{rule:i.isStringHandler,errorText:n.CommonErrorReasons.validationIsString("event")},{rule:i.isRequiredHandler,errorText:n.CommonErrorReasons.validationIsRequired("event")}],handler:[{rule:i.isRequiredHandler,errorText:n.CommonErrorReasons.validationIsRequired("handler")}]}),d=(new o.Validator({app:[{rule:i.isNumberOrStringHandler,errorText:n.CommonErrorReasons.validationIsNumberOrString("app")},{rule:i.isRequiredHandler,errorText:n.CommonErrorReasons.validationIsRequired("app")}]}),new o.Validator({message:[{rule:i.isRequiredHandler,errorText:n.CommonErrorReasons.validationIsRequired("message")}]}))},319021:function(e,t,r){var n;e.exports=(n=n||function(e,t){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==r.g&&r.g.crypto&&(n=r.g.crypto),!n)try{n=r(650477)}catch(e){}var i=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),a={},s=a.lib={},d=s.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=s.WordArray=d.extend({init:function(e,r){e=this.words=e||[],this.sigBytes=r!=t?r:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,i=e.sigBytes;if(this.clamp(),n%4)for(var o=0;o<i;o++){var a=r[o>>>2]>>>24-o%4*8&255;t[n+o>>>2]|=a<<24-(n+o)%4*8}else for(var s=0;s<i;s+=4)t[n+s>>>2]=r[s>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=d.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(i());return new c.init(t,e)}}),u=a.enc={},l=u.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var o=t[i>>>2]>>>24-i%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new c.init(r,t/2)}},h=u.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var o=t[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new c.init(r,t)}},p=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(h.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return h.parse(unescape(encodeURIComponent(e)))}},f=s.BufferedBlockAlgorithm=d.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r,n=this._data,i=n.words,o=n.sigBytes,a=this.blockSize,s=o/(4*a),d=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,u=e.min(4*d,o);if(d){for(var l=0;l<d;l+=a)this._doProcessBlock(i,l);r=i.splice(0,d),n.sigBytes-=u}return new c.init(r,u)},clone:function(){var e=d.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),m=(s.Hasher=f.extend({cfg:d.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new m.HMAC.init(e,r).finalize(t)}}}),a.algo={});return a}(Math),n)},780754:function(e,t,r){var n;e.exports=(n=r(319021),function(){var e=n,t=e.lib.WordArray;function r(e,r,n){for(var i=[],o=0,a=0;a<r;a++)if(a%4){var s=n[e.charCodeAt(a-1)]<<a%4*2|n[e.charCodeAt(a)]>>>6-a%4*2;i[o>>>2]|=s<<24-o%4*8,o++}return t.create(i,o)}e.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp();for(var i=[],o=0;o<r;o+=3)for(var a=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,s=0;s<4&&o+.75*s<r;s++)i.push(n.charAt(a>>>6*(3-s)&63));var d=n.charAt(64);if(d)for(;i.length%4;)i.push(d);return i.join("")},parse:function(e){var t=e.length,n=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var o=0;o<n.length;o++)i[n.charCodeAt(o)]=o}var a=n.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(t=s)}return r(e,t,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),n.enc.Base64)},463009:function(e,t,r){var n;e.exports=(n=r(319021),function(e){var t=n,r=t.lib,i=r.WordArray,o=r.Hasher,a=t.algo,s=[],d=[];!function(){function t(t){for(var r=e.sqrt(t),n=2;n<=r;n++)if(!(t%n))return!1;return!0}function r(e){return 4294967296*(e-(0|e))|0}for(var n=2,i=0;i<64;)t(n)&&(i<8&&(s[i]=r(e.pow(n,.5))),d[i]=r(e.pow(n,1/3)),i++),n++}();var c=[],u=a.SHA256=o.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],u=r[5],l=r[6],h=r[7],p=0;p<64;p++){if(p<16)c[p]=0|e[t+p];else{var f=c[p-15],m=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,g=c[p-2],E=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;c[p]=m+c[p-7]+E+c[p-16]}var v=n&i^n&o^i&o,_=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),A=h+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&u^~s&l)+d[p]+c[p];h=l,l=u,u=s,s=a+A|0,a=o,o=i,i=n,n=A+(_+v)|0}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+a|0,r[4]=r[4]+s|0,r[5]=r[5]+u|0,r[6]=r[6]+l|0,r[7]=r[7]+h|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;return r[i>>>5]|=128<<24-i%32,r[14+(i+64>>>9<<4)]=e.floor(n/4294967296),r[15+(i+64>>>9<<4)]=n,t.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(u),t.HmacSHA256=o._createHmacHelper(u)}(Math),n.SHA256)},650477:()=>{}}]);try{stManager.done("dist/web/chunks/6056d482.d934d35f.js")}catch(e){}